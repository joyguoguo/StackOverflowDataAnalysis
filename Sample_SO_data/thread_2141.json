{
  "question" : {
    "question_id" : 79643073,
    "title" : "How to convert Scala `for..yield` (for comprehension) to Java?",
    "body" : "<p>How to convert the following scala to java code?</p>\n<pre class=\"lang-scala prettyprint-override\"><code>for {\n  x &lt;- List(1, 2)\n  y &lt;- List(3, 4)\n} yield (x, y)\n</code></pre>\n<p>Is it possible? what is <code>yield</code>?</p>\n<p>I guess it's possible to convert any scala code to java...</p>\n",
    "tags" : [ "java", "scala", "scala-java-interop" ],
    "owner" : {
      "account_id" : 15096004,
      "reputation" : 3171,
      "user_id" : 10894456,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/088b89cc035266c3d62b8578c7c4d9fa?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J.J. Beam",
      "link" : "https://stackoverflow.com/users/10894456/j-j-beam"
    },
    "is_answered" : true,
    "view_count" : 147,
    "answer_count" : 3,
    "score" : 0,
    "last_activity_date" : 1748698401,
    "creation_date" : 1748471087,
    "link" : "https://stackoverflow.com/questions/79643073/how-to-convert-scala-for-yield-for-comprehension-to-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79643397,
    "question_id" : 79643073,
    "body" : "<p>@Tim already explained what is <code>for..yield</code>.</p>\n<p>The Java code to do the same would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Java doesn't have tuples, create your own type\nrecord Pair(int x, int y) {}\n\nList&lt;Pair&gt; result = \n  List.of(1, 2)\n      .stream()\n      .flatMap(x -&gt; List.of(3, 4)\n                        .stream()\n                        .map(y -&gt; new Pair(x, y))\n      )\n      .toList();\n</code></pre>\n<p><em>IMHO this is a great example of the conciceness and exprenessiveness of Scala, especially when working with collections.</em></p>\n",
    "score" : 5,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 7034556,
      "reputation" : 15907,
      "user_id" : 5389127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ga&#235;l J",
      "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
    },
    "creation_date" : 1748499804,
    "last_activity_date" : 1748605109,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79643084,
    "question_id" : 79643073,
    "body" : "<p>You need to read up on this, but <code>for</code> is just syntactic sugar that is converted to <code>map</code>, <code>flatMap</code>, <code>filter</code>, and <code>foreach</code> calls.</p>\n<p>Your <code>for</code> statement</p>\n<pre><code>for {\n  x &lt;- List(1, 2)\n  y &lt;- List(3, 4)\n} yield (x, y)\n</code></pre>\n<p>becomes</p>\n<pre><code>List(1,2).flatMap(x =&gt; List(3,4).map(y =&gt; (x, y)))\n</code></pre>\n<p>This is just function calls which can easily be converted to Java.</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10391539,
      "reputation" : 27634,
      "user_id" : 7662670,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/fPasV.jpg?s=256",
      "display_name" : "Tim",
      "link" : "https://stackoverflow.com/users/7662670/tim"
    },
    "creation_date" : 1748471603,
    "last_activity_date" : 1748471603,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79645774,
    "question_id" : 79643073,
    "body" : "<p>All the existing replies are spot on, but I wanted to give a slightly different perspective on how to translate that into <em>imperative</em> Java code:</p>\n<pre><code>record Pair(int x, int y) {}\n\nvar yielded = new ArrayList&lt;Pair&gt;();\nfor (var x: List.of(1, 2)) {\n  for (var y: List.of(3, 4)) {\n    yielded.add(new Pair(x, y));\n  }\n}\n</code></pre>\n<p>I'm not necessarily suggesting to do any of this, but maybe it can help people with no prior exposure to functional programming match Scala <code>for</code>-comprehensions with their experience.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3908845,
      "reputation" : 13429,
      "user_id" : 3314107,
      "user_type" : "registered",
      "accept_rate" : 80,
      "profile_image" : "https://www.gravatar.com/avatar/5aa98fc797d37e7a7448cb788abac548?s=256&d=identicon&r=PG",
      "display_name" : "stefanobaghino",
      "link" : "https://stackoverflow.com/users/3314107/stefanobaghino"
    },
    "creation_date" : 1748620941,
    "last_activity_date" : 1748698401,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79645774" : [ {
      "comment_id" : 140475017,
      "post_id" : 79645774,
      "body" : "This is actually a great &quot;mapping&quot; of the <code>for..yield</code> from Scala for someone that is used to imperative code. I had never really thought of it this way :)",
      "score" : 1,
      "owner" : {
        "account_id" : 7034556,
        "reputation" : 15907,
        "user_id" : 5389127,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Ga&#235;l J",
        "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
      },
      "creation_date" : 1748697742,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79643084" : [ {
      "comment_id" : 140468327,
      "post_id" : 79643084,
      "body" : "@markspace <code>map</code> is for transforming each item of the input to something else. Pretty sure it exists also in Java on <code>Streams</code>. Here <code>List(3, 4).map(..)</code> returns <code>List((x,3),(x,4))</code>, so a <b>list</b> of pairs. Then the <code>flatMap</code> does that for each <code>x</code> and <b>flatten</b> the list of lists into a list. End result is the list of all pairs <code>(1,3),(1,4),(2,3),(2,4)</code>.",
      "score" : 4,
      "owner" : {
        "account_id" : 7034556,
        "reputation" : 15907,
        "user_id" : 5389127,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Ga&#235;l J",
        "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
      },
      "creation_date" : 1748499371,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140467912,
      "post_id" : 79643084,
      "body" : "I don&#39;t about &quot;easily.&quot;  What going on with <code>map</code>?  Does this produce a map of the pairs (1,3), (2,4)?",
      "score" : 0,
      "owner" : {
        "account_id" : 2709823,
        "reputation" : 11069,
        "user_id" : 2338547,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
        "display_name" : "markspace",
        "link" : "https://stackoverflow.com/users/2338547/markspace"
      },
      "creation_date" : 1748478087,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79643397" : [ {
      "comment_id" : 140473143,
      "post_id" : 79643397,
      "body" : "I just wanted to point out one important difference between the Scala Collections API and the Java Streams API: the latter is always lazy for intermediate operations (like map and flatMap), the former requires <i>a little bit</i> extra to make it so: <a href=\"https://docs.scala-lang.org/overviews/collections-2.13/views.html\" rel=\"nofollow noreferrer\">docs.scala-lang.org/overviews/collections-2.13/views.html</a>",
      "score" : 1,
      "owner" : {
        "account_id" : 3908845,
        "reputation" : 13429,
        "user_id" : 3314107,
        "user_type" : "registered",
        "accept_rate" : 80,
        "profile_image" : "https://www.gravatar.com/avatar/5aa98fc797d37e7a7448cb788abac548?s=256&d=identicon&r=PG",
        "display_name" : "stefanobaghino",
        "link" : "https://stackoverflow.com/users/3314107/stefanobaghino"
      },
      "creation_date" : 1748621047,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140472345,
      "post_id" : 79643397,
      "body" : "@J.J.Beam <code>for..yield</code> is syntactic sugar, I can agree with you. Read the desugared version in Tim&#39;s answer: it&#39;s still way more concise than Java and super easy to understand. Having to use <code>Stream</code>s just to do a <code>map</code> or <code>flatMap</code> over a list is not just more lines, it&#39;s also harder to read, your have to read lines that are &quot;tech/implementation details&quot; whereas you&#39;d want to just read the intent. Scala is not concise just to be concise (even though some people abused it), it&#39;s concise to focus on what is important. Functional paradigm.",
      "score" : 0,
      "owner" : {
        "account_id" : 7034556,
        "reputation" : 15907,
        "user_id" : 5389127,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Ga&#235;l J",
        "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
      },
      "creation_date" : 1748605787,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140470907,
      "post_id" : 79643397,
      "body" : "<code>IMHO this is a great example of the conciseness that Scala can give, especially when working with collections.</code> As a stakeholder / investor I&#39;d prefer to have understandable code rather then conciseness. There are way less people who able to understand the original piece of code and need to seek and hire them hardly and pay way more for saving some line in a source file (i.e. for nothing) LOL",
      "score" : 0,
      "owner" : {
        "account_id" : 15096004,
        "reputation" : 3171,
        "user_id" : 10894456,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/088b89cc035266c3d62b8578c7c4d9fa?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "J.J. Beam",
        "link" : "https://stackoverflow.com/users/10894456/j-j-beam"
      },
      "creation_date" : 1748559916,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140470143,
      "post_id" : 79643397,
      "body" : "I assumed the inputs are two <code>List</code>s. Regarding using a list to represent a pair, it sounds quite unsafe to me, a <code>record</code> is a great fit as it can also be destructured in pattern matching in recent Java version I believe.",
      "score" : 1,
      "owner" : {
        "account_id" : 7034556,
        "reputation" : 15907,
        "user_id" : 5389127,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Ga&#235;l J",
        "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
      },
      "creation_date" : 1748538715,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140469404,
      "post_id" : 79643397,
      "body" : "Finally <code>.collect(Collectors.toList());</code> can be replaced by <code>toList();</code> in newer versions of Java (v 21 here).",
      "score" : 1,
      "owner" : {
        "account_id" : 2709823,
        "reputation" : 11069,
        "user_id" : 2338547,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
        "display_name" : "markspace",
        "link" : "https://stackoverflow.com/users/2338547/markspace"
      },
      "creation_date" : 1748525081,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140469381,
      "post_id" : 79643397,
      "body" : "You could also replace the Pair class with a list: <code>.map( y -&gt; List.of(x,y))</code>",
      "score" : 0,
      "owner" : {
        "account_id" : 2709823,
        "reputation" : 11069,
        "user_id" : 2338547,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
        "display_name" : "markspace",
        "link" : "https://stackoverflow.com/users/2338547/markspace"
      },
      "creation_date" : 1748524644,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140469337,
      "post_id" : 79643397,
      "body" : "You could make this a bit more concise by using <code>Stream.of(1,2)</code> instead of <code>List.of(1,2).stream()</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 2709823,
        "reputation" : 11069,
        "user_id" : 2338547,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
        "display_name" : "markspace",
        "link" : "https://stackoverflow.com/users/2338547/markspace"
      },
      "creation_date" : 1748523684,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140468494,
      "post_id" : 79643397,
      "body" : "Thank you! I didn&#39;t know the Java equivalent. I have also learned where rust gets its &quot;functional&quot; coding style from. And, yes, Scala is SO much more clear and expressive.",
      "score" : 1,
      "owner" : {
        "account_id" : 10391539,
        "reputation" : 27634,
        "user_id" : 7662670,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/fPasV.jpg?s=256",
        "display_name" : "Tim",
        "link" : "https://stackoverflow.com/users/7662670/tim"
      },
      "creation_date" : 1748504070,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}