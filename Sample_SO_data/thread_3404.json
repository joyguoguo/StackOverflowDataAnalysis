{
  "question" : {
    "question_id" : 79551420,
    "title" : "mvn deploy:deploy on an existing correct jar results in corrupt jar in artifactory",
    "body" : "<p>I would like to upload, deploy an existing jar to artifactory.</p>\n<p>There is a pipeline from a third party, I have no control over whatsoever, which step 1 will build a jar. The jar is then put on a host, in its file directory. Again, I have no control over the job itself.</p>\n<p>But I can see when manually getting into the host that the jar is correct by doing <code>jar xf thejar.jar</code>. The extracted content would have all the proper class files.</p>\n<p>Now, my part, step 2, I am trying to upload this jar into an artifactory.</p>\n<p>I understand there is an option to run <code>mvn deploy</code>, but this would run all the previous steps of the maven life cycle. Since the jar is correct, I would like to avoid this duplication (running all the previous step of the maven life cycle) and just upload the jar.</p>\n<p>I came across 2 solutions so far:</p>\n<ol>\n<li><p>run <code>mvn deploy:deploy</code> it seems this solution does not rerun everything, but just try to upload the jar</p>\n</li>\n<li><p>run <code>mvn jar:jar deploy:deploy</code> same, it seems this solution does not rerun everything, but just try to upload the jar</p>\n</li>\n</ol>\n<p>However, solution 1 would yield the following issue:</p>\n<pre><code>[INFO] ----------------------&lt; com.example:mavendeploy &gt;-----------------------\n[INFO] Building mavendeploy 4.3\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- deploy:3.1.2:deploy (default-cli) @ mavendeploy ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.329 s\n[INFO] Finished at: 2025-T19:26:20Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-deploy-plugin:3.1.2:deploy (default-cli) on project mavendeploy: The packaging plugin for project mavendeploy did not assign a file to the build artifact -&gt; [Help 1]\n</code></pre>\n<p>It looks like it does not even detect the jar.</p>\n<p>While the second solution will yield this issue.</p>\n<pre><code>[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- jar:3.4.1:jar (default-cli) @ mavendeploy ---\n[WARNING] JAR will be empty - no content was marked for inclusion!\n[INFO] Building jar: /builds/path/to/jar/mavendeploy-4.3.jar\n[INFO] \n[INFO] --- deploy:3.1.2:deploy (default-cli) @ mavendeploy ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>While it seems to detect the correct jar properly, there is this warning, <code>JAR will be empty</code> and also, while the jar seems to be indeed uploaded to artifactory, the jar downloaded from the artifactory does not contain any of the classes files. Why?</p>\n<p>What is the proper way to upload an existing jar into artifactory using <code>mvn deploy</code> (hopefully without having to rerun the whole maven lifecycle, since the jar is already there)?</p>\n<p>What did I do wrong in solution 1 or solution 2?</p>\n",
    "tags" : [ "java", "maven", "jar" ],
    "owner" : {
      "account_id" : 14482834,
      "reputation" : 5468,
      "user_id" : 10461625,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/fgo5D.jpg?s=256",
      "display_name" : "PatPanda",
      "link" : "https://stackoverflow.com/users/10461625/patpanda"
    },
    "is_answered" : true,
    "view_count" : 70,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1743626884,
    "creation_date" : 1743622456,
    "link" : "https://stackoverflow.com/questions/79551420/mvn-deploydeploy-on-an-existing-correct-jar-results-in-corrupt-jar-in-artifacto",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79551554,
    "question_id" : 79551420,
    "body" : "<p>To upload an existing artifact, you need to use <code>deploy:deploy-file</code></p>\n<p>See also <a href=\"https://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html</a></p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 888714,
      "reputation" : 36707,
      "user_id" : 927493,
      "user_type" : "registered",
      "accept_rate" : 61,
      "profile_image" : "https://i.sstatic.net/sxsnm.png?s=256",
      "display_name" : "JF Meier",
      "link" : "https://stackoverflow.com/users/927493/jf-meier"
    },
    "creation_date" : 1743626884,
    "last_activity_date" : 1743626884,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79551554" : [ {
      "comment_id" : 140292977,
      "post_id" : 79551554,
      "body" : "This is actually correct, something like this would work <code>mvn deploy:deploy-file -no-transfer-progress -DskipTests -DgroupId=com.example -DartifactId=mavendeploy -Dversion=4.3 repositoryId=someid -Dpackaging=jar -Dfile=target&#47;mavendeploy-4.3.jar -Durl=https:&#47;&#47;artifactory.com&#47;artifactory&#47;path -s &quot;settings.xml&quot;</code> upvoted and accepted",
      "score" : 0,
      "owner" : {
        "account_id" : 14482834,
        "reputation" : 5468,
        "user_id" : 10461625,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/fgo5D.jpg?s=256",
        "display_name" : "PatPanda",
        "link" : "https://stackoverflow.com/users/10461625/patpanda"
      },
      "creation_date" : 1743649518,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}