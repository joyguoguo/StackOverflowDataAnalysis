{
  "question" : {
    "question_id" : 79551351,
    "title" : "How to read dependencies in Quarkus (maven)",
    "body" : "<p>I have a library, which a service can import. Among other things, this library is supposed to run a check if a quarkus-info dependency is installed on the service that is using the library.</p>\n<p>How could I understand if a quarkus-info dependency is installed at runtime? One of the ideas I had is to run mvn quarkus:dependency-tree and read through each line if it contains &quot;quarkus-info&quot;. Manually in cmd I can do it just fine. However, with Java code that fails -</p>\n<pre><code>ProcessBuilder processBuilder = new ProcessBuilder(&quot;mvn&quot;, &quot;quarkus:dependency-tree&quot;);\nprocessBuilder.redirectErrorStream(true);\nProcess process = processBuilder.start();\n</code></pre>\n<p>results in</p>\n<blockquote>\n<p>Cannot run program &quot;mvn&quot;: CreateProcess error=2, The system cannot\nfind the file specified</p>\n</blockquote>\n",
    "tags" : [ "java", "maven", "quarkus" ],
    "owner" : {
      "account_id" : 13985983,
      "reputation" : 401,
      "user_id" : 10101081,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/PQ96B.jpg?s=256",
      "display_name" : "MinisX",
      "link" : "https://stackoverflow.com/users/10101081/minisx"
    },
    "is_answered" : true,
    "view_count" : 123,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1743676857,
    "creation_date" : 1743619872,
    "link" : "https://stackoverflow.com/questions/79551351/how-to-read-dependencies-in-quarkus-maven",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79552692,
    "question_id" : 79551351,
    "body" : "<p>You need to do something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void hasQuarkusInfo() {\n   try {\n      Class.forName(&quot;io.quarkus.info.BuildInfo&quot;, false, Thread.currentThread().getContextClassLoader());\n   } catch(ClassNotFoundException ignored) {\n      return false;\n   }  \n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 2922228,
      "reputation" : 64842,
      "user_id" : 2504224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ACuxG.png?s=256",
      "display_name" : "geoand",
      "link" : "https://stackoverflow.com/users/2504224/geoand"
    },
    "creation_date" : 1743676857,
    "last_activity_date" : 1743676857,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140294220,
    "post_id" : 79551351,
    "body" : "Great, see my answer",
    "score" : 0,
    "owner" : {
      "account_id" : 2922228,
      "reputation" : 64842,
      "user_id" : 2504224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ACuxG.png?s=256",
      "display_name" : "geoand",
      "link" : "https://stackoverflow.com/users/2504224/geoand"
    },
    "creation_date" : 1743676894,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140293575,
    "post_id" : 79551351,
    "body" : "@geoand Yes, that is correct. Both, the library and the service are written in Quarkus. The library has a method which runs on startUp. The library is imported into the service through pom.xml. Each service uses this library, but not each service uses quarkus-info (import in pom.xml). I want this library to be able to tell if quarkus-info is used by the service or not.",
    "score" : 0,
    "owner" : {
      "account_id" : 13985983,
      "reputation" : 401,
      "user_id" : 10101081,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/PQ96B.jpg?s=256",
      "display_name" : "MinisX",
      "link" : "https://stackoverflow.com/users/10101081/minisx"
    },
    "creation_date" : 1743666597,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140293254,
    "post_id" : 79551351,
    "body" : "Just so I understand properly, the service is a Quarkus application, right? And you want your library at runtime to be able to tell you whether the <code>quarkus-info</code> extension is part of the service that included the library, correct?",
    "score" : 0,
    "owner" : {
      "account_id" : 2922228,
      "reputation" : 64842,
      "user_id" : 2504224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ACuxG.png?s=256",
      "display_name" : "geoand",
      "link" : "https://stackoverflow.com/users/2504224/geoand"
    },
    "creation_date" : 1743659660,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79552692" : [ {
      "comment_id" : 140299989,
      "post_id" : 79552692,
      "body" : "Thanks, this does the job. Though after playing around I went with a bit different approach since I decided that the library will also build the object representing the quarkus-info data. Therefore I query the end-point &lt;serviceURL&gt;/q/info and if I get the answer, then the the dependency is installed. And right away I can build the object from the response.  The drawback of my approach is that first I get false negative as onStartUp method runs faster than the initialization of the /q/info end-point. However, in my case it&#39;s not a problem, since library logic is executed every 2min anyways.",
      "score" : 1,
      "owner" : {
        "account_id" : 13985983,
        "reputation" : 401,
        "user_id" : 10101081,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/PQ96B.jpg?s=256",
        "display_name" : "MinisX",
        "link" : "https://stackoverflow.com/users/10101081/minisx"
      },
      "creation_date" : 1743780385,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}