{
  "question" : {
    "question_id" : 79566835,
    "title" : "How to add multiple visible signature stamps to a document using PDFBox while maintaining 1 valid digital signature",
    "body" : "<p>I am trying to implement a solution using PDFBox (version 2.0.24) that allows adding multiple visual signature stamps while maintaining a valid digital signature. This is based on the requirement that users need to see the signatures on the pages after signing has been performed once. <a href=\"https://drive.google.com/file/d/1CX5699EkDmgy4wPmoc0UwSJHbVRcXbuu/view?usp=sharing\" rel=\"nofollow noreferrer\">This attached signed PDF</a> is the expectation output performed by skribble.</p>\n<p>There is <a href=\"https://stackoverflow.com/a/79504390\">similar solution from mkl</a>but the output does not meet my requirements because each visible signature has its own valid signature field (<code>rev</code>), which appears separately in the signature panel of Adobe Reader.</p>\n<p>I tried the approach below that allows only one signatureField and its widget is created and provided for <code>addSignatureField</code>. This approach based on the previously mentioned solution, but it seems the library does not behave correctly. All the visual signature stamps end up sharing the same location, even though different positions are specified for different pages. Additionally, when placing multiple visible signatures on the same page, only the last one is visible.</p>\n<pre class=\"lang-java prettyprint-override\"><code>PDSignature pdSignature = new PDSignature();\n...\nthis.pdDocument.addSignature(pdSignature);\nremoveSignatureField(acroForm, pdSignature);\n\nPDSignatureField signatureField = new PDSignatureField(acroForm);\nsignatureField.setValue(pdSignature);\nPDAnnotationWidget widget = signatureField.getWidgets().get(0);\nfor (SignatureDefinition signatureDefinition : this.signatureDefinitions) {\n    ...\n    addSignatureField(signatureField, widget, this.pdDocument, pdPage, rect, pdSignature);\n}\n</code></pre>\n<p>Adjustment on <code>addSignatureField</code> method</p>\n<pre class=\"lang-java prettyprint-override\"><code>void addSignatureField(PDSignatureField signatureField, PDAnnotationWidget widget, PDDocument pdDocument, PDPage pdPage, PDRectangle rectangle, PDSignature signature) throws IOException {\n  PDAcroForm acroForm = pdDocument.getDocumentCatalog().getAcroForm();\n  List&lt;PDField&gt; acroFormFields = acroForm.getFields();\n\n  // PDSignatureField signatureField = new PDSignatureField(acroForm);\n  // signatureField.setValue(signature);\n  PDAnnotationWidget widget = signatureField.getWidgets().get(0);\n  acroFormFields.add(signatureField);\n\n  widget.setRectangle(rectangle);\n  widget.setPage(pdPage);\n  ...\n</code></pre>\n<p>Is there an appropriate way to achieve the expected output using PDFBox?</p>\n",
    "tags" : [ "java", "pdfbox", "digital-signature" ],
    "owner" : {
      "account_id" : 16075330,
      "reputation" : 1,
      "user_id" : 11602669,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-D7YTOZtampw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5RLf-cWS5A5r0fRTjISTqw19z9Q/mo/s256-rj/photo.jpg",
      "display_name" : "dtr",
      "link" : "https://stackoverflow.com/users/11602669/dtr"
    },
    "is_answered" : false,
    "view_count" : 117,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1750597527,
    "creation_date" : 1744292896,
    "link" : "https://stackoverflow.com/questions/79566835/how-to-add-multiple-visible-signature-stamps-to-a-document-using-pdfbox-while-ma",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79567902,
    "question_id" : 79566835,
    "body" : "<p>Your source example is FLAWED as it has encoded contents which invalidate the signature. We will see later how that may be avoided.</p>\n<p><a href=\"https://i.sstatic.net/oTknWsBA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/oTknWsBA.png\" alt=\"enter image description here\" /></a></p>\n<p>It does not matter what application is used for PDF signing since it needs to be perfectly passable after encryption, So the first step is ensure you have a clean minimal working  example.</p>\n<p>Here the nominated file has been cleaned to remove all the problems that can arise after the file is signed.</p>\n<p><a href=\"https://i.sstatic.net/3MG0kolD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/3MG0kolD.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is above template file for what was eventually used for adding the signatures.</p>\n<pre><code>%PDF-1.7\n%€€€€\n1 0 obj &lt;&lt;/Title(PDF For Signing)/CreationDate(D:20250410)/CreationDate--Text(D:20250410)/Creator(Reader XI)/ModDate(D:20250410)/Producer(Adobe)&gt;&gt; endobj\n2 0 obj &lt;&lt;/Type/Catalog/Pages 3 0 R&gt;&gt; endobj\n3 0 obj &lt;&lt;/Type/Pages/Count 2/Kids[4 0 R 6 0 R]&gt;&gt; endobj\n4 0 obj &lt;&lt;/Type/Page/Contents 5 0 R/CropBox[0 0 612 792]/MediaBox[0 0 612 792]/Parent 3 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 8 0 R&gt;&gt;&gt;&gt;/Rotate 0&gt;&gt; endobj\n5 0 obj &lt;&lt;/Length 975&gt;&gt;\nstream\nq 0 0 0 rg 2 J BT /F1 27 Tf 1 0 0 1 57.375 722.28 Tm ( A Simple PDF File ) Tj ET BT /F1 10 Tf 1 0 0 1 69.25 688.608 Tm ( This is a small demonstration .pdf file - ) Tj ET BT 1 0 0 1 69.25 664.704 Tm ( just for use in the Virtual Mechanics tutorials. More text. And more ) Tj ET BT 1 0 0 1 69.25 652.752 Tm ( text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 628.848 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 616.896 Tm ( text. And more text. Boring, zzzzz. And more text. And more text. And ) Tj ET BT 1 0 0 1 69.25 604.944 Tm ( more text. And more text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 592.992 Tm ( And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 569.088 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 557.136 Tm ( text. And more text. And more text. Even more. Continued on page 2 ...) Tj ET Q\nendstream\nendobj\n6 0 obj &lt;&lt;/Type/Page/Contents 7 0 R/CropBox[0 0 612 792]/MediaBox[0 0 612 792]/Parent 3 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 8 0 R&gt;&gt;&gt;&gt;/Rotate 0&gt;&gt; endobj\n7 0 obj &lt;&lt;/Length 623&gt;&gt;\nstream\nq 0 0 0 rg 2 J BT /F1 27 Tf 1 0 0 1 57.375 722.28 Tm ( Simple PDF File 2 ) Tj ET BT /F1 10 Tf 1 0 0 1 69.25 688.608 Tm ( ...continued from page 1. Yet more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 676.656 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 664.704 Tm ( text. Oh, how boring typing this stuff. But not as boring as watching ) Tj ET BT 1 0 0 1 69.25 652.752 Tm ( paint dry. And more text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 640.8 Tm ( Boring.  More, a little more text. The end, and just as well. ) Tj ET Q\nendstream\nendobj\n8 0 obj &lt;&lt;/Type/Font/Name/F1/Subtype/Type1/BaseFont/Helvetica/Encoding/WinAnsiEncoding&gt;&gt; endobj\n\nxref\n0 9\n0000000000 65536 f \n0000000003 00000 n \n0000000004 00000 n \n0000000005 00000 n \n0000000006 00000 n \n0000000007 00000 n \n0000000012 00000 n \n0000000013 00000 n \n0000000018 00000 n \ntrailer\n&lt;&lt;/Size 9/Info 1 0 R/Root 2 0 R/ID[&lt;361061963B9D538BC2717B4D8C7D15C9&gt;&lt;361061963B9D538BC2717B4D8C7D15C9&gt;]&gt;&gt;\nstartxref\n20\n%%EOF\n</code></pre>\n<p>So what is needed for triplicate signing is 3 annotations. Let's hold back on showing the extra lines needed as when done we need to be assured it will work. Thus we MANUALLY review before signing.</p>\n<p><a href=\"https://i.sstatic.net/z2Tita5n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/z2Tita5n.png\" alt=\"enter image description here\" /></a></p>\n<p>Luckily &quot;Adobe Reader&quot; is &quot;Adobe Freemium Editor&quot; (with restrictions) thus it can easily clean up the file suitable for signing using &quot;SaveAs&quot;.</p>\n<p><a href=\"https://i.sstatic.net/oTwIewvA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/oTwIewvA.png\" alt=\"enter image description here\" /></a></p>\n<p>Now we are assured it &quot;should&quot; work for adding 3 fields. Actually we will find part of the issue is the definition of &quot;Standard Fonts&quot; as they can alter from device to device. You can see an example of that in the signature &quot;preview&quot; as one is Sans and one is Serif.</p>\n<p>So here is the Adobe Generated acceptable file for ONE signature with THREE appearances and NOTE the last ENCODED addition is generated by Reader! which will of course be corrupted by text cut and paste here.</p>\n<pre><code>%PDF-1.7\n%€€€€\n\n1 0 obj\n&lt;&lt;/Annots[10 0 R]/Contents 2 0 R/CropBox[0 0 612 792]/MediaBox[0 0 612 792]/Parent 15 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 29 0 R&gt;&gt;&gt;&gt;/Rotate 0/Type/Page&gt;&gt;\nendobj\n\n2 0 obj\n&lt;&lt;/Length 623&gt;&gt;\nstream\nq 0 0 0 rg 2 J BT /F1 27 Tf 1 0 0 1 57.375 722.28 Tm ( Simple PDF File 2 ) Tj ET BT /F1 10 Tf 1 0 0 1 69.25 688.608 Tm ( ...continued from page 1. Yet more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 676.656 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 664.704 Tm ( text. Oh, how boring typing this stuff. But not as boring as watching ) Tj ET BT 1 0 0 1 69.25 652.752 Tm ( paint dry. And more text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 640.8 Tm ( Boring.  More, a little more text. The end, and just as well. ) Tj ET Q\nendstream\nendobj\n\n3 0 obj\n&lt;&lt;/BBox[0 0 152.49 71.16]/Length 0/Resources&lt;&lt;&gt;&gt;/Subtype/Form/Type/XObject&gt;&gt;\nstream\n\nendstream\nendobj\n\n6 0 obj\n&lt;&lt;/Length 3419/Subtype/XML/Type/Metadata&gt;&gt;\nstream\n&lt;?xpacket begin=&quot;ï»¿&quot; id=&quot;W5M0MpCehiHzreSzNTczkc9d&quot;?&gt;\n&lt;x:xmpmeta xmlns:x=&quot;adobe:ns:meta/&quot; x:xmptk=&quot;Adobe XMP Core 5.4-c005 78.147326, 2012/08/23-13:03:03        &quot;&gt;\n   &lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;&gt;\n      &lt;rdf:Description rdf:about=&quot;&quot;\n            xmlns:xmp=&quot;http://ns.adobe.com/xap/1.0/&quot;\n            xmlns:pdfx=&quot;http://ns.adobe.com/pdfx/1.3/&quot;\n            xmlns:pdf=&quot;http://ns.adobe.com/pdf/1.3/&quot;\n            xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;\n            xmlns:xmpMM=&quot;http://ns.adobe.com/xap/1.0/mm/&quot;&gt;\n         &lt;xmp:CreateDate&gt;2025-04-10T00:00Z&lt;/xmp:CreateDate&gt;\n         &lt;xmp:CreatorTool&gt;Reader XI&lt;/xmp:CreatorTool&gt;\n         &lt;xmp:MetadataDate&gt;2025-04-11T03:43:13+01:00&lt;/xmp:MetadataDate&gt;\n         &lt;xmp:ModifyDate&gt;2025-04-11T03:43:13+01:00&lt;/xmp:ModifyDate&gt;\n         &lt;pdfx:CreationDate--Text&gt;D:20250410000000Z&lt;/pdfx:CreationDate--Text&gt;\n         &lt;pdf:Producer&gt;Adobe&lt;/pdf:Producer&gt;\n         &lt;dc:format&gt;application/pdf&lt;/dc:format&gt;\n         &lt;dc:title&gt;\n            &lt;rdf:Alt&gt;\n               &lt;rdf:li xml:lang=&quot;x-default&quot;&gt;PDF For Signing&lt;/rdf:li&gt;\n            &lt;/rdf:Alt&gt;\n         &lt;/dc:title&gt;\n         &lt;xmpMM:DocumentID&gt;uuid:abe8bdff-afc6-400e-b827-87ef156af5b3&lt;/xmpMM:DocumentID&gt;\n         &lt;xmpMM:InstanceID&gt;uuid:71e7bc9e-59da-4a00-a2f4-a27c8dc405f9&lt;/xmpMM:InstanceID&gt;\n      &lt;/rdf:Description&gt;\n   &lt;/rdf:RDF&gt;\n&lt;/x:xmpmeta&gt;\n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                                                                                                    \n                           \n&lt;?xpacket end=&quot;w&quot;?&gt;\nendstream\nendobj\n\n10 0 obj\n&lt;&lt;/AP&lt;&lt;/N 3 0 R&gt;&gt;/BS&lt;&lt;/W 0&gt;&gt;/DA(0 0 0 rg /Arial 0 Tf)/F 4/M(D:20250410000000+00'00')/P 1 0 R/Parent 11 0 R/Rect[411.57 686.16 564.06 757.32]/Subtype/Widget/Type/Annot&gt;&gt;\nendobj\n\n11 0 obj\n&lt;&lt;/DA(0 0 0 rg /Arial 0 Tf)/FT/Sig/Kids[26 0 R 27 0 R 10 0 R]/T(Signature1)&gt;&gt;\nendobj\n\n12 0 obj\n&lt;&lt;/BaseFont/Arial/Encoding/WinAnsiEncoding/FirstChar 0/FontDescriptor 14 0 R/LastChar 255/Subtype/TrueType/Type/Font/Widths[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 278 278 355 556 556 889 667 191 333 333 389 584 278 333 278 278 556 556 556 556 556 556 556 556 556 556 278 278 584 584 584 556 1015 667 667 722 722 667 611 778 722 278 500 667 556 833 722 778 667 778 722 667 611 722 667 944 667 667 611 278 278 278 469 556 333 556 556 500 556 556 278 556 556 222 222 500 222 833 556 556 556 556 333 500 278 556 500 722 500 500 500 334 260 334 584 350 556 350 222 556 333 1000 556 556 333 1000 667 333 1000 350 611 350 350 222 222 333 333 350 556 1000 333 1000 500 333 944 350 500 667 278 333 556 556 556 556 260 556 333 737 370 556 584 333 737 552 400 549 333 333 333 576 537 333 333 333 365 556 834 834 834 611 667 667 667 667 667 667 1000 722 667 667 667 667 278 278 278 278 722 722 778 778 778 778 778 584 778 722 722 722 722 667 667 611 556 556 556 556 556 556 889 500 556 556 556 556 278 278 278 278 556 556 556 556 556 556 556 549 611 556 556 556 556 500 556 500]&gt;&gt;\nendobj\n\n13 0 obj\n&lt;&lt;/BaseFont/ZapfDingbats/Name/ZaDb/Subtype/Type1/Type/Font&gt;&gt;\nendobj\n\n14 0 obj\n&lt;&lt;/Ascent 905/CapHeight 716/Descent -212/Flags 32/FontBBox[-665 -325 2000 1040]/FontFamily(Arial)/FontName/Arial/FontWeight 400/ItalicAngle 0/StemV 0/Type/FontDescriptor&gt;&gt;\nendobj\n\n15 0 obj\n&lt;&lt;/Count 2/Kids[19 0 R 1 0 R]/Type/Pages&gt;&gt;\nendobj\n\n16 0 obj\n&lt;&lt;/CreationDate(D:20250410000000Z)/CreationDate--Text(D:20250410000000Z)/Creator(Reader XI)/ModDate(D:20250411034313+01'00')/Producer(Adobe)/Title(PDF For Signing)&gt;&gt;\nendobj\n\n17 0 obj\n&lt;&lt;/Linearized 1/L 8118/O 19/E 2417/N 2/T 7801/H[455 181]&gt;&gt;\nendobj\n\n18 0 obj\n&lt;&lt;/AcroForm 25 0 R/Metadata 6 0 R/Pages 15 0 R/Type/Catalog&gt;&gt;\nendobj\n\n19 0 obj\n&lt;&lt;/Annots[26 0 R 27 0 R]/Contents 23 0 R/CropBox[0 0 612 792]/MediaBox[0 0 612 792]/Parent 15 0 R/Resources&lt;&lt;/Font&lt;&lt;/F1 29 0 R&gt;&gt;&gt;&gt;/Rotate 0/Type/Page&gt;&gt;\nendobj\n\n20 0 obj\n&lt;&lt;/BBox[0 0 152.49 71.16]/Length 0/Resources&lt;&lt;&gt;&gt;/Subtype/Form/Type/XObject&gt;&gt;\nstream\n\nendstream\nendobj\n\n21 0 obj\n&lt;&lt;/BBox[0 0 152.49 71.16]/Length 0/Resources&lt;&lt;&gt;&gt;/Subtype/Form/Type/XObject&gt;&gt;\nstream\n\nendstream\nendobj\n\n23 0 obj\n&lt;&lt;/Length 975&gt;&gt;\nstream\nq 0 0 0 rg 2 J BT /F1 27 Tf 1 0 0 1 57.375 722.28 Tm ( A Simple PDF File ) Tj ET BT /F1 10 Tf 1 0 0 1 69.25 688.608 Tm ( This is a small demonstration .pdf file - ) Tj ET BT 1 0 0 1 69.25 664.704 Tm ( just for use in the Virtual Mechanics tutorials. More text. And more ) Tj ET BT 1 0 0 1 69.25 652.752 Tm ( text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 628.848 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 616.896 Tm ( text. And more text. Boring, zzzzz. And more text. And more text. And ) Tj ET BT 1 0 0 1 69.25 604.944 Tm ( more text. And more text. And more text. And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 592.992 Tm ( And more text. And more text. ) Tj ET BT 1 0 0 1 69.25 569.088 Tm ( And more text. And more text. And more text. And more text. And more ) Tj ET BT 1 0 0 1 69.25 557.136 Tm ( text. And more text. And more text. Even more. Continued on page 2 ...) Tj ET Q\nendstream\nendobj\n\n25 0 obj\n&lt;&lt;/DA(/Helv 0 Tf 0 g )/DR&lt;&lt;/Encoding&lt;&lt;/PDFDocEncoding 28 0 R&gt;&gt;/Font&lt;&lt;/Arial 12 0 R/Helv 29 0 R/ZaDb 13 0 R&gt;&gt;&gt;&gt;/Fields[11 0 R]/SigFlags 1&gt;&gt;\nendobj\n\n26 0 obj\n&lt;&lt;/AP&lt;&lt;/N 20 0 R&gt;&gt;/BS&lt;&lt;/W 0&gt;&gt;/DA(0 0 0 rg /Arial 0 Tf)/F 4/M(D:20250410000000+00'00')/P 19 0 R/Parent 11 0 R/Rect[347.82 456.15 500.31 527.31]/Subtype/Widget/Type/Annot&gt;&gt;\nendobj\n\n27 0 obj\n&lt;&lt;/AP&lt;&lt;/N 21 0 R&gt;&gt;/BS&lt;&lt;/W 0&gt;&gt;/DA(0 0 0 rg /Arial 0 Tf)/F 4/M(D:20250410000000+00'00')/P 19 0 R/Parent 11 0 R/Rect[347.31 360.27 499.8 431.43]/Subtype/Widget/Type/Annot&gt;&gt;\nendobj\n\n28 0 obj\n&lt;&lt;/Differences[24/breve/caron/circumflex/dotaccent/hungarumlaut/ogonek/ring/tilde 39/quotesingle 96/grave 128/bullet/dagger/daggerdbl/ellipsis/emdash/endash/florin/fraction/guilsinglleft/guilsinglright/minus/perthousand/quotedblbase/quotedblleft/quotedblright/quoteleft/quoteright/quotesinglbase/trademark/fi/fl/Lslash/OE/Scaron/Ydieresis/Zcaron/dotlessi/lslash/oe/scaron/zcaron 160/Euro 164/currency 166/brokenbar 168/dieresis/copyright/ordfeminine 172/logicalnot/.notdef/registered/macron/degree/plusminus/twosuperior/threesuperior/acute/mu 183/periodcentered/cedilla/onesuperior/ordmasculine 188/onequarter/onehalf/threequarters 192/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]/Type/Encoding&gt;&gt;\nendobj\n\n29 0 obj\n&lt;&lt;/BaseFont/Helvetica/Encoding 28 0 R/Name/Helv/Subtype/Type1/Type/Font&gt;&gt;\nendobj\n\n30 0 obj\n&lt;&lt;/V 84/I 108/Length 124/S 50&gt;&gt;\nstream\n        ð                À–à ð W€   –à      c           o \n@9B        É     š    z¢           ß\nendstream\nendobj\n\nxref\n0 31\n0000000004 00001 f \n0000000016 00000 n \n0000000176 00000 n \n0000000849 00000 n \n0000000005 00001 f \n0000000007 00001 f \n0000000960 00000 n \n0000000008 00001 f \n0000000009 00001 f \n0000000022 00001 f \n0000004456 00000 n \n0000004642 00000 n \n0000004737 00000 n \n0000005848 00000 n \n0000005926 00000 n \n0000006115 00000 n \n0000006175 00000 n \n0000006358 00000 n \n0000006434 00000 n \n0000006513 00000 n \n0000006682 00000 n \n0000006794 00000 n \n0000000024 00001 f \n0000006906 00000 n \n0000007932 00001 f \n0000007932 00000 n \n0000008088 00000 n \n0000008276 00000 n \n0000008463 00000 n \n0000009656 00000 n \n0000009747 00000 n \n\ntrailer\n&lt;&lt;/Size 31/Info 16 0 R/Root 18 0 R/ID[&lt;361061963B9D538BC2717B4D8C7D15C9&gt;&lt;C97F5DE8DBA1EC757553FB7276EBCD0D&gt;]&gt;&gt;\nstartxref\n9938\n%%EOF\n</code></pre>\n<p>We can verify Signing will now not embed errors.\n<a href=\"https://i.sstatic.net/Gr9B81QE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Gr9B81QE.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.sstatic.net/xSXzGniI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/xSXzGniI.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.sstatic.net/Gc4j1ZQE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/Gc4j1ZQE.png\" alt=\"enter image description here\" /></a></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14313923,
      "reputation" : 12662,
      "user_id" : 10802527,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/09ba828ca91501c7202a014fd0388bc4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "K J",
      "link" : "https://stackoverflow.com/users/10802527/k-j"
    },
    "creation_date" : 1744339949,
    "last_activity_date" : 1750597527,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140329813,
    "post_id" : 79566835,
    "body" : "dtr, in other words, you want a single signature field with multiple annotations. You are aware that that is forbidden by the current PDF spec (ISO 32000-2)? You can of course claim to use the ancient  ISO 32000-1 from 2008 which does not explicitly forbid this (it merely implies it by always talking about &quot;<i>the</i> annotation&quot; of a signature field). In that case you should remove all entries from the signature field object that actually are merged-in widget annotation entries. The add an annotation for every visualization to the kids of the field.",
    "score" : 1,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97003,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1744545805,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140324750,
    "post_id" : 79566835,
    "body" : "Hi @TilmanHausherr, to add more information to what I want, the expect output is the signed PDF will has only 1 digital signature but has multiple visual signature stamps (e.g. on each pages) as this signed PDF example. <a href=\"https://drive.google.com/file/d/1CX5699EkDmgy4wPmoc0UwSJHbVRcXbuu/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1CX5699EkDmgy4wPmoc0UwSJHbVRcXbuu/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 16075330,
      "reputation" : 1,
      "user_id" : 11602669,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-D7YTOZtampw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5RLf-cWS5A5r0fRTjISTqw19z9Q/mo/s256-rj/photo.jpg",
      "display_name" : "dtr",
      "link" : "https://stackoverflow.com/users/11602669/dtr"
    },
    "creation_date" : 1744379912,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140322900,
    "post_id" : 79566835,
    "body" : "I&#39;m not sure what you want, but one signature should have at most one visible appearance, never several. (This gets asked here from time to time here)",
    "score" : 0,
    "owner" : {
      "account_id" : 255529,
      "reputation" : 19234,
      "user_id" : 535646,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/yGyps.jpg?s=256",
      "display_name" : "Tilman Hausherr",
      "link" : "https://stackoverflow.com/users/535646/tilman-hausherr"
    },
    "creation_date" : 1744340125,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140322748,
    "post_id" : 79566835,
    "body" : "Hi @KJ, thanks for the response, but from my question context, all the actions such as adding visual signature to the PDF should be done by PDFBox. The Acrobat Reader I have mentioned is only used for reading the PDF after the signing process.",
    "score" : 0,
    "owner" : {
      "account_id" : 16075330,
      "reputation" : 1,
      "user_id" : 11602669,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-D7YTOZtampw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re5RLf-cWS5A5r0fRTjISTqw19z9Q/mo/s256-rj/photo.jpg",
      "display_name" : "dtr",
      "link" : "https://stackoverflow.com/users/11602669/dtr"
    },
    "creation_date" : 1744333867,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79567902" : [ {
      "comment_id" : 140334672,
      "post_id" : 79567902,
      "body" : "@mkl thanks I think I need to revisit my decompression method too as the retained linearised object and the last object retained are unexpected via decrypt decode decompress. Hmm not as &quot;cleaned&quot; as I had thought it was",
      "score" : 0,
      "owner" : {
        "account_id" : 14313923,
        "reputation" : 12662,
        "user_id" : 10802527,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/09ba828ca91501c7202a014fd0388bc4?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "K J",
        "link" : "https://stackoverflow.com/users/10802527/k-j"
      },
      "creation_date" : 1744667029,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140334654,
      "post_id" : 79567902,
      "body" : "<i>&quot;There are errors in the formatting or information contained in this signature&quot;</i> - That could simply mean that Acrobat 11 does not support some algorithm used in the signature.",
      "score" : 1,
      "owner" : {
        "account_id" : 1916831,
        "reputation" : 97003,
        "user_id" : 1729265,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
        "display_name" : "mkl",
        "link" : "https://stackoverflow.com/users/1729265/mkl"
      },
      "creation_date" : 1744666562,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140329871,
      "post_id" : 79567902,
      "body" : "Ah, ok, apparently Acrobat has changed since that version ;)",
      "score" : 0,
      "owner" : {
        "account_id" : 1916831,
        "reputation" : 97003,
        "user_id" : 1729265,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
        "display_name" : "mkl",
        "link" : "https://stackoverflow.com/users/1729265/mkl"
      },
      "creation_date" : 1744547423,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140329781,
      "post_id" : 79567902,
      "body" : "Which Adobe Acrobat version does show the error? With a current version the OP&#39;s example file &#39;target_sample_signed_with_multiple_signature_visuals.pdf&#39; validates alright here... <a href=\"https://i.sstatic.net/DPzIZ54E.png\" rel=\"nofollow noreferrer\">i.sstatic.net/DPzIZ54E.png</a>",
      "score" : 0,
      "owner" : {
        "account_id" : 1916831,
        "reputation" : 97003,
        "user_id" : 1729265,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
        "display_name" : "mkl",
        "link" : "https://stackoverflow.com/users/1729265/mkl"
      },
      "creation_date" : 1744545051,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}