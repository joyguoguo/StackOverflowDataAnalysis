{
  "question" : {
    "question_id" : 79739447,
    "title" : "Java client for MQTT Websocket with presigned URL",
    "body" : "<p>The presigned websocket url is something like this</p>\n<blockquote>\n<p><code>wss://&lt;host&gt;.eu-west-1.amazonaws.com:443/mqtt?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=&lt;cred&gt;/eu-west-1/iotdevicegateway/aws4_request&amp;X-Amz-Date=20250814T085431Z&amp;X-Amz-Expires=86400&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=&lt;signature&gt;&amp;X-Amz-Security-Token=&lt;token&gt;</code></p>\n</blockquote>\n<p>And here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>        AwsIotMqttConnectionBuilder builder = AwsIotMqttConnectionBuilder.newMtlsBuilderFromPath(null, null)\n                .withWebsockets(true) // Crucial for presigned URL connections\n                .withEndpoint(connectionUrl) // Pass the presigned URL here\n                .withClientId(clientId)\n                .withConnectionEventCallbacks(callbacks)\n                .withWebsocketSigningRegion(&quot;eu-west-1&quot;)\n                .withPort(443); // Default WebSocket port\n\n        MqttClientConnection connection = builder.build();\n\n        // Connect to AWS IoT Core\n        CompletableFuture&lt;Boolean&gt; connected = connection.connect();\n        connected.get(); // Wait for connection to complete\n</code></pre>\n<p>I'm getting following error when I run the code</p>\n<p><code>java.util.concurrent.ExecutionException: software.amazon.awssdk.crt.mqtt.MqttException: Attempt to sign an http request without credentials</code></p>\n",
    "tags" : [ "java", "amazon-web-services", "mqtt", "sigv4" ],
    "owner" : {
      "account_id" : 8465618,
      "reputation" : 329,
      "user_id" : 6349870,
      "user_type" : "registered",
      "accept_rate" : 20,
      "profile_image" : "https://www.gravatar.com/avatar/b2ba1adcf19363a872d4655e780f2192?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "SSQs",
      "link" : "https://stackoverflow.com/users/6349870/ssqs"
    },
    "is_answered" : false,
    "view_count" : 56,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1755611134,
    "creation_date" : 1755577844,
    "link" : "https://stackoverflow.com/questions/79739447/java-client-for-mqtt-websocket-with-presigned-url",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}