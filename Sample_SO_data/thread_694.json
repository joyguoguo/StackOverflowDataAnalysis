{
  "question" : {
    "question_id" : 79781541,
    "title" : "Keycloak custom LDAP storage provider - registered but not identified as LDAP provider",
    "body" : "<p>I am having an issue with the extension I have developed for the <code>LDAPStorageProvider</code> and <code>LDAPStorageProviderFactory</code> classes. Specifically, my provider is being registered but is not being identified as an LDAP provider.  This means that the view does not display the labels properly and even the Mappers tab of the provider is missing. I am using <code>Keycloak</code> quarkus distribution 26.3.1. Here is a screenshot of this:<a href=\"https://i.sstatic.net/OlKiLgW1.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/OlKiLgW1.jpg\" alt=\"screenshot\" /></a></p>\n<p>And this is my source code:</p>\n<pre><code>public class CustomLDAPStorageProvider extends LDAPStorageProvider{\n\npublic CustomLDAPStorageProvider(LDAPStorageProviderFactory factory, KeycloakSession session,  ComponentModel model, LDAPIdentityStore ldapIdentityStore) {  super(factory, session, model, ldapIdentityStore); _session=session;   }}\n\npublic class CustomLDAPStorageProviderFactory   extends LDAPStorageProviderFactory implements UserStorageProviderFactory&lt;LDAPStorageProvider&gt;{\n    public static final String PROVIDER_ID = &quot;Custom-ldap-provider&quot;;\n        private static final Logger _logger = Logger.getLogger(CustomLDAPStorageProviderFactory.class);\n        private Config.Scope _config;\n        private ComponentModel _componentModel;\n        private LDAPIdentityStoreRegistry _ldapStoreRegistry;\n        @Override\n        public String getId() {\n            _logger.debug(&quot;CustomLDAPStorageProviderFactory getId&quot;);\n            return PROVIDER_ID;\n        }\n        @Override\n        public CustomLDAPStorageProvider create(KeycloakSession session,ComponentModel model ) {\n             Map&lt;ComponentModel, LDAPConfigDecorator&gt; configDecorators = getLDAPConfigDecorators(session, model);\n                LDAPIdentityStore ldapIdentityStore = this._ldapStoreRegistry.getLdapStore(session, model, configDecorators);\n                return new CustomLDAPStorageProvider(this, session, model, ldapIdentityStore);\n        }\n        @Override\n        public void init(Config.Scope config) {\n            this._ldapStoreRegistry = new LDAPIdentityStoreRegistry();\n        }}\n</code></pre>\n<p>Could you please explain why my provider is not being recognised as an LDAP provider and how to fix this to be registered properly?</p>\n<p>Thank you.</p>\n",
    "tags" : [ "java", "ldap", "keycloak" ],
    "owner" : {
      "account_id" : 24478935,
      "reputation" : 171,
      "user_id" : 18397625,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJzg187x86yfTyXqiraMd4sq3gk-CXXJrZpLkVXs=k-s256",
      "display_name" : "TechQuestion",
      "link" : "https://stackoverflow.com/users/18397625/techquestion"
    },
    "is_answered" : false,
    "view_count" : 76,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1759503158,
    "creation_date" : 1759477589,
    "link" : "https://stackoverflow.com/questions/79781541/keycloak-custom-ldap-storage-provider-registered-but-not-identified-as-ldap-pr",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79781891,
    "question_id" : 79781541,
    "body" : "<pre><code>@Override\npublic String getId() {\n  return &quot;ldap&quot;;\n\n}\n</code></pre>\n<p>Found an answer to this question by posting the same question to the Keycloak discourse forum. The support team replied that you need to use the same provider ID as the default LDAP provider. Which means your custom provider will override the default one. Code snippet above.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 24478935,
      "reputation" : 171,
      "user_id" : 18397625,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJzg187x86yfTyXqiraMd4sq3gk-CXXJrZpLkVXs=k-s256",
      "display_name" : "TechQuestion",
      "link" : "https://stackoverflow.com/users/18397625/techquestion"
    },
    "creation_date" : 1759503158,
    "last_activity_date" : 1759503158,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}