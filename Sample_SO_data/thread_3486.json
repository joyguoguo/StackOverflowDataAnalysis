{
  "question" : {
    "question_id" : 79546433,
    "title" : "Junit Jupiter fails to discover tests",
    "body" : "<p>While updating JUnit from 5.11.4 to 5.12.1, my Java program fails to perform tests with the following exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>MÃ¤r 31, 2025 1:34:48 PM org.junit.platform.launcher.core.DefaultLauncher handleThrowable\nWARNUNG: TestEngine with ID 'junit-jupiter' failed to discover tests\norg.junit.platform.commons.JUnitException: OutputDirectoryProvider not available; probably due to unaligned versions of the junit-platform-engine and junit-platform-launcher jars on the classpath/module path.\n    at org.junit.platform.engine.EngineDiscoveryRequest.getOutputDirectoryProvider(EngineDiscoveryRequest.java:94)\n    at org.junit.jupiter.engine.JupiterTestEngine.discover(JupiterTestEngine.java:67)\n    at org.junit.platform.launcher.core.DefaultLauncher.discoverEngineRoot(DefaultLauncher.java:168)\n    at org.junit.platform.launcher.core.DefaultLauncher.discoverRoot(DefaultLauncher.java:155)\n    at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:120)\n    at org.apache.maven.surefire.junitplatform.TestPlanScannerFilter.accept(TestPlanScannerFilter.java:56)\n    at org.apache.maven.surefire.util.DefaultScanResult.applyFilter(DefaultScanResult.java:102)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.scanClasspath(JUnitPlatformProvider.java:143)\n    at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\n</code></pre>\n<p>My pom.xml includes the following dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n    &lt;version&gt;5.12.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n    &lt;version&gt;5.12.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><code>maven-surefire-plugin</code> and <code>maven-failsafe-plugin</code> are integrated as a plugin with version 2.22.2.</p>\n<p>Even creating the dependency tree with Maven, I don't see any conflicts concerning junit-jupiter:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[INFO] +- org.slf4j:slf4j-api:jar:2.0.17:compile\n[INFO] +- ch.qos.logback:logback-classic:jar:1.3.15:compile\n[INFO] |  +- (ch.qos.logback:logback-core:jar:1.3.15:compile - omitted for duplicate)\n[INFO] |  \\- (org.slf4j:slf4j-api:jar:2.0.7:compile - omitted for conflict with 2.0.17)\n[INFO] +- ch.qos.logback:logback-core:jar:1.3.15:compile\n[INFO] +- org.projectlombok:lombok:jar:1.18.36:provided\n[INFO] +- org.apache.maven.plugins:maven-compiler-plugin:jar:3.14.0:compile\n[INFO] |  +- org.apache.maven.shared:maven-shared-utils:jar:3.4.2:compile\n[INFO] |  |  +- (org.slf4j:slf4j-api:jar:1.7.36:compile - omitted for conflict with 2.0.17)\n[INFO] |  |  \\- commons-io:commons-io:jar:2.11.0:compile\n[INFO] |  +- org.apache.maven.shared:maven-shared-incremental:jar:1.1:compile\n[INFO] |  +- org.codehaus.plexus:plexus-java:jar:1.4.0:compile\n[INFO] |  |  +- org.ow2.asm:asm:jar:9.7.1:compile\n[INFO] |  |  \\- com.thoughtworks.qdox:qdox:jar:2.2.0:compile\n[INFO] |  +- org.codehaus.plexus:plexus-compiler-api:jar:2.15.0:compile\n[INFO] |  |  +- (org.codehaus.plexus:plexus-utils:jar:4.0.0:compile - omitted for conflict with 4.0.1)\n[INFO] |  |  \\- (org.slf4j:slf4j-api:jar:1.7.36:compile - omitted for conflict with 2.0.17)\n[INFO] |  +- org.codehaus.plexus:plexus-compiler-manager:jar:2.15.0:compile\n[INFO] |  |  +- (org.codehaus.plexus:plexus-compiler-api:jar:2.15.0:compile - omitted for duplicate)\n[INFO] |  |  +- javax.inject:javax.inject:jar:1:compile\n[INFO] |  |  +- (org.slf4j:slf4j-api:jar:1.7.36:compile - omitted for conflict with 2.0.17)\n[INFO] |  |  \\- org.codehaus.plexus:plexus-xml:jar:3.0.0:compile\n[INFO] |  +- org.codehaus.plexus:plexus-compiler-javac:jar:2.15.0:runtime\n[INFO] |  |  +- (org.codehaus.plexus:plexus-utils:jar:4.0.0:runtime - omitted for conflict with 4.0.1)\n[INFO] |  |  +- (javax.inject:javax.inject:jar:1:runtime - omitted for duplicate)\n[INFO] |  |  +- (org.slf4j:slf4j-api:jar:1.7.36:runtime - omitted for conflict with 2.0.17)\n[INFO] |  |  \\- (org.codehaus.plexus:plexus-compiler-api:jar:2.15.0:runtime - omitted for duplicate)\n[INFO] |  \\- org.codehaus.plexus:plexus-utils:jar:4.0.1:compile\n[INFO] +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile\n[INFO] |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.2:compile\n[INFO] +- javax.activation:activation:jar:1.1:compile\n[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.9:compile\n[INFO] |  +- (jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.3:compile - omitted for duplicate)\n[INFO] |  +- org.glassfish.jaxb:txw2:jar:2.3.9:compile\n[INFO] |  +- com.sun.istack:istack-commons-runtime:jar:3.0.12:compile\n[INFO] |  \\- com.sun.activation:jakarta.activation:jar:1.2.2:runtime\n[INFO] +- org.junit.jupiter:junit-jupiter-api:jar:5.12.1:test\n[INFO] |  +- org.opentest4j:opentest4j:jar:1.3.0:test\n[INFO] |  +- org.junit.platform:junit-platform-commons:jar:1.12.1:test\n[INFO] |  |  \\- (org.apiguardian:apiguardian-api:jar:1.1.2:test - omitted for duplicate)\n[INFO] |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:test\n[INFO] +- org.junit.jupiter:junit-jupiter-engine:jar:5.12.1:test\n[INFO] |  +- org.junit.platform:junit-platform-engine:jar:1.12.1:test\n[INFO] |  |  +- (org.opentest4j:opentest4j:jar:1.3.0:test - omitted for duplicate)\n[INFO] |  |  +- (org.junit.platform:junit-platform-commons:jar:1.12.1:test - omitted for duplicate)\n[INFO] |  |  \\- (org.apiguardian:apiguardian-api:jar:1.1.2:test - omitted for duplicate)\n[INFO] |  +- (org.junit.jupiter:junit-jupiter-api:jar:5.12.1:test - omitted for duplicate)\n[INFO] |  \\- (org.apiguardian:apiguardian-api:jar:1.1.2:test - omitted for duplicate)\n[INFO] \\- org.apache.commons:commons-lang3:jar:3.17.0:compile\n</code></pre>\n<p>Turning back to junit-jupiter 5.11.4, everything works fine. My Java version is currently 1.8.0_302; my Maven version is 3.9.9.</p>\n<p>Furthermore, based on 5.11.4, all test classes are collected, so I think the naming convention of class names should be correct.</p>\n<p>Can anyone give me any advice, how to get rid of this problem? I know, there are many similar issues with this message - but I don't see any conflict here.</p>\n",
    "tags" : [ "java", "junit-jupiter" ],
    "owner" : {
      "account_id" : 9875097,
      "reputation" : 633,
      "user_id" : 7313173,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alex",
      "link" : "https://stackoverflow.com/users/7313173/alex"
    },
    "is_answered" : true,
    "view_count" : 10049,
    "answer_count" : 5,
    "score" : 21,
    "last_activity_date" : 1748941983,
    "creation_date" : 1743430004,
    "link" : "https://stackoverflow.com/questions/79546433/junit-jupiter-fails-to-discover-tests",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79614468,
    "question_id" : 79546433,
    "body" : "<pre><code>testRuntimeOnly 'org.junit.platform:junit-platform-launcher:1.12.2'\n</code></pre>\n<p>for gradle I had to add the line above to make it work. I have these three lines now:</p>\n<pre><code>testImplementation 'org.junit.jupiter:junit-jupiter:5.12.2'\ntestRuntimeOnly 'org.junit.platform:junit-platform-engine:1.12.2'\ntestRuntimeOnly 'org.junit.platform:junit-platform-launcher:1.12.2'\n</code></pre>\n",
    "score" : 17,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 41881344,
      "reputation" : 179,
      "user_id" : 30493483,
      "user_type" : "unregistered",
      "profile_image" : "https://www.gravatar.com/avatar/96da7f8838a5f3220cc24b529ee59b6a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "bmaj",
      "link" : "https://stackoverflow.com/users/30493483/bmaj"
    },
    "creation_date" : 1746805735,
    "last_activity_date" : 1746805735,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79547234,
    "question_id" : 79546433,
    "body" : "<p>There are two solutions to solve this:</p>\n<p>Possibility A (based on solution of <a href=\"https://stackoverflow.com/a/79609372/7313173\">@dlipofsky</a>)</p>\n<ul>\n<li>Replacing <code>jupiter-junit-*</code> to <code>jupiter-junit</code></li>\n<li>updating <code>maven-surefire-plugin</code> to <code>3.5.3</code></li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n    &lt;version&gt;5.12.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.3&lt;/version&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</code></pre>\n<p>Possibility B</p>\n<ul>\n<li>adding the following dependency to all given dependencies above</li>\n<li><a href=\"https://junit.org/junit5/docs/current/user-guide/#running-tests-build-maven\" rel=\"nofollow noreferrer\">Reference</a></li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n    &lt;version&gt;1.12.1&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n",
    "score" : 12,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9875097,
      "reputation" : 633,
      "user_id" : 7313173,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alex",
      "link" : "https://stackoverflow.com/users/7313173/alex"
    },
    "creation_date" : 1743453960,
    "last_activity_date" : 1748854341,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79650948,
    "question_id" : 79546433,
    "body" : "<p>Upgrading to Spring Boot <code>3.5.0</code> and Spring Cloud <code>2025.0.0</code> has surfaced this error for us. Because Spring Boot has the appropriate dependency version management in place it was sufficient to add only this line to <code>build.gradle</code>:</p>\n<pre><code>testRuntimeOnly 'org.junit.platform:junit-platform-launcher' \n</code></pre>\n",
    "score" : 10,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1961640,
      "reputation" : 13407,
      "user_id" : 1763035,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/wpk6X.jpg?s=256",
      "display_name" : "Andy Brown",
      "link" : "https://stackoverflow.com/users/1763035/andy-brown"
    },
    "creation_date" : 1748941983,
    "last_activity_date" : 1748941983,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79609372,
    "question_id" : 79546433,
    "body" : "<p>Try using the latest surefire plugin.  I had the same issue and I got it to work with <code>junit-jupiter:5.12.1</code> and I didn't have to add <code>junit-platform-launcher</code>. In my case I solved it by upgrading <code>maven-surefire-plugin</code> to <strong>3.5.3</strong> (I had 2.22.2). Also my top level dependency is <code>junit-jupiter</code>, not <code>junit-jupiter-*</code></p>\n",
    "score" : 4,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 926419,
      "reputation" : 421,
      "user_id" : 957136,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/531fb75e7f195cde6e6bfda81c680ec3?s=256&d=identicon&r=PG",
      "display_name" : "dlipofsky",
      "link" : "https://stackoverflow.com/users/957136/dlipofsky"
    },
    "creation_date" : 1746559971,
    "last_activity_date" : 1746559971,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79597396,
    "question_id" : 79546433,
    "body" : "<p>This should be resolved in 5.12.2.</p>\n",
    "score" : -3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 11083708,
      "reputation" : 640,
      "user_id" : 8138184,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cd224d0df66e10cce369ab002e4dca09?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NSaran",
      "link" : "https://stackoverflow.com/users/8138184/nsaran"
    },
    "creation_date" : 1745882696,
    "last_activity_date" : 1745882696,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140478624,
    "post_id" : 79546433,
    "body" : "You may want to update your Java version, the latest Java 8 is Java 8 update 451/452 (depending on the vendor).",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1748854322,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140282843,
    "post_id" : 79546433,
    "body" : "i tried <code>mvn clean</code>, but this did not help.  I can switch between 5.11.4 and 5.12.1. I can reproduce it every time. I have to follow the approach to delete .m2-dir later...",
    "score" : 0,
    "owner" : {
      "account_id" : 9875097,
      "reputation" : 633,
      "user_id" : 7313173,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alex",
      "link" : "https://stackoverflow.com/users/7313173/alex"
    },
    "creation_date" : 1743430626,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140282820,
    "post_id" : 79546433,
    "body" : "have you tried cleaning your maven cache, or, if it still fails and your project doesn&#39;t take hours to compile from scratch, deleting your <code>.m2</code> folder ?",
    "score" : 0,
    "owner" : {
      "account_id" : 365431,
      "reputation" : 5142,
      "user_id" : 2057091,
      "user_type" : "registered",
      "accept_rate" : 89,
      "profile_image" : "https://i.sstatic.net/7kWv6.png?s=256",
      "display_name" : "Aserre",
      "link" : "https://stackoverflow.com/users/2057091/aserre"
    },
    "creation_date" : 1743430289,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79609372" : [ {
      "comment_id" : 140409050,
      "post_id" : 79609372,
      "body" : "Thank you. It really works just with maven-surefire-plugin 3.5.3 and changing to top level jupiter junit 5.12.2. I think this is the most clean solution.",
      "score" : 0,
      "owner" : {
        "account_id" : 9875097,
        "reputation" : 633,
        "user_id" : 7313173,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/7313173/alex"
      },
      "creation_date" : 1746735741,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79597396" : [ {
      "comment_id" : 140391217,
      "post_id" : 79597396,
      "body" : "Interesting! Adding platform-launcher library to my setup had no effect at all. The only thing that worked was updating jupiter to 5.12.2 &amp; platform to 1.12.2.",
      "score" : 0,
      "owner" : {
        "account_id" : 11083708,
        "reputation" : 640,
        "user_id" : 8138184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/cd224d0df66e10cce369ab002e4dca09?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "NSaran",
        "link" : "https://stackoverflow.com/users/8138184/nsaran"
      },
      "creation_date" : 1746211549,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140382982,
      "post_id" : 79597396,
      "body" : "If I remove the <code>junit-platform-launcher</code> dependency and update junit to <code>5.12.2</code> it does not work again and it ends up with the same exception stacks.",
      "score" : 2,
      "owner" : {
        "account_id" : 9875097,
        "reputation" : 633,
        "user_id" : 7313173,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/7313173/alex"
      },
      "creation_date" : 1745997937,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79614468" : [ {
      "comment_id" : 140466137,
      "post_id" : 79614468,
      "body" : "Here is the official guidance to follow for Gradle users: <a href=\"https://docs.gradle.org/current/userguide/upgrading_version_8.html#test_framework_implementation_dependencies\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a> (&quot;Relying on automatic test framework implementation dependencies&quot;)",
      "score" : 3,
      "owner" : {
        "account_id" : 1364678,
        "reputation" : 2232,
        "user_id" : 1301373,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/56eb9a131846d4447ca24b5ea9ecb600?s=256&d=identicon&r=PG",
        "display_name" : "winne2",
        "link" : "https://stackoverflow.com/users/1301373/winne2"
      },
      "creation_date" : 1748438500,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140412757,
      "post_id" : 79614468,
      "body" : "OP was using Maven though.",
      "score" : 5,
      "owner" : {
        "account_id" : 543600,
        "reputation" : 1058,
        "user_id" : 2125723,
        "user_type" : "registered",
        "accept_rate" : 80,
        "profile_image" : "https://www.gravatar.com/avatar/fe638a46efe97afc9c9dd039de54fb6b?s=256&d=identicon&r=PG",
        "display_name" : "ryanwebjackson",
        "link" : "https://stackoverflow.com/users/2125723/ryanwebjackson"
      },
      "creation_date" : 1746839348,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79650948" : [ {
      "comment_id" : 140485432,
      "post_id" : 79650948,
      "body" : "I was using Java 1.8. Based on reasons, I am not allowed to update. Spring Boot 3.x need in my optionen at least Java 17+",
      "score" : 0,
      "owner" : {
        "account_id" : 9875097,
        "reputation" : 633,
        "user_id" : 7313173,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f4518983c7862d9062b2cf911817e8a6?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/7313173/alex"
      },
      "creation_date" : 1749015686,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}