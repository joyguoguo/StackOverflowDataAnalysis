{
  "question" : {
    "question_id" : 79839727,
    "title" : "Reversal of Linked List with head and tail node recursively",
    "body" : "<p>I am working on a LeetCode question. I am able to solve it using other approaches but not via <a href=\"https://leetcode.com/problems/reverse-linked-list/\" rel=\"nofollow noreferrer\">this approach</a>.</p>\n<p>I am trying to reverse a singly linked list recursively.\nWhen I run the code, my output for 1-&gt;2-&gt;3-&gt;4   is   4-&gt;1.\nI am unable to understand why the link for the middle nodes is breaking.</p>\n<p>In my main function, I have created a node ans that points to the tail and I am returning ans in the main function.</p>\n<pre><code>/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode() {}\n *     ListNode(int val) { this.val = val; }\n *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n * }\n */\nclass Solution {\n    public ListNode reverseList(ListNode head)  {\n      if (head == null || head.next == null) {\n                return head;\n            }\n            ListNode tail = head;\n            while(tail.next != null){\n                tail=tail.next;\n            }\n            ListNode ans = tail;\n            reverse(head,tail);\n            return ans;\n    }\n\n \n\n    private void reverse (ListNode head, ListNode tail){\n            if (head == tail){\n                head = tail;\n               return;\n            }\n             reverse(head.next,tail);\n             \n             tail.next = head;\n             tail = head;          \n             tail.next=null;\n            \n        }\n</code></pre>\n",
    "tags" : [ "java", "arraylist", "linked-list" ],
    "owner" : {
      "account_id" : 42245363,
      "reputation" : 47,
      "user_id" : 30660137,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f61a942335fcf7ba1e96d77b055b8aaf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sakib",
      "link" : "https://stackoverflow.com/users/30660137/sakib"
    },
    "is_answered" : true,
    "view_count" : 80,
    "answer_count" : 3,
    "score" : 0,
    "last_activity_date" : 1765263741,
    "creation_date" : 1765031567,
    "link" : "https://stackoverflow.com/questions/79839727/reversal-of-linked-list-with-head-and-tail-node-recursively",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79839757,
    "question_id" : 79839727,
    "body" : "<p>In order to revert all your nodes, you can do something like</p>\n<pre><code>private ListNode reverse (ListNode current, ListNode previous) {\n    ListNode next = current.next;\n    current.next = previous;\n    return (next == null) ? current : reverse(next, current);\n}\n</code></pre>\n<p>Explanation:</p>\n<ul>\n<li><code>current</code> is the node you are currently processing</li>\n<li><code>previous</code> is the previous <code>current</code> if existed. When you first call the method, pass <code>null</code> as <code>previous</code></li>\n<li>it will eventually <code>return</code> the new head, so you can assign the return value of <code>reverse</code> to the variable/data-member that represents the head</li>\n<li>we store <code>current.next</code> as a local variable called <code>next</code> because we'll soon lose reference to it from the object</li>\n<li>we override <code>current.next</code> with <code>previous</code>, essentially creating the backward link</li>\n<li>we return <code>current</code> if it happened to be a tail, in which case it did not have a <code>next</code> anyways and this value will be returned to the caller and then to its caller, etc</li>\n<li>otherwise, if the current node had a next, then we return <code>reverse</code> for that, passing <code>current</code> as <code>previous</code></li>\n</ul>\n<p>Now that we have a solution you may wonder why your previous solution was not working. Before we detect the reason, let me point out that</p>\n<pre><code>        if (head == tail){\n            head = tail;\n           return;\n        }\n</code></pre>\n<p>makes no sense. Why do you assign the value if it happened to be having the desired value already? Now, on to your next lines</p>\n<pre><code>         reverse(head.next,tail);\n         \n         tail.next = head;\n         tail = head;          \n         tail.next=null;\n</code></pre>\n<p>You do the recursive reverse to the next value and the same tale and <strong>once that's finished</strong> <code>tail.next</code> will be assigned <code>head</code> whose next will be erased.</p>\n<p>So, let's imagine this chain:</p>\n<p>1-&gt;2-&gt;3-&gt;4-&gt;5</p>\n<ul>\n<li>So you call your <code>reverse</code>, passing 1 and 5 to it.</li>\n<li>Then 1 calls reverse for 2 and 5.</li>\n<li>Then 2 calls reverse for 3 and 5</li>\n<li>Then 3 calls reverse for 4 and 5</li>\n<li>Then 4 calls reverse for 5 and 5</li>\n<li>Reverse for 5 and 5 is being processed, they are found to be equal so you assign <code>tail</code> to <code>head</code> which are already the same and returns</li>\n<li>Reverse for 4 and 5 is being processed, so the <code>next</code> of 5 will be set to 4 and the <code>next</code> of 4 is erased</li>\n<li>Reverse for 3 and 5 is being processed, so the <code>next</code> of 5 will be set to 3 (overriding the 4) and the <code>next</code> of 3 is erased</li>\n<li>Reverse for 2 and 5 is being processed, so the <code>next</code> of 5 will be set to 2 (overriding the 3) and the <code>next</code> of 2 is erased</li>\n<li>Reverse for 1 and 5 is being processed, so the <code>next</code> of 5 will be set to 1 (overriding the 2) and the <code>next</code> of 1 is erased</li>\n</ul>\n<p>Hence the result you've got is the exact result I would expect from your code.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 194308,
      "reputation" : 80480,
      "user_id" : 436560,
      "user_type" : "registered",
      "accept_rate" : 87,
      "profile_image" : "https://i.sstatic.net/2GESV.jpg?s=256",
      "display_name" : "Lajos Arpad",
      "link" : "https://stackoverflow.com/users/436560/lajos-arpad"
    },
    "creation_date" : 1765035491,
    "last_activity_date" : 1765035491,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79841423,
    "question_id" : 79839727,
    "body" : "<p>Reversing recursively means that at any time you consider the tail of the list while you maintain the reversed head. One step removes the top element of the list and pushes it as the first element of the reverse.</p>\n<pre><code>Process(top, rev):\n  if top != nil then \n    nxt= top-&gt;nxt; top-&gt;nxt= rev; rev= top;\n    Process(nxt, rev);\n  end if\n  return rev;\n\nhead= Process(head, nil);\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1232228,
      "reputation" : 199,
      "user_id" : 24958504,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/04014b30d40524c8316c5dce3d70164d?s=256&d=identicon&r=PG",
      "display_name" : "Yves Daoust",
      "link" : "https://stackoverflow.com/users/24958504/yves-daoust"
    },
    "creation_date" : 1765235382,
    "last_activity_date" : 1765235701,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79841605,
    "question_id" : 79839727,
    "body" : "<p>To solve the challenge, we just need to modify the node references, iterating over them and swapping them. What was previously the <em>next</em> of the other node now becomes the one that has the other node as its <em>next</em>.</p>\n<p>Let's look at three methods:</p>\n<p>If we want to complicate things unnecessarily, we use recursion:</p>\n<pre><code>public ListNode reverseListWithRecursion( ListNode root, ListNode futureNext ) {\n   if( root.next != null ) {\n      ListNode futureRoot = root.next;\n      root.next = futureNext;\n      return reverseListRecursion( futureRoot, root );        \n   } \n   root.next = futureNext;\n   return root;\n}\n</code></pre>\n<p>If we want to complicate it even further, we use a list to “load” all the nodes and then iterate over it to modify the references:</p>\n<pre><code>public ListNode reverseListWithList( ListNode head ) {\n   List&lt;ListNode&gt; auxList = new ArrayList&lt;&gt;();\n   ListNode aux1 = head;\n   auxList.add( head );\n\n   while( aux1.next != null ) {\n      auxList.add( aux1.next );\n      aux1 = aux1.next;\n   }\n   for( int i = auxList.size() - 1; i &gt;= 0; i -- ) {\n      if( i &gt; 0 ) {\n         auxList.get( i ).next = auxList.get( i - 1 );\n      }\n   }\n   head.next = null;\n   return auxList.getLast();\n}\n</code></pre>\n<p>although we can also keep it simple:</p>\n<pre><code>public ListNode reverseList( ListNode head ) {\n   ListNode futureNext = null;\n   ListNode root = head;\n\n   while( root.next != null ) {\n      ListNode futureRoot = root.next;\n      root.next = futureNext;\n      futureNext = root;\n      root = futureRoot;\n   }\n   root.next = futureNext;\n   return root;\n}\n</code></pre>\n<p>As you can see, both the first and last methods store the nodes to be used in the next iteration in <strong>futureRoot</strong> and <strong>futureNext</strong>, in order to continue updating the references.</p>\n<p>The other method creates a list with the nodes, which it then traverses in reverse order, modifying the references of each node.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 926,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1765263741,
    "last_activity_date" : 1765263741,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140893344,
    "post_id" : 79839727,
    "body" : "@Sakib Details, such as this being a LeetCode topic, should be posted as edits to the Question rather than as Comments. I did that for you today. Verify that I got your intent correct.",
    "score" : 1,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346989,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1765234005,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140890455,
    "post_id" : 79839727,
    "body" : "sure, actually it&#39;s a LeetCode question, I am able to solve it using other approaches but not via this, <a href=\"https://leetcode.com/problems/reverse-linked-list/\" rel=\"nofollow noreferrer\">leetcode.com/problems/reverse-linked-list</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 42245363,
      "reputation" : 47,
      "user_id" : 30660137,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f61a942335fcf7ba1e96d77b055b8aaf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sakib",
      "link" : "https://stackoverflow.com/users/30660137/sakib"
    },
    "creation_date" : 1765034573,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140890430,
    "post_id" : 79839727,
    "body" : "please edit that into the question. also show the code you use to print your list. I suspect it just is not iterating through the whole list, if that&#39;s what you want to print.",
    "score" : 1,
    "owner" : {
      "account_id" : 4552539,
      "reputation" : 4328,
      "user_id" : 3697273,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6f12b7fba6d7c2d2db4be1d240ab0909?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "paisanco",
      "link" : "https://stackoverflow.com/users/3697273/paisanco"
    },
    "creation_date" : 1765033268,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140890423,
    "post_id" : 79839727,
    "body" : "@paisanco  ListNode Structure  <code>Definition for singly-linked list.  public class ListNode {      int val;      ListNode next;     ListNode() {}       ListNode(int val) { this.val = val; }       ListNode(int val, ListNode next) { this.val = val; this.next = next; }   }</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 42245363,
      "reputation" : 47,
      "user_id" : 30660137,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f61a942335fcf7ba1e96d77b055b8aaf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sakib",
      "link" : "https://stackoverflow.com/users/30660137/sakib"
    },
    "creation_date" : 1765032846,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140890419,
    "post_id" : 79839727,
    "body" : "Show the ListNode structure and what you are printing from it. You seem to want to print all intermediate nodes but the code to do that (not shown) is missing out.",
    "score" : 0,
    "owner" : {
      "account_id" : 4552539,
      "reputation" : 4328,
      "user_id" : 3697273,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6f12b7fba6d7c2d2db4be1d240ab0909?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "paisanco",
      "link" : "https://stackoverflow.com/users/3697273/paisanco"
    },
    "creation_date" : 1765032521,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}