{
  "question" : {
    "question_id" : 79680297,
    "title" : "Gradle ow2.asm dependency conflict when using ANTLR4",
    "body" : "<p>I'm using ANTLR4 in my <code>build.gradle</code>, added as</p>\n<pre><code>dependencies {\n    ...\n    antlr4 group: 'org.antlr', name: 'antlr4', version: '4.13.2'\n    // other dependencies like \n    config1 group: 'org.ow2.asm', name: 'asm', version: '9.6'\n    ...\n}\n</code></pre>\n<p>I've written a task to run the grammar grammar generation, it looks like this</p>\n<pre><code>task generateGrammar(type: AntlrTask) {\n    source = files(&quot;./src/grammar.g4&quot;)\n    antlrClasspath  = configurations.antlr4\n    outputDirectory = file(&quot;./src/antlr4&quot;)\n    doFirst {\n        outputDirectory.mkdirs()\n    }\n}\n</code></pre>\n<p>Running this task gives an error:</p>\n<pre><code>Exception Details:\n  Location:\n    org/gradle/process/internal/worker/child/WorkerProcessClassPathProvider$CacheInitializer.remapClass(Ljava/lang/Class;Ljava/util/zip/ZipOutputStream;)V @127: invokevirtual\n  Reason:\n    Type 'org/objectweb/asm/commons/ClassRemapper' (current frame, stack[1]) is not assignable to 'org/objectweb/asm/ClassVisitor'\n  Current Frame:\n    bci: @127\n    flags: { }\n    locals: { 'org/gradle/process/internal/worker/child/WorkerProcessClassPathProvider$CacheInitializer', 'java/lang/Class', 'java/util/zip/ZipOutputStream', 'java/lang/String', 'java/lang/String', 'java/net/URL', 'java/io/InputStream', 'org/objectweb/asm/ClassReader', 'org/objectweb/asm/ClassWriter', 'org/objectweb/asm/commons/ClassRemapper' }\n    stack: { 'org/objectweb/asm/ClassReader', 'org/objectweb/asm/commons/ClassRemapper', integer }\n  Bytecode:\n    0000000: 2bb8 0036 4e2d 1237 b600 383a 0412 39b6\n    0000010: 003a 1904 b600 3b3a 0519 05c7 0021 bb00\n    0000020: 3c59 bb00 3d59 b700 3e12 3fb6 0040 2bb6\n    0000030: 0041 b600 40b6 0042 b700 43bf 1905 b600\n    0000040: 443a 06bb 0045 5919 06b7 0046 3a07 1906\n    0000050: b600 47a7 000d 3a08 1906 b600 4719 08bf\n    0000060: bb00 4859 03b7 0049 3a08 bb00 4a59 1908\n    0000070: 2ab4 0005 b700 4b3a 0919 0719 0910 08b6\n    0000080: 004c 1908 b600 4d3a 0a2a b400 052d b600\n    0000090: 4e12 37b6 0038 3a0b 2cbb 004f 5919 0bb7\n    00000a0: 0050 b600 512c 190a b600 52b1          \n  Exception Handler Table:\n    bci [67, 78] =&gt; handler: 86\n    bci [86, 88] =&gt; handler: 86\n  Stackmap Table:\n    append_frame(@60,Object[#149],Object[#149],Object[#150])\n    full_frame(@86,{Object[#85],Object[#20],Object[#10],Object[#149],Object[#149],Object[#150],Object[#151]},{Object[#116]})\n    append_frame(@96,Object[#69])\n\n        at org.gradle.process.internal.worker.child.WorkerProcessClassPathProvider.findClassPath(WorkerProcessClassPathProvider.java:171)\n        at org.gradle.api.internal.DefaultClassPathRegistry.getClassPath(DefaultClassPathRegistry.java:35)\n        at org.gradle.process.internal.worker.child.ApplicationClassesInSystemClassLoaderWorkerImplementationFactory.prepareJavaCommand(ApplicationClassesInSystemClassLoaderWorkerImplementationFactory.java:93)\n        at org.gradle.process.internal.worker.DefaultWorkerProcessBuilder.build(DefaultWorkerProcessBuilder.java:247)\n        at org.gradle.process.internal.worker.DefaultSingleRequestWorkerProcessBuilder$1.run(DefaultSingleRequestWorkerProcessBuilder.java:124)\n        at org.gradle.api.plugins.antlr.internal.AntlrWorkerManager.runWorker(AntlrWorkerManager.java:32)\n</code></pre>\n<p>If I were to remove the <code>ow2.asm</code>, this would work. I must not do that though. I must not use the <code>plugins {}</code> either, because that induces some tasks whose names are already taken.</p>\n<p>I'm confused about the source of the issue, because I can't even pin-point the <code>ow2.asm</code> version required by ANTLR4. I am using <code>Gradle 7.6.4</code>.\nPlease advise.</p>\n",
    "tags" : [ "java", "gradle", "antlr", "antlr4", "conflicting-libraries" ],
    "owner" : {
      "account_id" : 26152227,
      "reputation" : 15,
      "user_id" : 19840004,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucoCBkujwASqFYtLi5zB9gqx08rhH5S_GYNqtmOm=k-s256",
      "display_name" : "Florin Rotaru",
      "link" : "https://stackoverflow.com/users/19840004/florin-rotaru"
    },
    "is_answered" : false,
    "view_count" : 38,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1750934624,
    "creation_date" : 1750932997,
    "link" : "https://stackoverflow.com/questions/79680297/gradle-ow2-asm-dependency-conflict-when-using-antlr4",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140544898,
    "post_id" : 79680297,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79680297/edit\">edit</a> the question to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Why you can not remove the ows2 dependency? Why you can not remove what is plugins (which you haven&#39;t shared with us yet)?",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1750952510,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}