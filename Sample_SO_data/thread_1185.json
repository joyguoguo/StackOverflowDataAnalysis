{
  "question" : {
    "question_id" : 79734102,
    "title" : "IntelliJ error: Could not autowire when @ComponentScan is on custom annotation",
    "body" : "<p>I'm developing a library that provides custom annotation which brings some library beans into the application context (they use <code>@ComponentScan</code>). Applications that use the library see these beans normally but IntelliJ displays &quot;Could not autowire&quot; errors:</p>\n<p>Annotation definition:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\n@ComponentScan(basePackages = {&quot;com.unblu.middleware.common&quot;, &quot;com.unblu.middleware.bots&quot;})\npublic @interface WithUnbluBots {\n}\n</code></pre>\n<p>Annotation use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WithUnbluBots\npublic class App {\n    public static void main(String[] args) {\n        SpringApplication.run(App.class, args);\n    }\n}\n</code></pre>\n<p>Bean injections - work when running the app but IntelliJ shows &quot;could not autowire&quot; errors:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@RequiredArgsConstructor\npublic class TestMiddlewareService implements ApplicationRunner {\n    private final WebhookHandlerService webhookHandlerService; // IntelliJ complains here\n    ...\n}\n</code></pre>\n<p>No complaint if I move the <code>@ComponentScan</code> directly on App:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ComponentScan(basePackages = {&quot;com.unblu.middleware.common&quot;, &quot;com.unblu.middleware.bots&quot;})\npublic class App {\n    public static void main(String[] args) {\n        SpringApplication.run(App.class, args);\n    }\n}\n</code></pre>\n<p>How can I make IntelliJ recognize beans brought to the app context by custom annotations?</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "intellij-idea" ],
    "owner" : {
      "account_id" : 5823741,
      "reputation" : 53,
      "user_id" : 4590886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ca5e45f5598fea36d62ec1c536981db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rosik",
      "link" : "https://stackoverflow.com/users/4590886/rosik"
    },
    "is_answered" : false,
    "view_count" : 138,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1755170964,
    "creation_date" : 1755076820,
    "link" : "https://stackoverflow.com/questions/79734102/intellij-error-could-not-autowire-when-componentscan-is-on-custom-annotation",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140678601,
    "post_id" : 79734102,
    "body" : "OK, in the end the resolution for me was to drop custom annotations and use configuration classes and <code>@Import()</code> them - it&#39;s a bit less nice but easier than writing an own plugin...",
    "score" : 0,
    "owner" : {
      "account_id" : 5823741,
      "reputation" : 53,
      "user_id" : 4590886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ca5e45f5598fea36d62ec1c536981db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rosik",
      "link" : "https://stackoverflow.com/users/4590886/rosik"
    },
    "creation_date" : 1755680496,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140668704,
    "post_id" : 79734102,
    "body" : "Unfortunately you don&#39;t have many options. Static analysis tools only know about predefined rules that they have preprogrammed, they don&#39;t evaluate your code. So you only real option is similar to what Lombok did, which is create your own plugin which would adjust the warnings IDE would make and then ship that plugin together with your library. Or just ignore the warnings, that is what we did in our company project where we also use specific custom annotations",
    "score" : 1,
    "owner" : {
      "account_id" : 16657879,
      "reputation" : 4340,
      "user_id" : 12038714,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mAgRe8u2G_kzJJ-KZ2yZwAD1E4kxs9eRlqnY45BUw=k-s256",
      "display_name" : "asgarov1",
      "link" : "https://stackoverflow.com/users/12038714/asgarov1"
    },
    "creation_date" : 1755282180,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140667870,
    "post_id" : 79734102,
    "body" : "Exactly, thank you @asgarov1. I&#39;m just trying to make my lib nice to use.",
    "score" : 0,
    "owner" : {
      "account_id" : 5823741,
      "reputation" : 53,
      "user_id" : 4590886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ca5e45f5598fea36d62ec1c536981db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rosik",
      "link" : "https://stackoverflow.com/users/4590886/rosik"
    },
    "creation_date" : 1755257253,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140665400,
    "post_id" : 79734102,
    "body" : "if I understood correclty you have no issues with compilation/runtime and only with intellij static analysis. Intellij static analysis doesn&#39;t see through custom annotations, and therefore gives you false positive warnings about not being able to locate those beans based on the Spring Annotations it knows about. So not a real problem, but rather an expected sideeffect of using custom annotations",
    "score" : 0,
    "owner" : {
      "account_id" : 16657879,
      "reputation" : 4340,
      "user_id" : 12038714,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mAgRe8u2G_kzJJ-KZ2yZwAD1E4kxs9eRlqnY45BUw=k-s256",
      "display_name" : "asgarov1",
      "link" : "https://stackoverflow.com/users/12038714/asgarov1"
    },
    "creation_date" : 1755177163,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140664832,
    "post_id" : 79734102,
    "body" : "Yes - it&#39;s the same.",
    "score" : 0,
    "owner" : {
      "account_id" : 5823741,
      "reputation" : 53,
      "user_id" : 4590886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ca5e45f5598fea36d62ec1c536981db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rosik",
      "link" : "https://stackoverflow.com/users/4590886/rosik"
    },
    "creation_date" : 1755163212,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140663954,
    "post_id" : 79734102,
    "body" : "Did you try to update/re-install IntelliJ?",
    "score" : 0,
    "owner" : {
      "account_id" : 20869130,
      "reputation" : 19,
      "user_id" : 22960261,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4029afdddcec72a6b5c8385b3605bc60?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Axo",
      "link" : "https://stackoverflow.com/users/22960261/axo"
    },
    "creation_date" : 1755121399,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140662762,
    "post_id" : 79734102,
    "body" : "Yes, I actually have two annotations and just messed up the example - editing to make consistent. It makes no difference. I tried to invalidate caches, doesn&#39;t help.",
    "score" : 0,
    "owner" : {
      "account_id" : 5823741,
      "reputation" : 53,
      "user_id" : 4590886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ca5e45f5598fea36d62ec1c536981db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rosik",
      "link" : "https://stackoverflow.com/users/4590886/rosik"
    },
    "creation_date" : 1755092125,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140662320,
    "post_id" : 79734102,
    "body" : "You have different base packages in your @ComponentScan <code>@ComponentScan(basePackages = {&quot;com.unblu.middleware.common&quot;, &quot;com.unblu.middleware.bots&quot;})</code> vs <code>@ComponentScan(basePackages = {&quot;com.unblu.middleware.common&quot;, &quot;com.unblu.middleware.webhooks&quot;})</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 20869130,
      "reputation" : 19,
      "user_id" : 22960261,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4029afdddcec72a6b5c8385b3605bc60?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Axo",
      "link" : "https://stackoverflow.com/users/22960261/axo"
    },
    "creation_date" : 1755079531,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140662288,
    "post_id" : 79734102,
    "body" : "It really seems no problem at all on your code base. Have you tried cache invalidate?",
    "score" : 0,
    "owner" : {
      "account_id" : 28723778,
      "reputation" : 53,
      "user_id" : 21996995,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AAcHTtf0kjfcRdo954UZSYtqPeCpM3q-F1I2huOCKBb5=k-s256",
      "display_name" : "Chris Park",
      "link" : "https://stackoverflow.com/users/21996995/chris-park"
    },
    "creation_date" : 1755078936,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}