{
  "question" : {
    "question_id" : 79716902,
    "title" : "Why does my binary search return -1 even if the element exists?",
    "body" : "<p>I'm trying to implement a binary search in Java to find the index of a target value in a sorted array.<br />\nBut even when the element <strong>exists</strong>, my function returns <code>-1</code>.</p>\n<p><strong>Code:</strong></p>\n<pre><code>public int binarySearch(int[] arr, int target) {\n    int left = 0, right = arr.length;\n    while (left &lt; right) {\n        int mid = (left + right) / 2;\n        if (arr[mid] == target) return mid;\n        else if (arr[mid] &lt; target) left = mid + 1;\n        else right = mid - 1;\n    }\n    return -1;\n}\n\n// Test\nint[] arr = {1, 3, 5, 7, 9};\nint target = 5;\nint result = binarySearch(arr, target); // returns -1, but 5 exists at index 2\n</code></pre>\n<p><strong>What I Expected:</strong></p>\n<p>I expected the method to return <code>2</code>, because <code>5</code> is present at index 2.</p>\n<p><strong>What I Got:</strong></p>\n<p>The method returns <code>-1</code>, which means &quot;not found&quot;, even though <code>5</code> is in the array.</p>\n<p><strong>Question:</strong></p>\n<p>Am I using wrong loop conditions or boundary values? What should be corrected?</p>\n",
    "tags" : [ "java", "arrays", "algorithm", "binary-search" ],
    "owner" : {
      "account_id" : 43221897,
      "reputation" : 23,
      "user_id" : 31143033,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/661b3b0a12cd8f194dde369a8677c040?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Mathin Shaik",
      "link" : "https://stackoverflow.com/users/31143033/mathin-shaik"
    },
    "is_answered" : true,
    "view_count" : 183,
    "closed_date" : 1753698397,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1753680797,
    "creation_date" : 1753678667,
    "link" : "https://stackoverflow.com/questions/79716902/why-does-my-binary-search-return-1-even-if-the-element-exists",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79716904,
    "question_id" : 79716902,
    "body" : "<p>For your actual test case, it actually returns <code>2</code>, not <code>-1</code>, but the algorithm is nevertheless flawed. <code>right</code> is by design supposed to hold the index <em>outside</em> the range to consider, making it <code>[left, right)</code>, but <code>else right = mid - 1;</code> makes <code>[left, right)</code> skip a potential candidate, which can be noticed if you instead set <code>target</code> to <code>7</code> or if we use a simpler test case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr = {1, 3, 5};\nint target = 1;\n</code></pre>\n<p>Here, <code>left</code> starts out at <code>0</code> and <code>right</code> starts out at <code>3</code>. The range to consider is <code>[left, right)</code>, that is: <code>0, 1, 2</code>.</p>\n<ul>\n<li><code>(left + right) / 2</code>, <code>(0 + 3) / 2</code>, is <code>1</code>.</li>\n<li><code>arr[1] &gt; 1</code> so you do <code>right = 1 - 1</code>, setting <code>right</code> to <code>0</code>.</li>\n<li><code>while(left &lt; right)</code>, <code>while(0 &lt; 0)</code>, then becomes <code>false</code> and the loop is exited and the function will return <code>-1</code> even though <code>0</code> would be the correct result.</li>\n</ul>\n<p>It should therefore be <code>else right = mid;</code> to set <code>right</code> one step outside the range to consider.</p>\n<hr />\n<p>I'd also drop the equality test and check for less than and greater than instead because the equality case is the less likely to be encountered and if you want to generalize this algorithm to be useful with floating point variables, you want stay away from equality tests anyway.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int binarySearch(int[] arr, int target) {\n    int left = 0, right = arr.length;\n    while (left &lt; right) {\n        int mid = (left + right) / 2;\n        if (arr[mid] &lt; target) left = mid + 1;\n        else if(arr[mid] &gt; target) right = mid;   // not mid - 1\n        else return mid; // neither less than nor greater than, so equal\n    }\n    return -1;\n}\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10275035,
      "reputation" : 124144,
      "user_id" : 7582247,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/KPNHoVDG.png?s=256",
      "display_name" : "Ted Lyngmo",
      "link" : "https://stackoverflow.com/users/7582247/ted-lyngmo"
    },
    "creation_date" : 1753678801,
    "last_activity_date" : 1753680797,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140623783,
    "post_id" : 79716902,
    "body" : "It&#39;s very common to make small index mistakes like that. A simple way to debug the program is to print the values of left, right, mid inside the loop, and maybe even add a print inside each if/else branch to say which branch we&#39;re on. If something happens which is different from what you expect, you will notice it by looking at what is printed.",
    "score" : 1,
    "owner" : {
      "account_id" : 3700957,
      "reputation" : 15676,
      "user_id" : 3080723,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/65b1ece9161b791b5a19d0582e177073?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Stef",
      "link" : "https://stackoverflow.com/users/3080723/stef"
    },
    "creation_date" : 1753706559,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140622988,
    "post_id" : 79716902,
    "body" : "@user85421 I agree (which is why that&#39;s the first thing I mentioned in my answer).",
    "score" : 0,
    "owner" : {
      "account_id" : 10275035,
      "reputation" : 124144,
      "user_id" : 7582247,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/KPNHoVDG.png?s=256",
      "display_name" : "Ted Lyngmo",
      "link" : "https://stackoverflow.com/users/7582247/ted-lyngmo"
    },
    "creation_date" : 1753685142,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140622981,
    "post_id" : 79716902,
    "body" : "How exactly did you get the result? Posted code is returning <code>2</code>, the correct index: <a href=\"https://ideone.com/QOSSPQ\" rel=\"nofollow noreferrer\">ideone.com/QOSSPQ</a>",
    "score" : 3,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1753684668,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79716904" : [ {
      "comment_id" : 140624306,
      "post_id" : 79716904,
      "body" : "@Unmitigated Yes, that&#39;d work too but requires more changes and results in a &quot;messier&quot; program with two <code>- 1</code>s (and a <code>&lt;=</code>) that are not needed if the initial range boundaries are kept.",
      "score" : 2,
      "owner" : {
        "account_id" : 10275035,
        "reputation" : 124144,
        "user_id" : 7582247,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/KPNHoVDG.png?s=256",
        "display_name" : "Ted Lyngmo",
        "link" : "https://stackoverflow.com/users/7582247/ted-lyngmo"
      },
      "creation_date" : 1753717682,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140624275,
      "post_id" : 79716904,
      "body" : "<code>right</code> doesn&#39;t inherently have to hold an index outside the range; it would also be fine to initialize <code>right</code> to <code>arr.length - 1</code> and change the loop condition to <code>left &lt;= right</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1753717281,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}