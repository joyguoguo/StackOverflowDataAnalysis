{
  "question" : {
    "question_id" : 79808109,
    "title" : "Java Multithread EventHandling",
    "body" : "<p>I'm trying to write an audio player in Java/JavaFX and want to make a playlist play songs automatically. I have a button that triggers a new thread, and everything works fine so far.. but when the first song is over, the new thread (task?) is somehow inactive and doesn't update, so the new song will not be triggered.</p>\n<p>If I go to debug mode and make the thread active by hand or have for example a line printed during the whole infinite loop there is no problem getting the new song played automatically by the following code.</p>\n<p>Did I forget to implement some update event or something?</p>\n<p>Any ideas how I could get this fixed? Would be really welcome and thanks in advance..</p>\n<hr />\n<p><em>public ControlPane(MP3Player mp3Player)</em></p>\n<pre><code>    btnPlayPlayList = new Button(&quot;playlist&quot;);\n    btnPlayPlayList.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n        @Override\n        public void handle(ActionEvent event){\n            mp3Player.startPlaylist(); \n        }\n    });\n</code></pre>\n<hr />\n<p><em>public class MP3Player</em></p>\n<pre><code>    public void startPlaylist(){\n        Thread th = new Thread(playlistController);\n        th.setDaemon(true);\n        th.start();\n    }\n</code></pre>\n<hr />\n<p><em>public class PlaylistController extends Task</em></p>\n<pre><code>    @Override\n    public void call(){\n        int i = 0;\n        boolean playlistIsPlaying = true;\n        playlsitHelper(i);\n        while(playlistIsPlaying){\n            // it works with System.out.println\n            // System.out.println(&quot;temp&quot;);\n            if(audioPlayer.isPlaying() == false){\n                i++;\n                if (i &lt; playlist.size())\n                    playlsitHelper(i);\n                else\n                    playlistIsPlaying = false;\n            }\n        }\n     return playListIsPlaying;\n    }\n\n    private void playlsitHelper(int i){\n        TrackModel tempTitel = playlist.get(i);\n        audioPlayer = minim.loadMP3File(tempTitel.getPath());\n        audioPlayer.play();\n    } \n</code></pre>\n",
    "tags" : [ "java", "multithreading", "javafx" ],
    "owner" : {
      "account_id" : 44544565,
      "reputation" : 1,
      "user_id" : 31807744,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/399b33a7348ffd89d4e378c421ad0a90?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Momo Tamura",
      "link" : "https://stackoverflow.com/users/31807744/momo-tamura"
    },
    "is_answered" : false,
    "view_count" : 139,
    "answer_count" : 0,
    "score" : -1,
    "last_activity_date" : 1762248804,
    "creation_date" : 1762188166,
    "link" : "https://stackoverflow.com/questions/79808109/java-multithread-eventhandling",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140835891,
    "post_id" : 79808109,
    "body" : "If you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we might be able to be more specific about the solution.",
    "score" : 2,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49884,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1762266996,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140835745,
    "post_id" : 79808109,
    "body" : "This is not the correct way to approach this, as @jewelsea notes. You should not be polling the status of the media player, either in a background thread or in the FX Application Thread. You should be responding to events instead. Read the linked question.",
    "score" : 3,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210891,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1762262805,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140835301,
    "post_id" : 79808109,
    "body" : "Thank you so much, that exactly solved my problem. I just added a small Thread.sleep(500) and it works as it should.  I added a new thread because i call the function from a button.setOnAction event and i head to close the event to not get frozen UI. I use the minim.jar as a sound library.",
    "score" : 0,
    "owner" : {
      "account_id" : 44544565,
      "reputation" : 1,
      "user_id" : 31807744,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/399b33a7348ffd89d4e378c421ad0a90?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Momo Tamura",
      "link" : "https://stackoverflow.com/users/31807744/momo-tamura"
    },
    "creation_date" : 1762248571,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140834699,
    "post_id" : 79808109,
    "body" : "JavaFX is <a href=\"https://en.wikipedia.org/wiki/Event-driven_programming\" rel=\"nofollow noreferrer\">event driven</a>. As VGR notes, you should be responding to events, not running your own thread. Here is <a href=\"https://stackoverflow.com/questions/17035762/java-music-player-song-information-and-playing\">related question</a> and some old <a href=\"https://gist.github.com/jewelsea/1446612\" rel=\"nofollow noreferrer\">example code</a>. The example code is just to demo the concept, it is not intended as a production ready audio player. –",
    "score" : 4,
    "owner" : {
      "account_id" : 1180113,
      "reputation" : 160456,
      "user_id" : 1155209,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=256&d=identicon&r=PG",
      "display_name" : "jewelsea",
      "link" : "https://stackoverflow.com/users/1155209/jewelsea"
    },
    "creation_date" : 1762214432,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140834375,
    "post_id" : 79808109,
    "body" : "<code>while(playlistIsPlaying)</code> ← This is called a spin loop.  It’s a loop that runs <i>very</i> fast, with no pauses or waiting.  It gives other threads almost no CPU to run with, including the JavaFX application thread.  I’m not sure what the type of <code>audioPlayer</code> is, but if it’s a JavaFX MediaPlayer, you need to check for the end of a playback using the <a href=\"https://openjfx.io/javadoc/25/javafx.media/javafx/scene/media/MediaPlayer.html#setOnStopped(java.lang.Runnable)\" rel=\"nofollow noreferrer\">onStopped</a> property.  (Also, you don’t need a new thread at all if you’re using a JavaFX MediaPlayer to play sound files.)",
    "score" : 6,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44936,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1762198116,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}