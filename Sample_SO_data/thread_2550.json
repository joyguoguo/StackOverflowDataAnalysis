{
  "question" : {
    "question_id" : 79613202,
    "title" : "Problem with MSLSA to use TGT session key from ticket Kerberos and use sqlplus or sqldeveloper",
    "body" : "<p>I would like to change in my file sqlnet.ora from OSMSFT:// to MSLSA: to integrate Microsoft security.\nThe problem come when I try to open a database in with authentification Kerberos like :\nsqlplus /@databasename   (or sqldeveloper) and Java need the tgt session keys.\nI have an error ORA-01017 invalid user name or password.</p>\n<p>In fact, I activate the regedit key HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Lsa\\Kerberos\\Parameters\\ AllowTGTSessionKey to value 1 and it work at first!\nBut now with credential guard activated ,it doesn't work anymore. The reason is here : <a href=\"https://learn.microsoft.com/en-us/troubleshoot/windows-server/windows-security/kerberos-protocol-registry-kdc-configuration-keys\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/troubleshoot/windows-server/windows-security/kerberos-protocol-registry-kdc-configuration-keys</a></p>\n<p>In the document they are saying :\nWith active Credential Guard in Windows 10 and later versions of Windows, you can't enable sharing the TGT session keys with applications anymore.</p>\n<p>So what is my alternative to make it simple or do I have to keep OSMSFT and wait for better integrate options to use tgt sessions keys in the future?\nI can use a ccname cache in a user directory but it sound more complicated than before and MSLSA would not manage my credentials which is less secure and force me to execute a kinit etc.....</p>\n<p>Thanks a lot!!</p>\n",
    "tags" : [ "java", "oracle-database", "oracle-sqldeveloper", "kerberos", "sqlplus" ],
    "owner" : {
      "account_id" : 7266283,
      "reputation" : 59,
      "user_id" : 5540847,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/10153782079263156/picture?type=large",
      "display_name" : "SRI_Techno",
      "link" : "https://stackoverflow.com/users/5540847/sri-techno"
    },
    "is_answered" : false,
    "view_count" : 169,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1746739880,
    "creation_date" : 1746739880,
    "link" : "https://stackoverflow.com/questions/79613202/problem-with-mslsa-to-use-tgt-session-key-from-ticket-kerberos-and-use-sqlplus-o",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140411201,
    "post_id" : 79613202,
    "body" : "Well, no, non-microsoft apps are completely free to use the Windows SSPI API for that purpose – it&#39;s just <i>specifically Java</i> that doesn&#39;t bother to do so (surprisingly to me). Plenty of other non-microsoft apps use SSPI successfully (e.g. Firefox does, curl does, Python does, OpenSSH does...) and it&#39;s not even that much different from the &quot;standard&quot; Unix GSSAPI. And so far my impression was that &quot;OSMSFT&quot; does exactly that, i.e. goes through SSPI for the tickets?",
    "score" : 0,
    "owner" : {
      "account_id" : 20740,
      "reputation" : 20136,
      "user_id" : 49849,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e10f1fb3760601f575b7b359d5618166?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grawity",
      "link" : "https://stackoverflow.com/users/49849/grawity"
    },
    "creation_date" : 1746799022,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140411047,
    "post_id" : 79613202,
    "body" : "I had a problem with .net application that use the nuget oracle.manageddataaccess and need in my sqlnet.ora the authentication mode MSLSA: (not OSMSFT://). So I thought it would be a good idea to review why not to push MSLSA for all users/servers because we are relying on microsoft AD all the time. Credential guard blocks the tgtsession key that we store it in our MSLSA local on the computer so we cannot authenticate to the database server for non-microsoft apps (java) <a href=\"https://learn.microsoft.com/en-us/windows/security/identity-protection/credential-guard/considerations-known-issues\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/windows/security/identity-protecti&zwnj;&#8203;on/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 7266283,
      "reputation" : 59,
      "user_id" : 5540847,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/10153782079263156/picture?type=large",
      "display_name" : "SRI_Techno",
      "link" : "https://stackoverflow.com/users/5540847/sri-techno"
    },
    "creation_date" : 1746796434,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140409763,
    "post_id" : 79613202,
    "body" : "the thing is, &quot;sharing TGT session keys&quot; is literally what makes MSLSA <i>less secure</i> – as soon as it becomes possible to extract the TGT key, then it becomes hardly any better than FILE-based caches. The whole point of LSA is that it works like ssh-agent and doesn&#39;t allow extraction, only usage through the official API.",
    "score" : 0,
    "owner" : {
      "account_id" : 20740,
      "reputation" : 20136,
      "user_id" : 49849,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e10f1fb3760601f575b7b359d5618166?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grawity",
      "link" : "https://stackoverflow.com/users/49849/grawity"
    },
    "creation_date" : 1746764740,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140409761,
    "post_id" : 79613202,
    "body" : "What&#39;s wrong with OSMSFT though? I&#39;m not very familiar, but isn&#39;t it exactly what should be used?",
    "score" : 0,
    "owner" : {
      "account_id" : 20740,
      "reputation" : 20136,
      "user_id" : 49849,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e10f1fb3760601f575b7b359d5618166?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grawity",
      "link" : "https://stackoverflow.com/users/49849/grawity"
    },
    "creation_date" : 1746764654,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}