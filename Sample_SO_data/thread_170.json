{
  "question" : {
    "question_id" : 79829952,
    "title" : "H2 Database connects in IDE, but not from console or as a JAR file",
    "body" : "<p>I'm trying to make a Maven project that connects to an H2 database. In an IDE this works fine, but when executing the compiled project in the terminal, or when building the project into a JAR file and executing it, I get the following error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>No suitable driver found for jdbc:h2:./diary;INIT=RUNSCRIPT FROM 'classpath:diaries.sql';\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:638)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:222)\n    at edu.ntnu.idi.idat.TestCode.main(TestCode.java:18)\n</code></pre>\n<p>Here's the command I used to run the project jar file:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar target/project-1.0-SNAPSHOT.jar\n</code></pre>\n<p>Here's the command I used to run the project directly:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -cp target/classes/ edu.ntnu.idi.idat.TestCode\n</code></pre>\n<p>What does it mean to not find suitable drivers, and how can I ensure a successful database connection?</p>\n<p>I've tried moving the JAR file around my project folder, from the <code>target</code> folder, to the root of the project folder, and even to the folder where I have my <code>TestCode.java</code> file.</p>\n<p>A post with a similar error mentions class loaders. I'm not sure what that is, and I haven't done anything related to that, so I don't believe that's relevant to my problem, although I might be wrong.</p>\n<p>Code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package edu.ntnu.idi.idat;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic final class TestCode {\n    private TestCode() { }\n    /**\n     * Test code.\n     * @param args\n     */\n    public static void main(\n        final String[] args\n    ) {\n        try {\n            Connection connection = DriverManager.getConnection(\n                &quot;jdbc:h2:./diary;INIT=RUNSCRIPT FROM 'classpath:diaries.sql';&quot;\n            );\n            System.out.println(\n                &quot;connection.isValid() = &quot;\n                + connection.isValid(0)\n            );\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Here's the pom.xml file as requested:</p>\n<p><code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;edu.ntnu&lt;/groupId&gt;\n  &lt;artifactId&gt;project&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;project&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;version&gt;2.4.240&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n      &lt;version&gt;7.0.0-M9&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;archive&gt;\n            &lt;manifest&gt;\n              &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n              &lt;mainClass&gt;edu.ntnu.idi.idat.TestCode&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.1&lt;/version&gt;\n          &lt;configuration&gt;\n            &lt;source&gt;11&lt;/source&gt;\n            &lt;target&gt;11&lt;/target&gt;\n            &lt;compilerArgs&gt;\n              &lt;arg&gt;--add-exports=java.base/com.sun.crypto.provider=ALL-UNNAMED&lt;/arg&gt;\n            &lt;/compilerArgs&gt;\n          &lt;/configuration&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p><code>diaries.sql</code>:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table if not exists DIARIES (id identity primary key, title varchar (255) not null, author varchar (255) not null, dating TIMESTAMP not null, diarytype varchar (255) not null, public BOOLEAN not null, password varchar(255), contents MEDIUMBLOB (100000) not null);\n</code></pre>\n<p>Possibly relevant parts of the file structure:</p>\n<p><a href=\"https://i.sstatic.net/8MXOtctT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/8MXOtctT.png\" alt=\"relevant parts of a project file structure\" /></a></p>\n<p>Edit:</p>\n<p>I believe it's different from the question <a href=\"https://stackoverflow.com/questions/66333795/how-intellij-is-able-to-resolve-dependencies-and-run-a-spring-boot-maven-appli\">how IntelliJ is able to resolve dependencies and run a spring boot (maven) application while from the command line, it is not possible?</a>, as I'm already using the maven-jar-plugin to build dependencies into my jar file.</p>\n",
    "tags" : [ "java", "jar", "h2" ],
    "owner" : {
      "account_id" : 37604239,
      "reputation" : 105,
      "user_id" : 28332552,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5a84dbd7a917124e895a66d1b7b38d61?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Lucy",
      "link" : "https://stackoverflow.com/users/28332552/lucy"
    },
    "is_answered" : true,
    "view_count" : 133,
    "closed_date" : 1764242992,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1764243144,
    "creation_date" : 1764086791,
    "link" : "https://stackoverflow.com/questions/79829952/h2-database-connects-in-ide-but-not-from-console-or-as-a-jar-file",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}