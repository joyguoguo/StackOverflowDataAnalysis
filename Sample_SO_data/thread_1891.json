{
  "question" : {
    "question_id" : 79667091,
    "title" : "Google Chat API suddenly returns 500 Internal Server Error after 2 years of stable operation",
    "body" : "<p>I have a production Java application that has been sending messages to Google Chat spaces using the <a href=\"https://developers.google.com/chat/api/reference/rest\" rel=\"nofollow noreferrer\">Google Chat API</a> for over two years with absolutely no issues. The relevant code and Google Cloud configuration have not changed at all during this time. Suddenly, starting today (2025-06-16), every attempt to send a message is failing with a 500 Internal Server Error from the API.</p>\n<p>To emphasize:\nThis part of our codebase has been stable and untouched for two years, always working fine until today. No deployments, configuration, or permission changes have been made recently.</p>\n<p>Java Code:</p>\n<pre><code>try {\n    HangoutsChat hangoutsChat =\n        hangoutsChatManager.getChatService(TenantContextHolderUtil.getTenantCode());\n    if (hangoutsChat != null) {\n        hangoutsChat.spaces().messages().create(item.getUnionId(), reply).execute();\n    }\n    return true;\n} catch (Exception e) {\n    log.error(&quot;send msg to google chat error&quot;, e);\n    return false;\n}\n</code></pre>\n<p>The error occurs specifically at this line:</p>\n<pre><code>hangoutsChat.spaces().messages().create(item.getUnionId(), reply).execute();\n</code></pre>\n<p>Error Message and Stack Trace</p>\n<pre><code>com.google.api.client.googleapis.json.GoogleJsonResponseException: 500 Internal Server Error\nPOST https://chat.googleapis.com/v1/spaces/pkuYy0AAAAE/messages\n{\n  &quot;code&quot;: 500,\n  &quot;errors&quot;: [\n    {\n      &quot;domain&quot;: &quot;global&quot;,\n      &quot;message&quot;: &quot;Internal error encountered.&quot;,\n      &quot;reason&quot;: &quot;backendError&quot;\n    }\n  ],\n  &quot;message&quot;: &quot;Internal error encountered.&quot;,\n  &quot;status&quot;: &quot;INTERNAL&quot;\n}\n    at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:146)\n    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:118)\n    at com.google.api.client.googleapis.services.json.AbstractGoogleJsonClientRequest.newExceptionOnError(AbstractGoogleJsonClientRequest.java:37)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest$3.interceptResponse(AbstractGoogleClientRequest.java:479)\n    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:1111)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:565)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:506)\n    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:616)\n</code></pre>\n<p>Environment</p>\n<p>Java 21\nGoogle API Client Library for Java (version: v1-rev20240912-2.0.0)</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.apis&lt;/groupId&gt;\n    &lt;artifactId&gt;google-api-services-chat&lt;/artifactId&gt;\n    &lt;version&gt;v1-rev20240912-2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Google Workspace Enterprise\nService account authentication</p>\n<p>What I’ve Tried</p>\n<p>Verified that the service account, authentication, and all permissions are still valid and unchanged.\nTried sending a simple plain text message (&quot;test&quot;) to rule out formatting/content issues.\nTried using a different space (spaceId) and a different user.\nChecked <a href=\"https://www.google.com/appsstatus\" rel=\"nofollow noreferrer\">Google Workspace Status Dashboard</a> and <a href=\"https://status.cloud.google.com/\" rel=\"nofollow noreferrer\">Google Cloud Status Dashboard</a> — no reported outages.\nSearched for any recent changes or incidents related to Google Chat API — nothing found.\nThere have been no recent changes in Google Workspace domain policies or API quotas.</p>\n<p>Questions</p>\n<p>Has anyone experienced a similar sudden onset of 500 Internal Server Error with the Google Chat API?\nIs there any way to further debug what’s going wrong with this API endpoint when the error is so generic?\nAre there any known recent changes in Google Chat API, permissions, or backend that could cause this?</p>\n",
    "tags" : [ "java", "google-cloud-platform", "http-status-code-500", "google-chat" ],
    "owner" : {
      "account_id" : 23280435,
      "reputation" : 31,
      "user_id" : 17363966,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJy5W8aBOflWTb7tfy5x-Bagnxguu_1KOCn5Y3cy=k-s256",
      "display_name" : "Leon Bill",
      "link" : "https://stackoverflow.com/users/17363966/leon-bill"
    },
    "is_answered" : false,
    "view_count" : 259,
    "closed_date" : 1750058598,
    "answer_count" : 0,
    "score" : 3,
    "last_activity_date" : 1750051572,
    "creation_date" : 1750051572,
    "link" : "https://stackoverflow.com/questions/79667091/google-chat-api-suddenly-returns-500-internal-server-error-after-2-years-of-stab",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140519877,
    "post_id" : 79667091,
    "body" : "I figured it out. Our app did not have <a href=\"https://www.googleapis.com/auth/chat.bot\" rel=\"nofollow noreferrer\">googleapis.com/auth/chat.bot</a> properly set. It was somehow working before 2025-06-16.",
    "score" : 0,
    "owner" : {
      "account_id" : 13853271,
      "reputation" : 101,
      "user_id" : 10000682,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-S0nrNSuTWM4/AAAAAAAAAAI/AAAAAAAAAAA/n-fbhZqPB-0/s256-rj/photo.jpg",
      "display_name" : "Hristo Hristov",
      "link" : "https://stackoverflow.com/users/10000682/hristo-hristov"
    },
    "creation_date" : 1750153892,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140516396,
    "post_id" : 79667091,
    "body" : "I have the exact same issue. Our app was running fine for 2 years and since last Thursday I get 500",
    "score" : 0,
    "owner" : {
      "account_id" : 13853271,
      "reputation" : 101,
      "user_id" : 10000682,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-S0nrNSuTWM4/AAAAAAAAAAI/AAAAAAAAAAA/n-fbhZqPB-0/s256-rj/photo.jpg",
      "display_name" : "Hristo Hristov",
      "link" : "https://stackoverflow.com/users/10000682/hristo-hristov"
    },
    "creation_date" : 1750060667,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140516195,
    "post_id" : 79667091,
    "body" : "I’m voting to close this question because it should be addressed to Google.",
    "score" : 1,
    "owner" : {
      "account_id" : 71739,
      "reputation" : 311869,
      "user_id" : 207421,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=256&d=identicon&r=PG",
      "display_name" : "user207421",
      "link" : "https://stackoverflow.com/users/207421/user207421"
    },
    "creation_date" : 1750055882,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}