{
  "question" : {
    "question_id" : 79619525,
    "title" : "Newer OpenRewrite Maven plugins fail to complete rewrite:run due to missing SNAPSHOT in repository",
    "body" : "<p>In an attempt to upgrade to <strong>Java 17</strong> compliant code, when using an older versions of <code>rewrite-maven-plugin(5.30.0)</code> and <code>rewrite-migrate-java(2.13.0)</code>, the <code>rewrite:run</code> works as expected.</p>\n<p>However, when using newer versions of the same jars, such as 6.8.1 and 2.20.0 respectively, the <code>rewrite:run</code> fails to download referenced(custom) SNAPSHOTs of mine from my remote repository (even though they already exist in my local .m2 directory), and the build exits at that point with an error such as the following:</p>\n<pre><code>[ERROR] org.openrewrite.maven.MavenDownloadingException: com.meowit.bom:kat-tools-bom:6.0.70-SNAPSHOT failed. Unable to download POM: com.meowit.bom:kat-tools-bom:6.0.70-SNAPSHOT. \nTried repositories: \n[ERROR] http://animal/nxstar/content/groups/public: HTTP 404 \n[ERROR] org.openrewrite.maven.internal.MavenPomDownloader.download(MavenPomDownloader.java:686) \n[ERROR] org.openrewrite.maven.tree.ResolvedPom$Resolver.mergeDependencyManagement(ResolvedPom.java:865) \n[ERROR] org.openrewrite.maven.tree.ResolvedPom$Resolver.resolveParentDependenciesRecursively(ResolvedPom.java:471) \n[ERROR] org.openrewrite.maven.tree.ResolvedPom$Resolver.resolveParentDependenciesRecursively(ResolvedPom.java:453) \n[ERROR] org.openrewrite.maven.tree.ResolvedPom$Resolver.resolveParentsRecursively(ResolvedPom.java:405) [ERROR] org.openrewrite.maven.tree.ResolvedPom$Resolver.resolve(ResolvedPom.java:376) \n[ERROR]org.openrewrite.maven.tree.ResolvedPom.resolve(ResolvedPom.java:190) [ERROR] org.openrewrite.maven.tree.Pom.resolve(Pom.java:217) \n[ERROR] org.openrewrite.maven.tree.Pom.resolve(Pom.java:198) \n[ERROR] -&gt; [Help 1]\n org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.openrewrite.maven:rewrite-maven-plugin:6.8.1:run (default-cli) on project asmr-tools-model: Failed to parse or resolve the Maven POM file or one of its dependencies; We can not reliably continue without this information...\n</code></pre>\n<p>I've edited my <strong>settings.xml</strong> in all possible ways to get it to ignore the remote repository, or not update snapshots.</p>\n<p><strong>settings.xml:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;profiles&gt;\n    &lt;profile&gt;\n        &lt;id&gt;local-snapshots&lt;/id&gt;\n        &lt;repositories&gt;\n            &lt;repository&gt;\n                &lt;id&gt;local-snapshots&lt;/id&gt;\n                &lt;url&gt;file://C:/.m2&lt;/url&gt;\n                &lt;releases&gt;\n                    &lt;enabled&gt;false&lt;/enabled&gt;\n                &lt;/releases&gt;\n                &lt;snapshots&gt;\n                    &lt;enabled&gt;true&lt;/enabled&gt;\n                &lt;/snapshots&gt;\n            &lt;/repository&gt;\n        &lt;/repositories&gt;\n    &lt;/profile&gt;\n    &lt;profile&gt;\n        &lt;id&gt;no-snapshot-updates&lt;/id&gt;\n        &lt;repositories&gt;\n            &lt;repository&gt;\n                &lt;id&gt;nxstar&lt;/id&gt;\n                &lt;url&gt;http://animal/nxstar/content/groups/public&lt;/url&gt;\n                &lt;snapshots&gt;\n                    &lt;enabled&gt;false&lt;/enabled&gt;\n                &lt;/snapshots&gt;\n            &lt;/repository&gt;\n        &lt;/repositories&gt;\n    &lt;/profile&gt;\n&lt;/profiles&gt;\n&lt;activeProfiles&gt;\n    &lt;activeProfile&gt;no-snapshot-updates&lt;/activeProfile&gt;\n&lt;/activeProfiles&gt;\n</code></pre>\n<p>However none of that changes the behaviour. It seems the only thing that allows the <code>rewrite:run</code> to function without a hitch, is using the older versions of those openrewrite jars.</p>\n<p>That's not to say it still doesn't try to download the SNAPSHOTS from the remote repository, because it still does and that still fails, however, the actual recipe run continues in spite of not being able to download those custom SNAPSHOT jars of mine. What am I missing? The issue here is that 2.13.0 is for <strong>Java 11</strong> and 2.22.0 is for <strong>Java 17</strong>, which now has the problem described above. My code base consists of many referenced custom projects, all are being updated and that's why all are still SNAPSHOTS. They only get put onto the remote repository after being released/Final versions.</p>\n",
    "tags" : [ "java", "maven", "nexus", "snapshot", "openrewrite" ],
    "owner" : {
      "account_id" : 18973137,
      "reputation" : 1,
      "user_id" : 13846191,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-vgSZ6tHwMR8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucktiySeOTZwp98PTguPTDlbqJJZrw/s256-rj/photo.jpg",
      "display_name" : "Watchuta Awkin",
      "link" : "https://stackoverflow.com/users/13846191/watchuta-awkin"
    },
    "is_answered" : false,
    "view_count" : 262,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1747324376,
    "creation_date" : 1747134457,
    "link" : "https://stackoverflow.com/questions/79619525/newer-openrewrite-maven-plugins-fail-to-complete-rewriterun-due-to-missing-snap",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}