{
  "question" : {
    "question_id" : 79676487,
    "title" : "Maven assembly plugin single goal is ignoring pom files when generating the archive",
    "body" : "<p>I am upgrading the assembly plugin within a large maven multi-module codebase from version 2.6 to version 3.7.1 (latest). Back then, the assembly plugin used to copy the specified jars and poms into the specified path like the following configuration:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;assembly&gt;\n    &lt;id&gt;some-id&lt;/id&gt;\n    &lt;formats&gt;\n        &lt;format&gt;dir&lt;/format&gt;\n    &lt;/formats&gt;\n    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;includes&gt;\n                &lt;include&gt;com.example.data:database-access&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n&lt;/assembly&gt;\n</code></pre>\n<p>However, now after migrating the configuration to make it compatible with 3.7.1 like the following:</p>\n<pre><code>&lt;assembly xmlns=&quot;http://maven.apache.org/ASSEMBLY/2.2.0&quot;\n          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n          xsi:schemaLocation=&quot;http://maven.apache.org/ASSEMBLY/2.2.0\n                              https://maven.apache.org/xsd/assembly-2.2.0.xsd&quot;&gt;\n    &lt;id&gt;some-id&lt;/id&gt;\n    &lt;formats&gt;\n        &lt;format&gt;dir&lt;/format&gt;\n    &lt;/formats&gt;\n    &lt;includeBaseDirectory&gt;false&lt;/includeBaseDirectory&gt;\n    &lt;dependencySets&gt;\n        &lt;dependencySet&gt;\n            &lt;useProjectArtifact&gt;false&lt;/useProjectArtifact&gt;\n            &lt;outputFileNameMapping&gt;\n                ${artifact.groupIdPath}/${artifact.artifactId}/${artifact.version}/${artifact.artifactId}-${artifact.version}${dashClassifier}.${artifact.extension}\n            &lt;/outputFileNameMapping&gt;\n            &lt;includes&gt;\n                &lt;include&gt;com.example.data:database-access&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/dependencySet&gt;\n    &lt;/dependencySets&gt;\n&lt;/assembly&gt;\n\n</code></pre>\n<p>The single goal is only copying the jars and ignoring the pom files of the specified dependencies. Note that my assemblies are way bigger and this is just a small example demonstration.</p>\n<p>Is there a way i can also copy their poms? I read the documentation and can't seem to find a way to do so.</p>\n",
    "tags" : [ "java", "maven", "plugins", "dependencies" ],
    "owner" : {
      "account_id" : 29664334,
      "reputation" : 31,
      "user_id" : 22735242,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocIe-2huaGdxF-x0yfJu2eNImi-UkSMX7sKs4PKf2P-B=k-s256",
      "display_name" : "Kevin Nammour",
      "link" : "https://stackoverflow.com/users/22735242/kevin-nammour"
    },
    "is_answered" : false,
    "view_count" : 77,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1750733265,
    "creation_date" : 1750695767,
    "link" : "https://stackoverflow.com/questions/79676487/maven-assembly-plugin-single-goal-is-ignoring-pom-files-when-generating-the-arch",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140591993,
    "post_id" : 79676487,
    "body" : "What&#39;s the point of assembling/copying &quot;the pom files of the specified dependencies&quot;? The Assembly plugin is intended <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">&quot;<i>to combine project output into a single distributable archive that also contains dependencies, modules, site documentation, and other files</i>&quot; (namely resources)</a>. (Build) POMs usually aren&#39;t needed for an app distribution.",
    "score" : 0,
    "owner" : {
      "account_id" : 1937747,
      "reputation" : 15080,
      "user_id" : 1744774,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
      "display_name" : "Gerold Broser",
      "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
    },
    "creation_date" : 1752606270,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140574312,
    "post_id" : 79676487,
    "body" : "Hi @khmarbaise, I don&#39;t see why you insist on me providing a reason for doing this. I need to copy some dependencies to be used at runtime by another testing tool. The copy-dependencies filters are very bad in the sense that not all filtering are doable because u can&#39;t specify artifact by artifact, and the assembly no longer copies the pom files.",
    "score" : 0,
    "owner" : {
      "account_id" : 19356581,
      "reputation" : 43,
      "user_id" : 14152794,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GgsdC2iPSpVUYsv2zcXIz1NqUCIWRq8YmTvxnq4vA=k-s256",
      "display_name" : "Kevin Nammour",
      "link" : "https://stackoverflow.com/users/14152794/kevin-nammour"
    },
    "creation_date" : 1751990391,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140562022,
    "post_id" : 79676487,
    "body" : "The size of the assemblies is a different thing... you can give a full working example for example on github so I might take a look into it?",
    "score" : 0,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1751547429,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140562021,
    "post_id" : 79676487,
    "body" : "It is clear that you where doing such things, but you haven&#39;t given a real reason for that? Because artfacts are in a repo (either locally or remote etc.) but the question kept... What is the real purpose of such an approache? And yes the previous major version (2.X <a href=\"https://maven.apache.org/plugins-archives/maven-assembly-plugin-2.6/assembly.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins-archives/maven-assembly-plugin-2.6/&zwnj;&#8203;&hellip;</a>) support the repository format while version  3.X does not support that anymore <a href=\"https://maven.apache.org/plugins/maven-assembly-plugin/assembly.html\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-assembly-plugin/assembly.html</a> ... If you give some more background it might be possible that I can help...",
    "score" : 0,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1751547401,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140560040,
    "post_id" : 79676487,
    "body" : "Hi @khmarbaise, the teams are packaging some dependencies along with their poms and checksums. That was doable in the previous versions of the assembly plugin. And i can&#39;t figure a way to copy all these dependencies artifacts into a dir with maven layout structure.",
    "score" : 0,
    "owner" : {
      "account_id" : 19356581,
      "reputation" : 43,
      "user_id" : 14152794,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GgsdC2iPSpVUYsv2zcXIz1NqUCIWRq8YmTvxnq4vA=k-s256",
      "display_name" : "Kevin Nammour",
      "link" : "https://stackoverflow.com/users/14152794/kevin-nammour"
    },
    "creation_date" : 1751488630,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140537723,
    "post_id" : 79676487,
    "body" : "Why do you need the pom file while copying them via assembly plugin... and why using a dir format? What is. the purpose of the whole setup?",
    "score" : 1,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1750759152,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}