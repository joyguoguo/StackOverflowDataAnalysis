{
  "question" : {
    "question_id" : 79647789,
    "title" : "expo android build error: arm64-v8a : No compatible library found",
    "body" : "<p>I am trying to build expo android inside docker container. Here's all the apt packages</p>\n<pre class=\"lang-none prettyprint-override\"><code>RUN apt update &amp;&amp; apt install -y \\\n    ca-certificates curl gnupg make gcc zip unzip apt-utils apt-transport-https software-properties-common \\\n    python3 python3-pip python3-dev \\\n    python3-sphinx graphviz \\\n    git openjdk-17-jdk \\\n    wget tar lib32stdc++6 lib32z1 libc6-i386 \\\n    build-essential ninja-build \\\n    --no-install-recommends &amp;&amp; \\\n    curl https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip -o /tmp/awscliv2.zip &amp;&amp; \\\n    unzip /tmp/awscliv2.zip -d /tmp &amp;&amp; \\\n    /tmp/aws/install &amp;&amp; \\\n    curl https://releases.hashicorp.com/terraform/1.10.4/terraform_1.10.4_linux_amd64.zip -o /tmp/terraform_1.10.4_linux_amd64.zip &amp;&amp; \\\n    unzip /tmp/terraform_1.10.4_linux_amd64.zip -d /usr/bin &amp;&amp; \\\n    mkdir -p /etc/apt/keyrings &amp;&amp; \\\n    curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg &amp;&amp; \\\n    echo &quot;deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_20.x nodistro main&quot; | tee /etc/apt/sources.list.d/nodesource.list &amp;&amp; \\\n    apt update &amp;&amp; apt install -y nodejs --no-install-recommends &amp;&amp; \\\n    npm install -g yarn @stoplight/spectral-cli @redocly/cli@latest eas-cli@latest &amp;&amp; \\\n    mkdir -p /opt/android-sdk/cmdline-tools &amp;&amp; \\\n    curl -o /tmp/sdk.zip https://dl.google.com/android/repository/commandlinetools-linux-11076708_latest.zip &amp;&amp; \\\n    unzip /tmp/sdk.zip -d /opt/android-sdk/cmdline-tools &amp;&amp; \\\n    mv /opt/android-sdk/cmdline-tools/cmdline-tools /opt/android-sdk/cmdline-tools/latest &amp;&amp; \\\n    dpkg --add-architecture i386 &amp;&amp; \\\n    apt update &amp;&amp; \\\n    apt install -y libncurses5:i386 libstdc++6:i386 zlib1g:i386 &amp;&amp; \\\n    rm -rf /var/lib/apt/lists/* &amp;&amp; \\\n    yes | /opt/android-sdk/cmdline-tools/latest/bin/sdkmanager --licenses\n</code></pre>\n<p>In my makefile</p>\n<pre class=\"lang-makefile prettyprint-override\"><code>ANDROID_HOME?=/opt/android-sdk\nJAVA_TOOL_OPTIONS?=-Djava.net.preferIPv4Stack=true // otherwise gradle errors with can't connect to daemon\n\nbuild-android-local:\n    @eas build --profile development --platform android --local\n</code></pre>\n<p>and my package.json</p>\n<pre class=\"lang-json prettyprint-override\"><code>  &quot;dependencies&quot;: {\n    &quot;@aws-amplify/react-native&quot;: &quot;^1.1.6&quot;,\n    &quot;@aws-amplify/rtn-web-browser&quot;: &quot;^1.1.0&quot;,\n    &quot;@aws-amplify/ui-react-native&quot;: &quot;^2.2.12&quot;,\n    &quot;@expo/config-plugins&quot;: &quot;~8.0.0&quot;,\n    &quot;@expo/metro-config&quot;: &quot;~0.18.11&quot;,\n    &quot;@expo/vector-icons&quot;: &quot;^14.0.3&quot;,\n    &quot;@maplibre/maplibre-react-native&quot;: &quot;^10.1.4&quot;,\n    &quot;@react-native-async-storage/async-storage&quot;: &quot;1.23.1&quot;,\n    &quot;@react-native-community/datetimepicker&quot;: &quot;8.0.1&quot;,\n    &quot;@react-native-community/masked-view&quot;: &quot;^0.1.11&quot;,\n    &quot;@react-native-community/netinfo&quot;: &quot;11.3.1&quot;,\n    &quot;@react-native-firebase/analytics&quot;: &quot;^21.12.3&quot;,\n    &quot;@react-native-firebase/app&quot;: &quot;^21.12.2&quot;,\n    &quot;@react-native-firebase/crashlytics&quot;: &quot;^21.10.1&quot;,\n    &quot;@react-native-picker/picker&quot;: &quot;2.7.5&quot;,\n    &quot;@react-navigation/bottom-tabs&quot;: &quot;^6.6.1&quot;,\n    &quot;@react-navigation/native&quot;: &quot;^6.1.18&quot;,\n    &quot;@react-navigation/stack&quot;: &quot;^6.4.1&quot;,\n    &quot;aws-amplify&quot;: &quot;^6.6.3&quot;,\n    &quot;expo-build-properties&quot;: &quot;~0.12.5&quot;,\n    &quot;expo-constants&quot;: &quot;^16.0.2&quot;,\n    &quot;expo-dev-client&quot;: &quot;~4.0.29&quot;,\n    &quot;expo-device&quot;: &quot;~6.0.2&quot;,\n    &quot;expo-notifications&quot;: &quot;~0.28.19&quot;,\n    &quot;expo-status-bar&quot;: &quot;~1.12.1&quot;,\n    &quot;libphonenumber-js&quot;: &quot;^1.12.6&quot;,\n    &quot;react&quot;: &quot;18.2.0&quot;,\n    &quot;react-native&quot;: &quot;0.74.5&quot;,\n    &quot;react-native-element-dropdown&quot;: &quot;^2.12.2&quot;,\n    &quot;react-native-gesture-handler&quot;: &quot;~2.16.1&quot;,\n    &quot;react-native-get-random-values&quot;: &quot;^1.11.0&quot;,\n    &quot;react-native-phone-number-input&quot;: &quot;^2.1.0&quot;,\n    &quot;react-native-reanimated&quot;: &quot;~3.10.1&quot;,\n    &quot;react-native-safe-area-context&quot;: &quot;4.10.5&quot;,\n    &quot;react-native-screens&quot;: &quot;3.31.1&quot;,\n    &quot;react-native-select-dropdown&quot;: &quot;^4.0.1&quot;\n  }\n</code></pre>\n<p>when i run the local build</p>\n<pre><code>[RUN_GRADLEW] &gt; [CXX1210] /tmp/root/eas-build-local-nodejs/c7aeedef-f9ab-4e5e-ab9c-94a07f45c823/build/node_modules/expo-modules-core/android/CMakeLists.txt debug|arm64-v8a : No compatible library found\n</code></pre>\n<p>I am not sure whats causing the issue. Any help would be much appreciated. I tried searching the issue and some have suggested that setting _JAVA_OPTIONS might cause this. Not sure where to start debugging.</p>\n",
    "tags" : [ "java", "android", "react-native", "gradle", "cmake" ],
    "owner" : {
      "account_id" : 12441786,
      "reputation" : 536,
      "user_id" : 9059634,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8a27fbfee5171c9f78445eaaa09c195a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "sakib11",
      "link" : "https://stackoverflow.com/users/9059634/sakib11"
    },
    "is_answered" : false,
    "view_count" : 64,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748800222,
    "creation_date" : 1748800222,
    "link" : "https://stackoverflow.com/questions/79647789/expo-android-build-error-arm64-v8a-no-compatible-library-found",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}