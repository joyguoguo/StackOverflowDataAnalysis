{
  "question" : {
    "question_id" : 79704946,
    "title" : "Migration to Apache PDFBox 3.0. PDFMergerUtility addSource() does not accept ByteArrayInputStream, what is its replacement?",
    "body" : "<p>Previously, to merge multiple PDF files, I did it this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, byte[]&gt; documentList = new TreeMap&lt;&gt;();\n....\nPDFMergerUtility pdfMergerUtility = new PDFMergerUtility();\npdfMergerUtility.setDestinationStream(outputStream);\ndocumentList.forEach((key, value) -&gt; \n    pdfMergerUtility.addSource(new ByteArrayInputStream(value)));\n</code></pre>\n<p>In version 3.0.0, the <code>addSource</code> method no longer accepts InputStream. I found the migration guide, but it doesn't explain how to convert this method.</p>\n<p>I expect a similar method to have the same behavior.</p>\n",
    "tags" : [ "java", "pdfbox" ],
    "owner" : {
      "account_id" : 25192215,
      "reputation" : 376,
      "user_id" : 19032274,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0563e07cd78f267674a416fa09d4d3cc?s=256&d=identicon&r=PG",
      "display_name" : "Lako12",
      "link" : "https://stackoverflow.com/users/19032274/lako12"
    },
    "is_answered" : true,
    "view_count" : 327,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752852396,
    "creation_date" : 1752761399,
    "link" : "https://stackoverflow.com/questions/79704946/migration-to-apache-pdfbox-3-0-pdfmergerutility-addsource-does-not-accept-byt",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79706416,
    "question_id" : 79704946,
    "body" : "<p>I solved the problem, thanks to @M.Deinum</p>\n<p>Updated code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>PDFMergerUtility pdfMergerUtility = new PDFMergerUtility();\npdfMergerUtility.setDestinationStream(outputStream);\ndocumentList.forEach((key, value) -&gt; {\n    pdfMergerUtility.addSource(new RandomAccessReadBuffer(value));\n});\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 25192215,
      "reputation" : 376,
      "user_id" : 19032274,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0563e07cd78f267674a416fa09d4d3cc?s=256&d=identicon&r=PG",
      "display_name" : "Lako12",
      "link" : "https://stackoverflow.com/users/19032274/lako12"
    },
    "creation_date" : 1752852396,
    "last_activity_date" : 1752852396,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140597588,
    "post_id" : 79704946,
    "body" : "@M.Deinum I think you should post that as an answer.",
    "score" : 1,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1752768318,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140597210,
    "post_id" : 79704946,
    "body" : "See <a href=\"https://pdfbox.apache.org/3.0/migration.html\" rel=\"nofollow noreferrer\">pdfbox.apache.org/3.0/migration.html</a> (which you have found) and check the <code>addSource</code> API. That now takes a <code>RandomAccessRead</code>, there is a dedicated one that wraps a <code>byte[]</code> the <code>RandomAccessReadBuffer</code>. So basically replace new ByteArrayInputStream(value)` with <code>new RandomAccessReadBuffer(value)</code>.",
    "score" : 5,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1752761960,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}