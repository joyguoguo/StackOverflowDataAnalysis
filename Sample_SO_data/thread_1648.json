{
  "question" : {
    "question_id" : 79687830,
    "title" : "How to inject map with list as value from properties file in Spring?",
    "body" : "<p>I have a configuration in my <code>.properties</code> file that looks like this:</p>\n<pre><code>my.config=key:value1,value2,value3\n</code></pre>\n<p>And from java code, I want to read it like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;${my.config}&quot;)\nprivate Map&lt;String, List&lt;String&gt;&gt; availableProductsForJurisdiction;\n</code></pre>\n<p>expecting that <code>availableProductsForJurisdiction</code> will have something like <code>{'key': ['value1', 'value2', 'value3']}</code></p>\n<p>But this fails at runtime. What is the proper syntax to inject a list from a properties file?</p>\n",
    "tags" : [ "java", "spring", "dependency-injection", "configuration" ],
    "owner" : {
      "account_id" : 3796291,
      "reputation" : 1208,
      "user_id" : 3151270,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/ocEco.gif?s=256",
      "display_name" : "cristid9",
      "link" : "https://stackoverflow.com/users/3151270/cristid9"
    },
    "is_answered" : true,
    "view_count" : 100,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751479495,
    "creation_date" : 1751476376,
    "link" : "https://stackoverflow.com/questions/79687830/how-to-inject-map-with-list-as-value-from-properties-file-in-spring",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79687891,
    "question_id" : 79687830,
    "body" : "<p>If you want to inject a multi-dimensional property via the <code>@Value</code> annotation, you need to use a SpEL expression. Also, the syntax you used in the properties file is wrong. Each list should be declared in the form <code>{value1, value2, ..., valueN}</code>.</p>\n<p>Your properties file should be rewritten like so:</p>\n<pre><code>my.config={'key1':{'value11','value12','value13'}, 'key2':{'value21','value22','value23'}}\n</code></pre>\n<p>While, the <code>@Value</code> injection should look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;#{${my.config}}&quot;)\nprivate Map&lt;String, List&lt;String&gt;&gt; availableProductsForJurisdiction;\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5569841,
      "reputation" : 8664,
      "user_id" : 4415625,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0ea1713807527aa1cf52e40579e35ec4?s=256&d=identicon&r=PG",
      "display_name" : "dani-vta",
      "link" : "https://stackoverflow.com/users/4415625/dani-vta"
    },
    "creation_date" : 1751479456,
    "last_activity_date" : 1751479456,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140560162,
    "post_id" : 79687830,
    "body" : "As well as the potential dupe questions, here is a reference to the <a href=\"https://docs.spring.io/spring-framework/reference/core/expressions/language-ref/inline-maps.html\" rel=\"nofollow noreferrer\">official documentation</a>, showing examples of strings which represent SpEL maps. And see here for <a href=\"https://docs.spring.io/spring-framework/reference/core/expressions/language-ref/inline-lists.html\" rel=\"nofollow noreferrer\">lists</a> (since you want a map of lists). These use the same syntax as in @dani-vta&#39;s answer (except that quoting keys can be optional, as noted in the documentation).",
    "score" : 0,
    "owner" : {
      "account_id" : 12743722,
      "reputation" : 22621,
      "user_id" : 12567365,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zNR3x.png?s=256",
      "display_name" : "andrewJames",
      "link" : "https://stackoverflow.com/users/12567365/andrewjames"
    },
    "creation_date" : 1751492532,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140559712,
    "post_id" : 79687830,
    "body" : "See this related (almost identical) question - also from today, in the Staging Ground: <a href=\"https://stackoverflow.com/staging-ground/79687604\">Inject map of properties from spring</a>. That question was suggested to be a duplicate of <a href=\"https://stackoverflow.com/q/30691949/12567365\">How to inject a Map using the @Value Spring Annotation?</a> - and some other questions, also.",
    "score" : 0,
    "owner" : {
      "account_id" : 12743722,
      "reputation" : 22621,
      "user_id" : 12567365,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zNR3x.png?s=256",
      "display_name" : "andrewJames",
      "link" : "https://stackoverflow.com/users/12567365/andrewjames"
    },
    "creation_date" : 1751481606,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79687891" : [ {
      "comment_id" : 140560032,
      "post_id" : 79687891,
      "body" : "@cristid9 The answer works in vanilla Spring. Also, before posting, I copy-pasted the code from a test project I made to make sure it would actually work. Here is a link to a public repo I just made with the code <a href=\"https://github.com/daniele-aveta/SpringValueTest\" rel=\"nofollow noreferrer\">github.com/daniele-aveta/SpringValueTest</a>  There might be some typos or other issues in your code. Hope the link helps you with it!",
      "score" : 1,
      "owner" : {
        "account_id" : 5569841,
        "reputation" : 8664,
        "user_id" : 4415625,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/0ea1713807527aa1cf52e40579e35ec4?s=256&d=identicon&r=PG",
        "display_name" : "dani-vta",
        "link" : "https://stackoverflow.com/users/4415625/dani-vta"
      },
      "creation_date" : 1751488362,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140560017,
      "post_id" : 79687891,
      "body" : "btw, I am not using spring boot",
      "score" : 0,
      "owner" : {
        "account_id" : 3796291,
        "reputation" : 1208,
        "user_id" : 3151270,
        "user_type" : "registered",
        "accept_rate" : 96,
        "profile_image" : "https://i.sstatic.net/ocEco.gif?s=256",
        "display_name" : "cristid9",
        "link" : "https://stackoverflow.com/users/3151270/cristid9"
      },
      "creation_date" : 1751488117,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140559848,
      "post_id" : 79687891,
      "body" : "I get something like this if I do the example above:  ` Caused by: org.springframework.expression.spel.SpelParseException: EL1041E: After parsing a valid expression, there is still more data in the expression: `",
      "score" : 0,
      "owner" : {
        "account_id" : 3796291,
        "reputation" : 1208,
        "user_id" : 3151270,
        "user_type" : "registered",
        "accept_rate" : 96,
        "profile_image" : "https://i.sstatic.net/ocEco.gif?s=256",
        "display_name" : "cristid9",
        "link" : "https://stackoverflow.com/users/3151270/cristid9"
      },
      "creation_date" : 1751484049,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}