{
  "question" : {
    "question_id" : 79541488,
    "title" : "How to correct center window on a screen in Java 11 with Temurin VM/Oracle VM",
    "body" : "<p>I want to center my JFrame in a 4K Screen (3840x2400) with 250% scaling for Java 11. This screen is a secondary screen in Windows and placed left to the my main screen (Full HD, 1920x1080, 100% scaling). I have no another screens in my system.</p>\n<p>I have following code to do it:</p>\n<pre><code>/**\n * Locates the given window at the center of its current graphics device.\n *\n * @param aWindow window to center.\n */\npublic static void center(Window aWindow) { // window was created with a correct GraphicsConfiguration\n    final Dimension paneSize = aWindow.getSize();\n    Rectangle screenBounds = aWindow.getGraphicsConfiguration().getBounds();\n    subtractInsets(aWindow.getGraphicsConfiguration(), screenBounds);\n    aWindow.setLocation(screenBounds.x + (screenBounds.width - paneSize.width) / 2,\n            screenBounds.y + (screenBounds.height - paneSize.height) / 2);\n}\n\nprivate static void subtractInsets(GraphicsConfiguration display, Rectangle bounds) {\n    Insets ins = Toolkit.getDefaultToolkit().getScreenInsets(display);\n    bounds.x += ins.left;\n    bounds.y += ins.top;\n    bounds.width -= ins.left + ins.right;\n    bounds.height -= ins.top + ins.bottom;\n}\n</code></pre>\n<p>When I run this code on Open JDK (Temurin) this code works correctly. And when I print my screen bounds i get java.awt.Rectangle[x=-1536,y=0,width=1536,height=960]. But when I run it on Oracle JDK my window goes placed on both screens (ugly) and when I print my screen bounds i get java.awt.Rectangle[x=-3840,y=0,width=1536,height=960].</p>\n<p>I've found a solution, that works for both cases. Here is it:</p>\n<pre><code>/**\n * Locates the given window at the center of its current graphics device.\n *\n * @param aWindow window to center.\n */\npublic static void center(Window aWindow) {\n    final Dimension paneSize = aWindow.getSize();\n    Rectangle screenBounds = aWindow.getGraphicsConfiguration().getBounds();\n    updateBoundsForDisplayIfRequired(screenBounds, aWindow.getGraphicsConfiguration());\n    subtractInsets(aWindow.getGraphicsConfiguration(), screenBounds);\n    aWindow.setLocation(screenBounds.x + (screenBounds.width - paneSize.width) / 2,\n            screenBounds.y + (screenBounds.height - paneSize.height) / 2);\n}\n\nprivate static void subtractInsets(GraphicsConfiguration display, Rectangle bounds) {\n    Insets ins = Toolkit.getDefaultToolkit().getScreenInsets(display);\n    bounds.x += ins.left;\n    bounds.y += ins.top;\n    bounds.width -= ins.left + ins.right;\n    bounds.height -= ins.top + ins.bottom;\n}\n\nprivate static void updateBoundsForDisplayIfRequired(@Nonnull Rectangle bounds, @Nonnull GraphicsConfiguration display) {\n    if (isOracleVM()) {\n        bounds.x = (int) Math.round(bounds.x * display.getDefaultTransform().getScaleX());\n        bounds.y = (int) Math.round(bounds.y * display.getDefaultTransform().getScaleY());\n        bounds.width = (int) Math.round(bounds.width * display.getDefaultTransform().getScaleX());\n        bounds.height = (int) Math.round(bounds.height * display.getDefaultTransform().getScaleY());\n    }\n}\n\n/**\n * Checks whether we are in the Oracle VM. Some AWT features works different with Oracle vs. Open JDK.\n * \n * @return true if we are in oracle VM.\n */\npublic static boolean isOracleVM() {\n    return System.getProperty(&quot;java.vendor&quot;, &quot;&quot;).contains(&quot;Oracle&quot;);\n}\n</code></pre>\n<p>But I'm not sure whether it's a correct solution for all screen combinations and VMs. Can somebody verify/improve my code?</p>\n",
    "tags" : [ "java", "swing", "awt" ],
    "owner" : {
      "account_id" : 2259314,
      "reputation" : 11357,
      "user_id" : 1989769,
      "user_type" : "registered",
      "accept_rate" : 45,
      "profile_image" : "https://i.sstatic.net/37IMZ.jpg?s=256",
      "display_name" : "Sergiy Medvynskyy",
      "link" : "https://stackoverflow.com/users/1989769/sergiy-medvynskyy"
    },
    "is_answered" : false,
    "view_count" : 90,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743166709,
    "creation_date" : 1743166709,
    "link" : "https://stackoverflow.com/questions/79541488/how-to-correct-center-window-on-a-screen-in-java-11-with-temurin-vm-oracle-vm",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140276425,
    "post_id" : 79541488,
    "body" : "With my last sentence I meant you could also try <code>aWindow.setLocationRelativeTo(aWindow);</code>.",
    "score" : 1,
    "owner" : {
      "account_id" : 9059972,
      "reputation" : 3471,
      "user_id" : 6746785,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
      "display_name" : "gthanop",
      "link" : "https://stackoverflow.com/users/6746785/gthanop"
    },
    "creation_date" : 1743235452,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140276410,
    "post_id" : 79541488,
    "body" : "Maybe try <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Window.html#setLocationRelativeTo(java.awt.Component)\" rel=\"nofollow noreferrer\"><code>aWindow.setLocationRelativeTo(null);</code></a> (since the <code>Window</code> has the intended <code>GraphicsConfiguration</code>). There is a second option to try according to the method&#39;s documentation that you can supply a <code>Component</code> which is not showing but has the intended <code>GraphicsConfiguration</code>.",
    "score" : 2,
    "owner" : {
      "account_id" : 9059972,
      "reputation" : 3471,
      "user_id" : 6746785,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
      "display_name" : "gthanop",
      "link" : "https://stackoverflow.com/users/6746785/gthanop"
    },
    "creation_date" : 1743234720,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140273964,
    "post_id" : 79541488,
    "body" : "Also could be related to backport of <a href=\"https://stackoverflow.com/questions/78927342/graphicsenvironment-getlocalgraphicsenvironment-getdefaultscreendevice-getde/78948536#78948536\">JDK-8211999 mentioned here</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1743169224,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140273929,
    "post_id" : 79541488,
    "body" : "Sound similar to these <a href=\"https://stackoverflow.com/questions/3680221/how-can-i-get-screen-resolution-in-java/70294946#70294946\">scaling issues</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1743168691,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}