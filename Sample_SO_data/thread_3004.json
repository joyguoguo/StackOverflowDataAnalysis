{
  "question" : {
    "question_id" : 79578765,
    "title" : "Spring Scheduler + Start tasks at a specific time",
    "body" : "<p>Using Spring, I need to configure a task which is going to be executed every morning at 8am, so I think I could use the <code>@Scheduler</code> annotation</p>\n<p>My scheduler is going to get some informations in a DB which are some actions to do at different time of the current day, example: I retrieve 2 elements, containing the hour 11am and 2pm, so I want two tasks starting on 2 differents threads (with a retry, spring retry?) at hour 11am and 2pm\nHow can I implement this?</p>\n<p>Using claude, I get some informations:</p>\n<pre><code>@Service\n@EnableScheduling\n@EnableAsync\npublic class DynamicSchedulerService {\n\n\n    private final TaskScheduler taskScheduler;\n\n    @Autowired\n    public DynamicSchedulerService(ScheduledActionRepository actionRepository, \n                                 TaskScheduler taskScheduler) {\n        this.actionRepository = actionRepository;\n        this.taskScheduler = taskScheduler;\n    }\n\n    @Scheduled(cron = &quot;0 0 8 * * *&quot;) // Runs at 8 AM every day\n    public void scheduleTasksForToday() {\n        Runnable task = createRetryableTask(action);\n        taskScheduler.schedule(\n            task,\n            executionDateTime.atZone(ZoneId.systemDefault()).toInstant()\n        );\n   \n    }\n\n\n    @Retryable(\n        value = { Exception.class },\n        maxAttempts = 3,\n        backoff = @Backoff(delay = 5000))\n    private Runnable createRetryableTask() {\n        return () -&gt; {\n             executeAction();\n        };\n    }\n\n    @Async\n    private void executeAction() {\n        // Implement your action execution logic here\n       \n    }\n\n}\n\n@Configuration\n@EnableRetry\npublic class SchedulerConfig {\n\n    @Bean\n    public TaskScheduler taskScheduler() {\n        ThreadPoolTaskScheduler scheduler = new ThreadPoolTaskScheduler();\n        scheduler.setPoolSize(10); // Adjust based on your needs\n        scheduler.setThreadNamePrefix(&quot;dynamic-scheduler-&quot;);\n        return scheduler;\n    }\n}\n</code></pre>\n<p>What I'm not sure it's about the @Retryable witch is executing the retry in the same thread but here there is a call with an @Async inside the retryable method.</p>\n<p>As the tasks are started in their own thread, is the async needed?\nIn my use case the task is going to make a REST call to a micro service, the call is going to take time (less than a minute but more than 10 seconds</p>\n",
    "tags" : [ "java", "spring" ],
    "owner" : {
      "account_id" : 3408319,
      "reputation" : 11201,
      "user_id" : 2858871,
      "user_type" : "registered",
      "accept_rate" : 79,
      "profile_image" : "https://i.sstatic.net/GwUqu.jpg?s=256",
      "display_name" : "Emilien Brigand",
      "link" : "https://stackoverflow.com/users/2858871/emilien-brigand"
    },
    "is_answered" : false,
    "view_count" : 48,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744880414,
    "creation_date" : 1744876848,
    "link" : "https://stackoverflow.com/questions/79578765/spring-scheduler-start-tasks-at-a-specific-time",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}