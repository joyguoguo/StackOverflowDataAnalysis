{
  "question" : {
    "question_id" : 79663791,
    "title" : "Java spring boot exception mapper is very inconsistent with REST API",
    "body" : "<p>I am trying to implement an <code>Exception</code> mapper in Spring Boot application to capture all the exceptions thrown by the REST API.</p>\n<p>The exception mapper is working inconsistently which means for exception thrown only sometimes the exception mapper is called and logs the error as mentioned in the below code but sometimes its not working. I build the project freshly removing the target spring boot jar and still the same inconsistent behavior.  I am very confused about the behavior. Below is the code. Any help is appreciated.</p>\n<p>Major dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;spring.boot.version&gt;3.2.3&lt;/spring.boot.version&gt;\n&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n      &lt;version&gt;6.4.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class ResourceConfig extends BaseResourceConfig {\n    public ResourceConfig() {\n        super();\n        registerClasses(GlobalExceptionMapper.class);\n        registerClasses(AbcResource.class);\n        registerClasses(XyzResource.class);\n    }\n}\n\n@Log\n@Profile\n@Provider\n@Component\n@Priority(1)\npublic class GlobalExceptionMapper extends AbstractExceptionMapper&lt;Throwable&gt; implements ExceptionMapper&lt;Throwable&gt; {\n\n    @Inject\n    public GlobalExceptionMapper(ConversionService conversionService,\n                                 ErrorResponseActionHelper actionHelper,\n                                 ExceptionHelper exceptionHelper,\n                                 Optional&lt;MetricsExceptionRecorder&gt; exceptionMetricsRecorder,\n                                 @Value(&quot;${isExternalError:false}&quot;) boolean isExternalError) {\n        super(conversionService, actionHelper, exceptionHelper, exceptionMetricsRecorder, isExternalError);\n    }\n\n    @Override\n    public Response toResponse(@NonNull Throwable exception) {\n        LogMessage logMsg = new LogMessage(&quot;&quot;, &quot;20000&quot;, &quot;&quot;, &quot;&quot;, exception.getMessage());\n        logMsg.writeLogInfo();\n        return super.toResponse(exception);\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "exception", "spring-security" ],
    "owner" : {
      "account_id" : 1075383,
      "reputation" : 393,
      "user_id" : 1073662,
      "user_type" : "registered",
      "accept_rate" : 39,
      "profile_image" : "https://www.gravatar.com/avatar/acd4830c2b087023a60dd4efed9550a1?s=256&d=identicon&r=PG",
      "display_name" : "Monish Das",
      "link" : "https://stackoverflow.com/users/1073662/monish-das"
    },
    "is_answered" : false,
    "view_count" : 129,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1750324107,
    "creation_date" : 1749741902,
    "link" : "https://stackoverflow.com/questions/79663791/java-spring-boot-exception-mapper-is-very-inconsistent-with-rest-api",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79671816,
    "question_id" : 79663791,
    "body" : "<p>If you are using Jersey (JAX-RS) to handle REST APIs:<br />\nMake sure all REST resources are registered with Jersey, rather than using <code>@RestController</code>.</p>\n<p>Using <code>ExceptionMapper&lt;Throwable&gt;</code> allows you to handle exceptions globally. However, note that exceptions from Spring Security (such as authentication failures or access denials) are typically not passed to the <code>ExceptionMapper</code> and need to be handled separately.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 23753839,
      "reputation" : 1,
      "user_id" : 17770201,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/06OMrgCY.jpg?s=256",
      "display_name" : "spring summer",
      "link" : "https://stackoverflow.com/users/17770201/spring-summer"
    },
    "creation_date" : 1750324107,
    "last_activity_date" : 1750324107,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79671816" : [ {
      "comment_id" : 140533565,
      "post_id" : 79671816,
      "body" : "I had registered the resources with Jersey as well but still it was inconsistent.",
      "score" : 0,
      "owner" : {
        "account_id" : 1075383,
        "reputation" : 393,
        "user_id" : 1073662,
        "user_type" : "registered",
        "accept_rate" : 39,
        "profile_image" : "https://www.gravatar.com/avatar/acd4830c2b087023a60dd4efed9550a1?s=256&d=identicon&r=PG",
        "display_name" : "Monish Das",
        "link" : "https://stackoverflow.com/users/1073662/monish-das"
      },
      "creation_date" : 1750623578,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}