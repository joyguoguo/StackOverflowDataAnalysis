{
  "question" : {
    "question_id" : 79560336,
    "title" : "Spring GraphQL @oneOf input: How to map to polymorphic Java types?",
    "body" : "<p>I'm using Spring GraphQL with graphql-java and want to leverage the new @oneOf directive introduced in GraphQL 2022.</p>\n<p>Here's a simplified version of my schema:</p>\n<pre><code>type Mutation {\n  createAnimal(input: AnimalInput!): String\n}\n\ninput AnimalInput @oneOf {\n  dog: DogInput\n  cat: CatInput\n}\n\ninput DogInput {\n  name: String\n  breed: String\n}\n\ninput CatInput {\n  name: String\n  color: String\n}\n\n</code></pre>\n<p>I want to map this in Java using an abstract base class and let Spring automatically bind the right type:</p>\n<pre><code>public class AnimalRequest {\n    private Animal animal;\n    // getters/setters\n}\n\npublic abstract class Animal {\n}\n\npublic class Dog extends Animal {\n    private String name;\n    private String breed;\n}\n\npublic class Cat extends Animal {\n    private String name;\n    private String color;\n}\n\n</code></pre>\n<p>My GraphQL controller looks like this:</p>\n<pre><code>@MutationMapping\npublic String createAnimal(@Argument AnimalRequest input) {\n    System.out.println(input.getAnimal());\n    return &quot;ok&quot;;\n}\n\n</code></pre>\n<p>When I run the mutation:</p>\n<pre><code>mutation {\n  createAnimal(input: {\n    dog: {\n      name: &quot;Buddy&quot;\n      breed: &quot;Beagle&quot;\n    }\n  })\n}\n\n</code></pre>\n<p>I get the exception like <code>unable to instantiate Animal is it a abstract class ?</code></p>\n<p>When I tried changing Animal to normal class instead of abstract.I face no exceptions but the values arent binded upon inspection I get class has no fields meaning polymorphism didn't work as expected.</p>\n<ul>\n<li>I donâ€™t want to add a discriminator field like type = DOG|CAT.</li>\n<li>I just want Spring GraphQL (or Jackson) to recognize the structure based on the presence of a single field and bind it accordingly.</li>\n</ul>\n<p>How can I achieve this in a clean, idiomatic Spring GraphQL setup using @oneOf ?\nIs there a built-in way for Spring GraphQL to support this use case ?</p>\n<p>Thanks.</p>\n",
    "tags" : [ "java", "spring-boot", "polymorphism", "graphql-java" ],
    "owner" : {
      "account_id" : 26368872,
      "reputation" : 23,
      "user_id" : 20023869,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucowwBc5Qg1L0T5hFgtqbwTy4_tf7rALYczn9JyV=k-s256",
      "display_name" : "imsilversurfer",
      "link" : "https://stackoverflow.com/users/20023869/imsilversurfer"
    },
    "is_answered" : false,
    "view_count" : 240,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1757510907,
    "creation_date" : 1744041743,
    "link" : "https://stackoverflow.com/questions/79560336/spring-graphql-oneof-input-how-to-map-to-polymorphic-java-types",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79760912,
    "question_id" : 79560336,
    "body" : "<p>You are asking GraphQL to instantiate an abstract class. That is simply impossible.\nChange your declaration in such a way <code>Animal</code> is not abstract any longer.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22198269,
      "reputation" : 113,
      "user_id" : 16439343,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/21f1a1c3698742bc1ff50e13b77f3080?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Chaos",
      "link" : "https://stackoverflow.com/users/16439343/chaos"
    },
    "creation_date" : 1757510907,
    "last_activity_date" : 1757510907,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}