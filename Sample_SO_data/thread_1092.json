{
  "question" : {
    "question_id" : 79744524,
    "title" : "Max subArray =&gt; IllegalArgumentException: 6 &gt; 5",
    "body" : "<p>The method is working as intended, but while I was trying multiple cases, I got this weird issue, so hopefully someone can understand why and explain it to me, since 6 &gt; 5 looks logically sound to me, and when I try to invert a negative number to a positive, it works fine again \uD83D\uDE15</p>\n<pre><code>{2, -5, 6, -1, 4, -10, 2, 3, -2, 5, -1, 2, -4, 3,1} // the array that causes   the issue\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public int[] maxSubArray(int[] arr){\n   int currentMax = arr[0];\n   int currentIndex = 0;\n   int max = arr[0];\n   int startIndex = 0;\n\n   for(int i = 1; i &lt; arr.length; i++){\n       if(arr[i] &gt; currentMax + arr[i]){\n           startIndex = i;\n       }\n       currentMax = Math.max(currentMax + arr[i], arr[i]);\n       if (currentMax &gt; max){\n           currentIndex = i;\n       }\n       max = Math.max(currentMax, max);\n\n   }\n   return Arrays.copyOfRange(arr, startIndex, currentIndex + 1);\n}    \n</code></pre>\n",
    "tags" : [ "java", "arrays", "algorithm", "sub-array", "kadanes-algorithm" ],
    "owner" : {
      "account_id" : 43628521,
      "reputation" : 81,
      "user_id" : 31337116,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61c5c8fca85fa4c2a89e22be1162dcc7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "chtasmino",
      "link" : "https://stackoverflow.com/users/31337116/chtasmino"
    },
    "is_answered" : true,
    "view_count" : 199,
    "answer_count" : 2,
    "score" : 3,
    "last_activity_date" : 1756066423,
    "creation_date" : 1755977343,
    "link" : "https://stackoverflow.com/questions/79744524/max-subarray-illegalargumentexception-6-5",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79744607,
    "question_id" : 79744524,
    "body" : "<p>The exception results from calling <code>Arrays.copyOfRange</code> with a from index that is greater than the to index. You are only keeping track of the start index of the current subarray under consideration (the <code>startIndex</code> variable) and the end index of the subarray with maximum sum (the <code>currentIndex</code> variable), but have neglected to track the start index of the subarray with maximum sum.</p>\n<p>Your current code can be fixed with just a few changes.</p>\n<p>First, add a variable to store the start index of the subarray with the maximum sum found so far.</p>\n<pre><code>int maxSubarrayStart = 0;\n</code></pre>\n<p>Update this variable when a larger subarray sum is found.</p>\n<pre><code>if (currentMax &gt; max){\n    maxSubarrayStart = startIndex; // add this line\n    currentIndex = i;\n}\n</code></pre>\n<p>Finally, use that index to construct the return value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>return Arrays.copyOfRange(arr, maxSubarrayStart, currentIndex + 1);\n</code></pre>\n",
    "score" : 6,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 13170666,
      "reputation" : 91467,
      "user_id" : 9513184,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Unmitigated",
      "link" : "https://stackoverflow.com/users/9513184/unmitigated"
    },
    "creation_date" : 1755990603,
    "last_activity_date" : 1755990603,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79744525,
    "question_id" : 79744524,
    "body" : "<p>Try this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int[] maxSubArray(int[] arr){\n    int ans = arr[0];\n    int startIndex = 0;\n    int currentIndex = 0;\n    int sum = 0;\n    int currentMin = 0;\n    int minIndex = -1;\n\n    for (int i = 0; i&lt;arr.length; i++) {\n        sum += arr[i];\n \n        int cur = sum - currentMin;\n        if (cur &gt; ans) {\n            ans = cur;\n            startIndex = minIndex + 1;\n            currentIndex = i;\n        }\n \n        if (sum &lt; currentMin) {\n            currentMin = sum;\n            minIndex = i;\n        }    \n    }    \n    return Arrays.copyOfRange(arr, startIndex, currentIndex + 1);\n}\n</code></pre>\n<hr />\n<p>The second option is based on <a href=\"https://stackoverflow.com/a/79744607/22851022\">@Unmitigated's answer</a> and an abbreviation of the following expressions:</p>\n<p><code>if (arr[i] &gt; currentMax + arr[i])</code> =&gt; <code>if (currentMax &lt; 0)</code></p>\n<p><code>currentMax = Math.max(currentMax + arr[i], arr[i])</code> =&gt;<br/><code>currentMax = Math.max(currentMax, 0) + arr[i]</code> =&gt;<br/><code>if (currentMax &lt; 0) currentMax = 0; currentMax += arr[i]</code></p>\n<p>As a result of shifting operations inside the loop, you can get rid of several arithmetic operations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int[] maxSubArray(int[] arr){\n    int currentMax = arr[0];\n    int currentIndex = 0;\n    int max = arr[0];\n    int startIndex = 0;\n    int maxSubarrayStart = 0;\n\n    for (int i = 1; i &lt; arr.length; i++){\n\n        if (currentMax &lt; 0) {\n            startIndex = i;\n            currentMax = 0;\n        }\n\n        currentMax += arr[i];\n\n        if (currentMax &gt; max) {\n            maxSubarrayStart = startIndex; // add this line\n            max = currentMax;\n            currentIndex = i;\n        }\n    }\n    return Arrays.copyOfRange(arr, maxSubarrayStart, currentIndex + 1);\n}\n</code></pre>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 29816933,
      "reputation" : 2059,
      "user_id" : 22851022,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JfMqJ6p2.png?s=256",
      "display_name" : "Konstantin Makarov",
      "link" : "https://stackoverflow.com/users/22851022/konstantin-makarov"
    },
    "creation_date" : 1755977373,
    "last_activity_date" : 1756035079,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79744525" : [ {
      "comment_id" : 140688342,
      "post_id" : 79744525,
      "body" : "@Unmitigated, yes, you&#39;re right.",
      "score" : 0,
      "owner" : {
        "account_id" : 29816933,
        "reputation" : 2059,
        "user_id" : 22851022,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/JfMqJ6p2.png?s=256",
        "display_name" : "Konstantin Makarov",
        "link" : "https://stackoverflow.com/users/22851022/konstantin-makarov"
      },
      "creation_date" : 1756035276,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140687959,
      "post_id" : 79744525,
      "body" : "That is a correct (if verbose) implementation of Kadane&#39;s algorithm where empty subarrays are not allowed. Those lines do not point to the algorithm not working and there is nothing wrong with the sign dependence.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756012952,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140687726,
      "post_id" : 79744525,
      "body" : "The lines you highlighted do not indicate anything wrong with the algorithm. While they could be written more concisely, it is a fine implementation of Kadane&#39;s algorithm; the only issue is keeping track of the result properly.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1755990795,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79744607" : [ {
      "comment_id" : 140689007,
      "post_id" : 79744607,
      "body" : "@MarcePuente Glad to help.",
      "score" : 1,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756059748,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140688884,
      "post_id" : 79744607,
      "body" : "Thank you very much for your tolerance and for your constant dedication to explaining the “whys?.”",
      "score" : 0,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1756056365,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140688844,
      "post_id" : 79744607,
      "body" : "@chtasmino Happy to help.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756055356,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140688843,
      "post_id" : 79744607,
      "body" : "@MarcePuente This is an implementation of Kadane&#39;s algorithm, a standard method for solving the maximum sum subarray problem. When the current subarray sum becomes negative, it is always advantageous to start a new subarray.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756055321,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140688506,
      "post_id" : 79744607,
      "body" : "@Unmitigated this one helped a lot in grasping the logical procedure and getting me more close to understanding  the what where and why",
      "score" : 0,
      "owner" : {
        "account_id" : 43628521,
        "reputation" : 81,
        "user_id" : 31337116,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61c5c8fca85fa4c2a89e22be1162dcc7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "chtasmino",
        "link" : "https://stackoverflow.com/users/31337116/chtasmino"
      },
      "creation_date" : 1756042458,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140688037,
      "post_id" : 79744607,
      "body" : "I apologize, Professor. I neglected to change <b>return Arrays.copyOfRange( arr, startIndex, currentIndex + 1 );</b> by <b>return Arrays.copyOfRange( arr, maxSubarrayStart, currentIndex + 1 );</b>, on the other hand, I had trouble understanding the logic of <i>if</i> I was just trying to use a negative number in <b>arr[ i ]</b>...",
      "score" : 0,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1756018509,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140687882,
      "post_id" : 79744607,
      "body" : "@MarcePuente &quot;the line if( arr[i] &gt; currentMax + arr[i] ) { does not make sense&quot; - That is false. The array can contain negative numbers. (However, this could be written more concisely.)",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756004036,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140687880,
      "post_id" : 79744607,
      "body" : "@MarcePuente &quot;the proposed solution generates the same problem as commented by the OP&quot; - No, it does not produce the same exception. You can run the original code <a href=\"https://onecompiler.com/java/43um8wacd\" rel=\"nofollow noreferrer\">here</a> and the modified code <a href=\"https://onecompiler.com/java/43um8uthr\" rel=\"nofollow noreferrer\">here</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : 13170666,
        "reputation" : 91467,
        "user_id" : 9513184,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/176386ce0b94057e55352484e69707f9?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Unmitigated",
        "link" : "https://stackoverflow.com/users/9513184/unmitigated"
      },
      "creation_date" : 1756003947,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}