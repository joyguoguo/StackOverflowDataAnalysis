{
  "question" : {
    "question_id" : 79546753,
    "title" : "Valid parenthesis problem passes tests but fails when I submit",
    "body" : "<p>I'm currently trying to solve the Valid Parenthesis problem on Leetcode, in Java, that goes as follows:</p>\n<blockquote>\n<p>Given a string s containing just the characters '(', ')', '{', '}', '[' and ']', determine if the input string is valid.</p>\n</blockquote>\n<blockquote>\n<p>An input string is valid if: <br />\nOpen brackets must be closed by the same type of brackets. <br />\nOpen brackets must be closed in the correct order. <br />\nEvery close bracket has a corresponding open bracket of the same type&quot;</p>\n</blockquote>\n<p>I followed the hints which told me to use a stack. Here is my code:</p>\n<pre><code>import java.util.Stack;\n\nclass Solution {\n    public boolean isValid(String s) {\n        Stack&lt;Character&gt; values = new Stack&lt;&gt;();\n        for (int i=0; i &lt; s.length(); i++) {\n            if (s.charAt(i) == '(' || s.charAt(i) == '[' || s.charAt(i) == '{') {\n                values.push(s.charAt(i));\n            }\n\n            if ((s.charAt(i) == ')' &amp;&amp; values.peek() == '(') || (s.charAt(i) == ']' &amp;&amp; values.peek() == '[') || ((s.charAt(i) == '}') &amp;&amp; values.peek() == '{')) {\n                values.pop();\n            }\n        }\n        if (values.empty()) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>This passes all the test cases, however when I press submit, it gives me the following error:</p>\n<blockquote>\n<p>java.util.EmptyStackException <br /></p>\n<blockquote>\n<p>at line 103, java.base/java.util.Stack.peek <br />\nat line 11, Solution.isValid <br />\nat line 56, <strong>DriverSolution</strong>.<strong>helper</strong> <br />\nat line 86, <strong>Driver</strong>.main</p>\n</blockquote>\n</blockquote>\n<p>After looking at the documentation for java.util.Stack, I've seen that under the method peek() it says:</p>\n<blockquote>\n<p>Throws: <br />\nEmptyStackException - if this stack is empty.</p>\n</blockquote>\n<p>I understand it's to do with using peek() when the stack is empty, but I'm confused as to how to fix it since it somehow passed the tests before that. How do I fix this in my code?</p>\n",
    "tags" : [ "java", "exception", "stack", "throws" ],
    "owner" : {
      "account_id" : 31079002,
      "reputation" : 1,
      "user_id" : 23890189,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eeb77ec88e305a9c728b95844df8adcc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "pxkaa",
      "link" : "https://stackoverflow.com/users/23890189/pxkaa"
    },
    "is_answered" : false,
    "view_count" : 127,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1743575799,
    "creation_date" : 1743438268,
    "link" : "https://stackoverflow.com/questions/79546753/valid-parenthesis-problem-passes-tests-but-fails-when-i-submit",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79546823,
    "question_id" : 79546753,
    "body" : "<p>The problem arises because when a closing parenthesis appears with <strong>values</strong> empty, then your code enters the second <em>if</em> and tries a <strong>peek</strong> on the empty stack, what you should do is take two different paths if <strong>values</strong> is empty or if it is not.</p>\n<pre><code>public boolean isValid( String s ) {\n   Stack&lt;Character&gt; values = new Stack&lt;&gt;();\n   for( int i = 0; i &lt; s.length(); i ++ ) {\n      if( s.charAt( i ) == '(' || s.charAt( i ) == '[' || s.charAt( i ) == '{' ) {\n         values.push( s.charAt( i ) );\n      }\n      if( ! values.isEmpty() ) {\n         if(     s.charAt( i ) == ')' &amp;&amp; values.peek() == '(' || \n                 s.charAt( i ) == ']' &amp;&amp; values.peek() == '[' ||\n                 s.charAt( i ) == '}' &amp;&amp; values.peek() == '{' ) {\n            values.pop();\n         }\n      }\n      else {\n         if(     s.charAt( i ) == ')' ||\n                 s.charAt( i ) == ']' ||\n                 s.charAt( i ) == '}' ) {\n\n              // if we have a closing parenthesis and &quot;values&quot; is empty, the string is not valid.\n            return false;\n         }\n      }\n   }\n   return true;\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1743440184,
    "last_activity_date" : 1743440184,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79549860,
    "question_id" : 79546753,
    "body" : "<p>On looking into this, it seems like you are running into a test case that specifically checks for this on submission. Leetcode has some basic test cases before the actual ones they run to consider a solution <code>Submitted</code>. @Marce has put the code already.</p>\n<p>I would like to summarize that in your code you need to check <code>values.isEmpty()</code> before you call peek. With respect to the problem, it is basically failed if the stack is empty before you process the closing bracket.</p>\n<p>Pro tip: consider changing your return to <code>return values.isEmpty();</code></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 12035485,
      "reputation" : 11,
      "user_id" : 8804167,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/1887451237937177/picture?type=large",
      "display_name" : "Manan Buddhadev",
      "link" : "https://stackoverflow.com/users/8804167/manan-buddhadev"
    },
    "creation_date" : 1743575799,
    "last_activity_date" : 1743575799,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140289025,
    "post_id" : 79546753,
    "body" : "You should also have an <code>else</code> after the first <code>if</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 71739,
      "reputation" : 311869,
      "user_id" : 207421,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=256&d=identicon&r=PG",
      "display_name" : "user207421",
      "link" : "https://stackoverflow.com/users/207421/user207421"
    },
    "creation_date" : 1743576504,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140284659,
    "post_id" : 79546753,
    "body" : "When the source of a problem has a web page, such as might be the case with programming practice and challenge sites, it would be polite, and possibly helpful, to include a link to that page.  <a href=\"https://leetcode.com/problems/valid-parentheses/description/\" rel=\"nofollow noreferrer\">leetcode.com/problems/valid-parentheses/description</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 6606677,
      "reputation" : 1251,
      "user_id" : 5103317,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c81d92487b054d7290b4f36562c0ee02?s=256&d=identicon&r=PG",
      "display_name" : "Old Dog Programmer",
      "link" : "https://stackoverflow.com/users/5103317/old-dog-programmer"
    },
    "creation_date" : 1743461875,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140283533,
    "post_id" : 79546753,
    "body" : "No, you shouldn&#39;t push in this case. I&#39;m not going to walk you through how to fix this though. I&#39;ll just give you the hint that if you see a closing bracket of any kind when the stack is empty, you know the result. I&#39;ll give you a <i>second</i> hint that your code will give the wrong result for <code>[)]</code> as well...",
    "score" : 2,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1520872,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1743440266,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140283470,
    "post_id" : 79546753,
    "body" : "I see, it&#39;s trying to run &quot;]&quot;, and since I&#39;ve only told it to push opening parentheses, it&#39;s peeking/popping from an empty stack. Correct me if I&#39;m wrong, but I think the way to fix this is by pushing every value in the string? Thank you!",
    "score" : 0,
    "owner" : {
      "account_id" : 31079002,
      "reputation" : 1,
      "user_id" : 23890189,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eeb77ec88e305a9c728b95844df8adcc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "pxkaa",
      "link" : "https://stackoverflow.com/users/23890189/pxkaa"
    },
    "creation_date" : 1743439034,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140283444,
    "post_id" : 79546753,
    "body" : "Perhaps there are test cases that Leetcode runs in addition to the ones it tells you about? It&#39;s easy enough to provoke that failure - just run with an input of &quot;)&quot; for example.",
    "score" : 2,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1520872,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1743438670,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}