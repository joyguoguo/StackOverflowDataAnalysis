{
  "question" : {
    "question_id" : 79786852,
    "title" : "Grid rendering problems",
    "body" : "<p>I am trying to simply render a grid with some test colors to a 1920x1080 screen to see if it works. However, it's looking terrible and it's laden with graphical errors. The grid should just look sort of like a gradient from black to blue from the left side to the right side. However, this is how it's looking right now. Though it's pretty, cool, it's not intended. <a href=\"https://i.sstatic.net/19Yfa8o3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/19Yfa8o3.png\" alt=\"current grid test\" /></a></p>\n<p>I don't know how to fix it, so I have been messing with the numbers in my code for forever, but it still doesn't work. I don't know if it's the code I have most recently made or the method for making the rectangle. My basic thought process was: set the starting index, draw a row, go to new line, repeat steps 2-3. So, can anyone help fix my terrible code?</p>\n<p>Here's some code, but if there's not enough context, the files are <a href=\"https://drive.google.com/drive/folders/1xFyKiWhg06-XxgtOqsR3LLJAOBeDD4kb?usp=sharing\" rel=\"nofollow noreferrer\">here.</a> There's so much code for this that I don't know if this is enough to figure out the problem. The points of interest are in the CustomPanel file.</p>\n<pre><code> private void showPlayArea()\n    {\n        playAreaW = width - (width % 30);\n        playAreaH = height - (height % 20);\n        int startX = (int)(0.5 * (width - playAreaW));\n        int startY = (int)(0.5 * (height - playAreaH));\n        gridSizeX = playAreaW / 30;//make a 30x20 grid\n        gridSizeY = playAreaH / 20;\n        int currentAddress = 0;\n        currentAddress += (startY - 1) * width;//set starting address to top left corner of first grid box\n        currentAddress += (startX - 1) + gridSizeX;\n        \n        for (int i = 0; i &lt; 19; i++)//can't do the full 20 rows or it will fire index out of bounds for the array of pixels on screen\n        {\n            for (int ii = 0; ii &lt; 30 ; ii++)//can't do full 30 rows or it will fire index out of bounds for the array of pixels on screen\n            {\n                System.out.println(i + &quot; &quot; + ii + &quot; &quot; + currentAddress); // prints row and column of grid box being rendered\n                setPixelRect(currentAddress, gridSizeX, gridSizeY, ii * 50);\n                //setPixelRect takes an address, width and height of the rect, then a color to set it and ii*50 is just to make each cell a different color\n                currentAddress += gridSizeX;\n            }\n            currentAddress += (width * (gridSizeY - 1)) - gridSizeX;\n            System.out.println(&quot;-----&quot;); //shows when a new line is made\n        }\n        \n    }\n</code></pre>\n",
    "tags" : [ "java", "render", "raster" ],
    "owner" : {
      "account_id" : 30161562,
      "reputation" : 3,
      "user_id" : 23114446,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocLrj2-traaNJdW3f2hwu_n3bQPsnYBIENckCogh9Zpb2yE=k-s256",
      "display_name" : "Corrupted_RainbowGuy",
      "link" : "https://stackoverflow.com/users/23114446/corrupted-rainbowguy"
    },
    "is_answered" : false,
    "view_count" : 151,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1760318825,
    "creation_date" : 1760044124,
    "link" : "https://stackoverflow.com/questions/79786852/grid-rendering-problems",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79787786,
    "question_id" : 79786852,
    "body" : "<p>I don't know why you've chosen such a <em>tortuous</em> path, if all you want is to achieve the goal. Here's a replacement for your <em>CustomPanel</em>. If what you need makes this implementation invalid, edit your question and clarify what your specific need is.</p>\n<pre><code>public class CustomPanel extends JComponent {\n\n   @Override\n\n     // this method is responsible for painting the background of the component.\n   public void paintComponent( Graphics g ) {\n\n        // always starts with a call to **super()**\n      super.paintComponent( g );\n\n        // cast to &quot;Graphics2D&quot;\n      Graphics2D g2 = (Graphics2D) g;\n      int colorModifier = 0;\n\n        // in each iteration, we select the color updated by “colorModifier”\n        // and draw a rectangle with the ‘x’ position determined by the “for”\n        // loop.\n      for( int i = 0; i &lt; 1920; i += 30 ) {\n         g2.setColor( new Color( colorModifier, 0, colorModifier ) );\n         g2.fillRect( i, 0, 30, 1080 );\n         colorModifier += 2;\n      }\n   }\n}\n</code></pre>\n<p>Note: to avoid problems, the “frame” should only be created in the <em>Swing</em> event thread, so your <em>InitWindow</em> class should look like this:</p>\n<pre><code>class InitWindow {\n\n   void init() {\n      SwingUtilities.invokeLater( () -&gt; {\n         JFrame frame = new JFrame();\n         GraphicsDevice gd = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();\n         Dimension screenSize = new Dimension( gd.getDisplayMode().getWidth(), gd.getDisplayMode().getHeight() );\n         CustomPanel panel = new SimpleCustomPanel();\n         frame.setSize( new Dimension( gd.getDisplayMode().getWidth(), gd.getDisplayMode().getHeight() ) );\n         frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n         frame.add( panel );\n         gd.setFullScreenWindow( frame );\n         // frame.setVisible( true );\n      } );\n   }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1760152429,
    "last_activity_date" : 1760318825,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140789263,
    "post_id" : 79786852,
    "body" : "Let me revise it then. Sorry.",
    "score" : 0,
    "owner" : {
      "account_id" : 30161562,
      "reputation" : 3,
      "user_id" : 23114446,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocLrj2-traaNJdW3f2hwu_n3bQPsnYBIENckCogh9Zpb2yE=k-s256",
      "display_name" : "Corrupted_RainbowGuy",
      "link" : "https://stackoverflow.com/users/23114446/corrupted-rainbowguy"
    },
    "creation_date" : 1760126572,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140787571,
    "post_id" : 79786852,
    "body" : "Hello Corrupted_RainbowGuy, in order to help you, apart from posting code that we can execute (as text, not in links), we need a brief description of what you expect to “see” (an image), because only you know what is wrong.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1760068430,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79787786" : [ {
      "comment_id" : 140831708,
      "post_id" : 79787786,
      "body" : "Sorry I&#39;ve been really busy lately with school. By the two answers I meant the two pieces of code in your answer. I just took your advice and it works wonderfully, thank you! Also how do I mark this answer as correct I would like to but don&#39;t know how",
      "score" : 0,
      "owner" : {
        "account_id" : 30161562,
        "reputation" : 3,
        "user_id" : 23114446,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocLrj2-traaNJdW3f2hwu_n3bQPsnYBIENckCogh9Zpb2yE=k-s256",
        "display_name" : "Corrupted_RainbowGuy",
        "link" : "https://stackoverflow.com/users/23114446/corrupted-rainbowguy"
      },
      "creation_date" : 1762055644,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140791990,
      "post_id" : 79787786,
      "body" : "@Corrupted_RainbowGuy I&#39;m not sure what you&#39;re trying to tell me. There aren&#39;t two answers; they are two classes of the same application. If you copy and run them, they will show the gradient. On the other hand, the <b>paintComponent()</b> method only needs to be invoked when the “drawing” changes (this does not seem to be the case), and it is invoked with: <b>panel. repaint()</b>. If you want to add a method to close the application, you have to add a listener to some component of the <i>GUI</i> that executes the line: <b>frame.dispose()</b>.",
      "score" : 1,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1760318881,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140791884,
      "post_id" : 79787786,
      "body" : "The second answer works just fine, and is an improvement on the last one. However, when I try to call the first suggestion, the paintComponent one, it gives me a NullPointer exception. I put the call in the constructor for CustomPanel and I also passed through a variable of this.getGraphics() for the g parameter. Is the method meant to be called from outside of the panel? The exact exception I&#39;m getting is: Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.NullPointerException: Cannot invoke &quot;java.awt.Graphics.dispose()&quot; because &quot;scratchGraphics&quot; is null",
      "score" : 0,
      "owner" : {
        "account_id" : 30161562,
        "reputation" : 3,
        "user_id" : 23114446,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocLrj2-traaNJdW3f2hwu_n3bQPsnYBIENckCogh9Zpb2yE=k-s256",
        "display_name" : "Corrupted_RainbowGuy",
        "link" : "https://stackoverflow.com/users/23114446/corrupted-rainbowguy"
      },
      "creation_date" : 1760309659,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}