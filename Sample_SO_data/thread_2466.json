{
  "question" : {
    "question_id" : 79618561,
    "title" : "Spring Boot - OAuth2 keep redirecting me",
    "body" : "<p>This is my first time dealing with OAuth2 in Spring boot. The topic seems really simple, but for some reason it doesn't quite work for me. The flow looks like this:\nI start localhost:8080/login\nI log in via Github\nit redirects me to /redirected\nI go to /secured</p>\n<p>Everything works except point 4 because at this point it throws me to /redirected , as if I hadn't just logged in.</p>\n<p>my controller:</p>\n<pre><code>@Controller\npublic class StaticWebController {\n\n    private static final Logger log = LoggerFactory.getLogger(StaticWebController.class);\n\n    @GetMapping(&quot;/&quot;)\n    public String index(HttpServletRequest request) {\n        log.info(&quot;/: {}&quot;, request);\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/redirected&quot;)\n    public String redirected(HttpServletRequest request) {\n        log.info(&quot;/redirected: {}&quot;, request);\n        return &quot;redirected&quot;;\n    }\n\n    @GetMapping(&quot;/error&quot;)\n    public String error(HttpServletRequest request) {\n        log.info(&quot;/error: {}&quot;, request);\n\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/secured&quot;)\n    public String secured(HttpServletRequest request) {\n        log.info(&quot;/secured: {}&quot;, request);\n        return &quot;secured&quot;;\n    }\n}\n</code></pre>\n<p>config class:</p>\n<pre><code>@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(authorize -&gt; authorize\n                                .requestMatchers(&quot;/&quot;, &quot;/login&quot;, &quot;/redirected&quot;, &quot;/error&quot;).permitAll()\n                                .requestMatchers(&quot;/oauth2/authorization/github&quot;).permitAll()\n                                .requestMatchers(&quot;/secured&quot;).authenticated()\n                                .anyRequest().authenticated()\n                )\n                .csrf(AbstractHttpConfigurer::disable)\n                .oauth2Login(Customizer.withDefaults())\n                .build();\n    }\n\n}\n</code></pre>\n<p>application.yaml</p>\n<pre><code>spring:\n  application.name: oauth2-example\n  security:\n    oauth2:\n      client:\n        registration:\n          github:\n            redirect-uri: &quot;http://localhost:8080/redirected&quot;\n            client-id: xxx\n            client-secret: xxx\n</code></pre>\n<p>client-id and client-secred checked multiple times if they match the configuration on github, redirect-url is the same</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "oauth-2.0" ],
    "owner" : {
      "account_id" : 19530029,
      "reputation" : 24,
      "user_id" : 14290027,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-Pm0jUK7fYAI/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucn22sd5a6DNKvpiDOefGkWZGSbIzA/s256-rj/photo.jpg",
      "display_name" : "cichyvx",
      "link" : "https://stackoverflow.com/users/14290027/cichyvx"
    },
    "is_answered" : false,
    "view_count" : 79,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1747083033,
    "creation_date" : 1747080023,
    "link" : "https://stackoverflow.com/questions/79618561/spring-boot-oauth2-keep-redirecting-me",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79618624,
    "question_id" : 79618561,
    "body" : "<p>Ok, so problem was that the redirect url for github must be http://localhost:8080/login/oauth2/code/github by default. After changed it, i can reach /secured (but it wouldn't redirect me there right after login - i need to do it manually)</p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 19530029,
      "reputation" : 24,
      "user_id" : 14290027,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-Pm0jUK7fYAI/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucn22sd5a6DNKvpiDOefGkWZGSbIzA/s256-rj/photo.jpg",
      "display_name" : "cichyvx",
      "link" : "https://stackoverflow.com/users/14290027/cichyvx"
    },
    "creation_date" : 1747083033,
    "last_activity_date" : 1747083033,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}