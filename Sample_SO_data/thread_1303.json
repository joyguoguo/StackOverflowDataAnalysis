{
  "question" : {
    "question_id" : 79720880,
    "title" : "org.xml.sax.SAXParseException; systemId: http://schemas.xmlsoap.org/soap/envelope/; lineNumber: 1; columnNumber: 1; Premature end of file",
    "body" : "<p>I am facing issues when validating the response to xsd. Help me solve the problem. I done to downloaded the xsd file from the respective link and saved it into my project, but still I am facing the issue. I add error log, Code I wrote, XML file, and XSD file. Also my XSD file located at src/main/resourse.</p>\n<p>Error log image:</p>\n<pre><code>HTTP/1.1 200 OK Cache-Control: private, max-age=0\nContent-Type: text/xml; charset=utf-8\nContent-Encoding: gzip\nVary: Accept-Encoding\nServer: Microsoft-IIS/10.0\nX-AspNet-Version: 2.0.50727\nX-Powered-By: ASP.NET\nX-Powered-By-Plesk: PleskWin\nDate: Thu, 31 Jul 2025 06:25:36 GMT\nContent-Length: 348\n\n&lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n  &lt;soap:Body&gt;\n    &lt;AddResponse xmlns=&quot;http://tempuri.org/&quot;&gt;\n      &lt;AddResult&gt;5&lt;/AddResult&gt;\n    &lt;/AddResponse&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\nFAILED: tests.XMLSchemaValidation.schemaValidation\norg.xml.sax.SAXParseException; systemId: http://schemas.xmlsoap.org/soap/envelope/; lineNumber: 1; columnNumber: 1; Premature end of file.\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:178)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:400)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(XMLScanner.java:1465)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:1043)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:635)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:113)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:551)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:640)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaParsingConfig.parse(SchemaParsingConfig.java:696)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.opti.SchemaDOMParser.parse(SchemaDOMParser.java:530)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.getSchemaDocument(XSDHandler.java:2227)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.resolveSchema(XSDHandler.java:2129)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.constructTrees(XSDHandler.java:1050)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.traversers.XSDHandler.parseSchema(XSDHandler.java:653)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadSchema(XMLSchemaLoader.java:617)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:576)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaLoader.loadGrammar(XMLSchemaLoader.java:542)\n    at java.xml/com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory.newSchema(XMLSchemaFactory.java:278)\n    at java.xml/javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:612)\n    at javax.xml.validation.SchemaFactory$newSchema$0.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:139)\n    at io.restassured.internal.matcher.xml.XmlXsdMatcher.matches(XmlXsdMatcher.groovy:82)\n    at io.restassured.internal.assertion.BodyMatcher.validate(BodyMatcher.java:82)\n    at io.restassured.internal.assertion.BodyMatcherGroup.lambda$validate$0(BodyMatcherGroup.java:30)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:215)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1716)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:570)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:560)\n    at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:921)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:265)\n    at java.base/java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:727)\n    at io.restassured.internal.assertion.BodyMatcherGroup.validate(BodyMatcherGroup.java:30)\n    at io.restassured.internal.assertion.BodyMatcherGroup$validate$3.call(Unknown Source)\n    at io.restassured.internal.ResponseSpecificationImpl$HamcrestAssertionClosure.validate(ResponseSpecificationImpl.groovy:499)\n    at io.restassured.internal.ResponseSpecificationImpl$HamcrestAssertionClosure$validate$1.call(Unknown Source)\n    at io.restassured.internal.ResponseSpecificationImpl.validateResponseIfRequired(ResponseSpecificationImpl.groovy:696)\n    at io.restassured.internal.ResponseSpecificationImpl.this$2$validateResponseIfRequired(ResponseSpecificationImpl.groovy)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:565)\n    at org.codehaus.groovy.runtime.callsite.PlainObjectMetaMethodSite.doInvoke(PlainObjectMetaMethodSite.java:43)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite$PogoCachedMethodSiteNoUnwrapNoCoerce.invoke(PogoMetaMethodSite.java:198)\n    at org.codehaus.groovy.runtime.callsite.PogoMetaMethodSite.callCurrent(PogoMetaMethodSite.java:62)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:171)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:185)\n    at io.restassured.internal.ResponseSpecificationImpl.body(ResponseSpecificationImpl.groovy:107)\n    at io.restassured.internal.ValidatableResponseOptionsImpl.body(ValidatableResponseOptionsImpl.java:238)\n    at tests.XMLSchemaValidation.schemaValidation(XMLSchemaValidation.java:48)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:565)\n    at org.testng.internal.invokers.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:141)\n    at org.testng.internal.invokers.TestInvoker.invokeMethod(TestInvoker.java:687)\n    at org.testng.internal.invokers.TestInvoker.invokeTestMethod(TestInvoker.java:230)\n    at org.testng.internal.invokers.MethodRunner.runInSequence(MethodRunner.java:63)\n    at org.testng.internal.invokers.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:995)\n    at org.testng.internal.invokers.TestInvoker.invokeTestMethods(TestInvoker.java:203)\n    at org.testng.internal.invokers.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:154)\n    at org.testng.internal.invokers.TestMethodWorker.run(TestMethodWorker.java:134)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1604)\n    at org.testng.TestRunner.privateRun(TestRunner.java:741)\n    at org.testng.TestRunner.run(TestRunner.java:616)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:421)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:413)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:373)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:312)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:95)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1274)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1208)\n    at org.testng.TestNG.runSuites(TestNG.java:1112)\n    at org.testng.TestNG.run(TestNG.java:1079)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:293)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:91)\n</code></pre>\n<p>Code I wrote:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;./SoapRequests/add.xml&quot;);\nif(file.exists())\n{\n    System.out.println(&quot;&gt;&gt;&gt;&gt;  File Exists  &lt;&lt;&lt;&lt;&quot;);\n}\n\nFileInputStream fileinputstream = new FileInputStream(file);\nString requestBody = IOUtils.toString(fileinputstream, &quot;UTF-8&quot;);\n\nbaseURI = &quot;http://www.dneonline.com&quot;;\n\ngiven().\n    contentType(&quot;text/xml&quot;).\n    accept(ContentType.XML).\n    body(requestBody).\nwhen().\n    post(&quot;/calculator.asmx&quot;).\nthen().\n    statusCode(200).\n    log().all().\nand().\n    body(&quot;//*:AddResult.text()&quot;, equalTo(&quot;5&quot;)).\nand().\n    assertThat().body(matchesXsdInClasspath(&quot;Calculator.xsd&quot;));\n</code></pre>\n<p>I am using XML file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;soap:Envelope xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n  &lt;soap:Body&gt;\n    &lt;Add xmlns=&quot;http://tempuri.org/&quot;&gt;\n      &lt;intA&gt;2&lt;/intA&gt;\n      &lt;intB&gt;3&lt;/intB&gt;\n    &lt;/Add&gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n<p>I used XSD file:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xs:schema attributeFormDefault=&quot;unqualified&quot; elementFormDefault=&quot;qualified&quot; targetNamespace=&quot;http://tempuri.org/&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n  &lt;xs:import namespace=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;   \n           schemaLocation=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;/&gt;\n  &lt;xs:element name=&quot;AddResponse&quot;&gt;\n    &lt;xs:complexType&gt;\n      &lt;xs:sequence&gt;\n        &lt;xs:element type=&quot;xs:byte&quot; name=&quot;AddResult&quot;/&gt;\n      &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n  &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n",
    "tags" : [ "java", "rest", "automation", "rest-assured", "rest-assured-jsonpath" ],
    "owner" : {
      "account_id" : 28617871,
      "reputation" : 19,
      "user_id" : 21911452,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxaZk0katOLaTg7nO7Rf0CS-w3ztXosG2fcs9uCJ=k-s256",
      "display_name" : "ben ben",
      "link" : "https://stackoverflow.com/users/21911452/ben-ben"
    },
    "is_answered" : false,
    "view_count" : 78,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1753987641,
    "creation_date" : 1753944113,
    "link" : "https://stackoverflow.com/questions/79720880/org-xml-sax-saxparseexception-systemid-http-schemas-xmlsoap-org-soap-envelop",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79721720,
    "question_id" : 79720880,
    "body" : "<p>It happens because your xsd file contains this import statement:</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;xs:import namespace=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;               schemaLocation=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;/&gt; \n</code></pre>\n<p>The validator attempts to fetch the schema for the SOAP envelope from the schemaLocation url. But the parser gets no data from the url due the network request is failing (firewall, proxy or the server at that address not returning a file).</p>\n<p>Even if the import worked you'd likely face an another issue. You're asking the validator to check the entire SOAP response (starting with <code>&lt;soap:Envelope&gt;</code>) against your xsd schema that only defines the payload <code>&lt;AddResponse&gt;</code>. The validator would can't find a definition for the root element <code>&lt;soap:Envelope&gt;</code>.</p>\n<p>But in testing you should focus on validating what your service produces, not the standard protocol wrappers like the SOAP envelope. So simplify the xsd to only define your service's payload and configure REST Assured to ignore the outer SOAP envelope during validation.</p>\n<p>Remove <code>&lt;xs:import&gt;</code> statement entirely from your xsd, it should  be clean and focused and only describe the structure of <code>&lt;AddResponse&gt;</code> element:</p>\n<pre class=\"lang-xsd prettyprint-override\"><code>&lt;xs:schema attributeFormDefault=&quot;unqualified&quot;\n           elementFormDefault=&quot;qualified&quot;\n           targetNamespace=&quot;http://tempuri.org/&quot;\n           xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&gt;\n\n  &lt;xs:element name=&quot;AddResponse&quot;&gt;\n    &lt;xs:complexType&gt;\n      &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;AddResult&quot; type=&quot;xs:integer&quot; /&gt;\n      &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n  &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p><code>xs:integer</code> is more flexible than <code>xs:byte</code>.</p>\n<p>The easiest way to make the validator ignore the SOAP envelope is to configure it to be non-namespace-aware. This tells the parser to ignore <code>soap:</code> prefixes and simply look for the <code>&lt;AddResponse&gt;</code> element anywhere in the document:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File file = new File(&quot;src/test/resources/SoapRequests/add.xml&quot;);\nString requestBody = new String(Files.readAllBytes(file.toPath()));\n\nbaseURI = &quot;http://www.dneonline.com&quot;;\n\ngiven().\n    config(RestAssured.config().xmlConfig(xmlConfig().namespaceAware(false))).\n    contentType(&quot;text/xml&quot;).\n    accept(ContentType.XML).\n    body(requestBody).\nwhen().\n    post(&quot;/calculator.asmx&quot;).\nthen().\n    statusCode(200).\n    log().all().\nand().\n    body(&quot;AddResult.text()&quot;, equalTo(&quot;5&quot;)).\nand().\n    assertThat().body(matchesXsdInClasspath(&quot;Calculator.xsd&quot;));\n</code></pre>\n<p>By adding <code>.config(RestAssured.config().xmlConfig(xmlConfig().namespaceAware(false)))</code> you instruct the xsd matcher to ignore namespaces. It has to successfully find <code>&lt;AddResponse&gt;</code> element in the body and validate it against the simplified <code>Calculator.xsd</code>.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1207862,
      "reputation" : 4210,
      "user_id" : 1177031,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/79eaae35b3331731ecfb9e360bb8380b?s=256&d=identicon&r=PG",
      "display_name" : "kapandron",
      "link" : "https://stackoverflow.com/users/1177031/kapandron"
    },
    "creation_date" : 1753987641,
    "last_activity_date" : 1753987641,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140632217,
    "post_id" : 79720880,
    "body" : "Please don&#39;t post images of text.  Post the text itself.  See <a href=\"https://meta.stackoverflow.com/questions/285551\">Why should I not upload images of code/data/errors?</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723428,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1753953136,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140632016,
    "post_id" : 79720880,
    "body" : "IIRC, the error suggests it tried to locate the file for <code>http:&#47;&#47;schemas.xmlsoap.org&#47;soap&#47;envelope&#47;</code>, and got an empty file. You may need to correctly configure the schema catalog (but my XML processing knowledge is a bit rusty, so I might be off here).",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1753947961,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140632008,
    "post_id" : 79720880,
    "body" : "Please include the full exception stacktrace in your question.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1753947853,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79721720" : [ {
      "comment_id" : 140634511,
      "post_id" : 79721720,
      "body" : "Thanks for sharing your code and solution. I implemented it as suggested, but I am encountering the following error:  org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 208; cvc-elt.1.a: Cannot find the declaration of element &#39;soap:Envelope&#39;.   How can I fix this ?",
      "score" : 0,
      "owner" : {
        "account_id" : 28617871,
        "reputation" : 19,
        "user_id" : 21911452,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxaZk0katOLaTg7nO7Rf0CS-w3ztXosG2fcs9uCJ=k-s256",
        "display_name" : "ben ben",
        "link" : "https://stackoverflow.com/users/21911452/ben-ben"
      },
      "creation_date" : 1754023899,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}