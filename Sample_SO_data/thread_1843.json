{
  "question" : {
    "question_id" : 79670834,
    "title" : "&quot;Authentication/Authorization Exception and no authExceptionRetryInterval set&quot; in spring kafka vs cloud kafka",
    "body" : "<p>I am working on two spring boot microservices deployed on aws-eks and uses kafka where MS1 uses spring kafka and MS2 uses cloud kafka. In both case, if I update the topic authorization policy(IAM-MSK policy), both will throw</p>\n<blockquote>\n<p>org.springframework.kafka.listener.KafkaMessageListenerContainer :\nAuthentication/Authorization Exception and no\nauthExceptionRetryInterval set</p>\n</blockquote>\n<blockquote>\n<p>org.springframework.kafka.listener.KafkaMessageListenerContainer :\nFatal consumer exception; stopping container</p>\n</blockquote>\n<p>errors. I wanted my microservices to be continue to run by retrying the kafka connection in certain interval rather than stopping the container. For MS1 when I added fix by adding custom bean for <code>ConcurrentKafkaListenerContainerFactory</code> and using <code>ConcurrentKafkaListenerContainerFactory.getContainerProperties().setAuthExceptionRetryInterval()</code> method in it, started working as expected. But for cloud kafka, the issue persists with above fix. I tried to set <code>spring.cloud.stream.bindingRetryInterval</code> value with which it partially worked(If policy is wrong while pod start itself) but failed in other case(When pod is running and then policy is corrupted). What is the correct configuration I need to apply on my application yaml or what code I need to apply so that MS2 never stops the container but retry the the connection in certain interval like MS1 fix.</p>\n",
    "tags" : [ "java", "apache-kafka", "spring-cloud-stream-binder-kafka" ],
    "owner" : {
      "account_id" : 10413228,
      "reputation" : 198,
      "user_id" : 7678060,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fb1f678952969fdeb40d63c5321f7c74?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "LetsCode",
      "link" : "https://stackoverflow.com/users/7678060/letscode"
    },
    "is_answered" : true,
    "view_count" : 238,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751294576,
    "creation_date" : 1750257607,
    "link" : "https://stackoverflow.com/questions/79670834/authentication-authorization-exception-and-no-authexceptionretryinterval-set-i",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79684931,
    "question_id" : 79670834,
    "body" : "<p>Add below bean and it will fix the above mentioned issue on cloud kafka.</p>\n<pre><code>@Bean\n    public ListenerContainerCustomizer&lt;AbstractMessageListenerContainer&gt; containerCustomizer() {\n        return (container, dest, group) -&gt; container.getContainerProperties()\n                .setAuthExceptionRetryInterval(Duration.ofSeconds(30));\n    }\n</code></pre>\n<p>Read <a href=\"https://docs.spring.io/spring-cloud-stream/reference/spring-cloud-stream/binding-properties.html#advanced-consumer-configuration\" rel=\"nofollow noreferrer\">here</a>.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 10413228,
      "reputation" : 198,
      "user_id" : 7678060,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fb1f678952969fdeb40d63c5321f7c74?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "LetsCode",
      "link" : "https://stackoverflow.com/users/7678060/letscode"
    },
    "creation_date" : 1751294576,
    "last_activity_date" : 1751294576,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}