{
  "question" : {
    "question_id" : 79595955,
    "title" : "Flink 2.x, enabling async state when using a KeyedCoProcessFunction",
    "body" : "<p>I'm looking to migrate a Flink 1.20 job to Flink 2.x. The main goal of this migration is to mitigate performance issues stemming from a large state store size.</p>\n<p>From what I understand in order to use <code>enableAsyncState()</code> with a <code>KeyedProcessFunction</code> I would need to configure my job with something along the lines of:</p>\n<pre><code>upstream\n    .keyBy { keyFunction }\n    .enableAsyncState()\n    .transform(\n        &quot;MyKeyedProcess&quot;,\n            TypeInformation.of(MyKeyProcessOutput::class.java),\n                AsyncKeyedProcessOperator(MyKeyedProcessFunction()))\n    .sinkTo(downstream)\n</code></pre>\n<p>This approach makes use of the Flink provided <code>AsyncKeyedProcessOperator</code> to wrap my custom <code>MyKeyedProcessFunction</code>.</p>\n<p>However, my pipeline makes use of a <code>KeyedCoProcessFunction</code> and it doesn't look to be possible to call <code>enableAsyncState()</code> on this processor without a runtime exception.</p>\n<p>Does anyone know of any analog to the <code>AsyncKeyedProcessOperator</code> that would work with a <code>KeyedCoProcessFunction</code>? Is this something that would be possible or should I be looking for a different approach here?</p>\n<p>Thanks a lot!</p>\n",
    "tags" : [ "java", "kotlin", "apache-flink", "flink-streaming", "flink-stateful-functions" ],
    "owner" : {
      "account_id" : 557859,
      "reputation" : 6419,
      "user_id" : 920457,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/C6LKA.jpg?s=256",
      "display_name" : "francis",
      "link" : "https://stackoverflow.com/users/920457/francis"
    },
    "is_answered" : false,
    "view_count" : 109,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1745827316,
    "creation_date" : 1745824251,
    "link" : "https://stackoverflow.com/questions/79595955/flink-2-x-enabling-async-state-when-using-a-keyedcoprocessfunction",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}