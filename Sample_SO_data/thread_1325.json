{
  "question" : {
    "question_id" : 79718699,
    "title" : "Applying transparency to entities in 1.20.1 (MC Forge)",
    "body" : "<p>I've been fighting to find ways to get transparency to work in my custom entities whilst updating my code from 1.16.5 to 1.20.1. I can not for the life of me figure this out. I've tried mimicking the slime renderer, using RenderSystems clearColor &amp; setShaderColor, etc. All without luck.</p>\n<p>Here's an example from my 1.16 code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//rendering a ghost or vanishing\n        {\n            matrixStackIn.push();\n            RenderSystem.enableBlend();\n            RenderSystem.defaultBlendFunc();\n            RenderSystem.color4f(0.8F, 0.8F, 0.8F, transparency);\n            matrixStackIn.scale(1.3F, 1.0F, 1.3F);\n\n            this.Ear1.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Ear2.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            this.Neck.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Head.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            if (openMouth) {\n                this.UMouth2.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.LMouth2.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            } else {\n                this.UMouth.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.LMouth.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            }\n\n            this.Mane.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Body.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.TailA.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.TailB.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.TailC.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            this.Leg1A.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg1B.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg1C.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            this.Leg2A.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg2B.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg2C.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            this.Leg3A.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg3B.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg3C.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            this.Leg4A.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg4B.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            this.Leg4C.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n\n            if (type == 39 || type == 40 || type == 28) {\n                this.MidWing.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.InnerWing.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.OuterWing.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.InnerWingR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.MidWingR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.OuterWingR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            }\n            if (type &gt;= 50 &amp;&amp; type &lt; 60) {\n                this.ButterflyL.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.ButterflyR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n            }\n\n            if (saddled) {\n                this.HeadSaddle.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.Saddle.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleB.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleC.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleL.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleL2.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleR2.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleMouthL.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.SaddleMouthR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                if (rider) {\n                    this.SaddleMouthLine.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                    this.SaddleMouthLineR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                }\n\n            }\n\n            RenderSystem.disableBlend();\n            matrixStackIn.pop();\n\n            if (type == 21 || type == 22)//|| (type &gt;=50 &amp;&amp; type &lt;60))\n            {\n                float wingTransparency = 0F;\n                if (wingflapInt != 0) {\n                    wingTransparency = 1F - (((float) wingflapInt) / 25);\n                }\n                if (wingTransparency &gt; transparency) {\n                    wingTransparency = transparency;\n                }\n                matrixStackIn.push();\n                RenderSystem.enableBlend();\n                RenderSystem.defaultBlendFunc();\n                RenderSystem.color4f(0.8F, 0.8F, 0.8F, wingTransparency);\n                matrixStackIn.scale(1.3F, 1.0F, 1.3F);\n                this.ButterflyL.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                this.ButterflyR.render(matrixStackIn, bufferIn, packedLightIn, packedOverlayIn, red, green, blue, alpha);\n                RenderSystem.disableBlend();\n                matrixStackIn.pop();\n            }\n        }\n</code></pre>\n<p>And the updated non-working snippet in 1.20.1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//rendering a ghost or vanishing\n        {\n            poseStack.pushPose();\n            com.mojang.blaze3d.systems.RenderSystem.enableBlend();\n            com.mojang.blaze3d.systems.RenderSystem.defaultBlendFunc();\n            com.mojang.blaze3d.systems.RenderSystem.clearColor(0.8F, 0.8F, 0.8F, transparency);\n            poseStack.scale(1.3F, 1.0F, 1.3F);\n\n            this.ear1.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.ear2.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            this.neck.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.head.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            if (openMouth) {\n                this.uMouth2.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.lMouth2.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            } else {\n                this.uMouth.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.lMouth.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            }\n\n            this.mane.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.body.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.tailA.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.tailB.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.tailC.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            this.leg1A.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg1B.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg1C.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            this.leg2A.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg2B.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg2C.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            this.leg3A.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg3B.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg3C.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            this.leg4A.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg4B.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            this.leg4C.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n\n            if (type == 39 || type == 40 || type == 28) {\n                this.midWing.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.innerWing.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.outerWing.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.innerWingR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.midWingR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.outerWingR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            }\n            if (type &gt;= 50 &amp;&amp; type &lt; 60) {\n                this.butterflyL.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.butterflyR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n            }\n\n            if (saddled) {\n                this.headSaddle.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddle.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleB.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleC.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleL.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleL2.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleR2.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleMouthL.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.saddleMouthR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                if (rider) {\n                    this.saddleMouthLine.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                    this.saddleMouthLineR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                }\n            }\n\n            com.mojang.blaze3d.systems.RenderSystem.disableBlend();\n            poseStack.popPose();\n\n            if (type == 21 || type == 22)//|| (type &gt;=50 &amp;&amp; type &lt;60))\n            {\n                float wingTransparency = 0F;\n                if (wingflapInt != 0) {\n                    wingTransparency = 1F - (((float) wingflapInt) / 25);\n                }\n                if (wingTransparency &gt; transparency) {\n                    wingTransparency = transparency;\n                }\n                poseStack.pushPose();\n                com.mojang.blaze3d.systems.RenderSystem.enableBlend();\n                com.mojang.blaze3d.systems.RenderSystem.defaultBlendFunc();\n                com.mojang.blaze3d.systems.RenderSystem.clearColor(0.8F, 0.8F, 0.8F, wingTransparency);\n                poseStack.scale(1.3F, 1.0F, 1.3F);\n                this.butterflyL.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                this.butterflyR.render(poseStack, buffer, packedLight, packedOverlay, red, green, blue, alpha);\n                com.mojang.blaze3d.systems.RenderSystem.disableBlend();\n                poseStack.popPose();\n            }\n        }\n</code></pre>\n",
    "tags" : [ "java", "minecraft", "minecraft-forge", "forge" ],
    "owner" : {
      "account_id" : 22696243,
      "reputation" : 25,
      "user_id" : 16864335,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/PDglU.jpg?s=256",
      "display_name" : "Mason",
      "link" : "https://stackoverflow.com/users/16864335/mason"
    },
    "is_answered" : false,
    "view_count" : 93,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1753795967,
    "creation_date" : 1753795967,
    "link" : "https://stackoverflow.com/questions/79718699/applying-transparency-to-entities-in-1-20-1-mc-forge",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}