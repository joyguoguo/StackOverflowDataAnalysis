{
  "question" : {
    "question_id" : 79606347,
    "title" : "Error trying to send an email with BootSpring Email",
    "body" : "<p>I'm trying to send an email using Spring Boot, this is the first time I'm trying to do this and I've followed a tutorial to try to do it, so far idk what's wrong, I think I've set everything up right, here are the codes, I'd love the help</p>\n<p>aplication.properties:</p>\n<pre><code>spring.mail.host=smtp.gmail.com\nspring.mail.port=587\nspring.mail.username=#myemail#@gmail.com\nspring.mail.password=#my app password#\nspring.mail.properties.mail.smtp.auth=true\nspring.mail.properties.mail.smtp.starttls.enable=true\n</code></pre>\n<p>EmailService class to i can send the emails</p>\n<pre><code>package maple.spring_servlet.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class EmailService {\n\n    @Autowired\n    private JavaMailSender mailSender;\n\n    public void sendEmail(String to, String subject, String body) {\n        SimpleMailMessage message = new SimpleMailMessage();\n        message.setTo(to);\n        message.setSubject(subject);\n        message.setText(body);\n\n        mailSender.send(message);\n        \n    }\n}\n</code></pre>\n<p>The unit test i'm using to run the class and trying to send the email:</p>\n<pre><code>package maple.spring_servlet;\n\nimport maple.spring_servlet.service.EmailService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.mail.javamail.JavaMailSender;\n\n\npublic class EmailServiceTest {\n\n    @Test\n    public void testSendEmail() {\n\n        EmailService emailService = new EmailService();\n\n        String to = &quot;#recipientemail#.com&quot;;\n        String subject = &quot;Test Subject&quot;;\n        String body = &quot;Test Body&quot;;\n\n        emailService.sendEmail(to, subject, body);\n\n    }\n}\n</code></pre>\n<p>The error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.springframework.mail.javamail.JavaMailSender.send(org.springframework.mail.SimpleMailMessage)&quot; because &quot;this.mailSender&quot; is null\n\n    at maple.spring_servlet.service.EmailService.sendEmail(EmailService.java:23)\n    at maple.spring_servlet.EmailServiceTest.testSendEmail(EmailServiceTest.java:19)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1597)\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "email", "smtp" ],
    "owner" : {
      "account_id" : 28131866,
      "reputation" : 11,
      "user_id" : 21496264,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5b6eb9a7bb04566de6ecda2ca843be7a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Maple",
      "link" : "https://stackoverflow.com/users/21496264/maple"
    },
    "is_answered" : true,
    "view_count" : 102,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746469918,
    "creation_date" : 1746421572,
    "link" : "https://stackoverflow.com/questions/79606347/error-trying-to-send-an-email-with-bootspring-email",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79606379,
    "question_id" : 79606347,
    "body" : "<p>I fixed it, I didn't know that when you create a SpringBootTest you have to do it this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest\nclass SpringServletApplicationTests {\n\n    @Test\n    void contextLoads() {\n    }\n\n}\n</code></pre>\n<p>Thanks to that, I was then able to add:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nprivate EmailService emailService;\n</code></pre>\n<p>So that <code>emailService</code> could automatically inject whatever dependencies it needed to work.</p>\n<p>In the end, my working test looked like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package maple.spring_servlet;\n\nimport maple.spring_servlet.service.EmailService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\npublic class EmailServiceTest {\n\n    @Autowired\n    private EmailService emailService;\n\n    @Test\n    public void testSendEmail() {\n        emailService.sendEmail(#recipientemail#.com&quot;,\n                &quot;Test Email&quot;,\n                &quot;This is a test email sent from Spring Boot application.&quot;);\n    }\n}\n</code></pre>\n<p>Hope this helps someone else who runs into the same issue!</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 28131866,
      "reputation" : 11,
      "user_id" : 21496264,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5b6eb9a7bb04566de6ecda2ca843be7a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Maple",
      "link" : "https://stackoverflow.com/users/21496264/maple"
    },
    "creation_date" : 1746424003,
    "last_activity_date" : 1746457196,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}