{
  "question" : {
    "question_id" : 79838205,
    "title" : "Spring Boot 4.0.0 + GCP : java.lang.NoSuchMethodError: org.springframework.boot.context.config.ConfigDataLocationResolverContext.getBootstrapContext()",
    "body" : "<p>I upgraded a Spring Boot application to Spring Boot 4.0.0 with Java 25 LTS, and I am using:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gcp-starter-secretmanager&lt;/artifactId&gt;\n    &lt;version&gt;7.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When the application starts, it fails with:</p>\n<pre><code>java.lang.NoSuchMethodError:\n'org.springframework.boot.ConfigurableBootstrapContext\n org.springframework.boot.context.config.ConfigDataLocationResolverContext.getBootstrapContext()'\n\nat com.google.cloud.spring.autoconfigure.secretmanager.SecretManagerConfigDataLocationResolver.registerBean(...)\n</code></pre>\n<p>It looks like Spring Cloud GCP is calling a method that no longer exists in Spring Boot 4.</p>\n<p>Is Spring Cloud GCP 7.x compatible with Spring Boot <strong>4.0.0</strong>?</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "google-cloud-platform" ],
    "owner" : {
      "account_id" : 16036243,
      "reputation" : 406,
      "user_id" : 11573887,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1PnT0h3L.png?s=256",
      "display_name" : "Henry Xiloj Herrera",
      "link" : "https://stackoverflow.com/users/11573887/henry-xiloj-herrera"
    },
    "is_answered" : false,
    "view_count" : 110,
    "answer_count" : 3,
    "score" : 2,
    "last_activity_date" : 1765029816,
    "creation_date" : 1764870183,
    "link" : "https://stackoverflow.com/questions/79838205/spring-boot-4-0-0-gcp-java-lang-nosuchmethoderror-org-springframework-boot",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79838419,
    "question_id" : 79838205,
    "body" : "<p>Spring Cloud GCP 7.x is not compatible with Spring Boot 4.</p>\n<p>The latest Spring Cloud GCP releases (like 7.3.2) are built for Spring Boot 3.x and depend on APIs that have changed/been removed in Boot 4 — hence the <code>NoSuchMethodError</code> for <code>getBootstrapContext()</code></p>\n<p>The project’s own compatibility table confirms this. Here: <a href=\"https://github.com/GoogleCloudPlatform/spring-cloud-gcp?tab=readme-ov-file#compatibility-with-spring-project-versions\" rel=\"nofollow noreferrer\">https://github.com/GoogleCloudPlatform/spring-cloud-gcp?tab=readme-ov-file#compatibility-with-spring-project-versions</a></p>\n<p>If you need to use Secret Manager with Boot 4, I think really your choices here are only to either stay on Spring Boot 3.x, or remove Spring Cloud GCP and integrate with the Google Cloud client libraries directly. But have a look on the Compatibility table and try to decide from there :)</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10854615,
      "reputation" : 206,
      "user_id" : 7981380,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-cCphPGt6Q8k/AAAAAAAAAAI/AAAAAAAALGU/FKufjtUVb94/s256-rj/photo.jpg",
      "display_name" : "Jo&#227;o Quintanilha",
      "link" : "https://stackoverflow.com/users/7981380/jo%c3%a3o-quintanilha"
    },
    "creation_date" : 1764889737,
    "last_activity_date" : 1764889737,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79838658,
    "question_id" : 79838205,
    "body" : "<p>tl;dr No, it is not compatible.</p>\n<p>The class missing is actually still there, but in a different package. (<a href=\"https://github.com/spring-projects/spring-boot/blob/1c0e08b4c434b0e77a83098267b2a0f5a3fc56d7/core/spring-boot/src/main/java/org/springframework/boot/context/config/ConfigDataLocationResolverContext.java#L17\" rel=\"nofollow noreferrer\">link</a>)</p>\n<p>You could disable the auto-configuration for Spring Cloud GCP and roll your own with the same content and adjusted imports (accounting for the different package location), but considering that the entire Spring Boot 4.0 release is all about modularization (<a href=\"https://spring.io/blog/2025/10/28/modularizing-spring-boot\" rel=\"nofollow noreferrer\">link</a>), I think this will probably not be the last hand-crafted auto-configuration you'll be writing <strong>and</strong> <em>maintaining</em>, so I wouldn't go that route, as further upgrades will be painful, as you'd have to also verify and update your in-house auto-configs.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1046868,
      "reputation" : 5367,
      "user_id" : 1051677,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/662f409b812848562fa7a07d1988b1c2?s=256&d=identicon&r=PG",
      "display_name" : "Silviu Burcea",
      "link" : "https://stackoverflow.com/users/1051677/silviu-burcea"
    },
    "creation_date" : 1764921913,
    "last_activity_date" : 1764921913,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79839699,
    "question_id" : 79838205,
    "body" : "<p>Technically, it's impossible because Spring Cloud GCP 7.x supports Spring Boot 3.x only.</p>\n<p><strong>FYI:</strong> <strong>Spring Cloud GCP Starter SecretManager</strong> version <strong>7.3.2</strong> is using <strong>Spring Cloud Context</strong> version <strong>4.3.0</strong>, which uses Spring Boot <strong>3.5.0</strong> starters.</p>\n<p>Also, the latest version of Secret Manager 7.4.1 doesn't support Spring Boot 4.0.0.</p>\n<p>But you can try this workaround solution to see if this works:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-gcp-starter-secretmanager&lt;/artifactId&gt;\n        &lt;version&gt;7.3.2&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;\n        &lt;version&gt;5.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>Basically, enforce Spring Cloud GCP 7.x to use Spring Cloud Context <strong>5.0.0,</strong> which uses Spring Boot <strong>4.0.0</strong> starters.</p>\n<p>Also, one thing to be noted <code>ConfigurableBootstrapContext</code> is part of <code>org.springframework.boot.bootstrap</code> package now. They have moved it in Spring Boot 4.0.0.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 11377012,
      "reputation" : 17227,
      "user_id" : 8340997,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/fQmuF6ta.png?s=256",
      "display_name" : "Anish B.",
      "link" : "https://stackoverflow.com/users/8340997/anish-b"
    },
    "creation_date" : 1765028106,
    "last_activity_date" : 1765029816,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}