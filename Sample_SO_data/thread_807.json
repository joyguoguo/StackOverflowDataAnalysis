{
  "question" : {
    "question_id" : 79770210,
    "title" : "Eclipse Build structure in &quot;target/classes&quot; differs from that of exported Jar",
    "body" : "<p>I have an Eclipse project created with <strong>&quot;new/Maven Project/Create a simple project&quot;.</strong></p>\n<p>Here's the project structure:<br>\n<a href=\"https://i.sstatic.net/AJAH20m8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/AJAH20m8.png\" alt=\"enter image description here\" /></a></p>\n<p>When running a.b.Test.class in the IDE, the project is built into &quot;target/classes&quot;.<br>\nThe structure thereof differs from that of the exported Jar.</p>\n<p>In particular, in the Jar the resources are exported into the &quot;resources&quot; subdirectory.<br>\nWhen running in Eclipse, no subdirectory is used.</p>\n<p>That results in discrepancies when trying to load Resources.</p>\n<p><strong>Here's the structure of the &quot;target/classes&quot; directory in the project:</strong><br>\n<a href=\"https://i.sstatic.net/V0lZLnut.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/V0lZLnut.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Here's the structure of the resources in the exported Jar:</strong><br>\n<a href=\"https://i.sstatic.net/vTfb5bio.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/vTfb5bio.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>When run in the IDE, resolution is as follows:</strong><br></p>\n<pre><code>Method        Result URL                                                       String (from a.b.Test)\n------------- ------------------------------------------------------------------------------------------\nClassLoader   file:/C:/...project/target/classes/a/b/res_01.txt             &lt;-  a/b/res_01.txt\nClass         file:/C:/...project/target/classes/a/b/res_01.txt             &lt;- /a/b/res_01.txt\nClassLoader   file:/C:/...project/target/classes/a/b/Test.class             &lt;-  a/b/Test.class\nClass         file:/C:/...project/target/classes/a/b/Test.class             &lt;- /a/b/Test.class\nClass         file:/C:/...project/target/classes/a/b/Test.class             &lt;-      Test.class\n</code></pre>\n<p><strong>When run from the Jar, it looks like this:</strong><br></p>\n<pre><code>Method        Result URL                                                       String (from a.b.Test)\n------------- ------------------------------------------------------------------------------------------\nClassLoader   jar:file:/C:/...project/project.jar!/resources/a/b/res_01.txt &lt;-  resources/a/b/res_01.txt\nClass         jar:file:/C:/...project/project.jar!/resources/a/b/res_01.txt &lt;- /resources/a/b/res_01.txt\nClassLoader   jar:file:/C:/...project/project.jar!/a/b/Test.class           &lt;-  a/b/Test.class\nClass         jar:file:/C:/...project/project.jar!/a/b/Test.class           &lt;- /a/b/Test.class\nClass         jar:file:/C:/...project/project.jar!/a/b/Test.class           &lt;-      Test.class\n</code></pre>\n<p>Can anyone explain this differing behaviour for resources?</p>\n<p>Surely it's a mistake somewhere? But where? Eclipse? Maven?</p>\n<p>Is there some trick to avoid this anomaly?</p>\n<p><strong>Here's some code, if anyone wants to try it out:</strong><br></p>\n<pre><code>package a.b;\n\nimport java.io.IOException;\nimport java.net.URL;\nimport java.util.stream.Stream;\n\npublic class Test {\n\n    public  static void main(final String[] args) {\n\n        Stream.of(\n                &quot;a/b/res_01.txt&quot;,\n                &quot;a/b/Test.class&quot;,\n                &quot;Test.class&quot;\n                )\n        .forEach(trailing -&gt; {\n            Stream    .of(\n                    &quot; resources/&quot;,\n                    &quot;/resources/&quot;,\n                    &quot;           &quot;,\n                    &quot;          /&quot; \n                    )\n            .forEach(prefix -&gt; {\n\n                final var resNameFull = prefix + trailing;\n                final var resName     = resNameFull.strip();\n\n                try {\n                    ;                           Test.class.getClassLoader().getResources(resName).asIterator().forEachRemaining(url -&gt; {\n                        \n                        print(&quot;ClassLoader.: &quot;, url,                                               resNameFull);\n                    });\n                } catch (final IOException e) {\n                    System.out.println(&quot;ERROR.......: &quot; + e.getMessage());\n                }\n                ;       print(&quot;Class.......: &quot;, Test.class                 .getResource (resName), resNameFull);\n            });\n        });\n    }\n\n    private static void print(final String text, final URL url, final String resNameFull) {\n\n        if (url != null) {\n            System.out.println(text + url.toString() + &quot; &lt;- &quot; + resNameFull);\n        }\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "eclipse", "maven" ],
    "owner" : {
      "account_id" : 8405686,
      "reputation" : 961,
      "user_id" : 6309242,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dave The Dane",
      "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
    },
    "is_answered" : true,
    "view_count" : 158,
    "answer_count" : 1,
    "score" : 5,
    "last_activity_date" : 1758393457,
    "creation_date" : 1758360756,
    "link" : "https://stackoverflow.com/questions/79770210/eclipse-build-structure-in-target-classes-differs-from-that-of-exported-jar",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79770446,
    "question_id" : 79770210,
    "body" : "<p>I am going to take an educated guess at an answer... I need to submit this as an &quot;answer&quot; because I want to include some screenshots to clarify my response.</p>\n<p>It sounds like you might be using the <code>Export wizard</code> to create the JAR file (screenshot below) instead of generating your JAR file actually via Maven which is accomplished by <code>Run as... Maven install</code> (second screenshot). If so, I'm pretty sure there is a fundamental difference in what happens via each method.</p>\n<p>Can you confirm how you are generating the JAR via comment before I augment this answer?</p>\n<p><a href=\"https://i.sstatic.net/FyoIqFRV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/FyoIqFRV.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.sstatic.net/65v1xWVB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/65v1xWVB.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>UPDATE</strong>:  So since you confirmed that you are using the <code>Export wizard</code>, I am going to risk the ire of the stackoverflow community and continue my educated guess without reproducing this exactly - however, I'm 90+% sure of the following information...</p>\n<p><strong>Short Answer</strong>:  Trying using <code>Run as... Maven</code> (found either by right clicking your project, or from the main menu).  This will use [Eclipse embedded] Maven to build your artifact/JAR.</p>\n<p><strong>Longer Answer/Background</strong>:  It also sounds like you're newish to both Eclipse and Maven.  If you're not, my apologies but you should get some information from this either way.</p>\n<p>With all the benefits of IDEs, there are also drawbacks in that much of what they do is &quot;under the covers&quot; and not obvious even if you're an experienced programmer, much less new to any of the technologies involved.</p>\n<p>What you have to know (and keep in mind in the future) is that <strong>your project is actually now being &quot;managed&quot; both as an Eclipse project AND a Maven project</strong>.  Therefore, as I said earlier, the Export wizard is probably not really doing the same thing as a Maven build/package/install - rather it is following some Eclipse specific way of creating a JAR file.  (This trips up many of my colleagues and for good reason... there's really no way to tell without already knowing and the IDE doesn't help you).  I may google it and try to explain further what the Export wizard is doing, but I use Maven pretty exclusively so I just know to use the Maven commands.</p>\n<p>You can probably stop reading now but in case you're wondering:<br />\n&quot;<strong>What do I mean that the project is being managed as an Eclipse project AND a Maven project?</strong>&quot;  Well, when you created your &quot;Maven&quot; project using the IDE it DID create a Maven <code>pom.xml</code> file but I'm 99.9% sure it ALSO created an Eclipse <code>.project</code> file which is actually what most of your IDE experience is governed by.  i.e. Eclipse has enough &quot;smarts&quot; to know that your project is Maven-ized and will work to monitor and read the <code>POM</code> if you make changes to it, but internally it is converting everything to its own format and operating like Maven isn't even there (except if you choose commands/menus that are Maven specific such as those earlier mentioned).</p>\n<p>I'll stop here as this is getting quite long.  Hopefully I've given you a glimpse of what is probably going on and I hope it solves your issue.  Let me know via comment if it has helped or solved your problem or if you have followup questions.</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5584785,
      "reputation" : 139,
      "user_id" : 4425544,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/946c068ad6ee30c5814968803f2cab91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "kansasSamurai",
      "link" : "https://stackoverflow.com/users/4425544/kansassamurai"
    },
    "creation_date" : 1758388370,
    "last_activity_date" : 1758393457,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140750969,
    "post_id" : 79770210,
    "body" : "Some clarifications to previous comments: 1) Eclipse uses an &quot;embedded&quot; version of Maven but it&#39;s not different than an installed Maven [that I&#39;ve ever come across].  While I usually recommend that people install Maven alongside Eclipse, it is not necessary.  [FWIW, I&#39;m a big fan of SDKMAN ] 2) Maven, by default, copies the contents of the <code>src&#47;main&#47;resources</code> directory into the root of the packaged JAR file when creating a JAR artifact. This behavior is handled by the <code>maven-resources-plugin</code>, which is implicitly bound to the Maven build lifecycle&#39;s <code>process-resources</code> phase.",
    "score" : 0,
    "owner" : {
      "account_id" : 5584785,
      "reputation" : 139,
      "user_id" : 4425544,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/946c068ad6ee30c5814968803f2cab91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "kansasSamurai",
      "link" : "https://stackoverflow.com/users/4425544/kansassamurai"
    },
    "creation_date" : 1758492332,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749737,
    "post_id" : 79770210,
    "body" : "If you&#39;re using Maven you should probably always have a dedicated Maven installed with <code>mvn</code> on your <code>PATH</code>. I don&#39;t know what Eclipse (I don&#39;t use it) means by &quot;Maven build&quot; but in &#39;real&#39; Maven, that doesn&#39;t exist. Maybe it means compile, maybe it means package. But for the record <code>mvn install</code> != <code>mvn package</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4243,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1758408824,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749323,
    "post_id" : 79770210,
    "body" : "@aled AFAIK some IDE&#39;s (I know netbeans, Eclipse presumably similar) do not register the bundled Maven runtime that comes with them, so just running mvn(.cmd) from the command line is unlikely to work. One can hack it, of course, by running <code>C:\\Programs\\netbeans\\Java\\maven\\bin\\mvn.cmd</code> manually. @Dave if you can figure out where Eclipse stores its bundled maven version (unless  they hack it completely) you could still see if @g00se&#39;s comment yields anything interesting.",
    "score" : 0,
    "owner" : {
      "account_id" : 30223964,
      "reputation" : 252,
      "user_id" : 23162960,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2451acfac254a6fc75757ecf89d75f9a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jannik S.",
      "link" : "https://stackoverflow.com/users/23162960/jannik-s"
    },
    "creation_date" : 1758386175,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749309,
    "post_id" : 79770210,
    "body" : "Well, it was created with &quot;new/Maven Project/Create a simple project&quot;. Maybe that&#39;s a misnomer?",
    "score" : 0,
    "owner" : {
      "account_id" : 8405686,
      "reputation" : 961,
      "user_id" : 6309242,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dave The Dane",
      "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
    },
    "creation_date" : 1758385217,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749305,
    "post_id" : 79770210,
    "body" : "Do you mean that it is not really a Maven project then? Eclipse projects behave differently than Maven projects.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1758384958,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749275,
    "post_id" : 79770210,
    "body" : "<code>mvn package</code> doesn&#39;t work as I&#39;m just running the Eclipse IDE for RCP and RAP Developers under Windows, so there&#39;s no maven installation as such. Just what&#39;s built into Eclipse.",
    "score" : 0,
    "owner" : {
      "account_id" : 8405686,
      "reputation" : 961,
      "user_id" : 6309242,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dave The Dane",
      "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
    },
    "creation_date" : 1758383701,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749259,
    "post_id" : 79770210,
    "body" : "Seems like improper Maven support in the IDE. Maven itself should never copy the <code>resources</code> folder into the packaged result. You can maybe prove that by running <code>mvn package</code> from the project root",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4243,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1758382623,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749223,
    "post_id" : 79770210,
    "body" : "Standard. Just &quot;Run as/Java Application&quot; from the Editor Context-Menu.",
    "score" : 0,
    "owner" : {
      "account_id" : 8405686,
      "reputation" : 961,
      "user_id" : 6309242,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dave The Dane",
      "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
    },
    "creation_date" : 1758381384,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749189,
    "post_id" : 79770210,
    "body" : "What&#39;s in the Run configuration?",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1758380056,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79770446" : [ {
      "comment_id" : 140749660,
      "post_id" : 79770446,
      "body" : "Eclipse uses JDT to develop Java. It has nothing to do with Maven and provides Export JAR function. It has its own, limited configuration and can not mimic Maven in any way. It can be used  without any Maven support installed. Maven support (M2E)extends that functionality, but fails to override Export JAR.",
      "score" : 1,
      "owner" : {
        "account_id" : 43022,
        "reputation" : 24626,
        "user_id" : 125562,
        "user_type" : "registered",
        "accept_rate" : 64,
        "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
        "display_name" : "Basilevs",
        "link" : "https://stackoverflow.com/users/125562/basilevs"
      },
      "creation_date" : 1758403354,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140749510,
      "post_id" : 79770446,
      "body" : "Actually, I quite like having resources in a dedicated folder, but using the JAR Export Wizard, it was always doomed to be incompatible with &quot;Run As/Java Application&quot;. Using &quot;Maven Install&quot; it works just fine.",
      "score" : 0,
      "owner" : {
        "account_id" : 8405686,
        "reputation" : 961,
        "user_id" : 6309242,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Dave The Dane",
        "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
      },
      "creation_date" : 1758394619,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140749507,
      "post_id" : 79770446,
      "body" : "Thanks for your help. I&#39;ve run the &quot;Run As/Maven Install&quot; &amp; the result is compatible with the Eclipse &quot;Run As/Java Application&quot;. Why the Export Wizard does it differently, who knows. I&#39;ll just stop using it.",
      "score" : 0,
      "owner" : {
        "account_id" : 8405686,
        "reputation" : 961,
        "user_id" : 6309242,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/2c7cd82cb8a632436980a18b9dbc5822?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Dave The Dane",
        "link" : "https://stackoverflow.com/users/6309242/dave-the-dane"
      },
      "creation_date" : 1758394312,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140749504,
      "post_id" : 79770446,
      "body" : "@DaveTheDane Now that I think about it, the Eclipse JAR process is almost suredly just creating a &quot;raw&quot; JAR file as if you had run the java jar command from the command line so it simply creates a JAR based on the structure of the files.  However, a Maven build has some smarts built in where it knows how to create a JAR based on the Maven specific file locations.  i.e. you&#39;ve probably heard it uses &quot;convention over configuration&quot; and thus knows to package src/main/resources in the same folder(s) as it packages the .class files.",
      "score" : 0,
      "owner" : {
        "account_id" : 5584785,
        "reputation" : 139,
        "user_id" : 4425544,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/946c068ad6ee30c5814968803f2cab91?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "kansasSamurai",
        "link" : "https://stackoverflow.com/users/4425544/kansassamurai"
      },
      "creation_date" : 1758394213,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}