{
  "question" : {
    "question_id" : 79542953,
    "title" : "Is there a Java construct that allows to operate on an object and then return it (like Kotlin `also` or `apply`)?",
    "body" : "<p>Lets have this simple sample.</p>\n<p>I have a class A and 3 functions (ok1, ok2, nok). All of them returns an instance of A.\nnok is not correct - fun does not return A but int.</p>\n<pre><code>class A\n{\n    public A ()\n    {\n    }\n    \n    public int fun ()\n    {\n        return 0;\n    }\n}\n\n\n\nA ok1 ()\n{\n    return new A ();\n}\n\nA ok2 ()\n{\n    A a = new A ();\n    a.fun ();\n    return a;\n}\n\nA nok ()\n{\n    return new A ().fun ();   // wrong - int of fun () is not A needed by nok to return\n}\n</code></pre>\n<p>I wonder if there is a &quot;way&quot; (don't know - some annotation, wrapping, ...) I can tell the compiler to handle the line inside of <code>nok</code> the way I do it in <code>ok2</code> (return the object after fun performed)?</p>\n<p>Some objects do support this - they always return themself.</p>\n<p>But thats not the case anytime and sometimes it would be nice I think.</p>\n",
    "tags" : [ "java", "oop" ],
    "owner" : {
      "account_id" : 117317,
      "reputation" : 12715,
      "user_id" : 307297,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://i.sstatic.net/e28FD.png?s=256",
      "display_name" : "chris01",
      "link" : "https://stackoverflow.com/users/307297/chris01"
    },
    "is_answered" : true,
    "view_count" : 114,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1743286620,
    "creation_date" : 1743236171,
    "link" : "https://stackoverflow.com/questions/79542953/is-there-a-java-construct-that-allows-to-operate-on-an-object-and-then-return-it",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79543179,
    "question_id" : 79542953,
    "body" : "<p>You can write your own version of Kotlin's <a href=\"https://kotlinlang.org/docs/scope-functions.html#also\" rel=\"noreferrer\"><code>also</code></a>.</p>\n<pre><code>class ScopeFunctions {\n    public static &lt;T&gt; T also(T t, Consumer&lt;T&gt; f) {\n        f.accept(t);\n        return t;\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>A nok () {\n    return ScopeFunctions.also(new A(), A::fun);\n}\n</code></pre>\n<p>With Lombok's <a href=\"https://projectlombok.org/features/experimental/ExtensionMethod\" rel=\"noreferrer\"><code>@ExtensionMethod</code></a>, you basically get almost the same syntax as Kotlin - being able to directly call <code>also</code> on any reference type expression.</p>\n<pre><code>@ExtensionMethod(ScopeFunctions.class)\nclass SomeEnclosingClass {\n    A nok () {\n        return new A().also(A::fun);\n    }\n}\n</code></pre>\n",
    "score" : 6,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292025,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1743248168,
    "last_activity_date" : 1743248168,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79543963,
    "question_id" : 79542953,
    "body" : "<p>if function fun return something static, a small set of responses .<br />\nyou can define a static variables for it , and  then on the return value to check if this is this error state or another. they can be instance of A, but in the context of the code represnt an error.</p>\n<pre><code>public static A BAD_RESPONSE = new A();\npublic static A ERROR_CODE_1 = new A();\n</code></pre>\n<p>also , maybe you can just add on A object some field like &quot;<code>errorMessage</code>&quot; or &quot;<code>errorState</code>&quot;  or as it looks like &quot;<code>errorCode</code>&quot; and initalize them only in case of fun , and check on those .</p>\n<pre><code>A fon(){  \n  int errorCode = 0;\n  return new A(errorCode);\n}\n</code></pre>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 4688734,
      "reputation" : 179,
      "user_id" : 4217894,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/1428712598/picture?type=large",
      "display_name" : "NiNiCkNaMe",
      "link" : "https://stackoverflow.com/users/4217894/ninickname"
    },
    "creation_date" : 1743286620,
    "last_activity_date" : 1743286620,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140276512,
    "post_id" : 79542953,
    "body" : "I think it&#39;s misleading to frame it as a matter of the return type â€“ <code>fun</code> might as well return <code>new A()</code>, which would type-check, but probably not be what you wanted.",
    "score" : 1,
    "owner" : {
      "account_id" : 4749863,
      "reputation" : 27173,
      "user_id" : 3840170,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/L9NB3.png?s=256",
      "display_name" : "dumbass",
      "link" : "https://stackoverflow.com/users/3840170/dumbass"
    },
    "creation_date" : 1743238827,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140276469,
    "post_id" : 79542953,
    "body" : "What is the problem in using your approach of <code>ok2()</code>, where you call the method first and then return the object?",
    "score" : 1,
    "owner" : {
      "account_id" : 108033,
      "reputation" : 20099,
      "user_id" : 286934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=256&d=identicon&r=PG",
      "display_name" : "Progman",
      "link" : "https://stackoverflow.com/users/286934/progman"
    },
    "creation_date" : 1743237216,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140276444,
    "post_id" : 79542953,
    "body" : "Is this because the method you want to call just has some side effect on the object? Why can&#39;t you just assign the instance to a variable, call the method and then just use the variable again in the return statement?",
    "score" : 0,
    "owner" : {
      "account_id" : 11104856,
      "reputation" : 1774,
      "user_id" : 8152324,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b7d2805fe6651d48b5d3d9b9d551bd69?s=256&d=identicon&r=PG",
      "display_name" : "ndc85430",
      "link" : "https://stackoverflow.com/users/8152324/ndc85430"
    },
    "creation_date" : 1743236403,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}