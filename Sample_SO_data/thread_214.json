{
  "question" : {
    "question_id" : 79825386,
    "title" : "Self-contained java annotation-processing with gradle",
    "body" : "<p>I am reading into java compile-time annotation-processing.</p>\n<p>I can easily process annotations manually on the commandline, using</p>\n<pre><code>javac -d . MyAnnotation.java\njavac -d . MyAnnotationProcessor.java\njavac -d . -processor org.example.MyAnnotationProcessor MyProgram.java\n</code></pre>\n<p>now I'm trying to port this to gradle, but the examples I find online usually only show how to apply existing annotation-processors form mavencentral or using the gradle plugin net.ltgt.apt, which has been discontinued since support for annotation processing has been added to gradle itself.</p>\n<p>Lacking good examples, I'm trying to figure out how to do this myself, but I don't know groovy and gradle that well, so I'm mostly guessing. Best I could do was having 3 projects (annotations, annotationprocessors and app), with</p>\n<pre><code>dependencies {\n    compileOnly project(':annotations')\n    annotationProcessor project(&quot;:annotationprocessors&quot;)\n}\n</code></pre>\n<p>in the main app's build.gradle.</p>\n<p>With this, the project builds, but the processor doesn't seem to be run. No console output is shown and no files are generated.</p>\n",
    "tags" : [ "java", "gradle", "annotations" ],
    "owner" : {
      "account_id" : 26355819,
      "reputation" : 68,
      "user_id" : 20012811,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AItbvmkqRLqCO0JCk5KEsoN_QkrGD7ySi42JSnquCiAq=k-s256",
      "display_name" : "Viktor Engelmann",
      "link" : "https://stackoverflow.com/users/20012811/viktor-engelmann"
    },
    "is_answered" : true,
    "view_count" : 44,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1763649169,
    "creation_date" : 1763634445,
    "link" : "https://stackoverflow.com/questions/79825386/self-contained-java-annotation-processing-with-gradle",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79825627,
    "question_id" : 79825386,
    "body" : "<p>As Slaw said, I needed to create a file named <code>javax.annotation.processing.Processor</code> in  the directory <code>annotationprocessors\\src\\main\\resources\\META-INF\\services</code> and put the fully qualified class-name of the processor into that file.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26355819,
      "reputation" : 68,
      "user_id" : 20012811,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AItbvmkqRLqCO0JCk5KEsoN_QkrGD7ySi42JSnquCiAq=k-s256",
      "display_name" : "Viktor Engelmann",
      "link" : "https://stackoverflow.com/users/20012811/viktor-engelmann"
    },
    "creation_date" : 1763649169,
    "last_activity_date" : 1763649169,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140864140,
    "post_id" : 79825386,
    "body" : "Does the <code>:annotationprocessor</code> project have the appropriate service-configuration resource? It would named <code>META-INF&#47;services&#47;javax.annotation.processing.Processor</code> and contain the fully-qualified name of your processor implementation class.",
    "score" : 1,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49884,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1763637125,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79825627" : [ {
      "comment_id" : 140865252,
      "post_id" : 79825627,
      "body" : "To provide more info, you didn&#39;t need to do that in the original attempt (without Gradle) because you were specifying the processor class via the <code>-processor</code> argument. Gradle doesn&#39;t pass that argument automatically. So you needed to provide the service-configuration resource because the compiler otherwise relies on the <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\"><code>ServiceLoader</code></a> mechanism. That said, you could probably instead configure the <code>compileJava</code> task to pass a <code>-processor</code> argument.",
      "score" : 0,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49884,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1763676667,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}