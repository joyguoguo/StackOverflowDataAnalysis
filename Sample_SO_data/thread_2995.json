{
  "question" : {
    "question_id" : 79579514,
    "title" : "Adding an exception for blank strings to NumberFormatter",
    "body" : "<p>I have a JFormattedTextField that I want to only receive integer inputs (it will refuse anything else).</p>\n<pre><code>NumberFormat test = NumberFormat.getIntegerInstance();\nNumberFormatter test2 = new NumberFormatter(test);\ntest2.setValueClass(Integer.class);\ntest2.setAllowsInvalid(false);\n\ntxt_phoneNumber = new JFormattedTextField(test2);\nlbl_phoneNumber.setBounds(170, 100, 100, 20);\nadd(lbl_phoneNumber);\ntxt_phoneNumber.setBounds(170, 120, 180, 20);\nadd(txt_phoneNumber);\n</code></pre>\n<p>I did so using NumberFormatter, as shown above. This code works fine for restricting String input, but when I want to reset the txt_phoneNumber field to a blank string &quot;&quot;, it doesn't work. I have to instead set it to &quot;0&quot;. Is there a way to make an exception to allow String inputs if the string is blank?</p>\n",
    "tags" : [ "java", "jtextfield", "jformattedtextfield", "numberformatter" ],
    "owner" : {
      "account_id" : 19558337,
      "reputation" : 45,
      "user_id" : 14312088,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a208df29b6476652663fd9ee5e34f9a1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "TVXD",
      "link" : "https://stackoverflow.com/users/14312088/tvxd"
    },
    "is_answered" : true,
    "view_count" : 70,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744908161,
    "creation_date" : 1744900915,
    "link" : "https://stackoverflow.com/questions/79579514/adding-an-exception-for-blank-strings-to-numberformatter",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79579721,
    "question_id" : 79579514,
    "body" : "<p>You can subclass <code>NumberFormatter</code> to allow an empty string as valid input:<br />\nHereâ€™s a custom formatter that accepts integers or an empty string &quot; &quot; and stores it as-is:</p>\n<pre><code>NumberFormat format = NumberFormat.getIntegerInstance();\n\nNumberFormatter formatter = new NumberFormatter(format) {\n    @Override\n    public Object stringToValue(String text) throws ParseException {\n        if (text == null || text.trim().isEmpty()) {\n            return &quot;&quot;; // return blank string\n        }\n        return super.stringToValue(text);\n    }\n\n    @Override\n    public String valueToString(Object value) throws ParseException {\n        if (value instanceof String &amp;&amp; ((String) value).isEmpty()) {\n            return &quot;&quot;; // show blank string\n        }\n        return super.valueToString(value);\n    }\n};\n\nformatter.setAllowsInvalid(false);\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744908161,
    "last_activity_date" : 1744908161,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}