{
  "question" : {
    "question_id" : 79612606,
    "title" : "Spring Boot Multipart file REST endpoint results in MultipartException (No space left on device)",
    "body" : "<p>We are running a Spring Boot Java application on a Heroku instance (our product instance). <br/>\nThere is a MultiPart REST endpoint available for an external (hardware) connector to upload some data. This data is expected (by the customer) to be not that big (we never saw it being bigger than 100KB). And as the external connector is some hardware, the customer cannot give us the real requests being sent.</p>\n<p>Most of the time, the external connector successfully uploads the file. But sometimes it fails with a:</p>\n<pre><code>2025-05-08T12:31:03.294533+00:00 app[web.1]: org.springframework.web.multipart.MultipartException: Failed to parse multipart servlet request\n...\n2025-05-08T12:31:03.294598+00:00 app[web.1]: Caused by: java.lang.RuntimeException: java.io.IOException: No space left on device\n...\n2025-05-08T12:31:03.294601+00:00 app[web.1]: Caused by: java.io.IOException: No space left on device\n</code></pre>\n<p>The java temp folder is, according to the heroku cli, spacious enough though:</p>\n<pre><code>/tmp $ df . -H\nFilesystem              Size  Used Avail Use% Mounted on\n/dev/mapper/evg0-evol0  398G   65G  314G  17% /tmp\n</code></pre>\n<p>When the external connector tries again (after some time), it is sent, received and processed successfully.</p>\n<p>We are using <code>spring-boot 3.1.5</code>, with <code>undertow-core 2.3.10.Final</code> being the library handling the multipart handling.</p>\n<p><strong>Question</strong>: Is it possible to increase some loggings or implement some logic to find out what is going on with those requests, by perhaps catching the <code>java.io.IOException: No space left on device</code> somehow, as it is thrown prior to our method handling the rest request?</p>\n<p>Full stacktrace for convenience:</p>\n<pre><code>2025-05-08T12:33:18.367360+00:00 app[web.1]: org.springframework.web.multipart.MultipartException: Failed to parse multipart servlet request\n2025-05-08T12:33:18.367363+00:00 app[web.1]: at org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.handleParseFailure(StandardMultipartHttpServletRequest.java:122)\n2025-05-08T12:33:18.367364+00:00 app[web.1]: at org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:110)\n2025-05-08T12:33:18.367365+00:00 app[web.1]: at org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.&lt;init&gt;(StandardMultipartHttpServletRequest.java:86)\n2025-05-08T12:33:18.367365+00:00 app[web.1]: at org.springframework.web.multipart.support.StandardServletMultipartResolver.resolveMultipart(StandardServletMultipartResolver.java:112)\n2025-05-08T12:33:18.367366+00:00 app[web.1]: at org.springframework.web.servlet.DispatcherServlet.checkMultipart(DispatcherServlet.java:1219)\n2025-05-08T12:33:18.367367+00:00 app[web.1]: at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1053)\n2025-05-08T12:33:18.367367+00:00 app[web.1]: at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n2025-05-08T12:33:18.367367+00:00 app[web.1]: at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n2025-05-08T12:33:18.367368+00:00 app[web.1]: at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n2025-05-08T12:33:18.367369+00:00 app[web.1]: at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:547)\n2025-05-08T12:33:18.367370+00:00 app[web.1]: at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n2025-05-08T12:33:18.367370+00:00 app[web.1]: at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)\n2025-05-08T12:33:18.367370+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n2025-05-08T12:33:18.367371+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n2025-05-08T12:33:18.367371+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)\n2025-05-08T12:33:18.367371+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367371+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367372+00:00 app[web.1]: at nl.metafactory.hukseflux.filter.MdcRequestFilter.processIncomingOutgoingRequestId(MdcRequestFilter.java:81)\n2025-05-08T12:33:18.367372+00:00 app[web.1]: at nl.metafactory.hukseflux.filter.MdcRequestFilter.doFilter(MdcRequestFilter.java:49)\n2025-05-08T12:33:18.367372+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367372+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367373+00:00 app[web.1]: at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\n2025-05-08T12:33:18.367373+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:479)\n2025-05-08T12:33:18.367375+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:340)\n2025-05-08T12:33:18.367375+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:82)\n2025-05-08T12:33:18.367375+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:128)\n2025-05-08T12:33:18.367376+00:00 app[web.1]: at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\n2025-05-08T12:33:18.367376+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367376+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367377+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367377+00:00 app[web.1]: at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\n2025-05-08T12:33:18.367377+00:00 app[web.1]: at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\n2025-05-08T12:33:18.367377+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367381+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367381+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367381+00:00 app[web.1]: at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\n2025-05-08T12:33:18.367381+00:00 app[web.1]: at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367382+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367388+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367389+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at nl.metafactory.hukseflux.web.filter.SpaWebFilter.doFilterInternal(SpaWebFilter.java:35)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367390+00:00 app[web.1]: at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)\n2025-05-08T12:33:18.367391+00:00 app[web.1]: at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367394+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)\n2025-05-08T12:33:18.367395+00:00 app[web.1]: at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367396+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367397+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)\n2025-05-08T12:33:18.367397+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367397+00:00 app[web.1]: at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\n2025-05-08T12:33:18.367399+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367401+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)\n2025-05-08T12:33:18.367401+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)\n2025-05-08T12:33:18.367401+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)\n2025-05-08T12:33:18.367402+00:00 app[web.1]: at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)\n2025-05-08T12:33:18.367402+00:00 app[web.1]: at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)\n2025-05-08T12:33:18.367402+00:00 app[web.1]: at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\n2025-05-08T12:33:18.367403+00:00 app[web.1]: at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)\n2025-05-08T12:33:18.367403+00:00 app[web.1]: at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)\n2025-05-08T12:33:18.367403+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367404+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n2025-05-08T12:33:18.367405+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n2025-05-08T12:33:18.367406+00:00 app[web.1]: at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n2025-05-08T12:33:18.367407+00:00 app[web.1]: at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n2025-05-08T12:33:18.367408+00:00 app[web.1]: at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n2025-05-08T12:33:18.367408+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:276)\n2025-05-08T12:33:18.367408+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\n2025-05-08T12:33:18.367408+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:132)\n2025-05-08T12:33:18.367408+00:00 app[web.1]: at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n2025-05-08T12:33:18.367409+00:00 app[web.1]: at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n2025-05-08T12:33:18.367409+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:256)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:101)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at io.undertow.server.Connectors.executeRootHandler(Connectors.java:393)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:859)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n2025-05-08T12:33:18.367410+00:00 app[web.1]: at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1282)\n2025-05-08T12:33:18.367411+00:00 app[web.1]: at java.base/java.lang.Thread.run(Thread.java:840)\n2025-05-08T12:33:18.367411+00:00 app[web.1]: Caused by: java.lang.RuntimeException: java.io.IOException: No space left on device\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:887)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at io.undertow.servlet.spec.HttpServletRequestImpl.loadParts(HttpServletRequestImpl.java:607)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at io.undertow.servlet.spec.HttpServletRequestImpl.getParts(HttpServletRequestImpl.java:558)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at jakarta.servlet.http.HttpServletRequestWrapper.getParts(HttpServletRequestWrapper.java:306)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at jakarta.servlet.http.HttpServletRequestWrapper.getParts(HttpServletRequestWrapper.java:306)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at jakarta.servlet.http.HttpServletRequestWrapper.getParts(HttpServletRequestWrapper.java:306)\n2025-05-08T12:33:18.367412+00:00 app[web.1]: at org.springframework.web.multipart.support.StandardMultipartHttpServletRequest.parseRequest(StandardMultipartHttpServletRequest.java:93)\n2025-05-08T12:33:18.367413+00:00 app[web.1]: ... 144 common frames omitted\n2025-05-08T12:33:18.367413+00:00 app[web.1]: Caused by: java.io.IOException: No space left on device\n2025-05-08T12:33:18.367413+00:00 app[web.1]: at java.base/sun.nio.ch.FileDispatcherImpl.write0(Native Method)\n2025-05-08T12:33:18.367413+00:00 app[web.1]: at java.base/sun.nio.ch.FileDispatcherImpl.write(FileDispatcherImpl.java:62)\n2025-05-08T12:33:18.367413+00:00 app[web.1]: at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:132)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:97)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:67)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at java.base/sun.nio.ch.FileChannelImpl.write(FileChannelImpl.java:288)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.data(MultiPartParserDefinition.java:347)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.util.MultipartParser$IdentityEncoding.handle(MultipartParser.java:365)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.util.MultipartParser$ParseState.entity(MultipartParser.java:343)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.util.MultipartParser$ParseState.parse(MultipartParser.java:131)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.server.handlers.form.MultiPartParserDefinition$MultiPartUploadHandler.parseBlocking(MultiPartParserDefinition.java:253)\n2025-05-08T12:33:18.367414+00:00 app[web.1]: at io.undertow.servlet.spec.HttpServletRequestImpl.parseFormData(HttpServletRequestImpl.java:881)\n2025-05-08T12:33:18.367415+00:00 app[web.1]: ... 150 common frames omitted\n\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "rest", "undertow" ],
    "owner" : {
      "account_id" : 10214367,
      "reputation" : 11,
      "user_id" : 7540515,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-Qg812OGPR8g/AAAAAAAAAAI/AAAAAAAAAEo/FIK6-AGt3P0/s256-rj/photo.jpg",
      "display_name" : "MacNetron",
      "link" : "https://stackoverflow.com/users/7540515/macnetron"
    },
    "is_answered" : false,
    "view_count" : 98,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1746774731,
    "creation_date" : 1746714225,
    "link" : "https://stackoverflow.com/questions/79612606/spring-boot-multipart-file-rest-endpoint-results-in-multipartexception-no-space",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79613641,
    "question_id" : 79612606,
    "body" : "<p>To debug multipart and I/O issues in Undertow and Spring Boot, make logging more verbose:<br />\n<code>application.yml</code></p>\n<pre><code>logging:\n  level:\n    io.undertow: DEBUG\n    io.undertow.server.handlers.form: TRACE\n    org.springframework.web.multipart: DEBUG\n    org.springframework.web.servlet.DispatcherServlet: DEBUG\n</code></pre>\n<p>You might also set limits or change how multipart uploads are parsed using these Spring Boot properties:</p>\n<p><code>application.yml</code></p>\n<pre><code>spring:\n  servlet:\n    multipart:\n      location: /tmp\n      max-file-size: 10MB\n      max-request-size: 20MB\n</code></pre>\n<p>Try this configuration to find the problem.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 18239208,
      "reputation" : 647,
      "user_id" : 13276541,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GgPsMth9rUGvp9lxK_Nky2OaBid5MNfuotaqiF9Bg=k-s256",
      "display_name" : "Ahmed Mera",
      "link" : "https://stackoverflow.com/users/13276541/ahmed-mera"
    },
    "creation_date" : 1746774731,
    "last_activity_date" : 1746774731,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}