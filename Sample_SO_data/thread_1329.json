{
  "question" : {
    "question_id" : 79718364,
    "title" : "How to find out which colorspace is used while going through the Operator Stream?",
    "body" : "<p>Is it possible to know the currently set <code>Stroking</code> and <code>NonStrokingColorSpace</code> when adjusting operators in an overridden <code>PDFStreamEngine.processOperator</code> method ?</p>\n<p>At the moment i am using <code>getGraphicsState().getStrokingColorSpace()</code> and <code>getGraphicsState().getNonStrokingColorSpace()</code> but is this really the right way ?</p>\n<pre><code>  protected void processOperator(Operator operator, List&lt;COSBase&gt; operands) throws IOException\n    {\n if (isStrokingColorOperator(operator)\n            &amp;&amp; !(getGraphicsState().getStrokingColorSpace() instanceof PDSeparation)) {\n            write(Operator.getOperator(OperatorName.STROKING_COLOR_GRAY), List.of(new COSFloat(0.5f)));\n        } else if (isNonStrokingColorOperator(operator)\n                   &amp;&amp; !(getGraphicsState().getNonStrokingColorSpace() instanceof PDSeparation)) {\n            write(Operator.getOperator(OperatorName.NON_STROKING_GRAY), List.of(new COSFloat(0.5f)));\n        } \n}\n</code></pre>\n<p>Just out of curiosity: What would be the ColorSpace for the Tf operator ?</p>\n<pre><code>BT\n  /F1 12 Tf\n  /cs1 cs\n  1 scn\n  1 0 0 1 100 800 Tm\n  (spot color text) Tj\nET\n</code></pre>\n",
    "tags" : [ "java", "pdfbox" ],
    "owner" : {
      "account_id" : 200794,
      "reputation" : 600,
      "user_id" : 446842,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ab939ccc63d4d61912d64a3e91f440a3?s=256&d=identicon&r=PG",
      "display_name" : "Shorty123",
      "link" : "https://stackoverflow.com/users/446842/shorty123"
    },
    "is_answered" : false,
    "view_count" : 63,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1753789189,
    "creation_date" : 1753780186,
    "link" : "https://stackoverflow.com/questions/79718364/how-to-find-out-which-colorspace-is-used-while-going-through-the-operator-stream",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140626598,
    "post_id" : 79718364,
    "body" : "<i>&quot;Just out of curiosity ...&quot;</i> - Assuming no color or color space has been set before, the specification says: <i>Initial value: DeviceGray.</i> (ISO 32000-2, Table 51 â€” Device-independent graphics state parameters)",
    "score" : 1,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97003,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1753789638,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140626573,
    "post_id" : 79718364,
    "body" : "Thanks for the quick answer.  I edited my question with a more specific example.",
    "score" : 0,
    "owner" : {
      "account_id" : 200794,
      "reputation" : 600,
      "user_id" : 446842,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ab939ccc63d4d61912d64a3e91f440a3?s=256&d=identicon&r=PG",
      "display_name" : "Shorty123",
      "link" : "https://stackoverflow.com/users/446842/shorty123"
    },
    "creation_date" : 1753789053,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140626282,
    "post_id" : 79718364,
    "body" : "If all the required operations have been registered (the PDFBox stream engine allows you to register only a subset if only a subset is needed for some task), that should be the right way. Of course there may be bugs... ;)",
    "score" : 1,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97003,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1753781826,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}