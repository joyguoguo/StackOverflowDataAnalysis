{
  "question" : {
    "question_id" : 79781409,
    "title" : "IndexOutOfBoundsException when scrolling to end of RecyclerView",
    "body" : "<p>I'm new to Android development and have tried to implement a SearchView alongside a RecyclerView to display and filter restaurants. However, when I scroll down to the bottom of the listed restaurants, the app crashes with the exception</p>\n<pre><code>java.lang.IndexOutOfBoundsException: Index: 4, Size: 4\n    at java.util.ArrayList.get(ArrayList.java:437)\n    at com.example.myprogram.SearchAdapter.onBindViewHolder(SearchAdapter.java:37)\n    at com.example.myprogram.SearchAdapter.onBindViewHolder(SearchAdapter.java:15)\n    at androidx.recyclerview.widget.RecyclerView$Adapter.onBindViewHolder(RecyclerView.java:7065)\n    at androidx.recyclerview.widget.RecyclerView$Adapter.bindViewHolder(RecyclerView.java:7107)\n    at androidx.recyclerview.widget.RecyclerView$Recycler.tryBindViewHolderByDeadline(RecyclerView.java:6012)\n    at androidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline(RecyclerView.java:6279)\n    at androidx.recyclerview.widget.GapWorker.prefetchPositionWithDeadline(GapWorker.java:288)\n    at androidx.recyclerview.widget.GapWorker.flushTaskWithDeadline(GapWorker.java:345)\n    at androidx.recyclerview.widget.GapWorker.flushTasksWithDeadline(GapWorker.java:361)\n    at androidx.recyclerview.widget.GapWorker.prefetch(GapWorker.java:368)\n    at androidx.recyclerview.widget.GapWorker.run(GapWorker.java:399)\n    at android.os.Handler.handleCallback(Handler.java:938)\n    at android.os.Handler.dispatchMessage(Handler.java:99)\n    at android.os.Looper.loopOnce(Looper.java:226)\n    at android.os.Looper.loop(Looper.java:313)\n    at android.app.ActivityThread.main(ActivityThread.java:8663)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:567)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1135)\n</code></pre>\n<p>My SearchAdapter class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.myprogram;\nimport androidx.annotation.NonNull;\nimport androidx.constraintlayout.widget.ConstraintLayout;\nimport androidx.recyclerview.widget.RecyclerView;\nimport android.content.Context;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.TextView;\nimport java.util.ArrayList;\n\npublic class SearchAdapter extends RecyclerView.Adapter&lt;SearchAdapter.SearchViewHolder&gt; {\n\n     protected ArrayList&lt;Restaurant&gt; searchList = new ArrayList&lt;Restaurant&gt;();\n    Context context;\n\n    public SearchAdapter(ArrayList&lt;Restaurant&gt; searchList, Context context) {\n        this.searchList = searchList;\n        this.context = context;\n    }\n\n    @NonNull\n    @Override\n    public SearchViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(context).inflate(R.layout.search_item, null, false);\n        return new SearchViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull SearchViewHolder holder, int position) {\n        holder.search_title.setText(searchList.get(position).getName());\n        holder.search_desc.setText(searchList.get(position).getDescription());\n        holder.searchViewImage.setImageDrawable(searchList.get(position).getImage());\n    }\n   \n    public void setFilteredList(ArrayList&lt;Restaurant&gt; filteredList){\n        this.searchList = filteredList;\n        notifyDataSetChanged();\n    }\n\n    @Override\n    public int getItemCount() {\n        return AppManager.getNumOfRestaurants();\n    }\n\n    public class SearchViewHolder extends RecyclerView.ViewHolder {\n        private TextView search_title;\n        private TextView search_desc;\n        private ConstraintLayout rowItem;\n        private ImageView searchViewImage;\n\n        public SearchViewHolder(@NonNull View itemView) {\n            super(itemView);\n            search_title = itemView.findViewById(R.id.visibleSearchTitle);\n            search_desc = itemView.findViewById(R.id.searchDescription);\n            this.searchViewImage = itemView.findViewById(R.id.searchListImage);\n        }\n    }\n}\n</code></pre>\n<p>My Search activity</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.myprogram;\n\nimport android.content.res.Resources;\nimport android.graphics.drawable.Drawable;\nimport android.os.Bundle;\nimport android.widget.Toast;\nimport androidx.activity.EdgeToEdge;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.SearchView;\nimport androidx.core.content.res.ResourcesCompat;\nimport androidx.recyclerview.widget.DefaultItemAnimator;\nimport androidx.recyclerview.widget.DividerItemDecoration;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport java.util.ArrayList;\n\npublic class Search extends AppCompatActivity {\n\n    protected ArrayList&lt;Restaurant&gt; searchList;\n    protected RecyclerView searchRecyclerView;\n    protected SearchView searchBar;\n    SearchAdapter searchAdapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this);\n        setContentView(R.layout.searchpage);\n        searchRecyclerView = findViewById(R.id.search_list);\n        searchRecyclerView.setItemAnimator(new DefaultItemAnimator());\n        searchRecyclerView.addItemDecoration(new DividerItemDecoration(this, LinearLayoutManager.VERTICAL));\n        searchList = new ArrayList&lt;Restaurant&gt;();\n        searchList.add(new Restaurant(&quot;McDonald's&quot;, &quot;I love McDonald's&quot;, ResourcesCompat.getDrawable(getResources(), R.drawable.testimage2, null)));\n        searchList.add(new Restaurant(&quot;Burger King&quot;, &quot;I love whoppers&quot;, ResourcesCompat.getDrawable(getResources(), R.drawable.testimage2, null)));\n        searchList.add(new Restaurant(&quot;KFC&quot;, &quot;I love KFC&quot;, ResourcesCompat.getDrawable(getResources(), R.drawable.testimage2, null)));\n        searchList.add(new Restaurant(&quot;Popeye's&quot;, &quot;I love Popeyes&quot;, ResourcesCompat.getDrawable(getResources(), R.drawable.testimage2, null)));\n        searchAdapter = new SearchAdapter(searchList, Search.this);\n        searchAdapter.notifyDataSetChanged();\n        searchRecyclerView.setLayoutManager(new LinearLayoutManager(this));\n        searchRecyclerView.setAdapter(searchAdapter);\n        searchBar = findViewById(R.id.search_bar);\n        searchBar.clearFocus();\n\n        searchBar.setOnQueryTextListener(new SearchView.OnQueryTextListener() {\n\n            @Override\n            public boolean onQueryTextSubmit(String query) {\n                return false;\n            }\n\n            @Override\n            public boolean onQueryTextChange(String newText) {\n                filterSearch(newText);\n                return true;\n            }\n        });\n    }\n\n    private void filterSearch(String filter) {\n        ArrayList&lt;Restaurant&gt; filterSearch = new ArrayList&lt;Restaurant&gt;();\n        for (Restaurant restaurant : searchList){\n            if (restaurant.getName().toLowerCase().contains(filter.toLowerCase())){\n                filterSearch.add(restaurant);\n            }\n        }\n        if (filterSearch.isEmpty()){\n            Toast.makeText(this, &quot;No restaurants found&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else{\n            searchAdapter.setFilteredList(filterSearch);\n        }\n    }\n}\n</code></pre>\n<p>Please let me know what the issue is! Any help would be much appreciated.</p>\n",
    "tags" : [ "java", "android", "android-recyclerview", "searchview" ],
    "owner" : {
      "account_id" : 43828404,
      "reputation" : 17,
      "user_id" : 31437107,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e066c4c6ab11a24e1953f9f5f05c2b04?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "999",
      "link" : "https://stackoverflow.com/users/31437107/999"
    },
    "is_answered" : true,
    "view_count" : 100,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1759497415,
    "creation_date" : 1759458353,
    "link" : "https://stackoverflow.com/questions/79781409/indexoutofboundsexception-when-scrolling-to-end-of-recyclerview",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79781513,
    "question_id" : 79781409,
    "body" : "<pre><code>@Override\npublic int getItemCount() {\n    return AppManager.getNumOfRestaurants(); // ❌ wrong\n}\n</code></pre>\n<p>Always return the size of the list you are binding from:</p>\n<pre><code>@Override\npublic int getItemCount() {\n    return searchList.size(); // ✔️ correct\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 18000638,
      "reputation" : 1040,
      "user_id" : 13082664,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2fwhAuvM.webp?s=256",
      "display_name" : "Meet",
      "link" : "https://stackoverflow.com/users/13082664/meet"
    },
    "creation_date" : 1759475354,
    "last_activity_date" : 1759475354,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79781809,
    "question_id" : 79781409,
    "body" : "<p>The</p>\n<p><code>java.lang.IndexOutOfBoundsException: Index: 4, Size: 4</code></p>\n<p>error you're encountering when scrolling your RecyclerView indicates that you are trying to access an element at index 4 in a list that only has 4 elements.</p>\n<p>In Java (and many other programming languages), lists are 0-indexed. This means that if a list has N elements, the valid indices range from 0 to N-1.</p>\n<p>Let's break down your specific error:</p>\n<ul>\n<li><p>Index: 4: This is the index you are trying to access.</p>\n</li>\n<li><p>Size: 4: This is the actual number of elements in the list.</p>\n</li>\n</ul>\n<p>Since the list has 4 elements, the valid indices are</p>\n<p><code>0, 1, 2, 3</code></p>\n<p>Attempting to access index 4 goes beyond the bounds of the list, hence the IndexOutOfBoundsException.</p>\n<p>To Solve this you have to pass correct data count of list, from where you are fetching the data.<br />\njust Change you codebase from below method and try Again.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic int getItemCount() {\n    return searchList.size();\n}\n</code></pre>\n<p>let me know if its not working.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10927511,
      "reputation" : 3218,
      "user_id" : 8031784,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ikcJL.png?s=256",
      "display_name" : "Aniruddh Parihar",
      "link" : "https://stackoverflow.com/users/8031784/aniruddh-parihar"
    },
    "creation_date" : 1759497415,
    "last_activity_date" : 1759497415,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140881248,
    "post_id" : 79781409,
    "body" : "Yes,  Marcel, and Robert are both correct, in your &quot;onBindViewHolder&quot;, DO NOT USE the &quot;position&quot; supplied,  use &quot;getAbsolutePosition()&quot;",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 7,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764589042,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140774550,
    "post_id" : 79781409,
    "body" : "Hello 999, welcome, apparently, in the <b>onBindViewHolder()</b> method of the <i>Search</i> class, the <b>position</b> parameter is incorrect.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1759464716,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140774513,
    "post_id" : 79781409,
    "body" : "Do you know what <code>IndexOutOfBoundsException</code> means? If not, have you done a web search? The stack trace shows you where it happened in your code. You try to <code>get</code> a list element that doesn&#39;t exist, i.e., you try to go before the beginning or past the end of the list. Check how you call <code>get</code>, or add an <code>if</code> to see if the list has the element you want, comparing list size and position.",
    "score" : 0,
    "owner" : {
      "account_id" : 1535561,
      "reputation" : 9056,
      "user_id" : 1431720,
      "user_type" : "registered",
      "accept_rate" : 89,
      "profile_image" : "https://www.gravatar.com/avatar/f5a1388d4d3b2bf03b11bb5658c68c29?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/1431720/robert"
    },
    "creation_date" : 1759461025,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79781513" : [ {
      "comment_id" : 140775384,
      "post_id" : 79781513,
      "body" : "Thank you so much! This segment is part of a broader program, but I created searchList as a means of testing the SearchView filtering, and overlooked changing this.",
      "score" : 0,
      "owner" : {
        "account_id" : 43828404,
        "reputation" : 17,
        "user_id" : 31437107,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/e066c4c6ab11a24e1953f9f5f05c2b04?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "999",
        "link" : "https://stackoverflow.com/users/31437107/999"
      },
      "creation_date" : 1759498412,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}