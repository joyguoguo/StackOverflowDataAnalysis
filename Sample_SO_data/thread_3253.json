{
  "question" : {
    "question_id" : 79561923,
    "title" : "Sending List of Integers in spring boot oracle select",
    "body" : "<p>When trying to send a list of integers in my springboot oracle select, it doesn't work. I tried to send a string separated by commas like it is in my example below but it still doesnt work, but when i execute it in toad oracle, works perfectly. The problem is in my orgCjelineIds and vrstaPoslaIds.Also when i send null, it breaks with expected number, got binary.</p>\n<p>My service:</p>\n<pre><code>public List&lt;UruPoDjelatniku&gt; URUpoDjelatnicima( String datumOdUnos,\n                                                    String datumDoUnos,\n                                                    String datumOdSystem,\n                                                    String datumDoSystem,\n                                                    String orgCjelineIds,\n                                                    String vrstaPoslaIds) {\n        System.out.println(vrstaPoslaIds);\n        return RptWisReportiRepository.URUpoDjelatnicima( datumOdUnos, datumDoUnos,datumOdSystem,datumDoSystem,orgCjelineIds,vrstaPoslaIds);\n</code></pre>\n<p>my repo:</p>\n<pre><code> @Query(nativeQuery = true, value =\n            &quot; SELECT \\n&quot; +\n            &quot;    ip.ZAPOSLENIK_HR_ID HR_ID,\\n&quot; +\n            &quot;    ip.ZAPOSLENIK_NAZIV,\\n&quot; +\n            &quot;     decode(ip.uloga, 1, 'Administrator', 2, 'Realizator') ULOGA,\\n&quot; +\n            &quot;    vp.NAZIV AS VRSTA_POSLA,\\n&quot; +\n            &quot;    oc.NAZIV AS ORG_CJELINA,\\n&quot; +\n            &quot;    COUNT(*) AS BROJ_POSLOVA,\\n&quot; +\n            &quot;    ROUND(AVG(ip.DATUM_ZAVRSETKA_UNOS - ip.DATUM_POCETKA), 2)*24 AS AVG_TRAJANJE_UNOS_H,\\n&quot; +\n            &quot;    ROUND(AVG(ip.DATUM_ZAVRSETKA_SYSTEM - ip.DATUM_POCETKA), 2)*24 AS AVG_TRAJANJE_SYSTEM_H,\\n&quot; +\n            &quot;    CASE\\n&quot; +\n            &quot;        WHEN ip.vposla_id = 10 THEN -- uključenja\\n&quot; +\n            &quot;            ROUND(\\n&quot; +\n            &quot;                (COUNT(CASE WHEN (ip.DATUM_ZAVRSETKA_UNOS - ip.DATUM_POCETKA) &lt;= 7 THEN 1 ELSE NULL END) / \\n&quot; +\n            &quot;                COUNT(*)) * 100, 2\\n&quot; +\n            &quot;            )\\n&quot; +\n            &quot;        ELSE NULL\\n&quot; +\n            &quot;    END AS POSTOTAK_U_NORMI_UKLJ_UNOS,\\n&quot; +\n            &quot;    CASE\\n&quot; +\n            &quot;        WHEN ip.vposla_id = 70 THEN -- smetnje\\n&quot; +\n            &quot;            ROUND(\\n&quot; +\n            &quot;                (COUNT(CASE WHEN (ip.DATUM_ZAVRSETKA_UNOS - ip.DATUM_POCETKA) &lt;= 2 THEN 1 ELSE NULL END) / \\n&quot; +\n            &quot;                COUNT(*)) * 100, 2\\n&quot; +\n            &quot;            )\\n&quot; +\n            &quot;        ELSE NULL\\n&quot; +\n            &quot;    END AS POSTOTAK_U_NORMI_SME_UNOS,\\n&quot; +\n            &quot;    CASE\\n&quot; +\n            &quot;        WHEN ip.vposla_id = 10 THEN -- uključenja\\n&quot; +\n            &quot;            ROUND(\\n&quot; +\n            &quot;                (COUNT(CASE WHEN (ip.DATUM_ZAVRSETKA_SYSTEM - ip.DATUM_POCETKA) &lt;= 7 THEN 1 ELSE NULL END) / \\n&quot; +\n            &quot;                COUNT(*)) * 100, 2\\n&quot; +\n            &quot;            )\\n&quot; +\n            &quot;        ELSE NULL\\n&quot; +\n            &quot;    END AS POSTOTAK_U_NORMI_UKLJ_SYSTEM,\\n&quot; +\n            &quot;    CASE\\n&quot; +\n            &quot;        WHEN ip.vposla_id = 70 THEN -- smetnje\\n&quot; +\n            &quot;            ROUND(\\n&quot; +\n            &quot;                (COUNT(CASE WHEN (ip.DATUM_ZAVRSETKA_SYSTEM - ip.DATUM_POCETKA) &lt;= 2 THEN 1 ELSE NULL END) / \\n&quot; +\n            &quot;                COUNT(*)) * 100, 2\\n&quot; +\n            &quot;            )\\n&quot; +\n            &quot;        ELSE NULL\\n&quot; +\n            &quot;    END AS POSTOTAK_U_NORMI_SME_SYSTEM\\n&quot; +\n            &quot; FROM \\n&quot; +\n            &quot;    izvrseni_poslovi ip\\n&quot; +\n            &quot; JOIN \\n&quot; +\n            &quot;    vrste_poslova vp ON ip.VPOSLA_ID = vp.VPOSLA_ID\\n&quot; +\n            &quot; LEFT JOIN\\n&quot; +\n                    &quot;    org_cjeline oc ON ip.ORG_CJELINA_ID = oc.ORG_CJELINA_ID\\n&quot; +\n                    &quot;  WHERE (:datumOdUnos IS NULL OR ip.DATUM_ZAVRSETKA_UNOS &gt;= to_date(:datumOdUnos,'DD.MM.YYYY')) \\n&quot;+\n                    &quot; AND (:datumDoUnos IS NULL OR ip.DATUM_ZAVRSETKA_UNOS &lt;= to_date(:datumDoUnos,'DD.MM.YYYY')) \\n&quot;+\n                    &quot; AND (:datumOdSystem IS NULL OR ip.DATUM_ZAVRSETKA_SYSTEM &gt;= to_date(:datumOdSystem,'DD.MM.YYYY')) &quot;+\n                    &quot; AND (:datumDoSystem IS NULL OR ip.DATUM_ZAVRSETKA_SYSTEM &lt;= to_date(:datumDoSystem,'DD.MM.YYYY')) &quot;+\n                    &quot; AND (:orgCjelineIds IS NULL  OR ip.ORG_CJELINA_ID  IN (:orgCjelineIds))\\n&quot; +\n                    &quot; AND (:vrstaPoslaIds IS NULL  OR ip.VPOSLA_ID IN (:vrstaPoslaIds))&quot; +\n            &quot; GROUP BY\\n&quot; +\n            &quot;    ip.ZAPOSLENIK_HR_ID,\\n&quot; +\n            &quot;    ip.ZAPOSLENIK_NAZIV,\\n&quot; +\n            &quot;    decode(ip.uloga, 1, 'Administrator', 2, 'Realizator'),\\n&quot; +\n            &quot;    ip.VPOSLA_ID,\\n&quot; +\n            &quot;    vp.NAZIV,\\n&quot; +\n            &quot;    ip.ORG_CJELINA_ID,\\n&quot; +\n            &quot;    oc.NAZIV\\n&quot; +\n            &quot; ORDER BY \\n&quot; +\n            &quot;    ip.ZAPOSLENIK_HR_ID, ip.ZAPOSLENIK_NAZIV, decode(ip.uloga, 1, 'Administrator', 2, 'Realizator'), vp.NAZIV&quot;)\n    List&lt;UruPoDjelatniku&gt; URUpoDjelatnicima( @Param(&quot;datumOdUnos&quot;) String datumOdUnos,\n                                             @Param(&quot;datumDoUnos&quot;) String datumDoUnos,\n                                             @Param(&quot;datumOdSystem&quot;) String datumOdSystem,\n                                             @Param(&quot;datumDoSystem&quot;) String datumDoSystem,\n                                             @Param(&quot;orgCjelineIds&quot;)   String orgCjelineIds,\n                                             @Param(&quot;vrstaPoslaIds&quot;)  String vrstaPoslaIds);\n</code></pre>\n<p>example: when i call an api like this:\nhttp://localhost:8080/api/v1/URUpoDjelatnicima?datumOdUnos=01.01.2025&amp;datumDoUnos=01.04.2025&amp;vrstaPoslaIds=998&amp;orgCjelineIds=10,20,30</p>\n<p>it breaks with ORA-01722: invalid number</p>\n<p>and when i send without 30 in my orgCjelineIds like this: http://localhost:8080/api/v1/URUpoDjelatnicima?datumOdUnos=01.01.2025&amp;datumDoUnos=01.04.2025&amp;vrstaPoslaIds=998&amp;orgCjelineIds=10,20 ... i dont get anything, but when i execute it in db it returns rows</p>\n",
    "tags" : [ "java", "sql", "oracle-database", "spring-boot" ],
    "owner" : {
      "account_id" : 20458580,
      "reputation" : 523,
      "user_id" : 15011705,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/10216235815281325/picture?type=large",
      "display_name" : "OmarLittle",
      "link" : "https://stackoverflow.com/users/15011705/omarlittle"
    },
    "is_answered" : false,
    "view_count" : 58,
    "closed_date" : 1744198994,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744134698,
    "creation_date" : 1744112767,
    "link" : "https://stackoverflow.com/questions/79561923/sending-list-of-integers-in-spring-boot-oracle-select",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140313091,
    "post_id" : 79561923,
    "body" : "What people are saying here is: change &gt; <code>@Param(&quot;orgCjelineIds&quot;)   String orgCjelineIds</code> to <code>@Param(&quot;orgCjelineIds&quot;)   List&lt;String|Long&gt; orgCjelineIds</code> <code>[String or Long]</code> based on the database type.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1744135516,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140313074,
    "post_id" : 79561923,
    "body" : "Are you converting the collection of numbers to a string? It needs to be a collection.",
    "score" : 0,
    "owner" : {
      "account_id" : 318670,
      "reputation" : 16467,
      "user_id" : 636009,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIQJV.jpg?s=256",
      "display_name" : "David Conrad",
      "link" : "https://stackoverflow.com/users/636009/david-conrad"
    },
    "creation_date" : 1744135175,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140311606,
    "post_id" : 79561923,
    "body" : "okay, but if i pass a collection of numbers it comes in a form like [1,2,3] and it breaks in the oracle query",
    "score" : 0,
    "owner" : {
      "account_id" : 20458580,
      "reputation" : 523,
      "user_id" : 15011705,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/10216235815281325/picture?type=large",
      "display_name" : "OmarLittle",
      "link" : "https://stackoverflow.com/users/15011705/omarlittle"
    },
    "creation_date" : 1744113889,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140311605,
    "post_id" : 79561923,
    "body" : "<code>ip.ORG_CJELINA_ID  IN (:orgCjelineIds)</code> That&#39;s not going to work. Your comma separated list is considered to be a single value. This is a very common mistake. Did you not search before posting this question?",
    "score" : 1,
    "owner" : {
      "account_id" : 2485939,
      "reputation" : 20969,
      "user_id" : 2164365,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/RKSgV.png?s=256",
      "display_name" : "Abra",
      "link" : "https://stackoverflow.com/users/2164365/abra"
    },
    "creation_date" : 1744113886,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140311586,
    "post_id" : 79561923,
    "body" : "If you want to use an <code>IN</code> clause you need to pass a collection of numbers, not a formatted string of numbers.",
    "score" : 4,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1744113593,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}