{
  "question" : {
    "question_id" : 79818233,
    "title" : "How to convert recyclerview items along with other layout data to bitmap",
    "body" : "<p>when capturing the layout to a Bitmap, the <strong>non-RecyclerView</strong> parts of my layout appear correctly, but the <strong>RecyclerView content is missing</strong>,\nHow can I correctly convert a layout containing a RecyclerView (with all items visible) into a single bitmap image in Android (Java)?\nI need the final image to include all visible and off-screen RecyclerView items along with other layout data.</p>\n<p>java</p>\n<pre><code>private void data()\n    {\n        if (NetworkCheck.getInstance(this.getApplicationContext()).isOnline()) {\n            DatabaseReference reference = FirebaseDatabase.getInstance().getReference().child(PendingBill).child(BillID).child(&quot;Items&quot;);\n\n            FirebaseRecyclerOptions&lt;BillItem&gt; options = new FirebaseRecyclerOptions.Builder&lt;BillItem&gt;()\n                    .setQuery(reference.orderByChild(&quot;billID&quot;).equalTo(BillID), BillItem.class)\n                    .build();\n            FirebaseRecyclerAdapter&lt;BillItem, BillViewHolder&gt; adapter =\n                    new FirebaseRecyclerAdapter&lt;BillItem, BillViewHolder&gt;(options) {\n\n                        @Override\n                        protected void onBindViewHolder(@NonNull BillViewHolder holder, int position, @NonNull final BillItem model) {\n\n                            Integer Countcal, TotalCal, PriceCal;\n                            Countcal=model.getCount();\n                            PriceCal=model.getItemTotal();\n                            TotalCal=Countcal*PriceCal;\n                            String CountcalStr= String.valueOf(Countcal),TotalCalStr= String.valueOf(TotalCal);\n\n                            holder.proName.setText(model.getProductName());\n                            holder.proRate.setText(model.getItemTotal().toString());\n                            holder.proCount.setText(CountcalStr);\n                            holder.proTotal.setText(TotalCalStr);\n                            holder.itemView.setOnClickListener(new View.OnClickListener() {\n                                @Override\n                                public void onClick(View view) {\n                                   Share();\n                                }\n\n                            });\n\n                        }\n                        @NonNull\n                        @Override\n                        public BillViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n                            View view = LayoutInflater.from(viewGroup.getContext()).inflate(R.layout.item_list, viewGroup, false);\n                            BillViewHolder holder = new BillViewHolder(view);\n                            return holder;\n                        }\n\n                        @Override\n                        public void onDataChanged() {\n\n                            // jprog.setVisibility(getItemCount() == 0 ? View.VISIBLE : View.GONE);\n                            prog.setVisibility(View.GONE);\n                        }                        };\n\n            recyclerview.setAdapter(adapter);\n            adapter.startListening();\n            adapter.notifyDataSetChanged();\n\n        } else {\n            Toast.makeText(this, &quot;Oops.. Internet is not connected please Establish it First&quot;, Toast.LENGTH_LONG).show();\n\n        }\n    }\n  private void Share( Bitmap h) {\n\n        // Measure and layout the view\n        int widthSpec = View.MeasureSpec.makeMeasureSpec(1080, View.MeasureSpec.EXACTLY);\n        int heightSpec = View.MeasureSpec.makeMeasureSpec(1920, View.MeasureSpec.AT_MOST);\n        billView.measure(widthSpec, heightSpec);\n        billView.layout(0, 0, billView.getMeasuredWidth(), billView.getMeasuredHeight());\n\n        // Convert to bitmap\n        Bitmap bitmap = Bitmap.createBitmap(billView.getMeasuredWidth(), billView.getMeasuredHeight(), Bitmap.Config.ARGB_8888);\n        Canvas canvas = new Canvas(bitmap);\n        billView.draw(canvas);\n\n// Save bitmap as image file (PNG or JPEG)\n        try {\n            File imagesDir = new File(Environment.getExternalStoragePublicDirectory(\n                    Environment.DIRECTORY_PICTURES).toString() + File.separator + &quot;MyBill&quot;);\n\n            if (!imagesDir.exists())\n                imagesDir.mkdir();\n\n            imageFile = new File(imagesDir, &quot;Invoice&quot; + &quot;.png&quot;);\n            FileOutputStream outputStream = new FileOutputStream(imageFile);\n            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outputStream);\n            outputStream.flush();\n            outputStream.close();\n\n            Toast.makeText(this, &quot;Invoice image saved!&quot;, Toast.LENGTH_SHORT).show();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n            Toast.makeText(this, &quot;Error saving image!&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>output image(textview random data)\n<a href=\"https://i.sstatic.net/pENv7jfg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pENv7jfg.png\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "android", "android-recyclerview", "bitmap" ],
    "owner" : {
      "account_id" : 14931065,
      "reputation" : 133,
      "user_id" : 10780453,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JW3XQ.jpg?s=256",
      "display_name" : "Sathishkumar G",
      "link" : "https://stackoverflow.com/users/10780453/sathishkumar-g"
    },
    "is_answered" : true,
    "view_count" : 54,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1762987762,
    "creation_date" : 1762979930,
    "link" : "https://stackoverflow.com/questions/79818233/how-to-convert-recyclerview-items-along-with-other-layout-data-to-bitmap",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79818298,
    "question_id" : 79818233,
    "body" : "<p>So the best way I've found is to redraw it to a non recylcerview Layout for converting to bitmap or pdf or printing.</p>\n<p>The problem is you have fixed your bitmap size a width and height, you then give the recyclerview the same width and a maximum height before items will be off screen and not drawn.</p>\n<p>If you have more items than will fit in this fixed height they won't be drawn by a recyclerview.</p>\n<p>You are also adjusting the same Layout you are using for drawing out screen to a different non screen size, it is best to create a new Layout specifically for display to a bitmap and not re-use the view your are displaying on the screen otherwise you most likely will have problems.</p>\n<p>Thus your layout needs measuring with ` View.MeasureSpec.UNSPECIFIED` for the height mesureSpec to allow it to get as tall as it needs to display all items.</p>\n<p>You could draw the items to a new recyclerview for &quot;off screen&quot; drawing but the additional complexity and benefits of a recyclerview of are wasted when you are drawing all the items, thus it is easier to draw to a plain LinearLayout.</p>\n<p>With a LinearLayout you can also easily measure individual items adding them as you go, so you can create a new bitmap when the list gets too longer. This make is very easy to create multiple page invoices.<br />\nCreating multiple page invoices is a must if the invoices are going to be printed out.</p>\n<p>As an example here <a href=\"https://github.com/Zardozz/RecyclerviewPdf/tree/master\" rel=\"nofollow noreferrer\">https://github.com/Zardozz/RecyclerviewPdf/tree/master</a> is demo app that draws to an &quot;off screen&quot; LinearLayout which works out when a new page is needed.</p>\n<p>While this final output of this demo is a PDF file, the concept is the same as for Bitmap in that you need to know the full height of all items using ` View.MeasureSpec.UNSPECIFIED` before your create the Bitmap or PDF page, or if you want to limit your individual bitmap or pdf page size then you need to create the items individually and work out when you need a new Bitmap of PDF Page.</p>\n<p>Note that all this drawing really needs to be done in the background to stop it freezing the UI.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 2755641,
      "reputation" : 10500,
      "user_id" : 2373819,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0f0e9ea83d9ea1bbebd5488d1ad06f2b?s=256&d=identicon&r=PG",
      "display_name" : "Andrew",
      "link" : "https://stackoverflow.com/users/2373819/andrew"
    },
    "creation_date" : 1762986944,
    "last_activity_date" : 1762987762,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}