{
  "question" : {
    "question_id" : 79761234,
    "title" : "CreateProcess error=2, The system cannot find the file specified for ProcessBuilder even when setting working dir",
    "body" : "<p>I have a simple exe file in path <code>D:\\this\\is\\my\\path</code> which is what i'm putting to my processbuilder i.e</p>\n<pre class=\"lang-java prettyprint-override\"><code>        ProcessBuilder builder = new ProcessBuilder();\n        builder.directory(new File(myPath)); // myPath = D:\\this\\is\\my\\path\n        builder.command().add(&quot;simple.exe&quot;);\n        builder.inheritIO();\n        System.out.println(builder.command());\n        builder.start();\n</code></pre>\n<p>but when i run it i keeps giving me this exception</p>\n<pre><code>Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\n    at java.base/java.lang.ProcessImpl.create(Native Method)\n    at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:485)\n    at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:146)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1076)\n    ... 70 more\n</code></pre>\n<p>from other question's <a href=\"https://stackoverflow.com/questions/19621838/createprocess-error-2-the-system-cannot-find-the-file-specified\">like these</a> it says that <code>directory</code> only changes working dir and does not help in finding the exe, but my exe is in the working dir, shouldn't java or Process builder find it?</p>\n<p>obviously giving the full path in the command works, but shouldn't it work without it, as exe is relative to working dir?</p>\n<p>what's the issue here? why is it giving me this error?</p>\n",
    "tags" : [ "java", "processbuilder", "ioexception" ],
    "owner" : {
      "account_id" : 15069196,
      "reputation" : 802,
      "user_id" : 10875311,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/TLHjd.jpg?s=256",
      "display_name" : "Akash Jain",
      "link" : "https://stackoverflow.com/users/10875311/akash-jain"
    },
    "is_answered" : true,
    "view_count" : 65,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1757535512,
    "creation_date" : 1757533310,
    "link" : "https://stackoverflow.com/questions/79761234/createprocess-error-2-the-system-cannot-find-the-file-specified-for-processbuil",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79761241,
    "question_id" : 79761234,
    "body" : "<blockquote>\n<p>from other question's <a href=\"https://stackoverflow.com/questions/19621838/createprocess-error-2-the-system-cannot-find-the-file-specified\">like these</a> it says that directory only changes working dir and does not help in finding the exe</p>\n</blockquote>\n<p>That is correct.  To elaborate on that, it sets the working directory of the new process, not of the calling process.</p>\n<blockquote>\n<p>but my exe is in the working dir, shouldn't java or Process builder find it?</p>\n</blockquote>\n<p>No.  <code>ProcessBuilder.directory()</code> sets the working directory used by the new process once it starts running.  It does not set the working directory used by the calling process to <em>find</em> the EXE file that will start the new process.  Two different things.</p>\n<blockquote>\n<p>obviously giving the full path in the command works</p>\n</blockquote>\n<p>Correct. The working directory of the calling process will be used to find the EXE unless you specify the EXE's full path, eg:</p>\n<pre class=\"lang-java prettyprint-override\"><code>builder.command().add(myPath + &quot;\\\\simple.exe&quot;);\n</code></pre>\n<p>Or:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File exeFile = new File(myPath, &quot;simple.exe&quot;);\nbuilder.command().add(exeFile.getCanonicalPath());\n</code></pre>\n<blockquote>\n<p>but shouldn't it work without it, as exe is relative to working dir?</p>\n</blockquote>\n<p>No. It is searched for relative to the working directory of the calling process, not the working directory of the new process.</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 25589,
      "reputation" : 609463,
      "user_id" : 65863,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=256&d=identicon&r=PG",
      "display_name" : "Remy Lebeau",
      "link" : "https://stackoverflow.com/users/65863/remy-lebeau"
    },
    "creation_date" : 1757533613,
    "last_activity_date" : 1757535512,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79761241" : [ {
      "comment_id" : 140727679,
      "post_id" : 79761241,
      "body" : "@AkashJain &quot;<i>the exe is going to run in the calling process dir</i>&quot; - no, it will run in the directory it is found in. But the calling process&#39; working directory is used to <i>find</i> the EXE in order to then run it. &quot;<i>but output&#39;s in the working dir?</i>&quot; - in the working directory you specify in the <code>ProcessBuilder</code>, yes.",
      "score" : 1,
      "owner" : {
        "account_id" : 25589,
        "reputation" : 609463,
        "user_id" : 65863,
        "user_type" : "registered",
        "accept_rate" : 75,
        "profile_image" : "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=256&d=identicon&r=PG",
        "display_name" : "Remy Lebeau",
        "link" : "https://stackoverflow.com/users/65863/remy-lebeau"
      },
      "creation_date" : 1757535232,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140727666,
      "post_id" : 79761241,
      "body" : "so if my understanding is clear, the exe is going to run in the calling process dir but output&#39;s in the working dir? or does it run&#39;s in working dir but searches exe from the calling process dir?",
      "score" : 0,
      "owner" : {
        "account_id" : 15069196,
        "reputation" : 802,
        "user_id" : 10875311,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/TLHjd.jpg?s=256",
        "display_name" : "Akash Jain",
        "link" : "https://stackoverflow.com/users/10875311/akash-jain"
      },
      "creation_date" : 1757534588,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}