{
  "question" : {
    "question_id" : 79767738,
    "title" : "Migration to playframework 3.0 - Error while emitting Routes.scala",
    "body" : "<p>I try to migrate old playframework 2.8 to 3.0.8 (jdk 11 -&gt; jdk 21).\nAnd when try to compile: <code>./sbt clean compile</code> see this error:</p>\n<pre><code>[error] Error while emitting Routes.scala\n[error] assertion failed: bad position: [811:784]\n[error] Error while emitting Routes.scala\n[error] assertion failed: ClassBType.info not yet assigned: Lcontrollers/xyz/UserController;\n[warn] two warnings found\n[error] two errors found\n[error] (Compile / compileIncremental) Compilation failed\n[error] Total time: 36 s, completed 17 Sept 2025, 21:05:07\n</code></pre>\n<p>I have no idea what is it, and where is a problem, I try to revert changes, but still can not compile.\nSometimes I see this:\n<code>[warn] This is likely due to an implementation restriction: an annotation argument cannot refer to a member of the annotated class (scala/bug#7014).</code></p>\n<p>This is the ticket - <a href=\"https://github.com/scala/bug/issues/7014\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/7014</a>\nbut it does not help.</p>\n<p>Any idea, what could be wrong, or how can I find where is a problem? Some more meaning logs?</p>\n",
    "tags" : [ "java", "playframework", "sbt", "playframework-3.0" ],
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "is_answered" : true,
    "view_count" : 90,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1758726544,
    "creation_date" : 1758136299,
    "link" : "https://stackoverflow.com/questions/79767738/migration-to-playframework-3-0-error-while-emitting-routes-scala",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79773900,
    "question_id" : 79767738,
    "body" : "<p>I found what was the issue.<br />\nThis controller: <code>controllers/xyz/UserController;</code>  in the constructor has ~ 10 service classes. I was removing them 1 by 1 and trying to compile. When the problem disappear and I saw normal compilation error, I found that in this 1 service class is missing import from jetbrains lib:</p>\n<pre><code>&quot;org.jetbrains&quot; % &quot;annotations&quot; % &quot;23.0.0&quot;,\n</code></pre>\n<p>after adding this, problem disappear. Adding comment, maybe someone will have similar problem.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "creation_date" : 1758726544,
    "last_activity_date" : 1758726544,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140752293,
    "post_id" : 79767738,
    "body" : "ok, when the class: <code>controllers&#47;xyz&#47;UserController</code> is commented out from routes, I see normal (expected) errors, not related to <code>Error while emitting Routes.scala</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "creation_date" : 1758552199,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140751915,
    "post_id" : 79767738,
    "body" : "I can not share the code, it does not belong to me. I will try to remove dependency and play a bit. But the main question is, how can I check/debug/log why and where it is failing on <code>emitting Routes.scala</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "creation_date" : 1758541985,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140748083,
    "post_id" : 79767738,
    "body" : "Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is hard to guess. I suggest to start upgrading dependencies one by one without skipping versions to find at which point you get that error. If you are able to create a public git repo, it could also be useful to help you",
    "score" : 2,
    "owner" : {
      "account_id" : 9727861,
      "reputation" : 3841,
      "user_id" : 7214091,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-xe-rKubDCeg/AAAAAAAAAAI/AAAAAAAAALQ/OmUxxZwJndU/s256-rj/photo.jpg",
      "display_name" : "Gast&#243;n Schabas",
      "link" : "https://stackoverflow.com/users/7214091/gast%c3%b3n-schabas"
    },
    "creation_date" : 1758311359,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747446,
    "post_id" : 79767738,
    "body" : "I was able to migrate 2 services, with this I see this weird issue. And problem is that, This message does not point me what exactly is wrong (or I can not read it properly) :|",
    "score" : 0,
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "creation_date" : 1758291032,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747376,
    "post_id" : 79767738,
    "body" : "Go from jdk 11 to 21, and from play 2.8 to 3.0 could not be the best approach. Have you tried baby steps to be sure there si no issue upgrading dependencies? Not sure which scala version you are using, but I hope it&#39;s at least 2.13. Doing <code>sbt clean compile</code> should solve most of your problems, but if you think there is a cache issue, you could try to build the project in a fresh container",
    "score" : 1,
    "owner" : {
      "account_id" : 9727861,
      "reputation" : 3841,
      "user_id" : 7214091,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-xe-rKubDCeg/AAAAAAAAAAI/AAAAAAAAALQ/OmUxxZwJndU/s256-rj/photo.jpg",
      "display_name" : "Gast&#243;n Schabas",
      "link" : "https://stackoverflow.com/users/7214091/gast%c3%b3n-schabas"
    },
    "creation_date" : 1758289535,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140746545,
    "post_id" : 79767738,
    "body" : "I added this <code>scalacOptions ++= Seq(&quot;-Wconf:msg=scala&#47;bug#7014:s&quot;)</code> to m build.sbt, but this does not help.  My biggest problem is, that I have no idea what could be wrong, scala version? Dependency? Some Cache? No clue :|",
    "score" : 0,
    "owner" : {
      "account_id" : 462886,
      "reputation" : 3098,
      "user_id" : 865448,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/152023fb742facb625142611b9fa7474?s=256&d=identicon&r=PG",
      "display_name" : "tostao",
      "link" : "https://stackoverflow.com/users/865448/tostao"
    },
    "creation_date" : 1758266002,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140746237,
    "post_id" : 79767738,
    "body" : "Have you tried to add <code>-Wconf</code> or <code>@nowarn</code> as it is detailed in <a href=\"https://github.com/scala/bug/issues/7014#issuecomment-2351771903\" rel=\"nofollow noreferrer\">the comment of the issue</a>?",
    "score" : 0,
    "owner" : {
      "account_id" : 9727861,
      "reputation" : 3841,
      "user_id" : 7214091,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-xe-rKubDCeg/AAAAAAAAAAI/AAAAAAAAALQ/OmUxxZwJndU/s256-rj/photo.jpg",
      "display_name" : "Gast&#243;n Schabas",
      "link" : "https://stackoverflow.com/users/7214091/gast%c3%b3n-schabas"
    },
    "creation_date" : 1758252448,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}