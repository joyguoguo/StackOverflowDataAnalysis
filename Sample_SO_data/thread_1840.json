{
  "question" : {
    "question_id" : 79671047,
    "title" : "How to override a varargs java method in a scala class which is still callable in both scala and java variadically?",
    "body" : "<p>Assume there is a base class in a Java library which cannot be modified</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class BaseClass {\n    public Something function(int... args){ ... }\n}\n</code></pre>\n<p>Typically, this would be overridden in Scala by using the Scala varargs syntax:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>class TypicalScalaVarargsOverrideClass extends BaseClass {\n  override def function(args: Int*): Something = { ... }\n}\n</code></pre>\n<p>But if <code>TypicalScalaVarargsOverrideClass.function</code> is invoked in Java code, a no suitable method error is raised:</p>\n<pre><code>// no args\nno suitable method found for function(no arguments)\n    method TypicalScalaVarargsOverrideClass.function(scala.collection.Seq&lt;java.lang.Object&gt;) is not applicable\n      (actual and formal argument lists differ in length)\n    method TypicalScalaVarargsOverrideClass.function(int[]) is not applicable\n      (actual and formal argument lists differ in length)\n\n// 1 arg\nno suitable method found for function(int)\n    method TypicalScalaVarargsOverrideClass.function(scala.collection.Seq&lt;java.lang.Object&gt;) is not applicable\n      (argument mismatch; int cannot be converted to scala.collection.Seq&lt;java.lang.Object&gt;)\n    method TypicalScalaVarargsOverrideClass.function(int[]) is not applicable\n      (argument mismatch; int cannot be converted to int[])\n\n// 3 args\nno suitable method found for function(int,int,int)\n    method TypicalScalaVarargsOverrideClass.function(scala.collection.Seq&lt;java.lang.Object&gt;) is not applicable\n      (actual and formal argument lists differ in length)\n    method TypicalScalaVarargsOverrideClass.function(int[]) is not applicable\n      (actual and formal argument lists differ in length)\n</code></pre>\n<p>Typically, the solution to this is to add <code>@varargs</code> annotation, making the bytecode generated from the Scala code compatible the Java:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>class UsingVarargsAnnotationClass extends BaseClass {\n  @varargs\n  override def function(args: Int*): Something = { ... }\n}\n</code></pre>\n<p>But this results in a double definition error, as it now collides with the original function definition:</p>\n<pre><code>double definition:\noverride def function(args: Int*): Something at line 1 and\noverride def function(args: Array[Int]): Something at line 3\nhave same type after erasure: (args: Array[Int])Something\n  override def function(args: Int*): Something = {\n</code></pre>\n<p>So is there a way, in Scala (specifically 2.12 or 2.13), to define an override of a Java varargs method which is still callable from both Scala and Java?</p>\n<p>The primary suggestion I've received is to avoid this entirely by defining the interface of the override class in Java, with the override methods making a call to some delegate function defined in Scala (there are a few ways to do that).</p>\n",
    "tags" : [ "java", "scala", "overriding", "variadic-functions", "scala-java-interop" ],
    "owner" : {
      "account_id" : 30939813,
      "reputation" : 31,
      "user_id" : 23756460,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a0f129dde6ed13eef9acc30685420b03?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ian Bertolacci",
      "link" : "https://stackoverflow.com/users/23756460/ian-bertolacci"
    },
    "is_answered" : false,
    "view_count" : 99,
    "answer_count" : 0,
    "score" : 3,
    "last_activity_date" : 1750315550,
    "creation_date" : 1750265527,
    "link" : "https://stackoverflow.com/questions/79671047/how-to-override-a-varargs-java-method-in-a-scala-class-which-is-still-callable-i",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140525735,
    "post_id" : 79671047,
    "body" : "Looks to be a known <a href=\"https://github.com/scala/bug/issues/11944\" rel=\"nofollow noreferrer\">issue</a> in Scala 2.12-13 that has no fix as this looks to be a compiler problem with regards to projecting types in Scala to Java ie the Scala Int type is projected as an Object instead of the primitive int type that&#39;s expected for the super class",
    "score" : 4,
    "owner" : {
      "account_id" : 7612010,
      "reputation" : 21,
      "user_id" : 18471032,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-DVfEl50m8KI/AAAAAAAAAAI/AAAAAAAAADk/gmX7V01d4u8/s256-rj/photo.jpg",
      "display_name" : "Adrian Legaspi",
      "link" : "https://stackoverflow.com/users/18471032/adrian-legaspi"
    },
    "creation_date" : 1750315171,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140524842,
    "post_id" : 79671047,
    "body" : "Scala does not see that function as overriding anything. Without the override, Scala does not call that function when passed variadic arguments (it calls the BaseClass method), and the variadic method is not callable at all from java.",
    "score" : 0,
    "owner" : {
      "account_id" : 30939813,
      "reputation" : 31,
      "user_id" : 23756460,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a0f129dde6ed13eef9acc30685420b03?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ian Bertolacci",
      "link" : "https://stackoverflow.com/users/23756460/ian-bertolacci"
    },
    "creation_date" : 1750273866,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140524636,
    "post_id" : 79671047,
    "body" : "Haven&#39;t tried, doesn&#39;t <code>override def function(args: Array[Int])</code> in Scala work?",
    "score" : 1,
    "owner" : {
      "account_id" : 7034556,
      "reputation" : 15907,
      "user_id" : 5389127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/391c01e15f62cee096b758c4c2815c2c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ga&#235;l J",
      "link" : "https://stackoverflow.com/users/5389127/ga%c3%abl-j"
    },
    "creation_date" : 1750269230,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}