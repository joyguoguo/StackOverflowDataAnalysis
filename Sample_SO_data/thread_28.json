{
  "question" : {
    "question_id" : 79834586,
    "title" : "How to List pdf filenames",
    "body" : "<p>I cannot get a list of files ending with .pdf, I have tried everything, it lists everything else in the folder, except for the pdf's, what is wrong with this. The program then displays the list in a<br />\nThe folder contains 29 pdf files, and 5 image files(jpg). Please don't suggest using <code>File[] fileList = directory.listFiles();</code>, been there done that, nothing works.</p>\n<p>All permissions are set, otherwise I wouldn't get the 5 image filenames</p>\n<pre><code>private void getFileList()\n{\n    fileList = new ArrayList&lt;&gt;();\n    File directory = getPDFDirectory();\n    try( DirectoryStream&lt;Path&gt; stream =\n            Files.newDirectoryStream( directory.toPath(), &quot;*.*&quot; ))\n    {\n        stream.forEach( path -&gt;\n        {\n            fileList.add( path.getFileName().toString() );\n        });\n\n        Collections.sort( fileList );\n    }\n    catch( IOException e )\n    {\n        Toast.makeText( this, &quot;Cannot read folder&quot;, Toast.LENGTH_SHORT );\n    }\n}\n</code></pre>\n<p>And for those who are curious, here is the <code>getPDFDirectory()</code> code</p>\n<pre><code>/**\n *\n * @return PDF Folder as a file\n */\n@NonNull\nprivate File getPDFDirectory()\n{\n\n    return new File( Environment\n            .getExternalStorageDirectory()\n            .getPath() + File.separatorChar +\n            &quot;Documents&quot; + File.separatorChar +\n            &quot;My App&quot; + File.separatorChar +\n            &quot;Files&quot; );\n}\n</code></pre>\n",
    "tags" : [ "java", "android", "directorystream" ],
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "is_answered" : false,
    "view_count" : 74,
    "closed_date" : 1764589663,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764593235,
    "creation_date" : 1764581886,
    "link" : "https://stackoverflow.com/questions/79834586/how-to-list-pdf-filenames",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140882199,
    "post_id" : 79834586,
    "body" : "@CommonsWare Thanks for the reply, I thought you would be asleep by now, I&#39;m &quot;down under&quot; and just got out of bed,  anyway,  thanks for all the help",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764624396,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140882190,
    "post_id" : 79834586,
    "body" : "@Roy: You have greater access to media files, even in <code>Documents&#47;</code>, than other types of files. JPEG files are considered media files; text files are not.",
    "score" : 0,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011055,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1764623963,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140882178,
    "post_id" : 79834586,
    "body" : "@CommonsWare I just thought I&#39;d add, I added five unrelated images (jpg) into the folder,  the program listed them, I renamed their extensions to text, it ceased listing them, renamed them back to jpg, went back to listing them.  I&#39;m going to do it your way, however, I suspect a bug somewhere deep in the bowels of these functions.",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764623658,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881358,
    "post_id" : 79834586,
    "body" : "@CommonsWare, again thanks for your help, I have followed you on a lot of posts, I&#39;ll look at your book,  I&#39;m not new to Android, however this one threw me,  it didn&#39;t seem logical that it would list the image files but not the pdf&#39;s or anything else for that matter",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764594111,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881352,
    "post_id" : 79834586,
    "body" : "&quot;is there a work around&quot; -- besides using the Storage Access Framework? Not really. &quot;I could implement an file opening intent, would that work ?&quot; -- if you mean what I think you mean, that is part of the Storage Access Framework (<code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code>). FWIW, I cover that in <a href=\"https://commonsware.com/Jetpack/pages/chap-content-001.html\" rel=\"nofollow noreferrer\">this chapter</a> of <a href=\"https://commonsware.com/Jetpack\" rel=\"nofollow noreferrer\">this free older book of mine</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011055,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1764593829,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881350,
    "post_id" : 79834586,
    "body" : "@CommonsWare, thanks my remark was not directed at you, unless you terminated the question, regardless, i can see now what your saying,  so is there a work around,  as those pdf&#39;s were part of the accounting stage of the program, i guess to answer my own thought,  I could implement an file opening intent,  would that work ? Also, why does it list the image files ?",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764593664,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881327,
    "post_id" : 79834586,
    "body" : "&quot;now with some upgrades and gradle changes, it will only list the image filenames&quot; -- from Android&#39;s standpoint, this is a different installation of the app. For example, perhaps you uninstalled and reinstalled it. The new app installation has no rights to files put there by the old app installation. &quot;is in no way related to the other question&quot; -- it is the same problem, in that you have no rights to access those PDF files. &quot;PLEASE READ the question&quot; -- I did. Again, please use the Storage Access Framework.",
    "score" : 0,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011055,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1764592574,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881304,
    "post_id" : 79834586,
    "body" : "As an aside, my question has been closed, marked as duplicate,  whoever did this, obviously didn&#39;t read the question, and is in no way related to the other question, or EACCES (Permission denied), PLEASE READ the question",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764591373,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881296,
    "post_id" : 79834586,
    "body" : "@g00se, thanks,  when the simple version works, I intend to do just that, however, that&#39;s not where the problem lies",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764591189,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881294,
    "post_id" : 79834586,
    "body" : "@CommonsWare,  thanks,  The app that put the image files there, is the same app that put the pdf&#39;s there,  I&#39;m now using the same app to read the filenames and list them so the user can do whatever they like with them, originally it worked, now with some upgrades and gradle changes,  it will only list the image filenames",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764591041,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881270,
    "post_id" : 79834586,
    "body" : "You&#39;re using <code>Path</code> already, so why not <code>return Path.of(Environment.getExternalStorageDirectory().getPath(),&zwnj;&#8203;&quot;Documents&quot;, &quot;My App&quot;,  &quot;Files&quot; ).toFile();</code> ?",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1764589951,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881262,
    "post_id" : 79834586,
    "body" : "Outside of some media file formats, such as images, your app has no rights to anything under <code>Documents&#47;</code> via filesystem APIs, except for files that it put there itself. Presumably, your test PDFs got into <code>Documents&#47;</code> by some other means. Instead of creating your own file-selection UI, please use the Storage Access Framework (<code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code>).",
    "score" : 0,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011055,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1764589763,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881210,
    "post_id" : 79834586,
    "body" : "@JaskaranSingh  Yep, tried that. As an update , it seems to only list &quot;jpg&quot; files as I&#39;ve added txt files, xlsx files, all sorts of files to this folder, and it will only list the &quot;jpg&#39;s&quot;, I&#39;ve even tried this.  <code>&quot;*.{jpg,pdf,xlsx,txt}&quot;</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 34207086,
      "reputation" : 9,
      "user_id" : 26443463,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c792b814f56fe0ac805876c50f9a74d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Roy",
      "link" : "https://stackoverflow.com/users/26443463/roy"
    },
    "creation_date" : 1764587317,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140881093,
    "post_id" : 79834586,
    "body" : "have yout tried adding Files.newDirectoryStream(directory.toPath(), &quot;<i>.pdf</i>&quot;) or  Files.newDirectoryStream(directory.toPath(), &quot;<i>.PDF</i>&quot;) However your pdf files are name this is case sensitive. In anddoid there are multiple ways to name a pdf. Maybe it will pickup only pdf files",
    "score" : 0,
    "owner" : {
      "account_id" : 13629047,
      "reputation" : 569,
      "user_id" : 11802889,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a0fdf5c7ac8fd4626d80e320251de4a8?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jaskaran Singh",
      "link" : "https://stackoverflow.com/users/11802889/jaskaran-singh"
    },
    "creation_date" : 1764582543,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}