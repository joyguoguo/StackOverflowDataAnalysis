{
  "question" : {
    "question_id" : 79806634,
    "title" : "Espresso.onIdle() return error java.lang.IndexOutOfBoundsException: Index: 1, Size: 1",
    "body" : "<p>After updating Kotlin to 2.2.0, my autotest started failing on the start screen with the following error in Espresso class on compose view:</p>\n<p><code>java.lang.IndexOutOfBoundsException: Index: 1, Size: 1</code></p>\n<p>However, my autotest does not use any indexing operations.\nand this issue is not related to the UI.\nI also noticed that the application now loads more slowly. As a result, the autotest begins its checks before the app is fully loaded. Previously, this wasn’t a problem—the test would pass thanks to the built-in waits.\ntext error:</p>\n<pre><code>java.lang.RuntimeException: java.util.concurrent.ExecutionException: java.lang.IndexOutOfBoundsException: Index: 1, Size: 1\nat androidx.test.espresso.Espresso.onIdle(Espresso.java:357)\nat androidx.test.espresso.Espresso.onIdle(Espresso.java:378)\nat androidx.compose.ui.test.EspressoLink_androidKt.runEspressoOnIdle(EspressoLink.android.kt:88)\nat androidx.compose.ui.test.EspressoLink.runUntilIdle(EspressoLink.android.kt:82)\nat androidx.compose.ui.test.AndroidComposeUiTestEnvironment.waitForIdle(ComposeUiTest.android.kt:596)\nat androidx.compose.ui.test.AndroidComposeUiTestEnvironment.access$waitForIdle(ComposeUiTest.android.kt:391)\nat androidx.compose.ui.test.AndroidComposeUiTestEnvironment$AndroidTestOwner.getRoots(ComposeUiTest.android.kt:822)\nat androidx.compose.ui.test.TestOwnerKt.getAllSemanticsNodes(TestOwner.kt:81)\nat androidx.compose.ui.test.SemanticsNodeInteraction.fetchSemanticsNodes$ui_test_release(SemanticsNodeInteraction.kt:64)\nat androidx.compose.ui.test.SemanticsNodeInteraction.fetchSemanticsNodes$ui_test_release$default(SemanticsNodeInteraction.kt:59)\nat androidx.compose.ui.test.AndroidAssertions_androidKt.checkIsDisplayed(AndroidAssertions.android.kt:29)\nat androidx.compose.ui.test.AssertionsKt.isDisplayed(Assertions.kt:351)\nat androidx.compose.ui.test.AssertionsKt.assertIsDisplayed(Assertions.kt:33)\nat io.github.kakaocup.compose.node.assertion.NodeAssertions$assertIsDisplayed$1.invoke(NodeAssertions.kt:13)\nat io.github.kakaocup.compose.node.assertion.NodeAssertions$assertIsDisplayed$1.invoke(NodeAssertions.kt:13)\n.......\n</code></pre>\n",
    "tags" : [ "java", "android", "kotlin", "android-espresso", "idle-processing" ],
    "owner" : {
      "account_id" : 19728656,
      "reputation" : 25,
      "user_id" : 21474826,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-qFhPq82iQO4/AAAAAAAAAAI/AAAAAAAAAfA/AMZuucl3W9BiQqC_jHz8zu-JMm5UElknoQ/s96-c/s256-rj/photo.jpg",
      "display_name" : "Red Cape",
      "link" : "https://stackoverflow.com/users/21474826/red-cape"
    },
    "is_answered" : true,
    "view_count" : 75,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1762415459,
    "creation_date" : 1762010674,
    "link" : "https://stackoverflow.com/questions/79806634/espresso-onidle-return-error-java-lang-indexoutofboundsexception-index-1-si",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79810964,
    "question_id" : 79806634,
    "body" : "<p>Upgrading the androidx-compose-foundation version to 1.10.0-beta01 actually helped. I’m not sure if the developers will allow me to use a beta version, but thank you!<br />\nDo you know if there is any article about this issue?</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 19728656,
      "reputation" : 25,
      "user_id" : 21474826,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-qFhPq82iQO4/AAAAAAAAAAI/AAAAAAAAAfA/AMZuucl3W9BiQqC_jHz8zu-JMm5UElknoQ/s96-c/s256-rj/photo.jpg",
      "display_name" : "Red Cape",
      "link" : "https://stackoverflow.com/users/21474826/red-cape"
    },
    "creation_date" : 1762415459,
    "last_activity_date" : 1762415459,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140839392,
    "post_id" : 79806634,
    "body" : "Upgrading the androidx-compose-foundation version to 1.10.0-beta01 actually helped. I’m not sure if the developers will allow me to use a beta version, but thank you!  Do you know if there is any article about this issue?",
    "score" : 0,
    "owner" : {
      "account_id" : 19728656,
      "reputation" : 25,
      "user_id" : 21474826,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-qFhPq82iQO4/AAAAAAAAAAI/AAAAAAAAAfA/AMZuucl3W9BiQqC_jHz8zu-JMm5UElknoQ/s96-c/s256-rj/photo.jpg",
      "display_name" : "Red Cape",
      "link" : "https://stackoverflow.com/users/21474826/red-cape"
    },
    "creation_date" : 1762415446,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140837257,
    "post_id" : 79806634,
    "body" : "Also, that bug fix appears to have landed in Compose Foundation 1.10.0-beta01 (source: checked manually in the IDE) so you might want to try using that version",
    "score" : 0,
    "owner" : {
      "account_id" : 9115426,
      "reputation" : 27200,
      "user_id" : 6782707,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=256&d=identicon&r=PG",
      "display_name" : "Edric",
      "link" : "https://stackoverflow.com/users/6782707/edric"
    },
    "creation_date" : 1762328901,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140837255,
    "post_id" : 79806634,
    "body" : "You could try adding the standard test dispatcher to your Compose JUnit 4 rule as mentioned in the 9th comment of that issue (i.e. <code>@get:Rule val rule = createComposeRule(StandardTestDispatcher())</code>)",
    "score" : 0,
    "owner" : {
      "account_id" : 9115426,
      "reputation" : 27200,
      "user_id" : 6782707,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=256&d=identicon&r=PG",
      "display_name" : "Edric",
      "link" : "https://stackoverflow.com/users/6782707/edric"
    },
    "creation_date" : 1762328773,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140837250,
    "post_id" : 79806634,
    "body" : "Do you happen to be using a LazyList/LazyGrid in the start screen? There appears to be a <a href=\"https://issuetracker.google.com/issues/438779964\" rel=\"nofollow noreferrer\">known bug from UI testing especially with a custom scroll to a specific item</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 9115426,
      "reputation" : 27200,
      "user_id" : 6782707,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=256&d=identicon&r=PG",
      "display_name" : "Edric",
      "link" : "https://stackoverflow.com/users/6782707/edric"
    },
    "creation_date" : 1762328677,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140835191,
    "post_id" : 79806634,
    "body" : "This happened after updating androidx.compose:compose-bom:2025.09.01",
    "score" : 0,
    "owner" : {
      "account_id" : 19728656,
      "reputation" : 25,
      "user_id" : 21474826,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-qFhPq82iQO4/AAAAAAAAAAI/AAAAAAAAAfA/AMZuucl3W9BiQqC_jHz8zu-JMm5UElknoQ/s96-c/s256-rj/photo.jpg",
      "display_name" : "Red Cape",
      "link" : "https://stackoverflow.com/users/21474826/red-cape"
    },
    "creation_date" : 1762245579,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79810964" : [ {
      "comment_id" : 140840307,
      "post_id" : 79810964,
      "body" : "Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/79810964/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1762445188,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}