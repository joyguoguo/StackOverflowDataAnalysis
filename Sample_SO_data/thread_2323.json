{
  "question" : {
    "question_id" : 79629575,
    "title" : "OSGi/Eclipse plugin version discrepancies",
    "body" : "<p>I have an OSGi application using Eclipse v4.20 under Java 11 that works perfectly. I am updating all the plugins to use Eclipse v4.34 and Java 17.</p>\n<p>The application is started with this command:</p>\n<pre><code>C:\\DevTools\\Amazon Corretto\\jdk17.0.14_7\\bin\\javaw.exe -classpath\n  org.eclipse.osgi_3.22.0.v20241030-2121.jar -Dconfig.type=TEW -Dosgi.parentClassloader=current -Dosgi.bundles=org.eclipse.equinox.common@2:start,org.eclipse.update.configurator@3:start,org.eclipse.core.runtime@start,myproduct.tew@4:start org.eclipse.core.runtime.adaptor.EclipseStarter -clean -data  C:\\Users\\myuser\\TEW -configuration C:\\Users\\myuser\\TEW -product myproduct.tew -consoleLog\n</code></pre>\n<p>After resolving the org.eclipse.equinox.ds issue, I get this error when the application is started:</p>\n<pre><code>ENTRY org.eclipse.update.configurator 4 0 2025-05-23 00:13:15.603\n!MESSAGE FrameworkEvent ERROR\n!STACK 0\norg.osgi.framework.BundleException: Could not resolve module: org.eclipse.update.configurator [2]\n  Unresolved requirement: Require-Bundle: org.eclipse.core.runtime; bundle-version=&quot;3.29.0&quot;\n    -&gt; Bundle-SymbolicName: org.eclipse.core.runtime; bundle-version=&quot;3.32.0.v20241003-0436&quot;; singleton:=&quot;true&quot;\n       org.eclipse.core.runtime [3]\n         Unresolved requirement: Require-Bundle: org.eclipse.core.jobs; bundle-version=&quot;[3.15.0,4.0.0)&quot;; visibility:=&quot;reexport&quot;\n\n    at org.eclipse.osgi.container.Module.start(Module.java:493)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel$2.run(ModuleContainer.java:2102)\n    at org.eclipse.osgi.internal.framework.EquinoxContainerAdaptor$1$1.execute(EquinoxContainerAdaptor.java:143)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:2093)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:2035)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.doContainerStartLevel(ModuleContainer.java:1996)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1912)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:341)\n\n!ENTRY org.eclipse.core.runtime 4 0 2025-05-23 00:13:15.604\n!MESSAGE FrameworkEvent ERROR\n!STACK 0\norg.osgi.framework.BundleException: Could not resolve module: org.eclipse.core.runtime [3]\n  Unresolved requirement: Require-Bundle: org.eclipse.core.jobs; bundle-version=&quot;[3.15.0,4.0.0)&quot;; visibility:=&quot;reexport&quot;\n\n    at org.eclipse.osgi.container.Module.start(Module.java:493)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel$2.run(ModuleContainer.java:2102)\n    at org.eclipse.osgi.internal.framework.EquinoxContainerAdaptor$1$1.execute(EquinoxContainerAdaptor.java:143)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:2093)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.incStartLevel(ModuleContainer.java:2035)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.doContainerStartLevel(ModuleContainer.java:1996)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1912)\n    at org.eclipse.osgi.container.ModuleContainer$ContainerStartLevel.dispatchEvent(ModuleContainer.java:1)\n    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)\n    at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:341)\n\n!ENTRY org.eclipse.osgi 4 0 2025-05-23 00:13:15.605\n!MESSAGE Bundle initial@reference:file:org.eclipse.update.configurator_3.5.500.v20241001-1711.jar was not resolved.\n\n!ENTRY org.eclipse.osgi 4 0 2025-05-23 00:13:15.605\n!MESSAGE Bundle initial@reference:file:org.eclipse.core.runtime_3.32.0.v20241003-0436.jar was not resolved.\n\n!ENTRY org.eclipse.update.configurator 2 0 2025-05-23 00:13:15.608\n!MESSAGE Could not resolve module: org.eclipse.update.configurator [2]\n  Unresolved requirement: Require-Bundle: org.eclipse.core.runtime; bundle-version=&quot;3.29.0&quot;\n    -&gt; Bundle-SymbolicName: org.eclipse.core.runtime; bundle-version=&quot;3.32.0.v20241003-0436&quot;; singleton:=&quot;true&quot;\n       org.eclipse.core.runtime [3]\n         Unresolved requirement: Require-Bundle: org.eclipse.core.jobs; bundle-version=&quot;[3.15.0,4.0.0)&quot;; visibility:=&quot;reexport&quot;\n\n\n!ENTRY org.eclipse.core.runtime 2 0 2025-05-23 00:13:15.608\n!MESSAGE Could not resolve module: org.eclipse.core.runtime [3]\n  Unresolved requirement: Require-Bundle: org.eclipse.core.jobs; bundle-version=&quot;[3.15.0,4.0.0)&quot;; visibility:=&quot;reexport&quot;\n\n\n!ENTRY org.eclipse.osgi 4 0 2025-05-23 00:13:15.609\n!MESSAGE Application error\n!STACK 1\njava.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).\n    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:86)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:439)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:271)\n    at org.eclipse.core.runtime.adaptor.EclipseStarter.main(EclipseStarter.java:242)\n</code></pre>\n<p>The file it's complaining about (org.eclipse.core.jobs_3.15.400.v20240619-0602.jar) is there amongst all the necessary jar files.</p>\n<p>Anyone know how I can fix that? Is there a workaround?</p>\n<p>Thanks</p>\n",
    "tags" : [ "java", "dependencies", "eclipse-rcp", "osgi-bundle" ],
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "is_answered" : false,
    "view_count" : 129,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1748043168,
    "creation_date" : 1747694868,
    "link" : "https://stackoverflow.com/questions/79629575/osgi-eclipse-plugin-version-discrepancies",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140480683,
    "post_id" : 79629575,
    "body" : "@howlger Yes we upgraded from 4.20, but we are still using org.eclipse.update.configurator currently in 4.20 (we were on 4.5 before that and using the same method to start the app in 4.20 worked, so we didn&#39;t change anything). Thanks",
    "score" : 0,
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "creation_date" : 1748877828,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140476676,
    "post_id" : 79629575,
    "body" : "This is already the case since 4.8 (see e.g. <a href=\"https://github.com/diffplug/goomph/issues/69#issuecomment-403737731\" rel=\"nofollow noreferrer\">here</a>), but you said that you updated from 4.20. Please be aware that <code>bundles.info</code> is something that is created by the build (Tycho) automatically. Things got easier when done right. See e.g. <a href=\"https://github.com/vogellacompany/tycho-example\" rel=\"nofollow noreferrer\">this Tycho example project</a> or <a href=\"https://github.com/howlger/IDEalized\" rel=\"nofollow noreferrer\">my customized Eclipse IDE</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1748774323,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140473108,
    "post_id" : 79629575,
    "body" : "@howlger One of my coworker found out that org.eclipse.update.configurator no longer does automatically install bundles on application startup and that SimpleConfigurator with bundles.info is the way to go. So we&#39;ll try this approach.",
    "score" : 0,
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "creation_date" : 1748620241,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140464835,
    "post_id" : 79629575,
    "body" : "So building with Maven/Tycho works without problems, but the built RCP application does not start, right? Is the log from the configuration area or the workspace metadata directory? Please show the complete log starting with <code>!SESSION</code>. Tycho 2.7.5 is pretty old, better upgrade Maven and Tycho. I would also recommend using a target definition file, as this is easier to maintain.",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1748414526,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140463347,
    "post_id" : 79629575,
    "body" : "@howlger Yes, that is the complete log file. Basically all the files are copied on the local workstation and a command is executed to start the application (see at the top of my post). All the jar files in there are taken directly from the repository-4.34.zip file from eclipse (we just unzip it and put all the files our own local p2 repo for packaging purposes). I&#39;ll check if we are missing any &#39;import&#39; dependencies. Yes, for development, we use &quot;Eclipse IDE for RCP and RAP Developers&quot;, Maven 3.6.3 and Tycho 2.7.5 to build our app. Thanks.",
    "score" : 0,
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "creation_date" : 1748364059,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140454738,
    "post_id" : 79629575,
    "body" : "Do you use Eclipse with the Plug-in Development Environment installed as IDE and Maven/Tycho to build your RCP application?",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1748070023,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140454719,
    "post_id" : 79629575,
    "body" : "@PMart. <a href=\"https://github.com/eclipse-platform/eclipse.platform/blob/53c100e6cd6fb8fa1af3b101ed16f6c2bdbc6396/runtime/bundles/org.eclipse.core.jobs/META-INF/MANIFEST.MF#L15-L19\" rel=\"nofollow noreferrer\"><code>org.eclipse.core.jobs</code> does not only require <code>org.eclipse.equinox.common</code>, but also other things via <code>Import-Package</code></a>. Is the JAR there as a result of a Tycho build or because you copied it there (which would not be enough)? In the first case, the reason should be stated in the log (did you show the entire log?).",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1748068889,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140454293,
    "post_id" : 79629575,
    "body" : "@greg-449 The org.eclipse.equinox.ds issue is resolved, thank you. But now it&#39;s complaining about another plugin (See Updated log in the post). The org.eclipse.core.jobs_3.15.400.v20240619-0602.jar is there in the same folder as all the other plugins, don&#39;t know why it cannot be found. Only one required bundle isneeded by org.eclipse.core.jobs in its manifest org.eclipse.equinox.common;bundle-version=&quot;[3.8.0,4.0.0)&quot; and I have org.eclipse.equinox.common_3.19.200.v20241004-0654.jar in that folder too.  Looks like I have everything I need, but somehow the runtime cannot find all the bundles.",
    "score" : 0,
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "creation_date" : 1748042586,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140448388,
    "post_id" : 79629575,
    "body" : "What greg-449 says. You might also need to adapt your <code>.product</code> file. See e.g. the changes of the Java IDE product between <a href=\"https://github.com/eclipse-packaging/packages/blob/master/packages/org.eclipse.epp.package.java.product/epp.product\" rel=\"nofollow noreferrer\">now</a> and at the time of <a href=\"https://github.com/eclipse-packaging/packages/blob/e286be87cea847236e21afee63083da413b3613a/packages/org.eclipse.epp.package.java.product/epp.product\" rel=\"nofollow noreferrer\">4.20</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1747898110,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140446751,
    "post_id" : 79629575,
    "body" : "Well that shows something is referencing <code>org.eclipse.equinox.ds</code> which hasn&#39;t been used since Eclipse 4.9 when it was replaced by <code>org.apache.felix.scr</code> so something is wrong in the list",
    "score" : 1,
    "owner" : {
      "account_id" : 3159259,
      "reputation" : 111552,
      "user_id" : 2670892,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/4iPV5.png?s=256",
      "display_name" : "greg-449",
      "link" : "https://stackoverflow.com/users/2670892/greg-449"
    },
    "creation_date" : 1747846954,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140446724,
    "post_id" : 79629575,
    "body" : "@greg-449 I added the full log file and how the application is started in my original post. Also, the target platform contains most of the plugins that are included in the repository-4.34.zip from the eclipse repo, so there is no eclipse dependencies missing. I have setup this twice in the past with eclipse 4.5.2 for java 8 and eclipse 4.20 for Java 11 and never seen errors like that.",
    "score" : 0,
    "owner" : {
      "account_id" : 42078167,
      "reputation" : 11,
      "user_id" : 30583206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b85af5a31a1b30edafd5160b8a8aa967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "P Mart.",
      "link" : "https://stackoverflow.com/users/30583206/p-mart"
    },
    "creation_date" : 1747846445,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140441688,
    "post_id" : 79629575,
    "body" : "Be careful reading the dependencies, they are often a version <b>or higher</b>. Eclipse 4.34 RCPs work fine. You may have to change the plugins included and the start levels when moving from 4.20 to 4.34. We need to see the full messages as the real problem is often in a later message.",
    "score" : 1,
    "owner" : {
      "account_id" : 3159259,
      "reputation" : 111552,
      "user_id" : 2670892,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/4iPV5.png?s=256",
      "display_name" : "greg-449",
      "link" : "https://stackoverflow.com/users/2670892/greg-449"
    },
    "creation_date" : 1747725915,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140441623,
    "post_id" : 79629575,
    "body" : "<i>&quot;... looking at the configurator dependencies in the manifest, it requires org.eclipse.core.runtime_3.29.0 and not 3.32.0?&quot;</i> - Yes, <a href=\"https://github.com/eclipse-platform/eclipse.platform/blob/53c100e6cd6fb8fa1af3b101ed16f6c2bdbc6396/update/org.eclipse.update.configurator/META-INF/MANIFEST.MF#L14\" rel=\"nofollow noreferrer\"><code>org.eclipse.update.configurator</code> requires <code>org.eclipse.core.runtime</code> of version <b>3.29.0 or higher</b></a>. What&#39;s wrong with that?",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1747724373,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140441601,
    "post_id" : 79629575,
    "body" : "Please show the complete error message formatted as <i>Sample Code</i> (indented by four spaces to keep line breaks and characters like <code>&lt;</code>) and tell where you get it from. Please also tell the version of the plugins/bundles you have. See also the <a href=\"https://help.eclipse.org/latest/nav/2_3\" rel=\"nofollow noreferrer\">Plug-in Migration Guide</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1747723952,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}