{
  "question" : {
    "question_id" : 79534698,
    "title" : "Automatically enforcing GraphQL directives with Spring GraphQL",
    "body" : "<p>I wondering if it is possible to automatically enforce GraphQL directive in Spring GraphQL.</p>\n<p>My schema is</p>\n<pre><code>directive @validateUserId on ARGUMENT_DEFINITION\ntype Mutation {\n  addBook(userId: ID! @validateUserId , name:String, pageCount:Int, author:NewAuthorInput): Book\n}\n</code></pre>\n<p>Mutation handler in my controller:</p>\n<pre><code>@MutationMapping\n  public Book addBook(@Argument UUID userId, @Argument String name, @Argument Integer pageCount, @NotNull @Argument NewAuthorInput author, DataFetchingEnvironment environment) {\n    ValidateUserIdDirective.validateUserId(environment);\n\n    Author newAuthor = bookService.addAuthor(author.getFirstName(), author.getLastName());\n    return bookService.addBook(name, pageCount, newAuthor);\n  }\n</code></pre>\n<p>and my directive wiring:</p>\n<pre><code>@Component\npublic class ValidateUserIdDirective implements SchemaDirectiveWiring {\n\n  @Override\n  public GraphQLArgument onArgument(SchemaDirectiveWiringEnvironment&lt;GraphQLArgument&gt; environment) {\n    return environment.getElement();\n  }\n\n  public static void validateUserId(DataFetchingEnvironment environment) {\n    UUID providedUserId = UUID.fromString(Objects.requireNonNull(environment.getArgument(&quot;userId&quot;)));\n   // do something with user id\n  \n  }\n}\n</code></pre>\n<p>In this code I explicitly calling <code>ValidateUserIdDirective.validateUserId(environment);</code> in my mutation handler. I am wondering if there is a way to automatically validate user directive without making any explicit calls?</p>\n",
    "tags" : [ "java", "spring-graphql" ],
    "owner" : {
      "account_id" : 1498947,
      "reputation" : 923,
      "user_id" : 1404223,
      "user_type" : "registered",
      "accept_rate" : 6,
      "profile_image" : "https://www.gravatar.com/avatar/d452b5dc9e5f3231e84414c961dfb165?s=256&d=identicon&r=PG",
      "display_name" : "MrkK",
      "link" : "https://stackoverflow.com/users/1404223/mrkk"
    },
    "is_answered" : false,
    "view_count" : 69,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1743021341,
    "creation_date" : 1742931900,
    "link" : "https://stackoverflow.com/questions/79534698/automatically-enforcing-graphql-directives-with-spring-graphql",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79537226,
    "question_id" : 79534698,
    "body" : "<p>I solved the problem by correct registration of my wiring directive:</p>\n<pre><code>@Bean\npublic RuntimeWiringConfigurer runtimeWiringConfigurer(ValidateUserIdDirective validateUserIdDirective) {\n  return wiringBuilder -&gt; wiringBuilder\n          .directive(&quot;validateUserId&quot;, validateUserIdDirective);\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1498947,
      "reputation" : 923,
      "user_id" : 1404223,
      "user_type" : "registered",
      "accept_rate" : 6,
      "profile_image" : "https://www.gravatar.com/avatar/d452b5dc9e5f3231e84414c961dfb165?s=256&d=identicon&r=PG",
      "display_name" : "MrkK",
      "link" : "https://stackoverflow.com/users/1404223/mrkk"
    },
    "creation_date" : 1743021341,
    "last_activity_date" : 1743021341,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79537226" : [ {
      "comment_id" : 140271422,
      "post_id" : 79537226,
      "body" : "Yes, I have just wanted to propose it. Great it works!",
      "score" : 0,
      "owner" : {
        "account_id" : 5505924,
        "reputation" : 1031,
        "user_id" : 4373784,
        "user_type" : "registered",
        "accept_rate" : 62,
        "profile_image" : "https://i.sstatic.net/jY9up.jpg?s=256",
        "display_name" : "Szymon Roziewski",
        "link" : "https://stackoverflow.com/users/4373784/szymon-roziewski"
      },
      "creation_date" : 1743106739,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}