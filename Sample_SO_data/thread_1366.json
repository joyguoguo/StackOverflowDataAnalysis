{
  "question" : {
    "question_id" : 79714132,
    "title" : "Sharing a common model between a transformer API and persistence layer API",
    "body" : "<p>I am working on a Java project where certain XML files are converted to POJOs and then saved to the database in Cassandra. The 2 projects have a common model which are identical in every way. Since the domain model is the same, I want to create a separate project for the model that can be used across the projects and not copy them manually.</p>\n<p>The issue is the persistence layer has Cassandra specific annotations which I do not want to leak into the project transforming the XML files and sent to the persistence layer API.</p>\n<p>Is there a way to generate the persistence domain into plain POJOs without the annotations? I do not want to have DTOs in a package and also have a package duplicating the persistence classes which differ only in annotations on the entities. How can I handle this situation?</p>\n",
    "tags" : [ "java", "spring-boot", "spring-data" ],
    "owner" : {
      "account_id" : 2425828,
      "reputation" : 744,
      "user_id" : 2117774,
      "user_type" : "registered",
      "accept_rate" : 63,
      "profile_image" : "https://www.gravatar.com/avatar/02d498da925dc0728614b42fa9dbae5d?s=256&d=identicon&r=PG",
      "display_name" : "BreenDeen",
      "link" : "https://stackoverflow.com/users/2117774/breendeen"
    },
    "is_answered" : false,
    "view_count" : 68,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1753424631,
    "creation_date" : 1753410463,
    "link" : "https://stackoverflow.com/questions/79714132/sharing-a-common-model-between-a-transformer-api-and-persistence-layer-api",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140631636,
    "post_id" : 79714132,
    "body" : "The xml files have fields that are not the names of the fields of the class to be persisted. The API with the XML files needs to create the objects that can be persisted in the API that does all the CRUD activities. If the objects are the same accross the 2 projects, what other way can we use the same model without copy paste or duplicating it? If there is a way to accomplish that I&#39;m all ears. Also, the annotations are not ignored in the project using the object model. The model with the Cassandra annotations pull in the annotation. jars, so the POJOs don&#39;t need to do so",
    "score" : 0,
    "owner" : {
      "account_id" : 2425828,
      "reputation" : 744,
      "user_id" : 2117774,
      "user_type" : "registered",
      "accept_rate" : 63,
      "profile_image" : "https://www.gravatar.com/avatar/02d498da925dc0728614b42fa9dbae5d?s=256&d=identicon&r=PG",
      "display_name" : "BreenDeen",
      "link" : "https://stackoverflow.com/users/2117774/breendeen"
    },
    "creation_date" : 1753932906,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140625614,
    "post_id" : 79714132,
    "body" : "The xml transformation is not an issue. I have decided to use Java Reflection to generate the classes without the annotations and use that for other projects tht need to include the Cassandra annotations. I using gradle to generate a jar of the POJO with no annotations.",
    "score" : 0,
    "owner" : {
      "account_id" : 2425828,
      "reputation" : 744,
      "user_id" : 2117774,
      "user_type" : "registered",
      "accept_rate" : 63,
      "profile_image" : "https://www.gravatar.com/avatar/02d498da925dc0728614b42fa9dbae5d?s=256&d=identicon&r=PG",
      "display_name" : "BreenDeen",
      "link" : "https://stackoverflow.com/users/2117774/breendeen"
    },
    "creation_date" : 1753759134,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140623323,
    "post_id" : 79714132,
    "body" : "Annotations are just metadata, you can create a shared model with all the annotations. You don&#39;t need the cassandra dependencies in the project that doesn&#39;t use cassandra. It will simply ignore the annotations. OTOH the fact that the annotations are there make it a bit of a leaky abstraction and the fact that they are similar and not the same might indicate you shouldn&#39;t create a shared model to start with.",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1753695344,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140623069,
    "post_id" : 79714132,
    "body" : "I don&#39;t think it&#39;s possible (or advisable) in the way you would like to. However, you could use a schema file(XML on JSON) and use a plugin to generate the classes the way you want to (one using and entity plugin, and another one with plain java objects), then use a mapper to transform between the entity and the pojo.",
    "score" : 0,
    "owner" : {
      "account_id" : 1601399,
      "reputation" : 638,
      "user_id" : 1482356,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d6160b6e40d230fa92c6da8072b2f7e5?s=256&d=identicon&r=PG",
      "display_name" : "Peter Adrian",
      "link" : "https://stackoverflow.com/users/1482356/peter-adrian"
    },
    "creation_date" : 1753687845,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140620222,
    "post_id" : 79714132,
    "body" : "No, I mean i.e. the hibernate.cfg.xml file. If you use this file, your Entities can be simple POJOs without Annotations",
    "score" : 0,
    "owner" : {
      "account_id" : 8026267,
      "reputation" : 5044,
      "user_id" : 6053084,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/616306286f1da49445d0f5f944440c2d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Turo",
      "link" : "https://stackoverflow.com/users/6053084/turo"
    },
    "creation_date" : 1753536620,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140618175,
    "post_id" : 79714132,
    "body" : "The XML is only used to express the models schema and the xml is easily mapped to POJOS. The xml mapping is not the problem. The issue is that the model is common to the independent service which transfoems XML to POJO and send them to another service which save them to a Cassandra database. The model used in both services are the same but for the annotations contained on the classes which are on the service which saves to the database. I want to use a shared model across the 2 projects but one would have the annotations and the other should not .",
    "score" : 0,
    "owner" : {
      "account_id" : 2425828,
      "reputation" : 744,
      "user_id" : 2117774,
      "user_type" : "registered",
      "accept_rate" : 63,
      "profile_image" : "https://www.gravatar.com/avatar/02d498da925dc0728614b42fa9dbae5d?s=256&d=identicon&r=PG",
      "display_name" : "BreenDeen",
      "link" : "https://stackoverflow.com/users/2117774/breendeen"
    },
    "creation_date" : 1753449926,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140617354,
    "post_id" : 79714132,
    "body" : "That&#39;s the reason why some still prefer xml-mappings. I don&#39;t know if this is possible in your case...",
    "score" : 0,
    "owner" : {
      "account_id" : 8026267,
      "reputation" : 5044,
      "user_id" : 6053084,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/616306286f1da49445d0f5f944440c2d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Turo",
      "link" : "https://stackoverflow.com/users/6053084/turo"
    },
    "creation_date" : 1753430032,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}