{
  "question" : {
    "question_id" : 79811025,
    "title" : "Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Since more than one mappable servlet in your servlet context:",
    "body" : "<p>I am applying Spring Security in a Spring MVC (Spring Boot) application. The application already has CSRF and Session Management and I want to apply JWT Authentication along with Spring security. But when I am applying Spring Security with custom configurations I am getting following error:</p>\n<pre><code>2025-11-06T12:59:16.555+05:30  INFO 1600 --- [  restartedMain] com.java.HMS.HmsApplication              : The following 1 profile is active: &quot;PROD&quot;\n2025-11-06T12:59:17.081+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2025-11-06T12:59:17.081+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n2025-11-06T12:59:17.099+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JDBC repository interfaceinterfaces.\n2025-11-06T12:59:17.102+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2025-11-06T12:59:17.102+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2025-11-06T12:59:17.107+05:30  INFO 1600 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 4 ms. Found 0 JPA repository interfaceinterfaces.\n2025-11-06T12:59:17.212+05:30  INFO 1600 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8088 (http)\n2025-11-06T12:59:17.213+05:30  INFO 1600 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2025-11-06T12:59:17.213+05:30  INFO 1600 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]\n2025-11-06T12:59:17.442+05:30  INFO 1600 --- [  restartedMain] org.apache.jasper.servlet.TldScanner     : At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n2025-11-06T12:59:17.445+05:30  INFO 1600 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/hms]    : Initializing Spring embedded WebApplicationContext\n2025-11-06T12:59:17.446+05:30  INFO 1600 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 886 ms\n2025-11-06T12:59:17.519+05:30  INFO 1600 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2025-11-06T12:59:17.529+05:30  INFO 1600 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...\n2025-11-06T12:59:17.733+05:30  INFO 1600 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection ConnectionID:21 ClientConnectionId: b6518517-9ada-4c9f-a4bd-ae89c7da198c\n2025-11-06T12:59:17.733+05:30  INFO 1600 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.\n2025-11-06T12:59:17.734+05:30  INFO 1600 --- [  restartedMain] SQL dialect                              : HHH000400: Using dialect: org.hibernate.dialect.SQLServerDialect\n2025-11-06T12:59:17.802+05:30  INFO 1600 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2025-11-06T12:59:17.802+05:30  INFO 1600 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2025-11-06T12:59:17.957+05:30  INFO 1600 --- [  restartedMain] o.s.b.a.w.s.WelcomePageHandlerMapping    : Adding welcome page template: index\n2025-11-06T12:59:18.024+05:30  WARN 1600 --- [  restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/java/HMS/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).\n\nThis is because there is more than one mappable servlet in your servlet context: {org.apache.jasper.servlet.JspServlet=[*.jspx, *.jsp], org.springframework.web.servlet.DispatcherServlet=[/]}.\n\nFor each MvcRequestMatcher, call MvcRequestMatcher#setServletPath to indicate the servlet path.\n2025-11-06T12:59:18.025+05:30  INFO 1600 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2025-11-06T12:59:18.025+05:30  INFO 1600 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...\n2025-11-06T12:59:18.047+05:30  INFO 1600 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.\n2025-11-06T12:59:18.048+05:30  INFO 1600 --- [  restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2025-11-06T12:59:18.055+05:30  INFO 1600 --- [  restartedMain] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2025-11-06T12:59:19.110+05:30 ERROR 1600 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'securityFilterChain' defined in class path resource [com/java/HMS/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).\n\nThis is because there is more than one mappable servlet in your servlet context: {org.apache.jasper.servlet.JspServlet=[*.jspx, *.jsp], org.springframework.web.servlet.DispatcherServlet=[/]}.\n\nFor each MvcRequestMatcher, call MvcRequestMatcher#setServletPath to indicate the servlet path.\n at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:879) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:832) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:492) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1416) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:597) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.14.jar:6.0.14]\n at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:950) ~[spring-context-6.0.14.jar:6.0.14]\n at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616) ~[spring-context-6.0.14.jar:6.0.14]\n at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.13.jar:3.0.13]\n at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733) ~[spring-boot-3.0.13.jar:3.0.13]\n at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435) ~[spring-boot-3.0.13.jar:3.0.13]\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-3.0.13.jar:3.0.13]\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-3.0.13.jar:3.0.13]\n at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) ~[spring-boot-3.0.13.jar:3.0.13]\n at com.java.HMS.HmsApplication.main(HmsApplication.java:12) ~[classes/:na]\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.0.13.jar:3.0.13]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'securityFilterChain' defined in class path resource [com/java/HMS/security/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'securityFilterChain' threw exception with message: This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).\n\nThis is because there is more than one mappable servlet in your servlet context: {org.apache.jasper.servlet.JspServlet=[*.jspx, *.jsp], org.springframework.web.servlet.DispatcherServlet=[/]}.\n</code></pre>\n<p><strong>This is my <code>SecurityConfig.java</code></strong></p>\n<pre><code>package com.java.HMS.security;\n\nimport com.java.HMS.jwt.JwtAuthenticationFilter;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\n\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    public SecurityConfig(JwtAuthenticationFilter jwtAuthenticationFilter) {\n        this.jwtAuthenticationFilter = jwtAuthenticationFilter;\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration configuration) throws Exception {\n        return configuration.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\n                .authorizeHttpRequests( authorize -&gt;\n                        authorize\n                                .requestMatchers(&quot;/&quot;).permitAll()\n                                .anyRequest().authenticated()\n                )\n                .formLogin(AbstractHttpConfigurer::disable)\n                .httpBasic(AbstractHttpConfigurer::disable)\n                .sessionManagement(sessionManagement -&gt;\n                        sessionManagement.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n        return http.build();\n    }\n}\n\n</code></pre>\n<p><strong>This is my <code>application.properties</code></strong></p>\n<pre><code>server.port=8088\n# servlet dispatcher configuration\nspring.mvc.servlet.load-on-startup=-1\nspring.mvc.view.prefix=/WEB-INF/views/\nspring.mvc.view.suffix=.jsp\nserver.servlet.context-path=/hms\nserver.tomcat.redirect-context-root=false\n\n#Database Configuration\nspring.datasource.url={DB_URL}\nspring.datasource.username={DB_USER}\nspring.datasource.password={DB_PASSWORD}\nspring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect\n\n#=========================== \n#FOR DEVELOPMENT CONNECTION\n#==========================\nspring.profiles.active=PROD\nspring.jpa.hibernate.ddl-auto=none\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.show-sql=true\nspring.jpa.open-in-view=true\nspring.jpa.generate-ddl=true\nspring.jpa.properties.hibernate.globally_quoted_identifiers=true\n\n\n#server.tomcat.additional-tld-skip-patterns=*.jar    https://howtodoinjava.com/spring-boot2/read-file-from-resources/\n#for images\n\nspring.servlet.multipart.max-file-size=5MB\nspring.servlet.multipart.max-request-size=20MB\n\n#read static files or images \nspring.web.resources.static-locations=classpath:/resources/\nspring.mvc.static-path-pattern=/resources/**\n\n#management.endpoints.web.exposure.include=mappings\n\nspringdoc.enable-hateoas=false\n\n#JWT SECRET PROPERTIES\njwt.token.secret={SECRET_KEY}\njwt.token.expires=30\n\n</code></pre>\n<p><strong>Please guide me properly to resolve the issue.</strong></p>\n",
    "tags" : [ "java", "spring", "spring-boot", "spring-mvc", "spring-security" ],
    "owner" : {
      "account_id" : 18631980,
      "reputation" : 133,
      "user_id" : 13579721,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/48e30bee3977cb4ca31ab7866d157491?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Phoenix",
      "link" : "https://stackoverflow.com/users/13579721/phoenix"
    },
    "is_answered" : true,
    "view_count" : 89,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1764395077,
    "creation_date" : 1762419112,
    "link" : "https://stackoverflow.com/questions/79811025/failed-to-instantiate-org-springframework-security-web-securityfilterchain-si",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79824082,
    "question_id" : 79811025,
    "body" : "<p>I have created a MvcRequestMatcher object along with HandlerMappingIntrospector and used that in pattern matching inside requestmatcher(). This resolved the issue arising due to two Servlet mappings. Following is the updated SecurityConfig snippet I have applied:</p>\n<pre><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http,\n                                                   HandlerMappingIntrospector introspector) throws Exception {\n        MvcRequestMatcher.Builder hmsRequestMatcher = new MvcRequestMatcher.Builder(introspector);\n\n        http\n                .csrf(AbstractHttpConfigurer::disable) // JWT stateless; your login uses custom CSRF currently\n                .formLogin(AbstractHttpConfigurer::disable)\n                .httpBasic(AbstractHttpConfigurer::disable)\n                .sessionManagement(session -&gt;\n                        session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                \n                .addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)\n                .authorizeHttpRequests(auth -&gt;\n                        auth\n                                .requestMatchers(\n                                        hmsRequestMatcher.pattern(&quot;/&quot;),\n               \n                                ).permitAll()\n                                .anyRequest().authenticated()\n                );\n\n        return http.build();\n    }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 18631980,
      "reputation" : 133,
      "user_id" : 13579721,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/48e30bee3977cb4ca31ab7866d157491?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Phoenix",
      "link" : "https://stackoverflow.com/users/13579721/phoenix"
    },
    "creation_date" : 1763528988,
    "last_activity_date" : 1763528988,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}