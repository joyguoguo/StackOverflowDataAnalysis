{
  "question" : {
    "question_id" : 79763623,
    "title" : "How do I delete an embedded ElementCollection with the parent entity in Hibernate?",
    "body" : "<p>I have an entity holding a collection of embeddable objects:</p>\n<pre><code>@Entity(name = &quot;LogbookEntry&quot;)\npublic class LogbookEntryView {\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @AttributeOverride(name = &quot;start&quot;, column = @Column(name = &quot;tachReading_start&quot;))\n    @AttributeOverride(name = &quot;end&quot;, column = @Column(name = &quot;tachReading_end&quot;))\n    List&lt;MeterReading&gt; tachReading;\n\n    // ... other attributes\n\n}\n</code></pre>\n<p>The object is embeddable:</p>\n<pre><code>@Embeddable\npublic class MeterReading {\n\n    @NotNull\n    Duration start;\n\n    @NotNull\n    Duration end;\n\n}\n</code></pre>\n<p>I've read in <a href=\"https://stackoverflow.com/a/78824953/1704311\">this SO Answer</a> and other documentation that the collection elements' lifecycle is bound to the owning entity, so deleting the <code>LogbookEntryView</code> should automatically delete all <code>MeterReadings</code>.</p>\n<p>However, when <code>LogbookEntryView</code> gets deleted due to its parent <code>LobookView</code> being deleted (because it is annotated with <code>@OnDelete(action = OnDeleteAction.CASCADE)</code>), I am getting this error:</p>\n<pre><code>Cannot delete or update a parent row: a foreign key constraint fails (`zero-eight`.`logbook_entry_tach_reading`, CONSTRAINT `FKm3fndbcqjghofus5l3sa1xfse` FOREIGN KEY (`logbook_entry_id_uuid`) REFERENCES `logbook_entry` (`id_uuid`))\n</code></pre>\n<p>I've already tried using an explicit <code>@CollectionTable</code>, <code>@OnDelete</code> and cascades. What's wrong here?</p>\n",
    "tags" : [ "java", "hibernate", "hibernate-mapping" ],
    "owner" : {
      "account_id" : 1884886,
      "reputation" : 1513,
      "user_id" : 1704311,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/xn0RH.png?s=256",
      "display_name" : "Double M",
      "link" : "https://stackoverflow.com/users/1704311/double-m"
    },
    "is_answered" : false,
    "view_count" : 80,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1757847741,
    "creation_date" : 1757754377,
    "link" : "https://stackoverflow.com/questions/79763623/how-do-i-delete-an-embedded-elementcollection-with-the-parent-entity-in-hibernat",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}