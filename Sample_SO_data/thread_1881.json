{
  "question" : {
    "question_id" : 79667982,
    "title" : "No mapping for GET /fed1/webapp/forward:/webapp/message",
    "body" : "<p>I am upgrading a project from Spring 3 to Spring 6 using XML based DI.</p>\n<p>I have a TranslatingViewResolver that extends AbstractCachingViewResolver. Here is a debug telling how this is operating...</p>\n<pre><code>.TranslatingViewResolver  100159440 | Translating:postpone.noValidDate to forward:/webapp/message?heading=postpone.message.statusError.heading&amp;message=postpone.message.noValidDate\n</code></pre>\n<p>(That is an InternalResourceView, btw.)</p>\n<p>And then the next message is an exception:</p>\n<pre><code>2025-06-16 13:00:34,207 105827 WARN  org.springframework.web.servlet.PageNotFound  100159440 | No mapping for GET /fed1/webapp/forward:/webapp/message\norg.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /fed1/webapp/forward:/webapp/message.\n</code></pre>\n<p>Can't figure out what mangled the forward to have path in front of it.</p>\n<p>I have a UrlBasedViewResolver, which i think I read I need for resolving the forwards. I have a debug in log4j2.xml like:</p>\n<pre><code>    &lt;Logger name=&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot; level=&quot;DEBUG&quot;&gt;\n        &lt;AppenderRef ref=&quot;MyFile&quot;/&gt;\n        &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n    &lt;/Logger&gt;\n</code></pre>\n<p>But am not seeing anything in the log.</p>\n<p>I've been researching <code>forward:</code> and it seems like I have everything configured correctly, plus it worked in the previous version.</p>\n<p>Out of things to try and could use some help.</p>\n<p>UPDATE</p>\n<p>Looking at the stack trace:</p>\n<pre><code>  at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.7.jar:6.2.7]\n        at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:710) ~[servlet-api.jar:6.1]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:130) ~[catalina.jar:11.0.8]\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-websocket.jar:11.0.8]\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:109) ~[catalina.jar:11.0.8]\n        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:514) ~[catalina.jar:11.0.8]\n        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:334) ~[catalina.jar:11.0.8]\n        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:263) ~[catalina.jar:11.0.8]\n        at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171) ~[spring-webmvc-6.2.7.jar:6.2.7]\n</code></pre>\n<p>As indicated above, InternalResourceView has the correct URL. When it comes back to FrameworkServlet it is mangled. I can't seem to step through the code inside of tomcat.</p>\n<p>This makes no sense. It's starting to look like a bug in either tomcat or Spring.</p>\n<p>UPDATE 2</p>\n<p>It's beginning to look like this issue is because of a double forward. My code gets forwarded to the PostponeController that has a look at it and says nothing to do here and forwards to the message controller, only it never makes it there because of the error.</p>\n<p>When pulling the information from the request for the forward, it's pulling the path info for the postpone and that's where the prefix is coming from. This is inside tomcat 11's <code>ApplicationHttpRequest.getRequestDispatcher()</code>.</p>\n<p>I'm not sure how this is really supposed to work, since it just worked before, but I'm digging in. Appreciate any insights.</p>\n<p>UPDATE 3</p>\n<p>So, I believe <code>forward:</code> to be a spring framework thing and not part of the servlet engine (please correct if wrong). As such we have no business passing that to tomcat. Nevertheless, that's what happening here.</p>\n<p>Inside of <code>InternalResourceView.renderMergedOutputModel</code>, it has this line of code:</p>\n<pre><code>    RequestDispatcher rd = getRequestDispatcher(request, dispatcherPath);\n</code></pre>\n<p>Where the <code>dispatcherPath</code> contains the forward:. This looks like a Spring Framework bug to me.</p>\n",
    "tags" : [ "java", "spring", "spring-mvc" ],
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "is_answered" : true,
    "view_count" : 59,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1750258200,
    "creation_date" : 1750094172,
    "link" : "https://stackoverflow.com/questions/79667982/no-mapping-for-get-fed1-webapp-forward-webapp-message",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79670851,
    "question_id" : 79667982,
    "body" : "<p>Turns out it is not a bug. As I now understand, I could simply return the <code>/message</code> without the <code>forward:</code> prefix. The forward is only so the UrlBasedViewResolver would handle the resolution.</p>\n<p>The fact that this worked in previous versions is partly what led me to believe this was a bug.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "creation_date" : 1750258200,
    "last_activity_date" : 1750258200,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}