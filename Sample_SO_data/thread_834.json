{
  "question" : {
    "question_id" : 79768556,
    "title" : "Unable to Retrieve Environment Variable with @Value",
    "body" : "<p>Given the following code in a Junit class:</p>\n<pre><code>@Component\npublic class TestValueTest {\n  @Value(&quot;${TEST_VALUE}&quot;)\n  private String testValue;\n  @Value(&quot;${env.TEST_VALUE}&quot;)\n  private String testValue2;\n  @Value(&quot;${environment.TEST_VALUE}&quot;)\n  private String testValue3;\n\n  @BeforeEach\n  public void setup() {\n    System.out.println(&quot;[debug] TEST_VALUE: &quot; + testValue);\n    System.out.println(&quot;[debug] env.TEST_VALUE: &quot; + testValue2);\n    System.out.println(&quot;[debug] environment.TEST_VALUE: &quot; + testValue3);\n  }\n\n  @Test\n  public void test() {\n    assertEquals(1, 1);\n  }\n}\n</code></pre>\n<p>When I try to test this code, these variables remain set to null.</p>\n<p>Terminal Output:</p>\n<pre><code>&gt; echo ${TEST_VALUE}\nHelloWorld\n&gt; mvn clean install\n//Irrelevant additional maven output\n[debug] TEST_VALUE: null\n[debug] env.TEST_VALUE: null\n[debug] environment.TEST_VALUE: null\n//Irrelevant additional maven output\n</code></pre>\n<p>What do I need to do to get my environment variable to properly populate in my test class?</p>\n<p>The sample terminal output is being run in a MacOS environment, if that matters.</p>\n",
    "tags" : [ "java", "spring-boot" ],
    "owner" : {
      "account_id" : 6811750,
      "reputation" : 19947,
      "user_id" : 5241642,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://i.sstatic.net/TadbK.png?s=256",
      "display_name" : "Xirema",
      "link" : "https://stackoverflow.com/users/5241642/xirema"
    },
    "is_answered" : true,
    "view_count" : 66,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1758205184,
    "creation_date" : 1758204531,
    "link" : "https://stackoverflow.com/questions/79768556/unable-to-retrieve-environment-variable-with-value",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79768562,
    "question_id" : 79768556,
    "body" : "<p>Short answer is your test class isn’t a Spring managed bean, so @Value never runs. Try using <code>@SpringBootTest</code> as the class annotation.</p>\n<p><code>@Component</code> is a Spring annotation, it marks a class as a candidate for component scanning, so Spring could register it as a bean if the application context is actually started.</p>\n<p>But in a plain JUnit test (without <code>@SpringBootTest</code> or <code>@ExtendWith(SpringExtension.class)</code> for instance), there is no Spring context at all, so no scanning, no bean creation, no injection.</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14549481,
      "reputation" : 61,
      "user_id" : 10508824,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/I46At.png?s=256",
      "display_name" : "Anck8",
      "link" : "https://stackoverflow.com/users/10508824/anck8"
    },
    "creation_date" : 1758204899,
    "last_activity_date" : 1758205184,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140747316,
    "post_id" : 79768556,
    "body" : "This question is similar to: <a href=\"https://stackoverflow.com/questions/17353327/populating-spring-value-during-unit-test\">Populating Spring @Value during Unit Test</a>. If you believe it’s different, please <a href=\"https://stackoverflow.com/posts/79768556/edit\">edit</a> the question, make it clear how it’s different and/or how the answers on that question are not helpful for your problem.",
    "score" : 0,
    "owner" : {
      "account_id" : 9606741,
      "reputation" : 41250,
      "user_id" : 7132550,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://graph.facebook.com/1063981417044495/picture?type=large",
      "display_name" : "Michał Turczyn",
      "link" : "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"
    },
    "creation_date" : 1758288465,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79768562" : [ {
      "comment_id" : 140745353,
      "post_id" : 79768562,
      "body" : "@Xirema It works out of the box in Spring Boot projects, without needing <code>@ContextConfiguration</code>.   If you&#39;re using plain Spring then you could use the Spring Test extension (<code>@ExtendWith(SpringExtension.class)</code> with <code>@ContextConfiguration</code> or <code>@SpringJUnitConfig</code> ).   If you don’t want a Spring-managed context at all, values directly from <code>System.getenv(&quot;TEST_VALUE&quot;)</code> or <code>System.getProperty()</code> should do the trick.",
      "score" : 1,
      "owner" : {
        "account_id" : 14549481,
        "reputation" : 61,
        "user_id" : 10508824,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/I46At.png?s=256",
        "display_name" : "Anck8",
        "link" : "https://stackoverflow.com/users/10508824/anck8"
      },
      "creation_date" : 1758210549,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140745171,
      "post_id" : 79768562,
      "body" : "Using <code>@SpringBootTest</code> requires me to also provide a ContextConfiguration for the test to run, is this the only way to make @Value and other annotations process?",
      "score" : 0,
      "owner" : {
        "account_id" : 6811750,
        "reputation" : 19947,
        "user_id" : 5241642,
        "user_type" : "registered",
        "accept_rate" : 75,
        "profile_image" : "https://i.sstatic.net/TadbK.png?s=256",
        "display_name" : "Xirema",
        "link" : "https://stackoverflow.com/users/5241642/xirema"
      },
      "creation_date" : 1758206172,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}