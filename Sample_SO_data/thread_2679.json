{
  "question" : {
    "question_id" : 79603330,
    "title" : "jagged line with drawLine() using Java AWT",
    "body" : "<p>I'm testing 2D walk of specific math functions using Java AWT, and I found weird patterns. Manual drawing 2D walk of the functions didn't show any weird patterns, so I started to check Java AWT behaviour.</p>\n<p>At the end, I wrote this simple Java program that should draw two lines. Note that one line, the blue one, is jagged, that is the problem. I tried to use different settings for <code>RenderingHints()</code> but none worked:</p>\n<p><a href=\"https://i.sstatic.net/QS84linZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/QS84linZ.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the simplified code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Draw {\n    public static void main(String[] args) {\n        JFrame frame = new JFrame(&quot;Draw&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(400, 400);\n        frame.setVisible(true);\n        frame.add(new JPanel() {\n            @Override\n            protected void paintComponent(Graphics g) {\n                super.paintComponent(g);\n                g.setColor(Color.BLUE);\n                for (int i = 0; i &lt; 200; i++) {\n                    g.drawLine(i, i, i + 1, i + 1);//function driven 2d walk, replaced by diagonals for SO purpose\n                }\n                g.setColor(Color.GREEN);\n                g.drawLine(10, 0, 210, 200);//reference line\n            }\n        });\n    }\n}\n</code></pre>\n<p>In this example, the blue line should have the same shape as the green line but it is jagged. Note that <code>RenderingHints.KEY_ANTIALIASING</code> is useless as it just blur the drawing but does not solve the jagged line problem:<br />\n<a href=\"https://i.sstatic.net/EWatCwZP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/EWatCwZP.png\" alt=\"enter image description here\" /></a></p>\n<p>I've also tried to use Java Swing, but got same issue. I'm using Java(TM) SE Runtime Environment 18.9 in Windows 11.</p>\n<p>As double-check, I've just ported the code to Javascript, it works perfectly without any jagged line, the only issue is that I need it to work in Java.</p>\n",
    "tags" : [ "java", "graphics", "2d", "awt" ],
    "owner" : {
      "account_id" : 159437,
      "reputation" : 942,
      "user_id" : 378795,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/5xipb2HO.jpg?s=256",
      "display_name" : "Livio",
      "link" : "https://stackoverflow.com/users/378795/livio"
    },
    "is_answered" : true,
    "view_count" : 55,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746211300,
    "creation_date" : 1746187007,
    "link" : "https://stackoverflow.com/questions/79603330/jagged-line-with-drawline-using-java-awt",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79603356,
    "question_id" : 79603330,
    "body" : "<p>Java's Graphics does not apply anti-aliasing by default. Drawing many tiny lines results in overdrawn pixels and inconsistent rendering due to rounding. Each tiny segment may not align perfectly with the pixel grid, making the line look rough. As you draw many lines with slightly overlapping coordinates, it leads to uneven pixel intensities.</p>\n<p>I'd guess the line might get smoother the bigger steps you take (eg 10)</p>\n<pre class=\"lang-java prettyprint-override\"><code>g.setColor(Color.BLUE);\nint stepSize = 10;\nfor (int i = 0; i &lt; 200; i += stepSize) {\n   g.drawLine(i, i, i + 1, i + 1);\n}\n</code></pre>\n<p>Try using <code>Graphics2D</code> to enable anti-aliasing, this will significantly reduce jaggedness by smoothing the rendering process.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Graphics2D g2 = (Graphics2D) g;\ng2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n\ng.setColor(Color.BLUE);\nfor (int i = 0; i &lt; 200; i++) {\n   g.drawLine(i, i, i + 1, i + 1);\n}\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1096470,
      "reputation" : 29414,
      "user_id" : 1089967,
      "user_type" : "registered",
      "accept_rate" : 59,
      "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
      "display_name" : "lance-java",
      "link" : "https://stackoverflow.com/users/1089967/lance-java"
    },
    "creation_date" : 1746187823,
    "last_activity_date" : 1746188529,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140393321,
    "post_id" : 79603330,
    "body" : "It is a bug in the Java SE Runtime, even in latest release 23.0.2. Instead using OpenJDK Runtime Environment (build 21.0.6) the java application draws blue line without any jaggedness.",
    "score" : 0,
    "owner" : {
      "account_id" : 159437,
      "reputation" : 942,
      "user_id" : 378795,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/5xipb2HO.jpg?s=256",
      "display_name" : "Livio",
      "link" : "https://stackoverflow.com/users/378795/livio"
    },
    "creation_date" : 1746301224,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140392112,
    "post_id" : 79603330,
    "body" : "Hello Livio, I think the only way to make it work in java, is to take the points where the line starts and ends, call <b>drawLine()</b> with them and apply smoothing to the operation.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1746251584,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79603356" : [ {
      "comment_id" : 140391102,
      "post_id" : 79603356,
      "body" : "Antialiasing workaround does not solve the jagged line, I added in my post the image with KEY_ANTIALIASING, blue line gets blurred but it jaggedness is still there, only blurred. The workaround to use large steps is not applicable to my use case (2D walk of math functions) as it requires small steps to be useful for further analysis.",
      "score" : 0,
      "owner" : {
        "account_id" : 159437,
        "reputation" : 942,
        "user_id" : 378795,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/5xipb2HO.jpg?s=256",
        "display_name" : "Livio",
        "link" : "https://stackoverflow.com/users/378795/livio"
      },
      "creation_date" : 1746209761,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}