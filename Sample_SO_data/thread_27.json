{
  "question" : {
    "question_id" : 79841955,
    "title" : "ColtrolsFx&#39;s auto completion not showing up",
    "body" : "<p>I am trying to bind auto completions on a text field with the library controlsfx. The problem is that somehow on the packaged version of the app it doesn't show up, while in the gradle-run or tar/zip (no bundled jre) version yes.</p>\n<p>In the class scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private AutoCompletionBinding&lt;String&gt; softwareAutoCompletion;\nprivate AutoCompletionBinding&lt;String&gt; usernameAutoCompletion;\n</code></pre>\n<p>In the <code>void initialize(URL location, ResourceBundle resources)</code> scope:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Platform.runLater(() -&gt; {\n    softwareAutoCompletion = TextFields.bindAutoCompletion(editorSoftware, getSuggetstionProvider(possibleSoftwares));\n    usernameAutoCompletion = TextFields.bindAutoCompletion(editorUsername, getSuggetstionProvider(possibleUsernames));\n});\n\n// Update auto-completion when suggestions change\nsuggestionsUpdateTrigger.addListener((_, _, _) -&gt; Platform.runLater(() -&gt; {\n    if (softwareAutoCompletion != null) {\n        softwareAutoCompletion.dispose();\n        softwareAutoCompletion = TextFields.bindAutoCompletion(editorSoftware, getSuggetstionProvider(possibleSoftwares));\n    }\n    if (usernameAutoCompletion != null) {\n        usernameAutoCompletion.dispose();\n        usernameAutoCompletion = TextFields.bindAutoCompletion(editorUsername, getSuggetstionProvider(possibleUsernames));\n    }\n}));\n</code></pre>\n<p>With <code>Callback&lt;ISuggestionRequest, Collection&lt;String&gt;&gt; getSuggetstionProvider(List&lt;String&gt; sourceList)</code> which just checks if any software/username starts with the user text.</p>\n<p>I've tried swapping the <code>runLater</code> with a <code>skinProperty</code> listener on the text fields and it does not change, while a <code>sceneProperty</code> listener just makes the parent pane not show up at all.</p>\n<p>I'm on Windows 11, packaging with jpackage. No exceptions seem to be generated in all cases.</p>\n<p>Versions:</p>\n<ul>\n<li>java 25 2025-09-16 LTS</li>\n<li>javafx 25.0.1</li>\n<li>controlsfx 11.2.2</li>\n<li>wix 6.0.0+8c7432e</li>\n</ul>\n<p><strong>UPDATE</strong>: I created a sample application and it still shows the same signs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setTitle(&quot;Example App&quot;);\n        Pane pane = getPane();\n        primaryStage.setScene(new Scene(pane, 400, 300));\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    private Pane getPane() {\n        AnchorPane pane = new AnchorPane();\n\n        // Add ControlsFX components to the pane\n        ObservableList&lt;String&gt; items = FXCollections.observableArrayList();\n\n        TextField textField = new TextField();\n        textField.setLayoutX(50);\n        textField.setLayoutY(50);\n        textField.setPrefSize(300, 10);\n\n        textField.setOnAction(event -&gt; {\n            String input = textField.getText();\n            if (!input.isEmpty() &amp;&amp; !items.contains(input)) {\n                items.add(input);\n                textField.clear();\n            }\n        });\n        \n        AutoCompletionBinding&lt;String&gt; autoCompletion[] = new AutoCompletionBinding[1];\n\n        // Initialize auto-completion with the current items\n        Platform.runLater(() -&gt; autoCompletion[0] = TextFields.bindAutoCompletion(textField, getSuggetstionProvider(items)));\n\n        // Update auto-completion when suggestions change\n        items.addListener((ListChangeListener&lt;String&gt;) change -&gt; {\n            if (autoCompletion[0] != null) {\n                autoCompletion[0].dispose();\n                autoCompletion[0] = TextFields.bindAutoCompletion(textField, getSuggetstionProvider(items));\n            }\n        });\n\n        pane.getChildren().add(textField);\n        return pane;\n    }\n\n    private Callback&lt;ISuggestionRequest, Collection&lt;String&gt;&gt; getSuggetstionProvider(List&lt;String&gt; sourceList) {\n        return request -&gt; {\n            String userText = request.getUserText();\n            if (userText == null || userText.isEmpty()) return List.of();\n\n            String lowerUserText = userText.toLowerCase();\n            return sourceList.stream()\n                    .filter(s -&gt; s.toLowerCase().startsWith(lowerUserText))\n                    .toList();\n        };\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>import org.panteleyev.jpackage.ImageType\n\nplugins {\n    id 'java'\n    id 'application'\n\n    id 'org.openjfx.javafxplugin' version '0.1.0'\n    id 'org.panteleyev.jpackageplugin' version '1.7.6'\n}\n\nrepositories {\n    // Use Maven Central for resolving dependencies.\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.openjfx:javafx-base:25.0.1'\n    implementation 'org.openjfx:javafx-controls:25.0.1'\n    implementation 'org.openjfx:javafx-graphics:25.0.1'\n\n    implementation 'org.controlsfx:controlsfx:11.1.1'\n\n    // Use JUnit Jupiter for testing.\n    testImplementation libs.junit.jupiter\n\n    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'\n\n    // This dependency is used by the application.\n    implementation libs.guava\n}\n\n// Apply a specific Java toolchain to ease working on different environments.\njava {\n    sourceCompatibility = JavaVersion.VERSION_25\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(25)\n    }\n}\n\napplication {\n    // Define the main class for the application.\n    mainModule = 'org.example'\n    mainClass = 'org.example.App'\n\n    // JVM arguments\n    applicationDefaultJvmArgs = [\n        '--enable-native-access=javafx.graphics',\n        '--add-exports', 'javafx.base/com.sun.javafx.event=org.controlsfx.controls',\n    ]\n}\n\ntasks.named('test') {\n    // Use JUnit Platform for unit tests.\n    useJUnitPlatform()\n}\n\njavafx {\n    version = '25.0.1'\n    modules = [ 'javafx.base', 'javafx.controls', 'javafx.graphics' ]\n}\n\njar {\n    archiveBaseName.set(rootProject.name)\n    manifest {\n        attributes 'Implementation-Title': 'Example App', 'Main-Class': 'org.example.App'\n    }\n}\n\ndef compileDir = rootProject.layout.projectDirectory.dir('compiled')\n\ntasks.register('readyAllJars', Copy) {\n    dependsOn tasks.jar\n    from configurations.runtimeClasspath\n    from tasks.named('jar').flatMap { it.archiveFile }\n    into layout.buildDirectory.dir('jars')\n}\n\njpackage {\n    dependsOn tasks.readyAllJars\n\n    type = ImageType.APP_IMAGE\n\n    appDescription = 'Mock application for demonstration purposes.'\n    appName = 'Example App'\n    appVersion = '0.0.1'\n    destination = compileDir\n    javaOptions = ['-Dfile.encoding=UTF-8']\n    module = 'org.example/org.example.App'\n    modulePaths = files(layout.buildDirectory.dir('jars'))\n    runtimeImage = file(System.getProperty('java.home'))\n    vendor = 'Achille004'\n\n    windows {\n        winConsole = true\n    }\n}\n</code></pre>\n<p>By running the application without any deferral it doesn't open (I guess it hangs), while adding <code>Platform.runLater</code> has the same result of not showing up.</p>\n",
    "tags" : [ "java", "javafx", "controlsfx" ],
    "owner" : {
      "account_id" : 21837180,
      "reputation" : 308,
      "user_id" : 16131265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name" : "Achille004",
      "link" : "https://stackoverflow.com/users/16131265/achille004"
    },
    "is_answered" : true,
    "view_count" : 71,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1765364900,
    "creation_date" : 1765285258,
    "link" : "https://stackoverflow.com/questions/79841955/coltrolsfxs-auto-completion-not-showing-up",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79842491,
    "question_id" : 79841955,
    "body" : "<p>So after lots of trying and painful packaging turns out the solution was very simple.</p>\n<p>By looking into the build script carefully I noticed this difference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>application {\n    // ...\n    applicationDefaultJvmArgs = [\n        '--enable-native-access=javafx.graphics',\n        '--add-exports', 'javafx.base/com.sun.javafx.event=org.controlsfx.controls',\n    ]\n}\n\njpackage {\n    // ...\n    javaOptions = ['-Dfile.encoding=UTF-8']\n    // ...\n}\n</code></pre>\n<p>And well, turns out I was misinterpreting the java options of the jpackage plugin by thinking that those were for jpackage.exe rather than the bundled java itself.</p>\n<p>This was causing JavaFX to fail silently (not even an exception) in the packaged version and checks out with the exclusive odd behavior.</p>\n<p>So now with:</p>\n<pre><code>jpackage {\n    //...\n    javaOptions = [\n        '-Dfile.encoding=UTF-8',\n        '--enable-native-access=javafx.graphics',\n        '--add-exports', 'javafx.base/com.sun.javafx.event=org.controlsfx.controls'\n    ]\n}\n</code></pre>\n<p>The sample project works properly, and I think my app will do the same.</p>\n<p><strong>NOTE:</strong> for anyone seeking reference, I found this slightly old but useful guide <a href=\"https://github.com/controlsfx/controlsfx/wiki/Using-ControlsFX-with-JDK-9-and-above\" rel=\"nofollow noreferrer\">https://github.com/controlsfx/controlsfx/wiki/Using-ControlsFX-with-JDK-9-and-above</a></p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 21837180,
      "reputation" : 308,
      "user_id" : 16131265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name" : "Achille004",
      "link" : "https://stackoverflow.com/users/16131265/achille004"
    },
    "creation_date" : 1765329938,
    "last_activity_date" : 1765363854,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140894923,
    "post_id" : 79841955,
    "body" : "@James_D Well since I isolated the problem to a 60-ish line class I guess there&#39;s a fundamental problem into those or the library. I was thinking too it has to be some packaging issues. The jpackage task fails to package an app image type, I&#39;m working on doing it",
    "score" : 2,
    "owner" : {
      "account_id" : 21837180,
      "reputation" : 308,
      "user_id" : 16131265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name" : "Achille004",
      "link" : "https://stackoverflow.com/users/16131265/achille004"
    },
    "creation_date" : 1765306365,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140894910,
    "post_id" : 79841955,
    "body" : "@SedJ601 I was able to reproduce the same behavior in a way simpler context, I&#39;ve edited the question",
    "score" : 1,
    "owner" : {
      "account_id" : 21837180,
      "reputation" : 308,
      "user_id" : 16131265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name" : "Achille004",
      "link" : "https://stackoverflow.com/users/16131265/achille004"
    },
    "creation_date" : 1765305941,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140894677,
    "post_id" : 79841955,
    "body" : "<i>&quot;Using <code>Platform.runLater()</code> prevents the application from hanging&quot;</i>. This suggests a more fundamental problem somewhere else in your code, as do the various hacks you describe as alternative workarounds. That said, if it works running directly but doesn&#39;t work when packaged, this would suggest the package doesn&#39;t have access to some required resources. You can use <code>jpackage</code> with <code>type=app-image</code> to see what is bundled, and run that app image from the command line to get access to any error messages. This question probably can&#39;t be answered without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and detailed debugging information.",
    "score" : 2,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1765297950,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140894618,
    "post_id" : 79841955,
    "body" : "It&#39;s been a while since I used this node from ControlsFX, but I never had to use <code>Platform.runLater</code> to use it. You might be doing something wrong. Create a very small sample app and add it to your question. I suppose this could be a packaging issue, but I would expect to receive some type of error message.",
    "score" : 1,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1765296056,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140894611,
    "post_id" : 79841955,
    "body" : "When running with <code>gradle :app:run</code> the auto completion works properly, that&#39;s why I&#39;m having a hard time debugging. Using <code>Platform.runLater</code> prevents the application from hanging. Now that I&#39;m mentioning it, I guess that might also be happening in the case of deferred executions, but that doesn&#39;t hang the FX Thread. Still, I don&#39;t know what to do",
    "score" : 0,
    "owner" : {
      "account_id" : 21837180,
      "reputation" : 308,
      "user_id" : 16131265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
      "display_name" : "Achille004",
      "link" : "https://stackoverflow.com/users/16131265/achille004"
    },
    "creation_date" : 1765295601,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140894560,
    "post_id" : 79841955,
    "body" : "What&#39;s up with the <code>Platform.runLater</code>s ?  Run the app from the command line to see if you get errors.",
    "score" : 0,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1765294000,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79842491" : [ {
      "comment_id" : 140897669,
      "post_id" : 79842491,
      "body" : "&quot;<i>since it was failing silently (I tried catching exceptions but nothing was happening)&quot;</i> -- Interesting. I copied your code from your question update and, after making it runnable (adding imports, module-info file, Gradle settings file, etc.), I get an <code>IllegalAccessError</code> stack trace printed to the console when executing the EXE created by <code>gradle jpackage</code> (due to the missing <code>--add-exports</code>). I also get a warning about a restricted method being used (due to the missing <code>--enable-native-access</code>).",
      "score" : 0,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49884,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1765444939,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140895968,
      "post_id" : 79842491,
      "body" : "@Slaw Yeah that helped a lot for speeding up the &quot;packaging&quot; process, I just forgot to modify it here. Still, it took a while to see that in the <code>app&#47;---.cfg</code> file there was no options about exporting modules, since it was failing silently (I tried catching exceptions but nothing was happening).",
      "score" : 0,
      "owner" : {
        "account_id" : 21837180,
        "reputation" : 308,
        "user_id" : 16131265,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/QuW5K.jpg?s=256",
        "display_name" : "Achille004",
        "link" : "https://stackoverflow.com/users/16131265/achille004"
      },
      "creation_date" : 1765364777,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140895473,
      "post_id" : 79842491,
      "body" : "&quot;<i>So after lots of trying and painful packaging</i>&quot; -- To potentially help others with debugging applications created by jpackage: Change the <code>--type</code> to <code>app-image</code> so that you don&#39;t have to go through installing the application before being able to run it. Make sure your application logs problems. The logs can go to the console and/or to files. Note you have to run your application from the terminal to see console output. On Windows you also need to pass <code>--win-console</code> to see console output.",
      "score" : 1,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49884,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1765342562,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}