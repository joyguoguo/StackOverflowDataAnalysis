{
  "question" : {
    "question_id" : 79601231,
    "title" : "Run gRPC server within Servlet container(say tomcat) sharing the same port",
    "body" : "<p>It seems to me that it is possible to run gRPC server on Servlet Server sharing the same port, say 8080 (see Servlet Server section of Spring gRPC doc <a href=\"https://docs.spring.io/spring-grpc/reference/server.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-grpc/reference/server.html</a>). Below is part of my pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.4.4&lt;/version&gt;\n    &lt;relativePath /&gt;  &lt;!--lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;grpc.version&gt;1.70.0&lt;/grpc.version&gt;\n    &lt;protobuf-java.version&gt;3.25.6&lt;/protobuf-java.version&gt;\n    &lt;spring-grpc.version&gt;0.7.0&lt;/spring-grpc.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.grpc&lt;/groupId&gt;\n        &lt;artifactId&gt;grpc-services&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.grpc&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-grpc-server-web-spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n... ... ...\n</code></pre>\n<p>Following is the console log when the app starts</p>\n<pre><code>Registering gRPC service: StatusQuery\nRegistering gRPC service: grpc.reflection.v1.ServerReflection\nRegistering gRPC service: grpc.health.v1.Health\n\n... ... ...\n\nLiveReload server is running on port 35729\nTomcat started on port 8080 (http) with context path '/web-context'\nStarted QueryServiceApplication in 23.59 seconds (process running for 25.383)\nInitializing Spring DispatcherServlet 'dispatcherServlet'\nInitializing Servlet 'dispatcherServlet'\nCompleted initialization in 3 ms\n</code></pre>\n<p>Then try to call grpc service by using grpcurl but get error</p>\n<p>grpcurl -d &quot;{&quot;name&quot;:&quot;USA&quot;}&quot; -plaintext localhost:8080 HelloWorld.SayHello\nError invoking method &quot;HelloWorld.SayHello&quot;: failed to query for service descriptor &quot;HelloWorld&quot;: server does not support the reflection API</p>\n<p>grpcurl -d &quot;{&quot;name&quot;:&quot;USA&quot;}&quot; -plaintext localhost:8080 HelloWorld/SayHello\nError invoking method &quot;HelloWorld/SayHello&quot;: failed to query for service descriptor &quot;HelloWorld&quot;: server does not support the reflection API</p>\n<p>grpcurl -d &quot;{&quot;name&quot;:&quot;USA&quot;}&quot; -plaintext localhost:8080 web-context/HelloWorld/SayHello\nError invoking method &quot;web-context/HelloWorld/SayHello&quot;: failed to query for service descriptor &quot;web-context/HelloWorld&quot;: server does not support the reflection API</p>\n<p>Did I miss some special configurations on gRPC server, or did I utilize wrong format to call the gRPC service?</p>\n",
    "tags" : [ "java", "spring-boot", "grpc", "servlet-container" ],
    "owner" : {
      "account_id" : 27297893,
      "reputation" : 11,
      "user_id" : 20815239,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6ae465432291350c7b22031b3aeb656c?s=256&d=identicon&r=PG",
      "display_name" : "szciz",
      "link" : "https://stackoverflow.com/users/20815239/szciz"
    },
    "is_answered" : false,
    "view_count" : 121,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746056976,
    "creation_date" : 1746056976,
    "link" : "https://stackoverflow.com/questions/79601231/run-grpc-server-within-servlet-containersay-tomcat-sharing-the-same-port",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140385982,
    "post_id" : 79601231,
    "body" : "<code>grpcurl</code> requires HTTP/2 and Netty. To test gRPC over servlet (HTTP/1.1), use a <code>gRPC-Web</code> compatible client or tools like <code>Postman with gRPC</code> support.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1746060683,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140385969,
    "post_id" : 79601231,
    "body" : "Thank you for your input. Running grpc on netty server won&#39;t meet my need. My app contains several Restful APIs in addition to grpc service. I need both embedded tomcat and grpc server listening on the same port, say 8080.",
    "score" : 0,
    "owner" : {
      "account_id" : 27297893,
      "reputation" : 11,
      "user_id" : 20815239,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6ae465432291350c7b22031b3aeb656c?s=256&d=identicon&r=PG",
      "display_name" : "szciz",
      "link" : "https://stackoverflow.com/users/20815239/szciz"
    },
    "creation_date" : 1746060148,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140385952,
    "post_id" : 79601231,
    "body" : "Can you try changing grpc-server lib to <code>&lt;artifactId&gt;spring-grpc-server-netty-spring-boot-starter&lt;&#47;ar&zwnj;&#8203;tifactId&gt;</code>  and try <code>grpcurl -plaintext localhost:9090 list grpcurl -d &#39;{&quot;name&quot;:&quot;USA&quot;}&#39; -plaintext localhost:9090 HelloWorld&#47;SayHello</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1746059625,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}