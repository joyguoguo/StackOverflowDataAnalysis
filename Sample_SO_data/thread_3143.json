{
  "question" : {
    "question_id" : 79569297,
    "title" : "Adding logic for specific type within a generic class in Java",
    "body" : "<p>In Java, what's the best way to implement <strong>common logic</strong> that is applicable to specific types in case of <strong>generic</strong> classes?</p>\n<p><strong>Context:</strong></p>\n<p>I am working with a legacy code that has &gt; 150 validators that validate &gt; 200 different objects. Each validator inherits from a base validator and use generics to validate multiple objects. Refer to the examples below for more context.</p>\n<p>I want to add a logic to that are specific to the objects being validate for all the validator. For example, I want to check the age of the objects and then change the criticality (urgent, need attention, info etc...) of the validation result. Objects being validated are different and do not share a common base class, to derive the age from for example</p>\n<p>Not sure what's the best way to go about it.</p>\n<p>The best way would be to have the logic in the BaseValidator, so that its shared across all validators. However, since this uses generic I will not be able to get the age of the object at this level without knowing what object is being validated (And all of them are completely different, without a interface or base class).</p>\n<p>Would appreciate any inputs or suggestions.</p>\n<p><strong>Example</strong></p>\n<p><strong>Base Class</strong></p>\n<pre><code>public abstract class BaseValidator&lt;T&gt; {\n\n     public BaseValidator(Function&lt;T&gt; validatorInput) {\n      this.validatorInput = validatorInput;\n     }\n      \n     public ValidationResult validate() {}\n     public addNotificationListener() {}\n     public removeNotificationListener() {}\n....\n}\n</code></pre>\n<p><strong>Duplicates Validator</strong></p>\n<pre><code>public class ValidateNoDuplicates&lt;T&gt; extends BaseValidator&lt;T&gt; {\n\npublic ValidateNoDuplicates(Function&lt;T&gt; validatorInput) {\nsuper(validatorInput);}\n          \n         public ValidationResult validate() {\n    //Use validatorInput to validate\n     }\n}\n</code></pre>\n<p><strong>NumberRanges Validator</strong></p>\n<pre><code>public class ValidateNumberRanges&lt;T&gt; extends BaseValidator&lt;T&gt; {\n\npublic ValidateNumberRanges(Function&lt;T&gt; validatorInput) {\nsuper(validatorInput);}\n          \n         public ValidationResult validate() {\n    //Use validatorInput to validate\n     }\n}\n</code></pre>\n<p><strong>Validator Factory</strong></p>\n<p><strong>BusScheduleValidator Factory</strong></p>\n<pre><code>public class BusScheduleValidatorFactory implements ScheduleValidatorFactory&lt;BusSchedule&gt; {\n\npublic ValidateNoDuplicates&lt;BusSchedule&gt; createNoDuplicateCheck() {\nreturn new ValidateNoDuplicates();\n}\n\npublic ValidateNumberRanges&lt;BusSchedule&gt; createRangeCheck() {\nreturn new ValidateNumberRanges();\n}\n\n}\n</code></pre>\n<p><strong>FlightScheduleValidator</strong></p>\n<pre><code>public class FlightScheduleValidatorFactory implements ScheduleValidatorFactory&lt;FlightSchedule&gt; {\n\npublic ValidateNoDuplicates&lt;FlightSchedule&gt; createNoDuplicateCheck() {\nreturn new ValidateNoDuplicates();\n}\n\npublic ValidateNumberRanges&lt;FlightSchedule&gt; createRangeCheck() {\nreturn new ValidateNumberRanges();\n}\n\n}\n</code></pre>\n<p>I want to decide the severity of the validation based on how old the BusSchedule/FlightSchedule is. And I do not want to update each validator with this logic.</p>\n",
    "tags" : [ "java", "templates", "generics" ],
    "owner" : {
      "account_id" : 32275128,
      "reputation" : 1,
      "user_id" : 25063709,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d1272072567aa6df060c8a15179fddac?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ABHINANDAN SRINIVASAN",
      "link" : "https://stackoverflow.com/users/25063709/abhinandan-srinivasan"
    },
    "is_answered" : false,
    "view_count" : 59,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744399110,
    "creation_date" : 1744388049,
    "link" : "https://stackoverflow.com/questions/79569297/adding-logic-for-specific-type-within-a-generic-class-in-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140349341,
    "post_id" : 79569297,
    "body" : "“ I would like to check the age of the objects and then change the criticality (urgent, to note, info etc...) of the validation result.” Does this apply to every single validator? Or are there different criticalities for different types of objects? I would definitely follow the approach of @teapot418 (nice name btw ;-)) and handle this via <code>BaseValidator</code> with an abstract method to retrieve the age (and maybe also the threshold, if there are different ones).",
    "score" : 0,
    "owner" : {
      "account_id" : 11555562,
      "reputation" : 569,
      "user_id" : 8466853,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cd7f72b426ce3c46739900b8ba014e26?s=256&d=identicon&r=PG",
      "display_name" : "Arno",
      "link" : "https://stackoverflow.com/users/8466853/arno"
    },
    "creation_date" : 1745015293,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140325945,
    "post_id" : 79569297,
    "body" : "If it is more convoluted, you may have to make a separate <code>AgeExtractor</code> thingy that has handling for all the different classes?",
    "score" : 0,
    "owner" : {
      "account_id" : 19435569,
      "reputation" : 2968,
      "user_id" : 21105992,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKQkV.png?s=256",
      "display_name" : "teapot418",
      "link" : "https://stackoverflow.com/users/21105992/teapot418"
    },
    "creation_date" : 1744398608,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140325942,
    "post_id" : 79569297,
    "body" : "If the inheritance hierarchy is straightforward with <code>BaseValidator</code> at the top, you can have an abstract <code>extractAge</code> method in base that the derived classes have to populate for the objects they understand. Which the logic in base can still call and get the implementation from the derived class.",
    "score" : 1,
    "owner" : {
      "account_id" : 19435569,
      "reputation" : 2968,
      "user_id" : 21105992,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKQkV.png?s=256",
      "display_name" : "teapot418",
      "link" : "https://stackoverflow.com/users/21105992/teapot418"
    },
    "creation_date" : 1744398541,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}