{
  "question" : {
    "question_id" : 79777322,
    "title" : "How to use FIXED_LIST instead of MULTICAST in griddb using jdbc driver",
    "body" : "<p>The GridDB server has been configured to use FIXED_LIST instead of MULTICAST and is functioning correctly. While the c_client and Java samples within GridDB operate as intended, the samples for JDBC are not working.\nGridDB configurations:</p>\n<p><code>conf/gs_cluster.json:</code></p>\n<pre><code>{\n    &quot;dataStore&quot;:{\n        &quot;partitionNum&quot;:128,\n        &quot;storeBlockSize&quot;:&quot;64KB&quot;\n    },\n    &quot;cluster&quot;:{\n        &quot;clusterName&quot;:&quot;cluster1&quot;,\n        &quot;replicationNum&quot;:2,\n        &quot;notificationInterval&quot;:&quot;5s&quot;,\n        &quot;heartbeatInterval&quot;:&quot;5s&quot;,\n        &quot;loadbalanceCheckInterval&quot;:&quot;180s&quot;,\n                &quot;notificationMember&quot; : [\n                {\n                &quot;cluster&quot;: {&quot;address&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 10010},\n                &quot;sync&quot;: {&quot;address&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 10020},\n                &quot;system&quot;: {&quot;address&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 10040},\n                &quot;transaction&quot;: {&quot;address&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 10001},\n                &quot;sql&quot;: {&quot;address&quot;: &quot;127.0.0.1&quot;, &quot;port&quot;: 20001}\n                },\n                {\n                &quot;cluster&quot;: {&quot;address&quot;: &quot;127.0.0.2&quot;, &quot;port&quot;: 10010},\n                &quot;sync&quot;: {&quot;address&quot;: &quot;127.0.0.2&quot;, &quot;port&quot;: 10020},\n                &quot;system&quot;: {&quot;address&quot;: &quot;127.0.0.2&quot;, &quot;port&quot;: 10040},\n                &quot;transaction&quot;: {&quot;address&quot;: &quot;127.0.0.2&quot;, &quot;port&quot;: 10001},\n                &quot;sql&quot;: {&quot;address&quot;: &quot;127.0.0.2&quot;, &quot;port&quot;: 20001}\n                },\n                ]\n    },\n}\n</code></pre>\n<p><code>conf/repository.json:</code></p>\n<pre><code>\n{\n  &quot;clusters&quot;:[\n    &quot;name&quot; : &quot;cluster1&quot;,\n    &quot;mode&quot; : &quot;FIXED_LIST&quot;\n  ]\n}\n</code></pre>\n<p><code>Minimal reproducible code sample:</code></p>\n<pre><code>import java.net.URLEncoder;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class JDBCSelect {\n\n    public static void main(String[] args){\n        try {\n            //===============================================\n            // Connecting to a cluster\n            //===============================================\n            // Connection information of JDBC\n            String jdbcAddress = &quot;127.0.0.2&quot;;\n            String jdbcPort = &quot;10001&quot;;\n            String clusterName = &quot;cluster1&quot;;\n            String databaseName = &quot;public&quot;;\n            String username = &quot;admin&quot;;\n            String password = &quot;admin&quot;;\n            String applicationName = &quot;SampleJDBC&quot;;\n\n            // Encoding a cluster name and a database name\n            String encodeClusterName = URLEncoder.encode(clusterName, &quot;UTF-8&quot;);\n            String encodeDatabaseName = URLEncoder.encode(databaseName, &quot;UTF-8&quot;);\n\n            // Creating a URL (Multicast method)\n            String jdbcUrl = &quot;jdbc:gs://&quot;+jdbcAddress+&quot;:&quot;+jdbcPort+&quot;/&quot;+encodeClusterName+&quot;/&quot;+encodeDatabaseName;\n\n            Properties prop = new Properties();\n            prop.setProperty(&quot;user&quot;, username);\n            prop.setProperty(&quot;password&quot;, password);\n            prop.setProperty(&quot;applicationName&quot;, applicationName);\n\n            // Connecting\n            Connection con = DriverManager.getConnection(jdbcUrl, prop);\n\n            //===============================================\n            // Creating a container and registering data\n            //===============================================\n            {\n                Statement stmt = con.createStatement();\n\n                // (Delete the container if it already exists)\n                stmt.executeUpdate(&quot;DROP TABLE IF EXISTS SampleJDBC_Select&quot;);\n\n                // Creating a container\n                stmt.executeUpdate(&quot;CREATE TABLE IF NOT EXISTS SampleJDBC_Select ( id integer PRIMARY KEY, value string )&quot;);\n                System.out.println(&quot;SQL Create Table name=SampleJDBC_Select&quot;);\n\n                // Registering a row\n                int ret1 = stmt.executeUpdate(&quot;INSERT INTO SampleJDBC_Select values &quot;+\n                                            &quot;(0, 'test0'),(1, 'test1'),(2, 'test2'),(3, 'test3'),(4, 'test4')&quot;);\n                System.out.println(&quot;SQL Insert count=&quot; + ret1);\n\n                stmt.close();\n            }\n\n            //===============================================\n            // Executing a search\n            //===============================================\n            // (1) Creating a statement\n            Statement stmt = con.createStatement();\n\n            // (2) Executing a SQL command\n            ResultSet rs = stmt.executeQuery(&quot;SELECT * from SampleJDBC_Select where ID &gt; 2&quot;);\n\n            // (3) Getting a result\n            while( rs.next() ){\n                int id = rs.getInt(1);\n                String value = rs.getString(2);\n                System.out.println(&quot;SQL row(id=&quot; + id + &quot;, value=&quot; + value + &quot;)&quot;);\n            }\n\n            //===============================================\n            // Terminating process\n            //===============================================\n            stmt.close();\n            con.close();\n            System.out.println(&quot;success!&quot;);\n\n        } catch ( Exception e ){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p><strong>ERROR:</strong></p>\n<pre><code>java.sql.SQLException: [10054:TXN_CLIENT_VERSION_NOT_ACCEPTABLE] (connectClientVersion=-9,serverVersion=15) (address=127.0.0.2:10001, partitionId=0)\n</code></pre>\n<p>Based on a prior encounter with this error, the issue is likely related to the GridDB server's FIXED_LIST configuration. While the c_client and native Java samples for GridDB are functioning correctly, the Java Database Connectivity (JDBC) samples are not. I suppose there is a need to update the java sample from multicast to fixed list but don't know how. All java samples are using multicast and jdbc driver repo didn't mention any settings there too.</p>\n<p>Although took a guess and tried adding a parameter for notificationMember but that didn't worked either.\n<code>//prop.setProperty(&quot;notificationMember&quot;, &quot;127.0.0.2:10001&quot;)</code></p>\n<pre><code>java.sql.SQLException: [10054:JDBC_ILLEGAL_PARAMETER] Notification property and other network address can not specified at the same time (uri=gs://127.0.0.2:10001/cluster1/public, notificationMember=127.0.0.2:10001, otherAdress=[/127.0.0.2:10001])\n</code></pre>\n<p>I suppose this needs to be fixed but not sure how?</p>\n<pre><code>// Creating a URL (Multicast method)\nString jdbcUrl = &quot;jdbc:gs://&quot;+jdbcAddress+&quot;:&quot;+jdbcPort+&quot;/&quot;+encodeClusterName+&quot;/&quot;+encodeDatabaseName;\n</code></pre>\n",
    "tags" : [ "java", "jdbc", "griddb" ],
    "owner" : {
      "account_id" : 43973555,
      "reputation" : 94,
      "user_id" : 31510249,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/766afafde5147889778027cb01081c58?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "iot_builder",
      "link" : "https://stackoverflow.com/users/31510249/iot-builder"
    },
    "is_answered" : true,
    "view_count" : 86,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1759116823,
    "creation_date" : 1759063192,
    "link" : "https://stackoverflow.com/questions/79777322/how-to-use-fixed-list-instead-of-multicast-in-griddb-using-jdbc-driver",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79777475,
    "question_id" : 79777322,
    "body" : "<p>The <a href=\"https://github.com/griddb/docs-en/blob/master/manuals/GridDB_JDBC_Driver_UserGuide.md\" rel=\"nofollow noreferrer\">Documentation</a> recommends using a notification member,</p>\n<pre><code>jdbc:gs:///(clusterName)/(databaseName)?notificationMember=(notificationMember)\n</code></pre>\n<p>and port change from <code>String jdbcport = &quot;10001&quot;;</code> that previously was used for TQL to <code>String jdbcport = &quot;20001&quot;;</code> SQL made it work.</p>\n<blockquote>\n<p>notificationMember can be changed by editing the gs_cluster.json file. The port in the address list can be changed by editing the gs_node.json file.</p>\n</blockquote>\n<p>Full working code:</p>\n<pre><code>import java.net.URLEncoder;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.ResultSet;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class JDBCSelect {\n\n    public static void main(String[] args){\n        try {\n            //===============================================\n            // Connecting to a cluster\n            //===============================================\n            // Connection information of JDBC\n            String jdbcAddress = &quot;127.0.0.2&quot;;\n            String jdbcPort = &quot;20001&quot;;\n            String clusterName = &quot;cluster1&quot;;\n            String databaseName = &quot;public&quot;;\n            String username = &quot;admin&quot;;\n            String password = &quot;admin&quot;;\n            String applicationName = &quot;SampleJDBC&quot;;\n\n            // Encoding a cluster name and a database name\n            String encodeClusterName = URLEncoder.encode(clusterName, &quot;UTF-8&quot;);\n            String encodeDatabaseName = URLEncoder.encode(databaseName, &quot;UTF-8&quot;);\n            String encodeNotificationMember = URLEncoder.encode(jdbcAddress +&quot;:&quot;+jdbcPort, &quot;UTF-8&quot;);\n\n            // Creating a URL (Multicast method)\n            //String jdbcUrl = &quot;jdbc:gs://&quot;+jdbcAddress+&quot;:&quot;+jdbcPort+&quot;/&quot;+encodeClusterName+&quot;/&quot;+encodeDatabaseName;\n             // Creating a URL (FIXED_LIST method)\n             String jdbcUrl = &quot;jdbc:gs:///&quot;+encodeClusterName+&quot;/&quot;+encodeDatabaseName+&quot;?notificationMember=&quot;+encodeNotificationMember;\n\n            Properties prop = new Properties();\n            prop.setProperty(&quot;user&quot;, username);\n            prop.setProperty(&quot;password&quot;, password);\n            prop.setProperty(&quot;applicationName&quot;, applicationName);\n\n            // Connecting\n            Connection con = DriverManager.getConnection(jdbcUrl, prop);\n\n            //===============================================\n            // Creating a container and registering data\n            //===============================================\n            {\n                Statement stmt = con.createStatement();\n\n                // (Delete the container if it already exists)\n                stmt.executeUpdate(&quot;DROP TABLE IF EXISTS SampleJDBC_Select&quot;);\n\n                // Creating a container\n                stmt.executeUpdate(&quot;CREATE TABLE IF NOT EXISTS SampleJDBC_Select ( id integer PRIMARY KEY, value string )&quot;);\n                System.out.println(&quot;SQL Create Table name=SampleJDBC_Select&quot;);\n\n                // Registering a row\n                int ret1 = stmt.executeUpdate(&quot;INSERT INTO SampleJDBC_Select values &quot;+\n                                            &quot;(0, 'test0'),(1, 'test1'),(2, 'test2'),(3, 'test3'),(4, 'test4')&quot;);\n                System.out.println(&quot;SQL Insert count=&quot; + ret1);\n\n                stmt.close();\n            }\n\n            //===============================================\n            // Executing a search\n            //===============================================\n            // (1) Creating a statement\n            Statement stmt = con.createStatement();\n\n            // (2) Executing a SQL command\n            ResultSet rs = stmt.executeQuery(&quot;SELECT * from SampleJDBC_Select where ID &gt; 2&quot;);\n\n            // (3) Getting a result\n            while( rs.next() ){\n                int id = rs.getInt(1);\n                String value = rs.getString(2);\n                System.out.println(&quot;SQL row(id=&quot; + id + &quot;, value=&quot; + value + &quot;)&quot;);\n            }\n\n            //===============================================\n            // Terminating process\n            //===============================================\n            stmt.close();\n            con.close();\n            System.out.println(&quot;success!&quot;);\n\n        } catch ( Exception e ){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 43973555,
      "reputation" : 94,
      "user_id" : 31510249,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/766afafde5147889778027cb01081c58?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "iot_builder",
      "link" : "https://stackoverflow.com/users/31510249/iot-builder"
    },
    "creation_date" : 1759080167,
    "last_activity_date" : 1759116823,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140765151,
    "post_id" : 79777322,
    "body" : "Found this document, <a href=\"https://github.com/griddb/docs-en/blob/master/manuals/GridDB_JDBC_Driver_UserGuide.md\" rel=\"nofollow noreferrer\">github.com/griddb/docs-en/blob/master/manuals/&hellip;</a> which states: If the fixed list method is used to compose a cluster, use this method to connect. <code>jdbc:gs:&#47;&#47;&#47;(clusterName)&#47;(databaseName)?notificationMember=(&zwnj;&#8203;notificationMember) </code>",
    "score" : 0,
    "owner" : {
      "account_id" : 43973555,
      "reputation" : 94,
      "user_id" : 31510249,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/766afafde5147889778027cb01081c58?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "iot_builder",
      "link" : "https://stackoverflow.com/users/31510249/iot-builder"
    },
    "creation_date" : 1759079641,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}