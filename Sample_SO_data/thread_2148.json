{
  "question" : {
    "question_id" : 79642674,
    "title" : "Struts 6.4.0 not setting inputs into objects",
    "body" : "<p>I am migrating an application from Struts 2.* to 6.4.0.  But I am seeing an issue when the form is submitted from the jsp.</p>\n<p>The jsp looks like this:</p>\n<pre><code>&lt;s:form id=&quot;appDetailsForm&quot; action=&quot;UpdateApp_newApp&quot;&gt;\n   &lt;s:submit value=&quot;Save Change&quot;/&gt;\n   &lt;s:textfield name=&quot;checkThis&quot; value=&quot;appName&quot;/&gt;\n   &lt;s:textfield name=&quot;application.appName&quot; size=&quot;40&quot; maxlength=&quot;40&quot; /&gt;\n&lt;/s:form&gt;\n</code></pre>\n<p>It renders to:</p>\n<pre><code>&lt;form id=&quot;appDetailsForm&quot; name=&quot;appDetailsForm&quot; action=&quot;/contextroot/UpdateApp_newApp.action&quot; method=&quot;post&quot;&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Save Change&quot; id=&quot;appDetailsForm_0&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;checkThis&quot; value=&quot;appName&quot; id=&quot;appDetailsForm_checkThis&quot;&gt;\n    &lt;input type=&quot;text&quot; name=&quot;application.appName&quot; size=&quot;40&quot; maxlength=&quot;40&quot; value=&quot;&quot; id=&quot;appDetailsForm_application_appName&quot;&gt;\n&lt;/form&gt;\n</code></pre>\n<p>When I submit the form however, the application.appName fields does not go into the application object.\nAction:</p>\n<pre><code>public class UpdateApplication extends ActionSupport implements SessionAware, ServletResponseAware {\n    private String checkThis;\n    private AppMapping application;\n\n    public String newApp() throws Exception {\n        :\n        application.getAppName(); //This throws an exception because application is null\n        :\n    }\n\n    public void setApplication(AppMapping application) {\n        this.application = application;\n    }\n\n    public void setCheckThis(String checkThis) {\n        this.checkThis = checkThis;\n    }\n    \n}\n</code></pre>\n<p>And the AppMapping class look like this:</p>\n<pre><code>public class AppMapping{\n    private String appName;\n    public AppMapping() {} \n\n    public void setAppName(String appName) {\n        this.appName = appName;\n    }\n}\n</code></pre>\n<p>So the problem is that the application.appName is not creating the AppMapping application object and populating into the application object.  With Struts 2.x, this worked.  But with 6.4.0, the application is not receiving the inputs from the form.  The checkThis attribute is being populated however.</p>\n<p>I've tried setting &quot;struts.disallowProxyObjectAccess=false&quot; in the struts.properties but that didn't work.  I tried a few other things that didn't work either.  I thought it was maybe the camelcasing but it's not that either.  I've set breakpoints in the setApplication() method in the action class but it does not get hit.</p>\n<p>Any help would be appreciated.</p>\n<p><strong>UPDATE</strong>:</p>\n<p>Once I changed &quot;application.&quot; in the jsp to &quot;app.&quot;, and created getApp() and setApp() in the action, it started to work.  Is &quot;application&quot; a reserved word in Struts2??</p>\n",
    "tags" : [ "java", "struts2", "struts", "struts-tags" ],
    "owner" : {
      "account_id" : 194643,
      "reputation" : 904,
      "user_id" : 1913845,
      "user_type" : "registered",
      "accept_rate" : 83,
      "profile_image" : "https://www.gravatar.com/avatar/aa5389d9397b38e3ce0c4850b5180124?s=256&d=identicon&r=PG",
      "display_name" : "dev4life",
      "link" : "https://stackoverflow.com/users/1913845/dev4life"
    },
    "is_answered" : true,
    "view_count" : 173,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1762605496,
    "creation_date" : 1748450809,
    "link" : "https://stackoverflow.com/questions/79642674/struts-6-4-0-not-setting-inputs-into-objects",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79741621,
    "question_id" : 79642674,
    "body" : "<p>What's happening is the 'application.appName' form field or parameter name is failing security checks introduced in an early 2.X version and the form field value discarded.  As you've already discovered, it is the 'application' part that fails and you can get round this by using a different property name.</p>\n<p>Documentation, found at <a href=\"https://struts.apache.org/core-developers/parameters-interceptor#excluding-parameters\" rel=\"nofollow noreferrer\">https://struts.apache.org/core-developers/parameters-interceptor#excluding-parameters</a>, says the excluded parameter regex pattern is the following.</p>\n<pre><code>dojo..*,^struts..*,^session..*,^request..*,^application..*,^servlet(Request|Response)..*,parameters...*\n</code></pre>\n<p>For 6.4.0, this is wrong and the security check is matching any of the following pair of regex monstrosities, found in com.opensymphony.xwork2.security.DefaultExcludedPatternChecker.</p>\n<pre><code>(^|\\%\\{)((#?)(top(\\.|\\['|\\[\\&quot;)|\\[\\d\\]\\.)?)(dojo|struts|session|request|response|application|servlet(Request|Response|Context)|parameters|context|_memberAccess)(\\.|\\[).*\n.*(^|\\.|\\[|\\'|\\&quot;|get)class(\\(\\.|\\[|\\'|\\&quot;).*\n</code></pre>\n<p>'application.appName' does match the first regex expression.  Also note 'context' and '_memberAccess' not mentioned in documentation.</p>\n<p>It is possible to change the excluded parameter pattern on an application wide and/or per Action basis but that risks security.  You're better off just changing the form field name.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 43377924,
      "reputation" : 36,
      "user_id" : 31215990,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/xxUKnsiI.jpg?s=256",
      "display_name" : "Matthew Greet",
      "link" : "https://stackoverflow.com/users/31215990/matthew-greet"
    },
    "creation_date" : 1755726543,
    "last_activity_date" : 1755872380,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79813182,
    "question_id" : 79642674,
    "body" : "<p>For those looking for a deeper answer, what the security checks are protecting are the standard objects of the ValueStack.  The ValueStack is a list of named objects of just about everything, including the invoked Action and aspects of servlet context, so your JSP code and submitted forms can read and set them as properties.  When asked to read or set data, the ValueStack finds the first property or object matching.</p>\n<p>When the author's form is submitted, Struts 2 sets the 'application.appName' property. If the security didn't discard it, the Action instance would match as it has the 'application' property, then the 'appName' property of said 'application' property would be set (though that would fail because the 'application' property is null).</p>\n<p>Alas, 'application' is a named object in the ValueStack, which is all the application scope properties.  In a Jakarta EE server, these are the ServletContext attributes.  If the Action doesn't have an 'application' property and security doesn't happen, Struts 2 matches the application object and sets the 'appName' attribute.  Setting an application scope property.</p>\n<p>For form submission, the property names to be set come from the form field names, which the user can hack, whether your receiving Action expects them or not.  Without the security checks, random users can hack various objects, including session-based data.  Got the customer's account in session?  If the user can guess the attribute and property names, he can change the account no.  Hence, form field names starting with 'applicaton, 'session', 'request' and the like are silently thrown away.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 43377924,
      "reputation" : 36,
      "user_id" : 31215990,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/xxUKnsiI.jpg?s=256",
      "display_name" : "Matthew Greet",
      "link" : "https://stackoverflow.com/users/31215990/matthew-greet"
    },
    "creation_date" : 1762605496,
    "last_activity_date" : 1762605496,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79741621" : [ {
      "comment_id" : 140842878,
      "post_id" : 79741621,
      "body" : "Hey Matthew.  Thanks!  I think this is the issue.  I ended up just using a different name, like you said.",
      "score" : 0,
      "owner" : {
        "account_id" : 194643,
        "reputation" : 904,
        "user_id" : 1913845,
        "user_type" : "registered",
        "accept_rate" : 83,
        "profile_image" : "https://www.gravatar.com/avatar/aa5389d9397b38e3ce0c4850b5180124?s=256&d=identicon&r=PG",
        "display_name" : "dev4life",
        "link" : "https://stackoverflow.com/users/1913845/dev4life"
      },
      "creation_date" : 1762568454,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140680664,
      "post_id" : 79741621,
      "body" : "As itâ€™s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/79741621/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1755736268,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}