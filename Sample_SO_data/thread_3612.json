{
  "question" : {
    "question_id" : 79536584,
    "title" : "intl-tel-input erro in jhipster - problem with CSP",
    "body" : "<p>I'm having problems regarding CSP rules in my jhipster project, I'm using the intl-tel-input plugin, the problem is, locally the flags (flags.png) work, load and are visible to the user, but when I upload the code and update it in an external environment, the country flags don't appear and I get the error:</p>\n<p><a href=\"https://i.sstatic.net/UmfmcvFE.png\" rel=\"nofollow noreferrer\">image flags.png blocked for csp</a></p>\n<p>That is, the error &quot;flags.png blocked:csp&quot; shows a block on this file. I clicked on the marked file in the console and opened it statically directly via the URL, but the application can't because of the block.</p>\n<p>Since it's jhipster, I went to the &quot;SecurityConfiguration.java&quot; file, which is responsible for the rules in this case. Mine currently looks like this:</p>\n<pre><code>headers\n                    .contentSecurityPolicy(csp -&gt;\n                        csp.policyDirectives(\n                            jHipsterProperties.getSecurity().getContentSecurityPolicy() + // Corrigir a concatenação\n                            &quot;script-src 'self' 'unsafe-inline' 'unsafe-eval' &quot; +\n                            &quot;https://www.youtube.com https://www.googleapis.com https://storage.googleapis.com https://cdnjs.cloudflare.com;&quot; +\n                            &quot;frame-src 'self' https://www.youtube.com https://youtube.com;&quot; +\n                            &quot;img-src 'self' https://img.youtube.com https://cdnjs.cloudflare.com data:;&quot; +\n                            &quot;media-src 'self' https://www.youtube.com https://youtube.com;&quot;\n                        ))\n                    .frameOptions(FrameOptionsConfig::sameOrigin)\n                    .referrerPolicy(referrer -&gt; referrer.policy(ReferrerPolicyHeaderWriter.ReferrerPolicy.STRICT_ORIGIN_WHEN_CROSS_ORIGIN))\n                    .permissionsPolicy(\n                        permissions -&gt;\n                            permissions.policy(\n                                &quot;camera=(), fullscreen=(self), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), midi=(), payment=(), sync-xhr=()&quot;\n                            )\n                    ))\n</code></pre>\n<p>This is my html:</p>\n<pre><code>&lt;head&gt;\n  &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css&quot; /&gt;\n  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n</code></pre>\n<p>I really think the problem is in SecurityConfiguration.java.</p>\n<p>Does anyone know how to solve this?</p>\n<p>That is, if the <code>flags.png</code> URL is <code>&quot;https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/img/flags.png&quot;</code>, I added the <code>&quot;https://cdnjs.cloudflare.com&quot;</code> permission to <code>img-src</code>, but it still didn't work and the <code>flags.png</code> file is still blocked in the external production environment. What could I do to fix this?\nRemembering that I've already tested adding the full address but the error persists, and also remembering that the HTML doesn't have any &quot;meta&quot; tag that could be blocking it.</p>\n",
    "tags" : [ "java", "html", "jhipster", "content-security-policy", "intl-tel-input" ],
    "owner" : {
      "account_id" : 24367538,
      "reputation" : 11,
      "user_id" : 18301036,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/f5gtu9h6.jpg?s=256",
      "display_name" : "JackmanBR - Paulo Guerra",
      "link" : "https://stackoverflow.com/users/18301036/jackmanbr-paulo-guerra"
    },
    "is_answered" : false,
    "view_count" : 52,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1742996616,
    "creation_date" : 1742996077,
    "link" : "https://stackoverflow.com/questions/79536584/intl-tel-input-erro-in-jhipster-problem-with-csp",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140274789,
    "post_id" : 79536584,
    "body" : "i solved this problem, i include permission in application.prod.yml, in secssion &quot;content-security-police: img-src&quot;, thanks.",
    "score" : 0,
    "owner" : {
      "account_id" : 24367538,
      "reputation" : 11,
      "user_id" : 18301036,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/f5gtu9h6.jpg?s=256",
      "display_name" : "JackmanBR - Paulo Guerra",
      "link" : "https://stackoverflow.com/users/18301036/jackmanbr-paulo-guerra"
    },
    "creation_date" : 1743181487,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140268802,
    "post_id" : 79536584,
    "body" : "Please go check what your browser console has to say, there should be are more extended explanation as to <i>why</i> this request was blocked in there.",
    "score" : 0,
    "owner" : {
      "account_id" : 1530592,
      "reputation" : 97739,
      "user_id" : 1427878,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6bd890954a792dbee22792c2402f13a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "C3roe",
      "link" : "https://stackoverflow.com/users/1427878/c3roe"
    },
    "creation_date" : 1743069522,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}