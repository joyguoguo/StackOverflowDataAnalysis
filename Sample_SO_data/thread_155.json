{
  "question" : {
    "question_id" : 79831562,
    "title" : "Intercepting user toggle button clicks",
    "body" : "<p>Can you intercept <code>JToggleButton</code> clicks, making the <code>selected</code> property change conditional? If you add <code>ItemListener</code> or <code>ActionListener</code>, you can't veto the change, it's already happened. Switching the state back would generate an extra event (there should be no events if the click is vetoed).</p>\n<p>Use case: the button state corresponds to some external state, e.g. a DB column value. Once the button is clicked, the external state is mutated accordingly, but the request may be unsuccessful for whatever reason. The GUI state must correspond to an actual external state, so it must follow the latter, not the other way around.</p>\n<p>Keep in mind the initial <code>selected</code> state of the toggle is set programmatically (according to the external state). That call must <strong>not</strong> be intercepted. If it was, then on each GUI load there would be an unnecessary request in the described scenario.</p>\n<p>Is listening to mouse clicks and consuming the event in case of a &quot;veto&quot; the only way? I hate to listen to mouse clicks, it smells of kludgy design.</p>\n<p>If you run the demo, you'll notice this in your console, even before you do any clicking.</p>\n<pre><code>Updating external state to true...\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.JToggleButton;\nimport javax.swing.WindowConstants;\nimport java.awt.Container;\n\npublic class ToggleButtonDemo {\n\n    public static void main(String[] args) {\n        Container mainPanel = createMainPanel();\n        JFrame frame = new JFrame(&quot;Toggle Button Demo&quot;);\n        frame.setContentPane(mainPanel);\n        frame.setLocationRelativeTo(null);\n        frame.pack();\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n\n    private static JPanel createMainPanel() {\n        JPanel panel = new JPanel();\n        panel.add(toggleButtonPanel());\n        return panel;\n    }\n\n    private static JPanel toggleButtonPanel() {\n        JPanel toggleButtonPanel = new JPanel();\n        toggleButtonPanel.add(createToggleButton());\n        return toggleButtonPanel;\n    }\n\n    private static JToggleButton createToggleButton() {\n        JToggleButton toggleButton = new JToggleButton(&quot;Toggle me&quot;);\n        toggleButton.setModel(new JToggleButton.ToggleButtonModel() {\n            @Override\n            public void setSelected(boolean b) {\n                // intercepts programmatic calls too, unacceptable\n                if (externalStateUpdated(b)) super.setSelected(b);\n            }\n        });\n        toggleButton.setSelected(isSelectedInDb());\n        return toggleButton;\n    }\n\n    private static boolean externalStateUpdated(boolean requestedSelected) {\n        System.out.printf(&quot;Updating external state to %s...\\n&quot;, requestedSelected);\n        return true;\n    }\n\n    private static boolean isSelectedInDb() {\n        // assuming it's always true\n        return true;\n    }\n}\n</code></pre>\n<p>Java 8.</p>\n",
    "tags" : [ "java", "swing" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2675,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : true,
    "view_count" : 102,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1764314157,
    "creation_date" : 1764235745,
    "link" : "https://stackoverflow.com/questions/79831562/intercepting-user-toggle-button-clicks",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}