{
  "question" : {
    "question_id" : 79531959,
    "title" : "logback not working the same throughout the project",
    "body" : "<p>Full project on Github (check no-logs branch): <a href=\"https://github.com/BenVella/backend-java/tree/no-logs\" rel=\"nofollow noreferrer\">https://github.com/BenVella/backend-java/tree/no-logs</a></p>\n<p>Problem:  Running in docker-compose for rabbitmq and postgres.  I'm not getting logs showing up for whatever reason with <strong>one exception</strong>.</p>\n<p>I imported BezKoder's auth system and he has one class with does a <code>logger.error</code> which does show:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class AuthEntryPointJwt implements AuthenticationEntryPoint {\n\n  private static final Logger logger = LoggerFactory.getLogger(AuthEntryPointJwt.class);\n\n  @Override\n  public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)\n      throws IOException, ServletException {\n    logger.error(&quot;Unauthorized error: {}&quot;, authException.getMessage());\n</code></pre>\n<p>^ AuthEntryPointJwt in <code>com.backend.security.jwt</code></p>\n<p>I'm seeing the following entry when I trigger this error on purpose:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2025-03-24 19:49:34 2025-03-24T18:49:34.406Z ERROR 1 --- [order-taking-api] [nio-8080-exec-5] c.b.security.jwt.AuthEntryPointJwt       : Unauthorized error: Full authentication is required to access this resource\n</code></pre>\n<p>If it's of any use, this is under the <code>com.backend.security</code> package whereas my target logic is meant to fall under the <code>com.backend.order</code> package.</p>\n<p>I setup my OrderController in much the same way, as far as I can see:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/orders&quot;)\npublic class OrderController {\n    private final static Logger log = LoggerFactory.getLogger(OrderController.class);\n\n    private final OrderService orderService;\n\n    public OrderController(OrderService orderService) {\n        this.orderService = orderService;\n        log.info(&quot;OrderController initialized&quot;);\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;String&gt; createOrder(@RequestBody Order order) {\n        System.console().printf(&quot;Received order: %s%n&quot;, order);\n        log.info(&quot;Received order {}&quot;, order);\n        log.error(&quot;An error occurred while processing the order&quot;);\n</code></pre>\n<p>^ OrderController in <code>com.backend.order.controllers</code></p>\n<p>Yes lots of pointless logs but I'm seeing none of them and was wondering if it mattered whatever I changed.</p>\n<p>The Jwt logs worked before I even did any sort of configuration straight out of the gate.</p>\n<p>But I did include a <code>logback-spring.xml</code>, updated <code>application.properties</code> to log down to TRACE and define a logfile and generally followed what's mentioned here:</p>\n<p><a href=\"https://www.baeldung.com/spring-boot-logging\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-logging</a></p>\n<p>But alas, with all the variants I tried, the security is able to log just fine, but the other order package I built never reports anything.  I'm still able to access the necessary endpoints without issue for consumption.</p>\n<p>Setup:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n\n    &lt;property name=&quot;LOGS&quot; value=&quot;./logs&quot; /&gt;\n\n    &lt;appender name=&quot;Console&quot;\n        class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n        &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\n            &lt;Pattern&gt;\n                %black(%d{ISO8601}) %highlight(%-5level) [%blue(%t)] %yellow(%C{1}): %msg%n%throwable\n            &lt;/Pattern&gt;\n        &lt;/layout&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=&quot;RollingFile&quot;\n        class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n        &lt;file&gt;${LOGS}/spring-boot-logger.log&lt;/file&gt;\n        &lt;encoder\n            class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\n            &lt;Pattern&gt;%d %p %C{1} [%t] %m%n&lt;/Pattern&gt;\n        &lt;/encoder&gt;\n\n        &lt;rollingPolicy\n            class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n            &lt;!-- rollover daily and when the file reaches 10 MegaBytes --&gt;\n            &lt;fileNamePattern&gt;${LOGS}/archived/spring-boot-logger-%d{yyyy-MM-dd}.%i.log\n            &lt;/fileNamePattern&gt;\n            &lt;timeBasedFileNamingAndTriggeringPolicy\n                class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\n                &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\n        &lt;/rollingPolicy&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- LOG everything at INFO level --&gt;\n    &lt;root level=&quot;info&quot;&gt;\n        &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;\n        &lt;appender-ref ref=&quot;Console&quot; /&gt;\n    &lt;/root&gt;\n\n    &lt;logger name=&quot;com.backend&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\n        &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;\n        &lt;appender-ref ref=&quot;Console&quot; /&gt;\n    &lt;/logger&gt;\n\n&lt;/configuration&gt;\n</code></pre>\n<p>^ logback-spring.xml  (Took from baeldun and changed the last entry from <code>com.baeldung</code> to <code>com.backend</code> although I have no clue if that matters)</p>\n<pre class=\"lang-none prettyprint-override\"><code># Logging\nlogging.level.root=TRACE\nlogging.file.name=logs/app.log\nlogging.file.path=logs\n</code></pre>\n<p>^ application.properties</p>\n",
    "tags" : [ "java", "spring", "logging", "logback" ],
    "owner" : {
      "account_id" : 2506013,
      "reputation" : 99,
      "user_id" : 2179720,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/7c3623bb99f5a187e177641a78a81d69?s=256&d=identicon&r=PG",
      "display_name" : "Luponius",
      "link" : "https://stackoverflow.com/users/2179720/luponius"
    },
    "is_answered" : true,
    "view_count" : 57,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1742848791,
    "creation_date" : 1742843670,
    "link" : "https://stackoverflow.com/questions/79531959/logback-not-working-the-same-throughout-the-project",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}