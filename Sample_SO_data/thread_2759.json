{
  "question" : {
    "question_id" : 79597242,
    "title" : "UnsatisfiedDependencyException for OAuth2AuthorizedClientManagerRegistrar in Spring Security 6.2.8",
    "body" : "<p>I encountered an UnsatisfiedDependencyException while migrating from Spring Security 6.1.9 to 6.2.8. The exception occurs during the initialization of the OAuth2ClientConfiguration class, specifically when trying to create a bean for OAuth2AuthorizedClientManagerRegistrar.</p>\n<pre><code>ERROR [main] (ContextLoader.java294) - Context initialization failed 2025-04-22 20:14:02 org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2ClientWebMvcSecurityConfiguration': Unsatisfied dependency expressed through method 'setAuthorizedClientManagerRegistrar' parameter 0: No qualifying bean of type 'org.springframework.security.config.annotation.web.configuration.OAuth2ClientConfiguration$OAuth2AuthorizedClientManagerRegistrar' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n</code></pre>\n<h2>To Reproduce</h2>\n<ul>\n<li><p>Upgrade Spring Security from 6.1.9 to 6.2.8.</p>\n</li>\n<li><p>Attempt to initialize the application context.</p>\n</li>\n</ul>\n<h2>Expected behavior</h2>\n<p>The application context should initialize without errors, and the OAuth2AuthorizedClientManagerRegistrar bean should be correctly registered.</p>\n<h2>Actual Behavior</h2>\n<p>The application fails to initialize, throwing an UnsatisfiedDependencyException due to the missing OAuth2AuthorizedClientManagerRegistrar bean.</p>\n<h2>Sample Configuration</h2>\n<pre><code>@configuration\npublic class CustomOAuth2ClientConfig {\n\n    @bean\n    public OAuth2AuthorizedClientManager authorizedClientManager(\n            ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientRepository authorizedClientRepository) {\n        OAuth2AuthorizedClientProvider authorizedClientProvider = OAuth2AuthorizedClientProviderBuilder.builder()\n                .authorizationCode()\n                .refreshToken()\n                .clientCredentials()\n                .password()\n                .build();\n        DefaultOAuth2AuthorizedClientManager authorizedClientManager =\n                new DefaultOAuth2AuthorizedClientManager(clientRegistrationRepository, authorizedClientRepository);\n        authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n        return authorizedClientManager;\n    }\n</code></pre>\n<h2>Additional Information</h2>\n<ul>\n<li><p>CustomOAuth2ClientConfig has other bean configuration like ClientRegistrationRepository, OAuth2ProtectedResourceDetailsCustom, OAuth2AuthorizedClientService, OAuth2AuthorizedClientRepository, AuthorizationRequestRepository, OAuth2AuthorizationRequestRedirectFilter, CustomOAuth2AuthorizationRequestResolver, CustomOAuth2LoginAuthenticationFilter, CustomOAuth2LoginAuthenticationProvider, DefaultAuthorizationCodeTokenResponseClient, CustomOAuth2UserService, OAuthAuthenticationFailureHandler</p>\n</li>\n<li><p>The migration guide for Spring Security 6.2 does not mention changes related to OAuth2AuthorizedClientManagerRegistrar, this was not there in 6.1.x, it's added in 6.2.x</p>\n</li>\n</ul>\n",
    "tags" : [ "java", "spring", "spring-security", "oauth-2.0" ],
    "owner" : {
      "account_id" : 1400235,
      "reputation" : 252,
      "user_id" : 1329150,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/db2e3cf4884088b21615817976caeea5?s=256&d=identicon&r=PG",
      "display_name" : "Mantu Singh",
      "link" : "https://stackoverflow.com/users/1329150/mantu-singh"
    },
    "is_answered" : true,
    "view_count" : 196,
    "answer_count" : 1,
    "score" : 5,
    "last_activity_date" : 1746137216,
    "creation_date" : 1745871929,
    "link" : "https://stackoverflow.com/questions/79597242/unsatisfieddependencyexception-for-oauth2authorizedclientmanagerregistrar-in-spr",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79597432,
    "question_id" : 79597242,
    "body" : "<p>In your <code>CustomOAuth2ClientConfig</code> class, you need to add a new bean for Spring Security 6.2.x, something like this:</p>\n<pre><code>@Bean\n    public OAuth2ClientConfiguration.OAuth2AuthorizedClientManagerRegistrar authorizedClientManagerRegistrar(\n            OAuth2AuthorizedClientManager authorizedClientManager) {\n        return new OAuth2ClientConfiguration.OAuth2AuthorizedClientManagerRegistrar(authorizedClientManager);\n    }\n</code></pre>\n<p>This would explicitly register OAuth2AuthorizedClientManager with Spring Security's OAuth2ClientConfiguration, which you need to do for versions 6.2.x</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 38824558,
      "reputation" : 556,
      "user_id" : 28970712,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/547cbe3de5c4c632685d97aa4309fdf4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Pratik Mathur",
      "link" : "https://stackoverflow.com/users/28970712/pratik-mathur"
    },
    "creation_date" : 1745886129,
    "last_activity_date" : 1745886129,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140397920,
    "post_id" : 79597242,
    "body" : "Opened up an issue for spring security - <a href=\"https://github.com/spring-projects/spring-security/issues/17009\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/17009</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 1400235,
      "reputation" : 252,
      "user_id" : 1329150,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/db2e3cf4884088b21615817976caeea5?s=256&d=identicon&r=PG",
      "display_name" : "Mantu Singh",
      "link" : "https://stackoverflow.com/users/1329150/mantu-singh"
    },
    "creation_date" : 1746470329,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79597432" : [ {
      "comment_id" : 140378752,
      "post_id" : 79597432,
      "body" : "Hey @pratik-mathur, thanks for your effort , OAuth2ClientConfiguration is a default final class from spring config, so we can&#39;t do this. I tried all these thing first hand before putting up this question here.",
      "score" : 0,
      "owner" : {
        "account_id" : 1400235,
        "reputation" : 252,
        "user_id" : 1329150,
        "user_type" : "registered",
        "accept_rate" : 0,
        "profile_image" : "https://www.gravatar.com/avatar/db2e3cf4884088b21615817976caeea5?s=256&d=identicon&r=PG",
        "display_name" : "Mantu Singh",
        "link" : "https://stackoverflow.com/users/1329150/mantu-singh"
      },
      "creation_date" : 1745903503,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}