{
  "question" : {
    "question_id" : 79594915,
    "title" : "RecyclerView bitmap generation - stop Progressbar animation",
    "body" : "<p>I use this <a href=\"https://gist.github.com/PrashamTrivedi/809d2541776c8c141d9a\" rel=\"nofollow noreferrer\">example</a> to generate pdf file from recyclerview. I call the <code>getScreenshotFromRecyclerView</code> function inside doInBackground of an AsyncTask and the bitmap is generated successfully.</p>\n<p>The problem is if I added a CircularProgressIndicator inside recyclelerview's listitem, it throws AndroidRuntimeException.</p>\n<pre><code>     Caused by: android.util.AndroidRuntimeException: Animators may only be run on Looper threads\n    at android.animation.ValueAnimator.end(ValueAnimator.java:1204)\n    at com.google.android.material.progressindicator.DrawableWithAnimatedVisibilityChange.endAnimatorsWithoutCallbacks(DrawableWithAnimatedVisibilityChange.java:322)\n</code></pre>\n<p>It is because this line in <code>getScreenshotFromRecyclerView</code>:</p>\n<pre><code>RecyclerView.ViewHolder holder = adapter.createViewHolder(view, adapter.getItemViewType(i));\n</code></pre>\n<p>Which cause LayoutInflater to createView, in thread which isn't UI thread.</p>\n<p>I don't want to display the CircularProgressIndicator in the pdf (bitmap). Although I set its visibility to invisible/gone but it doesn't help. How to bypass the CircularProgressIndicator when creating the bitmap?</p>\n<pre><code>   &lt;com.google.android.material.progressindicator.CircularProgressIndicator\n                android:id=&quot;@+id/progressBar&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:indeterminate=&quot;false&quot;\n                android:visibility=&quot;invisible&quot;\n                app:indicatorSize=&quot;120dp&quot;\n                app:trackThickness=&quot;14dp&quot; /&gt;\n\n   \n</code></pre>\n",
    "tags" : [ "java", "android", "multithreading", "android-recyclerview", "android-animation" ],
    "owner" : {
      "account_id" : 14318649,
      "reputation" : 406,
      "user_id" : 10512960,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-TIJlCRREGRE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaNsTIfucg8sOZ605W3GyDe17S9kWQ/mo/s256-rj/photo.jpg",
      "display_name" : "len",
      "link" : "https://stackoverflow.com/users/10512960/len"
    },
    "is_answered" : false,
    "view_count" : 36,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1745757184,
    "creation_date" : 1745747997,
    "link" : "https://stackoverflow.com/questions/79594915/recyclerview-bitmap-generation-stop-progressbar-animation",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}