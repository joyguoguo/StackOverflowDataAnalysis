{
  "question" : {
    "question_id" : 79792731,
    "title" : "scala-maven-plugin cannot compile Java15+ feature text block",
    "body" : "<p>mixed compilation project of Scala and Java, and now upgrade jdk8-&gt;jdk21, use Java15+ feature text block</p>\n<p>before:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;update hinsight.homeco_user_task set \\n&quot; +\n        &quot;file_path = ?,\\n&quot; +\n        &quot;err_msg = ?,\\n&quot; +\n        &quot;task_stop_time = current_timestamp(),\\n&quot; +\n        &quot;status = ?\\n&quot; +\n        &quot;where task_id = ?&quot;;\n</code></pre>\n<p>after:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;&quot;&quot;\n    update hinsight.homeco_user_task\n    set file_path = ?,\n    err_msg = ?,\n    task_stop_time = current_timestamp(),\n    status = ?\n    where task_id = ?&quot;&quot;&quot;;\n</code></pre>\n<p>execute <code>mvn clean compile</code></p>\n<p><code>scala-maven-plugin</code> cannot identify text block like <code>&quot;&quot;&quot;</code> and report <code>unclosed string literal</code></p>\n<pre><code>[INFO] --- scala:4.8.0:compile (scala-compile-first) @ Discovery-M3-Operator-Java ---\n[INFO] Compiler bridge file: C:\\Users\\z00624250\\.sbt\\1.0\\zinc\\org.scala-sbt\\org.scala-sbt-compiler-bridge_2.12-1.8.0-bin_2.12.20__65.0-1.8.0_20221110T195421.jar\n[INFO] compiling 32 Scala sources and 248 Java sources to D:\\code\\Discovery-M3-Operator-Java\\target\\classes ...\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/ModuleAnalysisOperator.java:26: unclosed string literal\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/ModuleAnalysisOperator.java:47: illegal character: 35\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/ModuleAnalysisOperator.java:55: unclosed string literal\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/ModuleAnalysisOperator.java:78: `;' expected but eof found.\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/UploadS3Operator.java:80: unclosed string literal\n[ERROR] D:/code/Discovery-M3-Operator-Java/src/main/java/XXXX/UploadS3Operator.java:86: unclosed string literal\n[ERROR] 6 errors found\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  5.285 s\n[INFO] Finished at: 2025-10-17T11:42:46+08:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal net.alchim31.maven:scala-maven-plugin:4.8.0:compile (scala-compile-first) on project Discovery-M3-Operator-Java: Execution scala-compile-first of goal net.alchim31.maven:scala-maven-plugin:4.8.0:compile failed: Compilation failed: InterfaceCompileFailed -&gt; [Help 1]\n</code></pre>\n<p>Java and Scala exist cross dependencies and require mixed compile\npom:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;tagNameFormat&gt;${project.version}&lt;/tagNameFormat&gt;\n                    &lt;autoVersionSubmodules&gt;true&lt;/autoVersionSubmodules&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.14.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;21&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;attach-sources&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;jar-no-fork&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;net.alchim31.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;scala-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;4.8.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;scalaVersion&gt;2.12.20&lt;/scalaVersion&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;scala-compile-first&lt;/id&gt;\n                        &lt;phase&gt;process-resources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;add-source&lt;/goal&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;\n                            compile\n                        &lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile&lt;/goal&gt;\n                            &lt;goal&gt;testCompile&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                    &lt;systemPropertyVariables&gt;\n                        &lt;maven.test.skip&gt;true&lt;/maven.test.skip&gt;\n                    &lt;/systemPropertyVariables&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>How to ensure the use of Java15+ text block feature while compiling successfully?</p>\n",
    "tags" : [ "java", "scala", "maven", "maven-compiler-plugin", "scala-maven-plugin" ],
    "owner" : {
      "account_id" : 14947104,
      "reputation" : 47,
      "user_id" : 10792037,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-tMVn__T3Loo/AAAAAAAAAAI/AAAAAAAAAEw/Dlykf6T_4GQ/s256-rj/photo.jpg",
      "display_name" : "maple",
      "link" : "https://stackoverflow.com/users/10792037/maple"
    },
    "is_answered" : false,
    "view_count" : 86,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1760674088,
    "creation_date" : 1760674088,
    "link" : "https://stackoverflow.com/questions/79792731/scala-maven-plugin-cannot-compile-java15-feature-text-block",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140805591,
    "post_id" : 79792731,
    "body" : "Project cannot accept major version upgrade <code>2.12.X</code>-&gt;<code>2.13.X</code>@JorgeCampos",
    "score" : 0,
    "owner" : {
      "account_id" : 14947104,
      "reputation" : 47,
      "user_id" : 10792037,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-tMVn__T3Loo/AAAAAAAAAAI/AAAAAAAAAEw/Dlykf6T_4GQ/s256-rj/photo.jpg",
      "display_name" : "maple",
      "link" : "https://stackoverflow.com/users/10792037/maple"
    },
    "creation_date" : 1760931456,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140805569,
    "post_id" : 79792731,
    "body" : "<code>&lt;arg&gt;-target:jvm-21&lt;&#47;arg&gt;</code> or <code>&lt;arg&gt;-release:21&lt;&#47;arg&gt;</code> dont work @LuisMiguelMej&#237;aSu&#225;rez",
    "score" : 0,
    "owner" : {
      "account_id" : 14947104,
      "reputation" : 47,
      "user_id" : 10792037,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-tMVn__T3Loo/AAAAAAAAAAI/AAAAAAAAAEw/Dlykf6T_4GQ/s256-rj/photo.jpg",
      "display_name" : "maple",
      "link" : "https://stackoverflow.com/users/10792037/maple"
    },
    "creation_date" : 1760928655,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140801946,
    "post_id" : 79792731,
    "body" : "You probably need to confihure the <code>-release:21</code> flag for the <b>Scala</b> compiler, to tell it to use <b>Java</b> <code>21</code>.",
    "score" : 2,
    "owner" : {
      "account_id" : 5131293,
      "reputation" : 23045,
      "user_id" : 4111404,
      "user_type" : "registered",
      "accept_rate" : 80,
      "profile_image" : "https://lh5.googleusercontent.com/-kzPWJe4orps/AAAAAAAAAAI/AAAAAAAAABE/L-IQwWBiNJU/s256-rj/photo.jpg",
      "display_name" : "Luis Miguel Mej&#237;a Su&#225;rez",
      "link" : "https://stackoverflow.com/users/4111404/luis-miguel-mej%c3%ada-su%c3%a1rez"
    },
    "creation_date" : 1760707545,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140801087,
    "post_id" : 79792731,
    "body" : "if you are using jdk21 try using scala 3.x, also try upping the scala maven plugin to latest version 4.9.x",
    "score" : 1,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1760680121,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}