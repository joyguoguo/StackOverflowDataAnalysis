{
  "question" : {
    "question_id" : 79772903,
    "title" : "Facing issue with SMTP gmail while sending mail using jakarta email throwing jakarta.mail.MessagingException: Could not convert socket to tls",
    "body" : "<p>When sending mail using Jakarta email throwing below exception</p>\n<blockquote>\n<p>Using these dependencies\njakarta.activation-2.0.1.jar\njakarta.mail-2.0.2</p>\n</blockquote>\n<blockquote>\n<p>jakarta.mail.MessagingException: Could not convert socket to TLS;<br />\nnested exception is:  java.net.SocketException: A connection attempt\nfailed because the connected party did not properly respond after a\nperiod of time, or established connection failed because connected\nhost has failed to respond    at\ncom.sun.mail.smtp.SMTPTransport.startTLS(SMTPTransport.java:2140)     at\ncom.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:734)\nat jakarta.mail.Service.connect(Service.java:364)   at\njakarta.mail.Service.connect(Service.java:222)    at\njakarta.mail.Service.connect(Service.java:171)    at\njakarta.mail.Transport.send0(Transport.java:230)  at\njakarta.mail.Transport.send(Transport.java:100)   at\ntest.GmailSSLTest.main(GmailSSLTest.java:44)</p>\n</blockquote>\n<p>Tried below code in local to send mail using jakarta email using port 587, but its throwing above mentioned exception</p>\n<pre><code>package test;\n\nimport jakarta.mail.*;\nimport jakarta.mail.internet.*;\nimport java.util.Properties;\n\npublic class GmailTest {\n  public static void main(String[] args) throws Exception {\n    Properties props = new Properties();\n    props.put(&quot;mail.smtp.host&quot;, &quot;smtp.gmail.com&quot;);\n    props.put(&quot;mail.smtp.port&quot;, &quot;587&quot;);\n    props.put(&quot;mail.smtp.auth&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.starttls.required&quot;, &quot;true&quot;);\n    props.put(&quot;mail.smtp.ssl.enable&quot;, &quot;false&quot;);\n    props.put(&quot;mail.smtp.ssl.protocols&quot;, &quot;TLSv1.2&quot;);\n    props.put(&quot;mail.debug&quot;, &quot;true&quot;);\n\n    Session session = Session.getInstance(props, new Authenticator() {\n      @Override\n      protected PasswordAuthentication getPasswordAuthentication() {\n        return new PasswordAuthentication(\n            &quot;*****@gmail.com&quot;, \n            &quot;******&quot;      \n        );\n      }\n    });\n\n    Message msg = new MimeMessage(session);\n    msg.setFrom(new InternetAddress(&quot;*****@gmail.com&quot;));\n    msg.setRecipients(Message.RecipientType.TO,\n                      InternetAddress.parse(&quot;*****@gmail.com&quot;));\n    msg.setSubject(&quot;Test mail&quot;);\n    msg.setText(&quot;Hello from Jakarta Mail via Gmail 587 STARTTLS!&quot;);\n    Transport.send(msg);\n    System.out.println(&quot;Message sent!&quot;);\n  }\n}\n</code></pre>\n",
    "tags" : [ "java", "email", "smtp", "jakarta-mail" ],
    "owner" : {
      "account_id" : 44059437,
      "reputation" : 1,
      "user_id" : 31555479,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eabf3a5c4a2ac4639bd4c91be59f5671?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "prathi",
      "link" : "https://stackoverflow.com/users/31555479/prathi"
    },
    "is_answered" : false,
    "view_count" : 71,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1759119776,
    "creation_date" : 1758648212,
    "link" : "https://stackoverflow.com/questions/79772903/facing-issue-with-smtp-gmail-while-sending-mail-using-jakarta-email-throwing-jak",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140765938,
    "post_id" : 79772903,
    "body" : "Try app password with <code>-Djavax.net.debug=ssl</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1759132658,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140765700,
    "post_id" : 79772903,
    "body" : "Also tried this command to check openssl s_client -starttls smtp -connect smtp.gmail.com:587 .. getting this response                                  CONNECTED(00000004) write:errno=113 --- no peer certificate available --- No client certificate CA names sent --- SSL handshake has read 273 bytes and written 359 bytes Verification: OK --- New, (NONE), Cipher is (NONE) Secure Renegotiation IS NOT supported Compression: NONE Expansion: NONE No ALPN negotiated Early data was not sent Verify return code: 0 (ok)",
    "score" : 0,
    "owner" : {
      "account_id" : 44059437,
      "reputation" : 1,
      "user_id" : 31555479,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eabf3a5c4a2ac4639bd4c91be59f5671?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "prathi",
      "link" : "https://stackoverflow.com/users/31555479/prathi"
    },
    "creation_date" : 1759120362,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140765691,
    "post_id" : 79772903,
    "body" : "I have used Google App Password using valid email address but still facing the same issue.",
    "score" : 0,
    "owner" : {
      "account_id" : 44059437,
      "reputation" : 1,
      "user_id" : 31555479,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eabf3a5c4a2ac4639bd4c91be59f5671?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "prathi",
      "link" : "https://stackoverflow.com/users/31555479/prathi"
    },
    "creation_date" : 1759119918,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140761225,
    "post_id" : 79772903,
    "body" : "If youâ€™re using your normal Gmail password, switch to a Google App Password (generate it in your Google account settings) and be sure to use a valid address like user@gmail.com (not user@gmail.com@gmail.com). If those are correct, check that outbound port 587 is reachable through your firewall or network.",
    "score" : 0,
    "owner" : {
      "account_id" : 11757171,
      "reputation" : 13,
      "user_id" : 8604495,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/R7AHs.jpg?s=256",
      "display_name" : "Karlz-Bandz",
      "link" : "https://stackoverflow.com/users/8604495/karlz-bandz"
    },
    "creation_date" : 1758872751,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}