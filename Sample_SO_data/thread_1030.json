{
  "question" : {
    "question_id" : 79750139,
    "title" : "Cropping an image Android Java",
    "body" : "<p>Using camerax I have taken a screenshot of a image...success....\nI then load the image into an imageView...success....\nI now want to crop the image in the image view by using ....</p>\n<pre><code>imageView.setOnTouchListener(new View.OnTouchListener() {\n        @Override\n        public boolean onTouch(View v, MotionEvent event) {\n            handleTouch(event);\n            return true;\n        }\n    });\nprivate void handleTouch(MotionEvent event) {\n    int x = (int) event.getX();\n    int y = (int) event.getY();\n\n    switch (event.getAction()) {\n        case MotionEvent.ACTION_DOWN:\n            Log.i(&quot;TAG&quot;, &quot;touched down&quot;);\n            startX=x;startY=y;\n            break;\n        case MotionEvent.ACTION_MOVE:\n            Log.i(&quot;TAG&quot;, &quot;moving: (&quot; + x + &quot;, &quot; + y + &quot;)&quot;);\n            moveX=x;moveY=y;\n            break;\n        case MotionEvent.ACTION_UP:\n            Log.i(&quot;TAG&quot;, &quot;touched up: (&quot; + x + &quot;, &quot; + y + &quot;)&quot;);\n            endX=moveX;endY=moveY;\n            cropImage();\n            break;\n    }\n}\n</code></pre>\n<p>Where crop image basically does this</p>\n<pre><code>Bitmap croppedImage = Bitmap.createBitmap(capturedImage, (int) startX, (int) startY, cropWidth, cropHeight);\n</code></pre>\n<p>This all works.\nHowever the coordinates it returns are the co-ordinates of the screen not the co-ordinates of the image in the imageView so the image crops in the wrong place.</p>\n<p>This may be a really newbie question but how do I crop the image..do I have to scale the co-ordinate system of the screen or imageView to match the co-ordinate system of the image. All examples don't seem to mention this but it is the only thing I can conclude.\nAll help and comments appreciated.</p>\n",
    "tags" : [ "java", "android", "image", "crop", "scaling" ],
    "owner" : {
      "account_id" : 8907616,
      "reputation" : 91,
      "user_id" : 6648958,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cea1bc1f6c0edb96a1b6285e9d473fae?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "uberphoebe",
      "link" : "https://stackoverflow.com/users/6648958/uberphoebe"
    },
    "is_answered" : true,
    "view_count" : 51,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1757225055,
    "creation_date" : 1756463329,
    "link" : "https://stackoverflow.com/questions/79750139/cropping-an-image-android-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79750341,
    "question_id" : 79750139,
    "body" : "<p>I do suggest you use a library, but I'll answer for your knowledge.  Scaling from an ImageView to a Bitmap is simple.  Divide the x position by the width of the image.  That will get you the percentage into the view you want to crop.  Then multiply by the width of the image.  That will give you the pixel position that's equivalent within the image.  So <code>x_pos*image_width/view_width</code>.  Do the same with y.</p>\n<p>Another way to think of the same math-  the <code>image_width/view_width</code> is the scale factor-  it's how much the image was scaled to fit the view.  A number &gt;1 means it was shrunk, a number &lt;1 means it was enlarged.  You can multiply the x and y positions by that same number to scale the positions.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1790714,
      "reputation" : 94810,
      "user_id" : 1631193,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/ac9dfee58394495fa69f12f58a928be3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gabe Sechan",
      "link" : "https://stackoverflow.com/users/1631193/gabe-sechan"
    },
    "creation_date" : 1756474196,
    "last_activity_date" : 1756474196,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140701613,
    "post_id" : 79750139,
    "body" : "There are <i>many</i> image cropping libraries for Android, such as <a href=\"https://github.com/Yalantis/uCrop\" rel=\"nofollow noreferrer\">this one</a>. Look into those and see how they do it.",
    "score" : 0,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011205,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1756473312,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}