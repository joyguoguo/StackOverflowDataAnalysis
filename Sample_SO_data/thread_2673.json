{
  "question" : {
    "question_id" : 79603907,
    "title" : "slf4j 2.x with logback is not working in OSGI eclipse based application",
    "body" : "<p>I'm working on an Eclipse-based application that uses tycho/maven.</p>\n<p>As we know, there is a change in Slf4j 2.x loading mechanism. Hence, I provided a logbackserviceloader also. But it won't work.</p>\n<p>Earlier, when I used slf4j.api 1.7.32 with logback 1.2.13 was loading automatically without giving any service loader to it.</p>\n<p>My code is the same for logging. I don't know what the reason is but my logs are not getting printed. But if I manually change below in the bundles.info file then my log file is getting generated and logs are also printing.</p>\n<p>bundles.info change :\n1.org.apache.aries.spifly.dynamic.bundle,1.3.7,plugins/org.apache.aries.spifly.dynamic.bundle_1.3.7.jar,<strong>1,true</strong></p>\n<p>2.ch.qos.logback.classic,1.5.12,plugins/ch.qos.logback.classic_1.5.12.jar,<strong>2,true</strong></p>\n<p>By default, values are 4,false for both.</p>\n<p>I also made changes in p2.inf in logging.feature package</p>\n<pre><code>requires.1.namespace=org.eclipse.equinox.p2.iu\nrequires.1.name=ch.qos.logback.classic.iufragment\nrequires.1.range=[$version$,$version$]\nrequires.1.greedy=true\n\nunits.1.id=ch.qos.logback.classic.iufragment\nunits.1.version=$version$\nunits.1.provides.1.namespace=org.eclipse.equinox.p2.iu\nunits.1.provides.1.name=ch.qos.logback.classic.iufragment\nunits.1.provides.1.version=$version$\nunits.1.instructions.install=org.eclipse.equinox.p2.touchpoint.eclipse.installBundle(bundle:${artifact});\nunits.1.instructions.uninstall=org.eclipse.equinox.p2.touchpoint.eclipse.uninstallBundle(bundle:${artifact});\nunits.1.instructions.unconfigure=org.eclipse.equinox.p2.touchpoint.eclipse.setStartLevel(startLevel:-1);org.eclipse.equinox.p2.touchpoint.eclipse.markStarted(started:false);\nunits.1.instructions.configure=org.eclipse.equinox.p2.touchpoint.eclipse.setStartLevel(startLevel:2);org.eclipse.equinox.p2.touchpoint.eclipse.markStarted(started:true);\nunits.1.hostRequirements.1.namespace=osgi.bundle\nunits.1.hostRequirements.1.name=ch.qos.logback.classic\nunits.1.hostRequirements.2.namespace=org.eclipse.equinox.p2.eclipse.type\nunits.1.hostRequirements.2.name=bundle\nunits.1.hostRequirements.2.greedy=false\nunits.1.requires.1.namespace=osgi.bundle\nunits.1.requires.1.name=ch.qos.logback.classic\nunits.1.requires.1.greedy=false\n\nrequires.2.namespace=org.eclipse.equinox.p2.iu\nrequires.2.name=org.apache.aries.spifly.dynamic.bundle.iufragment\nrequires.2.range=[$version$,$version$]\nrequires.2.greedy=true\n\nunits.2.id=org.apache.aries.spifly.dynamic.bundle.iufragment\nunits.2.version=$version$\nunits.2.provides.1.namespace=org.eclipse.equinox.p2.iu\nunits.2.provides.1.name=org.apache.aries.spifly.dynamic.bundle.iufragment\nunits.2.provides.1.version=$version$\nunits.2.instructions.install=org.eclipse.equinox.p2.touchpoint.eclipse.installBundle(bundle:${artifact});\nunits.2.instructions.uninstall=org.eclipse.equinox.p2.touchpoint.eclipse.uninstallBundle(bundle:${artifact});\nunits.2.instructions.unconfigure=org.eclipse.equinox.p2.touchpoint.eclipse.setStartLevel(startLevel:-1);org.eclipse.equinox.p2.touchpoint.eclipse.markStarted(started:false);\nunits.2.instructions.configure=org.eclipse.equinox.p2.touchpoint.eclipse.setStartLevel(startLevel:1);org.eclipse.equinox.p2.touchpoint.eclipse.markStarted(started:true);\nunits.2.hostRequirements.1.namespace=osgi.bundle\nunits.2.hostRequirements.1.name=org.apache.aries.spifly.dynamic.bundle\nunits.2.hostRequirements.2.namespace=org.eclipse.equinox.p2.eclipse.type\nunits.2.hostRequirements.2.name=bundle\nunits.2.hostRequirements.2.greedy=false\nunits.2.requires.1.namespace=osgi.bundle\nunits.2.requires.1.name=org.apache.aries.spifly.dynamic.bundle\nunits.2.requires.1.greedy=false\n</code></pre>\n<p>but it won't work resulting in downloading more transitive plugins which increased my product size by double. (not a solution).</p>\n<p>Also tried adding changes in .product file but it was not getting affected for my p2 repo of product.</p>\n<p>Any thoughts? solution?</p>\n",
    "tags" : [ "java", "eclipse", "maven", "osgi", "rcp" ],
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "is_answered" : false,
    "view_count" : 79,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746348383,
    "creation_date" : 1746209130,
    "link" : "https://stackoverflow.com/questions/79603907/slf4j-2-x-with-logback-is-not-working-in-osgi-eclipse-based-application",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140397395,
    "post_id" : 79603907,
    "body" : "Please follow <a href=\"https://wiki.eclipse.org/Equinox/p2/Setting_Start_Levels\" rel=\"nofollow noreferrer\">this <code>p2.inf</code></a> by replacing <code>org.example.bundle</code> with <code>ch.qos.logback.classic</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1746458990,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395917,
    "post_id" : 79603907,
    "body" : "I also tried making   <code>requires.1.greedy=false</code>  but it results in an error.   [ERROR]   Missing requirement: com.**.logging.feature.feature.group 2*.1.1.qualifier requires &#39;org.eclipse.equinox.p2.iu; org.apache.aries.spifly.dynamic.bundle.iufragment [2*.1.1.qualifier,2*.1.1.qualifier], greedy=false&#39; but it could not be found.  I also added spifly and logback.classic in my feature.xml in feature package.  Is there any way to set startlevel without downloading transitive dependencies?",
    "score" : 0,
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "creation_date" : 1746425695,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395800,
    "post_id" : 79603907,
    "body" : "What I observed in my product is:   While creating of product as build it has .product file which reads all features, launchArgs, etc.   While creating a p2 repo of my product, I see there is category.xm,l which reads features and &lt;ius&gt; mentioned in pom.xml.   Maybe that&#39;s the reason why creating p2 repo start levels, which are given in .product file, is not affecting p2.",
    "score" : 0,
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "creation_date" : 1746419524,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395797,
    "post_id" : 79603907,
    "body" : "@howlger, added the below code in the .product file with my other plugins to have the default start levels.    &lt;configurations&gt;   &lt;plugin id=&quot;org.apache.aries.spifly.dynamic.bundle&quot; autoStart=&quot;true&quot; startLevel=&quot;1&quot; /&gt;       &lt;plugin id=&quot;ch.qos.logback.classic&quot; autoStart=&quot;true&quot; startLevel=&quot;2&quot; /&gt; &lt;/configurations&gt;   These results change in the bundles.info file, but it is only for when creating a whole product build. Not affecting in case of creating a p2 repo of my product.",
    "score" : 0,
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "creation_date" : 1746419406,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395168,
    "post_id" : 79603907,
    "body" : "&quot;Also tried adding changes in .product file but it was not getting affected for my p2 repo of product.&quot; - What exactly did you do and how did you test it? If you changed the <code>.product</code> file, you need to increment the version if the version does not contain a qualifier.",
    "score" : 0,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1746387946,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140394032,
    "post_id" : 79603907,
    "body" : "Edited the question",
    "score" : 0,
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "creation_date" : 1746348440,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140394027,
    "post_id" : 79603907,
    "body" : "Yes you’re right. @howlger I tried with commented out this above lines. Those lines are copy pasted with “#”  cause I was trying another approach as well. But the result is same. It didn’t work.",
    "score" : 0,
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "creation_date" : 1746348209,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140392203,
    "post_id" : 79603907,
    "body" : "In your <code>p2.inf</code> file all lines starts with <code>#</code> which means that they are all commented out. So this <code>p2.inf</code> file should not have any effect. Auto start and the start level can be set in the <code>.product</code> file, see e.g. <a href=\"https://github.com/eclipse-packaging/packages/blob/67e52c5a78ebe0de9267da90da61403bdae831f4/packages/org.eclipse.epp.package.java.product/epp.product#L70-L76\" rel=\"nofollow noreferrer\">here</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1746257885,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}