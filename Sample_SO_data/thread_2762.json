{
  "question" : {
    "question_id" : 79597130,
    "title" : "How to translate a char array into a long and back in Java (not Long.parseLong() or String.valueOf())",
    "body" : "<p>I am trying to make a cryptography program using RSA, and need to be able to turn plaintext into a <code>long</code>. Obviously the plaintext would have to have more than just numbers in it, so using <code>Long.parseLong()</code> is not a solution. I found <a href=\"http://www.java2s.com/example/java-utility-method/char-array-to-long-index-0.html\" rel=\"nofollow noreferrer\">this</a> and it explained how to convert a <code>char</code> array into a <code>long</code> in this way, but am unsure of how to translate it back to a <code>char</code> array (or <code>String</code>). The code I got from the above website is here:</p>\n<pre><code>public long charArrayToLong(char[] bi){\n    long len = bi.length;\n    long sum = 0;\n    long tmp, max = len - 1;\n    for (int i = 0; i &lt; len; ++i) {\n        tmp = bi[i] - '0';\n        sum += tmp * Math.pow(2, max--);\n    return sum;\n}\n</code></pre>\n<p>This code works to translate a <code>char</code> array into a long without depending on only numerical values being in the <code>char</code> array, but I also need a method of converting it back.</p>\n<p>Specifically what I'm looking for is this: I need to convert each <code>char</code> in a <code>String</code> into a number, based on its ASCII value, multiply that number based on a power of its location in the <code>String</code>, add those numbers together to get a <code>long</code> plaintext variable, and reverse the operation to translate it the other way.</p>\n<p>My expected input is a <code>String</code> in plaintext (e.g. &quot;The quick brown fox jumps over the lazy dog&quot;). My expected output is a long  with values for each character in the <code>String</code> embedded in the number.</p>\n<p>The reason I need to do this is because I need to exponentiate a number, not a <code>String</code>, with the formula <code>c = m ^ e % n</code>. Since <code>m</code> is the message in plaintext, I need it to be converted into a number so I can take it to the power of <code>e</code>, the public key.</p>\n",
    "tags" : [ "java", "arrays", "string" ],
    "owner" : {
      "account_id" : 23466630,
      "reputation" : 135,
      "user_id" : 17520713,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ri3xi.jpg?s=256",
      "display_name" : "The Dog on the Log",
      "link" : "https://stackoverflow.com/users/17520713/the-dog-on-the-log"
    },
    "is_answered" : true,
    "view_count" : 120,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1745869681,
    "creation_date" : 1745866509,
    "link" : "https://stackoverflow.com/questions/79597130/how-to-translate-a-char-array-into-a-long-and-back-in-java-not-long-parselong",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79597193,
    "question_id" : 79597130,
    "body" : "<p>To convert four <code>char</code> values to a long -- which works for arbitrary characters (not just ASCII) -- you can do</p>\n<pre><code>long toLong(char a, char b, char c, char d) {\n  ByteBuffer buf = \n    ByteBuffer.allocate(8)\n      .putChar(a)\n      .putChar(b)\n      .putChar(c)\n      .putChar(d);\n  return buf.getLong(0);\n}\n</code></pre>\n<p>After you do correct decryption -- so you have a valid sequence of characters in your long -- you can reverse this with</p>\n<pre><code>char[] toChars(long l) {\n  ByteBuffer buf = ByteBuffer.allocate(8).putLong(l);\n  buf.flip();\n  char[] result = new char[4];\n  buf.get(result);\n  return result;\n}\n</code></pre>\n<p>...though you'll probably want to convert the longs to byte sequences and then convert that to strings in their own style.</p>\n<p>(Doing this <em>really</em> correctly would go through more phases: convert the entire string to UTF-8 bytes, pad them out to the appropriate number of values, do math, convert that math result to bytes, Base64 them for output, and then do all those steps in reverse on the other end.)</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1745869681,
    "last_activity_date" : 1745869681,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79597151,
    "question_id" : 79597130,
    "body" : "<pre><code>// Convert String to long\npublic static long stringToLong(String s) {\n    long result = 0;\n    for (char c : s.toCharArray()) {\n        result = (result &lt;&lt; 8) + c;\n    }\n    return result;\n}\n\n// Convert long back to String\npublic static String longToString(long value) {\n    StringBuilder sb = new StringBuilder();\n    while (value &gt; 0) {\n        sb.insert(0, (char)(value &amp; 0xFF));\n        value &gt;&gt;= 8;\n    }\n    return sb.toString();\n}\n</code></pre>\n<p>Bit Shifting!</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 41562200,
      "reputation" : 319,
      "user_id" : 30347057,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1df3f0344c100f61055196bb8d14522f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alex",
      "link" : "https://stackoverflow.com/users/30347057/alex"
    },
    "creation_date" : 1745867654,
    "last_activity_date" : 1745867654,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140379898,
    "post_id" : 79597130,
    "body" : "<code>new BigInteger(string.getBytes(StandardCharsets.UTF_8))</code>",
    "score" : 3,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 300981,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1745927862,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377813,
    "post_id" : 79597130,
    "body" : "I see why using a <code>byte[]</code> may be more beneficial than a long, but how would you do <code>c = m ^ e % n</code> on a <code>byte[]</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 23466630,
      "reputation" : 135,
      "user_id" : 17520713,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ri3xi.jpg?s=256",
      "display_name" : "The Dog on the Log",
      "link" : "https://stackoverflow.com/users/17520713/the-dog-on-the-log"
    },
    "creation_date" : 1745868559,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377809,
    "post_id" : 79597130,
    "body" : "Could you please explain why that is the case?",
    "score" : 0,
    "owner" : {
      "account_id" : 23466630,
      "reputation" : 135,
      "user_id" : 17520713,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ri3xi.jpg?s=256",
      "display_name" : "The Dog on the Log",
      "link" : "https://stackoverflow.com/users/17520713/the-dog-on-the-log"
    },
    "creation_date" : 1745868469,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377808,
    "post_id" : 79597130,
    "body" : "But frankly I would suggest just converting the string to a <code>byte[]</code>, and do crypto on that. It&#39;s not like you&#39;re going to be able to keep the whole encrypted data in a single long, and if you&#39;re going to have to work with arbitrary binary data, using <code>byte[]</code> is probably simpler...",
    "score" : 0,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1520872,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1745868464,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377805,
    "post_id" : 79597130,
    "body" : "&quot;I&#39;m pretty sure I don&#39;t have to worry about surrogate pairs because I am using UTF-8&quot; - if you&#39;re putting arbitrary binary data <i>back</i> into the char array, you should definitely be worrying about that. (It&#39;s okay if it&#39;s only the <i>result</i> of the decryption that ends up back in the char array, of course.)",
    "score" : 0,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1520872,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1745868380,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377769,
    "post_id" : 79597130,
    "body" : "Can you show me how to use a <code>ByteBuffer</code> to accomplish this? Technically, what I&#39;m looking for in an answer to this question doesn&#39;t have much to do with crypto, I&#39;m simply searching for a way to convert UTF-8 <code>String</code>s into a long with the ASCII values in each part of the <code>long</code>. Yes, it&#39;s just for the sake of learning.",
    "score" : 0,
    "owner" : {
      "account_id" : 23466630,
      "reputation" : 135,
      "user_id" : 17520713,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ri3xi.jpg?s=256",
      "display_name" : "The Dog on the Log",
      "link" : "https://stackoverflow.com/users/17520713/the-dog-on-the-log"
    },
    "creation_date" : 1745867558,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377763,
    "post_id" : 79597130,
    "body" : "As I said in the question, I am working on RSA encryption. After I convert the <code>String</code> to a <code>long</code>, I take it to the power of the public key, modulo n. I&#39;m pretty sure I don&#39;t have to worry about surrogate pairs because I am using UTF-8.",
    "score" : 0,
    "owner" : {
      "account_id" : 23466630,
      "reputation" : 135,
      "user_id" : 17520713,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ri3xi.jpg?s=256",
      "display_name" : "The Dog on the Log",
      "link" : "https://stackoverflow.com/users/17520713/the-dog-on-the-log"
    },
    "creation_date" : 1745867387,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377762,
    "post_id" : 79597130,
    "body" : "To convert <i>to</i> longs, I would certainly use a <code>ByteBuffer</code> on each end, which will let you adapt in either direction.  But to get back to useful characters after doing any kind of crypto, you&#39;ll need to use Base64 or hex or the like.  <code>Math.pow</code> certainly will not appear in any sort of useful solution -- but then, I certainly hope you&#39;re not actually planning to use this for anything other than learning, since trying to implement crypto yourself is very high up the list of things to never ever do for security.",
    "score" : 0,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1745867356,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377748,
    "post_id" : 79597130,
    "body" : "What do you expect to do with the char array afterwards? In particular, are you aware that if you&#39;re going to try to create a <code>String</code> from an arbitrary <code>char[]</code>, it might be invalid? (e.g. it could contain half of a surrogate pair without the corresponding half?)",
    "score" : 2,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1520872,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1745867111,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140377730,
    "post_id" : 79597130,
    "body" : "This is confusing. The code seems to be to convert a sequence of digits into a number. How do you expect non digit characters to fit into a number? Also <a href=\"https://stackoverflow.com/posts/79597130/edit\">edit</a> the question to add example inputs, expected outputs and actual outputs.",
    "score" : 2,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1745866749,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79597151" : [ {
      "comment_id" : 140377859,
      "post_id" : 79597151,
      "body" : "ya for RSA encryption of longer text, you can either:  split the text into 8-character chunks  OR Use BigInteger instead of long",
      "score" : 0,
      "owner" : {
        "account_id" : 41562200,
        "reputation" : 319,
        "user_id" : 30347057,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1df3f0344c100f61055196bb8d14522f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/30347057/alex"
      },
      "creation_date" : 1745869534,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140377849,
      "post_id" : 79597151,
      "body" : "<code>stringToLong</code> is going to have a useless result on a string longer than 8 characters -- or on characters that are not ASCII.",
      "score" : 4,
      "owner" : {
        "account_id" : 465573,
        "reputation" : 200423,
        "user_id" : 869736,
        "user_type" : "registered",
        "accept_rate" : 82,
        "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Louis Wasserman",
        "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
      },
      "creation_date" : 1745869310,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140377790,
      "post_id" : 79597151,
      "body" : "ya bit shifting is very useful for a situation like this! Even if this is not quite right it should be very similar",
      "score" : 0,
      "owner" : {
        "account_id" : 41562200,
        "reputation" : 319,
        "user_id" : 30347057,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1df3f0344c100f61055196bb8d14522f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/30347057/alex"
      },
      "creation_date" : 1745867960,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79597193" : [ {
      "comment_id" : 140377869,
      "post_id" : 79597193,
      "body" : "ya i like this better than my answer lol",
      "score" : 0,
      "owner" : {
        "account_id" : 41562200,
        "reputation" : 319,
        "user_id" : 30347057,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1df3f0344c100f61055196bb8d14522f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Alex",
        "link" : "https://stackoverflow.com/users/30347057/alex"
      },
      "creation_date" : 1745869726,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}