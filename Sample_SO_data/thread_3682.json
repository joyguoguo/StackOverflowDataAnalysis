{
  "question" : {
    "question_id" : 79531828,
    "title" : "Add a dependency from a jar file to be extracted from a zip which is coming from a maven repository",
    "body" : "<p>I want to download a zip file from a maven repository, extract the jar file from the zip, compile my springboot application with\nthe jar file and include the jar into my application target jar file for execution purpose (doing a simple java -jar myApplication.jar)</p>\n<ol>\n<li>Is it possible to do all of those steps on the fly with a single mvn clean package command? If so what is the correct pom.xml?</li>\n<li>If not which manual steps must be performed with the correct pom.xml?</li>\n</ol>\n<p>My Error on <code>mvn clean package</code> command :</p>\n<pre><code>[ERROR] Failed to execute goal on project service: \nCould not resolve dependencies for project com.team:service:jar:1.0.0-SNAPSHOT: Could not find artifact com.mycompany:my-library:jar:1.0 at specified path C:\\my\\service\\target\\unzipped\\Bin\\64bits\\lib.jar -&gt; [Help 1]\n</code></pre>\n<p>The error comes from dependency scope below as the target ${project.build.directory}/unzipped/Bin/64bits/lib.jar is not created yet when the dependency is invoqued.\nI know also that  <code>&lt;scope&gt;system&lt;/scope&gt;</code> is dedicated only for compilation purpose and I do not know how to have the jar for compile and for runtime i.e included into the target jar.\nmy pom.xml :</p>\n<pre><code>    &lt;/dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n            &lt;artifactId&gt;my-library&lt;/artifactId&gt;\n            &lt;version&gt;1.0&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.build.directory}/unzipped/Bin/64bits/lib.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;mainClass&gt;com/local.work.service.BTKServiceApplication&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;repackage&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;unpack-zip&lt;/id&gt;\n                    &lt;phase&gt;process-resources&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;unpack&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;artifactItems&gt;\n                            &lt;artifactItem&gt;\n                                &lt;groupId&gt;com.group.HELLO&lt;/groupId&gt;\n                                &lt;artifactId&gt;HELLO-win-package&lt;/artifactId&gt;\n                                &lt;version&gt;3.5.1&lt;/version&gt;\n                                &lt;type&gt;zip&lt;/type&gt;\n                                &lt;overWrite&gt;false&lt;/overWrite&gt;\n                                &lt;outputDirectory&gt;${project.build.directory}/unzipped&lt;/outputDirectory&gt;\n                            &lt;/artifactItem&gt;\n                        &lt;/artifactItems&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                    &lt;manifestEntries&gt;\n                        &lt;Class-Path&gt;${project.build.directory}/unzipped/Bin/64bits/lib.jar&lt;/Class-Path&gt;\n                    &lt;/manifestEntries&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "maven", "maven-dependency-plugin" ],
    "owner" : {
      "account_id" : 19111621,
      "reputation" : 187,
      "user_id" : 13957509,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/bf8089e119353352e0a4659e70bdd0f0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "cknelle",
      "link" : "https://stackoverflow.com/users/13957509/cknelle"
    },
    "is_answered" : false,
    "view_count" : 78,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1743113891,
    "creation_date" : 1742839690,
    "link" : "https://stackoverflow.com/questions/79531828/add-a-dependency-from-a-jar-file-to-be-extracted-from-a-zip-which-is-coming-from",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}