{
  "question" : {
    "question_id" : 79661433,
    "title" : "itext 5 emojis do not appear",
    "body" : "<p>I use Java and want to display emojis. This is the code:</p>\n<pre><code>final Document document = new Document();\nFontFactory.register(getClass().getResource(&quot;/NotoColorEmoji.ttf&quot;).toExternalForm());\nfinal Font fontEmoji =\n    new Font(FontFactory.getFont(&quot;NotoColorEmoji&quot;).getBaseFont(), 40f, Font.NORMAL);\nfinal Font fontText = FontFactory.getFont(FontFactory.HELVETICA, 20f, Font.NORMAL);\nfontEmoji.setColor(BaseColor.BLUE);\nfinal PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream(&quot;temp.pdf&quot;));\ndocument.open();\nfinal Paragraph paragraph = new Paragraph();\nparagraph.add(new Chunk(&quot;Start&quot;, fontText));\nparagraph.add(new Chunk(&quot;\\n\\n\uD83D\uDE00 \uD83D\uDE03 \uD83D\uDE04 \uD83D\uDE01 \uD83D\uDE06&quot;, fontEmoji));\nparagraph.add(new Chunk(&quot;\\n\\nABC&quot;, fontEmoji));\nparagraph.add(new Chunk(&quot;End&quot;, fontText));\ndocument.add(paragraph);\ndocument.close();\nwriter.close();\n</code></pre>\n<p>pom dependency:</p>\n<pre><code>   &lt;dependency&gt;\n      &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n      &lt;artifactId&gt;itextpdf&lt;/artifactId&gt;\n      &lt;version&gt;5.5.13.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I tried using Google and Apple Font on Windows and Mac. None worked, see picture. Any advice?</p>\n<p><a href=\"https://i.sstatic.net/f5ihz8K6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/f5ihz8K6.png\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "itext", "emoji" ],
    "owner" : {
      "account_id" : 7177631,
      "reputation" : 43,
      "user_id" : 5482925,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
      "display_name" : "Mani Afschar Yazdi",
      "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
    },
    "is_answered" : true,
    "view_count" : 100,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1749838644,
    "creation_date" : 1749620005,
    "link" : "https://stackoverflow.com/questions/79661433/itext-5-emojis-do-not-appear",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79663885,
    "question_id" : 79661433,
    "body" : "<p>If you check out <a href=\"https://stackoverflow.com/questions/21254628/set-encoding-when-converting-text-file-to-pdf-using-itext\">this</a> SO comment from Bruno Lowagie (iText's creator), you will see that we require IDENTITY_H for unicode.</p>\n<p>I could get your code to work by setting the encoding, with the black-and-white font.</p>\n<pre><code>package com.example;\n\nimport com.itextpdf.text.BaseColor;\nimport com.itextpdf.text.Chunk;\nimport com.itextpdf.text.Document;\nimport com.itextpdf.text.DocumentException;\nimport com.itextpdf.text.FontFactory;\nimport com.itextpdf.text.Paragraph;\nimport com.itextpdf.text.pdf.BaseFont;\nimport com.itextpdf.text.pdf.PdfWriter;\nimport com.itextpdf.text.Font;\n\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic class App {\n    public void trySolution() {\n        System.err.println(new Font());\n        final Document document = new Document();\n        FontFactory.register(getClass().getResource(&quot;/NotoEmoji-Regular.ttf&quot;).toExternalForm());\n        BaseFont baseFont = null;\n        try {\n            baseFont = BaseFont.createFont(\n                    &quot;NotoEmoji-Regular.ttf&quot;,\n                    BaseFont.IDENTITY_H, \n                    BaseFont.EMBEDDED \n            );\n        } catch (DocumentException | IOException e) {\n            e.printStackTrace();\n        }\n        Font fontEmoji = new Font(baseFont, 40f, Font.NORMAL);\n\n        PdfWriter writer = null;\n\n        try {\n            writer = PdfWriter.getInstance(document, new FileOutputStream(&quot;temp.pdf&quot;));\n        } catch (DocumentException e) {\n            e.printStackTrace();\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        }\n        document.open();\n        final Paragraph paragraph = new Paragraph();\n        paragraph.add(new Chunk(&quot;\uD83D\uDE00&quot;, fontEmoji));\n        try {\n            document.add(paragraph);\n        } catch (DocumentException e) {\n            e.printStackTrace();\n        }\n        document.close();\n        writer.close();\n    }\n\n    public static void main(String[] args) {\n        new App().trySolution();\n    }\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 42508811,
      "reputation" : 11,
      "user_id" : 30787963,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/aea4ee0c26c30fdf9ae880312c5db92a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user30787963",
      "link" : "https://stackoverflow.com/users/30787963/user30787963"
    },
    "creation_date" : 1749747432,
    "last_activity_date" : 1749747432,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79665234,
    "question_id" : 79661433,
    "body" : "<p>Ended up generating all emojis as png and adding them as image to pdf. Generation code:</p>\n<pre><code>var save = function (e) {\n    const fontkit = require('fontkit');\n    const font = fontkit.openSync('NotoColorEmoji.ttf').fonts[0];\n    var s = '', eSplitted = e.split(' ');\n    for (var i2 = 0; i2 &lt; eSplitted.length; i2++)\n        s += String.fromCodePoint(parseInt(eSplitted[i2], 16));\n    var img = font.layout(s).glyphs[0].getImageForSize(160);\n    if (img)\n        fs.writeFileSync('src/main/resources/emoji/' + e.replace(/ /g, '_') + '.png', img.data);\n    else\n        console.log(e + ' ' + s);\n}\nfor (var i = 0; i &lt; emojis.length; i++) {\n    if (emojis[i].code.indexOf('.') &lt; 0)\n        save(emojis[i].code.toLowerCase());\n    else {\n        var c = emojis[i].code.split('..');\n        for (var i2 = parseInt(c[0], 16); i2 &lt;= parseInt(c[1], 16); i2++)\n            save(i2.toString(16));\n    }\n}\nvar emojis = [\n    { code: '231A..231B', type: 'Basic_Emoji', description: 'watch..hourglass done', cat: 'E0.6 [2]', char: '⌚..⌛' },\n    { code: '223E9..23EC', type: 'Basic_Emoji', description: 'fast-forward button..fast down button', cat: 'E0.6 [4]', char: '⏩..⏬' },\n    { code: '23F0', type: 'Basic_Emoji', description: 'alarm clock', cat: 'E0.6 [1]', char: '⏰' },\n    { code: '23F3', type: 'Basic_Emoji', description: 'hourglass not done', cat: 'E0.6 [1]', char: '⏳' }\n}\n</code></pre>\n<p>In itext:</p>\n<pre><code>final Image image = new Image(ImageDataFactory.create(IOUtils.toByteArray(getClass().getResourceAsStream(&quot;/emoji/&quot; + id + &quot;.png&quot;))));\nimage.setHeight(15f);\nimage.setMarginBottom(-2f);\nparagraph.add(image);\n</code></pre>\n<p>Works smoothly! For generation the provided list of emojis is not complete...</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 7177631,
      "reputation" : 43,
      "user_id" : 5482925,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
      "display_name" : "Mani Afschar Yazdi",
      "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
    },
    "creation_date" : 1749838321,
    "last_activity_date" : 1749838644,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140512241,
    "post_id" : 79661433,
    "body" : "@KJ correct, see my answer below... I was looking for some sort of solution this way, which I couldn&#39;t find...",
    "score" : 1,
    "owner" : {
      "account_id" : 7177631,
      "reputation" : 43,
      "user_id" : 5482925,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
      "display_name" : "Mani Afschar Yazdi",
      "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
    },
    "creation_date" : 1749840382,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140506451,
    "post_id" : 79661433,
    "body" : "that&#39;s what drives me crazy... ;)",
    "score" : 0,
    "owner" : {
      "account_id" : 7177631,
      "reputation" : 43,
      "user_id" : 5482925,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
      "display_name" : "Mani Afschar Yazdi",
      "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
    },
    "creation_date" : 1749663697,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140505877,
    "post_id" : 79661433,
    "body" : "Even example given in <a href=\"https://kb.itextpdf.com/itext/pdfhtml-using-emojis-in-itext\" rel=\"nofollow noreferrer\">kb.itextpdf.com/itext/pdfhtml-using-emojis-in-itext</a> does not work with NotoColorEmoji. NotoEmoji works though.",
    "score" : 0,
    "owner" : {
      "account_id" : 39994530,
      "reputation" : 79,
      "user_id" : 29556869,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/269e8c4932c4183f4b672023edeed8d0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Reet",
      "link" : "https://stackoverflow.com/users/29556869/reet"
    },
    "creation_date" : 1749653385,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140504603,
    "post_id" : 79661433,
    "body" : "I also tried non colored... same result. I think it&#39;s more itext related, not PDF related...",
    "score" : 0,
    "owner" : {
      "account_id" : 7177631,
      "reputation" : 43,
      "user_id" : 5482925,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
      "display_name" : "Mani Afschar Yazdi",
      "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
    },
    "creation_date" : 1749626565,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140504535,
    "post_id" : 79661433,
    "body" : "If I recall correctly, PDF does not support colored fonts (except type 3).",
    "score" : 1,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97003,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1749624651,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79663885" : [ {
      "comment_id" : 140512153,
      "post_id" : 79663885,
      "body" : "Thanks @user30787963 black/white are working, colored was my objection, see my answer...",
      "score" : 0,
      "owner" : {
        "account_id" : 7177631,
        "reputation" : 43,
        "user_id" : 5482925,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/VUWLXkth.jpg?s=256",
        "display_name" : "Mani Afschar Yazdi",
        "link" : "https://stackoverflow.com/users/5482925/mani-afschar-yazdi"
      },
      "creation_date" : 1749837890,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}