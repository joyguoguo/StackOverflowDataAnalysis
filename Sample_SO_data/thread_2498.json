{
  "question" : {
    "question_id" : 79616423,
    "title" : "Split the large facet in the geojson file into multiple small facets",
    "body" : "<p>I have a geojson file that needs to iterate over all the polygons in all the features, but some of them are very large, making it slow to perform certain tasks, and I would like to split them into smaller polygons and then use multiple threads to perform the tasks and finally merge the results.</p>\n<p>My initial idea was to run the points of the boundary and then split them evenly so that the first and last points of the boundary are connected. This works well for regular shapes like circles, but for irregular polygons, it changes the original shape.</p>\n<p>I'm using Java, is there a Java library? Other languages are fine, such as Python.</p>\n<p>Looking forward to your help!</p>\n",
    "tags" : [ "java", "geometry", "geojson" ],
    "owner" : {
      "account_id" : 26738302,
      "reputation" : 98,
      "user_id" : 20339497,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/6i2fO.jpg?s=256",
      "display_name" : "HuaJFrame",
      "link" : "https://stackoverflow.com/users/20339497/huajframe"
    },
    "is_answered" : false,
    "view_count" : 56,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1747385570,
    "creation_date" : 1746962028,
    "link" : "https://stackoverflow.com/questions/79616423/split-the-large-facet-in-the-geojson-file-into-multiple-small-facets",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79624815,
    "question_id" : 79616423,
    "body" : "<p><a href=\"https://gis.stackexchange.com/questions/168787/java-library-to-break-up-a-big-polygon-into-many-parts\">https://gis.stackexchange.com/questions/168787/java-library-to-break-up-a-big-polygon-into-many-parts</a></p>\n<p>The above link addresses this issue nicely;</p>\n<p>Attached is my implementation</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class GeojsonSplitterUtil {\n\n    private static final double MAX_CELL_DEGREE = 0.5;\n    private static final GeometryFactory geometryFactory = new GeometryFactory();\n\n\n    public static Collection&lt;Geometry&gt; split(Geometry geom, int maxSize) {\n        List&lt;Geometry&gt; answer = new ArrayList&lt;&gt;();\n        if (size(geom) &gt; maxSize) {\n            answer.addAll(subdivide(geom));\n        } else {\n            answer.add(geom);\n        }\n        return answer;\n    }\n\n\n    public static Collection&lt;Geometry&gt; split(Geometry geom) {\n        return new ArrayList&lt;&gt;(subdivide(geom));\n    }\n\n\n    private static int size(Geometry geom) {\n        return geom.getCoordinates().length;\n    }\n\n\n    private static List&lt;Geometry&gt; subdivide(Geometry geom) {\n        List&lt;Geometry&gt; result = new ArrayList&lt;&gt;();\n        Envelope env = geom.getEnvelopeInternal();\n\n        double minX = env.getMinX();\n        double maxX = env.getMaxX();\n        double minY = env.getMinY();\n        double maxY = env.getMaxY();\n\n        double width = maxX - minX;\n        double height = maxY - minY;\n        int gridX = (int) Math.ceil(width / MAX_CELL_DEGREE);\n        int gridY = (int) Math.ceil(height / MAX_CELL_DEGREE);\n        double dx = width / gridX;\n        double dy = height / gridY;\n\n        for (int i = 0; i &lt; gridX; i++) {\n            for (int j = 0; j &lt; gridY; j++) {\n                double cellMinX = minX + i * dx;\n                double cellMaxX = minX + (i + 1) * dx;\n                double cellMinY = minY + j * dy;\n                double cellMaxY = minY + (j + 1) * dy;\n                Envelope cellEnv = new Envelope(cellMinX, cellMaxX, cellMinY, cellMaxY);\n                Geometry cellBox = geometryFactory.toGeometry(cellEnv);\n\n                try {\n                    Geometry intersection = geom.intersection(cellBox);\n                    if (!intersection.isEmpty() &amp;&amp; intersection.isValid()) {\n                        result.add(intersection);\n                    }\n                } catch (Exception e) {\n                    log.error(&quot;error...ÔºÅ&quot;, e);\n                }\n            }\n        }\n        return result;\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26738302,
      "reputation" : 98,
      "user_id" : 20339497,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/6i2fO.jpg?s=256",
      "display_name" : "HuaJFrame",
      "link" : "https://stackoverflow.com/users/20339497/huajframe"
    },
    "creation_date" : 1747385570,
    "last_activity_date" : 1747385570,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}