{
  "question" : {
    "question_id" : 79611734,
    "title" : "PECS on the result type within an interface?",
    "body" : "<p>Let me say I have an interface with a generic parameter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NoRepositoryBean\ninterface ISomeRepository&lt;ENTITY extends AbstractSome&lt;ENTITY&gt;&gt; {\n\n    Streamable&lt;? extends ENTITY&gt; findAllByOther(String other, Pageable pageable);\n\n    Streamable&lt;ENTITY&gt; findAllByAnother(String another, Pageable pageable);\n\n    // &lt;? extends ENTITY&gt; vs. &lt;ENTITY&gt;\n}\n</code></pre>\n<p>The <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/util/Streamable.html\" rel=\"nofollow noreferrer\"><code>Streamable</code></a> is just an interface, and actual repository interface should override the type such as <code>Page</code> or <code>Slice</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Some extends AbstractSome&lt;Some&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@NoRepositoryBean\ninterface SomeRepository extends ISomeRepository&lt;Some&gt; {\n\n    Page&lt;Some&gt; findAllByOther(String other, Pageable pageable);\n\n    Slice&lt;Some&gt; findAllByAnother(String another, Pageable pageable);\n}\n</code></pre>\n<p>Both overridden methods work as expected.</p>\n<p>Does the <code>&lt;? extends ENTITY&gt;</code> have any meaning more than the <code>&lt;ENTITY&gt;</code> part?</p>\n",
    "tags" : [ "java", "generics", "pecs" ],
    "owner" : {
      "account_id" : 130873,
      "reputation" : 22419,
      "user_id" : 330457,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://i.sstatic.net/2JN6W.jpg?s=256",
      "display_name" : "Jin Kwon",
      "link" : "https://stackoverflow.com/users/330457/jin-kwon"
    },
    "is_answered" : true,
    "view_count" : 39,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746684825,
    "creation_date" : 1746679702,
    "link" : "https://stackoverflow.com/questions/79611734/pecs-on-the-result-type-within-an-interface",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79611789,
    "question_id" : 79611734,
    "body" : "<p>It does have more meaning than just <code>ENTITY</code>. The implementation of <code>ISomeRepository&lt;Some&gt;</code> can return <code>Streamable</code>s of subclasses of <code>Some</code>. Suppose there is a <code>Some</code> subclass called <code>SomeChild</code>, you can write</p>\n<pre><code>public class SomeRepository extends ISomeRepository&lt;Some&gt; {\n    public Page&lt;SomeChild&gt; findAllByOther(String other, Pageable pageable) {\n        // ...\n    }\n\n    // ...\n}\n</code></pre>\n<p>Though, in the context of a &quot;repository&quot;, you are probably not going to write something like that anyway.</p>\n<p>If in your implementation of <code>findAllByOther</code>, you call some other method that returns a <code>Page&lt;? extends Some&gt;</code>, then having <code>Streamable&lt;? extends ENTITY&gt;</code> as the return type allows you to return that directly. On the other hand, you cannot return a <code>Page&lt;? extends Some&gt;</code> from a method that is declared to return <code>Streamable&lt;Some&gt;</code>.</p>\n<p><code>? extends ENTITY</code> also affects the caller. If the caller calls <code>findAllByOther</code> through the <code>ISomeRepository&lt;Some&gt;</code> interface, they cannot call methods of <code>Streamable</code> that take <code>T</code> as an input. For example,</p>\n<pre><code>Streamable&lt;? extends Some&gt; streamable = someRepo.findAllByOther(...);\nSome somethingElse = ...;\nstreamable.and(somethingElse); // this does not compile\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292025,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1746684825,
    "last_activity_date" : 1746684825,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140406517,
    "post_id" : 79611734,
    "body" : "You should avoid using wildcards in return types. Wildcards should only be used to allow methods to accept broader parameters; they pollute return types because you can never get rid of the wildcard-ness at the call site.",
    "score" : 1,
    "owner" : {
      "account_id" : 162699,
      "reputation" : 141035,
      "user_id" : 3788176,
      "user_type" : "registered",
      "accept_rate" : 54,
      "profile_image" : "https://www.gravatar.com/avatar/44c841338e1646af9a977f1fa0e23948?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andy Turner",
      "link" : "https://stackoverflow.com/users/3788176/andy-turner"
    },
    "creation_date" : 1746685119,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}