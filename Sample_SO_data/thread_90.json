{
  "question" : {
    "question_id" : 79837052,
    "title" : "How does garbage collection differ between Python and Java, and when do objects actually get destroyed?",
    "body" : "<p>I'm trying to understand how garbage collection works in Python vs Java.</p>\n<p>From what I know:</p>\n<ul>\n<li><p>Python uses reference counting + a garbage collector</p>\n</li>\n<li><p>Java uses an automatic garbage collector based on JVM</p>\n</li>\n</ul>\n<p>But I'm confused about when objects are actually destroyed in both languages.</p>\n<p>For example:</p>\n<ul>\n<li><p>Python code</p>\n<pre class=\"lang-py prettyprint-override\"><code>class A:\n    def __del__(self):\n        print(&quot;Destroyed&quot;)\n\nobj = A()\nobj = None\nprint(&quot;End&quot;)\n</code></pre>\n<p>Sometimes <code>__del__</code> prints immediately, and sometimes it doesn't (especially when using circular references).</p>\n</li>\n<li><p>Java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>class A {\n    protected void finalize() {\n        System.out.println(&quot;Destroyed&quot;);\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        A obj = new A();\n        obj = null;\n        System.out.println(&quot;End&quot;);\n    }\n}\n</code></pre>\n<p>In Java, the <code>finalize()</code> method doesn’t always run before the program ends.</p>\n</li>\n</ul>\n<p>My questions:</p>\n<ol>\n<li><p>When exactly does object destruction happen in Python and Java?</p>\n</li>\n<li><p>Is there a way in either language to force object destruction?</p>\n</li>\n<li><p>Why does <code>__del__</code> in Python behave differently in some cases?</p>\n</li>\n</ol>\n",
    "tags" : [ "python", "java" ],
    "owner" : {
      "account_id" : 44001651,
      "reputation" : 7,
      "user_id" : 31524773,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/9nPWTXaK.jpg?s=256",
      "display_name" : "Amit_45",
      "link" : "https://stackoverflow.com/users/31524773/amit-45"
    },
    "is_answered" : false,
    "view_count" : 112,
    "closed_date" : 1764777703,
    "answer_count" : 0,
    "score" : -5,
    "last_activity_date" : 1764775940,
    "creation_date" : 1764775777,
    "link" : "https://stackoverflow.com/questions/79837052/how-does-garbage-collection-differ-between-python-and-java-and-when-do-objects",
    "closed_reason" : "Needs more focus"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140889435,
    "post_id" : 79837052,
    "body" : "Python uses a combination of reference counting and a tracing garbage collector, so it may clean up objects immediately when no cycles are involved. Java only uses tracing garbage collectors, so you can not expect a timely cleanup, but you don’t want it anyway. Because there is no “object destruction” at all. The garbage collection algorithms are designed to make large blocks of memory available for reuse when needed and do not care about the dead objects which might have been in that memory in the past. Running these operations in short intervals would be expensive while serving no purpose.",
    "score" : 2,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 300981,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1764955047,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886767,
    "post_id" : 79837052,
    "body" : "<a href=\"https://openjdk.org/jeps/421\" rel=\"nofollow noreferrer\"><i>JEP 421: Deprecate Finalization for Removal</i></a> in Java 18+.",
    "score" : 2,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346989,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1764834332,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886076,
    "post_id" : 79837052,
    "body" : "On the use of Java&#39;s <code>finalize()</code>, both the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/Cleaner.html\" rel=\"nofollow noreferrer\">Cleaner</a> class and the three <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ref/Reference.html\" rel=\"nofollow noreferrer\">reference classes</a> are the modern and correct way detect when an object has been garbage collected.",
    "score" : 4,
    "owner" : {
      "account_id" : 2709823,
      "reputation" : 11069,
      "user_id" : 2338547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
      "display_name" : "markspace",
      "link" : "https://stackoverflow.com/users/2338547/markspace"
    },
    "creation_date" : 1764790459,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140885775,
    "post_id" : 79837052,
    "body" : "Note that on the Java side, <code>Object.finalize()</code> has been deprecated for years, and its use was discouraged long before that.  <code>__del__()</code> has issues similar to those afflicting <code>finalize()</code>, and its use is also discouraged.",
    "score" : 6,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1764780982,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140885759,
    "post_id" : 79837052,
    "body" : "<code>__del__()</code> runs just before the object&#39;s storage is (proactively) reclaimed.  That happens when its reference count drops to zero, or otherwise (such as when the object participates in a reference cycle) it happens only at the whim of the GC.  There is almost certainly a delay between objects becoming unreachable and the GC recognizing them to be unreachable, and likely an additional delay between that time and the object actually being reclaimed, if ever it is. Much like Java, actually.",
    "score" : 0,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1764780344,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140885758,
    "post_id" : 79837052,
    "body" : "In Java, you can call <code>System.gc()</code> to request a garbage collection, and as far as I know every JVM will in fact perform a GC.  But it&#39;s not guaranteed (the docs for <code>gc()</code> say it&#39;s only advisory.)  As for your code, the GC runs when it&#39;s scheduled, and tends to batch things up for efficiency.  It doesn&#39;t run immediately when an object goes out of scope.  So basically you should ignore it and not worry about &quot;when.&quot;",
    "score" : 0,
    "owner" : {
      "account_id" : 2709823,
      "reputation" : 11069,
      "user_id" : 2338547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
      "display_name" : "markspace",
      "link" : "https://stackoverflow.com/users/2338547/markspace"
    },
    "creation_date" : 1764780340,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140885707,
    "post_id" : 79837052,
    "body" : "Many books and theses have been written about this, so any complete answer would be far too long and complex to fit in a Stack Overflow page.  Java has had many different garbage collection algorithms.  The one part that can be answered is your second question:  No, there is no way to force object destruction in Java.",
    "score" : 1,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44971,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1764778520,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}