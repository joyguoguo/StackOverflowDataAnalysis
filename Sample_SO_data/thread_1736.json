{
  "question" : {
    "question_id" : 79679350,
    "title" : "Why does Dragboard#setDragView() shrink my image, and how can I control its size in JavaFX?",
    "body" : "<p>When I use <code>Dragboard#setDragView(Image)</code> to display a custom image, the image often appears shrunk. I'd like to prevent this if possible. Here's my test code:</p>\n<pre><code>public class TestFx extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        WritableImage image = createColoredImage();\n        ImageView imageView = new ImageView(image);\n\n        imageView.setOnDragDetected(event -&gt; {\n            Dragboard db = imageView.startDragAndDrop(TransferMode.COPY);\n            db.setDragView(image);\n            ClipboardContent content = new ClipboardContent();\n            content.putImage(image);\n            db.setContent(content);\n\n            event.consume();\n        });\n\n        VBox root = new VBox(20, imageView);\n        primaryStage.setScene(new Scene(root, 1000, 250));\n        primaryStage.setTitle(&quot;Dragboard Image Width Test&quot;);\n        primaryStage.show();\n    }\n\n    private WritableImage createColoredImage() {\n        int width = 800;\n        int height = 100;\n        WritableImage image = new WritableImage(width, height);\n        PixelWriter writer = image.getPixelWriter();\n        int segmentWidth = 100;\n            for (int x = 0; x &lt; width; x++) {\n            Color color = (x / segmentWidth) % 2 == 0 ? Color.GREEN: Color.RED;\n\n            for (int y = 0; y &lt; height; y++) {\n                writer.setColor(x, y, color);\n            }\n        }\n        return image;\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n\n</code></pre>\n<p>And this the result:</p>\n<p><a href=\"https://i.sstatic.net/9Tx0a8KN.gif\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/9Tx0a8KN.gif\" alt=\"enter image description here\" /></a></p>\n<p>Can anyone explain how to prevent this shrinking? Is it possible to calculate the resulting image dimensions? For example, what would the final image size be if the original dimensions are width Ã— height?</p>\n",
    "tags" : [ "java", "javafx" ],
    "owner" : {
      "account_id" : 34599290,
      "reputation" : 1188,
      "user_id" : 26656564,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/882f996623517814360ba4bb403102e7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "SilverCube",
      "link" : "https://stackoverflow.com/users/26656564/silvercube"
    },
    "is_answered" : true,
    "view_count" : 154,
    "answer_count" : 2,
    "score" : 5,
    "last_activity_date" : 1751238573,
    "creation_date" : 1750867182,
    "link" : "https://stackoverflow.com/questions/79679350/why-does-dragboardsetdragview-shrink-my-image-and-how-can-i-control-its-size",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79684111,
    "question_id" : 79679350,
    "body" : "<p>+1 for all the comments and answer provided by @jewelsea.\nIn regards with the @jewelsea answer, you can also approach by using a Popup. But as he pointed out, you will lose the native drag features. But will have full control over the size and location.</p>\n<p><a href=\"https://i.sstatic.net/MSR8OWpB.gif\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/MSR8OWpB.gif\" alt=\"enter image description here\" /></a></p>\n<p>Below is the updated code using Popup:</p>\n<pre><code>import javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.image.PixelWriter;\nimport javafx.scene.image.WritableImage;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.paint.Color;\nimport javafx.stage.Popup;\nimport javafx.stage.Stage;\n\npublic class TestFx extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        WritableImage image = createColoredImage();\n        ImageView imageView = new ImageView(image);\n\n        Popup dragPopup = new Popup();\n        imageView.setOnMouseDragged(event -&gt; {\n            if (!dragPopup.isShowing()) {\n                dragPopup.getContent().clear();\n                dragPopup.getContent().add(new ImageView(image));\n                dragPopup.show(primaryStage, event.getScreenX(), event.getScreenY());\n            } else {\n                dragPopup.setAnchorX(event.getScreenX());\n                dragPopup.setAnchorY(event.getScreenY());\n            }\n            event.consume();\n        });\n        imageView.setOnMouseReleased(event -&gt; dragPopup.hide());\n\n        VBox root = new VBox(20, imageView);\n        primaryStage.setScene(new Scene(root, 1000, 250));\n        primaryStage.setTitle(&quot;Dragboard Image Width Test&quot;);\n        primaryStage.show();\n    }\n\n    private WritableImage createColoredImage() {\n        int width = 800;\n        int height = 100;\n        WritableImage image = new WritableImage(width, height);\n        PixelWriter writer = image.getPixelWriter();\n        int segmentWidth = 100;\n        for (int x = 0; x &lt; width; x++) {\n            Color color = (x / segmentWidth) % 2 == 0 ? Color.GREEN : Color.RED;\n\n            for (int y = 0; y &lt; height; y++) {\n                writer.setColor(x, y, color);\n            }\n        }\n        return image;\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n",
    "score" : 6,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7717111,
      "reputation" : 10689,
      "user_id" : 5844477,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/801ce427cdcbac7f648471e75d6d818e?s=256&d=identicon&r=PG",
      "display_name" : "Sai Dandem",
      "link" : "https://stackoverflow.com/users/5844477/sai-dandem"
    },
    "creation_date" : 1751238573,
    "last_activity_date" : 1751238573,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79681001,
    "question_id" : 79679350,
    "body" : "<h3>DragView behavior is system-dependent</h3>\n<p>As others have stated in comments, the <a href=\"https://openjfx.io/javadoc/24/javafx.graphics/javafx/scene/input/Dragboard.html#setDragView(javafx.scene.image.Image)\" rel=\"nofollow noreferrer\">DragView</a> behavior is system-dependent.</p>\n<p>When I checked the Java part of the JavaFX Dragboard implementation, it wasn't shrinking the image it was passing to the native code.  So, likely, the image sizing behavior you are seeing is being implemented by the native OS rather than JavaFX.</p>\n<p>I tried (in OS X 15.5 Safari, not using JavaFX at all) dragging the image with squares and a ruler that you have in your question.  I did this by clicking and holding the image and moving it.  I also saw the image converted to a drag view type image but smaller and slightly translucent so it didn't completely obscure everything behind.</p>\n<h3>How to simulate DragView in a non system-dependent way</h3>\n<p>Suppose you want something that is not system-dependent. In that case, you will need to implement it yourself without the DragView by creating a translucent ImageView to simulate the DragView and moving it around while the drag operation is in process (as the DragView does).</p>\n<p>In doing so, you may lose some of the performance offered by the native DragView implementation, as well as the default platform look for that function, but you will have more control over the user experience you want.</p>\n<p>For info on implementing your own drag handler for dragging an image around see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/10682107/correct-way-to-move-a-node-by-dragging-in-javafx-2/10689478#10689478\">correct way to move a node by dragging in javafx 2?</a></li>\n</ul>\n<p>If you want to drag an image of a complex node around, you can snapshot the node to get a draggable image (the example below uses the dragview to show the drag image, but you can use the technique above instead if you wish):</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/71953676/how-to-change-positions-of-node-in-a-gridpane/71962336#71962336\">How to change positions of node in a GridPane</a></li>\n</ul>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1180113,
      "reputation" : 160457,
      "user_id" : 1155209,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=256&d=identicon&r=PG",
      "display_name" : "jewelsea",
      "link" : "https://stackoverflow.com/users/1155209/jewelsea"
    },
    "creation_date" : 1750961930,
    "last_activity_date" : 1750970079,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140545259,
    "post_id" : 79679350,
    "body" : "From the perspective of the drag view, you are supplying something to be shown by the system to indicate the semantics of the drag and drop gesture. The defaults for these are typically <i>icons</i> that indicate semantics of &quot;copy&quot; or &quot;move&quot;, etc. So the system &quot;thinks&quot; it is setting some kind of icon, and not necessarily something to be literally taken as the UI element to display. With this in mind I&#39;m not too surprised the image is scaled. It looks like your system is scaling it so the icon has a smallest dimension of 40 pixels (a not unreasonable icon size).",
    "score" : 0,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210906,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1750959769,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140545250,
    "post_id" : 79679350,
    "body" : "Bear in mind that in some sense an <code>Image</code> is simply data, not the actual visualization of the data. For example, if you really wanted to show an image view with the alternating color squares in your demo (and I understand this example is just for demo purposes), you would (perhaps should, for memory considerations) create an 8x1 pixel image with alternating pixels, and then an image view with <code>fitWidth=800</code> and <code>fitHeight=100</code>. So the relationship between the number of pixels in the image and what is shown in the image view is non-trivial to begin with.",
    "score" : 1,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210906,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1750959531,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140542222,
    "post_id" : 79679350,
    "body" : "I&#39;m also seeing different behavior if I put the image in the <code>ClipboardContent</code> but <i>don&#39;t</i> set it as the drag view (still smaller and fades, but fades differently).",
    "score" : 1,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49884,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1750876658,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140542210,
    "post_id" : 79679350,
    "body" : "This seems to be platform-specific. On my Windows 10 machine, the drag view image is both smaller <i>and</i> fades towards the bottom and right. Though in my case the drag view image is larger relative to the &quot;real image&quot; compared to yours. I&#39;m not currently sure how to prevent that, if it&#39;s possible.",
    "score" : 1,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49884,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1750876446,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140542158,
    "post_id" : 79679350,
    "body" : "@SedJ601 In my question I used <code>JavaFX 25-ea+12</code> on <code>Ubuntu 20.04</code>. I tried <code>JavaFX 23.0.1</code> - same result.",
    "score" : 0,
    "owner" : {
      "account_id" : 34599290,
      "reputation" : 1188,
      "user_id" : 26656564,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/882f996623517814360ba4bb403102e7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "SilverCube",
      "link" : "https://stackoverflow.com/users/26656564/silvercube"
    },
    "creation_date" : 1750875226,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140542146,
    "post_id" : 79679350,
    "body" : "What version of JavaFX are you using? I am seeing the full-size image, but it&#39;s fading out. I am using <code>JavaFX 23</code> and <code>Windows 11</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1750874849,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}