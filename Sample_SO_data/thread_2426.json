{
  "question" : {
    "question_id" : 79621343,
    "title" : "Google Cloud Speech-to-Text V2 StreamingRecognize CANCELLED when using `cmn-Hans-CN`",
    "body" : "<p>I’m using Google Cloud Speech-to-Text V2 in an Android (Java) app. With <code>languageCode</code> set to <code>&quot;ja-JP&quot;</code> or <code>&quot;en-US&quot;</code>, streaming recognition works perfectly. As soon as I switch <strong>only</strong> the language code to <code>&quot;cmn-Hans-CN&quot;</code>, the call fails immediately with a CANCELLED error.</p>\n<p><strong>Environment &amp; Config:</strong></p>\n<ul>\n<li><strong>Model:</strong> <code>chirp_2</code></li>\n<li><strong>Endpoint:</strong> <code>us-central1-speech.googleapis.com:443</code></li>\n<li><strong>SDK:</strong> com.google.cloud:speech-v2:latest</li>\n<li><strong>Platform:</strong> Android (Java)</li>\n</ul>\n<p><strong>Relevant code snippet:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>// Build recognition config\nRecognitionConfig config = RecognitionConfig.newBuilder()\n    .setModel(&quot;chirp_2&quot;)\n    .setLanguageCode(&quot;cmn-Hans-CN&quot;)  // ← fails here\n    .build();\nStreamingRecognitionConfig streamingConfig =\n    StreamingRecognitionConfig.newBuilder()\n        .setConfig(config)\n        .build();\n\n// Start streaming\ntry (SpeechClient client = SpeechClient.create(\n         SpeechSettings.newBuilder()\n             .setEndpoint(&quot;us-central1-speech.googleapis.com:443&quot;)\n             .build())) {\n    ClientStream&lt;StreamingRecognizeRequest&gt; stream =\n        client.streamingRecognizeCallable()\n              .splitCall(responseObserver);\n    // First request with config\n    stream.send(StreamingRecognizeRequest.newBuilder()\n          .setStreamingConfig(streamingConfig)\n          .build());\n    // Then send audio data...\n} catch (Exception e) {\n    Log.e(&quot;SpeechTest&quot;, &quot;Streaming failed&quot;, e);\n}\n</code></pre>\n<p>Error Log:\n<code>com.google.api.gax.rpc.CancelledException: io.grpc.StatusRuntimeException: CANCELLED: The operation was cancelled.     at com.google.api.gax.rpc.ApiExceptions.callAndTranslateApiException(ApiExceptions.java:…)     at com.google.cloud.speech.v2.StreamingRecognizeClient.streamingRecognizeCallable(StreamingRecognizeClient.java:…)     … 05-14 16:42:40.052 26220 26279 E MyApp: com.google.api.gax.rpc.CancelledException: io.grpc.StatusRuntimeException: CANCELLED: The operation was cancelled. </code></p>\n<p>Confirmed that the same code/config works for ja-JP and en-US.</p>\n<p>Tried both cmn-Hans-CN and zh-CN—both cancel immediately.</p>\n<p>Verified network connectivity and valid credentials.</p>\n",
    "tags" : [ "java", "android", "google-speech-api", "google-cloud-speech", "google-speech-to-text-api" ],
    "owner" : {
      "account_id" : 41972655,
      "reputation" : 11,
      "user_id" : 30535497,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/tr8dpRay.jpg?s=256",
      "display_name" : "Kelvin",
      "link" : "https://stackoverflow.com/users/30535497/kelvin"
    },
    "is_answered" : false,
    "view_count" : 91,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1747221191,
    "creation_date" : 1747221191,
    "link" : "https://stackoverflow.com/questions/79621343/google-cloud-speech-to-text-v2-streamingrecognize-cancelled-when-using-cmn-hans",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140431280,
    "post_id" : 79621343,
    "body" : "Alright, thank you for your help. I’ll try reporting this issue to Google.",
    "score" : 0,
    "owner" : {
      "account_id" : 41972655,
      "reputation" : 11,
      "user_id" : 30535497,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/tr8dpRay.jpg?s=256",
      "display_name" : "Kelvin",
      "link" : "https://stackoverflow.com/users/30535497/kelvin"
    },
    "creation_date" : 1747379896,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140429473,
    "post_id" : 79621343,
    "body" : "The evidence suggests Google&#39;s blocking your use of <code>cmn-Hans-CN</code> from your firewalled IP. I suggest you contact Cloud Support.",
    "score" : 0,
    "owner" : {
      "account_id" : 301516,
      "reputation" : 41692,
      "user_id" : 609290,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://i.sstatic.net/WUBht.jpg?s=256",
      "display_name" : "DazWilkin",
      "link" : "https://stackoverflow.com/users/609290/dazwilkin"
    },
    "creation_date" : 1747323617,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140427873,
    "post_id" : 79621343,
    "body" : "@DazWilkin Thank you for your reply. Yes, you are right — I am indeed behind a firewall. However, my understanding is that since I&#39;m explicitly using the endpoint us-central1-speech.googleapis.com, and the connection itself is not being blocked, the issue shouldn&#39;t vary just because of the different languageCode.  That&#39;s why I&#39;m quite puzzled — everything else works fine, and only changing the language code to cmn-Hans-CN causes the failure. Do you have any other ideas or suggestions on what I could check or investigate further?",
    "score" : 0,
    "owner" : {
      "account_id" : 41972655,
      "reputation" : 11,
      "user_id" : 30535497,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/tr8dpRay.jpg?s=256",
      "display_name" : "Kelvin",
      "link" : "https://stackoverflow.com/users/30535497/kelvin"
    },
    "creation_date" : 1747297321,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140425695,
    "post_id" : 79621343,
    "body" : "This appears to not be a programming question but a support question since your code works except for the specific configuration. I am unable to repro your issue (using Golang) with <code>en-US</code> and <code>cmn-Hans-CN</code>. Is your client behind a firewall?",
    "score" : 0,
    "owner" : {
      "account_id" : 301516,
      "reputation" : 41692,
      "user_id" : 609290,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://i.sstatic.net/WUBht.jpg?s=256",
      "display_name" : "DazWilkin",
      "link" : "https://stackoverflow.com/users/609290/dazwilkin"
    },
    "creation_date" : 1747237447,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}