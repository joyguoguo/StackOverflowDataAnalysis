{
  "question" : {
    "question_id" : 79616327,
    "title" : "Why does adding a provider crash android app?",
    "body" : "<p>Here is the problem in its minimal version. I have an android app that does nothing except print the sdk version in its <code>onCreate</code> method. I am using the AndroidManifest</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.ascaryalipi&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;\n        android:maxSdkVersion=&quot;28&quot;\n        tools:ignore=&quot;ScopedStorage&quot; /&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.AscaryaLipi&quot;&gt;\n        &lt;activity\n            android:name=&quot;MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n        &lt;/activity&gt;\n&lt;!--\n&lt;provider\n            android:name=&quot;android.support.v4.content.FileProvider&quot;\n            android:authorities=&quot;${applicationId}.provider&quot;\n            android:exported=&quot;false&quot;\n            android:grantUriPermissions=&quot;true&quot;&gt;\n            &lt;meta-data\n                android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;\n                android:resource=&quot;@xml/provider_paths&quot;/&gt;\n        &lt;/provider&gt;\n--&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n\n</code></pre>\n<p>Things work as expected. Then I uncomment the provider. The app compiles and installs (installDebug) fine. But it crashes the moment the app is run. Logcat gives no relevant message. At least I know that even the first line in <code>onCreate</code> after <code>super.onCreate</code> is not reached.</p>\n<p>Following similar SO posts I have added:</p>\n<pre><code>android.useAndroidX=true #Was already there\nandroid.enableJetifier=true\n</code></pre>\n<p>to my gradle.properties file. But nothing changed.</p>\n<p>Please note that I am NOT using Android-Studio, just plain gradle. No Unity is used, as a similar SO post does.  While I do not really use the FileProvider in my minimal example, I do have</p>\n<pre><code>import androidx.core.content.FileProvider;\n</code></pre>\n<p>in my MainActivity.java. My device runs SDK version 28.</p>\n<p>PS: I am not a dev in absolute need of a quick answer. I would prefer answers that provide insight into the nature of the problem rather than just some &quot;add this magic line to that magic file&quot; type of answer :-)</p>\n<p>Edit:\nI also have the provider_paths.xml in my res/xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;paths&gt;\n    &lt;external-path name=&quot;external_files&quot; path=&quot;.&quot;/&gt;\n&lt;/paths&gt;\n</code></pre>\n",
    "tags" : [ "java", "crash", "android-manifest", "androidx", "provider" ],
    "owner" : {
      "account_id" : 7275643,
      "reputation" : 141,
      "user_id" : 10248856,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/19422a0738298aae4476c7728876bfa3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arnab Chakraborty",
      "link" : "https://stackoverflow.com/users/10248856/arnab-chakraborty"
    },
    "is_answered" : false,
    "view_count" : 67,
    "closed_date" : 1746978178,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1746963327,
    "creation_date" : 1746954364,
    "link" : "https://stackoverflow.com/questions/79616327/why-does-adding-a-provider-crash-android-app",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79616437,
    "question_id" : 79616327,
    "body" : "<p>I have figured out the problem thanks to <a href=\"https://stackoverflow.com/questions/50624510/classnotfoundexception-didnt-find-class-android-support-v4-content-fileprovid\">this SO post</a>. I used</p>\n<pre><code>androidx.core.content.FileProvider\n</code></pre>\n<p>in my java file, but used the following in my manifest:        <code>android.support.v4.content.FileProvider</code>.</p>\n<p>I have now changed the manifest to match the java file. Things work now.</p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7275643,
      "reputation" : 141,
      "user_id" : 10248856,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/19422a0738298aae4476c7728876bfa3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arnab Chakraborty",
      "link" : "https://stackoverflow.com/users/10248856/arnab-chakraborty"
    },
    "creation_date" : 1746963327,
    "last_activity_date" : 1746963327,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}