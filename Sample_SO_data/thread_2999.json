{
  "question" : {
    "question_id" : 79579250,
    "title" : "How to group anagrams using collections efficiently?",
    "body" : "<p>I'm working on a Java problem where I need to group words that are anagrams of each other. For instance, given the input array:</p>\n<pre><code>[&quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;]\n</code></pre>\n<p>The expected output should group anagrams together like this:</p>\n<pre><code>[[&quot;eat&quot;, &quot;tea&quot;, &quot;ate&quot;], [&quot;tan&quot;, &quot;nat&quot;], [&quot;bat&quot;]]\n</code></pre>\n<p>The grouped words can be in any order, but anagrams must be together in a sub-list.</p>\n<p>I attempted the following approach:</p>\n<ul>\n<li>Sort each word alphabetically.</li>\n<li>Used the sorted word as a key in a <code>HashMap&lt;String, List&lt;String&gt;&gt;</code> to collect the anagrams.</li>\n</ul>\n<p>Here is the rough code I tried:</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\nfor (String word : input) {\n  char[] chars = word.toCharArray();\n  Arrays.sort(chars);\n  String key = new String(chars);\n  map.computeIfAbsent(key, k -&gt; new ArrayList&lt;&gt;()).add(word);\n}\nList&lt;List&lt;String&gt;&gt; result = new ArrayList&lt;&gt;(map.values());\n</code></pre>\n<p>This approach works for basic cases, but I faced issues when duplicate entries are present or when empty strings are included in the input. I also want to understand if there's a more efficient or cleaner way to do this using Java collections.</p>\n<p>I looked for solutions using TreeMap, Streams, and even PriorityQueue, but most examples were simplistic and didn't explain handling duplicates or edge cases.</p>\n",
    "tags" : [ "java", "arrays", "collections", "hashmap", "anagram" ],
    "owner" : {
      "account_id" : 28331712,
      "reputation" : 3,
      "user_id" : 29970167,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/itzTb4j8.png?s=256",
      "display_name" : "Pabitra",
      "link" : "https://stackoverflow.com/users/29970167/pabitra"
    },
    "is_answered" : true,
    "view_count" : 149,
    "closed_date" : 1745075338,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744957090,
    "creation_date" : 1744893020,
    "link" : "https://stackoverflow.com/questions/79579250/how-to-group-anagrams-using-collections-efficiently",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79579472,
    "question_id" : 79579250,
    "body" : "<p>You could consider <code>Stream</code> handling to read a list of words and collect into sets of matching anagram. You could filter out names with leading/trailing whitespace and empty strings if required.</p>\n<p>Collecting with <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\"><code>Collectors.groupingBy</code></a> for each sorted fields can be used to collect related words. Using <code>Collectors.toSet()</code> is more suitable than ArrayList for collecting matching words, as it will eliminate duplicates. For example:</p>\n<pre><code>List&lt;String&gt; input = List.of(&quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;, &quot;&quot;, &quot; &quot;, &quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;, &quot;&quot;);\n\nCollection&lt;Set&lt;String&gt;&gt; anagrams = input.stream()\n        // Optional: strip whitespace:\n        .map(String::trim)\n        // Optional: eliminate empty String\n        .filter(Predicate.not(String::isEmpty))\n        // group by sorted word values, and collect results to a set\n        .collect(Collectors.groupingBy(word -&gt; {\n                char[] chars = word.toCharArray();\n                Arrays.sort(chars);\n                return new String(chars);\n            }, Collectors.toSet()))\n        .values();\nSystem.out.println(anagrams);\n</code></pre>\n<p>Prints:</p>\n<pre><code>[[tea, ate, eat], [bat], [tan, nat]]\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1744899757,
    "last_activity_date" : 1744900816,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140344672,
    "post_id" : 79579250,
    "body" : "Its not clear what issues you have if you don&#39;t show edge cases too. Its likely you should collect to a HashSet not ArrayList, and then you will eliminate duplicate entries.",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1744895636,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140344638,
    "post_id" : 79579250,
    "body" : "<i>&quot;I faced issues when ...&quot;</i>  Is there a reason you&#39;re not telling us the details of what those issues actually were?  It seems like it&#39;s critical information.",
    "score" : 2,
    "owner" : {
      "account_id" : 1704483,
      "reputation" : 12144,
      "user_id" : 1563833,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://www.gravatar.com/avatar/f3d7ae271e46eb178e7dd4f2ef760e6f?s=256&d=identicon&r=PG",
      "display_name" : "Wyck",
      "link" : "https://stackoverflow.com/users/1563833/wyck"
    },
    "creation_date" : 1744895160,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140344587,
    "post_id" : 79579250,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79579250/edit\">edit</a> your question to include a detailed description what the issues you have when you have duplicate entries (and what kine of entries). Also write in detail what the problem with the empty strings are.",
    "score" : 0,
    "owner" : {
      "account_id" : 108033,
      "reputation" : 20099,
      "user_id" : 286934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=256&d=identicon&r=PG",
      "display_name" : "Progman",
      "link" : "https://stackoverflow.com/users/286934/progman"
    },
    "creation_date" : 1744893993,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140344573,
    "post_id" : 79579250,
    "body" : "Can a letter appear multiple times in a word?",
    "score" : 0,
    "owner" : {
      "account_id" : 108033,
      "reputation" : 20099,
      "user_id" : 286934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=256&d=identicon&r=PG",
      "display_name" : "Progman",
      "link" : "https://stackoverflow.com/users/286934/progman"
    },
    "creation_date" : 1744893886,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}