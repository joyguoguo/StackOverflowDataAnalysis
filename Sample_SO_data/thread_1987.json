{
  "question" : {
    "question_id" : 79658199,
    "title" : "How can I start a spring-boot application with an invalid Datasource?",
    "body" : "<p>I'm working on the spring-boot 3.4.6 application that has a few different modes that it can be run in. Some require a database connection, and others do not and will not have access to a database in production.</p>\n<p>How can I make it so that the application will still run when there is no database connection available? I've seen <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0/reference/htmlsingle/#howto-initialize-a-database-using-spring-jdbc\" rel=\"nofollow noreferrer\">this config option in the docs</a>:</p>\n<pre><code>spring:\n  sql:\n    init:\n      continue-on-error: true\n</code></pre>\n<p>But it doesn't seem to work for me:</p>\n<pre><code>Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host ${DB_SERVER_IP}, port 1433 has failed. Error: &quot;${DB_SERVER_IP}. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;.\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:242) ~[mssql-jdbc-12.8.1.jre11.jar:na]\n</code></pre>\n<p>How can I make my spring-boot application run whether or not it can connect to a database, or even has datasource configuration set up at all?</p>\n",
    "tags" : [ "java", "spring-boot" ],
    "owner" : {
      "account_id" : 24111,
      "reputation" : 1861,
      "user_id" : 61104,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/de357816d5d57debab13abc5999ab068?s=256&d=identicon&r=PG",
      "display_name" : "Kevin",
      "link" : "https://stackoverflow.com/users/61104/kevin"
    },
    "is_answered" : true,
    "view_count" : 96,
    "answer_count" : 3,
    "score" : -1,
    "last_activity_date" : 1749625386,
    "creation_date" : 1749421749,
    "link" : "https://stackoverflow.com/questions/79658199/how-can-i-start-a-spring-boot-application-with-an-invalid-datasource",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79658616,
    "question_id" : 79658199,
    "body" : "<p>Unless you do not introduce jdbc-related dependencies, spring automatic configuration will always require you to have a database connection.</p>\n<p>The h2 database can be introduced.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 12263552,
      "reputation" : 11,
      "user_id" : 8950622,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-cO45UDed_w4/AAAAAAAAAAI/AAAAAAAAAEs/usCHP7LvQ1U/s256-rj/photo.jpg",
      "display_name" : "Qeir Mr.é’Ÿ",
      "link" : "https://stackoverflow.com/users/8950622/qeir-mr-%e9%92%9f"
    },
    "creation_date" : 1749459393,
    "last_activity_date" : 1749459393,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79658221,
    "question_id" : 79658199,
    "body" : "<p>Given short length of your question, the most generic answer would be use spring profiles. Move database realted beans into non-default profile.</p>\n<p>Check <a href=\"https://docs.spring.io/spring-boot/reference/features/profiles.html\" rel=\"nofollow noreferrer\">Spring proiles docs</a> for details.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1228608,
      "reputation" : 1232,
      "user_id" : 1193657,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qu2Es.png?s=256",
      "display_name" : "Talijanac",
      "link" : "https://stackoverflow.com/users/1193657/talijanac"
    },
    "creation_date" : 1749424743,
    "last_activity_date" : 1749424743,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79661089,
    "question_id" : 79658199,
    "body" : "<p>You don't need the property <code>spring.sql.init.continue-on-error</code>. You just need to set additionally the property <code>spring.jpa.database-platform</code></p>\n<p>PS: also forgot to mention: you should disable ddl-auto. Updated the example.</p>\n<p>For example:</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/no_db\n    username: unknown-user\n    password: unknown-password\n  jpa:\n    hibernate:\n      ddl-auto: none\n    database-platform: org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 19321072,
      "reputation" : 119,
      "user_id" : 14124751,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JvPOx2C9.jpg?s=256",
      "display_name" : "Artyom",
      "link" : "https://stackoverflow.com/users/14124751/artyom"
    },
    "creation_date" : 1749586841,
    "last_activity_date" : 1749625386,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79658221" : [ {
      "comment_id" : 140503993,
      "post_id" : 79658221,
      "body" : "Well for start I don&#39;t know what is desired outcome. Do you want to disable functionality related to database? Or have error messages / different functionality propted to user whenever datasoruce is missing etc? The first one is spring profiles, the second one are FactoryBeans..",
      "score" : 0,
      "owner" : {
        "account_id" : 1228608,
        "reputation" : 1232,
        "user_id" : 1193657,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/qu2Es.png?s=256",
        "display_name" : "Talijanac",
        "link" : "https://stackoverflow.com/users/1193657/talijanac"
      },
      "creation_date" : 1749596736,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140499370,
      "post_id" : 79658221,
      "body" : "Is there more details I could provide in my question that would be helpful? I think I provided everything relevant to my situation.",
      "score" : 0,
      "owner" : {
        "account_id" : 24111,
        "reputation" : 1861,
        "user_id" : 61104,
        "user_type" : "registered",
        "accept_rate" : 85,
        "profile_image" : "https://www.gravatar.com/avatar/de357816d5d57debab13abc5999ab068?s=256&d=identicon&r=PG",
        "display_name" : "Kevin",
        "link" : "https://stackoverflow.com/users/61104/kevin"
      },
      "creation_date" : 1749478413,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79658616" : [ {
      "comment_id" : 140499485,
      "post_id" : 79658616,
      "body" : "This is a fantastic suggestion, but I didn&#39;t realize what it meant at first. This is suggesting I should create a valid DB connection to an in-memory H2 database so that hibernate is happy and the application can start.",
      "score" : 0,
      "owner" : {
        "account_id" : 24111,
        "reputation" : 1861,
        "user_id" : 61104,
        "user_type" : "registered",
        "accept_rate" : 85,
        "profile_image" : "https://www.gravatar.com/avatar/de357816d5d57debab13abc5999ab068?s=256&d=identicon&r=PG",
        "display_name" : "Kevin",
        "link" : "https://stackoverflow.com/users/61104/kevin"
      },
      "creation_date" : 1749480939,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79661089" : [ {
      "comment_id" : 140504331,
      "post_id" : 79661089,
      "body" : "Why do I have minus vote?( I tested this solution and the app started, web part worked. I may not have understood the question.",
      "score" : 0,
      "owner" : {
        "account_id" : 19321072,
        "reputation" : 119,
        "user_id" : 14124751,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/JvPOx2C9.jpg?s=256",
        "display_name" : "Artyom",
        "link" : "https://stackoverflow.com/users/14124751/artyom"
      },
      "creation_date" : 1749617129,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}