{
  "question" : {
    "question_id" : 79553716,
    "title" : "Spring Jersey API: 400 Bad Request when Importing Document to Outline API",
    "body" : "<p>I am working on a <strong>Spring Jersey</strong> application where I need to import a document into Outline using their API. However, when I send the POST request to /documents.import, I receive a 400 Bad Request error, even though I am sending all the required parameters in the correct format.</p>\n<p><strong>What I am trying to do:</strong><br />\nDownload pages from a Coda document and convert them to Markdown.<br />\nUpload the Markdown file to Outline by making a multipart/form-data request.</p>\n<p><strong>Code I am using to send the request:</strong></p>\n<pre><code>Client client = ClientBuilder.newBuilder().register(MultiPartFeature.class).build();\nWebTarget outlineUploadTarget = client.target(OUTLINE_API_BASE_URL + &quot;/documents.import&quot;);\n\nFile fileToUpload = filePath.toFile();\nMultiPart multiPart = new FormDataMultiPart()\n        .field(&quot;collectionId&quot;, collectionId, MediaType.TEXT_PLAIN_TYPE)\n        .field(&quot;publish&quot;, &quot;true&quot;, MediaType.TEXT_PLAIN_TYPE)\n        .field(&quot;template&quot;, &quot;true&quot;, MediaType.TEXT_PLAIN_TYPE)\n        .bodyPart(new FileDataBodyPart(&quot;file&quot;, fileToUpload, MediaType.APPLICATION_OCTET_STREAM_TYPE));\n\ntry (Response response = outlineUploadTarget.request(MediaType.APPLICATION_JSON)\n        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + OUTLINE_API_KEY)\n        .post(Entity.entity(multiPart, multiPart.getMediaType()))) {\n\n    System.out.println(&quot;UPLOAD RESPONSE: &quot; + response.getStatus() + &quot; &quot; + response.readEntity(String.class));\n}\n\n// Cleanup multipart object\nmultiPart.close();\n</code></pre>\n<p><strong>Request Parameters (as per API docs):</strong><br />\nfile (Markdown file) <br />\ncollectionId (UUID of the collection) <br />\npublish (Boolean) <br />\ntemplate (Boolean)</p>\n<p><strong>Issue:</strong><br />\nDespite sending all the parameters correctly, I always receive 400 Bad Request. The Outline API documentation (linked below) does not specify additional requirements that I might be missing.</p>\n<p><strong>What I have tried:</strong><br />\nVerified that collectionId is a valid UUID.<br />\nEnsured that the file exists and is correctly read before being uploaded.<br />\nTried using different content types (MediaType.MULTIPART_FORM_DATA_TYPE, MediaType.APPLICATION_OCTET_STREAM_TYPE).<br />\nChecked for any missing authentication headers.</p>\n<p><strong>Outline's API Documentation:</strong>\n<a href=\"https://www.getoutline.com/developers#tag/documents/POST/documents.import\" rel=\"nofollow noreferrer\">https://www.getoutline.com/developers#tag/documents/POST/documents.import</a></p>\n<p>PLEASE HELP ME AS TO WHAT SHOULD I DO</p>\n",
    "tags" : [ "java", "spring-boot", "jersey" ],
    "owner" : {
      "account_id" : 24274307,
      "reputation" : 19,
      "user_id" : 18221824,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJwB3lShqHFxyWtgOZRJlXAQ1ve5B1vKsRlTGhv_gA=k-s256",
      "display_name" : "Nobil Gautam",
      "link" : "https://stackoverflow.com/users/18221824/nobil-gautam"
    },
    "is_answered" : false,
    "view_count" : 35,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743761400,
    "creation_date" : 1743704646,
    "link" : "https://stackoverflow.com/questions/79553716/spring-jersey-api-400-bad-request-when-importing-document-to-outline-api",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}