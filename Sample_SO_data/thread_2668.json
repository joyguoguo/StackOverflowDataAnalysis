{
  "question" : {
    "question_id" : 79604888,
    "title" : "Mapstruct doesn&#39;t generate the mapping code",
    "body" : "<p><strong>Why isn't my MapStruct mapper populating my entity objects correctly?</strong></p>\n<p>I believe I'm doing everything correctly, but for some reason, the mapping doesn't seem to work. Here are the details of my setup:</p>\n<ul>\n<li><p><strong>Mapper Interface:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper(\n    componentModel = &quot;spring&quot;,\n    unmappedTargetPolicy = ReportingPolicy.IGNORE,\n    unmappedSourcePolicy = ReportingPolicy.IGNORE\n)\npublic interface UserTaskMapper {\n    UserTask toEntity(UserTaskRequest userTaskRequest);\n    UserTaskResponse toResponse(UserTask userTask);\n}\n</code></pre>\n</li>\n<li><p><strong>Entity Class:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Getter\n@Setter\n@RequiredArgsConstructor\n@Table(name = &quot;user_tasks&quot;)\npublic class UserTask {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;user_id&quot;, nullable = false)\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;task_id&quot;, nullable = false)\n    private Task task;\n\n    private Boolean isCompleted;\n    private String projectUrl;\n    private LocalDateTime submittedAt;\n}\n</code></pre>\n</li>\n<li><p><strong>Request DTO:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class UserTaskRequest {\n    private Long taskId;\n    private Set&lt;Long&gt; userIds;\n    private Boolean isCompleted = false;\n    private String projectUrl;\n}\n</code></pre>\n</li>\n<li><p><strong>Response DTO:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\npublic class UserTaskResponse {\n    private Long id;\n    private Long userId;\n    private TaskResponse task;\n    private Boolean isCompleted;\n    private String projectUrl;\n    private LocalDateTime submittedAt;\n}\n</code></pre>\n</li>\n<li><p><strong>Generated Mapper Implementation:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2025-05-03T19:59:56+0400&quot;,\n    comments = &quot;version: 1.6.3, compiler: IncrementalProcessingEnvironment from gradle-language-java-8.13.jar, environment: Java 17.0.14 (Amazon.com Inc.)&quot;\n)\n@Component\npublic class UserTaskMapperImpl implements UserTaskMapper {\n\n    @Override\n    public UserTask toEntity(UserTaskRequest userTaskRequest) {\n        if (userTaskRequest == null) {\n            return null;\n        }\n        UserTask userTask = new UserTask();\n        return userTask;\n    }\n\n    @Override\n    public UserTaskResponse toResponse(UserTask userTask) {\n        if (userTask == null) {\n            return null;\n        }\n        UserTaskResponse userTaskResponse = new UserTaskResponse();\n        return userTaskResponse;\n    }\n}\n</code></pre>\n</li>\n</ul>\n<p>Here, the generated mapper is just returning empty objects without mapping any fields.</p>\n<p>I've tried several fixes:</p>\n<ol>\n<li><strong>Cleaning and rebuilding the project</strong> multiple times.</li>\n<li><strong>Updating dependencies</strong>â€”I changed:\n<pre><code>implementation 'org.mapstruct:mapstruct:1.6.3'\nannotationProcessor 'org.mapstruct:mapstruct-processor:1.6.3'\n</code></pre>\nfrom version <code>1.5.5.Final</code>. But this didn't resolve the issue.</li>\n</ol>\n<p>Despite these efforts, the mapping still isn't working correctly. How can I fix this?</p>\n",
    "tags" : [ "java", "gradle", "mapping", "mapstruct" ],
    "owner" : {
      "account_id" : 25002524,
      "reputation" : 11,
      "user_id" : 18862812,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/28a0339b3c59099990c45c8e9908654d?s=256&d=identicon&r=PG",
      "display_name" : "mahmudzadeh",
      "link" : "https://stackoverflow.com/users/18862812/mahmudzadeh"
    },
    "is_answered" : true,
    "view_count" : 166,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1746366750,
    "creation_date" : 1746288787,
    "link" : "https://stackoverflow.com/questions/79604888/mapstruct-doesnt-generate-the-mapping-code",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79605562,
    "question_id" : 79604888,
    "body" : "<p>I think your issue is with the annotation processor flow. Both MapStruct and Lombok work on the annotated source code. MapStruct behaves nicely, and only generates new classes. Lombok doesn't generate new classes but instead modifies the existing class. That's something that annotation processors actually shouldn't do. The problem you're running into is that MapStruct doesn't see the changes made by Lombok. There is a way around this though, all documented at <a href=\"https://www.baeldung.com/java-mapstruct-lombok\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-mapstruct-lombok</a>.</p>\n<p>When you've fixed that you should have some more mappings, like for <code>isCompleted</code> and <code>projectUrl</code>. You need to help MapStruct with the mapping of <code>taskId</code> to <code>task</code> and <code>userIds</code> (why is this multiple?) to <code>user</code> (single). MapStruct has some documentation about that, see <a href=\"https://mapstruct.org/documentation/stable/reference/html/#passing-target-type\" rel=\"nofollow noreferrer\">https://mapstruct.org/documentation/stable/reference/html/#passing-target-type</a>. You may need to make use of some qualified mappings if MapStruct doesn't like the generic <code>Long</code> types.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1746357923,
    "last_activity_date" : 1746357923,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79605562" : [ {
      "comment_id" : 140419258,
      "post_id" : 79605562,
      "body" : "Thanks for the review! I&#39;ve gone through all the documentation but still couldn&#39;t solve it. I&#39;ll use a builder for manual mapping and keep the mappers inactive for now. I&#39;ll investigate further to understand the issue and will update this question accordingly.",
      "score" : 0,
      "owner" : {
        "account_id" : 25002524,
        "reputation" : 11,
        "user_id" : 18862812,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/28a0339b3c59099990c45c8e9908654d?s=256&d=identicon&r=PG",
        "display_name" : "mahmudzadeh",
        "link" : "https://stackoverflow.com/users/18862812/mahmudzadeh"
      },
      "creation_date" : 1747078866,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}