{
  "question" : {
    "question_id" : 79796340,
    "title" : "What is (wrong) between a static member qualifying type and an annotation?",
    "body" : "<p>I got an error from the following code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public @Nullable String getWhatever() {\n        return whatever;\n    }\n\n    public void setWhatever(@Nullable final String whatever) {\n        this.whatever = whatever;\n    }\n\n    public &lt;E extends Enum&lt;E&gt; &amp; __Whatever&lt;E&gt;&gt;\n    @Nullable E getWhateverAsEnum(final Class&lt;E&gt; enumClass) {\n        return Optional.ofNullable(getWhatever())\n                .map(v -&gt; __AttributeEnumUtils.valueOfAttributeValue(enumClass, v))\n                .orElse(null);\n    }\n\n    public void setWhateverFromEnum(@Nullable final __AttributeEnum.__OfString&lt;?&gt; enumValue) {\n                                    ^^^^^^^^^\n        setWhatever(\n                Optional.ofNullable(enumValue)\n                        .map(__AttributeEnum.__OfString::attributeValue)\n                        .orElse(null)\n        );\n    }\n</code></pre>\n<p><a href=\"https://i.sstatic.net/82uV4jxT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/82uV4jxT.png\" alt=\"IDEA description\" /></a></p>\n<pre><code>java: type annotation @org.jspecify.annotations.Nullable is not expected here\n  (to annotate a qualified type, write ....__AttributeEnum.@org.jspecify.annotations.Nullable ....__AttributeEnum.__OfString&lt;?&gt;)\n</code></pre>\n<p>What's wrong between them? How can I fix this?</p>\n",
    "tags" : [ "java", "annotations" ],
    "owner" : {
      "account_id" : 130873,
      "reputation" : 22419,
      "user_id" : 330457,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://i.sstatic.net/2JN6W.jpg?s=256",
      "display_name" : "Jin Kwon",
      "link" : "https://stackoverflow.com/users/330457/jin-kwon"
    },
    "is_answered" : false,
    "view_count" : 143,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1761102171,
    "creation_date" : 1761097534,
    "link" : "https://stackoverflow.com/questions/79796340/what-is-wrong-between-a-static-member-qualifying-type-and-an-annotation",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79796364,
    "question_id" : 79796340,
    "body" : "<p>Here comes what IDEA told to do for fixing the problem which is moving the annotation to just before the nested type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public @Nullable String getWhatever() {\n        return whatever;\n    }\n\n    public void setWhatever(@Nullable final String whatever) {\n        this.whatever = whatever;\n    }\n\n    public &lt;E extends Enum&lt;E&gt; &amp; __Whatever&lt;E&gt;&gt;\n    @Nullable E getWhateverAsEnum(final Class&lt;E&gt; enumClass) {\n        return Optional.ofNullable(getWhatever())\n                .map(v -&gt; __AttributeEnumUtils.valueOfAttributeValue(enumClass, v))\n                .orElse(null);\n    }\n\n    public void setWhateverFromEnum(final __AttributeEnum.@Nullable  __OfString&lt;?&gt; enumValue) {\n                                                          ^^^^^^^^^\n        setWhatever(\n                Optional.ofNullable(enumValue)\n                        .map(__AttributeEnum.__OfString::attributeValue)\n                        .orElse(null)\n        );\n    }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 130873,
      "reputation" : 22419,
      "user_id" : 330457,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://i.sstatic.net/2JN6W.jpg?s=256",
      "display_name" : "Jin Kwon",
      "link" : "https://stackoverflow.com/users/330457/jin-kwon"
    },
    "creation_date" : 1761102171,
    "last_activity_date" : 1761102171,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140813003,
    "post_id" : 79796340,
    "body" : "@Torben While I agree with you generally, bean properties (that is, get/set methods) should never use Optional.",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44936,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1761224544,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140812328,
    "post_id" : 79796340,
    "body" : "In this particular case I would remove all Nullable annotations and replace the method return value with an Optional, which has the same information and provides compile time safety. The lack of Nonnull annotation has pretty much the same information as the annotation itself (especially as the getter return value already confirms the nullability). Also, I would use jakarta.annotations instead of yet another vendor specific NonNull annotation. There are way too many of them.",
    "score" : 1,
    "owner" : {
      "account_id" : 1041463,
      "reputation" : 3917,
      "user_id" : 1047418,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3deab5aa1be96fe145d3103251263523?s=256&d=identicon&r=PG",
      "display_name" : "Torben",
      "link" : "https://stackoverflow.com/users/1047418/torben"
    },
    "creation_date" : 1761205480,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140809796,
    "post_id" : 79796340,
    "body" : "@S&#246;ren Thank you for the comment. Yes I did and I shared what I did.",
    "score" : 0,
    "owner" : {
      "account_id" : 130873,
      "reputation" : 22419,
      "user_id" : 330457,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://i.sstatic.net/2JN6W.jpg?s=256",
      "display_name" : "Jin Kwon",
      "link" : "https://stackoverflow.com/users/330457/jin-kwon"
    },
    "creation_date" : 1761102098,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140809770,
    "post_id" : 79796340,
    "body" : "Did you try doing what the error message tells you to do?",
    "score" : 2,
    "owner" : {
      "account_id" : 1888781,
      "reputation" : 2498,
      "user_id" : 1707427,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4d1a2608ee35e2df7d2400a02e62bb20?s=256&d=identicon&r=PG",
      "display_name" : "S&#246;ren",
      "link" : "https://stackoverflow.com/users/1707427/s%c3%b6ren"
    },
    "creation_date" : 1761099535,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79796364" : [ {
      "comment_id" : 140810219,
      "post_id" : 79796364,
      "body" : "Or <code>import</code> the nested type and just use <code>@Nullable  __OfString&lt;?&gt;</code>. Then, placing the annotation before <code>final</code> like in your original code would be legal too, i.e. <code>@Nullable final __OfString&lt;?&gt; enumValue</code>",
      "score" : 3,
      "owner" : {
        "account_id" : 3211603,
        "reputation" : 300981,
        "user_id" : 2711488,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
        "display_name" : "Holger",
        "link" : "https://stackoverflow.com/users/2711488/holger"
      },
      "creation_date" : 1761122858,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}