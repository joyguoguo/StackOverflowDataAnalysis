{
  "question" : {
    "question_id" : 79606978,
    "title" : "trying to implement google sign in from firebase authentication in android studio. the code from the assistant doesnt make any sense",
    "body" : "<p>this is my code:</p>\n<pre><code>private void startGoogle() {\n        GetGoogleIdOption googleIdOption = new GetGoogleIdOption.Builder()\n                .setFilterByAuthorizedAccounts(true)\n                .setServerClientId(getBaseContext().getString(R.string.client_id))\n                .build();\n\n        GetCredentialRequest request = new GetCredentialRequest.Builder().addCredentialOption(googleIdOption).build();\n\n        if (credential instanceof CustomCredential customCredential &amp;&amp; credential.getType().equals(TYPE_GOOGLE_ID_TOKEN_CREDENTIAL)) {\n            Bundle credentialData = customCredential.getData();\n            GoogleIdTokenCredential googleIdTokenCredential = GoogleIdTokenCredential.createFrom(credentialData);\n            firebaseAuthWithGoogle(googleIdTokenCredential.getIdToken());\n        } else {\n            Log.w(TAG, &quot;Credential is not of type Google ID!&quot;);\n        }\n\n        AuthCredential credential = GoogleAuthProvider.getCredential(tokenId, null);\n\n        loading.setVisibility(View.VISIBLE);\n        auth.signInWithCredential(credential).addOnCompleteListener(task -&gt; {\n            loading.setVisibility(View.GONE);\n            if (task.isSuccessful()) {\n                Toast.makeText(LoginActivity.this, &quot;Login Successful&quot;, Toast.LENGTH_SHORT).show();\n                goToActivity(MainActivity.class);\n            } else {\n                Toast.makeText(LoginActivity.this, &quot;User Authentication failed&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n</code></pre>\n<p>The if statement part in the middle doesn't make any sense to me. why do i need to use credential data in order to get a token to get an AuthCredential? if i have the credential in the first place why not just use it in auth.signInWithCredentials?\nAnyway, i wasn't able to get any instance of the credential.\ninformation online is very vague and kotlin specific. would love to get some help with this.</p>\n<p>b.t.w i tried doing it with CredentialManager too and failed repeatedly. what am i missing?!</p>\n",
    "tags" : [ "java", "android", "firebase-authentication", "google-signin", "credentials" ],
    "owner" : {
      "account_id" : 25051856,
      "reputation" : 1,
      "user_id" : 18907681,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/65980632d4ea498c6ae795a902cb7136?s=256&d=identicon&r=PG",
      "display_name" : "erez",
      "link" : "https://stackoverflow.com/users/18907681/erez"
    },
    "is_answered" : false,
    "view_count" : 135,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746554125,
    "creation_date" : 1746450656,
    "link" : "https://stackoverflow.com/questions/79606978/trying-to-implement-google-sign-in-from-firebase-authentication-in-android-studi",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79609242,
    "question_id" : 79606978,
    "body" : "<p>try this :</p>\n<p>(<a href=\"https://i.sstatic.net/9nQX88qK.png\" rel=\"nofollow noreferrer\">https://i.sstatic.net/9nQX88qK.png</a>)</p>\n<pre><code>private final int RC_SIGN_IN = 657391;\n    private Button googleAccountBtn;\n    private FirebaseAuth mAuth = FirebaseAuth.getInstance();\n    private GoogleSignInClient mGoogleSignInClient;\n    private GoogleSignInAccount account;\n</code></pre>\n<pre><code>googleAccountBtn = findViewById(R.id.googleAccountBtn);\n\n        googleAccountBtn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                startActivity(new Intent(LoginActivity.this, MainActivity.class));\n                finish();\n\n                googleAccountBtn.setEnabled(false);\n                GoogleSignInOptions gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\n                        .requestEmail()\n                        .requestId()\n                        .requestProfile()\n                        .requestIdToken(getResources().getString(R.string.webKey))\n                        .build();\n                mGoogleSignInClient = GoogleSignIn.getClient(LoginActivity.this,gso);\n                SignIn();\n            }\n        });\n</code></pre>\n<pre><code>private void SignIn(){\n        Intent signInIntent = mGoogleSignInClient.getSignInIntent();\n        startActivityForResult(signInIntent, RC_SIGN_IN) ;\n    }\n</code></pre>\n<pre><code>@Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        switch (requestCode) {\n            case RC_SIGN_IN:\n                Task&lt;GoogleSignInAccount&gt; result = GoogleSignIn.getSignedInAccountFromIntent(data);\n                if (result != null)\n                    handleSignInResult(result);\n                else{\n                    Toast.makeText(this, &quot;result is empty&quot;, Toast.LENGTH_SHORT).show();\n                    googleAccountBtn.setEnabled(true);\n                }\n                break;\n        }\n    }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 32111831,
      "reputation" : 21,
      "user_id" : 24912663,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/25226738dc03deb2217d0c967f36a905?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ahmadreza gh",
      "link" : "https://stackoverflow.com/users/24912663/ahmadreza-gh"
    },
    "creation_date" : 1746554125,
    "last_activity_date" : 1746554125,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140399237,
    "post_id" : 79606978,
    "body" : "I&#39;m not sure I understand. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?",
    "score" : 0,
    "owner" : {
      "account_id" : 6819231,
      "reputation" : 139485,
      "user_id" : 5246885,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://i.sstatic.net/269fpDhM.jpg?s=256",
      "display_name" : "Alex Mamo",
      "link" : "https://stackoverflow.com/users/5246885/alex-mamo"
    },
    "creation_date" : 1746516564,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}