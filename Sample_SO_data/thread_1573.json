{
  "question" : {
    "question_id" : 79694699,
    "title" : "Customize items in GridLayoutManager with SpanSizeLookup",
    "body" : "<p>I want to configure a <code>RecyclerView</code> with a different arrangement, as described in the image below, using my Java code:</p>\n<p><a href=\"https://i.sstatic.net/zYPAmc5n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/zYPAmc5n.png\" alt=\"Customized Items prototype\" /></a></p>\n<p>All the items are different item types (e.g., <code>FirstItem</code>, <code>SecondItem</code>, and <code>ThirdItem</code>). The <code>FirstItem</code> and the <code>ThirdItem</code> must be arranged one above the other, and the <code>SecondItem</code> must be centered vertically with the other two.\nDue to code limitations, I can't spread it in two different <code>RecyclerViews</code> nor change its layout, I can only change the items' layouts individually, knowing that the three item types have different layouts. Below is my approach to try to match this expected behavior:</p>\n<pre><code>GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 3, GridLayoutManager.HORIZONTAL, false);\n\ngridLayoutManager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() {\n    @Override\n    public int getSpanSize(int position) {\n        if (mAdapter.getItemViewType(position) == MyAdapter.SECOND_ITEM) {\n            return 1;\n        }\n        return 2;\n    }\n</code></pre>\n<p>My items are being added to the adapter in the following order:</p>\n<pre><code>mItems.clear();\nmItems.add(Item.getFirstItem());\nmItems.add(Item.getSecondItem());\nmItems.add(Item.getThirdItem());\nnotifyDataSetChanged();\n</code></pre>\n<p>Moreover, the three layouts are similar, changing only the background to see the result:</p>\n<ul>\n<li><code>first_item.xml</code> and <code>third_item.xml</code> (both equal, with different background color):</li>\n</ul>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;1300dp&quot;\n    android:layout_height=&quot;210dp&quot;\n    android:background=&quot;#44FF0000&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@id/title&quot;\n        style=&quot;@style/Title&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:paddingHorizontal=&quot;6dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        tools:text=&quot;title&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<ul>\n<li><code>second_item.xml</code></li>\n</ul>\n<pre><code>&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;200dp&quot;\n    android:layout_height=&quot;200dp&quot;\n    android:background=&quot;#440000FF&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@id/title&quot;\n        style=&quot;@style/Title&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:paddingHorizontal=&quot;6dp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        tools:text=&quot;title&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>However, it brought me a wrong layout result, similar to this:</p>\n<p><a href=\"https://i.sstatic.net/H3rErMAO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/H3rErMAO.png\" alt=\"Obtained customized items\" /></a></p>\n<p>The items are successfully added to the recycler view, but the grid is not being applied as I want. I tried different proportions for the items, but it didn't work either. Considering my restricted scenario, <strong>does anyone know how to achieve this item's prototype?</strong> Note: I don't need to use the <code>GridLayoutManager</code>; I was only wondering about using it as a layout manager.</p>\n",
    "tags" : [ "java", "android", "android-recyclerview", "gridlayoutmanager" ],
    "owner" : {
      "account_id" : 21169706,
      "reputation" : 166,
      "user_id" : 16659874,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GiWr8iK_9SKxx1ugcl84_pZEXia1EeGQipN3Co7=k-s256",
      "display_name" : "Guilherme Hepfener",
      "link" : "https://stackoverflow.com/users/16659874/guilherme-hepfener"
    },
    "is_answered" : false,
    "view_count" : 64,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1752000441,
    "creation_date" : 1752000441,
    "link" : "https://stackoverflow.com/questions/79694699/customize-items-in-gridlayoutmanager-with-spansizelookup",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140610441,
    "post_id" : 79694699,
    "body" : "Unfortunately, the <code>StaggeredGridLayoutManager</code> does not work for me... The line responsible for showing the <code>FirstItem</code> can have more than one item with this type. The <code>StaggeredGridLayoutManager</code> can&#39;t be customized for different line weights.",
    "score" : 0,
    "owner" : {
      "account_id" : 21169706,
      "reputation" : 166,
      "user_id" : 16659874,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GiWr8iK_9SKxx1ugcl84_pZEXia1EeGQipN3Co7=k-s256",
      "display_name" : "Guilherme Hepfener",
      "link" : "https://stackoverflow.com/users/16659874/guilherme-hepfener"
    },
    "creation_date" : 1753226718,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140604909,
    "post_id" : 79694699,
    "body" : "Try <b>StaggeredGridLayoutManager</b>.",
    "score" : 0,
    "owner" : {
      "account_id" : 6305344,
      "reputation" : 2904,
      "user_id" : 4898562,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/nrUML.jpg?s=256",
      "display_name" : "i_A_mok",
      "link" : "https://stackoverflow.com/users/4898562/i-a-mok"
    },
    "creation_date" : 1753070524,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}