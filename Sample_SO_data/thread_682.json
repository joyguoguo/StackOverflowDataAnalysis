{
  "question" : {
    "question_id" : 79776532,
    "title" : "How to achieve per-phrase leading and alignment in OpenPDF ColumnText with inline rendering?",
    "body" : "<p>I'm working on a custom PDF text layout using OpenPDF <strong><code>ColumnText</code></strong> and need to render multiple phrases, each with its own leading, character spacing, alignment, and styling. Currently, I use <strong><code>ct.addElement(Paragraph)</code></strong> for each phrase, which gives me paragraph-level leading and alignment but does not produce the desired inline text flow (phrases stack vertically with individual settings but don't flow as inline text). When I use <strong><code>ct.addText(Chunk)</code></strong> with manual positioning, I get inline rendering, but lose distinct leading and alignment for each phrase.</p>\n<p>Here is the rendering I want to achieve (see third image, ignore font and color for now):</p>\n<ul>\n<li><p>Each phrase should have its own alignment (e.g. left, right), leading, and character spacing.</p>\n</li>\n<li><p>Phrases should flow inline, respecting their individual settings, and wrap to the next line if needed.</p>\n</li>\n</ul>\n<p>What I've tried</p>\n<ul>\n<li><p>Using ct.addElement(Paragraph) for each phrase: I get individual leading and alignment but phrases appear stacked, not flowing inline.</p>\n</li>\n<li><p>Using ct.addText(Chunk) for inline rendering: All phrases are in one paragraph, making it impossible to set individual alignment/leading for each phrase.</p>\n</li>\n</ul>\n<p>visual reference:</p>\n<p><a href=\"https://i.sstatic.net/82zUrRLT.png\" rel=\"nofollow noreferrer\">composite-mode(addElement)</a></p>\n<p><a href=\"https://i.sstatic.net/0Ze887CY.png\" rel=\"nofollow noreferrer\">inline-mode(addText)</a></p>\n<p>[Expected text flow with inline flow and alignment]<a href=\"https://i.sstatic.net/AJXFWcf8.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/AJXFWcf8.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The issue</p>\n<ul>\n<li><p>How can I achieve both paragraph-level control (leading, alignment per phrase) and inline text flow in ColumnText? Is there a workaround, or do I need to manually measure and position each phrase chunk?</p>\n</li>\n<li><p>Is there an OpenPDF idiom or workaround to achieve this, or do I need to process and position the phrases manually?</p>\n</li>\n</ul>\n<pre><code>\npublic void draw(){\n        float llx = 41;\n        float lly= 60;\n        float urx= 289;\n            float ury= 191;\n            try (Document document = new Document(new Rectangle(llx, lly, urx, ury), 0 , 0,0,0 )){\n                ByteArrayOutputStream os =  new ByteArrayOutputStream();\n                PdfWriter writer = PdfWriter.getInstance(document,os);\n                writer.setViewerPreferences(PdfWriter.PrintScalingNone);\n                document.open();\n                PdfContentByte cb = writer.getDirectContent();\n                \n                ColumnText ct = new ColumnText(cb);\n                ct.setSimpleColumn(43, 61, 288, 189);\n                \n                BaseFont bf = BaseFont.createFont();\n                ct.setUseAscender(false);\n                Font font = new Font(bf, 12);\n                font.setColor(Color.GREEN);\n                \n                float dAscent = font.getBaseFont().getAscentPoint(&quot;d&quot;, font.getSize());\n                ct.setYLine(ury - dAscent);\n    \n                \n                String text1 = &quot;Together &quot;;\n                Chunk chunk1 = new Chunk(text1, font);\n                chunk1.setTextRenderMode(PdfContentByte.TEXT_RENDER_MODE_STROKE, 1 , Color.red);\n                chunk1.setCharacterSpacing(0.4f);\n                chunk1.setHorizontalScaling(1);\n                Paragraph paragraph1 = new Paragraph(chunk1);\n                paragraph1.setLeading(14);\n                paragraph1.setAlignment(Element.ALIGN_RIGHT);\n                ct.addElement(paragraph1);\n                \n                String text2 = &quot;with their  Parents&quot;;\n                Chunk chunk2 = new Chunk(text2, font);\n                chunk2.setTextRenderMode(PdfContentByte.TEXT_RENDER_MODE_STROKE, 1 , Color.GREEN);\n                chunk2.setCharacterSpacing(0.3f);\n                chunk2.setHorizontalScaling(1);\n                Paragraph paragraph2 = new Paragraph(chunk2);\n                paragraph2.setLeading(12);\n                paragraph2.setAlignment(Element.ALIGN_LEFT);\n                ct.addElement(paragraph2);\n                \n                String text3 = &quot;Bella Sydney and george Thomas invite&quot;;\n                Chunk chunk3 = new Chunk(text3, font);\n                chunk3.setTextRenderMode(PdfContentByte.TEXT_RENDER_MODE_STROKE, 1 , Color.PINK);\n                chunk3.setCharacterSpacing(0.3f);\n                chunk3.setHorizontalScaling(1);\n                Paragraph paragraph3 = new Paragraph(chunk3);\n                paragraph3.setLeading(12);\n                paragraph3.setAlignment(Element.ALIGN_RIGHT);\n         ct.addElement(paragraph3);\n        ct.go();\n        \n        document.close();\n        File outputPDF = new File(&quot;columnTextUserBaselineTest.pdf&quot;);\n        FileOutputStream fos = new FileOutputStream(outputPDF);\n        fos.write(os.toByteArray());\n        fos.close();\n    }\n</code></pre>\n",
    "tags" : [ "java", "itext", "openpdf" ],
    "owner" : {
      "account_id" : 26482099,
      "reputation" : 1,
      "user_id" : 20121201,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d734178fe434021eeb7b640667c536df?s=256&d=identicon&r=PG",
      "display_name" : "BALAJI",
      "link" : "https://stackoverflow.com/users/20121201/balaji"
    },
    "is_answered" : false,
    "view_count" : 99,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1759179158,
    "creation_date" : 1758949051,
    "link" : "https://stackoverflow.com/questions/79776532/how-to-achieve-per-phrase-leading-and-alignment-in-openpdf-columntext-with-inlin",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79778270,
    "question_id" : 79776532,
    "body" : "<p>As <a href=\"https://stackoverflow.com/users/10802527/k-j\">K J</a> pointed out, PDF is about design, not programming.</p>\n<p>So, you need the correct input structure: block and inline levels, along with sizes.</p>\n<p>I would suggest the following input pseudo-structure:</p>\n<pre><code>&lt;paragraph&gt;\n  &lt;chunk color=&quot;red&quot;&gt;Together&lt;/chunk&gt;\n&lt;/paragraph&gt;\n&lt;paragraph&gt;\n  &lt;chunk color=&quot;green&quot;&gt;with their Parents&lt;/chunk&gt;\n  &lt;chunk color=&quot;pink&quot;&gt;Bella Sydney and george Thomas invite&lt;/chunk&gt;\n&lt;/paragraph&gt;\n</code></pre>\n<p>with both paragraphs right aligned and shifted to the right from the left margin.</p>\n<p>The corresponding code, showing only the modified lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void draw() {\n  ...\n  // ct.setSimpleColumn(43, 61, 288, 189);\n  ct.setSimpleColumn(90, 61, 288, 189);\n  ...\n  // ct.addElement(paragraph2);\n  ...\n  // Paragraph paragraph3 = new Paragraph(chunk3);\n  paragraph2.add(chunk3);\n  ...\n  // ct.addElement(paragraph3);\n  ct.addElement(paragraph2);\n  ...\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 35354441,
      "reputation" : 44,
      "user_id" : 27156279,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oJPdtGFA.jpg?s=256",
      "display_name" : "Alexey Gagarinov",
      "link" : "https://stackoverflow.com/users/27156279/alexey-gagarinov"
    },
    "creation_date" : 1759157844,
    "last_activity_date" : 1759177243,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}