{
  "question" : {
    "question_id" : 79535340,
    "title" : "How to upload a file from java to Azure?",
    "body" : "<p>I am trying upload a file to Azure from a Java function but i dont get it, i am not sure if my local directories or another variables such as &quot;shareName&quot; or &quot;dirName&quot; or &quot;fileName&quot; i was declared incorrectly</p>\n<p>i was a follow the next instructions in the apartated Upload a File:\n<a href=\"https://learn.microsoft.com/es-es/azure/storage/files/storage-java-how-to-use-file-storage\" rel=\"nofollow noreferrer\">Azure documentation</a>.</p>\n<p>At runs my code i was receive the next console output:</p>\n<blockquote>\n<p>DEBUG reactor.netty.resources.PooledConnectionProvider - [id:c341493a, L:/192.168.1.68:56172 - R:wiebs4fefe66q0knduvyeie.file.core.windows.net/52.239.169.232:443] Channel cleaned, now: 0 active connections, 1 inactive connections and 0 pending acquire requests.                                                              uploadFile exception: Status code 404, &quot;?&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;ParentNotFound&lt;/Code&gt;&lt;Message&gt;The specified parent path does not exist.                                                                           RequestId:f70e845e-401a-0068-66fd-9d44f5000000                                                                         Time:2025-03-26T03:17:18.3651535Z&lt;/Message&gt;&lt;/Error&gt;&quot;</p>\n</blockquote>\n<p>I was try use this code extracted from the Azure oficial web site <a href=\"https://learn.microsoft.com/es-es/azure/storage/files/storage-java-how-to-use-file-storage\" rel=\"nofollow noreferrer\">in the Upload a File aparted</a></p>\n<p>the uploadFile metod is the next:</p>\n<pre><code>public static Boolean uploadFile(String connectStr, String shareName,\n                                    String dirName, String fileName)\n{\n    try\n    {\n        ShareDirectoryClient dirClient = new ShareFileClientBuilder()\n             .connectionString(connectStr).shareName(shareName)\n             .resourcePath(dirName)\n             .buildDirectoryClient();\n\n        ShareFileClient fileClient = dirClient.getFileClient(fileName);\n        fileClient.create(1024);\n        fileClient.uploadFromFile(fileName);\n        return true;\n    }\n    catch (Exception e)\n    {\n        System.out.println(&quot;uploadFile exception: &quot; + e.getMessage());\n        return false;\n    }\n}\n</code></pre>\n<p>and i call the uploadFile method that next way:</p>\n<pre><code>String connectionString = &quot;DefaultEndpointsProtocol=https;&quot; +\n                &quot;AccountName=wisdfdsfsie;&quot; +\n                &quot;AccountKey=Y9vsdfsdfsdfsdffsdfGdQZK8Lz4DAIwi9A==&quot;;\n\n        String shareName = &quot;mis-archivos&quot;;\n        String dirName = &quot;hybris/master/mabe&quot;;\n        String fileName = &quot;temp/GR_IMPEXP_25-03-2025.csv&quot;;\n\n        boolean result = uploadFile(connectionString, shareName, dirName, fileName);\n\n        if (result) {\n            System.out.println(&quot;Upload Correct.&quot;);\n        } else {\n            System.out.println(&quot;Upload Failed....&quot;);\n        }\n</code></pre>\n<p>i am still not very clear the form of use the variables as shareName, dirName and fileName.\nI should set a special configuration into my Microsoft Azure Storage Explorer?</p>\n<p>in the string fileName i should put the file to transfer to my Azure Storage?</p>\n<p>I am should be create a File Shared Resource in the Microsoft Azure Storage Explorer? how to it?</p>\n<p>in the dirName i should set the directory trees set into the file shared resources?</p>\n<p>I am a little bit confused in how functions the uploadFiles method.</p>\n",
    "tags" : [ "java", "azure", "azure-storage" ],
    "owner" : {
      "account_id" : 28750366,
      "reputation" : 11,
      "user_id" : 30063286,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b1ceecde9ea5e13306deac2264a3d918?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Armando Rojas Valdez",
      "link" : "https://stackoverflow.com/users/30063286/armando-rojas-valdez"
    },
    "is_answered" : true,
    "view_count" : 94,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1742964359,
    "creation_date" : 1742959992,
    "link" : "https://stackoverflow.com/questions/79535340/how-to-upload-a-file-from-java-to-azure",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79535390,
    "question_id" : 79535340,
    "body" : "<p>If you look at the error message, you will notice that you are getting the error about the directory not exist. Before you can upload a file in a directory, the directory must be present in that share.</p>\n<p>Please see the code below:</p>\n<pre><code>public static Boolean uploadFile(String connectStr, String shareName,\n                                    String dirName, String fileName)\n{\n    try\n    {\n        ShareDirectoryClient dirClient = new ShareFileClientBuilder()\n             .connectionString(connectStr).shareName(shareName)\n             .resourcePath(dirName)\n             .buildDirectoryClient();\n\n        //create directory if it does not exist\n        dirClient.createIfNotExists();\n\n        ShareFileClient fileClient = dirClient.getFileClient(fileName);\n        fileClient.create(1024);\n        fileClient.uploadFromFile(fileName);\n        return true;\n    }\n    catch (Exception e)\n    {\n        System.out.println(&quot;uploadFile exception: &quot; + e.getMessage());\n        return false;\n    }\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 63568,
      "reputation" : 136929,
      "user_id" : 188096,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://i.sstatic.net/lTWwWx9F.png?s=256",
      "display_name" : "Gaurav Mantri",
      "link" : "https://stackoverflow.com/users/188096/gaurav-mantri"
    },
    "creation_date" : 1742962728,
    "last_activity_date" : 1742962728,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}