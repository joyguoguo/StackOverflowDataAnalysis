{
  "question" : {
    "question_id" : 79673203,
    "title" : "Graalvm github action with Micronaut application takes forever and break the github action",
    "body" : "<p>Any suggestion on running native image on Github action, I have below docker image generated using <code>./gradlew dockerfileNative</code> in Micronaut application using Graalvm CE 21</p>\n<pre><code>FROM ghcr.io/graalvm/native-image-community:21-ol9 AS graalvm\nWORKDIR /home/app\nCOPY --link layers/libs /home/app/libs\nCOPY --link layers/app /home/app/\nCOPY --link layers/resources /home/app/resources\nRUN mkdir /home/app/config-dirs\nRUN mkdir -p /home/app/config-dirs/generateResourcesConfigFile\nRUN mkdir -p /home/app/config-dirs/io.netty/netty-common/4.1.115.Final\nRUN mkdir -p /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final\nRUN mkdir -p /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9\nCOPY --link config-dirs/generateResourcesConfigFile /home/app/config-dirs/generateResourcesConfigFile\nCOPY --link config-dirs/io.netty/netty-common/4.1.115.Final /home/app/config-dirs/io.netty/netty-common/4.1.115.Final\nCOPY --link config-dirs/io.netty/netty-transport/4.1.115.Final /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final\nCOPY --link config-dirs/ch.qos.logback/logback-classic/1.4.9 /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9\nRUN native-image --exclude-config .*/libs/netty-buffer-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-common-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-transport-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http2-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-handler-4.1.119.Final.jar ^/META-INF/native-image/.* -cp /home/app/libs/*.jar:/home/app/resources:/home/app/application.jar --no-fallback -o application -H:ConfigurationFileDirectories=/home/app/config-dirs/generateResourcesConfigFile,/home/app/config-dirs/io.netty/netty-codec-http/4.1.80.Final,/home/app/config-dirs/io.netty/netty-common/4.1.115.Final,/home/app/config-dirs/io.netty/netty-buffer/4.1.80.Final,/home/app/config-dirs/io.netty/netty-transport/4.1.115.Final,/home/app/config-dirs/io.netty/netty-handler/4.1.80.Final,/home/app/config-dirs/io.netty/netty-codec-http2/4.1.80.Final,/home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9 com.example.Application -H:+StaticExecutableWithDynamicLibC\nFROM gcr.io/distroless/base-debian12\nEXPOSE 8080\nCOPY --link --from=graalvm /home/app/application /app/application\nENTRYPOINT [&quot;/app/application&quot;]\n</code></pre>\n<p>I am using github action from <a href=\"https://github.com/marketplace/actions/github-action-for-\" rel=\"nofollow noreferrer\">https://github.com/marketplace/actions/github-action-for-</a></p>\n<pre><code>graalvm\nname: GraalVM build\non: [push, pull_request]\njobs:\n build:\n  runs-on: ubuntu-latest\n  steps:\n   - uses: actions/checkout@v4\n   - uses: graalvm/setup-graalvm@v1\n    with:\n     java-version: '21'\n     distribution: 'graalvm' # See 'Supported distributions' for available options\n     github-token: ${{ secrets.GITHUB_TOKEN }}\n</code></pre>\n<p>This takes forever and build pipeline fails many times. What is the best approach to run graalvm native image in Github action (edited)</p>\n",
    "tags" : [ "java", "micronaut", "graalvm", "graalvm-native-image" ],
    "owner" : {
      "account_id" : 1189122,
      "reputation" : 17436,
      "user_id" : 1162409,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/YSzYR.jpg?s=256",
      "display_name" : "San Jaisy",
      "link" : "https://stackoverflow.com/users/1162409/san-jaisy"
    },
    "is_answered" : false,
    "view_count" : 94,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1750453529,
    "creation_date" : 1750414054,
    "link" : "https://stackoverflow.com/questions/79673203/graalvm-github-action-with-micronaut-application-takes-forever-and-break-the-git",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140536917,
    "post_id" : 79673203,
    "body" : "I am not saying you should make your app or your runner available. I meant that you should vreate a <i>minimal</i> reproducer that reproduces the issue with only what&#39;s strictly necessary for it.",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17100,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1750740602,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140536505,
    "post_id" : 79673203,
    "body" : "@dan1st Since with the github action I am using private runner, I won&#39;t be able to make that runner available. With Github default runner it might work, I never tested. The app is simple micronaut app.",
    "score" : 0,
    "owner" : {
      "account_id" : 1189122,
      "reputation" : 17436,
      "user_id" : 1162409,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/YSzYR.jpg?s=256",
      "display_name" : "San Jaisy",
      "link" : "https://stackoverflow.com/users/1162409/san-jaisy"
    },
    "creation_date" : 1750716038,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140535452,
    "post_id" : 79673203,
    "body" : "Can you please create a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that <i>only</i> contains what&#39;s necessary to reproduce it on a new project but still make sure to provide everything necessary to reproduce it? Every single line of code that isn&#39;t necessary for reproducing the issue should be removed.",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17100,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1750689865,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140533934,
    "post_id" : 79673203,
    "body" : "@dan1st  I have added more details over here - <a href=\"https://github.com/oracle/graal/issues/11454\" rel=\"nofollow noreferrer\">github.com/oracle/graal/issues/11454</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 1189122,
      "reputation" : 17436,
      "user_id" : 1162409,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/YSzYR.jpg?s=256",
      "display_name" : "San Jaisy",
      "link" : "https://stackoverflow.com/users/1162409/san-jaisy"
    },
    "creation_date" : 1750646020,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140533244,
    "post_id" : 79673203,
    "body" : "My guess eould be memory pressure due to native-image requiring quite a lot of memory in bigger projects and GitHub Actions being quite limited in that regard. Anyway, we can&#39;t tell you much without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17100,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1750610282,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140533049,
    "post_id" : 79673203,
    "body" : "define forever ? Github actions has default timeout 6 hours, if your build breaking that. A <code>small reproducer</code> would help to investigate this issue",
    "score" : 0,
    "owner" : {
      "account_id" : 58650,
      "reputation" : 4945,
      "user_id" : 175554,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/KmFczdGy.jpg?s=256",
      "display_name" : "ozkanpakdil",
      "link" : "https://stackoverflow.com/users/175554/ozkanpakdil"
    },
    "creation_date" : 1750602688,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}