{
  "question" : {
    "question_id" : 79606993,
    "title" : "Spring JpaRepository auto incrementes id instead of using the on i set",
    "body" : "<p>I have an SomeEntity, and want to create a new entry on the data base with the same &quot;someId&quot; but diferent &quot;seqNum&quot;.</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@EqualsAndHashCode\n@Embeddable\npublic class SomePK {\n\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;S_SOME_ID&quot;)\n    @SequenceGenerator(name = &quot;S_SOME_ID&quot;, allocationSize = 1)\n    @Column(name = &quot;SOME_ID&quot;, nullable = false, precision = 38, scale = 0)\n    private BigInteger someId;\n\n    @Column(name = &quot;SEQ_NUM&quot;, nullable = false, scale = 0)\n    private Long seqNum;\n}\n</code></pre>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;T_SOME_ENTITY&quot;)\npublic class SomeEntity extends GenericEntity {\n\n    @EmbeddedId\n    private SomePK somePK;\n\n    @Column(name = &quot;INTEGRATION_ID&quot;, nullable = false, length = 50)\n    private String integrationId;\n\n...\n}\n</code></pre>\n<pre><code>public interface SomeEntityRepository extends JpaRepository&lt;SomeEntity,SomePK&gt; {\n}\n</code></pre>\n<pre><code>    public SomeEntity saveSomeEntity(SomeEntity someEntity) {\n        SomeEntity someEntity = someRepository.save(someEntity );\n    }\n</code></pre>\n<p>I already have a persisted SomeEntity with the following data</p>\n<blockquote>\n<p>{\nsomePK:{\nsomeId: 123456,\nseqNum: &quot;1&quot;\n},\nintegrationId: &quot;123456-123456&quot;\n}</p>\n</blockquote>\n<p>now i want to inster a child like the follwing</p>\n<blockquote>\n<p>{\nsomePK:{\nsomeId: 123456,\nseqNum: &quot;2&quot;\n},\nintegrationId: &quot;123456-123456&quot;\n}</p>\n</blockquote>\n<p>but when i use the jpa to save i get the following</p>\n<blockquote>\n<p>{\nsomePK:{\nsomeId: 123457,\nseqNum: &quot;2&quot;\n},\nintegrationId: &quot;123456-123456&quot;\n}</p>\n</blockquote>\n",
    "tags" : [ "java", "spring", "save", "entity", "jparepository" ],
    "owner" : {
      "account_id" : 16343645,
      "reputation" : 11,
      "user_id" : 11803984,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e3c6c1462a588d9d500ba307b2fc69ec?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "jpedropsilva2010",
      "link" : "https://stackoverflow.com/users/11803984/jpedropsilva2010"
    },
    "is_answered" : true,
    "view_count" : 67,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1746474272,
    "creation_date" : 1746451001,
    "link" : "https://stackoverflow.com/questions/79606993/spring-jparepository-auto-incrementes-id-instead-of-using-the-on-i-set",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79607544,
    "question_id" : 79606993,
    "body" : "<p>The reason why <code>someId</code> auto-incremented (changes from <code>123456</code> to <code>123457</code>) is because you added this annotation:</p>\n<pre><code>@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;S_SOME_ID&quot;)\n</code></pre>\n<p>This tells JPA always generate a new value, even if you set it manually.</p>\n<p>Because <code>someId</code> is a part of the primary key (<code>SomePK</code>) and you want to provide it yourself, try to remove <code>@GeneratedValue</code> and <code>@SequenceGenerator</code>:</p>\n<pre><code>// @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;S_SOME_ID&quot;)\n// @SequenceGenerator(name = &quot;S_SOME_ID&quot;, allocationSize = 1)\n@Column(name = &quot;SOME_ID&quot;, nullable = false, precision = 38, scale = 0)\nprivate BigInteger someId;\n</code></pre>\n<p>Then JPA will use the value that you provided when calling <code>save()</code>.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 38931631,
      "reputation" : 671,
      "user_id" : 29023248,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
      "display_name" : "Aleksey Bykov",
      "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
    },
    "creation_date" : 1746474272,
    "last_activity_date" : 1746474272,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}