{
  "question" : {
    "question_id" : 79696767,
    "title" : "Is there a way to count steps from the start of the day?",
    "body" : "<p>My friend asked me to make a step counter app, but i've encountered a problem. When i get the number of steps taken bu the user using sensorEvent.values[0], it counts the steps from the last reboot. Yet i need the app to work so that it takes steps per day, not per reboot or per launch.</p>\n<p>I tried to set the sensorEvent.values myself, but that did not work. I want so that if the app detects that the current date isnt the date written in shared preferences, it resets the step counter, yet with it working by sensorEvent.values[0], i have no idea how to.</p>\n",
    "tags" : [ "java", "android" ],
    "owner" : {
      "account_id" : 42955393,
      "reputation" : 1,
      "user_id" : 31004508,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9f12a7b8f489616952283f80dff1943d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Георгий Цветков",
      "link" : "https://stackoverflow.com/users/31004508/%d0%93%d0%b5%d0%be%d1%80%d0%b3%d0%b8%d0%b9-%d0%a6%d0%b2%d0%b5%d1%82%d0%ba%d0%be%d0%b2"
    },
    "is_answered" : true,
    "view_count" : 69,
    "closed_date" : 1752194251,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1752176400,
    "creation_date" : 1752137362,
    "link" : "https://stackoverflow.com/questions/79696767/is-there-a-way-to-count-steps-from-the-start-of-the-day",
    "closed_reason" : "Needs details or clarity"
  },
  "answers" : [ {
    "answer_id" : 79696947,
    "question_id" : 79696767,
    "body" : "<p>For this you need to store(in shared prefs) count of steps when user first opens the app after reboot (call it <em>Int initialStepsAfterReboot</em>). And the total steps count since reboot will also be fetched from sensorEvent.values[0] (call it <em>Int totalStepsSinceReboot</em>). Whenever you want to get total steps user has walked today(since he opened the app) you will subtract initial steps count from total steps count.</p>\n<p>you will use following formula:</p>\n<pre><code>Int totalStepsCountToday = totalStepsSinceReboot - initialStepsAfterReboot //totalStepsSinceReboot was fetched using sensorEvent.values[0] as you said\n</code></pre>\n<p>then next day you will reset <em>initialStepsAfterReboot</em> based on a value you will store to know when was this initial steps recorded , was it today or yesterday? call it Date <em>initialStepsAfterRebootRecordedDate</em> . And you will update <em>initialStepsAfterReboot</em> to whatever value you get when user opened app using sensorEvent.values[0] and use same formula again and again after verifying that date of today is same as <em>initialStepsAfterRebootRecordedDate</em> i.e it should be valid for today not outdated.</p>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th>variables to store</th>\n<th>description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>initialStepsAfterRebootcount</td>\n<td>count of steps when user first time launch app after reboot.</td>\n</tr>\n<tr>\n<td>initialStepsAfterRebootRecordedDatedate</td>\n<td>count of the day when you stored initialStepsAfterReboot to check if it's valid for today or outdated.</td>\n</tr>\n</tbody>\n</table></div>\n<p><strong>for example</strong>, if user opened your app and sensorEvent.values[0] returns 100 steps, which means today you have extra 100 steps, now when user walked 300 steps, sensorEvent.values[0] will show you 400 steps, so you subtract initialSteps=100 from totalSteps=400 so you will get 100, and this is correct. Next day you will check if the initialStepsRecordedDate is today or yesterday, if it's today, use it, otherwise update it to sensorEvent.values[0].</p>\n<p>Make sure you don't update <em>initialStepsAfterReboot</em> again and again when user opens the app, rather you update it only if it's null/empty or outdated. this will make sure that you update it once a day only.</p>\n<p>PS: pls share more snippets so I can help more.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 16389513,
      "reputation" : 182,
      "user_id" : 11838630,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/9S0wN.png?s=256",
      "display_name" : "CodingDevil",
      "link" : "https://stackoverflow.com/users/11838630/codingdevil"
    },
    "creation_date" : 1752145354,
    "last_activity_date" : 1752145354,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79696947" : [ {
      "comment_id" : 140580142,
      "post_id" : 79696947,
      "body" : "edit: 400-100=300 not 100, in the end I by mistake wrote wrong answer. in line &quot;so you subtract initialSteps=100 from totalSteps=400 so you will get 100&quot;",
      "score" : 0,
      "owner" : {
        "account_id" : 16389513,
        "reputation" : 182,
        "user_id" : 11838630,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/9S0wN.png?s=256",
        "display_name" : "CodingDevil",
        "link" : "https://stackoverflow.com/users/11838630/codingdevil"
      },
      "creation_date" : 1752158547,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}