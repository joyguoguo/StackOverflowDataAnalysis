{
  "question" : {
    "question_id" : 79583358,
    "title" : "How to enable the Vertx core metrics when using Quarkus, esp the connection related ones",
    "body" : "<p>I am quite new to Quarkus and trying to move to it from Spring Boot. I am using @RestClient annotation to create and use clients from code generated by <a href=\"https://docs.quarkiverse.io/quarkus-openapi-generator/dev/client.html\" rel=\"nofollow noreferrer\">openapi extension</a>.</p>\n<p>I want to check connection related metrics for these, but couldn't seem to find them. I could see core <a href=\"https://vertx.io/docs/vertx-micrometer-metrics/java/#_http_client\" rel=\"nofollow noreferrer\">vertx has such metrics</a> available but <a href=\"https://vertx.io/docs/vertx-micrometer-metrics/java/#_configuration_examples_2\" rel=\"nofollow noreferrer\">not enabled by default</a>. I am using micrometer-registry-prometheus to get the metrics data.</p>\n<p>Quarkus seem to have a different metrics implementation than Vertx. In such case, are these connection related metrics missing from them or is there any way to explicitly enable them either via config or code? Should I be using core Vertx directly to have these metrics?</p>\n<pre><code>vertx_http_client_active_connections\n</code></pre>\n<p>I am attempting to optimize my application with such metrics.</p>\n<p>I could see <a href=\"https://projectreactor.io/docs/netty/1.1.5/reference/index.html#_metrics_6\" rel=\"nofollow noreferrer\">similar metrics available with reactor Netty</a> when using with Spring Boot, which could be enabled only programatically.</p>\n",
    "tags" : [ "java", "quarkus", "vert.x" ],
    "owner" : {
      "account_id" : 41508422,
      "reputation" : 11,
      "user_id" : 30322103,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/97b94ada48042362f9eff0f24c6ffd9d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ImOverflown",
      "link" : "https://stackoverflow.com/users/30322103/imoverflown"
    },
    "is_answered" : true,
    "view_count" : 309,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1745321595,
    "creation_date" : 1745152775,
    "link" : "https://stackoverflow.com/questions/79583358/how-to-enable-the-vertx-core-metrics-when-using-quarkus-esp-the-connection-rela",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79586346,
    "question_id" : 79583358,
    "body" : "<p>Quarkus implements automatic metrics instrumentation according to Micromenter guidelines: <a href=\"https://docs.micrometer.io/micrometer/reference/concepts/naming.html#page-title\" rel=\"nofollow noreferrer\">https://docs.micrometer.io/micrometer/reference/concepts/naming.html#page-title</a></p>\n<p>This means instead of <code>vertx_http_client_*</code> you should expect <code>http_client_requests_*</code>.</p>\n<p>Many Quarkus Micrometer metrics are disabled by default to minimize performance impacts. You should pick the ones you need. Some config examples you can add to your <code>application.properties</code> file:</p>\n<pre><code>quarkus.micrometer.binder.vertx.enabled=true\nquarkus.micrometer.binder.netty.enabled=true\n</code></pre>\n<p>This will enable metrics for Vert.x pools and Netty allocator. The server and client properties are already ON by default.</p>\n<p>All the configs are available here: <a href=\"https://quarkus.io/guides/telemetry-micrometer#configuration-reference\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/telemetry-micrometer#configuration-reference</a></p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 5621681,
      "reputation" : 451,
      "user_id" : 6935180,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/EPk2E.png?s=256",
      "display_name" : "Bruno Baptista",
      "link" : "https://stackoverflow.com/users/6935180/bruno-baptista"
    },
    "creation_date" : 1745321595,
    "last_activity_date" : 1745321595,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}