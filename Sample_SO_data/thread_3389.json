{
  "question" : {
    "question_id" : 79552351,
    "title" : "Create runnable jar with without repackaging dependencies",
    "body" : "<p>How to create a runnable jar (UberJar, FatJar) with Maven that</p>\n<ol>\n<li>contains alls dependencies as origin jar files</li>\n<li>can be executed by just calling 'java -jar myapp.jar' ?</li>\n</ol>\n<p><strong>TL;DR:</strong>\nI am currently working on an application that uses BouncyCastle and registers their SecurityProvider. When I use the maven-shade-plugin to create the UberJar, all jar files of all dependencies are exploded and their classes are repackaged. Unfortunately exactly this leads to a problem. While the application can be successfully executed with a JRE like Azul Zulu, execution fails with Oracle's JRE. Oracle only accepts SecurityProviders, which are contained in jar files with specific Signatures. Only jar files which are &quot;signed with certificates&quot; inside their own or Sun's PKI are accepted. (See: <a href=\"https://stackoverflow.com/questions/1756801/how-to-sign-a-custom-jce-security-provider\">How to sign a custom JCE security provider</a> answer by erickson).</p>\n<p><strong>What I could do, just out of the box:</strong></p>\n<ul>\n<li>Define the precondition to use only specific JREs   -&gt;   Bad &quot;UserExperience&quot;</li>\n<li>Create the UberJar differently, e.g. by storing all or some dependencies in a lib directory beside the executable jar and add this directory name as a classpathPrefix to the jar plugin   -&gt;   Additional complexity on final result</li>\n</ul>\n<p><strong>Preferred solution:</strong>\nI want to create one ingle jar file which will be provided to the user, so he is not in the need to take care of additional directory structures and contents. In this single jar file I want to keep all (or if possible: only some defined) dependencies as origin jar files. The contents of those jar files shall be added to the classpath, equally to what happens when I create the final jar with the maven-shade-plugin which unfortunately explodes the jar files. For a JRE like Oracle is then must be possible to verify the signatures on the jar files which contain the SecurityProvider.\n-&gt; Everybody (including Oracle) is happy.</p>\n<p><strong>So here the final question:</strong>\nHow to configure a Maven build setup to create a runnable jar, that keeps some or all dependencies as origin and unmodified jar files, so that their contents (classes, signatures, etc.) can be accessed during runtime.</p>\n",
    "tags" : [ "java", "maven", "dependencies", "runnable-jar" ],
    "owner" : {
      "account_id" : 5107114,
      "reputation" : 490,
      "user_id" : 4094874,
      "user_type" : "registered",
      "accept_rate" : 33,
      "profile_image" : "https://i.sstatic.net/GKt6S.jpg?s=256",
      "display_name" : "Guardian667",
      "link" : "https://stackoverflow.com/users/4094874/guardian667"
    },
    "is_answered" : false,
    "view_count" : 85,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743728706,
    "creation_date" : 1743668381,
    "link" : "https://stackoverflow.com/questions/79552351/create-runnable-jar-with-without-repackaging-dependencies",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140298027,
    "post_id" : 79552351,
    "body" : "OMGs, a chapter with the title &quot;Packaging Executable Archives&quot; :D:D:D Thank you very much",
    "score" : 0,
    "owner" : {
      "account_id" : 5107114,
      "reputation" : 490,
      "user_id" : 4094874,
      "user_type" : "registered",
      "accept_rate" : 33,
      "profile_image" : "https://i.sstatic.net/GKt6S.jpg?s=256",
      "display_name" : "Guardian667",
      "link" : "https://stackoverflow.com/users/4094874/guardian667"
    },
    "creation_date" : 1743750413,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140296167,
    "post_id" : 79552351,
    "body" : "Here is the doc for the spring boot maven plugin <a href=\"https://docs.spring.io/spring-boot/maven-plugin/packaging.html#packaging.repackage-goal\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/maven-plugin/&hellip;</a> and you can use <code>mainClass</code> to define the main class ...",
    "score" : 0,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1743702991,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140294119,
    "post_id" : 79552351,
    "body" : "@l88: Thanky ou for your example. Before I was able to recognise it, the hint from khmarbaise led to a working solution. Just adding the plugin did it out of the box.",
    "score" : 0,
    "owner" : {
      "account_id" : 5107114,
      "reputation" : 490,
      "user_id" : 4094874,
      "user_type" : "registered",
      "accept_rate" : 33,
      "profile_image" : "https://i.sstatic.net/GKt6S.jpg?s=256",
      "display_name" : "Guardian667",
      "link" : "https://stackoverflow.com/users/4094874/guardian667"
    },
    "creation_date" : 1743675410,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140294110,
    "post_id" : 79552351,
    "body" : "@khmarbaise: You answered 13 in ago and I already have a successful build. So today is the day, I was always successfully postponing, on which I start using Spring... THX a lot for that ;-) Just joking... It works like a charm. Only the magic, that the main class is automaticallly detected and i found no hint in any doc how this happens and how it can be configured, makes me a bit nervous. But I would still say, that smth like that should also be possible directly by java functionality.",
    "score" : 1,
    "owner" : {
      "account_id" : 5107114,
      "reputation" : 490,
      "user_id" : 4094874,
      "user_type" : "registered",
      "accept_rate" : 33,
      "profile_image" : "https://i.sstatic.net/GKt6S.jpg?s=256",
      "display_name" : "Guardian667",
      "link" : "https://stackoverflow.com/users/4094874/guardian667"
    },
    "creation_date" : 1743675161,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140294030,
    "post_id" : 79552351,
    "body" : "If you use maven-shade-plugin that is not possible, because the intention is to create a single executable jar which is supported by the JVM itself.. If you like to keep the jar&#39;s as it inside the JAR that means you have to write your own bootstrap code to startup the application and load the jar file.. (Spring Boot exactly does that!) maybe you can try to use the spring-boot-maven-plugin for that? You can build a jar which contains the jar*s via maven-assmbly-plugin but that will not solve the bootstrap part...",
    "score" : 2,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1743674088,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}