{
  "question" : {
    "question_id" : 79557037,
    "title" : "Java JTable RowFilter doesn&#39;t work properly?",
    "body" : "<p>I have a JTable (DefaultTableModel) containing various rows of data I'd like to filter. The program correctly figures out which rows to filter and adds the regex string (corresponding to the data of a specific column as no string matches all) to an ArrayList of RowFilters. This ArrayList is then set as a RowFilter.andFilter. But where there should be data to show, there is usually nothing or some kind of broken data. I tried various approaches the last 2 days and read countless things online, but I can't get the filter to work properly. Where is the mistake?</p>\n<p>In the function that should trigger the filter, it looks like this:</p>\n<pre><code>TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;&gt;(table.getModel());\nsorter.setRowFilter(null);\ntable.setRowSorter(sorter);\n\nList&lt;RowFilter&lt;Object, Object&gt;&gt; filterList = new ArrayList&lt;RowFilter&lt;Object, Object&gt;&gt;();\n\nboolean missing = false;\n\n//some logic to set missing to true/false depending on whether to filter or not\n\nif (missing)\n    filterList.add(RowFilter.regexFilter(dataString)); //dataString is the exact string in a specific column of the row to be filtered\n</code></pre>\n<p>And after the calculations are complete, the filter should be executed:</p>\n<pre><code>sorter.setRowFilter(RowFilter.andFilter(filterList, 5));\n</code></pre>\n<p>Now the table is just going blank. No data whatsoever.\nThe boolean missing is always correct (debugged it)...</p>\n<p>I tried to extend the regex string with ^ in the front and $ at the end or . ... . or putting it in brackets <code>&quot;(&quot; + dataString + &quot;)&quot;</code> but it's no use. I even tried it without the column index. The outcome is always the same while at least 6 rows should remain.</p>\n<p>Appreciate your help.</p>\n<hr />\n<p>This is a MCVE. The program is correctly calculating the values that shall not be shown in the table but the result is a blank table...</p>\n<pre><code>import java.awt.FlowLayout;\nimport java.util.ArrayList;\nimport java.util.List;\nimport javax.swing.JPanel;\nimport javax.swing.RowFilter;\nimport javax.swing.table.*;\n\npublic class mainTable extends javax.swing.JFrame {\n\nprivate TableRowSorter&lt;TableModel&gt; sorter;\n\npublic mainTable() {\n    initComponents();\n    \n    sorter = new TableRowSorter&lt;&gt;(table.getModel());\n    sorter.setRowFilter(null);\n    table.setRowSorter(sorter);\n    \n    setTable();\n    setCombo();\n}\n\nprivate void initComponents() {\n    jPanel = new JPanel();\n    table = new javax.swing.JTable();\n    comboBox = new javax.swing.JComboBox&lt;&gt;();\n    jButton1 = new javax.swing.JButton();\n    \n    setLayout(new FlowLayout());\n    setSize(400, 400);\n    \n    DefaultTableModel tableModel = new DefaultTableModel();\n    tableModel.addColumn(&quot;Stadt&quot;);\n    tableModel.addColumn(&quot;Landkreis&quot;);\n    table.setModel(tableModel);\n\n    jButton1.setText(&quot;Filter&quot;);\n    jButton1.addActionListener(this::jButton1ActionPerformed);\n    \n    jPanel.add(comboBox);\n    jPanel.add(jButton1);\n    jPanel.add(table);\n    getContentPane().add(jPanel);\n}                   \n\nprivate void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         \n    filter();\n}                                        \n\npublic static void main(String args[]) {\n    new mainTable().setVisible(true);\n}\n\nprivate void setTable() {\n    ArrayList&lt;String&gt; cities = new ArrayList&lt;&gt;();\n    ArrayList&lt;String&gt; landkreise = new ArrayList&lt;&gt;();\n    String[] rows = new String[2];\n    \n    DefaultTableModel tbm = (DefaultTableModel) table.getModel();\n    \n    cities.add(&quot;Husum&quot;);\n    cities.add(&quot;Westerland&quot;);\n    cities.add(&quot;Hannover&quot;);\n    cities.add(&quot;Uelzen&quot;);\n    cities.add(&quot;Rotenburg&quot;);\n    cities.add(&quot;Verden&quot;);\n    cities.add(&quot;Nienburg&quot;);\n    \n    landkreise.add(&quot;Nordfriesland&quot;);\n    landkreise.add(&quot;Nordfriesland&quot;);\n    landkreise.add(&quot;Region Hannover&quot;);\n    landkreise.add(&quot;Uelzen&quot;);\n    landkreise.add(&quot;Rotenburg&quot;);\n    landkreise.add(&quot;Verden&quot;);\n    landkreise.add(&quot;Nienburg&quot;);\n    \n    for (int i = 0; i &lt; cities.size(); i++) { \n        rows[0] = cities.get(i);\n        rows[1] = landkreise.get(i);\n        tbm.addRow(rows);\n    }\n}\n\nprivate void setCombo() {        \n    DefaultTableModel tbm = (DefaultTableModel) table.getModel();\n    \n    for (int i = 0; i &lt; tbm.getRowCount(); i++)\n        comboBox.addItem(tbm.getValueAt(i, 1).toString());\n}\n     \nprivate void filter() {      \n    sorter.setRowFilter(null);\n     \n    String filterText = comboBox.getSelectedItem().toString();\n    List&lt;RowFilter&lt;Object, Object&gt;&gt; filterLandkreis = new ArrayList&lt;RowFilter&lt;Object, Object&gt;&gt;();\n                 \n    for (int i = table.getRowCount(); i &gt; 0; i--) {   \n        \n        boolean filter = false;\n        filter = !table.getValueAt(i-1, 1).toString().equals(filterText); //the value of the combo shall not be shown in the table\n        \n        if (filter)\n            filterLandkreis.add(RowFilter.regexFilter(table.getValueAt(i-1, 1).toString()));\n    }            \n    sorter.setRowFilter(RowFilter.andFilter(filterLandkreis));\n}\n               \nprivate javax.swing.JComboBox&lt;String&gt; comboBox;\nprivate javax.swing.JButton jButton1;\nprivate JPanel jPanel;\nprivate javax.swing.JTable table;                 \n</code></pre>\n<p>}</p>\n",
    "tags" : [ "java", "regex", "swing", "jtable", "rowfilter" ],
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "is_answered" : true,
    "view_count" : 118,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1743928163,
    "creation_date" : 1743860444,
    "link" : "https://stackoverflow.com/questions/79557037/java-jtable-rowfilter-doesnt-work-properly",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79557594,
    "question_id" : 79557037,
    "body" : "<p>If I understand your requirements correctly, you want to create a RowFilter that excludes a particular value.  You donâ€™t need <code>RowFilter.andFilter</code> for that.  Just create a filter that shows all rows except rows containing that value:</p>\n<pre><code>private void filter() {\n    String filterText = comboBox.getSelectedItem().toString();\n    sorter.setRowFilter(RowFilter.notFilter(\n        RowFilter.regexFilter(Pattern.quote(filterText))));\n}\n</code></pre>\n<p>That code literally creates a filter that allows any row which does not match a regular expression consisting of the literal <code>filterText</code> value.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44936,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1743892746,
    "last_activity_date" : 1743892746,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79557966,
    "question_id" : 79557037,
    "body" : "<p>The thing is: I misunderstood the logic behind the <code>RowFilter.andFilter()</code>. I changed it to <code>RowFilter.orFilter()</code> and it works properly.</p>\n<p>If there are multiple <code>RowFilter</code> and you want them to filter independently, it's a logical OR, not an AND...</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "creation_date" : 1743928163,
    "last_activity_date" : 1743928163,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140304059,
    "post_id" : 79557037,
    "body" : "Sometimes you just don&#39;t see the forest for the trees... This is it! I totally misunderstood the logic behind the andFilter. Changed it to an orFilter and now it works! Thanks for pointing that out!",
    "score" : 0,
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "creation_date" : 1743920233,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140303259,
    "post_id" : 79557037,
    "body" : "<i>It seems like the RowFilter.andFilter() can&#39;t work with more than one filter in it.</i> - It isn&#39;t possible for a single value to match all the andFilters. You might use the andFilter when you want to check data from, lets say, two different columns so see if two pieces of data match. I tried to suggest using an orFilter to find all the rows that have a match and then use the notFilter to exclude those rows. But maybe I don&#39;t understand the requirement because you still haven&#39;t stated what you expect to see when a given item in the combo box is selected and the button is pressed.",
    "score" : 1,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1743882019,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140302910,
    "post_id" : 79557037,
    "body" : "I should probably explain WHY I can&#39;t use the filter string from the Combo directly. Almost every column has values that are not unique and have nothing to do with the combo itself. The UNIQUE String is the only column that is suitable for the job.",
    "score" : 0,
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "creation_date" : 1743872390,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140302896,
    "post_id" : 79557037,
    "body" : "Yeah, I see the confusion. I made the MCVE this way, as it represents the requirement in my program: the filter string from the ComboBox is NOT what I can use for the filter in the actual program (there is a database in the background with more data. The data shown in the table are just an overview with some basics and the filter should narrow this down). Every row has a UNIQUE String to differentiate the data. THIS string is used to filter the rows. So I collect all these strings and then use the RowFilter.andFilter()",
    "score" : 0,
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "creation_date" : 1743871901,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140302858,
    "post_id" : 79557037,
    "body" : "What rows to you expect to see? I probably don&#39;t understand the requirement, but I&#39;m not sure why you loop through the data to build an &quot;and&quot; filter. If you want to exclude rows that contain the &quot;filterText&quot; maybe you should be using the &quot;RowFilter.notFilter(...)&quot;",
    "score" : 1,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1743870745,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140302800,
    "post_id" : 79557037,
    "body" : "I already read the tutorial 2 days ago. It&#39;s the base for this section of my code. I added a MCVE to the question just now.",
    "score" : 0,
    "owner" : {
      "account_id" : 7315173,
      "reputation" : 63,
      "user_id" : 5573082,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d77442c224452b3525fcbbf59245d9b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Florian",
      "link" : "https://stackoverflow.com/users/5573082/florian"
    },
    "creation_date" : 1743869293,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140302587,
    "post_id" : 79557037,
    "body" : "Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting\" rel=\"nofollow noreferrer\">Sorting and Filtering</a> for a working example. If you need more help then post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1743863754,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}