{
  "question" : {
    "question_id" : 79571405,
    "title" : "JavaFX 21 Application to .EXE file with JDK 21",
    "body" : "<p>I am trying to create a EXE file for my JavaFx project.\nFirst goal for me was to create a working Fat Jar which will work and I haven't been able to do this.</p>\n<p>Project details.\nJavaFX: 21\nJDK: OpenLogic OpenJDK 21.0.6</p>\n<p>This is my POM File.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.plfirm&lt;/groupId&gt;\n    &lt;artifactId&gt;primafact-sorter&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;primafact-sorter&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;junit.version&gt;5.10.2&lt;/junit.version&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;javafx.version&gt;21.0.6&lt;/javafx.version&gt;\n        &lt;main.class&gt;com.plfirm.primafactsorter.PrimaFactSorterApplication&lt;/main.class&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;${javafx.version}&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;${javafx.version}&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;10.2.0.jre17&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.13.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;temp&gt;${project.build.directory}/jpackage-temp&lt;/temp&gt;\n                    &lt;destination&gt;${user.home}/Desktop/PrimaFactSorter&lt;/destination&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n                    &lt;moduleName&gt;com.plfirm.primafactsorter&lt;/moduleName&gt;\n                    &lt;ignoreSigningInformation&gt;true&lt;/ignoreSigningInformation&gt;\n                    &lt;jmodsPath&gt;C:\\JavaFX\\javafx-jmods-21.0.6&lt;/jmodsPath&gt;\n                    &lt;jlinkVerbose&gt;true&lt;/jlinkVerbose&gt;\n                    &lt;jlinkArgs&gt;\n                        &lt;arg&gt;--ignore-signing-information&lt;/arg&gt;\n                    &lt;/jlinkArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;!-- Package as a fat jar --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                    implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                            &lt;filters&gt;\n                                &lt;filter&gt;\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                        &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/filter&gt;\n                            &lt;/filters&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.panteleyev&lt;/groupId&gt;\n                &lt;artifactId&gt;jpackage-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.4.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;name&gt;PrimaFactSorter&lt;/name&gt;\n                    &lt;appVersion&gt;1.0.0&lt;/appVersion&gt;\n                    &lt;vendor&gt;PLFIRM&lt;/vendor&gt;\n                    &lt;copyright&gt;Copyright Â© 2023 PLFIRM&lt;/copyright&gt;\n                    &lt;icon&gt;src/main/resources/app-icon.ico&lt;/icon&gt;\n                    &lt;mainJar&gt;${project.build.finalName}.jar&lt;/mainJar&gt;\n                    &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n\n                    &lt;input&gt;${project.build.directory}&lt;/input&gt;\n                    &lt;destination&gt;${project.build.directory}/dist&lt;/destination&gt;\n\n                    &lt;javaOptions&gt;\n                        &lt;option&gt;-Dfile.encoding=UTF-8&lt;/option&gt;\n                    &lt;/javaOptions&gt;\n\n                    &lt;winOptions&gt;\n                        &lt;icon&gt;src/main/resources/app-icon.ico&lt;/icon&gt;\n                        &lt;winMenu&gt;true&lt;/winMenu&gt;\n                        &lt;winMenuGroup&gt;PLFIRM&lt;/winMenuGroup&gt;\n                        &lt;winShortcut&gt;true&lt;/winShortcut&gt;\n                        &lt;winPerUserInstall&gt;true&lt;/winPerUserInstall&gt;\n                    &lt;/winOptions&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;jpackage&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.akathist.maven.plugins.launch4j&lt;/groupId&gt;\n                &lt;artifactId&gt;launch4j-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5.3&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;l4j-clui&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;launch4j&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;headerType&gt;gui&lt;/headerType&gt;\n                            &lt;outfile&gt;${project.build.directory}/${project.build.finalName}.exe&lt;/outfile&gt;\n                            &lt;jar&gt;${project.build.directory}/${project.build.finalName}.jar&lt;/jar&gt;\n                            &lt;errTitle&gt;App Error&lt;/errTitle&gt;\n                            &lt;classPath&gt;\n                                &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;\n                            &lt;/classPath&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I have tried running mvn clean package, it does create a application but it doesn't run at all so my first step in making exe was to have a working JAR first.</p>\n<pre><code>mvn clean javafx:jlink\n</code></pre>\n<p>Gives Below error:</p>\n<pre><code>Error: Hash of javafx.base (33afd06e475611d342af7b5970be74daef334562cb61242b18fca6e8bddd604e) differs to expected hash (788294dc07e6eacec113d3336638d85973d1153414622a76cc08503c82f2e67c) recorded in java.base\njava.lang.module.FindException: Hash of javafx.base (33afd06e475611d342af7b5970be74daef334562cb61242b18fca6e8bddd604e) differs to expected hash (788294dc07e6eacec113d3336638d85973d1153414622a76cc08503c82f2e67c) recorded in java.base\n</code></pre>\n<p>I have been struggling with it for days.\nMy JAVA_HOME is set to same JDK mentioned above.\nThere are things in my POM that I dont really understand like plugins that I have tried using. I had added them for trying them out.</p>\n",
    "tags" : [ "java", "maven", "javafx", "maven-shade-plugin", "jlink" ],
    "owner" : {
      "account_id" : 19482860,
      "reputation" : 51,
      "user_id" : 14252779,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-Gbl22k2iek8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm8EHF6sWL6G8EIzgDARe81Og0W3w/s256-rj/photo.jpg",
      "display_name" : "Robin Singh",
      "link" : "https://stackoverflow.com/users/14252779/robin-singh"
    },
    "is_answered" : true,
    "view_count" : 212,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1744679030,
    "creation_date" : 1744538150,
    "link" : "https://stackoverflow.com/questions/79571405/javafx-21-application-to-exe-file-with-jdk-21",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79572115,
    "question_id" : 79571405,
    "body" : "<h3>Background</h3>\n<blockquote>\n<p>I am trying to create a EXE file for my JavaFx project.</p>\n</blockquote>\n<p>I'm not sure how you intend to do that, but I will provide some options in this answer.</p>\n<blockquote>\n<p>First goal for me was to create a working Fat Jar which will work and I haven't been able to do this.</p>\n</blockquote>\n<p>A fat jar which includes JavaFX components is not a supported configuration.  It can sometimes be made to work, but using a supported configuration where JavaFX components are used as Java modules rather than shaded elements of a fat jar is preferred.</p>\n<h3>Info on versions</h3>\n<blockquote>\n<p>Project details. JavaFX: 21 JDK: OpenLogic OpenJDK 21.0.6</p>\n</blockquote>\n<p>I assume by JavaFX: 21, you mean the <a href=\"https://gluonhq.com/products/javafx/\" rel=\"nofollow noreferrer\">JavaFX SDK downloaded from Gluon</a>.</p>\n<p>If so, you don't need it (probably best to delete it), because the OpenLogic OpenJDK distribution already includes JavaFX.</p>\n<pre><code>$ export JAVA_HOME=/Library/Java/JavaVirtualMachines/openlogic-openjdk-21.jdk/Contents/Home\n$ java --version\nopenjdk 21.0.6 2025-01-21\nOpenJDK Runtime Environment OpenLogic-OpenJDK (build 21.0.6+7-adhoc.admin.jdk21u)\nOpenJDK 64-Bit Server VM OpenLogic-OpenJDK (build 21.0.6+7-adhoc.admin.jdk21u, mixed mode, sharing)\n</code></pre>\n<pre><code>$ java --list-modules | grep javafx\njavafx.base@21.0.6\njavafx.controls@21.0.6\njavafx.fxml@21.0.6\njavafx.graphics@21.0.6\njavafx.media@21.0.6\njavafx.swing@21.0.6\njavafx.web@21.0.6 \n</code></pre>\n<pre><code>$ ls $JAVA_HOME/jmods | grep javafx \njavafx.base.jmod\njavafx.controls.jmod\njavafx.fxml.jmod\njavafx.graphics.jmod\njavafx.media.jmod\njavafx.swing.jmod\njavafx.web.jmod\n</code></pre>\n<blockquote>\n<p>Error: Hash of javafx.base</p>\n</blockquote>\n<p>A version of JavaFX in the OpenLogic distribution (either in its runtime image or in the openlogic jmods) is causing a clash with the JavaFX modules that are inclued with the JavaFX SDK distribution (either the ones in the JavaFX SDK lib directory or downloaded JavaFX mods).  Additionally, if you didn't comment out the JavaFX modules fetched from Maven as you have done currently in your <code>pom.xml</code>, they could also clash.</p>\n<h3>To fix your jlink error</h3>\n<p>There are a few options:</p>\n<ol>\n<li><p>You could use a JDK version which does not include JavaFX, and fetch JavaFX using a dependency in your <code>pom.xml</code>. jlink will then link and use the JavaFX version fetched from Maven.</p>\n</li>\n<li><p>You could use a JDK version which does not include JavaFX, and manually download the SDK and jmods. jlink will then link and use the JavaFX from the manually downloaded jmods (set the <code>jmodsPath</code> in your javafx maven plugin configuration correctly to achieve this).</p>\n</li>\n<li><p>You could continue using openlogic JDK which includes JavaFX, then remove a dependency on JavaFX from your pom.xml.  Ensure you have a module-info.java in your app.  I haven't tried the next step with such a configuration, but it should be possible with such a config to jlink your app using the openjfx-maven-plugin (set the <code>jmodsPath</code> to the jmods path in your openlogic download, which included JavaFX jmods), or via the jlink command line.  Packaging using jpackage should also be possible (with and without the intermediate step of creating a jlink image).</p>\n</li>\n</ol>\n<h3>Additional notes on jlink and modular apps</h3>\n<p>Jlink links modular jars or jmods, so all code in your application must be a JavaFX module (and not an automatic module).  If all of your transtive jar files for your dependencies are not java modules with defined module-info in each jar file, then you can't use jlink.</p>\n<p>Modular jars should not be shaded as shading multiple modules into a single jar file is not supported - each modular jar file (including any you create) can only have and must have one module-info.java.</p>\n<p>The entry point for the main class should be qualified by your module name (see the javafx-maven-plugin documentation).</p>\n<p>The javafx-maven-plugin is capable of creating a jlink zip of your application directly, you don't need additional assembly plugins or tools or runtime commands to do that.</p>\n<p>Ensure that the version of Java being used by the javafx-maven-plugin is the same as used everywhere else.  The easist way to do that is to ensure that you have only one JDK installed on your system and <code>JAVA_HOME</code> is configured appropriately to point to it.</p>\n<p>I didn't check of your <code>mssql-jdbc</code> dependency is actually modular (includes a <code>module-info.java</code>).  If not, I don't think you can use it with jlink (but I could be wrong as it is a pluggable SQL driver service and maybe that can be used in jlink, but I guess not though).  You may be able to work around that by shading your non-JavaFX software and placing it in your own module, then linking that with the JDK including JavaFX modules will work (I don't know, I didn't try that).</p>\n<h3>If your application is non-modular it can be packaged using jpackage</h3>\n<p>When executing your non-modular code from the command line or an IDE, before you link it, you will probably need to add the Java modules using the <code>--add-modules</code> switch for the <code>java</code> command, otherwise they won't be found.  For maven added modules used in thie Idea IDE that will occur automatically, but for other execute options, you might need to add that switch manually.</p>\n<p><code>jlink</code> can only link the modular code.  For the non-modular code, <code>jpackage</code> can use the <code>--input</code> switch.</p>\n<h3>EXE without installer</h3>\n<p>If you want an <a href=\"https://stackoverflow.com/questions/69811401/how-to-create-a-standalone-exe-in-java-that-runs-without-an-installer-and-a-jr/69824145#69824145\">exe without an installer, see the linked answer</a>.</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1180113,
      "reputation" : 160457,
      "user_id" : 1155209,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5192e7cbcf2f72a847d6fb0d1552f049?s=256&d=identicon&r=PG",
      "display_name" : "jewelsea",
      "link" : "https://stackoverflow.com/users/1155209/jewelsea"
    },
    "creation_date" : 1744582447,
    "last_activity_date" : 1744679030,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140333611,
    "post_id" : 79571405,
    "body" : "What &quot;kind&quot; of .exe do you want? If .exe that opens your project with JRE behind the scene then go with jpackage. Start with a minimal example in your IDE (and a proper build tool (maven)) and go from there when you know how to use jpackage. You could also look into GluonFX and a native image but that can easy be more complex than you wanted...",
    "score" : 0,
    "owner" : {
      "account_id" : 8022892,
      "reputation" : 184,
      "user_id" : 6050980,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/5ac27bb4f07c147810844d92bfe31bd7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "droid",
      "link" : "https://stackoverflow.com/users/6050980/droid"
    },
    "creation_date" : 1744646338,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}