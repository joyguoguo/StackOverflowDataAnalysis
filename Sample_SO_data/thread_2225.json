{
  "question" : {
    "question_id" : 79636751,
    "title" : "Mapping an array of strings in an Olingo entity",
    "body" : "<p>I am developing an OData application using SAP Olingo V4 version 2.3.1. Previously, I was using version 0.3.6, which supported this functionality.</p>\n<p>Currently, I'm facing an issue with mapping a comma-separated varchar column from the database to a <code>List&lt;String&gt;</code> or <code>String[]</code> in the EdmEntityType. From what I have found online, SAP Olingo only supports primitive types such as String, Integer, Long, and Double, and does not allow mapping to collection types like lists or arrays.</p>\n<p>My entity structure is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Entity {\n\n    @Column(name = &quot;\\&quot;CommaSeparatedStrings\\&quot;&quot;)\n    @Convert(converter = StringListConverter.class)\n    protected List&lt;String&gt; commaSeparatedStrings;\n\n}\n</code></pre>\n<p>Converter to convert String to List of Strings</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Converter\npublic class StringListConverter implements AttributeConverter&lt;List&lt;String&gt;, String&gt; {\n    @Override\n    public String convertToDatabaseColumn(final List&lt;String&gt; enums) {\n        if (enums == null) {\n            return null;\n        }\n\n        return String.join(&quot;,&quot;, enums);\n    }\n\n    @Override\n    public List&lt;String&gt; convertToEntityAttribute(final String dbData) {\n        return Stream.of(StringUtils.commaDelimitedListToStringArray(ofNullable(dbData).orElse(&quot;&quot;)))\n                .filter(StringUtils::hasLength)\n                .collect(Collectors.toList());\n    }\n\n}\n</code></pre>\n<p>When I query http://localhost:13080/odata/Entities, it returns HTTP error 500:</p>\n<blockquote>\n<p>&quot;message&quot;: &quot;class sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl cannot be cast to class java.lang.Class (sun.reflect.generics.reflectiveObjects.ParameterizedTypeImpl and java.lang.Class are in module java.base of loader 'bootstrap')&quot;</p>\n</blockquote>\n<p>But I expect it to return</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;CommaSeparatedStrings&quot;: [&quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;]\n}\n</code></pre>\n<p>How can I fix this? I have hundreds of such fields within all my entities. AI says that I should use EntityProcessor to update the field to collection in response for retrieve endpoints and JPAOdataMetadataPostProcessor for $metadata endpoint.</p>\n",
    "tags" : [ "java", "spring-boot", "spring-data-jpa", "odata", "olingo" ],
    "owner" : {
      "account_id" : 11371116,
      "reputation" : 13,
      "user_id" : 9033050,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cec455ae96939b92878549a39d85856d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "R R",
      "link" : "https://stackoverflow.com/users/9033050/r-r"
    },
    "is_answered" : false,
    "view_count" : 51,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748170215,
    "creation_date" : 1748088341,
    "link" : "https://stackoverflow.com/questions/79636751/mapping-an-array-of-strings-in-an-olingo-entity",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}