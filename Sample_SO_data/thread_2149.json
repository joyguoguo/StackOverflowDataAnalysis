{
  "question" : {
    "question_id" : 79642666,
    "title" : "How does Java handle the timezone database?",
    "body" : "<p>I know that <a href=\"https://www.iana.org/time-zones\" rel=\"nofollow noreferrer\">IANA keeps a timezone database</a> (<a href=\"https://en.m.wikipedia.org/wiki/Tz_database\" rel=\"nofollow noreferrer\"><em>tzdata</em></a>) that is used by several systems. But Java seems to have its own mechanics to handle timezones.</p>\n<p>How does it work?</p>\n",
    "tags" : [ "java", "timezone", "iana", "tzdata" ],
    "owner" : {
      "account_id" : 297829,
      "reputation" : 3587,
      "user_id" : 603541,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://www.gravatar.com/avatar/3aa4c0a4866c92f9a3d02b0d7cf3230b?s=256&d=identicon&r=PG",
      "display_name" : "Diego Queiroz",
      "link" : "https://stackoverflow.com/users/603541/diego-queiroz"
    },
    "is_answered" : true,
    "view_count" : 209,
    "closed_date" : 1749103608,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1748958945,
    "creation_date" : 1748450644,
    "link" : "https://stackoverflow.com/questions/79642666/how-does-java-handle-the-timezone-database",
    "closed_reason" : "Needs more focus"
  },
  "answers" : [ {
    "answer_id" : 79642667,
    "question_id" : 79642666,
    "body" : "<p>To translate timezones, <a href=\"https://en.m.wikipedia.org/wiki/Java_(software_platform)#Java_Runtime_Environment\" rel=\"nofollow noreferrer\">Java Runtime Environment (JRE) </a>internally checks for the <code>$JAVA_HOME/lib/tzdb.dat</code> file, that is the Java zone information file.  This file is a Java custom binary format and it is generated from the <a href=\"https://www.iana.org/time-zones\" rel=\"nofollow noreferrer\">IANA time zone database</a>.</p>\n<ul>\n<li>To generate the <code>tzdb.dat</code> format, the <a href=\"https://github.com/openjdk/jdk/blob/master/make/jdk/src/classes/build/tools/tzdb/TzdbZoneRulesCompiler.java\" rel=\"nofollow noreferrer\">TzdbZoneRulesCompiler</a> (part of JDK) should be used.</li>\n<li>Java Runtime Environment (JRE) ships with a version of IANA time zone database.\nWhen a new version of JRE is released, a copy of IANA database stored in <a href=\"https://github.com/openjdk/jdk/tree/master/src/java.base/share/data/tzdata\" rel=\"nofollow noreferrer\">/src/java.base/share/data/tzdata</a> is compiled as a <code>tzdb.dat</code> file and bundled within the JRE.</li>\n</ul>\n<p>You can also check <a href=\"https://www.oracle.com/java/technologies/tzdata-versions.html\" rel=\"nofollow noreferrer\">which version of IANA database is shipped with a specific Java Runtime</a> (provided by Oracle). For better compatibility, OpenJDK releases ship with the same version of IANA database that Oracle JDK does.</p>\n<h1>Keeping tzdata updated in Java</h1>\n<p>Historically, <strong>keeping JRE updated is not enough to keep IANA database updated</strong>. <a href=\"https://web.archive.org/web/20250528162943/https://www.oracle.com/java/technologies/tzdata-versions.html\" rel=\"nofollow noreferrer\">As of May 28, 2025, there is no release of JRE being shipped with <code>tzdata2025b</code></a> (current latest version, available since March 22, 2025). That is, when this answer is being written, timezones for the latest JRE available are more than two months outdated. This means that Java maintainers keeps outdated version of the timezone database and don't promote new versions of the JRE to keep it updated.</p>\n<p>The only option to keep Timezone info updated on Java is to manually generate <code>tzdb.dat</code> file from the <a href=\"https://data.iana.org/time-zones/tzdata-latest.tar.gz\" rel=\"nofollow noreferrer\">latest version of IANA database</a>.</p>\n<p>To achieve this you can, alternatively:</p>\n<ul>\n<li><p>Download <a href=\"https://data.iana.org/time-zones/tzdata-latest.tar.gz\" rel=\"nofollow noreferrer\">latest version of IANA database</a>, compile by your own using the <a href=\"https://github.com/openjdk/jdk/blob/master/make/jdk/src/classes/build/tools/tzdb/TzdbZoneRulesCompiler.java\" rel=\"nofollow noreferrer\">JDK TZDB Compiler</a> and replace your installations's <code>$JAVA_HOME/lib/tzdb.dat</code> file.</p>\n</li>\n<li><p>Download the latest version of IANA database <a href=\"https://github.com/jeremywall/java-tzdb-builder/raw/refs/heads/main/releases/latest/tzdb.dat\" rel=\"nofollow noreferrer\">already compiled as a tzdb.dat</a> (thanks to <a href=\"https://github.com/jeremywall/java-tzdb-builder\" rel=\"nofollow noreferrer\">jeremywall/java-tzdb-builder</a>) file and replace your installations's <code>$JAVA_HOME/lib/tzdb.dat</code> file.</p>\n</li>\n</ul>\n<p>There are also some tools that embed the JDK TZDB Compiler to allow the compilation of IANA tzdata without the need of the Full JDK. These are the most popular solutions for production systems:</p>\n<ul>\n<li><p><a href=\"https://www.azul.com/products/components/ziupdater-time-zone-tool/\" rel=\"nofollow noreferrer\">Azul Time Zone Tool (ZIUpdater)</a></p>\n</li>\n<li><p><a href=\"https://www.oracle.com/java/technologies/javase/timezones.html\" rel=\"nofollow noreferrer\">Oracle TZUpdater Tool</a> (Requires My Oracle Support Account)</p>\n</li>\n</ul>\n<h1>Hot update of tzdata in Java</h1>\n<p>The <code>tzdb.dat</code> file is loaded by Java during startup, so an <strong>application restart is required for changes to take effect</strong>.</p>\n<p>According to <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/zone/ZoneRulesProvider.html\" rel=\"nofollow noreferrer\">ZoneRulesProvider doc</a> (thanks to <a href=\"https://stackoverflow.com/users/85421/user85421\">user85421</a>):</p>\n<blockquote>\n<p>Many systems would like to update time-zone rules dynamically without stopping the JVM. When examined in detail, this is a complex problem. Providers may choose to handle dynamic updates, however the default provider does not.</p>\n</blockquote>\n<p>So hot updates (without restarting the JVM) of tzdata are not supported by <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/time/zone/TzdbZoneRulesProvider.java\" rel=\"nofollow noreferrer\">Java default provider</a>.</p>\n<p>It is theoretically possible to overcome this limitation writing an alternative class that extends <code>java.time.zone.ZoneRulesProvider</code> and implements a dynamic update for the table, however, searching on the internet it seems that no one has ever ventured into this task.</p>\n<p>If you really want to explore this possibility of dynamic updates:</p>\n<ol>\n<li><p>Write a class that extends <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/zone/ZoneRulesProvider.html\" rel=\"nofollow noreferrer\">ZoneRulesProvider</a> with all desired functionality. I recommend using the default provider implementation in <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/time/zone/TzdbZoneRulesProvider.java\" rel=\"nofollow noreferrer\">TzdbZoneRulesProvider class</a>.</p>\n</li>\n<li><p>Set the system property <code>java.time.zone.DefaultZoneRulesProvider</code> with the fully-qualified name of your new class.</p>\n</li>\n</ol>\n<p>Doing so, JVM will load your provider instead of the default one to load timezone info. Check <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/zone/ZoneRulesProvider.html\" rel=\"nofollow noreferrer\">ZoneRulesProvider doc</a> for additional information.</p>\n",
    "score" : 9,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 297829,
      "reputation" : 3587,
      "user_id" : 603541,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://www.gravatar.com/avatar/3aa4c0a4866c92f9a3d02b0d7cf3230b?s=256&d=identicon&r=PG",
      "display_name" : "Diego Queiroz",
      "link" : "https://stackoverflow.com/users/603541/diego-queiroz"
    },
    "creation_date" : 1748450644,
    "last_activity_date" : 1748958945,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79642667" : [ {
      "comment_id" : 140470439,
      "post_id" : 79642667,
      "body" : "@user85421 Thank you so much for your comment. I&#39;ll improve the answer with your finding and some new info I&#39;ve found from it.",
      "score" : 0,
      "owner" : {
        "account_id" : 297829,
        "reputation" : 3587,
        "user_id" : 603541,
        "user_type" : "registered",
        "accept_rate" : 60,
        "profile_image" : "https://www.gravatar.com/avatar/3aa4c0a4866c92f9a3d02b0d7cf3230b?s=256&d=identicon&r=PG",
        "display_name" : "Diego Queiroz",
        "link" : "https://stackoverflow.com/users/603541/diego-queiroz"
      },
      "creation_date" : 1748546547,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140467019,
      "post_id" : 79642667,
      "body" : "by the way, from the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/zone/ZoneRulesProvider.html\" rel=\"nofollow noreferrer\">javadoc</a> of <code>ZoneRulesProvider</code>: &quot;<i>Many systems would like to update time-zone rules dynamically without stopping the JVM. When examined in detail, this is a complex problem. Providers may choose to handle dynamic updates, however the default provider does not.</i>&quot;",
      "score" : 2,
      "owner" : {
        "account_id" : 31180,
        "reputation" : 29752,
        "user_id" : 85421,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
        "display_name" : "user85421",
        "link" : "https://stackoverflow.com/users/85421/user85421"
      },
      "creation_date" : 1748453664,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}