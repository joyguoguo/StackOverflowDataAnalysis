{
  "question" : {
    "question_id" : 79608893,
    "title" : "Layout a tree in Gephi similar to Graphviz",
    "body" : "<p>With Gephi how do you layout a tree so it will look like an image below?</p>\n<p>Tree had 100K elements in 4 colored branches and Graphviz made them distinct in 46s, but with Gephi I'm getting a hairball no matter what.</p>\n<p><code>java SimpleColorTree.java 4 100000 | dot -v -Ksfdp -Nshape=point '-Earrowsize=0.1' -Tpng -O</code></p>\n<p><a href=\"https://i.sstatic.net/0zqt2cCYm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/0zqt2cCYm.jpg\" alt=\"Graphviz sfdp\" /></a></p>\n<p>Console output (Graphviz <code>-v</code> option):</p>\n<pre><code>dot - graphviz version 9.0.0 (20230911.1827)\nlibdir = &quot;C:\\Users\\user\\AppData\\Local\\Programs\\Graphviz\\bin&quot;\nActivated plugin library: gvplugin_neato_layout.dll\nUsing layout: sfdp:neato_layout\nUsing render: cairo:cairo\nUsing device: png:cairo:cairo\nThe plugin configuration file:\n        C:\\Users\\user\\AppData\\Local\\Programs\\Graphviz\\bin\\config6\n                was successfully loaded.\n    render      :  cairo dot dot_json fig gd gdiplus json json0 map mp pic pov ps svg tk vrml xdot xdot_json\n    layout      :  circo dot fdp neato nop nop1 nop2 osage patchwork sfdp twopi\n    textlayout  :  textlayout\n    device      :  bmp canon cmap cmapx cmapx_np dot dot_json emf emfplus eps fig gd gd2 gif gv imap imap_np ismap jpe jpeg jpg json json0 metafile mp pdf pic plain plain-ext png pov ps ps2 svg svgz tif tiff tk vrml wbmp xdot xdot1.2 xdot1.4 xdot_json\n    loadimage   :  (lib) bmp eps gd gd2 gif jpe jpeg jpg png ps svg\nfontname: &quot;Times-Roman&quot; resolved to: (ps:pango  Times New Roman, ) (PangoCairoWin32Font) &quot;Times New Roman, 13.9990234375&quot;\noverlap: none value 1953699328 scaling 0.0000\nspring_electrical_control:\n  repulsive and attractive exponents: -1.000 1.000\n  random start 1 seed 123\n  K : -1.000 C : 0.200\n  max levels 2147483647\n  quadtree size 45 max_level 10\n  Barnes-Hutt constant 0.600 tolerance  0.001 maxiter 500\n  cooling 0.900 step size  0.100 adaptive 1\n  beautify_leaves 0 node weights 0 rotation 0.000\n  smoothing NONE overlap -1 initial_scaling -4.000 do_shrinking 1\n  octree scheme NORMAL\n  edge_labeling_scheme 0\nctrl-&gt;overlap=-1\nError: remove_overlap: Graphviz not built with triangulation library\nEdge separation: add=1 (3.200000,3.200000)\nCreating edges using line segments\nUsing render: cairo:cairo\nUsing device: png:cairo:cairo\ndot: allocating a 11474K cairo image surface (1760 x 1669 pixels)\ngvRenderJobs G: 3.47 secs.\n</code></pre>\n<p>This is what Gephi can do in 60s:</p>\n<p><a href=\"https://i.sstatic.net/jtOPkgBF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/jtOPkgBF.png\" alt=\"Gephi ForceAtlas2\" /></a></p>\n<p>This is Java class to generate a tree of <em>x</em> nodes with each node having <em>y</em> children:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Usage: java SimpleColorTree &lt;childrenCount&gt; &lt;totalNodes&gt; | dot -Tpng -o tree.png\n\npublic class SimpleColorTree  {\n    public static void main(String[] args) {\n        int children = Integer.parseInt(args[0]);\n        int totalNodes = Integer.parseInt(args[1]);\n        String[] colors = {&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;purple&quot;, &quot;orange&quot;};\n        \n        System.out.println(&quot;digraph G {&quot;);\n        System.out.println(&quot;  0 [color=black];&quot;); // Root is black\n        \n        for (int node = 1; node &lt; totalNodes; node++) {\n            int parent = (node - 1) / children;\n            int branchRoot = findBranchRoot(node, children);\n            String color = colors[branchRoot % colors.length];\n            \n            System.out.printf(&quot;  %d -&gt; %d [color=%s];\\n&quot;, parent, node, color);\n            System.out.printf(&quot;  %d [color=%s];\\n&quot;, node, color);\n        }\n        \n        System.out.println(&quot;}&quot;);\n    }\n    \n    // Finds the first-level child that is the root of this node's branch\n    private static int findBranchRoot(int node, int children) {\n        while (node &gt; 1) {\n            int parent = (node - 1) / children;\n            if (parent == 0) return node; // Found first-level child\n            node = parent;\n        }\n        return 1; // Default if something goes wrong\n    }\n}\n</code></pre>\n<p>This is a tiny tree with same structure:</p>\n<p><code>java SimpleColorTree.java 4 100 | dot -v -Ksfdp -Nshape=point '-Earrowsize=0.1' -Tpng -O</code></p>\n<p><a href=\"https://i.sstatic.net/65LUFMZBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/65LUFMZBm.png\" alt=\"Tiny tree\" /></a></p>\n<p>For some reason Gephi can't spread these branches when graph is big.</p>\n",
    "tags" : [ "java", "graphviz", "gephi" ],
    "owner" : {
      "account_id" : 26739540,
      "reputation" : 590,
      "user_id" : 20340543,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/391fa27c030df060dd7293769457b56c?s=256&d=identicon&r=PG",
      "display_name" : "Podbrushkin",
      "link" : "https://stackoverflow.com/users/20340543/podbrushkin"
    },
    "is_answered" : false,
    "view_count" : 67,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746540706,
    "creation_date" : 1746540706,
    "link" : "https://stackoverflow.com/questions/79608893/layout-a-tree-in-gephi-similar-to-graphviz",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}