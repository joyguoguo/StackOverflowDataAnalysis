{
  "question" : {
    "question_id" : 79842955,
    "title" : "Spring Boot: Default value in application.properties not used when environment variable is missing in Docker",
    "body" : "<p>I have the following entries in my application.properties:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>host=${HOST:http://host.com}\norganization.id=${ORGANIZATION_ID:123}\ncontenttype.id=${CONTENTTYPE_ID:110}\n</code></pre>\n<p>And I inject them like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Getter\n@Setter\npublic class ConfigProperties {\n\n    @Value(&quot;${host}&quot;)\n    private String host;\n\n    @Value(&quot;${organization.id}&quot;)\n    private String organizationId;\n\n    @Value(&quot;${contenttype.id}&quot;)\n    private String contentTypeId;\n}\n</code></pre>\n<p>My intention is:</p>\n<ul>\n<li>If an environment variable (e.g., <code>ORGANIZATION_ID</code>) is provided, use it</li>\n<li>If not provided, use the default value defined after the colon</li>\n</ul>\n<p>When I run the application in Docker without setting <code>ORGANIZATION_ID</code> in the <code>.env</code> file, the application fails to start with this error:</p>\n<blockquote>\n<p>Caused by: org.springframework.util.PlaceholderResolutionException: Could not resolve placeholder 'organization.id' in value &quot;${organization.id}&quot;</p>\n</blockquote>\n<p>This makes it look like the default value from <code>application.properties</code> is being ignored.</p>\n<p>Why is Spring Boot not using the default value from <code>application.properties</code> when the environment variable is missing inside Docker, and how can I make Spring use the default when the env var is not defined?</p>\n<p>I want Spring to:</p>\n<ul>\n<li>use the value from the environment <strong>if it exists</strong></li>\n<li>otherwise, use the default from <code>application.properties</code></li>\n</ul>\n<p>But not fail when the env variable is simply not provided.</p>\n",
    "tags" : [ "java", "spring-boot", "docker", "application.properties", ".env" ],
    "owner" : {
      "account_id" : 23491561,
      "reputation" : 82,
      "user_id" : 17542511,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GggjWSTsdPyTrHZnz-0zJUYvuiBSXC-cc2di17sEw=k-s256",
      "display_name" : "Sachin Deoli",
      "link" : "https://stackoverflow.com/users/17542511/sachin-deoli"
    },
    "is_answered" : false,
    "view_count" : 70,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1765392240,
    "creation_date" : 1765370282,
    "link" : "https://stackoverflow.com/questions/79842955/spring-boot-default-value-in-application-properties-not-used-when-environment-v",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79843056,
    "question_id" : 79842955,
    "body" : "<p>You should try injecting the default value elsewhere (than in application.properties), like this:</p>\n<p><strong>application.properties</strong></p>\n<pre class=\"lang-ini prettyprint-override\"><code>host=${HOST}\nhost.default=http://host.com\norganization.id=${ORGANIZATION_ID}\norganization.id.default=123\ncontenttype.id=${CONTENTTYPE_ID}\ncontenttype.id.default=110\n</code></pre>\n<p>Then inject the default here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@Getter\n@Setter\npublic class ConfigProperties {\n\n    @Value(&quot;${host:${host.default}}&quot;)\n    private String host;\n\n    @Value(&quot;${organization.id:${organization.id.default}}&quot;)\n    private String organizationId;\n\n    @Value(&quot;${contenttype.id:${contenttype.id.default}}&quot;)\n    private String contentTypeId;\n}\n</code></pre>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1681237,
      "reputation" : 1887,
      "user_id" : 1545425,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/GmowT.jpg?s=256",
      "display_name" : "Luca Tampellini",
      "link" : "https://stackoverflow.com/users/1545425/luca-tampellini"
    },
    "creation_date" : 1765376626,
    "last_activity_date" : 1765392240,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140896807,
    "post_id" : 79842955,
    "body" : "Ditch the <code>${HOST:http:&#47;&#47;host.com}</code> from your properties file. The <code>HOST</code> environment variable already overrides the <code>host</code> variable from the <code>application.properties</code>. Just write <code>host=http:&#47;&#47;host.com</code> if provided through the environment it will be overridden automatically. There is no need to make it more complicated then that. Ofcourse that goes for the other properties as well.",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126818,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1765391191,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140896661,
    "post_id" : 79842955,
    "body" : "there must be something wrong with your setup I&#39;ve just tested a small SB 3.x here and it works just fine. Initially I thought it was because you are using the values in a <code>@Configuration</code> class but that works fine (though not sure how are you planning on getting those later as it is not a bean). But even then it injects the properties fine with the default (I have to qualify a string bean with the property so I could get in the controller class).",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1765385731,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140896611,
    "post_id" : 79842955,
    "body" : "Which version of Spring boot are you using?",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1765383967,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140896158,
    "post_id" : 79842955,
    "body" : "Does this setup work without Docker?  You don&#39;t need to manually set the fallback properties yourself: <a href=\"https://docs.spring.io/spring-boot/reference/features/external-config.html#features.external-config.typesafe-configuration-properties.relaxed-binding\" rel=\"nofollow noreferrer\">Spring Boot automatically sets properties from environment variables</a> without you doing anything special.  (I&#39;ve had good results using <code>@ConfigurationProperties</code> classes instead of manual <code>@Value</code> bindings, especially for testing.)",
    "score" : 0,
    "owner" : {
      "account_id" : 13863020,
      "reputation" : 164911,
      "user_id" : 10008173,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "David Maze",
      "link" : "https://stackoverflow.com/users/10008173/david-maze"
    },
    "creation_date" : 1765371009,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79843056" : [ {
      "comment_id" : 140897039,
      "post_id" : 79843056,
      "body" : "Where did I say you didn&#39;t. The question was about when using ENV variables it should use it, if not they should use default values. Your proposed solution doesn&#39;t work with missing ENV variables it will disable startup of the application with an error.",
      "score" : 0,
      "owner" : {
        "account_id" : 3192259,
        "reputation" : 126818,
        "user_id" : 2696260,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
        "display_name" : "M. Deinum",
        "link" : "https://stackoverflow.com/users/2696260/m-deinum"
      },
      "creation_date" : 1765400327,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140896923,
      "post_id" : 79843056,
      "body" : "@M.Deinum Where did I ever say NOT to use the environment variables?!?",
      "score" : 0,
      "owner" : {
        "account_id" : 1681237,
        "reputation" : 1887,
        "user_id" : 1545425,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/GmowT.jpg?s=256",
        "display_name" : "Luca Tampellini",
        "link" : "https://stackoverflow.com/users/1545425/luca-tampellini"
      },
      "creation_date" : 1765395628,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140896809,
      "post_id" : 79843056,
      "body" : "This wouldn&#39;t even work without specifying the environment variables. As it would break at startup when loading the <code>application.properties</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 3192259,
        "reputation" : 126818,
        "user_id" : 2696260,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
        "display_name" : "M. Deinum",
        "link" : "https://stackoverflow.com/users/2696260/m-deinum"
      },
      "creation_date" : 1765391292,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}