{
  "question" : {
    "question_id" : 79560116,
    "title" : "Bean not found in multi-module Java Spring Boot app",
    "body" : "<p>I have the following java spring boot app setup with multiple modules. The Main method in moduleB is is the entry point but essentially, another class - KafkaListener.java, is registered as a Kafka Listener, and should call the ModuleAEventHandler. In the future there may be many more modules added, for Kafka Listener to reference. Currently, when running the app I get <code>No bean named 'moduleAEventHandler' available</code>. Here is my structure and some snippets:</p>\n<pre><code>modules/\n  - moduleA/\n    - ModuleAEventHandler.java\n    - pom.xml\n  - moduleB/\n    - Main.java\n    - KafkaListener.java\n    - pom.xml\n</code></pre>\n<p>moduleA/ModuleAEventHandler.java:</p>\n<pre><code>@Component\n@AllArgsConstructor\npublic class ModuleAEventHandler implements EventHandler {\n    private static final Logger logger = LoggerFactory.getLogger(ModuleAEventHandler.class);\n\n    @Override\n    public Result&lt;Object&gt; handleEvent(Object event, String eventType) {\n        logger.info(&quot;Processing create event: {}&quot;, event);\n        return Result.ok(event);\n    }\n}\n\n</code></pre>\n<p>moduleB/Main.java</p>\n<pre><code>@SpringBootApplication\npublic class Main {\n    public static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n}\n</code></pre>\n<p>moduleB/KafkaListener.java (limiting to the annotations as the logic just fails on the line where we try to access <code>applicationcontext.getBean()</code> on the moduleAEventHandler).</p>\n<pre><code>@Configuration\n@EnableConfigurationProperties\n@ConfigurationProperties(&quot;consumer&quot;)\n@Data\npublic class KafkaMessageListener {\n   ...\n</code></pre>\n<p>moduleB/pom.xml:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.company.app&lt;/groupId&gt;\n            &lt;artifactId&gt;moduleA&lt;/artifactId&gt;\n            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Note: I have also added the following method to debug but it shows none of the beans from moduleA:</p>\n<pre><code>    @PostConstruct\n    public void debugBeans() {\n        String[] beanNames = applicationContext.getBeanDefinitionNames();\n        Arrays.sort(beanNames);\n        for (String beanName : beanNames) {\n            System.out.println(&quot;&gt;&gt;&gt;&gt; &quot; + beanName);\n        }\n    }\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "maven" ],
    "owner" : {
      "account_id" : 6121142,
      "reputation" : 1991,
      "user_id" : 7338454,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/ac353bded78a24890c8e3b630550c8b9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "johnny_mac",
      "link" : "https://stackoverflow.com/users/7338454/johnny-mac"
    },
    "is_answered" : false,
    "view_count" : 61,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744088157,
    "creation_date" : 1744035241,
    "link" : "https://stackoverflow.com/questions/79560116/bean-not-found-in-multi-module-java-spring-boot-app",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140316995,
    "post_id" : 79560116,
    "body" : "I was looking at regex filters like this <a href=\"https://docs.spring.io/spring-framework/reference/core/beans/classpath-scanning.html#beans-scanning-filters\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/reference/core/beans/&hellip;</a>. Either way, the first comment unblocks me, and I think this is getting into another question. Thanks for the help",
    "score" : 0,
    "owner" : {
      "account_id" : 6121142,
      "reputation" : 1991,
      "user_id" : 7338454,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/ac353bded78a24890c8e3b630550c8b9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "johnny_mac",
      "link" : "https://stackoverflow.com/users/7338454/johnny-mac"
    },
    "creation_date" : 1744214638,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140313548,
    "post_id" : 79560116,
    "body" : "Usually the Spring Boot application (<code>@SpringBootApplication</code>) is contained in the root package (base package) any other class/beans/services) should be in sub packages... that can mean within technically separated modules (multi project build with Maven) etc... If not you have to manually define the scanBasePackages etc.. scan for entities or properties (configurations etc.)",
    "score" : 0,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98425,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1744144865,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140312556,
    "post_id" : 79560116,
    "body" : "To keep it scalable, just make sure all your modules use packages under a common root (e.g., com.company.app). Then set scanBasePackages = &quot;com.company.app&quot; and Spring will pick up everything under it automatically.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744127255,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140312374,
    "post_id" : 79560116,
    "body" : "@Vijay this may be another topic, but by explicitly stating the packages to be scanned, that can get out of hand if you have multiple packages no? Is there a scalable approach. Apologies, Im new to Spring and the wiring up but if all paxkages are within the same project, why the need to explicitly call out?",
    "score" : 0,
    "owner" : {
      "account_id" : 6121142,
      "reputation" : 1991,
      "user_id" : 7338454,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/ac353bded78a24890c8e3b630550c8b9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "johnny_mac",
      "link" : "https://stackoverflow.com/users/7338454/johnny-mac"
    },
    "creation_date" : 1744124935,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140309880,
    "post_id" : 79560116,
    "body" : "Spring Boot does not support component scanning of classes in the default package. You must move your classes into named packages. Then in your Main.java:  @SpringBootApplication(scanBasePackages = {&quot;com.package.of.moduleA&quot;, &quot;com.package.of.moduleB&quot;})",
    "score" : 2,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744073409,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140308290,
    "post_id" : 79560116,
    "body" : "What are the packages of Main and ModuleAEventHandler - the @ SpringBootApplication only scans for components in sub-packages.",
    "score" : 0,
    "owner" : {
      "account_id" : 358039,
      "reputation" : 6396,
      "user_id" : 3248158,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dc57623510db9e48b093fb4c19f5c749?s=256&d=identicon&r=PG",
      "display_name" : "derkoe",
      "link" : "https://stackoverflow.com/users/3248158/derkoe"
    },
    "creation_date" : 1744037290,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}