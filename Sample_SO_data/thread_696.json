{
  "question" : {
    "question_id" : 79781353,
    "title" : "How can I best fix this JComboBox bug on macOS that wasn&#39;t fixed until Java 20?",
    "body" : "<p>Rendering a <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JComboBox.html\" rel=\"nofollow noreferrer\">JComboBox</a> after calling <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JComboBox.html#setEditable-boolean-\" rel=\"nofollow noreferrer\">setEditable(true)</a> on macOS looks bad. I really like 99.9% of AquaLookAndFeel so I won't be switching to <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/plaf/metal/MetalLookAndFeel.html\" rel=\"nofollow noreferrer\">MetalLookAndFeel</a>. Making the app require Java 20 is not going to happen either. I prefer to work around the problem. I would love it if I can make it look like it does when using Java 20 or newer.</p>\n<p>On macOS, the <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextField.html\" rel=\"nofollow noreferrer\">JTextField</a> that is displayed is not vertically aligned well with the <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JButton.html\" rel=\"nofollow noreferrer\">JButton</a> that you click to display the model. I've been struggling with an llm and am hoping someone might remember what I should do. My fiddling with borders and painting have so far been less than helpful. I'd checkout the Java 20 openjdk and implement the fix in my code but that doesn't sound easy.</p>\n<p>The <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCV</a> example below, alignment-wise, renders well as pictured on Windows (2nd picture MetalLookAndFeel) and Linux (3rd picture MetalLookAndFeel) but not macOS (1st picture AquaLookAndFeel). It appears as though the height of the <code>JTextField</code> (plus borders) is just a bit less than the <code>JButton</code> and it appears as though the border for the <code>JTextField</code> is slightly narrower than the border for the <code>JButton</code>. Of course, it's also hanging below the <code>JButton</code>.</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class ComboBoxMVCExample {\n    public static void main (String[] args) throws Exception {\n       SwingUtilities.invokeLater(ComboBoxMVCExample::createAndShowGUI);\n    }\n    private static void createAndShowGUI () {\n       LookAndFeel laf = UIManager.getLookAndFeel();\n       System.out.println(&quot;Look and Feel name: &quot; + laf.getClass().getName());\n       JFrame frame = new JFrame();\n       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n       String[] items = {&quot;Apple&quot;, &quot;Banana&quot;};\n       JComboBox&lt;String&gt; editableCombo = new JComboBox&lt;&gt;(items);\n       editableCombo.setEditable(true);\n       JComboBox&lt;String&gt; nonEditableCombo = new JComboBox&lt;&gt;(items);\n       nonEditableCombo.setEditable(false);\n       JPanel panel = new JPanel();\n       panel.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n       panel.setLayout(new FlowLayout(FlowLayout.LEFT, 1, 4));\n       panel.add(new JLabel(&quot;Editable&quot;));\n       panel.add(editableCombo);\n       panel.add(new JLabel(&quot;Not Editable&quot;));\n       panel.add(nonEditableCombo);\n       frame.add(panel);\n       frame.pack();\n       frame.setLocationRelativeTo(null);\n       frame.setVisible(true);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.sstatic.net/TMWcldqJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/TMWcldqJ.png\" alt=\"macOS image\" /></a>\n<a href=\"https://i.sstatic.net/BE8A8Yzu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/BE8A8Yzu.png\" alt=\"Windows image\" /></a>\n<a href=\"https://i.sstatic.net/pgWhQufg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pgWhQufg.jpg\" alt=\"Linux image\" /></a></p>\n",
    "tags" : [ "java", "macos", "swing", "java-17" ],
    "owner" : {
      "account_id" : 1888690,
      "reputation" : 3262,
      "user_id" : 1707353,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/69b421abd61db32e6c4846065b8b790a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jeff Holt",
      "link" : "https://stackoverflow.com/users/1707353/jeff-holt"
    },
    "is_answered" : false,
    "view_count" : 100,
    "answer_count" : 0,
    "score" : 3,
    "last_activity_date" : 1759480295,
    "creation_date" : 1759446899,
    "link" : "https://stackoverflow.com/questions/79781353/how-can-i-best-fix-this-jcombobox-bug-on-macos-that-wasnt-fixed-until-java-20",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140775882,
    "post_id" : 79781353,
    "body" : "Interesting. I would not suggest to use a non-LTS JDK for my projects, even if it is the latest.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1759513503,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140775864,
    "post_id" : 79781353,
    "body" : "@aled It&#39;s actually not as bad as I thought it was. The app&#39;s launcher can be told to use a particular Java. But left to its own, it will use the greatest release available. So, the appearance actually changes depending on which Java you&#39;re using. So far, I&#39;ve found multiple appearances starting with 17 through 24. I guess it&#39;s ok that the appearance is a choice for the user. I know which one <i>I</i> like but I&#39;d rather not be in the middle of a 3-way fight over which one looks better.",
    "score" : 0,
    "owner" : {
      "account_id" : 1888690,
      "reputation" : 3262,
      "user_id" : 1707353,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/69b421abd61db32e6c4846065b8b790a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jeff Holt",
      "link" : "https://stackoverflow.com/users/1707353/jeff-holt"
    },
    "creation_date" : 1759513008,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140775846,
    "post_id" : 79781353,
    "body" : "@user207421 I did and it&#39;s a mess. I&#39;d end up implementing a lot of code.",
    "score" : 0,
    "owner" : {
      "account_id" : 1888690,
      "reputation" : 3262,
      "user_id" : 1707353,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/69b421abd61db32e6c4846065b8b790a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jeff Holt",
      "link" : "https://stackoverflow.com/users/1707353/jeff-holt"
    },
    "creation_date" : 1759512615,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140775009,
    "post_id" : 79781353,
    "body" : "What is the restriction to upgrade the JDK?",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1759485934,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140775000,
    "post_id" : 79781353,
    "body" : "But ... IMO ... the best way to handle this is to make JDK 21 a prerequisite and/or use <code>jlink</code> or <code>jpackage</code> to produce the distributable version of your app.",
    "score" : 4,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723428,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1759485508,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140774982,
    "post_id" : 79781353,
    "body" : "It looks like this is the relevant OpenJDK issue: <a href=\"https://bugs.openjdk.org/browse/JDK-8054572\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8054572</a>.  If you look at the comments, you should be able to find the relevant pull request and commit information ... and hence track down the source code changes that they made to fix the problem.",
    "score" : 3,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723428,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1759485004,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140774481,
    "post_id" : 79781353,
    "body" : "&quot;I&#39;d checkout the Java 20 openjdk and implement the fix in my code but that doesn&#39;t sound easy&quot;: how can you know until you try? What makes you think there is another, simpler, fix?",
    "score" : 2,
    "owner" : {
      "account_id" : 71739,
      "reputation" : 311869,
      "user_id" : 207421,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=256&d=identicon&r=PG",
      "display_name" : "user207421",
      "link" : "https://stackoverflow.com/users/207421/user207421"
    },
    "creation_date" : 1759457581,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}