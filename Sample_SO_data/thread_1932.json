{
  "question" : {
    "question_id" : 79662954,
    "title" : "Jaeger Tracing with Kafka in Spring Boot - Kafka spans not visible in Jaeger UI",
    "body" : "<p>I'm working on integrating Jaeger tracing (v2) into my Spring Boot microservices which use Kafka for messaging. The tracing integration is partially working — I can see the API calls and database spans correctly in the Jaeger UI. However, Kafka-related spans (producer/consumer traces) are not showing up at all.</p>\n<p>Constraints:</p>\n<p>I do not want to use opentracing or any dependency related to it.</p>\n<p>I want to stick with OpenTelemetry and Jaeger 2.</p>\n<p>I'm avoiding manual instrumentation with Tracer or Span objects.</p>\n<p>What I’ve tried so far:</p>\n<p>Used @NewSpan annotation from io.micrometer.opentracing — didn’t work (possibly because of version conflicts or incompatible dependencies).</p>\n<p>Added opentelemetry-exporter-jaeger dependency — no effect on Kafka spans.</p>\n<p>Tried running with javaagent by adding it in VM options (IntelliJ) — still no Kafka spans.</p>\n<p>Added kafka-clients dependency (2.6) — but after syncing POM, my entire project structure breaks (IntelliJ starts showing files out of source root — no idea why this is happening).</p>\n<p>Configuration:</p>\n<p>application.yml</p>\n<p>yaml</p>\n<pre><code>    otel:\n      metrics:\n        exporter: none\n      logs:\n        exporter: none\n      traces:\n        exporter: otlp\n      instrumentation:\n        common:\n          experimental:\n            suppress-messaging-receive-spans: no\n        kafka:\n          enabled: true\n          client-propagation:\n            enabled: true\n          experimental-span-attributes: true\n        messaging:\n          experimental-span-attributes: true\n        logback-appender:\n          enabled: true\n        executor:\n          enabled: true\n        spring-scheduling:\n          enabled: true\n        jdbc:\n          enabled: true\n      exporter:\n        otlp:\n          protocol: grpc\n          endpoint: http://localhost:4317\n      resource:\n        attributes:\n          service.name: acq-txn-processor\n          service: acq-txn-processor\n</code></pre>\n<p>POM dependencies:</p>\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.opentelemetry.instrumentation&lt;/groupId&gt;\n            &lt;artifactId&gt;opentelemetry-instrumentation-bom&lt;/artifactId&gt;\n            &lt;version&gt;2.6.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry.instrumentation&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-spring-boot-starter&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Has anyone successfully got Kafka spans to show up in Jaeger with OpenTelemetry in Spring Boot without using Opentracing? Am I missing any additional dependencies or configuration? Any help would be appreciated.</p>\n",
    "tags" : [ "java", "apache-kafka", "open-telemetry", "jaeger", "distributed-tracing" ],
    "owner" : {
      "account_id" : 31400195,
      "reputation" : 1,
      "user_id" : 24220413,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2cce5c57ed5cf3b53d133d93eb9221c4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "lemelitaf",
      "link" : "https://stackoverflow.com/users/24220413/lemelitaf"
    },
    "is_answered" : false,
    "view_count" : 95,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1749769892,
    "creation_date" : 1749705932,
    "link" : "https://stackoverflow.com/questions/79662954/jaeger-tracing-with-kafka-in-spring-boot-kafka-spans-not-visible-in-jaeger-ui",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}