{
  "question" : {
    "question_id" : 79683375,
    "title" : "SQL Error: 1406, SQLState: 22001 on Java Spring Boot: Data truncation trying to insert 300 character string in a varchar(15000) or longtext in MYSQL 8",
    "body" : "<p>Following several other threads I can confirm:</p>\n<p>I am using Mysql: 8</p>\n<p>Springboot: 2.6.6 with driver:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;8.0.33&lt;/version&gt;\n</code></pre>\n<p>which according to documentation use utf8mb4 as default.</p>\n<p>The field in question is &quot;comment&quot; defined varchar(15000) with utf8mb4_0900_ai_ci</p>\n<p>I have changed the field to varchar(2000) to try to avoid exceeding row limits.</p>\n<p>I have also changed the field to longtext and got the same issue.</p>\n<p>The total characters being inserted do not exceed 65000. ( I'm just trying to insert 300 characters)</p>\n<p>But the backend can only insert until 255 characters, if above I got:</p>\n<pre><code>2025-06-28 18:00:51.208  WARN 74004 --- [io-8087-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1406, SQLState: 22001\n2025-06-28 18:00:51.209 ERROR 74004 --- [io-8087-exec-10] o.h.engine.jdbc.spi.SqlExceptionHelper   : Data truncation: Data too long for column 'comment' at row 1\n2025-06-28 18:00:51.211  INFO 74004 --- [io-8087-exec-10] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\n</code></pre>\n<p>Full trace:</p>\n<pre><code>org.springframework.orm.jpa.JpaSystemException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.DataException: could not execute statement; nested exception is org.hibernate.HibernateException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.DataException: could not execute statement\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:566)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:743)\n    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:711)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:654)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:407)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at jdk.proxy2/jdk.proxy2.$Proxy332.saveAll(Unknown Source)\n    at itk.dbradar.comments.CommentService.create(CommentService.java:37)\n    at itk.dbradar.comments.CommentController.commentcreate(CommentController.java:59)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter.doFilter(KeycloakAuthenticatedActionsFilter.java:57)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter.doFilter(KeycloakSecurityContextRequestFilter.java:61)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.successfulAuthentication(KeycloakAuthenticationProcessingFilter.java:214)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:233)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter.doFilter(KeycloakAuthenticatedActionsFilter.java:74)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter.doFilter(KeycloakSecurityContextRequestFilter.java:92)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter.successfulAuthentication(KeycloakAuthenticationProcessingFilter.java:214)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:233)\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:213)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter.doFilter(KeycloakPreAuthActionsFilter.java:96)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.keycloak.adapters.tomcat.AbstractAuthenticatedActionsValve.invoke(AbstractAuthenticatedActionsValve.java:67)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.keycloak.adapters.tomcat.AbstractKeycloakAuthenticatorValve.invoke(AbstractKeycloakAuthenticatorValve.java:181)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: org.hibernate.HibernateException: Unable to perform beforeTransactionCompletion callback: org.hibernate.exception.DataException: could not execute statement\n    at org.hibernate.engine.spi.ActionQueue$BeforeTransactionCompletionProcessQueue.beforeTransactionCompletion(ActionQueue.java:960)\n    at org.hibernate.engine.spi.ActionQueue.beforeTransactionCompletion(ActionQueue.java:525)\n    at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2426)\n    at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:449)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:183)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$300(JdbcResourceLocalTransactionCoordinatorImpl.java:40)\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:281)\n    at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)\n    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:562)\n    ... 133 more\nCaused by: javax.persistence.PersistenceException: org.hibernate.exception.DataException: could not execute statement\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181)\n    at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:188)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1411)\n    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1394)\n    at org.hibernate.envers.internal.synchronization.AuditProcess.doBeforeTransactionCompletion(AuditProcess.java:178)\n    at org.hibernate.envers.internal.synchronization.AuditProcessManager$1.doBeforeTransactionCompletion(AuditProcessManager.java:47)\n    at org.hibernate.engine.spi.ActionQueue$BeforeTransactionCompletionProcessQueue.beforeTransactionCompletion(ActionQueue.java:954)\n    ... 141 more\nCaused by: org.hibernate.exception.DataException: could not execute statement\n    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:52)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\n    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:46)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3375)\n    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3908)\n    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:107)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:604)\n    at org.hibernate.engine.spi.ActionQueue.lambda$executeActions$1(ActionQueue.java:478)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:475)\n    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:344)\n    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:40)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1407)\n    ... 145 more\nCaused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'comment' at row 1\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:104)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1061)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1009)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeLargeUpdate(ClientPreparedStatement.java:1320)\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdate(ClientPreparedStatement.java:994)\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)\n</code></pre>\n<p>Table is created like:</p>\n<pre><code>CREATE TABLE `comment` (\n  `commentid` bigint NOT NULL AUTO_INCREMENT,\n  `issueid` int DEFAULT NULL,\n  `ctype` smallint DEFAULT '0',\n  `commentexercise` varchar(15000) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL,\n  `comment` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci,\n  `internal` tinyint(1) DEFAULT '1',\n  `creator` int DEFAULT NULL,\n  `createtime` datetime DEFAULT NULL,\n  `modifier` int DEFAULT NULL,\n  `lastupdated` datetime DEFAULT NULL,\n  `approvedby` int DEFAULT NULL,\n  `value1` double DEFAULT NULL,\n  `approved` bit(1) DEFAULT b'0',\n  PRIMARY KEY (`commentid`) USING BTREE,\n  KEY `commentid` (`commentid`) USING BTREE,\n  KEY `fk_comment_creator` (`creator`) USING BTREE,\n  KEY `fk_comment_modifier` (`modifier`) USING BTREE,\n  KEY `fk_comment_issueid` (`issueid`) USING BTREE,\n  KEY `fk_commnets_ctype` (`ctype`),\n  KEY `fk_comments_approveby` (`approvedby`),\n  CONSTRAINT `fk_comment_creator` FOREIGN KEY (`creator`) REFERENCES `main`.`users1` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,\n  CONSTRAINT `fk_comment_issuedid` FOREIGN KEY (`issueid`) REFERENCES `issue` (`issueid`) ON DELETE RESTRICT ON UPDATE RESTRICT,\n  CONSTRAINT `fk_comment_modifier` FOREIGN KEY (`modifier`) REFERENCES `main`.`users1` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,\n  CONSTRAINT `fk_comments_approveby` FOREIGN KEY (`approvedby`) REFERENCES `main`.`users1` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT,\n  CONSTRAINT `fk_commnets_ctype` FOREIGN KEY (`ctype`) REFERENCES `ctype` (`idtype`) ON DELETE RESTRICT ON UPDATE RESTRICT\n) ENGINE=InnoDB AUTO_INCREMENT=291 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;\n</code></pre>\n<p>This is the pojo class:</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@Audited\n@Table(name = &quot;comment&quot;, schema = &quot;radar&quot;, catalog = &quot;&quot;)\npublic class Comment {\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Id\n    private Long commentid;\n    private Integer issueid;\n    private Short ctype;\n    private String comment;\n    @JsonFormat(shape = JsonFormat.Shape.NUMBER)\n    private Boolean internal;\n    private Integer approvedby;\n    private Boolean approved;\n    private Double value1;\n    //@JsonIgnore\n    @CreatedBy\n    @Column(name = &quot;creator&quot;, nullable = false, updatable=false)\n    private Integer creator;\n    @CreatedDate\n    @Column(name = &quot;createtime&quot;, nullable = false, updatable=false)\n    private LocalDateTime createtime;\n    @LastModifiedBy\n    @Column(name = &quot;modifier&quot;)\n    private Integer modifier;\n    @LastModifiedDate\n    @Column(name=&quot;lastupdated&quot;)\n    private LocalDateTime lastupdated;\n    //private   Integer amount;\n    //private   Integer telecom;\n    @Transient\n    Page&lt;Attachmentsc&gt; attachments;\n    public Comment() {\n    }\n}\n</code></pre>\n<p>The problem seems not to be related to MySQL 8, because if I use Navicat I can insert an string much larger than 255 characters.  It seems to rely on Hibernate or Spring Boot.</p>\n",
    "tags" : [ "java", "mysql", "spring-boot", "hibernate" ],
    "owner" : {
      "account_id" : 23063136,
      "reputation" : 1,
      "user_id" : 17177984,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJywRsLLXNHJRISfzJD0bbomnWoepulAvOsLVxZy=k-s256",
      "display_name" : "John A.",
      "link" : "https://stackoverflow.com/users/17177984/john-a"
    },
    "is_answered" : false,
    "view_count" : 118,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751879529,
    "creation_date" : 1751150476,
    "link" : "https://stackoverflow.com/questions/79683375/sql-error-1406-sqlstate-22001-on-java-spring-boot-data-truncation-trying-to",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79692585,
    "question_id" : 79683375,
    "body" : "<p>The root cause of your error is clearly indicated in the last few lines of the stack trace:</p>\n<blockquote>\n<p><strong>Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: Data too long for column 'comment' at row 1</strong></p>\n</blockquote>\n<p>âœ… How to Fix:</p>\n<p>To resolve the <code>Data too long for column 'comment'</code> error, you should explicitly define the column length or use a larger column type like <code>TEXT</code> in both your entity and database.</p>\n<p>Option 1: Define a longer length in the entity (safe for shorter increases, e.g., up to 1000)</p>\n<pre><code>@Column(length = 1000)\nprivate String comment;\n</code></pre>\n<p>Option 2: Use <code>TEXT</code> in the entity and DB (better for long free-text fields)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Lob\n@Column(columnDefinition = &quot;TEXT&quot;)\nprivate String comment;\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 30263328,
      "reputation" : 1,
      "user_id" : 23192753,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8e2bd18d5171368b5d2dd9a4455cdcec?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "walidmadad",
      "link" : "https://stackoverflow.com/users/23192753/walidmadad"
    },
    "creation_date" : 1751879529,
    "last_activity_date" : 1751879529,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140561927,
    "post_id" : 79683375,
    "body" : "Many thanks. Hibernate Envers for auditing was the culprit. it basically does a copy of the original table with an id to keep an audit track. Enabling spring.jpa.show-sql=true, logging.level.org.hibernate.SQL=DEBUG, logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE, and spring.jpa.properties.hibernate.format_sql=true in application.properties I could identified that the error was coming from table comment_AUD  AUD tables are created automatically by Hibernate Envers and String fields are created VARCHAR(255) triggering the problem. changing field type in comment_AUD resolved.",
    "score" : 0,
    "owner" : {
      "account_id" : 23063136,
      "reputation" : 1,
      "user_id" : 17177984,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJywRsLLXNHJRISfzJD0bbomnWoepulAvOsLVxZy=k-s256",
      "display_name" : "John A.",
      "link" : "https://stackoverflow.com/users/17177984/john-a"
    },
    "creation_date" : 1751545472,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140551704,
    "post_id" : 79683375,
    "body" : "I&#39;m not a Hibernate user, so I can&#39;t give advice from experience. But I found this old question: <a href=\"https://stackoverflow.com/q/3584509/20860\">stackoverflow.com/q/3584509/20860</a> It suggests you need to declare the length of a <code>String</code> property, because the default length is 255. I know you said you tried in MySQL to change the column to <code>TEXT</code> or <code>VARCHAR(2000)</code>, but I wonder if Hibernate also needs to be told the field is longer than the default, or else it assumes it&#39;s 255 and truncates the strings.",
    "score" : 0,
    "owner" : {
      "account_id" : 10929,
      "reputation" : 567411,
      "user_id" : 20860,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/iavmP.jpg?s=256",
      "display_name" : "Bill Karwin",
      "link" : "https://stackoverflow.com/users/20860/bill-karwin"
    },
    "creation_date" : 1751231860,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140550283,
    "post_id" : 79683375,
    "body" : "Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1751153633,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79692585" : [ {
      "comment_id" : 140573321,
      "post_id" : 79692585,
      "body" : "Many thanks. Hibernate Envers for auditing was the culprit. it basically does a copy of the original table with an id to keep an audit track. Enabling spring.jpa.show-sql=true, logging.level.org.hibernate.SQL=DEBUG, logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE, and spring.jpa.properties.hibernate.format_sql=true in application.properties I could identified that the error was coming from table comment_AUD AUD tables are created automatically by Hibernate Envers and String fields are created VARCHAR(255) triggering the problem. changing field type in comment_AUD resolved",
      "score" : 0,
      "owner" : {
        "account_id" : 23063136,
        "reputation" : 1,
        "user_id" : 17177984,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJywRsLLXNHJRISfzJD0bbomnWoepulAvOsLVxZy=k-s256",
        "display_name" : "John A.",
        "link" : "https://stackoverflow.com/users/17177984/john-a"
      },
      "creation_date" : 1751972624,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}