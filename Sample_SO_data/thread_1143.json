{
  "question" : {
    "question_id" : 79738546,
    "title" : "Maven + Lombok @Slf4j on JDK 21: “cannot find symbol: variable log” even though annotation processing is configured",
    "body" : "<p>I’m building a Spring Boot app with Maven from the CLI (no IDE build). Many classes use Lombok’s @Slf4j, but the build fails like this:</p>\n<pre><code>[ERROR] .../src/main/java/com/guardxinc/ui/client/CompanyDataClient.java:[57,17] cannot find symbol\n[ERROR]   symbol:   variable log\n</code></pre>\n<p>It happens for multiple classes annotated with @Slf4j.</p>\n<p>Environment</p>\n<ul>\n<li>JDK: 21 (JAVA_HOME points to JDK 21)</li>\n<li>Spring Boot: 3.4.5</li>\n<li>Maven Compiler Plugin: 3.13.0</li>\n<li>Lombok: 1.18.38</li>\n<li>Building with: mvn clean install -Pjar -DskipTests (also tried compile -X)</li>\n</ul>\n<p>What I see in -X logs</p>\n<p>Lombok is on the processor path:</p>\n<pre><code>-processor lombok.launch.AnnotationProcessorHider$AnnotationProcessor\n-processorpath .../org/projectlombok/lombok/1.18.38/lombok-1.18.38.jar\n</code></pre>\n<p>And Maven prints:</p>\n<pre><code>(f) annotationProcessorPaths = [org.projectlombok:lombok:1.18.38.jar]\n(f) annotationProcessors = [lombok.launch.AnnotationProcessorHider$AnnotationProcessor]\n</code></pre>\n<p>Yet log is not generated.</p>\n<p>What I tried:</p>\n<ul>\n<li>Upgrading/downgrading Lombok (1.18.30 → 1.18.38).</li>\n<li>Adding --add-exports/--add-opens for JDK 21 compiler hardening.</li>\n<li>Confirmed a tiny fresh project with the same Lombok/JDK/Maven versions does compile fine — the problem is only in this larger project.</li>\n</ul>\n<p>Minimal code causing the error</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport lombok.extern.slf4j.Slf4j;\n\n@Slf4j\npublic class CompanyDataClient {\n  public void call() {\n    log.info(&quot;hello&quot;); // &lt;-- &quot;cannot find symbol: variable log&quot;\n  }\n}\n</code></pre>\n<p>Minimal pom.xml (only parts relevant to Lombok &amp; compilation)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;lombok-slf4j-repro&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n  &lt;properties&gt;\n    &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;lombok.version&gt;1.18.38&lt;/lombok.version&gt;\n    &lt;slf4j.version&gt;2.0.17&lt;/slf4j.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- Lombok: compile-time only + annotation processor --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;version&gt;${lombok.version}&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Logging API (binding chosen at runtime; not relevant for compile error) --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n      &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n      &lt;version&gt;${slf4j.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;!-- Standard annotation-processing route --&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.13.0&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;fork&gt;true&lt;/fork&gt;\n          &lt;release&gt;${maven.compiler.release}&lt;/release&gt;\n\n          &lt;!-- put Lombok on the APT path --&gt;\n          &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;/path&gt;\n          &lt;/annotationProcessorPaths&gt;\n\n          &lt;!-- JDK 21: allow Lombok to access javac internals (defensive) --&gt;\n          &lt;compilerArgs&gt;\n            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&lt;/arg&gt;\n            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\n            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\n            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\n            &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\n          &lt;/compilerArgs&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Question</strong>\nGiven the above, what else could make Maven compile the original sources without Lombok actually generating the log field, even though the processor is clearly on the path? Are there known pitfalls where another plugin/profile/source root interferes so Lombok runs for some files (or appears configured) but @Slf4j fields are still missing? Any pointers on what to look for in -X output (e.g., unexpected extra source roots, profiles re-adding src/main/java, etc.) would be much appreciated.</p>\n",
    "tags" : [ "java", "maven", "lombok" ],
    "owner" : {
      "account_id" : 4144330,
      "reputation" : 12007,
      "user_id" : 3398554,
      "user_type" : "registered",
      "accept_rate" : 77,
      "profile_image" : "https://i.sstatic.net/lp5n3.png?s=256",
      "display_name" : "Georgi Koemdzhiev",
      "link" : "https://stackoverflow.com/users/3398554/georgi-koemdzhiev"
    },
    "is_answered" : true,
    "view_count" : 348,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1755589823,
    "creation_date" : 1755510686,
    "link" : "https://stackoverflow.com/questions/79738546/maven-lombok-slf4j-on-jdk-21-cannot-find-symbol-variable-log-even-though",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79738850,
    "question_id" : 79738546,
    "body" : "<p>Try running</p>\n<pre><code>mvn help:effective-pom\n</code></pre>\n<p>Is the <code>maven-compiler-plugin</code> listed multiple times in the effective pom? Perhaps one is overriding the other? Is <code>annotationProcessorPaths</code> correct in the effective pom?</p>\n<p>Try running</p>\n<pre><code>mvn clean compile -X -Dmaven.compiler.showDeprecation=true -Dmaven.compiler.showWarnings=true\n</code></pre>\n<p>And look for output like</p>\n<pre><code>[DEBUG] Using compiler 'javac' with classpath ...\n[DEBUG] Using annotation processor org.projectlombok.launch.AnnotationProcessorHider$AnnotationProcessor\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 1096470,
      "reputation" : 29414,
      "user_id" : 1089967,
      "user_type" : "registered",
      "accept_rate" : 59,
      "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
      "display_name" : "lance-java",
      "link" : "https://stackoverflow.com/users/1089967/lance-java"
    },
    "creation_date" : 1755526480,
    "last_activity_date" : 1755526480,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79738850" : [ {
      "comment_id" : 140708602,
      "post_id" : 79738850,
      "body" : "The issue was that I did not resolve the errors in the order they were appearing in my error list  when I was compiling the code. I started with the &quot;majority&quot; once which was the above. When I started resolving my compile time errors in the order they appeared, the log one disappeared - it must have been a false-positive :)",
      "score" : 0,
      "owner" : {
        "account_id" : 4144330,
        "reputation" : 12007,
        "user_id" : 3398554,
        "user_type" : "registered",
        "accept_rate" : 77,
        "profile_image" : "https://i.sstatic.net/lp5n3.png?s=256",
        "display_name" : "Georgi Koemdzhiev",
        "link" : "https://stackoverflow.com/users/3398554/georgi-koemdzhiev"
      },
      "creation_date" : 1756802249,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140684211,
      "post_id" : 79738850,
      "body" : "@GeorgiKoemdzhiev What was the issue? Your solution might be helpful to others in future",
      "score" : 0,
      "owner" : {
        "account_id" : 1096470,
        "reputation" : 29414,
        "user_id" : 1089967,
        "user_type" : "registered",
        "accept_rate" : 59,
        "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
        "display_name" : "lance-java",
        "link" : "https://stackoverflow.com/users/1089967/lance-java"
      },
      "creation_date" : 1755853918,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140678778,
      "post_id" : 79738850,
      "body" : "Thanks for your suggestion, that helped me resolve the issue.",
      "score" : 0,
      "owner" : {
        "account_id" : 4144330,
        "reputation" : 12007,
        "user_id" : 3398554,
        "user_type" : "registered",
        "accept_rate" : 77,
        "profile_image" : "https://i.sstatic.net/lp5n3.png?s=256",
        "display_name" : "Georgi Koemdzhiev",
        "link" : "https://stackoverflow.com/users/3398554/georgi-koemdzhiev"
      },
      "creation_date" : 1755685109,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}