{
  "question" : {
    "question_id" : 79577294,
    "title" : "Console.writer().println() vs Console.format() vs System.out.println()",
    "body" : "<p>Console.writer().println() is displaying &quot;Enter 3 words&quot; after console.readLine().\nCan anyone explain why?</p>\n<pre><code>class Class3{\n    public static void main(String... args){\n        Console console = System.console();\n        if(console == null){\n            throw new RuntimeException(&quot;No console&quot;);\n        }else{\n            //System.out.println(&quot;Enter 3 words&quot;);\n            //console.format(&quot;Enter 3 words&quot;);\n            console.writer().println(&quot;Enter 3 words&quot;);\n            \n            List&lt;String&gt; strings = new ArrayList&lt;&gt;();\n            for(int i=0;i&lt;3;++i){\n                strings.add(console.readLine());\n            }\n            console.format(&quot;You entered %s, %s, %s&quot;,\n                    strings.get(0),\n                    strings.get(1),\n                    strings.get(2)\n            );\n            console.writer().println();  \n        } \n    }\n}\n</code></pre>\n<p>Output:\n<a href=\"https://i.sstatic.net/ykA1zei0.png\" rel=\"nofollow noreferrer\">Output of the application</a></p>\n<p>I tried using System.out.println() and console.format() and both print &quot;Enter 3 words&quot; before the application accepts 3 strings</p>\n",
    "tags" : [ "java", "io" ],
    "owner" : {
      "account_id" : 41067334,
      "reputation" : 33,
      "user_id" : 30103767,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/DSw9Wc4E.jpg?s=256",
      "display_name" : "Libro",
      "link" : "https://stackoverflow.com/users/30103767/libro"
    },
    "is_answered" : true,
    "view_count" : 122,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1745042418,
    "creation_date" : 1744810141,
    "link" : "https://stackoverflow.com/questions/79577294/console-writer-println-vs-console-format-vs-system-out-println",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79577336,
    "question_id" : 79577294,
    "body" : "<p>A quick look at JDK24 source code shows <code>Console</code> as a sealed class with <code>permits ProxyingConsole</code>. The class <code>ProxyingConsole</code> declares <code>writer()</code> to use <code>WrappingWriter extends PrintWriter</code> which constructs super class <code>PrintWriter</code> which sets <code>this.autoFlush = false</code></p>\n<p>This means that when you use <code>console.writer()</code>, it should be followed by <code>console.writer().flush()</code> if you want to guarantee the output is shown when you want it to.</p>\n<p><code>System.out.println()</code> is defined with autoflush so any output is shown for each call.</p>\n<p>Thanks for the useful comments. JDKs have different behaviours for autoFlush in Console writer. From some checks on OpenJDK in Windows 11:</p>\n<div class=\"s-table-container\"><table class=\"s-table\">\n<thead>\n<tr>\n<th>JDK</th>\n<th>console.writer() autoFlush</th>\n<th>System.out autoFlush</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>14 17 18 19 20</td>\n<td>✅ true</td>\n<td>✅ true</td>\n</tr>\n<tr>\n<td>21 22 23 24 25b18</td>\n<td>❌ false</td>\n<td>✅ true</td>\n</tr>\n</tbody>\n</table></div>\n",
    "score" : 5,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1744811737,
    "last_activity_date" : 1745042418,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140341396,
    "post_id" : 79577294,
    "body" : "Note that the JRE doesn&#39;t always have a <code>Console</code>. In some environments, <code>System.console()</code> returns <code>null</code>. It&#39;s usually more reliable to use <code>System.in</code>.",
    "score" : 1,
    "owner" : {
      "account_id" : 19118721,
      "reputation" : 12469,
      "user_id" : 13963086,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "k314159",
      "link" : "https://stackoverflow.com/users/13963086/k314159"
    },
    "creation_date" : 1744817019,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140341052,
    "post_id" : 79577294,
    "body" : "Of course <a href=\"https://iut-fbleau.fr/docs/java/api/java.base/java/io/Console.html#readLine(java.lang.String,java.lang.Object...)\" rel=\"nofollow noreferrer\"><code>readLine</code></a> has also an override with a formatted prompt: <code>strings.add(console.readLine(&quot;Word %d: &quot;, i+1));</code>",
    "score" : 3,
    "owner" : {
      "account_id" : 960307,
      "reputation" : 110397,
      "user_id" : 984823,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Z2KYN.jpg?s=256",
      "display_name" : "Joop Eggen",
      "link" : "https://stackoverflow.com/users/984823/joop-eggen"
    },
    "creation_date" : 1744812230,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140341022,
    "post_id" : 79577294,
    "body" : "The console class does not immediately <code>flush</code> its output to the console (who knows why). Add the following line after your initial <code>println</code>: <code>console.writer().flush();</code>. The reason that all the remainng output gets written is that the stgream is automatically flushed when the program terminates. Note, I tried using <code>format</code> and <code>printf</code> and got the same result. Looking at the documentation I cannot see anything that sets automatic flushing of output.",
    "score" : 1,
    "owner" : {
      "account_id" : 29555382,
      "reputation" : 1005,
      "user_id" : 22651151,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/HH5yW.jpg?s=256",
      "display_name" : "OldBoy",
      "link" : "https://stackoverflow.com/users/22651151/oldboy"
    },
    "creation_date" : 1744811725,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140341007,
    "post_id" : 79577294,
    "body" : "Both <code>Console.writer()</code> and <code>System.out</code> are instances of <code>PrintWriter</code> but <code>Console.writer()</code> is autoFlush=false, whereas  <code>System.out</code> is autoflushed",
    "score" : 1,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1744811532,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140340953,
    "post_id" : 79577294,
    "body" : "You didn&#39;t tell us <i>how</i> you&#39;re running this ...",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4243,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1744810491,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79577336" : [ {
      "comment_id" : 140343824,
      "post_id" : 79577336,
      "body" : "@Slaw Good to know. I ran a few tests using reflection to read <code>autoFlush</code> field - results in table above. For the version of JDK20 I have, the writer is <code>pw = new PrintWriter(out, true)</code>.",
      "score" : 1,
      "owner" : {
        "account_id" : 5998820,
        "reputation" : 16283,
        "user_id" : 4712734,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "DuncG",
        "link" : "https://stackoverflow.com/users/4712734/duncg"
      },
      "creation_date" : 1744880882,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140343507,
      "post_id" : 79577336,
      "body" : "Looks like <code>this.autoFlush = false</code> was added in Java 20 as part of <a href=\"https://bugs.openjdk.org/browse/JDK-8295803\" rel=\"nofollow noreferrer\">JDK-8295803 - Console should be usable in jshell and other environments</a>.",
      "score" : 2,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49884,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1744875199,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140341209,
      "post_id" : 79577336,
      "body" : "@k314159 Interesting, and looks like was changed by JDK21 which is similar to JDK24",
      "score" : 0,
      "owner" : {
        "account_id" : 5998820,
        "reputation" : 16283,
        "user_id" : 4712734,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "DuncG",
        "link" : "https://stackoverflow.com/users/4712734/duncg"
      },
      "creation_date" : 1744814468,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140341100,
      "post_id" : 79577336,
      "body" : "In Java 17, the PrintWriter is created with autoflush = true.",
      "score" : 1,
      "owner" : {
        "account_id" : 19118721,
        "reputation" : 12469,
        "user_id" : 13963086,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "k314159",
        "link" : "https://stackoverflow.com/users/13963086/k314159"
      },
      "creation_date" : 1744812990,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140341066,
      "post_id" : 79577336,
      "body" : "@oldBoy Indeed it does seem odd especially if interleaved with <code>read()</code>. No insight except perhaps it is that flushed streams on some consoles (eg Windows CMD.EXE) can make Java apps much slower.",
      "score" : 0,
      "owner" : {
        "account_id" : 5998820,
        "reputation" : 16283,
        "user_id" : 4712734,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "DuncG",
        "link" : "https://stackoverflow.com/users/4712734/duncg"
      },
      "creation_date" : 1744812394,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140341039,
      "post_id" : 79577336,
      "body" : "It seems a strange idea (IMHO) not to autoflush a console writer. Is there some special reason you know of why they do it this way?",
      "score" : 0,
      "owner" : {
        "account_id" : 29555382,
        "reputation" : 1005,
        "user_id" : 22651151,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/HH5yW.jpg?s=256",
        "display_name" : "OldBoy",
        "link" : "https://stackoverflow.com/users/22651151/oldboy"
      },
      "creation_date" : 1744812023,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}