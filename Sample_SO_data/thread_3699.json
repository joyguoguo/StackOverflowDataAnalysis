{
  "question" : {
    "question_id" : 79530545,
    "title" : "Error with Query after updating to spring boot 3",
    "body" : "<p>I update project from spring boot 2 to spring boot 3. After updating i've got errors (at the end).</p>\n<p>My Entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;rules&quot;)\n@Getter\n@Setter\n@Builder\n@ToString\n@NoArgsConstructor\n@AllArgsConstructor\n@Accessors(chain = true)\npublic class Rules {\n  @Id\n  private Long id;\n\n  @JdbcTypeCode(SqlTypes.ARRAY)\n  @Column(name = &quot;message_department_ids&quot;)\n  private List&lt;Long&gt; messageDepartmentIds;\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>@Repository\n@Retryable(value = { SQLException.class }, maxAttemptsExpression = &quot;#{${retry.maxAttempts:2147483647}}&quot;,\n        backoff = @Backoff(delayExpression = &quot;#{${retry.delay:1000}}&quot;))\npublic interface RulesRepository extends JpaRepository&lt;Rules, Long&gt;, JpaSpecificationExecutor&lt;Rules&gt; {\n\n    @Modifying\n    @Query(&quot;UPDATE Rules &quot; +\n            &quot;SET messageDepartmentIds = FUNCTION('ARRAY_REMOVE', messageDepartmentIds, :departmentId) &quot; +\n            &quot;WHERE id = :id&quot;)\n    void deleteDepartmentId(@Param(&quot;id&quot;) Long id, @Param(&quot;departmentId&quot;) Long departmentId);\n}\n</code></pre>\n<p>And exception:</p>\n<pre><code>Validation failed for query for method public abstract void project.repository.RulesRepository.deleteDepartmentId(java.lang.Long,java.lang.Long)\n\nCaused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [Cannot invoke &quot;org.hibernate.query.sqm.SqmExpressible.getSqmType()&quot; because the return value of &quot;org.hibernate.query.sqm.tree.SqmTypedNode.getExpressible()&quot; is null] [UPDATE Rules SET messageDepartmentIds = FUNCTION('ARRAY_REMOVE', messageDepartmentIds, :departmentId) WHERE id = :id] [UPDATE Rules SET messageDepartmentIds = FUNCTION('ARRAY_REMOVE', messageDepartmentIds, :departmentId) WHERE id = :id]\n\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;org.hibernate.query.sqm.SqmExpressible.getSqmType()&quot; because the return value of &quot;org.hibernate.query.sqm.tree.SqmTypedNode.getExpressible()&quot; is null\n</code></pre>\n<p>Can't understand what should i do. Change SqlTypes or maybe change Query,  but how?</p>\n<p>Version of Hibernate is 6.4.1 Final. Version of Spring-boot 3.2.2</p>\n",
    "tags" : [ "java", "spring-boot", "hibernate" ],
    "owner" : {
      "account_id" : 15683450,
      "reputation" : 97,
      "user_id" : 11791924,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-9XdNkZ61ZLw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reezyRI8oW_zUDBoYeqEpdPgPUQ8A/mo/s256-rj/photo.jpg",
      "display_name" : "FPS Bard",
      "link" : "https://stackoverflow.com/users/11791924/fps-bard"
    },
    "is_answered" : false,
    "view_count" : 145,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1742892583,
    "creation_date" : 1742805098,
    "link" : "https://stackoverflow.com/questions/79530545/error-with-query-after-updating-to-spring-boot-3",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}