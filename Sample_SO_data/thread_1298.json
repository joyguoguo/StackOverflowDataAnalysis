{
  "question" : {
    "question_id" : 79721314,
    "title" : "Jenkins controller throwing HTTP 500 Error after upgrading Java to 21",
    "body" : "<p>I am currently on Jenkins version 2.504.3. I tried upgrading my Jenkins JDK from 17 to 21 on my Jenkins controller. I am using Open JDK and my Jenkins runs on Ubuntu server.</p>\n<p>I encountered the following error:</p>\n<blockquote>\n<p>HTTP ERROR 500 jakarta.servlet.ServletException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-2.504.3.jar!/lib/layout/view.jelly:42:20: &lt;d:invokeBody&gt; class hudson.security.csrf.DefaultCrumbIssuer is missing its descriptor URI: / STATUS: 500 MESSAGE: jakarta.servlet.ServletException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-2.504.3.jar!/lib/layout/view.jelly:42:20: &lt;d:invokeBody&gt; class hudson.security.csrf.DefaultCrumbIssuer is missing its descriptor SERVLET: Stapler CAUSED BY: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-2.504.3.jar!/lib/layout/view.jelly:42:20: &lt;d:invokeBody&gt; class hudson.security.csrf.DefaultCrumbIssuer is missing its descriptor CAUSED BY: java.lang.AssertionError: class hudson.security.csrf.DefaultCrumbIssuer is missing its descriptor Caused by: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-2.504.3.jar!/lib/layout/view.jelly:42:20: &lt;d:invokeBody&gt; class hudson.security.csrf.DefaultCrumbIssuer is missing its descriptor at org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:744)</p>\n</blockquote>\n<p>So, I reverted back to JDK 17 and my Jenkins is working fine. But I would like to upgrade to JDK 21. So please help me understand what is causing this issue and how can I fix it.</p>\n",
    "tags" : [ "java", "jenkins", "jenkins-plugins", "java-21" ],
    "owner" : {
      "account_id" : 20737547,
      "reputation" : 1,
      "user_id" : 15228070,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1b84b6dc335d2b23410b94221c226f04?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gowducheruvu",
      "link" : "https://stackoverflow.com/users/15228070/gowducheruvu"
    },
    "is_answered" : false,
    "view_count" : 252,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1759480777,
    "creation_date" : 1753966514,
    "link" : "https://stackoverflow.com/questions/79721314/jenkins-controller-throwing-http-500-error-after-upgrading-java-to-21",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79725243,
    "question_id" : 79721314,
    "body" : "<p>Instructions for updating Jenkins to Java 21: <a href=\"https://www.jenkins.io/doc/book/platform-information/upgrade-java-to-21/\" rel=\"nofollow noreferrer\">https://www.jenkins.io/doc/book/platform-information/upgrade-java-to-21/</a></p>\n<p>Did you miss this step?</p>\n<blockquote>\n<p>Upgrade to Java 21 on your Jenkins controller</p>\n<p>Stop the Jenkins controller with systemctl stop jenkins.</p>\n<p>Install the corresponding Java version with dnf -y install temurin-21-jdk or with the package manager your system uses.</p>\n<p>Check the Java version with java -version.</p>\n<p>Change the default Java for the system by running update-alternatives --config java and then enter the number that corresponds to Java 21, for example 2 if that is the correct option.</p>\n<p>Restart Jenkins with systemctl restart jenkins.</p>\n</blockquote>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28552468,
      "reputation" : 77,
      "user_id" : 21857134,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c51dd4770e9aaef51f06f22c2085b9fb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "MatCat",
      "link" : "https://stackoverflow.com/users/21857134/matcat"
    },
    "creation_date" : 1754329793,
    "last_activity_date" : 1754329793,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140774871,
    "post_id" : 79721314,
    "body" : "Possible duplicate of <a href=\"https://stackoverflow.com/q/74486020/150978\">stackoverflow.com/q/74486020/150978</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43459,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1759480969,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140774866,
    "post_id" : 79721314,
    "body" : "@aled In general you are right but the error entry is one very long line. IMHO formatting it as code makes it unreadable as you can only see may be 10% of it at once, therefore I have reverted it and formatted it as quote.",
    "score" : 0,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43459,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1759480957,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140634493,
    "post_id" : 79721314,
    "body" : "I have gone through the upgrade steps for java 21. Is it necessary to upgrade all the plugins as I am not sure what plugins are compatible with jdk 21.",
    "score" : 0,
    "owner" : {
      "account_id" : 20737547,
      "reputation" : 1,
      "user_id" : 15228070,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1b84b6dc335d2b23410b94221c226f04?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gowducheruvu",
      "link" : "https://stackoverflow.com/users/15228070/gowducheruvu"
    },
    "creation_date" : 1754023161,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140633188,
    "post_id" : 79721314,
    "body" : "Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for multi line logs, not quote format. Quote is for human text, and breaks the existing structure of the log. It makes logs hard to read and gets in the way of trying to copy text for investigation.",
    "score" : 2,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1753975837,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140632778,
    "post_id" : 79721314,
    "body" : "Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.",
    "score" : 0,
    "owner" : {
      "account_id" : 8497034,
      "reputation" : 1710,
      "user_id" : 6394109,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/g0WEX.png?s=256",
      "display_name" : "Ram Chander",
      "link" : "https://stackoverflow.com/users/6394109/ram-chander"
    },
    "creation_date" : 1753967551,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79725243" : [ {
      "comment_id" : 140642497,
      "post_id" : 79725243,
      "body" : "I have followed the following steps: I have dowloaded the openjdk 21, then updated the default java for the system using update-alternatives --config java and also updated the /etc/environment&#39;s JAVA_HOME to point to jdk 21 and then restarted the jenkins.",
      "score" : 0,
      "owner" : {
        "account_id" : 20737547,
        "reputation" : 1,
        "user_id" : 15228070,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1b84b6dc335d2b23410b94221c226f04?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Gowducheruvu",
        "link" : "https://stackoverflow.com/users/15228070/gowducheruvu"
      },
      "creation_date" : 1754374573,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}