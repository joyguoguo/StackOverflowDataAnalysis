{
  "question" : {
    "question_id" : 79756626,
    "title" : "java regex goes stack overflow on a long text : ^\\d{4,5}+(,\\d{4,5}+)*$",
    "body" : "<p>I have this ~20000 characters string and I want to make sure it is only composed of 4 or 5 long numbers, comma separated.\nex : 12345,12345,1234,12345,1234,1234</p>\n<p>I use the expression : ^\\d{4,5}+(,\\d{4,5}+)*$</p>\n<p>I use java.validation.constraint the following way:</p>\n<pre><code>@Pattern(regexp = &quot;^\\\\d{4,5}+(,\\\\d{4,5}+)*$&quot;)\nprivate String myString;\n</code></pre>\n<p>I end up with a stack overflow with a stack repeating again and again :</p>\n<pre><code>    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3812)\n    at java.util.regex.Pattern$Curly.match(Pattern.java:4241)\n    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3812)\n    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4672)\n    at java.util.regex.Pattern$Loop.match(Pattern.java:4799)\n    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4731)\n    at java.util.regex.Pattern$Curly.match2(Pattern.java:4325)\n    at java.util.regex.Pattern$Curly.match(Pattern.java:4252)\n    at java.util.regex.Pattern$BmpCharProperty.match(Pattern.java:3812)\n    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4672)\n    at java.util.regex.Pattern$Loop.match(Pattern.java:4799)\n...\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>Here, an example of a string that causes the problem (yeah, it's long)</p>\n<pre><code>54300,54950,40700,42470,42630,42540,42114,42590,42840,88580,88100,88650,03100,03630,03410,03310,70300,51170,63350,51360,51380,29140,29170,29900,29910,29940,14590,27260,27560,29370,56550,56410,56690,54360,44110,85100,85340,85180,49000,49070,49080,49100,49112,49124,49130,49240,49480,44130,49250,49630,49800,67240,67500,67590,54121,54530,54700,57680,79140,21600,21300,21800,21000,21910,21160,21850,51100,51350,51370,51390,51430,51450,76950,76510,76590,68121,68470,68550,68690,68760,68820,68830,88540,60112,60690,60860,76220,16360,85400,78124,78126,78130,78410,78440,78580,78680,78711,78820,78920,78930,78970,65200,65710,77300,77210,77870,77810,77920,77780,77630,77850,27130,27580,12000,12510,12850,14111,14120,14123,14320,14540,14680,14760,14790,14930,51340,51250,44190,85610,31800,85290,85590,49280,49300,67170,67350,67580,67670,37540,37200,37000,37100,37520,37390,37700,37230,64110,64140,64290,64000,64320,56150,56930,47600,47200,47180,17240,34120,34530,34630,34720,34510,34850,56430,31120,31860,31270,31320,31520,31810,49700,44220,44360,44880,22140,53600,53160,53400,72350,86140,86130,86360,86490,79100,60140,60940,60290,60840,60870,60180,60550,60600,60730,60570,60250,60370,60530,09100,09340,27460,27590,27690,27740,27340,27610,76520,27100,76350,76410,27360,76800,58200,58440,14260,14310,10100,10510,63560,63700,68360,68500,68530,68540,68610,68700,68850,62250,62720,62179,62164,62126,62930,62132,03500,06110,06150,06210,06220,06250,06370,06400,06550,06560,06580,06590,01700,69001,69002,69003,69004,69006,69008,69100,69120,69140,69150,69270,69300,69330,69500,69580,69660,69680,69210,69280,69290,69380,69690,69890,04400,26100,26300,30100,30560,30520,30380,30340,30480,30300,30127,30129,79000,79180,79410,79460,79510,33190,32500,32390,69130,69410,69260,69160,69009,69005,69570,69370,69340,69110,69450,69760,69350,69007,69600,69630,69126,42160,42170,42330,42340,42450,42480,42680,61400,77090,77135,77144,77164,77177,77181,77183,77184,77185,77186,77200,77340,77360,77400,77420,77500,77600,77680,93160,93220,93330,93370,93460,93470,94350,94420,62122,62150,62151,62157,62190,62260,62460,62470,62540,62550,62700,62940,02600,80210,80390,80870,80820,80960,80570,62380,80290,80640,27170,62131,62196,62199,62232,62350,62400,62920,62100,62137,62730,62185,62231,17100,17810,35000,35132,35135,35136,35200,35235,35510,35650,35700,35740,35760,35770,35830,68116,68310,68520,68620,68800,68950,93110,93250,93340,93360,93390,94100,94120,94130,94170,94210,94340,94360,94370,94380,94430,94490,94500,94510,94880,76320,76650,76500,11100,11430,38520,38860,43250,43360,43410,43450,38260,63210,38070,38080,38090,38290,69124,69125,69720,63300,63650,63920,83136,83380,83520,83480,83490,15000,15250,15130,89144,89600,77100,77122,77124,77139,77165,77470,77910,76150,76360,76480,76570,76460,76980,76740,59820,59153,62162,62215,27370,27520,27670,27930,27000,51140,25300,70100,42610,01390,69730,42120,42123,42153,42300,42410,38370,42520,69420,42740,01570,01750,71000,71118,71680,71850,71870,71960,01310,01440,01660,73200,73790,73540,73460,73720,07370,26140,26240,26330,30420,30111,30114,30980,30870,30121,30670,30310,30250,30920,30660,30820,30620,13300,13450,13113,13121,13430,13140,30700,34430,34880,34070,34000,34080,34090,34750,34970,34690,34990,34680,34250,07130,07500,07440,26500,26000,13105,13119,13120,13124,13590,13710,13720,13790,13850,13950,66000,66100,66140,66180,66200,66280,66330,66410,66430,66450,66560,66570,66670,66750,83390,83660,13370,13560,13660,13980,84460,40300,78000,78114,78117,78150,78180,78190,78210,78280,78310,78320,78330,78340,78370,78390,78450,78470,78530,78590,78870,78960,78990,44290,89210,60200,60280,60750,60610,60880,60153,81310,34300,34340,34450,34550,62660,62136,62113,62149,62290,89520,62130,62114,62160,62172,62530,62620,62670,14112,14280,14440,14470,14530,14610,14750,14780,14830,14880,14920,14990,01150,38390,83440,62110,62950,62640,62420,62119,62970,62320,62740,62710,59553,62141,62440,62221,59128,62680,62590,62430,59950,59162,62790,62218,62820,62490,62220,68000,68040,68125,68126,68180,68280,68320,68630,68980,01000,01370,69240,69550,79500,13015,13016,13170,13180,13220,13620,13700,13730,13740,13820,28310,62980,62143,62153,62800,62750,24100,24520,12200,89340,77940,89140,31790,31150,31840,31780,31620,31140,37420,37500,37140,82000,82410,82710,40130,40530,40150,40440,40510,50110,50470,50130,50100,50120,22290,22580,22930,14114,14480,14960,14000,14200,14460,14550,14650,14730,14840,14850,14980,72100,72000,72700,72530,72560,72190,72230,45300,35270,25500,25130,25570,44250,44560,44570,44600,44730,27400,54780,54800,54910,72300,50250,50360,80190,80320,80400,29950,76450,76540,38200,38670,38780,69560,69970,03510,71160,03110,22240,22430,22550,44521,44850,49270,49530,49420,86200,24170,86700,82100,82210,16300,53200,33250,33180,33112,76000,76100,76120,76130,76140,76160,76230,76240,76250,76300,76380,76420,76770,76920,76960,77127,77176,77240,77310,77350,77380,77550,91100,91250,91280,91830,79310,68490,68390,68170,57430,57510,67260,57370,57405,57635,57820,67320,76580,76840,35300,35133,77150,91330,91560,91800,91860,94000,94140,94190,94440,94450,94460,94470,94520,94600,94700,69250,77450,77860,77174,77410,77700,78100,78260,78360,78400,78420,78500,78600,78700,78800,92000,92230,92250,92270,92400,92600,92700,93800,95100,95110,95120,95130,95150,95210,95220,95230,95240,95250,95320,95370,95390,95480,95530,95550,95580,95600,95680,95870,95880,03000,03400,30000,30132,30230,30540,30900,13440,13670,13750,13810,13940,84300,84510,35150,35410,42000,42100,42152,42270,42290,42320,42350,42390,42400,42570,42580,42650,91000,91080,91090,91130,91450,91480,41700,69740,69800,13640,13350,84360,13840,13410,21240,25680,22460,70000,28400,57930,88170,29830,29870,29880,77000,77190,77590,77950,77115,69190,69200,69230,69310,69320,69360,69390,69540,69960,42600,95160,95170,95410,95360,95350,93430,95330,93380,95200,93450,92390,93240,95460,95440,95570,93210,93200,95140,95400,95560,75001,75002,75003,75004,75005,75006,75007,75008,75009,75010,75011,75012,75013,75014,75015,75016,75017,75018,75019,75020,75116,92100,92110,92120,92130,92140,92170,92190,92200,92210,92220,92240,92260,92290,92300,92310,92320,92330,92340,92350,92360,92800,93170,93260,93310,93400,94110,94160,94200,94220,94230,94240,94250,94260,94270,94300,94320,94400,94410,94550,94800,71480,21550,21640,21700,03600,59253,62840,59940,59660,60300,60520,60810,60128,60000,60155,06000,06100,06200,06270,06300,06480,06570,06610,06640,06700,06800,06230,06310,06340,06690,06730,06790,06950,78140,78160,78170,78220,78290,78350,78380,78430,78560,78620,91570,92370,92380,92410,92420,92430,92500,84740,84250,84210,84450,84800,84470,84320,84170,69780,87000,87100,87170,87270,87280,87350,87410,87570,87920,47250,56850,56600,56620,56530,56100,56650,56700,59155,59790,59175,59139,59810,59120,59260,59000,59800,59777,59160,59273,59113,59370,59263,59262,59110,59493,59650,59491,59130,59710,59350,59211,59147,59520,07120,07150,01550,74270,74520,74580,30350,30720,14130,66190,66660,66690,66700,73800,73190,38530,46320,91200,91210,91230,91260,91270,91320,91550,94150,94290,94310,94390,94480,77260,77138,77730,77640,77660,77440,22400,78110,78230,92150,63160,63117,63910,61230,81600,85170,83610,83230,89000,89230,89250,89380,89470,89550,12130,12560,01300,01680,63330,03250,27230,28200,41100,59770,59300,59880,59410,59990,59125,59174,59264,59192,59860,59233,59269,59494,59195,59590,59121,59243,59278,57120,57140,57175,57185,57280,57300,57360,57365,57525,57535,57855,57860,68480,68640,68600,26320,26760,42640,42720,69870,69400,69480,69640,69830,06130,06160,06330,06410,06520,06600,06650,06740,13011,13190,13260,13360,13400,13420,13470,13821,13830,24310,33430,33340,40180,40100,40350,64170,64370,82440,82350,82300,35350,35400,35430,35730,35780,35800,35870,56130,72440,72370,85480,08190,61200,18200,78460,78690,78720,78760,59154,59163,59199,59690,59920,59970,95740,95840,59127,59129,59157,59191,59214,59217,59225,59271,59277,59292,59540,59980,85140,11130,11480,11490,11510,11540,06140,24330,05200,68128,68220,68300,68330,68730,68870,64120,31870,59118,59237,59290,59320,59700,59840,59116,59134,59181,59193,59236,59249,59280,59850,59930,59480,59496,59274,62138,59184,59272,59221,62410,59185,59136,59112,59251,67770,67620,67410,67480,67850,77270,93000,93100,93130,93140,93150,93190,93230,93270,93290,93320,93350,93410,93420,93440,93600,93700,50190,50490,34660,34570,34770,34560,66240,66380,66540,66350,66680,66610,66530,66270,45200,45120,45700,54135,54350,54400,54430,54440,54590,54650,54720,54810,54860,54920,21110,38120,38950,38340,38700,38113,38360,38600,31670,31650,31750,31130,31280,78300,78480,78510,78540,78570,78630,78670,78740,78780,78955,95000,95180,95280,95490,95610,95800,27500,66160,66480,66490,66620,66740,59133,59551,59261,59239,59246,50000,50180,50880,50680,50890,85130,63800,63115,63111,63370,63670,63170,63960,63510,63730,13310,67112,67117,67120,67201,67202,67203,67204,67205,67206,67370,67520,67810,67980,67990,44210,44760,54190,54620,54680,54880,57390,01090,69115,69220,69910,22570,13210,13630,13910,13520,81000,81990,81380,81160,81450,85600,85530,13600,83110,83150,83270,83740,12110,12220,12300,44140,85660,44690,12800,15110,74450,74220,74950,15300,12430,02420,59142,80740,80260,80115,62152,62176,62187,62224,62360,62630,62830,13890,13990,86380,04370,35750,35160,17350,81170,06510,06830,64480,64250,64200,64990,28480,15600,78112,78121,78240,78810,78850,78860,01500,01640,01430,01460,01580,05170,05260,17190,17310,17550,17840,25110,45340,46260,56200,56910,56460,63240,63150,63790,67250,67660,67690,70120,80510,80830,80890,80690,80580,80420,80490,82500,85500,88230,64210,64600,64100,46400,46130,45170,57200,57905,57910,57915,43170,33490,33410,29460,40420,31290,33460,01480,01600,64700,64122,64500,32400,32720,33690,22600,46500,04160,04290,04350,04510,04600,42210,33760,35114,35111,35960,35260,86120,36160,45130,90000,90160,90300,90330,90340,90350,90380,90400,90800,90850,08130,21340,67440,67490,67700,67790,68140,68370,68380,68230,67930,68590,68750,68150,67730,68340,68660,68970,88600,67110,67360,33120,65250,65410,54134,54160,54630,54740,54990,54850,24270,15310,63940,63600,63220,88360,88290,56670,56570,56680,17130,12260,69430,80150,25150,25260,25350,25700,46100,44170,50460,50690,59550,59244,59288,59219,59212,59177,59440,37270,85300,32550,32000,50420,50860,66250,66420,66440,66510,44370,47300,47440,62880,62210,62300,93500,72550,12330,69520,69530,69700,12290,11260,11500,46160,01960,95300,95310,95430,95520,95540,95630,95650,95760,28160,47110,10260,95620,95690,95810,95830,46600,67113,67870,67880,67960,54890,12500,57660,57730,29160,29570,59111,59124,59146,59156,59165,59171,59172,59176,59179,59182,59215,59234,59247,59252,59287,59293,59295,59490,59580,32300,19400,19380,22200,22970,78490,78940,78890,78610,78640,78950,78650,33480,67420,67570,46350,46300,25750,70400,29420,29670,29250,93300,93120,57000,57050,57070,57155,57160,57245,57645,57685,57950,78750,77290,77990,95190,95380,95500,95670,95700,91120,91300,91370,91430,92160,79430,79320,50160,50810,14380,41600,45320,14500,45470,45760,45450,36600,36360,72210,56300,29400,15270,63810,31410,31390,31530,31820,24460,18350,14400,14520,49520,62117,62112,59552,62118,59259,62156,15700,46210,29690,87800,87320,87210,87140,86460,86370,86340,86210,80770,76117,80520,80220,76260,80880,80130,80620,80135,80540,80710,80160,79380,79440,79160,79110,76690,76710,76850,76280,76133,76790,76116,72600,72610,72510,72330,72470,72290,72380,72140,70280,70220,70310,67390,67820,67920,67550,67720,64800,64450,64430,64420,64510,62610,62890,62910,61570,61100,61430,61440,61790,59242,59235,59310,59870,59148,59143,59285,62500,56390,56220,56140,55170,52410,53100,53300,53220,52160,51210,50410,50750,50550,50630,50760,50720,50850,50380,50400,50530,50610,50740,50260,50210,49190,49610,49330,49220,49770,49125,49122,49230,49450,49660,49710,48250,46230,46190,45260,44115,44430,44450,44470,44980,44410,41300,41230,41210,40360,40330,40290,40320,37460,37110,36500,36320,23360,36140,35370,35120,33720,33138,33510,33740,33950,33970,32310,32410,32190,29800,29410,29600,28410,28190,27210,24800,24000,24660,24750,24420,24640,24140,18160,17540,17380,15500,14117,14350,14410,14770,14290,14220,09800,08390,82140,02310,02570,77750,85560,85750,85360,85520,08290,80132,80100,80970,76200,76370,76550,76880,44530,35130,81330,10230,41220,18390,72160,72450,62560,16350,32360,15240,15210,50390,62111,62116,62158,81210,81100,81360,24190,62850,62142,09270,09700,11420,40600,37220,76640,77930,91750,91840,91140,91160,91170,91240,91350,91360,91380,91390,91420,91600,91620,91700,24430,24650,40500,19250,28000,28110,28360,28600,28630,51310,77151,29290,29820,76400,76111,33133,33141,33910,33126,33500,31160,65400,24250,65300,65330,86310,44810,87110,87220,65600,65430,65690,65000,65800,65310,65460,65360,65350,65290,81220,29520,29970,56400,56950,55200,76290,76310,76600,76610,76620,76700,76930,67610,67760,67840,10160,89770,35190,35630,35850,12170,35113,35530,28500,28100,27650,51130,33590,33780,86220,56230,33710,33810,28240,27150,27660,27860,72310,87120,47700,35520,35590,24500,24480,79150,79130,79450,14640,14910,14510,14950,14800,14160,19340,27310,14100,50600,50730,50290,50350,61320,47320,47190,27220,27770,27110,61150,35220,35690,86600,86480,53250,53170,53290,49400,85200,35600,41320,27490,27600,18330,53000,53810,53940,53950,53960,53240,53420,53150,53540,53350,53370,50640,53190,72240,72390,72800,72150,72400,44240,49730,49590,49650,49740,44150,44522,49370,53210,85000,85310,22150,35560,56610,56640,56740,56780,56840,56870,56880,22640,35230,29850,29490,29200,29480,29860,35140,45480,15230,22100,22630,22830,56190,35610,50170,78730,78830,91470,91410,50220,50300,50870,14700,14420,28800,45270,45530,45110,45550,45730,41150,51480,51200,08460,45210,10400,53390,53800,22340,29000,29500,29700,16190,16620,29840,35460,35500,37190,24600,19220,47800,47410,47350,19150,19490,19000,33930,47310,47520,33920,16600,16340,16800,16590,16160,16430,16250,17260,17320,17370,17480,17560,24450,40170,33540,19350,19130,46310,15590,15800,64470,64260,65700,17390,17420,17530,17570,17750,17890,17920,12360,82340,82360,12390,12160,87420,87520,86350,81190,81430,79270,79210,32290,37800,36210,34320,86260,32170,47160,24540,09000,09330,09500,81090,81710,47370,82150,22160,15120,87400,23100,58220,11110,11560,34350,34710,64440,16200,16720,17120,80370,58160,61390,61130,45570,40630,32140,65190,81260,19160,44160,44780,47150,40160,32150,35131,35170,81370,31660,81800,46250,40200,32120,72260,54470,40250,12140,40400,21140,19270,19240,19560,81200,81660,16000,16400,16440,16470,16710,16730,59126,59560,59890,59910,27920,27940,44540,72320,50540,18270,45220,52210,15290,65420,65490,65390,31830,31170,31880,31770,33750,33870,33670,33370,10130,59141,59188,59198,59213,59220,59224,59227,59282,59294,59296,19230,19210,23150,19110,79170,22170,64520,32810,44000,44100,44200,44230,44300,44340,44400,44700,44800,87700,87620,87430,62140,62770,59470,59670,33840,22540,22810,29510,64130,22690,35540,65230,65670,81300,81390,34330,61110,29150,29550,56370,56730,61220,49310,49340,49560,49690,64410,24110,85440,22510,22330,33770,33830,29530,15340,12340,12630,12740,64190,45240,45600,36370,67330,88390,88190,57720,55320,27160,27140,60590,60850,14330,60400,60138,80140,27530,27750,27540,27810,27780,28260,27710,27730,50340,33220,76340,17770,53380,41370,36310,87890,47390,47220,47550,19800,35390,33730,11200,22470,22500,22620,22860,56240,24130,24680,62810,19370,19260,33127,77130,55110,11250,11570,28170,31460,68210,68780,90110,90150,90360,41360,55230,72500,32200,32490,19430,59190,59232,59189,59173,55250,33640,33880,33550,48100,47290,36100,54450,40140,82700,22260,19200,22000,22190,22410,22440,22520,22590,22680,76720,17430,12270,82250,02500,02830,02550,16230,16460,46270,72650,50230,50590,50660,33123,85280,36300,35550,09460,11210,81270,34220,33990,08240,15150,76560,15400,76390,32450,56860,56000,56450,16120,59238,59730,50330,27550,27470,27800,41140,41110,31370,60700,60710,60410,60126,36200,80270,47140,11230,62510,62575,32330,02840,80460,80350,27910,27790,27850,27380,57670,29242,17520,22120,22360,22940,22950,22960,18310,56800,14113,14600,36340,45630,45360,58450,18240,41120,45390,77890,24210,45620,72270,37370,28340,27820,19320,17000,17137,17138,17139,17140,17180,29120,29730,29740,29750,29980,24610,24230,44610,44620,44830,44840,44860,57530,57640,53410,76470,76910,37600,47260,47380,51270,46170,12210,09230,09190,41350,41260,41000,80860,80550,81440,27570,28270,28350,31300,31500,31200,31400,31000,31100,31240,09320,82600,82170,31490,31180,31850,64400,64660,64870,59138,59145,59330,59570,59620,59720,59750,60220,60960,15220,51490,27190,61000,61250,76119,76810,76860,27330,87260,23260,86450,86270,37290,45680,77460,77620,77710,57560,57870,27300,08310,35450,33420,33330,85190,68440,68510,68680,34240,34600,34610,85670,14250,14740,35250,24320,45140,45380,45770,45750,44630,23110,44750,18510,10220,28150,41500,46800,49490,49390,51190,51530,52260,54170,54113,57100,57180,57190,57240,57290,57330,57440,80230,80410,08150,28300,55140,54112,35680,50270,44330,68250,68570,68840,67160,88160,88310,88560,56320,56380,53360,87230,16150,87720,87500,87590,87480,54111,54150,54310,54640,54660,54750,54790,54970,88500,57450,57455,57470,57490,57500,57540,57600,57800,68240,68410,68770,79250,35310,62219,62570,27420,27510,27630,27720,27870,95770,79230,50620,35360,60210,14140,61140,61410,10310,52370,59610,59132,59216,59740,54290,57565,57850,67116,67800,67460,67300,86400,52190,80310,80610,80650,80670,80780,80850,76430,01110,01260,01160,01230,01420,01270,01851,39160,01320,01360,01800,38280,01380,01410,01710,39370,01630,01560,01100,69650,01450,01340,03160,03230,03430,03470,04150,04170,04270,04360,04410,05150,05230,05160,05320,06660,06390,06670,07100,07430,07790,07190,07200,07170,07240,07360,07380,07110,07400,07580,07470,43490,07510,07630,13001,13003,13004,13005,13006,13009,13010,13012,13013,13380,13115,13230,25120,25140,25210,25450,25320,25410,25720,25770,25113,25550,25630,26110,26450,26160,26510,07300,07610,26600,26700,26290,26130,07350,26740,26770,26790,84290,84820,26250,26800,30320,30840,38140,38430,38230,38460,38270,26210,38122,38300,38350,38119,38470,38480,38490,38620,73240,73330,73520,38540,38790,38690,38730,38710,38850,38500,38880,38112,38250,38510,38890,38970,38980,38870,38940,39130,39140,39210,01590,39240,39270,39300,39700,42190,42750,42360,42810,42780,69770,42380,42122,42510,42660,43240,42150,43140,43620,43330,43120,42700,43600,43150,43200,43210,43590,43530,43230,43260,43290,43190,43220,43350,07320,43400,43520,43130,43800,58110,58130,58660,58140,58330,58380,58430,63113,63850,63680,63000,63100,63112,63118,63119,63140,63200,63360,63530,63830,63380,63410,63780,63500,63630,63980,63690,63750,63740,42140,69590,69610,69850,69510,69670,69440,69820,69840,69860,71570,69930,71140,71170,71740,42670,71230,71300,71410,71240,71260,71390,71460,71710,71200,71800,73120,73550,73570,73600,73710,73130,73660,73140,73210,73350,73300,73870,73310,01350,73400,73440,73450,73530,73700,74130,74800,74460,74160,74350,74560,74170,74110,74260,74440,74290,74940,74000,74410,74320,74310,74190,74480,74330,74960,74650,74370,74340,74740,74970,73410,74540,74600,74200,74420,74470,74550,74890,74570,83630,84570,84380,89150,89690,89240,89260,89350,89560,07000,07310,07560,07450,07330,26260,26380,26540,26400,30130,30200,38630,42131,42420,58360,58370,71220,73480,74100,74240,74380,74930\n\n</code></pre>\n",
    "tags" : [ "java", "regex", "stack-overflow" ],
    "owner" : {
      "account_id" : 43805019,
      "reputation" : 67,
      "user_id" : 31426042,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8c56c45f6651c31f1ea9e2c636a06967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Calvarin Matthieu",
      "link" : "https://stackoverflow.com/users/31426042/calvarin-matthieu"
    },
    "is_answered" : true,
    "view_count" : 156,
    "closed_date" : 1759837531,
    "answer_count" : 2,
    "score" : 2,
    "last_activity_date" : 1757398224,
    "creation_date" : 1757065663,
    "link" : "https://stackoverflow.com/questions/79756626/java-regex-goes-stack-overflow-on-a-long-text-d4-5-d4-5",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79756734,
    "question_id" : 79756626,
    "body" : "<p>So, after much debate, it seems the best answer is this one:</p>\n<pre><code>^\\d{4,5}(?&gt;,\\d{4,5})*$\n</code></pre>\n<p>Non-backtracking group to the rescue. Thx everybody.</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 43805019,
      "reputation" : 67,
      "user_id" : 31426042,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8c56c45f6651c31f1ea9e2c636a06967?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Calvarin Matthieu",
      "link" : "https://stackoverflow.com/users/31426042/calvarin-matthieu"
    },
    "creation_date" : 1757072278,
    "last_activity_date" : 1757343963,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79759548,
    "question_id" : 79756626,
    "body" : "<pre class=\"lang-none prettyprint-override\"><code>^\\d{4,5}(?:,\\d{4,5})*$\n</code></pre>\n<p>Tested successfully in <a href=\"https://www.regexpal.com/\" rel=\"nofollow noreferrer\">Regex Tester</a></p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 19230561,
      "reputation" : 9,
      "user_id" : 14052479,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14Gj8xq7We3GbJ3zyRINV-lSSF2_Z-gPGwZWvc6IA=k-s256",
      "display_name" : "Fan Zhou",
      "link" : "https://stackoverflow.com/users/14052479/fan-zhou"
    },
    "creation_date" : 1757398224,
    "last_activity_date" : 1757398224,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140720496,
    "post_id" : 79756626,
    "body" : "Note that possessive quantifiers modify the construct that the quantifier modifies. So this <code>^\\d{4,5}+(?:,\\d{4,5})*+$</code> is really this <code>^\\d{4,5}+(?&gt;(?:,\\d{4,5}))*$</code> which can be shortened to this <code>^\\d{4,5}+(?&gt;,\\d{4,5})*$</code> and since <code>\\d{4,5}</code> is not a backtracking / stack overflow threat can be further shortened to this <code>^\\d{4,5}(?&gt;,\\d{4,5})*$</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 268704,
      "reputation" : 3643,
      "user_id" : 15577665,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/22b015407c4f216f37fb10bccb8debaf?s=256&d=identicon&r=PG",
      "display_name" : "sln",
      "link" : "https://stackoverflow.com/users/15577665/sln"
    },
    "creation_date" : 1757269098,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140720476,
    "post_id" : 79756626,
    "body" : "@CasimiretHippolyte Inside an atomic group backtracking and recursion on the stack is just like there were no atomic group at all. Therefore have to be sure no quantified construct inside will  cause problems. This is a feature.  When you say <i>^\\d{4,5}+(?&gt;<code>(?:,\\d{4,5})*</code>)$</i> is more efficient thats an error as it still recurses on the stack and will overflow it because the quantified construct is not atomic inside. <a href=\"https://regex101.com/r/DvzPo1/1\" rel=\"nofollow noreferrer\">regex101.com/r/DvzPo1/1</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 268704,
      "reputation" : 3643,
      "user_id" : 15577665,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/22b015407c4f216f37fb10bccb8debaf?s=256&d=identicon&r=PG",
      "display_name" : "sln",
      "link" : "https://stackoverflow.com/users/15577665/sln"
    },
    "creation_date" : 1757268242,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140719537,
    "post_id" : 79756626,
    "body" : "@bobblebubble: My brain (and Demerzel corroborates it) says that writing <code>^\\d{4,5}+(?:,\\d{4,5})*+$</code> is a sugar for <code>^\\d{4,5}+(?&gt;(?:,\\d{4,5})*)$</code> and is more efficient than <code>^\\d{4,5}+(?&gt;,\\d{4,5})*$</code>",
    "score" : 1,
    "owner" : {
      "account_id" : 2603307,
      "reputation" : 90034,
      "user_id" : 2255089,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Pw7ER.jpg?s=256",
      "display_name" : "Casimir et Hippolyte",
      "link" : "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"
    },
    "creation_date" : 1757200813,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140719515,
    "post_id" : 79756626,
    "body" : "This is of course nice &amp; simple @anubhava &amp; ⓐsln, I&#39;m with you... :-D",
    "score" : 1,
    "owner" : {
      "account_id" : 6426510,
      "reputation" : 18775,
      "user_id" : 5527985,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CfG3C.png?s=256",
      "display_name" : "bobble bubble",
      "link" : "https://stackoverflow.com/users/5527985/bobble-bubble"
    },
    "creation_date" : 1757198415,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140719268,
    "post_id" : 79756626,
    "body" : "Can it be concluded that atomic groups are not stack recursive ? This might be a good fyi..  Q: In java regex are atomic quantified groups not recursive on the stack ?  <code>AI Answer: Yes, in Java regex, atomic quantified groups are not recursive on the stack in the same way that standard greedy or reluctant quantifiers are. This is a key feature of their design and is precisely why they are used to prevent catastrophic backtracking and potential stack overflows</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 268704,
      "reputation" : 3643,
      "user_id" : 15577665,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/22b015407c4f216f37fb10bccb8debaf?s=256&d=identicon&r=PG",
      "display_name" : "sln",
      "link" : "https://stackoverflow.com/users/15577665/sln"
    },
    "creation_date" : 1757181140,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140717796,
    "post_id" : 79756626,
    "body" : "You should avoid using <i>possesive</i> around groups. Its really meant for simple singular non-grouping constructs. Instead, just use an atomic group here because thats all you need. <code>^\\d{4,5}(?&gt;,\\d{4,5})*$</code> In my opinion, possesive quantifiers are as useless as it gets. <a href=\"https://regex101.com/r/inQo3J/1\" rel=\"nofollow noreferrer\">regex101.com/r/inQo3J/1</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 268704,
      "reputation" : 3643,
      "user_id" : 15577665,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/22b015407c4f216f37fb10bccb8debaf?s=256&d=identicon&r=PG",
      "display_name" : "sln",
      "link" : "https://stackoverflow.com/users/15577665/sln"
    },
    "creation_date" : 1757096791,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140716813,
    "post_id" : 79756626,
    "body" : "Why do you have  a <code>+</code> after <code>\\d{4,5}</code>? You should just use: <code>^\\\\d{4,5}(?&gt;,\\\\d{4,5})*$</code>",
    "score" : 3,
    "owner" : {
      "account_id" : 262968,
      "reputation" : 790397,
      "user_id" : 548225,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://i.sstatic.net/iVKcbRoj.jpg?s=256",
      "display_name" : "anubhava",
      "link" : "https://stackoverflow.com/users/548225/anubhava"
    },
    "creation_date" : 1757067144,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140716801,
    "post_id" : 79756626,
    "body" : "@HaoWu ah, thanks, I didn&#39;t realise java&#39;s flavour treats <code>X{n,m}+</code> specially. Deleting my comments then.",
    "score" : 0,
    "owner" : {
      "account_id" : 6553924,
      "reputation" : 35399,
      "user_id" : 5067311,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CGxpT.png?s=256",
      "display_name" : "Andras Deak -- Слава Україні",
      "link" : "https://stackoverflow.com/users/5067311/andras-deak-%d0%a1%d0%bb%d0%b0%d0%b2%d0%b0-%d0%a3%d0%ba%d1%80%d0%b0%d1%97%d0%bd%d1%96"
    },
    "creation_date" : 1757066945,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140716797,
    "post_id" : 79756626,
    "body" : "@AndrasDeak--СлаваУкраїні Because after hitting <code>\\d{5}</code> you don&#39;t want it ever backtract to <code>\\d{4}</code>, so it&#39;s more optimized. Also <a href=\"https://regex101.com/r/rrFuKG/1\" rel=\"nofollow noreferrer\"><code>^\\d{4,5}(,\\d{4,5})*$</code></a> doesn&#39;t work.",
    "score" : 1,
    "owner" : {
      "account_id" : 14243549,
      "reputation" : 21553,
      "user_id" : 10289265,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-OkjkbQ2KiK4/AAAAAAAAAAI/AAAAAAAAAFA/idfc_x3sn3o/s256-rj/photo.jpg",
      "display_name" : "Hao Wu",
      "link" : "https://stackoverflow.com/users/10289265/hao-wu"
    },
    "creation_date" : 1757066801,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140716784,
    "post_id" : 79756626,
    "body" : "Try to make the group possessive as well: <a href=\"https://regex101.com/r/ztmZWP/1\" rel=\"nofollow noreferrer\"><code>^\\d{4,5}+(,\\d{4,5}+)*+$</code></a>",
    "score" : 2,
    "owner" : {
      "account_id" : 14243549,
      "reputation" : 21553,
      "user_id" : 10289265,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-OkjkbQ2KiK4/AAAAAAAAAAI/AAAAAAAAAFA/idfc_x3sn3o/s256-rj/photo.jpg",
      "display_name" : "Hao Wu",
      "link" : "https://stackoverflow.com/users/10289265/hao-wu"
    },
    "creation_date" : 1757066428,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79756734" : [ {
      "comment_id" : 140718883,
      "post_id" : 79756734,
      "body" : "Note that you can also replace the useless capture group with a non capturing one and remove the useless possessive quantifier inside it, since now the group is itself repeated with a possessive quantifier. In short, you can write it like that: <code>^\\d{4,5}+(?:,\\d{4,5})*+$</code>",
      "score" : 0,
      "owner" : {
        "account_id" : 2603307,
        "reputation" : 90034,
        "user_id" : 2255089,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/Pw7ER.jpg?s=256",
        "display_name" : "Casimir et Hippolyte",
        "link" : "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"
      },
      "creation_date" : 1757161575,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140718653,
      "post_id" : 79756734,
      "body" : "@ChrisMaurer &quot;<i>Your example allows 4-digit, 5-digit, 8-digit, 9-digit,, 10-digit, 12-digit</i>&quot; what makes you think so? Are you familiar with possessive quantifiers? If not I strongly recommend visiting <a href=\"https://www.regular-expressions.info/possessive.html\" rel=\"nofollow noreferrer\">regular-expressions.info/possessive.html</a>",
      "score" : 0,
      "owner" : {
        "account_id" : 1485367,
        "reputation" : 124565,
        "user_id" : 1393766,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/h0FSp.png?s=256",
        "display_name" : "Pshemo",
        "link" : "https://stackoverflow.com/users/1393766/pshemo"
      },
      "creation_date" : 1757148343,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140717603,
      "post_id" : 79756734,
      "body" : "Other RegExp flavors work OK with this change though.",
      "score" : 0,
      "owner" : {
        "account_id" : 7113913,
        "reputation" : 2932,
        "user_id" : 5440883,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/a4d5e6d96b48c77ce8d5bd836fa15680?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Chris Maurer",
        "link" : "https://stackoverflow.com/users/5440883/chris-maurer"
      },
      "creation_date" : 1757089668,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140717593,
      "post_id" : 79756734,
      "body" : "I don&#39;t understand this answer.  Your example allows 4-digit, 5-digit, 8-digit, 9-digit,, 10-digit, 12-digit  numbers but not 6-digit, 7-digit, or 11-digit numbers.  Wouldn&#39;t this be simpler if you did <code>^\\d{4,5}(,|$)$</code>?  Tried it on  regex101 &amp; still gets engine error.",
      "score" : 0,
      "owner" : {
        "account_id" : 7113913,
        "reputation" : 2932,
        "user_id" : 5440883,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/a4d5e6d96b48c77ce8d5bd836fa15680?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Chris Maurer",
        "link" : "https://stackoverflow.com/users/5440883/chris-maurer"
      },
      "creation_date" : 1757089135,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}