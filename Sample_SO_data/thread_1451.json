{
  "question" : {
    "question_id" : 79704766,
    "title" : "How to list dependencies into a file during &#39;mvn clean install&#39;",
    "body" : "<p>I have <code>plugin.yml</code> file in <code>resources</code> folder with placeholders like <code>${project.name}</code>. In <code>pom.xml</code> I have following section</p>\n<pre><code>&lt;resource&gt;\n  &lt;directory&gt;src/main/resources&lt;/directory&gt;\n  &lt;filtering&gt;true&lt;/filtering&gt;\n&lt;/resource&gt;\n</code></pre>\n<p>which allows Maven to replace these placeholders.<br />\nHow can I <strong>list dependencies into the same file</strong>, so that each dependency like</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n  &lt;version&gt;1.3.2&lt;/version&gt;\n  &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>turns into an element in a list:\n<code>libraries: [javax.annotation:javax.annotation-api:1.3.2, other:dependency:1.0]</code>?<br />\nHow can I also <strong>filter out specific dependencies</strong> from being included in this list?</p>\n",
    "tags" : [ "java", "maven" ],
    "owner" : {
      "account_id" : 28195297,
      "reputation" : 170,
      "user_id" : 21550046,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxYteMBojPQfR3HvmDzoOgwQhCkZxrZhTAXh2MXQ=k-s256",
      "display_name" : "Nathalie Kitty",
      "link" : "https://stackoverflow.com/users/21550046/nathalie-kitty"
    },
    "is_answered" : true,
    "view_count" : 108,
    "answer_count" : 3,
    "score" : 0,
    "last_activity_date" : 1755006929,
    "creation_date" : 1752753523,
    "link" : "https://stackoverflow.com/questions/79704766/how-to-list-dependencies-into-a-file-during-mvn-clean-install",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79704840,
    "question_id" : 79704766,
    "body" : "<p>The <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/collect-mojo.html#dependency-collect\" rel=\"nofollow noreferrer\">dependency:collect</a> goal can be configured to get the output you want to have. You can invoke that goal during your build and capture the output via the <code>outputFile</code> parameter into a file.</p>\n<p>Then you can load that file content as a property to your build (I'm a bit stuck here as I haven't found an easy way to achieve this after a few search engine inputs; maybe just use some shell script to convert that file to a properties file and use <a href=\"https://www.mojohaus.org/properties-maven-plugin/read-project-properties-mojo.html\" rel=\"nofollow noreferrer\">properties:read-project-properties</a> instead) and then it will be picked up in mavens resource filtering.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1580843,
      "reputation" : 13706,
      "user_id" : 1466267,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/c47d1f7544a8c4a1bb7a41d511f53604?s=256&d=identicon&r=PG",
      "display_name" : "SpaceTrucker",
      "link" : "https://stackoverflow.com/users/1466267/spacetrucker"
    },
    "creation_date" : 1752756403,
    "last_activity_date" : 1752756403,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79724847,
    "question_id" : 79704766,
    "body" : "<p>Thanks to answers by <a href=\"https://stackoverflow.com/a/79704840/21550046\">SpaceTrucker</a> and <a href=\"https://stackoverflow.com/a/79705147/21550046\">Gerold Broser</a> I managed to make this work!<br />\nUsing <code>maven-dependency-plugin:collect</code> I put all the libraries into a text file, then in <code>process-resources</code> phase a script formats the file contents how I want and injects them into its destination file in <code>target</code> folder.</p>\n<p>plugins in <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;collect&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;collect&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;outputFile&gt;scripts/libraries.txt&lt;/outputFile&gt;\n                &lt;outputScope&gt;false&lt;/outputScope&gt;\n                &lt;outputEncoding&gt;UTF-8&lt;/outputEncoding&gt;\n                &lt;excludeArtifactIds&gt;purpur-api, paper-api, spigot-api&lt;/excludeArtifactIds&gt;\n                &lt;excludeTransitive&gt;true&lt;/excludeTransitive&gt;\n                &lt;excludeScope&gt;runtime&lt;/excludeScope&gt;&lt;!-- excludes runtime+compile --&gt;\n                &lt;silent&gt;true&lt;/silent&gt;\n                &lt;sort&gt;true&lt;/sort&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;&lt;!-- maven-dependency-plugin @ generate-sources --&gt;\n&lt;plugin&gt;\n    &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n    &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n    &lt;version&gt;3.5.1&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;exec-script&lt;/id&gt;\n            &lt;phase&gt;process-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;exec&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;scripts/injectLibrariesIntoResources-v2.6.bat&lt;/executable&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;&lt;!-- exec-maven-plugin @ process-resources --&gt;\n</code></pre>\n<p>script in <code>scripts/injectLibrariesIntoResources-v2.6.bat</code>:</p>\n<pre><code>@echo off\ncd scripts\n\nset librariesFile=&quot;libraries.txt&quot;\nset targetFile=&quot;../target/classes/plugin.yml&quot;\n\npowershell -command &quot;(Get-Content '%librariesFile%') | ? {$_.trim() -ne ''} | Set-Content '%librariesFile%'&quot;\npowershell -command &quot;(Get-Content '%librariesFile%') -replace 'The following files have been resolved:', '' | Set-Content '%librariesFile%'&quot;\npowershell -command &quot;(Get-Content '%librariesFile%') -replace ':jar|.*$', '' | Set-Content '%librariesFile%'&quot;\npowershell -command &quot;(Get-Content '%librariesFile%') -replace '   ', '- ' | Set-Content '%librariesFile%'&quot;\n\npowershell -command &quot;(Get-Content '%targetFile%' -Raw) -replace ' \\[\\] #libraries', (Get-Content '%librariesFile%' -Raw) | Set-Content '%targetFile%'&quot;\n</code></pre>\n<p>which changes line in <code>plugin.yml</code> from</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>libraries: [] #libraries\n</code></pre>\n<p>to</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>libraries:\n- com.google.code.gson:gson:2.13.1\n- javax.annotation:javax.annotation-api:1.3.2\n- org.apache.commons:commons-lang3:3.18.0\n</code></pre>\n<p>Why is the script in bat but uses powershell? I wanted this setup to be easily portable! Executing powershell script files requires changing execution policy in Windows.</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 28195297,
      "reputation" : 170,
      "user_id" : 21550046,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxYteMBojPQfR3HvmDzoOgwQhCkZxrZhTAXh2MXQ=k-s256",
      "display_name" : "Nathalie Kitty",
      "link" : "https://stackoverflow.com/users/21550046/nathalie-kitty"
    },
    "creation_date" : 1754306680,
    "last_activity_date" : 1755006929,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79705147,
    "question_id" : 79704766,
    "body" : "<p>Adding to <a href=\"https://stackoverflow.com/a/79704840/1744774\">SpaceTrucker's answer</a> <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/collect-mojo.html#optional-parameters\" rel=\"nofollow noreferrer\"><code>dependency:collect</code></a> has also parameters <code>&lt;excludeArtifactIds&gt;</code>, <code>&lt;excludeGroupIds&gt;</code> and more.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1937747,
      "reputation" : 15080,
      "user_id" : 1744774,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
      "display_name" : "Gerold Broser",
      "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
    },
    "creation_date" : 1752770452,
    "last_activity_date" : 1752770452,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140598412,
    "post_id" : 79704766,
    "body" : "There is a way to download all dependencies to a directory. An ANT script can then list the files and prepare an  output of arbitrary fomat.",
    "score" : 0,
    "owner" : {
      "account_id" : 43022,
      "reputation" : 24626,
      "user_id" : 125562,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
      "display_name" : "Basilevs",
      "link" : "https://stackoverflow.com/users/125562/basilevs"
    },
    "creation_date" : 1752789331,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79724847" : [ {
      "comment_id" : 140660336,
      "post_id" : 79724847,
      "body" : "It would be even more portable with the <a href=\"https://github.com/groovy/GMavenPlus\" rel=\"nofollow noreferrer\">GMavenPlus plugin</a> which allows you to <a href=\"https://github.com/groovy/GMavenPlus/wiki/Examples#execute-scripts\" rel=\"nofollow noreferrer\">place Groovy code directly in your POM</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : 1937747,
        "reputation" : 15080,
        "user_id" : 1744774,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
        "display_name" : "Gerold Broser",
        "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
      },
      "creation_date" : 1755007233,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140640571,
      "post_id" : 79724847,
      "body" : "Java ia a scripting language these days too.",
      "score" : 0,
      "owner" : {
        "account_id" : 43022,
        "reputation" : 24626,
        "user_id" : 125562,
        "user_type" : "registered",
        "accept_rate" : 64,
        "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
        "display_name" : "Basilevs",
        "link" : "https://stackoverflow.com/users/125562/basilevs"
      },
      "creation_date" : 1754308281,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}