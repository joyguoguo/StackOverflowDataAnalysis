{
  "question" : {
    "question_id" : 79747523,
    "title" : "Getting authentication Even After Permitting the request in spring boot",
    "body" : "<p>I have connected my spring boot project with my database and created a component of UserDetailsService that takes my user data and compares it with the given data and permits you to the end point. I have Created a endpoint named /dashboard where I want to return a jsp view kept in the webapp folder with the correct name. The problem is I am unable to access it without authentication even if I permitted it.</p>\n<p>This is my Controller Class</p>\n<pre><code>@Controller\npublic class PublicController {\n    @GetMapping(&quot;/dashboard&quot;)\n    public String dash(){\n        return &quot;dashboard.jsp&quot;;\n    }\n}\n\n</code></pre>\n<p>This is the Config Class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            .csrf(AbstractHttpConfigurer::disable)\n            .authorizeHttpRequests(auth -&gt; auth\n                // allow public endpoints\n                .requestMatchers(&quot;/dashboard&quot;).permitAll()\n\n                // everything else needs authentication\n                .anyRequest().authenticated()\n            )\n            // enable login form\n            .formLogin(Customizer.withDefaults())\n            .httpBasic(httpBasic -&gt; httpBasic.disable());\n\n        return http.build();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n</code></pre>\n<p>This Is UserDetailsService class</p>\n<pre><code>@Component\npublic class UserDetailsService implements org.springframework.security.core.userdetails.UserDetailsService {\n    @Autowired\n    private UserService userService;\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user=userService.getUserByUserName(username);\n        if(user!=null){\n            return org.springframework.security.core.userdetails.User.builder()\n                    .username(user.getUserName())\n                    .password(user.getPassword())\n                    .roles(String.valueOf(user.getRoles()))\n                    .build();\n        }\n        throw new UsernameNotFoundException(&quot;User Name Not found&quot;);\n}\n</code></pre>\n<p>I didn't create any UserManager. The authentication is working fine but showing login even if I have permitted the &quot;/dashboard&quot;</p>\n<p>I tried localhost:8080/dashboard every time when I load the application 1st time it prompts me to log in. All next end point hits are unauthenticated</p>\n<p>How I can unauthenticate the permitted end points</p>\n",
    "tags" : [ "java", "spring-boot", "maven", "authentication" ],
    "owner" : {
      "account_id" : 40828097,
      "reputation" : 3,
      "user_id" : 29979219,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0bRLuvGC.jpg?s=256",
      "display_name" : "Debasis Rana",
      "link" : "https://stackoverflow.com/users/29979219/debasis-rana"
    },
    "is_answered" : true,
    "view_count" : 94,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1756551577,
    "creation_date" : 1756268135,
    "link" : "https://stackoverflow.com/questions/79747523/getting-authentication-even-after-permitting-the-request-in-spring-boot",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79751088,
    "question_id" : 79747523,
    "body" : "<p>Even if you permit <code>&quot;/dashboard&quot;</code>, Spring Security will still protect requests that go through <em>error</em> or <em>forward</em> dispatches (common when using JSPs). To fix this, you need to explicitly allow those dispatch types as well, and make sure your rules are in the right order:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http\n        .csrf(AbstractHttpConfigurer::disable)\n        .authorizeHttpRequests(auth -&gt; auth\n            .dispatcherTypeMatchers(DispatcherType.ERROR, DispatcherType.FORWARD).permitAll()\n            .requestMatchers(&quot;/dashboard&quot;).permitAll()\n            .anyRequest().authenticated()\n        )\n        .formLogin(Customizer.withDefaults());\n    return http.build();\n}\n</code></pre>\n<p>Also, donâ€™t forget to permit your static resources (<code>/css/**</code>, <code>/js/**</code>, etc.) if your JSP needs them. This should stop Spring Security from asking for authentication on the dashboard page.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 23558761,
      "reputation" : 16,
      "user_id" : 17600391,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJxD_FCLL-Riifc2x8OO2-b5-_We7D_NM83P1BXO=k-s256",
      "display_name" : "Jijo Antony",
      "link" : "https://stackoverflow.com/users/17600391/jijo-antony"
    },
    "creation_date" : 1756551577,
    "last_activity_date" : 1756551577,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}