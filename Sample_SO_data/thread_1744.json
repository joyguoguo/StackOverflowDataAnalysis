{
  "question" : {
    "question_id" : 79678891,
    "title" : "How to Determine Public Transport Vehicle Type (Tram, Trolleybus, Bus) Using Android Location Data?",
    "body" : "<p>I'm developing an Android app that tracks user movement using location services. I need to determine the specific type of public transport vehicle the user is traveling in — namely, a tram, trolleybus, or bus.</p>\n<p>Currently, I'm collecting the following data from the device:</p>\n<p>Route length</p>\n<p>Average speed</p>\n<p>Travel time</p>\n<p>I initially tried using Google’s Activity Recognition API, but it only classifies the movement as IN_VEHICLE or IN_CAR, which doesn’t help distinguish between different public transport modes.</p>\n<p>What are some alternative approaches or tools to determine the type of public transport vehicle based only on the device's location and movement data?</p>\n<p>Are there any established techniques, APIs, or ML models for this?</p>\n",
    "tags" : [ "java", "android", "android-location", "activity-recognition" ],
    "owner" : {
      "account_id" : 37607895,
      "reputation" : 13,
      "user_id" : 28334293,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fca2d615196b373019a39de67cb73d1e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Vsevolod",
      "link" : "https://stackoverflow.com/users/28334293/vsevolod"
    },
    "is_answered" : true,
    "view_count" : 86,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751196719,
    "creation_date" : 1750847772,
    "link" : "https://stackoverflow.com/questions/79678891/how-to-determine-public-transport-vehicle-type-tram-trolleybus-bus-using-and",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79681972,
    "question_id" : 79678891,
    "body" : "<p>Your initial approach of using basic metrics like route length and average speed is a good starting point, but the values can overlap significantly for all transport vehicles depending on traffic, time of day, route specifics. I think the best solution may involve combining multiple methods:</p>\n<h3>1. Domain models and movement pattern analysis</h3>\n<p>To differentiate between a tram, trolleybus, and bus it necessary to take into account specific patterns of movement and route characteristics.</p>\n<ul>\n<li><p>Trams always follow dedicated tracks, so their movement can be quite different from buses or trolleybuses. They might have slower speeds and specific strict stop patterns as they follow a set path.</p>\n</li>\n<li><p>Trolleybuses can be similar to buses but they use power lines. So typically they have more predictable route patterns. Might have slight delays in their movement due to stop-and-go traffic.</p>\n</li>\n<li><p>Bus routes these're usually more flexible and can change their path. Especially based on non-standard cases, such as changing the route due to accidents, construction or traffic jam. Buses might have more flexible stop locations and schedules.</p>\n</li>\n</ul>\n<p>Trams can't deviate from their rails and always have very low deviation from their known track. Trolleybus can't much deviate from their fixed electrical routes, but sometimes they can change road lanes. And a reasonable buffer and deviation of route shape for buses is most widest because they're more flexible. Their specific route shape is able to be re-routed sometimes. You can use this to calculate the predictable conformance scoring and certain threshold of percentage match.</p>\n<h3>2. Public transport APIs</h3>\n<p><a href=\"https://developers.google.com/maps/apis-by-platform\" rel=\"nofollow noreferrer\">Google Maps Directions API</a> and other public transport APIs like <a href=\"https://docs.external.citymapper.com/api\" rel=\"nofollow noreferrer\">Citymapper API</a> for example can be used to access route information, schedules, real-time public transport and GPS data.</p>\n<h3>3. Open data</h3>\n<ul>\n<li><p>Find open data sets from transport authorities related to public transport, including schedules and routes. You can incorporate this data to help identify the transport type based on real-time location information.</p>\n</li>\n<li><p>Use <a href=\"https://www.openstreetmap.org/export\" rel=\"nofollow noreferrer\">OpenStreetMap</a>, a collaborative open-source map of the world with excellent physical infrastructure information.</p>\n</li>\n</ul>\n<h3>4. Machine learning</h3>\n<p>Build a ML model to classify the transport type:</p>\n<ol>\n<li><p><strong>Feature engineering</strong>: based on the data you collected already you can extract additional features that could help the model differentiate between transport types, for example frequency of stops, duration of travel between stops, consistency of speed and others. Maybe location and alignment with known tram, bus or trolleybus routes.</p>\n</li>\n<li><p><strong>Training data</strong>: you'd need labeled data to train the model. You can either collect this data manually or use available public datasets for bus, tram, and trolleybus routes to annotate the movement data.</p>\n</li>\n<li><p><strong>Classification model</strong>: you can use a variety of ML models such as:</p>\n</li>\n</ol>\n<ul>\n<li><p><strong>Decision trees or random forests</strong>: To classify based on route characteristics, speed, and travel patterns.</p>\n</li>\n<li><p><strong>Neural networks</strong>: if you want to work with a larger, more complex dataset, a simple neural network might help, especially if the routes are complex.</p>\n</li>\n<li><p><strong>Support Vector Machines</strong>: often used for classification tasks where the data is linearly separable and could be effective for this problem with the right features.</p>\n</li>\n</ul>\n<h3><strong>5. Hybrid approach of combination of multiple methods</strong></h3>\n<ul>\n<li><p>Track the user’s movement and determine their speed, location, and route</p>\n</li>\n<li><p>Use geofencing to identify the likely mode of transport based on proximity to bus, trolleybus, or tram routes</p>\n</li>\n<li><p>Compare the user’s movement patterns with expected transport types based on speed, stops, and consistency</p>\n</li>\n<li><p>For ambiguous cases if the data is uncertain, information is partially missing or the geospatial analysis is inconclusive pass it to ML model trained on labeled transport data to classify the transport type</p>\n</li>\n<li><p>Use public transport APIs to cross-check the user’s travel route and speed with live transport data</p>\n</li>\n</ul>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 1207862,
      "reputation" : 4210,
      "user_id" : 1177031,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/79eaae35b3331731ecfb9e360bb8380b?s=256&d=identicon&r=PG",
      "display_name" : "kapandron",
      "link" : "https://stackoverflow.com/users/1177031/kapandron"
    },
    "creation_date" : 1751028307,
    "last_activity_date" : 1751196719,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140540884,
    "post_id" : 79678891,
    "body" : "Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1750848661,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}