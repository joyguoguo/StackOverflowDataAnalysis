{
  "question" : {
    "question_id" : 79573083,
    "title" : "Show validation errors on load and keep OK button disabled until valid input",
    "body" : "\n<p>I'm working on a JavaFX + Spring Boot application using the MVVM pattern. We use ControlsFX ValidationSupport to validate fields in a login form.\nOur goal is to:</p>\n<ul>\n<li><p>Show red error icons (&quot;decorations&quot;) immediately when the page loads, if fields are empty or invalid</p>\n</li>\n<li><p>Keep the OK button disabled until all validation rules pass</p>\n</li>\n</ul>\n<p>Example:</p>\n<p>We have a dialog to create a new user with these fields:</p>\n<ul>\n<li>User name (TextField)</li>\n<li>Password (PasswordField)</li>\n<li>Repeat password (PasswordField)</li>\n</ul>\n<p>We register Validators like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class ValidationHelper {\n\n    public void registerUserRegistrationValidations(ValidationSupport validationSupport, TextField userName,\n                                                    PasswordField password, PasswordField repeatPassword) {\n        registerFocusLostValidation(userName, getEnteredUserNameDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(password, getEnteredPasswdDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(repeatPassword, getEnteredPasswdDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(repeatPassword, getEnteredPasswordsEqualValidator(repeatPassword), validationSupport);\n    }\n\n    private Validator&lt;Object&gt; getEnteredUserNameDataLengthValidator() {\n        return Validator.createPredicateValidator(\n                userName -&gt; userName != null &amp;&amp; ((String) userName).length() &gt; 2,\n                &quot;user name too short&quot;);\n    }\n\n    private Validator&lt;Object&gt; getEnteredPasswdDataLengthValidator() {\n        return Validator.createPredicateValidator(\n                pin -&gt; pin != null &amp;&amp; ((String) pin).length() &gt; 2,\n                &quot;Password too short&quot;);\n    }\n\n    private Validator&lt;Object&gt; getEnteredPasswordsEqualValidator(PasswordField passwdField) {\n        return Validator.createPredicateValidator(\n                password -&gt; password != null &amp;&amp; password.equals(passwdField.getText()),\n                &quot;Passwords do not match&quot;);\n    }\n\n    private &lt;T&gt; void registerFocusLostValidation(Control control, Validator&lt;T&gt; validator, ValidationSupport validationSupport) {\n        validationSupport.registerValidator(control, false, validator);\n    }\n}\n</code></pre>\n<p>We also do this to bind a global flag:</p>\n<pre class=\"lang-java prettyprint-override\"><code>BooleanBinding isInvalid = Bindings.createBooleanBinding(\n    () -&gt; !validationSupport.getValidationResult().getErrors().isEmpty(),\n    validationSupport.validationResultProperty()\n);\nvalidationState.formInvalidProperty().bind(isInvalid);\n</code></pre>\n<p>Then in the footer controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>okButton.disableProperty().bind(validationState.formInvalidProperty());\n</code></pre>\n<p><strong>The Problem</strong></p>\n<p>This mostly works, but only after the user starts typing.</p>\n<p>Initially:</p>\n<ul>\n<li>The page loads without any red validation circles</li>\n<li>The OK button becomes active too early (after typing the first password)</li>\n<li>Validation for repeat password is only triggered after focus loss</li>\n</ul>\n<p>We want the validation to appear as soon as the form is displayed, without user interaction.\nAttempts</p>\n<ul>\n<li>We tried Platform.runLater(validationSupport::revalidate)</li>\n<li>We tried setting required = true in registerValidator</li>\n<li>We also tried calling validationSupport.getValidationResult().getErrors() manually\nBut the initial state is always seen as &quot;valid&quot;.</li>\n</ul>\n<p>Any ideas on how to make the validation trigger immediately and ensure the OK button behaves correctly from the start?</p>\n<p>Tested with ControlsFX version 11.1.1 (or whatever you're using) and JavaFX 22.</p>\n<p><strong>Minimal Reproducible Example</strong></p>\n<p><strong>ControlsFxApp.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package controlsFx;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.context.ConfigurableApplicationContext;\n\nimport java.io.IOException;\nimport java.net.URL;\n\n@SpringBootApplication\npublic class ControlsFxApp extends Application {\n    private static final String RESOURCE = &quot;sample.fxml&quot;;\n    private ConfigurableApplicationContext springContext;\n\n    @Override\n    public void init() {\n        springContext = new SpringApplicationBuilder(ControlsFxApp.class).run();\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Parent root = load(RESOURCE);\n        Scene scene = new Scene(root);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public Parent load(String fxmlPath) throws IOException {\n        URL location = getClass().getResource(fxmlPath);\n        FXMLLoader fxmlLoader = new FXMLLoader(location);\n        fxmlLoader.setControllerFactory(springContext::getBean);\n        return fxmlLoader.load();\n    }\n}\n</code></pre>\n<p><strong>FooterController.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package controlsFx;\n\nimport javafx.fxml.FXML;\nimport javafx.scene.control.Button;\nimport org.springframework.stereotype.Controller;\n\n@Controller\npublic class FooterController {\n    private final ValidationState validationState;\n    public Button register;\n\n    public FooterController(ValidationState validationState) {\n        this.validationState = validationState;\n    }\n\n    @FXML\n    private void initialize() {\n        register.setOnAction(event -&gt; {\n            System.out.println(&quot;Validation requested for the current step...&quot;);\n        });\n        register.disableProperty().bind(validationState.formInvalidProperty());\n    }\n}\n</code></pre>\n<p><strong>RegistrationController.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package controlsFx;\n\nimport javafx.application.Platform;\nimport javafx.beans.binding.Bindings;\nimport javafx.beans.binding.BooleanBinding;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.PasswordField;\nimport javafx.scene.control.TextField;\nimport org.controlsfx.validation.ValidationSupport;\nimport org.controlsfx.validation.decoration.GraphicValidationDecoration;\nimport org.springframework.stereotype.Controller;\n\n@Controller\npublic class RegistrationController {\n    private final ValidationHelper validationHelper;\n    private final ValidationSupport validationSupport = new ValidationSupport();\n    private final ValidationState validationState;\n    public TextField userName;\n    public PasswordField password;\n    public PasswordField repeatPassword;\n\n    public RegistrationController(ValidationHelper validationHelper, ValidationState validationState) {\n        this.validationHelper = validationHelper;\n        this.validationState = validationState;\n    }\n\n    @FXML\n    public void initialize() {\n        validationSupport.setValidationDecorator(new GraphicValidationDecoration());\n        validationHelper.registerUserRegistrationValidations(validationSupport, userName, password, repeatPassword);\n        Platform.runLater(() -&gt; {\n            validationSupport.revalidate();\n\n            BooleanBinding isInvalid = Bindings.createBooleanBinding(\n                    () -&gt; !validationSupport.getValidationResult().getErrors().isEmpty(),\n                    validationSupport.validationResultProperty()\n            );\n            validationState.formInvalidProperty().bind(isInvalid);\n        });\n    }\n}\n</code></pre>\n<p><strong>ValidationHelper.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package controlsFx;\n\nimport javafx.scene.control.Control;\nimport javafx.scene.control.PasswordField;\nimport javafx.scene.control.TextField;\nimport org.controlsfx.validation.ValidationSupport;\nimport org.controlsfx.validation.Validator;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class ValidationHelper {\n\n    public void registerUserRegistrationValidations(ValidationSupport validationSupport, TextField userName,\n                                                    PasswordField password, PasswordField repeatPassword) {\n        registerFocusLostValidation(userName, getEnteredUserNameDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(password, getEnteredPasswdDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(repeatPassword, getEnteredPasswdDataLengthValidator(), validationSupport);\n        registerFocusLostValidation(repeatPassword, getEnteredPasswordsEqualValidator(repeatPassword), validationSupport);\n    }\n\n    private Validator&lt;Object&gt; getEnteredUserNameDataLengthValidator() {\n        return Validator.createPredicateValidator(\n                userName -&gt; userName != null &amp;&amp; ((String) userName).length() &gt; 2,\n                &quot;user name too short&quot;);\n    }\n\n    private Validator&lt;Object&gt; getEnteredPasswdDataLengthValidator() {\n        return Validator.createPredicateValidator(\n                pin -&gt; pin != null &amp;&amp; ((String) pin).length() &gt; 2,\n                &quot;Password too short&quot;);\n    }\n\n    private Validator&lt;Object&gt; getEnteredPasswordsEqualValidator(PasswordField passwdField) {\n        return Validator.createPredicateValidator(\n                password -&gt; password != null &amp;&amp; password.equals(passwdField.getText()),\n                &quot;Passwords do not match&quot;);\n    }\n\n    private &lt;T&gt; void registerFocusLostValidation(Control control, Validator&lt;T&gt; validator, ValidationSupport validationSupport) {\n        validationSupport.registerValidator(control, false, validator);\n    }\n}\n</code></pre>\n<p><strong>ValidationState.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package controlsFx;\n\nimport javafx.beans.property.BooleanProperty;\nimport javafx.beans.property.SimpleBooleanProperty;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class ValidationState {\n    private final BooleanProperty formInvalid = new SimpleBooleanProperty(true);\n\n    public BooleanProperty formInvalidProperty() {\n        return formInvalid;\n    }\n}\n</code></pre>\n<p><strong>center.fxml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n&lt;AnchorPane xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            xmlns=&quot;http://javafx.com/javafx&quot;\n            fx:controller=&quot;controlsFx.RegistrationController&quot;\n            prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot;&gt;\n    &lt;VBox AnchorPane.bottomAnchor=&quot;30&quot; AnchorPane.leftAnchor=&quot;30&quot; AnchorPane.rightAnchor=&quot;30&quot;\n          AnchorPane.topAnchor=&quot;30&quot;&gt;\n        &lt;Label&gt;User Name:&lt;/Label&gt;\n        &lt;TextField fx:id=&quot;userName&quot; id=&quot;userName&quot;/&gt;\n        &lt;Label&gt;Password:&lt;/Label&gt;\n        &lt;PasswordField fx:id=&quot;password&quot; id=&quot;password&quot;/&gt;\n        &lt;Label&gt;Repeat Password:&lt;/Label&gt;\n        &lt;PasswordField fx:id=&quot;repeatPassword&quot; id=&quot;password&quot;/&gt;\n    &lt;/VBox&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p><strong>footer.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;AnchorPane xmlns:fx=&quot;http://javafx.com/fxml&quot;\n            xmlns=&quot;http://javafx.com/javafx&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;600.0&quot;\n            fx:controller=&quot;controlsFx.FooterController&quot;&gt;\n    &lt;Button fx:id=&quot;register&quot; layoutX=&quot;33.0&quot; layoutY=&quot;187.0&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;534.0&quot; text=&quot;Register&quot;/&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p><strong>sample.fxml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.geometry.Insets?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.BorderPane?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n&lt;BorderPane xmlns:fx=&quot;http://javafx.com/fxml&quot; xmlns=&quot;http://javafx.com/javafx&quot; prefWidth=&quot;200&quot; prefHeight=&quot;200&quot;\n            fx:id=&quot;borderPaneId&quot;&gt;\n    &lt;top&gt;\n        &lt;AnchorPane BorderPane.alignment=&quot;CENTER&quot;&gt;\n            &lt;Label text=&quot;Registration&quot;&gt;\n                &lt;font&gt;\n                    &lt;Font size=&quot;24.0&quot;/&gt;\n                &lt;/font&gt;\n            &lt;/Label&gt;\n            &lt;BorderPane.margin&gt;\n                &lt;Insets/&gt;\n            &lt;/BorderPane.margin&gt;\n        &lt;/AnchorPane&gt;\n    &lt;/top&gt;\n    &lt;center&gt;\n        &lt;fx:include source=&quot;center.fxml&quot;/&gt;\n    &lt;/center&gt;\n    &lt;bottom&gt;\n        &lt;fx:include source=&quot;footer.fxml&quot;/&gt;\n    &lt;/bottom&gt;\n&lt;/BorderPane&gt;\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;controlsFx&lt;/groupId&gt;\n    &lt;artifactId&gt;validationdemo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;javafx.version&gt;22&lt;/javafx.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;\n            &lt;version&gt;${javafx.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.controlsfx&lt;/groupId&gt;\n            &lt;artifactId&gt;controlsfx&lt;/artifactId&gt;\n            &lt;version&gt;11.1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n",
    "tags" : [ "java", "validation", "javafx", "mvvm", "controlsfx" ],
    "owner" : {
      "account_id" : 18686983,
      "reputation" : 357,
      "user_id" : 13686027,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/m0vLl.png?s=256",
      "display_name" : "Billie",
      "link" : "https://stackoverflow.com/users/13686027/billie"
    },
    "is_answered" : false,
    "view_count" : 272,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1745478301,
    "creation_date" : 1744631576,
    "link" : "https://stackoverflow.com/questions/79573083/show-validation-errors-on-load-and-keep-ok-button-disabled-until-valid-input",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}