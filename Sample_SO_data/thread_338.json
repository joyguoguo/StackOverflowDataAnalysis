{
  "question" : {
    "question_id" : 79809363,
    "title" : "Can Envers audit an @Embeddable that contains a @OneToMany relationship?",
    "body" : "<p>I'm using Hibernate Envers and would like to audit changes to a structure like the following:</p>\n<pre><code>@Entity\n@Audited\npublic class Order {\n\n    @Id\n    private Long id;\n\n    @Embedded\n    private OrderSteps steps;\n}\n\n@Embeddable\npublic class OrderSteps {\n\n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;order_id&quot;)\n    private List&lt;Step&gt; allSteps = new ArrayList&lt;&gt;();\n\n    @Enumerated(EnumType.STRING)\n    private StepSource source;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    private Step origin;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    private Step destination;\n}\n\n@Entity\n@Audited\npublic class Step {\n\n    @Id\n    private Long id;\n\n    private String label;\n    private Integer position;\n}\n</code></pre>\n<p>I want to capture changes to the <code>OrderSteps</code> embedded component, including:</p>\n<ul>\n<li><p>the list of <code>Step</code> items (<code>allSteps</code>),</p>\n</li>\n<li><p>the reference fields (<code>origin</code>, <code>destination</code>),</p>\n</li>\n<li><p>and the <code>source</code> enum.</p>\n</li>\n</ul>\n<p>However, the audit logs for the <code>Order</code> entity do not seem to include updates within the embedded <code>OrderSteps</code> component, especially the <code>@OneToMany</code> list.</p>\n<hr />\n<p>Question:\nIs it possible to make Hibernate Envers track changes inside an <code>@Embeddable</code> that has <code>@OneToMany</code> or <code>@OneToOne</code> relationships? If not, what is the recommended design pattern to make this auditable?</p>\n",
    "tags" : [ "java", "hibernate-envers" ],
    "owner" : {
      "account_id" : 14195569,
      "reputation" : 906,
      "user_id" : 10254976,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-LBKWMRbnsJE/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaN5MFh2qq87AeYj-As-DJbY0Opi0g/mo/s256-rj/photo.jpg",
      "display_name" : "Самир Шахмурадлы",
      "link" : "https://stackoverflow.com/users/10254976/%d0%a1%d0%b0%d0%bc%d0%b8%d1%80-%d0%a8%d0%b0%d1%85%d0%bc%d1%83%d1%80%d0%b0%d0%b4%d0%bb%d1%8b"
    },
    "is_answered" : false,
    "view_count" : 33,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1762349858,
    "creation_date" : 1762287473,
    "link" : "https://stackoverflow.com/questions/79809363/can-envers-audit-an-embeddable-that-contains-a-onetomany-relationship",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}