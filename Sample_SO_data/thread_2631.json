{
  "question" : {
    "question_id" : 79607698,
    "title" : "Mapstruct - Mapping nested objects having array?",
    "body" : "<p><em><strong>Input</strong></em></p>\n<p>I have these <strong>PageAndData</strong> object as <em>Target</em>mapstruct</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PageAndData {\n    Page page;\n    List&lt;Data&gt; data;\n}\npublic class Page {\n    private int size;\n    private int totalPages;\n}\npublic class Data{\n    Integer id;\n    String name;\n    List &lt;Wallet&gt; wallets;\n}\npublic Wallet{\n    Integer walletId;\n    String walletName;\n}\n</code></pre>\n<p>I have these <strong>SearchResult</strong> as <em>Source</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class SearchResult{\n    PageInfo pageInfo;\n    List&lt;PageData&gt; pageData;\n}\npublic class PageInfo{\n    private int size;\n    private int totalPages;\n}\npublic class PageData{\n    Integer id;\n    String name;\n    List&lt;Bag&gt; bags;\n}\npublic Bag{\n    Integer bagId;\n    String bagName;\n}\n</code></pre>\n<p><em><strong>Question</strong></em>\nUsing <code>Mapstruct</code> to map values from <code>SearchResult -&gt; PageAndData</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Mapper // current impl, partailly ok\npublic interface searchResultToPageAndData{\n\n    @Mapping(source = &quot;pageInfo&quot;, target = &quot;info&quot;)\n    @Mapping(source = &quot;pageData&quot;, target = &quot;data&quot;)\n    \n    PageAndData mymap(SearchResult searchResult);\n\n}\n</code></pre>\n<p><em><strong>Output expectation</strong></em></p>\n<p>The values from <code>SearchResult</code> should go to <code>PageAndData</code>, expected mapping as follow</p>\n<pre class=\"lang-json prettyprint-override\"><code>//\nSearchResult.pageInfo.size -&gt; PageAndData.info.size\nSearchResult.pageInfo.totalPages -&gt; PageAndData.info.totalPages\n    SearchResult.PageData.id -&gt; PageAndData.data.id\n    SearchResult.PageData.name -&gt; PageAndData.data.name\n    SearchResult.PageData.bag -&gt; PageAndData.data.id.wallet\n        //for every element of array\n        SearchResult.PageData.bag.bagId -&gt; PageAndData.data.id.walletId\n        SearchResult.PageData.bag.bagName -&gt; PageAndData.data.id.walletName\n</code></pre>\n<p><em><strong>Example :</strong></em></p>\n<p>i should get data from bag to wallet with change in key name of bag to wallet with change in nested keynames too</p>\n<pre class=\"lang-json prettyprint-override\"><code>SearchResult{\n    pageInfo{\n        size : 5\n        totalPages : 10\n    }\n    pageData{\n        id : 1\n        name : &quot;Page101&quot;\n        bag:[\n            {\n            bagId : 1\n            bagName : &quot;bagname&quot;\n            }\n        ]\n    }\n}\nThis shud get mapped to\nPageAndData{\n    info{\n        size : 5\n        totalPages : 10\n    }\n    data{\n        id : 1\n        name : &quot;Page101&quot;\n        wallet:[\n        {\n            walletId : 1\n            walletName : &quot;bagname&quot;\n        }\n        ]\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "collections", "mapstruct" ],
    "owner" : {
      "account_id" : 12946957,
      "reputation" : 1,
      "user_id" : 9885325,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/268384c0157bb8cc940896250997826c?s=256&d=identicon&r=PG",
      "display_name" : "sudarshan.spectrum",
      "link" : "https://stackoverflow.com/users/9885325/sudarshan-spectrum"
    },
    "is_answered" : false,
    "view_count" : 77,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746520427,
    "creation_date" : 1746482313,
    "link" : "https://stackoverflow.com/questions/79607698/mapstruct-mapping-nested-objects-having-array",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79608301,
    "question_id" : 79607698,
    "body" : "<p>You need to tell MapStruct that it should map from <code>PageData</code> to <code>Data</code> and from <code>Bag</code> to <code>Wallet</code> (and how to do the mapping).</p>\n<p>The easiest way (IMHO) is to add methods to your mapper:</p>\n<pre><code>@Mapper // current impl, partailly ok\npublic interface searchResultToPageAndData{\n\n    @Mapping(source = &quot;pageInfo&quot;, target = &quot;info&quot;)\n    @Mapping(source = &quot;pageData&quot;, target = &quot;data&quot;)\n    PageAndData mymap(SearchResult searchResult);\n\n    @Mapping(source = &quot;bags&quot;, target = &quot;wallets&quot;)\n    Data map(PageData pageData);\n\n    @Mapping(source = &quot;bagId&quot;, target = &quot;walletId&quot;)\n    @Mapping(source = &quot;bagName&quot;, target = &quot;walletName&quot;)\n    Wallet map(Bag bag);\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7423601,
      "reputation" : 21950,
      "user_id" : 5646962,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/950788cd150c2e596944181dfd8421af?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thomas Kl&#228;ger",
      "link" : "https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger"
    },
    "creation_date" : 1746520427,
    "last_activity_date" : 1746520427,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140399414,
    "post_id" : 79607698,
    "body" : "@Turing85, i tried explaining it again. in simple language i want to map values from one object to another using mapstruct, the catch is - the attribute names are not same (like bagid-&gt;walletid) and it is inside an array..",
    "score" : 0,
    "owner" : {
      "account_id" : 12946957,
      "reputation" : 1,
      "user_id" : 9885325,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/268384c0157bb8cc940896250997826c?s=256&d=identicon&r=PG",
      "display_name" : "sudarshan.spectrum",
      "link" : "https://stackoverflow.com/users/9885325/sudarshan-spectrum"
    },
    "creation_date" : 1746519804,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140398333,
    "post_id" : 79607698,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79607698/edit\">edit</a> the post and clarify what the actual question is.",
    "score" : 0,
    "owner" : {
      "account_id" : 5281408,
      "reputation" : 20275,
      "user_id" : 4216641,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/dVLIh.jpg?s=256",
      "display_name" : "Turing85",
      "link" : "https://stackoverflow.com/users/4216641/turing85"
    },
    "creation_date" : 1746482962,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140398322,
    "post_id" : 79607698,
    "body" : "implemeted example if possible",
    "score" : 0,
    "owner" : {
      "account_id" : 12946957,
      "reputation" : 1,
      "user_id" : 9885325,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/268384c0157bb8cc940896250997826c?s=256&d=identicon&r=PG",
      "display_name" : "sudarshan.spectrum",
      "link" : "https://stackoverflow.com/users/9885325/sudarshan-spectrum"
    },
    "creation_date" : 1746482610,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79608301" : [ {
      "comment_id" : 140405610,
      "post_id" : 79608301,
      "body" : "@sudarshan.spectrum I prefer one mapper for a group of related classes on the reason that a service might need to do mappings between <code>SearchResult</code> and <code>PageAndData</code> as well as doing mappings between <code>PageData</code> and <code>Data</code>. If you have these mappers distributed over several classes you might need to inject all those mappers into the a service where you need to inject only a single mapper if you group them together. IMHO either way is fine.",
      "score" : 0,
      "owner" : {
        "account_id" : 7423601,
        "reputation" : 21950,
        "user_id" : 5646962,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/950788cd150c2e596944181dfd8421af?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Thomas Kl&#228;ger",
        "link" : "https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger"
      },
      "creation_date" : 1746649490,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140405297,
      "post_id" : 79608301,
      "body" : "is it not better to use uses like this <code>@Mapper(uses=SomeClass.class)</code> and this SomeClasss will get next level of Mapping and then again use uses to third and final level of Mapping ?",
      "score" : 0,
      "owner" : {
        "account_id" : 12946957,
        "reputation" : 1,
        "user_id" : 9885325,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/268384c0157bb8cc940896250997826c?s=256&d=identicon&r=PG",
        "display_name" : "sudarshan.spectrum",
        "link" : "https://stackoverflow.com/users/9885325/sudarshan-spectrum"
      },
      "creation_date" : 1746642784,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}