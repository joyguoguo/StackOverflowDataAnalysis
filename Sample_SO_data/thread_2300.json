{
  "question" : {
    "question_id" : 79631908,
    "title" : "Stopping message flow in the middle of a Spring integration flow",
    "body" : "<p>I have a spring integration flow which listens to JMS messages using the Java DSL through the use of a JMS messageDrivenChannelAdapter. It has a subflow as follows:</p>\n<pre><code>f -&gt; f.handle(ServiceA)\n      .handle(ServiceB);\n</code></pre>\n<p>In Service A, I am writing a message to a DB. If I receive a transient error, I simply throw this error which causes the message to get redelivered as expected.</p>\n<p>However if I receive a non-transient exception in ServiceA, I want to stop processing the message in this flow (I do not want it to be sent further down the integration flow to ServiceB, or other downstream endpoints) and I want to acknowledge the jms message so that it is removed from the queue.\nHow can I do this?</p>\n",
    "tags" : [ "java", "spring-boot", "spring-integration", "spring-integration-dsl" ],
    "owner" : {
      "account_id" : 16215505,
      "reputation" : 95,
      "user_id" : 11708441,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/85824d9ee2d37de35770f49146006b47?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Chandula",
      "link" : "https://stackoverflow.com/users/11708441/chandula"
    },
    "is_answered" : true,
    "view_count" : 50,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1747844604,
    "creation_date" : 1747828283,
    "link" : "https://stackoverflow.com/questions/79631908/stopping-message-flow-in-the-middle-of-a-spring-integration-flow",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79632398,
    "question_id" : 79631908,
    "body" : "<p>There is some convention in messaging if result of the service invocation is <code>null</code>,  then reply message is not created and nothing is emitted to the output channel of the endpoint.</p>\n<p>The <code>handle()</code> operator in Spring Integration Java DSL is for Service Activator EIP.\nWe mention that <code>null</code> behavior briefly in the docs: <a href=\"https://docs.spring.io/spring-integration/reference/service-activator.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/reference/service-activator.html</a></p>\n<blockquote>\n<p>The service activator is one of those components that is not required to produce a reply message. If your method returns null or has a void return type, the service activator exits after the method invocation, without any signals.</p>\n</blockquote>\n<p>I think this is something you can do in your <code>ServiceA</code>: just catch that &quot;non-transient exception&quot; and return <code>null</code> from your service method.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3273937,
      "reputation" : 122596,
      "user_id" : 2756547,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=256&d=identicon&r=PG",
      "display_name" : "Artem Bilan",
      "link" : "https://stackoverflow.com/users/2756547/artem-bilan"
    },
    "creation_date" : 1747844604,
    "last_activity_date" : 1747844604,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}