{
  "question" : {
    "question_id" : 79805260,
    "title" : "What order should programs look at JAVA_HOME, JRE_HOME, JDK_HOME for locating a Java version?",
    "body" : "<p>What order should programs look at JAVA_HOME, JRE_HOME, JDK_HOME for locating a version of Java to execute Java programs?</p>\n<p>I want my program to find Java automatically using an environment variable, but there are at least three to choose from.</p>\n<hr />\n<p>My guess is that I should go by semantics; I need any JRE to run <code>java</code> (both JDK or JRE would do) so I'm guessing the following order:</p>\n<ul>\n<li><code>JRE_HOME</code> (semantics: this is specifically intended as a JRE, not a JDK)</li>\n<li><code>JAVA_HOME</code> (semantics: ? Not sure if it is meant as any Java installation or if it is specifically meant as a JDK in contrast to <code>JRE_HOME</code>'s significance as a JRE)</li>\n</ul>\n<p>and since I don't specifically need/want a JDK, and <code>JDK_HOME</code> looks less common in the wild than <code>JAVA_HOME</code>, perhaps not try to use <code>JDK_HOME</code>, and rely on my users to set <code>JRE_HOME</code> or <code>JAVA_HOME</code> appropriately.</p>\n",
    "tags" : [ "java", "environment-variables" ],
    "owner" : {
      "account_id" : 19061,
      "reputation" : 190566,
      "user_id" : 44330,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=256&d=identicon&r=PG",
      "display_name" : "Jason S",
      "link" : "https://stackoverflow.com/users/44330/jason-s"
    },
    "is_answered" : true,
    "view_count" : 180,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1761870426,
    "creation_date" : 1761862118,
    "link" : "https://stackoverflow.com/questions/79805260/what-order-should-programs-look-at-java-home-jre-home-jdk-home-for-locating-a",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79805313,
    "question_id" : 79805260,
    "body" : "<p>Your guess order looks good.</p>\n<p>You could try all of them in any particular order since how those variables are set depends on the operating system and/or on the user. The script below is part of OpenSuse Linux distro that does the job for the user.</p>\n<p>As it can be seen it tries both <code>java</code> and <code>javac</code> default commands to set variables.<br />\nIt could be perfectly possible that both command belong to different versions depending on user's configuration.</p>\n<p><code>cat /etc/profile.d/alljava.sh</code></p>\n<pre><code>#                                                                               \n#    /etc/profile.d/alljava.sh                                                    \n#                                                                               \n# send feedback to http://bugs.opensuse.org\n\n#\n# This script sets some environment variables for default java.\n# Affected variables: JAVA_BINDIR, JAVA_HOME, JRE_HOME, \n#                     JDK_HOME, SDK_HOME\n#\n\nif test -L /etc/alternatives/java -a -e /etc/alternatives/java; then\n    ALTERNATIVES_JAVA_LINK=`realpath /etc/alternatives/java 2&gt; /dev/null`\n    export JRE_HOME=${ALTERNATIVES_JAVA_LINK%/bin/java}\n    unset ALTERNATIVES_JAVA_LINK\nfi\n\nif test -L /etc/alternatives/javac -a -e /etc/alternatives/javac; then\n    ALTERNATIVES_JAVAC_LINK=`realpath /etc/alternatives/javac 2&gt; /dev/null`\n    export JAVA_HOME=${ALTERNATIVES_JAVAC_LINK%/bin/javac}\n    export JAVA_BINDIR=$JAVA_HOME/bin\n    export JDK_HOME=$JAVA_HOME\n    export SDK_HOME=$JAVA_HOME\n    unset ALTERNATIVES_JAVAC_LINK\nfi\n</code></pre>\n<p>The mentioned script is installed by this package</p>\n<pre><code>rpm -qf /etc/profile.d/alljava.sh\naaa_base-84.87+git20180409.04c9dae-150300.10.28.2.x86_64\n</code></pre>\n<p>values as shown by <code>env</code> here</p>\n<pre><code>env | grep -E 'JDK|JRE|JAVA' \nJAVA_HOME=/usr/lib64/jvm/java-17-openjdk-17\nJDK_HOME=/usr/lib64/jvm/java-17-openjdk-17\nJRE_HOME=/usr/lib64/jvm/java-17-openjdk-17\nJAVA_BINDIR=/usr/lib64/jvm/java-17-openjdk-17/bin\n</code></pre>\n<p>Users may override those values</p>\n<pre><code>export JDK_HOME='/usr/lib64/jvm/java-1.8.0-openjdk-1.8.0'\n</code></pre>\n<pre><code>env | grep -E 'JDK|JRE' \nJDK_HOME=/usr/lib64/jvm/java-1.8.0-openjdk-1.8.0\nJRE_HOME=/usr/lib64/jvm/java-17-openjdk-17\n</code></pre>\n<p>Finally, those variables could not be set at all so version should be obtained from the <code>java</code> command itself</p>\n<p><code>java -XshowSettings:properties -version 2&gt;&amp;1 | grep -E -e 'java\\.(home|specification\\.version)'</code></p>\n<pre><code>    java.home = /usr/lib64/jvm/java-17-openjdk-17\n    java.specification.version = 17\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3377022,
      "reputation" : 14383,
      "user_id" : 2834978,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ff9af10001f37bc0de566ca2caf2f558?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "LMC",
      "link" : "https://stackoverflow.com/users/2834978/lmc"
    },
    "creation_date" : 1761867811,
    "last_activity_date" : 1761870426,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140829393,
    "post_id" : 79805260,
    "body" : "Expecting users to install Java is an obsolete deployment strategy.  Since Java 9, applications should be built as modules and assembled using <a href=\"https://docs.oracle.com/en/java/javase/25/docs/specs/man/jlink.html\" rel=\"nofollow noreferrer\">jlink</a> and/or <a href=\"https://docs.oracle.com/en/java/javase/25/docs/specs/man/jpackage.html\" rel=\"nofollow noreferrer\">jpackage</a>, as life888888 mentioned, which removes the need for end users to install any Java at all.",
    "score" : 2,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44936,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1761918945,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828706,
    "post_id" : 79805260,
    "body" : "Those vars shouldn&#39;t be relied on unless you are stuck with using an old Java version / JRE. Many apps can bundle exact Java version needed using jlink / jpackage, or consider  <code>System.getProperty(&quot;java.home&quot;)</code>, JAVA_HOME and / or adjust results of <code>where java.exe</code> or <code>which java</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16284,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1761899081,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828621,
    "post_id" : 79805260,
    "body" : "&quot;<i>Sun/Oracle docs that explain this?</i>&quot; - most probably not, that is up to the <i>users</i> of Java - <code>JAVA_HOME</code> is, AFAIK, the most used (by many frameworks and similar,) but neither used nor enforced by Java itself",
    "score" : 2,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1761894564,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828477,
    "post_id" : 79805260,
    "body" : "If your program is packaged into a distribution file using <code>jpackage</code>, and users install that distribution file, the installation includes the necessary Java environment, so there is no need to check the external JDK or JRE. environment.",
    "score" : 2,
    "owner" : {
      "account_id" : 26698569,
      "reputation" : 4074,
      "user_id" : 20306007,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
      "display_name" : "life888888",
      "link" : "https://stackoverflow.com/users/20306007/life888888"
    },
    "creation_date" : 1761886565,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828474,
    "post_id" : 79805260,
    "body" : "The environment variable PATH should be set first. Windows searches for the <code>java</code> or <code>javac</code> executable files according to the order in the PATH. If an executable file is found first in the PATH, that executable will be used.",
    "score" : 1,
    "owner" : {
      "account_id" : 26698569,
      "reputation" : 4074,
      "user_id" : 20306007,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
      "display_name" : "life888888",
      "link" : "https://stackoverflow.com/users/20306007/life888888"
    },
    "creation_date" : 1761886382,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828415,
    "post_id" : 79805260,
    "body" : "Isn&#39;t the order opinion? Or there is any specification for it?",
    "score" : 1,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26502,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1761881265,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828218,
    "post_id" : 79805260,
    "body" : "You see, the order of the paths scanned will be the least of your problems once you get into the details of JVMs...",
    "score" : 0,
    "owner" : {
      "account_id" : 2182934,
      "reputation" : 2660,
      "user_id" : 1932011,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=256&d=identicon&r=PG",
      "display_name" : "JayC667",
      "link" : "https://stackoverflow.com/users/1932011/jayc667"
    },
    "creation_date" : 1761865614,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828217,
    "post_id" : 79805260,
    "body" : "Well, actually, ALL of them. Plus any other <code>System.getProperty()</code> or <code>System.getenv()</code> and &quot;registry&quot; registered Java version you can get your hands on. Much more important is the question, whether that JRE/JDK can actually RUN your app. Need a runtime compiler? Go with JDK. Need a certain old/new version? Check the installed java version (<code>java -version</code>). Need additional libraries like JavaFX? Check it out in the folders. <code>rt.jar</code>? Only in certain installations. Bit-compatible JVMs? Need to specifically run 32 or 64 bits? Or completely different architectures, like GraalVM?",
    "score" : 1,
    "owner" : {
      "account_id" : 2182934,
      "reputation" : 2660,
      "user_id" : 1932011,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=256&d=identicon&r=PG",
      "display_name" : "JayC667",
      "link" : "https://stackoverflow.com/users/1932011/jayc667"
    },
    "creation_date" : 1761865587,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828191,
    "post_id" : 79805260,
    "body" : "The JLS may have specified, but there may be a more specific documentation over things like environment variables and their usages. Older documentation would help there, but I&#39;m truly working off of memory (circa 2003-2025). Keep in mind <code>JAVA_HOME</code> was largely used by <i>consumers</i> of Java, not by Oracle/Sun/etc themselves (until around Java 8/9)",
    "score" : 1,
    "owner" : {
      "account_id" : 1992310,
      "reputation" : 11519,
      "user_id" : 1786065,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/udTpS.png?s=256",
      "display_name" : "Rogue",
      "link" : "https://stackoverflow.com/users/1786065/rogue"
    },
    "creation_date" : 1761864134,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828185,
    "post_id" : 79805260,
    "body" : "any Sun/Oracle docs that explain this? I can&#39;t seem to find any that talk about the significance of these variables. There&#39;s pages like this <a href=\"https://docs.oracle.com/cd/E19575-01/820-7584/ggopr/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19575-01/820-7584/ggopr/index.html</a> which refer to specific enterprise programs (OpenSSO in this case) but nothing about Java in general.",
    "score" : 1,
    "owner" : {
      "account_id" : 19061,
      "reputation" : 190566,
      "user_id" : 44330,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=256&d=identicon&r=PG",
      "display_name" : "Jason S",
      "link" : "https://stackoverflow.com/users/44330/jason-s"
    },
    "creation_date" : 1761863993,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828184,
    "post_id" : 79805260,
    "body" : "Historically <code>JAVA_HOME</code> simply pointed to the installation directory. From memory that could&#39;ve been the JRE or the JDK, hence the introduction of <code>JRE_HOME</code> and <code>JDK_HOME</code> to disambiguate. You could simply check for <code>JRE_HOME</code>, and in absence of that, fall back to <code>${JAVA_HOME}</code> (or perhaps a subdir of <code>JAVA_HOME</code> for some older installations).",
    "score" : 2,
    "owner" : {
      "account_id" : 1992310,
      "reputation" : 11519,
      "user_id" : 1786065,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/udTpS.png?s=256",
      "display_name" : "Rogue",
      "link" : "https://stackoverflow.com/users/1786065/rogue"
    },
    "creation_date" : 1761863891,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140828155,
    "post_id" : 79805260,
    "body" : "Related but <i>NOT DUPLICATE</i>: <a href=\"https://stackoverflow.com/questions/27996603\">stackoverflow.com/questions/27996603</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 19061,
      "reputation" : 190566,
      "user_id" : 44330,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=256&d=identicon&r=PG",
      "display_name" : "Jason S",
      "link" : "https://stackoverflow.com/users/44330/jason-s"
    },
    "creation_date" : 1761862210,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}