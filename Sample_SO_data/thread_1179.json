{
  "question" : {
    "question_id" : 79734847,
    "title" : "how to inject a primitive using WELD",
    "body" : "<p>I am following this tutorial on how to use Jakarta CDI:\n<a href=\"https://jakarta.ee/learn/docs/jakartaee-tutorial/current/cdi/cdi-basic/cdi-basic.html#_injecting_objects_by_using_producer_methods\" rel=\"nofollow noreferrer\">https://jakarta.ee/learn/docs/jakartaee-tutorial/current/cdi/cdi-basic/cdi-basic.html#_injecting_objects_by_using_producer_methods</a></p>\n<p>The problem is, I cannot inject a primitive (an int) due to <code>The injection point has non-proxyable dependencies</code> exception.</p>\n<p>The code I'm using is as follows:</p>\n<p>(custom qualifier)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Qualifier\n@Retention(RUNTIME)\n@Target({METHOD, FIELD, PARAMETER, TYPE})\npublic @interface MaxNumber {}\n</code></pre>\n<p>(a producer)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class NumbersProducer {\n    private int maxNumber = 100;\n\n    @Produces @MaxNumber @RequestScoped public int getMaxNumber() {\n        return maxNumber;\n    }\n}\n</code></pre>\n<p>(an injection point)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ProducersPrinter {\n   @Inject @MaxNumber int maxNumber;\n   \n}\n</code></pre>\n<p>Is that even possible to inject a primitive using WELD?</p>\n",
    "tags" : [ "java", "cdi", "jboss-weld" ],
    "owner" : {
      "account_id" : 5638140,
      "reputation" : 842,
      "user_id" : 4462975,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8a3030f4493fa614b212405edd252353?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "zajer",
      "link" : "https://stackoverflow.com/users/4462975/zajer"
    },
    "is_answered" : true,
    "view_count" : 81,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1755746025,
    "creation_date" : 1755130849,
    "link" : "https://stackoverflow.com/questions/79734847/how-to-inject-a-primitive-using-weld",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79734876,
    "question_id" : 79734847,
    "body" : "<p>The solution is remove <code>@RequestScoped</code> annotation from producer method.</p>\n<p>There is a hint in <a href=\"https://jakarta.ee/specifications/cdi/3.0/jakarta-cdi-spec-3.0.html#producer_method_types\" rel=\"nofollow noreferrer\">CDI specification</a> on &quot;restrictions upon bean types of beans with normal scopes&quot;. Normal scopes according to the <a href=\"https://jakarta.ee/specifications/cdi/3.0/jakarta-cdi-spec-3.0.html#normal_scope\" rel=\"nofollow noreferrer\">specs</a> consist of &quot;all scopes defined by this specification, except for the <code>@Dependent</code> pseudo-scope&quot;.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5638140,
      "reputation" : 842,
      "user_id" : 4462975,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8a3030f4493fa614b212405edd252353?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "zajer",
      "link" : "https://stackoverflow.com/users/4462975/zajer"
    },
    "creation_date" : 1755135874,
    "last_activity_date" : 1755136937,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79741784,
    "question_id" : 79734847,
    "body" : "<p>Primitives, and their object counterparts are not proxyable as per the <a href=\"https://jakarta.ee/specifications/cdi/4.0/jakarta-cdi-spec-4.0.html#unproxyable\" rel=\"nofollow noreferrer\">spec</a>. If you need the value to live in the request scope, use a wrapper class that is actually proxyable. If you make it <a href=\"https://jakarta.ee/specifications/cdi/4.0/jakarta-cdi-spec-4.0.html#dependent_context\" rel=\"nofollow noreferrer\">@Dependent</a>, you will be able to inject it as an Integer, but there may be overhead because of the nature of dependent beans.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 233198,
      "reputation" : 718,
      "user_id" : 498531,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://i.sstatic.net/l7Vaf.jpg?s=256",
      "display_name" : "jpangamarca",
      "link" : "https://stackoverflow.com/users/498531/jpangamarca"
    },
    "creation_date" : 1755746025,
    "last_activity_date" : 1755746025,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79734876" : [ {
      "comment_id" : 140664606,
      "post_id" : 79734876,
      "body" : "This is correct, you need to use non-normal scope as primitives are not proxyable. Aside from <code>@Dependent</code>,you can also use <code>@jakarta.inject.Singleton</code>.",
      "score" : 1,
      "owner" : {
        "account_id" : 6963528,
        "reputation" : 7041,
        "user_id" : 5342297,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/ec65b3838b1d1ea981cdb5be0a7a4a57?s=256&d=identicon&r=PG",
        "display_name" : "Siliarus",
        "link" : "https://stackoverflow.com/users/5342297/siliarus"
      },
      "creation_date" : 1755156575,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}