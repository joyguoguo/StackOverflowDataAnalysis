{
  "question" : {
    "question_id" : 79676931,
    "title" : "cannot read this web page using httpsurlconnection or selenium",
    "body" : "<p>I am trying to read this https page using java</p>\n<pre><code>https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250602e.htm\n</code></pre>\n<p>but always hit <code>Read timed out</code>.\nHere is my code</p>\n<pre><code>try {\n    URL url = new URL(&quot;https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250620e.htm&quot;);\n    HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\n    conn.setRequestMethod(&quot;GET&quot;);\n    BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n    String inputLine;\n    while ((inputLine = in.readLine()) != null) {\n        System.out.println(inputLine);\n    }\n    in.close();\n} catch (Exception e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>I've tried to set the read timeout <code>conn.setReadTimeout(240000);</code> but it still timeout. I've tried other https pages and they work very well. Only this one failed. I've tried using <code>curl</code> and <code>Invoke-WebRequest</code>, no response is received, only browser works. Would appreciate if anyone can give me some ideas.</p>\n<p>I've tried using Selenium getSource as suggested but ending with page is down or moved. But if I do a page source in Chrome it allows me to do it. I further try Selenium using Network.getResponseBody like this</p>\n<pre><code>   devTools.addListener(Network.responseReceived(),responseReceived -&gt; {\n        String responseUrl = responseReceived.getResponse().getUrl();\n        RequestId requestId = responseReceived.getRequestId();\n        if (responseUrl.contains(&quot;smstat/dayquot&quot;)) {\n            System.out.println(&quot;Url: &quot; + responseUrl);\n            System.out.println(&quot;Response headers: &quot; + responseReceived.getResponse().getHeaders().toString());\n25 -&gt;       System.out.println(&quot;Response body: &quot; + devTools.send(Network.getResponseBody(requestId)).getBody());\n        }\n\n    });\n</code></pre>\n<p>A Chrome browser pop-up with the info I want. However, the program aborted with</p>\n<pre><code>Jul 03, 2025 8:20:24 AM org.openqa.selenium.devtools.Connection$Listener lambda$onText$0\nWARNING: Unable to process: {&quot;method&quot;:&quot;Network.responseReceived&quot;,&quot;params&quot;:{&quot;requestId&quot;:&quot;D32E463F42A6CAC6BE6A7E39FA5C1023&quot;,&quot;loaderId&quot;:&quot;D32E463F42A6CAC6BE6A7E39FA5C1023&quot;,&quot;timestamp&quot;:4344.313103,&quot;type&quot;:&quot;Document&quot;,&quot;response&quot;:{&quot;url&quot;:&quot;https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250618e.htm&quot;,&quot;status&quot;:200,&quot;statusText&quot;:&quot;&quot;,&quot;headers&quot;:{&quot;accept-ranges&quot;:&quot;bytes&quot;,&quot;content-encoding&quot;:&quot;gzip&quot;,&quot;content-type&quot;:&quot;text/html&quot;,&quot;date&quot;:&quot;Thu, 03 Jul 2025 00:20:23 GMT&quot;,&quot;etag&quot;:&quot;\\&quot;07ab78648e0db1:0\\&quot;&quot;,&quot;last-modified&quot;:&quot;Wed, 18 Jun 2025 12:00:04 GMT&quot;,&quot;strict-transport-security&quot;:&quot;max-age=480&quot;,&quot;vary&quot;:&quot;Accept-Encoding&quot;,&quot;x-akamai-transformed&quot;:&quot;0 - 0 -&quot;},&quot;mimeType&quot;:&quot;text/html&quot;,&quot;charset&quot;:&quot;&quot;,&quot;connectionReused&quot;:false,&quot;connectionId&quot;:52,&quot;remoteIPAddress&quot;:&quot;23.35.148.143&quot;,&quot;remotePort&quot;:443,&quot;fromDiskCache&quot;:false,&quot;fromServiceWorker&quot;:false,&quot;fromPrefetchCache&quot;:false,&quot;encodedDataLength&quot;:1281,&quot;timing&quot;:{&quot;requestTime&quot;:4342.845654,&quot;proxyStart&quot;:-1,&quot;proxyEnd&quot;:-1,&quot;dnsStart&quot;:-1,&quot;dnsEnd&quot;:-1,&quot;connectStart&quot;:-1,&quot;connectEnd&quot;:-1,&quot;sslStart&quot;:-1,&quot;sslEnd&quot;:-1,&quot;workerStart&quot;:-1,&quot;workerReady&quot;:-1,&quot;workerFetchStart&quot;:-1,&quot;workerRespondWithSettled&quot;:-1,&quot;sendStart&quot;:1110.392,&quot;sendEnd&quot;:1110.758,&quot;pushStart&quot;:0,&quot;pushEnd&quot;:0,&quot;receiveHeadersStart&quot;:1462.685,&quot;receiveHeadersEnd&quot;:1463.48},&quot;responseTime&quot;:1.751502024562685e+12,&quot;protocol&quot;:&quot;h2&quot;,&quot;alternateProtocolUsage&quot;:&quot;unspecifiedReason&quot;,&quot;securityState&quot;:&quot;secure&quot;,&quot;securityDetails&quot;:{&quot;protocol&quot;:&quot;TLS 1.3&quot;,&quot;keyExchange&quot;:&quot;&quot;,&quot;keyExchangeGroup&quot;:&quot;X25519&quot;,&quot;cipher&quot;:&quot;AES_256_GCM&quot;,&quot;certificateId&quot;:0,&quot;subjectName&quot;:&quot;*.hkex.com.hk&quot;,&quot;sanList&quot;:[&quot;*.hkex.com.hk&quot;,&quot;hkex.com.hk&quot;],&quot;issuer&quot;:&quot;Sectigo RSA Organization Validation Secure Server CA&quot;,&quot;validFrom&quot;:1728432000,&quot;validTo&quot;:1761609599,&quot;signedCertificateTimestampList&quot;:[{&quot;status&quot;:&quot;Verified&quot;,&quot;origin&quot;:&quot;Embedded in certificate&quot;,&quot;logDescription&quot;:&quot;Google 'Xenon2025h2' log&quot;,&quot;logId&quot;:&quot;DDDCCA3495D7E11605E79532FAC79FF83D1C50DFDB003A1412760A2CACBBC82A&quot;,&quot;timestamp&quot;:1728445455641,&quot;hashAlgorithm&quot;:&quot;SHA-256&quot;,&quot;signatureAlgorithm&quot;:&quot;ECDSA&quot;,&quot;signatureData&quot;:&quot;3044022042FB38EF079A0BE8355ABEA16524CCE9FB1F4433806E00D735D097683638B512022015F93705DECE739B4EC30CCDEA42F9791B86F1B4D6634BC6BF045279785784D3&quot;},{&quot;status&quot;:&quot;Verified&quot;,&quot;origin&quot;:&quot;Embedded in certificate&quot;,&quot;logDescription&quot;:&quot;Cloudflare 'Nimbus2025'&quot;,&quot;logId&quot;:&quot;CCFB0F6A85710965FE959B53CEE9B27C22E9855C0D978DB6A97E54C0FE4C0DB0&quot;,&quot;timestamp&quot;:1728445455647,&quot;hashAlgorithm&quot;:&quot;SHA-256&quot;,&quot;signatureAlgorithm&quot;:&quot;ECDSA&quot;,&quot;signatureData&quot;:&quot;304502200689FBEB54868A58DB0EBCB9241A617E814CE0A9339AB7D2CDDD7AECF91497AD022100EAB140F15E621C1ECAB97A2152AF795BE73C2C0CCFC4C4306AF48D121D9CF8AD&quot;},{&quot;status&quot;:&quot;Verified&quot;,&quot;origin&quot;:&quot;Embedded in certificate&quot;,&quot;logDescription&quot;:&quot;Google 'Argon2025h2' log&quot;,&quot;logId&quot;:&quot;12F14E34BD53724C840619C38F3F7A13F8E7B56287889C6D300584EBE586263A&quot;,&quot;timestamp&quot;:1728445455617,&quot;hashAlgorithm&quot;:&quot;SHA-256&quot;,&quot;signatureAlgorithm&quot;:&quot;ECDSA&quot;,&quot;signatureData&quot;:&quot;304502203C2D26137292013CC4BEE5CDCE99587A9375E47A68D984C2B2DECCBECEB3EA7502210096A74DF6E7E2F0CE1D2B2BC2D897419266E1579187395DE59A22A43952854453&quot;}],&quot;certificateTransparencyCompliance&quot;:&quot;compliant&quot;,&quot;serverSignatureAlgorithm&quot;:2052,&quot;encryptedClientHello&quot;:false}},&quot;hasExtraInfo&quot;:true,&quot;frameId&quot;:&quot;FDDF984E462E75D6E90D0327769D2CF5&quot;},&quot;sessionId&quot;:&quot;BAB7F6480E49DF21284E1F9BF9B0D16C&quot;}\norg.openqa.selenium.devtools.DevToolsException: {&quot;id&quot;:6,&quot;error&quot;:{&quot;code&quot;:-32000,&quot;message&quot;:&quot;No data found for resource with given identifier&quot;},&quot;sessionId&quot;:&quot;BAB7F6480E49DF21284E1F9BF9B0D16C&quot;}\nBuild info: version: '4.34.0', revision: '2a4c61c498'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.1'\nDriver info: driver.version: unknown\n    at org.openqa.selenium.devtools.Connection.sendAndWait(Connection.java:195)\n    at org.openqa.selenium.devtools.DevTools.send(DevTools.java:94)\n    at org.openqa.selenium.devtools.DevTools.send(DevTools.java:89)\n    at testselenium.TestResponse.lambda$main$0(TestResponse.java:25)\n    at org.openqa.selenium.devtools.DevTools.lambda$addListener$0(DevTools.java:108)\n    at org.openqa.selenium.devtools.Connection.lambda$handle$5(Connection.java:348)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)\n    at java.base/java.util.stream.ReferencePipeline$11$1.accept(ReferencePipeline.java:442)\n    at java.base/java.util.HashMap$EntrySpliterator.forEachRemaining(HashMap.java:1746)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)\n    at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)\n    at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:497)\n    at org.openqa.selenium.devtools.Connection.handle(Connection.java:311)\n    at org.openqa.selenium.devtools.Connection$Listener.lambda$onText$0(Connection.java:239)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: org.openqa.selenium.WebDriverException: {&quot;id&quot;:6,&quot;error&quot;:{&quot;code&quot;:-32000,&quot;message&quot;:&quot;No data found for resource with given identifier&quot;},&quot;sessionId&quot;:&quot;BAB7F6480E49DF21284E1F9BF9B0D16C&quot;}\n</code></pre>\n<p>Any further help is much appreciated.</p>\n",
    "tags" : [ "java", "selenium-webdriver", "timeout", "httpsurlconnection" ],
    "owner" : {
      "account_id" : 1954650,
      "reputation" : 418,
      "user_id" : 1757949,
      "user_type" : "registered",
      "accept_rate" : 43,
      "profile_image" : "https://www.gravatar.com/avatar/578e8d3763dae63627a5674df7c87708?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "senderj",
      "link" : "https://stackoverflow.com/users/1757949/senderj"
    },
    "is_answered" : false,
    "view_count" : 106,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751503312,
    "creation_date" : 1750730928,
    "link" : "https://stackoverflow.com/questions/79676931/cannot-read-this-web-page-using-httpsurlconnection-or-selenium",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79676958,
    "question_id" : 79676931,
    "body" : "<p><code>https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250602e.htm</code> uses security measures (e.g., bot protection, user-agent filtering, header inspection, JavaScript challenges) that block non-browser clients like <code>HttpsURLConnection</code>.</p>\n<p>You might wanna try adding a browser header.</p>\n<pre><code>import javax.net.ssl.HttpsURLConnection;\nimport java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.net.URL;\n\npublic class HKEXFetcher {\n    public static void main(String[] args) {\n        try {\n            URL url = new URL(&quot;https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250620e.htm&quot;);\n            HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();\n            conn.setRequestMethod(&quot;GET&quot;);\n            conn.setReadTimeout(240000);\n            conn.setConnectTimeout(15000);\n\n            // Spoof browser headers\n            conn.setRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&quot;);\n            conn.setRequestProperty(&quot;Accept&quot;, &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&quot;);\n            conn.setRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.5&quot;);\n            conn.setRequestProperty(&quot;Connection&quot;, &quot;keep-alive&quot;);\n            conn.setInstanceFollowRedirects(true);\n\n            int responseCode = conn.getResponseCode();\n            if (responseCode != 200) {\n                System.out.println(&quot;Failed : HTTP error code : &quot; + responseCode);\n                return;\n            }\n\n            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream(), &quot;UTF-8&quot;));\n            String inputLine;\n            while ((inputLine = in.readLine()) != null) {\n                System.out.println(inputLine);\n            }\n            in.close();\n            conn.disconnect();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>If it doesn't work use <a href=\"https://github.com/SeleniumHQ/selenium\" rel=\"nofollow noreferrer\">Selenium Driver</a> instead, so it would be something like this:</p>\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.chrome.ChromeOptions;\n\npublic class HKEXSeleniumFetcher {\n    public static void main(String[] args) {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/path/to/chromedriver&quot;); // Update path\n\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--headless&quot;, &quot;--disable-gpu&quot;);\n\n        WebDriver driver = new ChromeDriver(options);\n        driver.get(&quot;https://www.hkex.com.hk/eng/stat/smstat/dayquot/d250620e.htm&quot;);\n\n        String pageSource = driver.getPageSource();\n        System.out.println(pageSource);\n\n        driver.quit();\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22532209,
      "reputation" : 292,
      "user_id" : 16724059,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/7AN8bNTe.jpg?s=256",
      "display_name" : "Altxxr0",
      "link" : "https://stackoverflow.com/users/16724059/altxxr0"
    },
    "creation_date" : 1750733720,
    "last_activity_date" : 1750733720,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140536896,
    "post_id" : 79676931,
    "body" : "Assuming that this is some kind of anti-scraper defense, you should probably read the site&#39;s Terms of Use ... and conform to them.  Attempting to evade the existing blocks may lead to escalating counter-measures.",
    "score" : 2,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723428,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1750738871,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140536804,
    "post_id" : 79676931,
    "body" : "If you only observe browsers to successfully load the page then perhaps the server is discriminating by user agent.  Perhaps it&#39;s even doing so <i>badly</i>.",
    "score" : 0,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1750733480,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79676958" : [ {
      "comment_id" : 140546425,
      "post_id" : 79676958,
      "body" : "Thank you Altxxr0, I&#39;ve tried both. Adding request properties didn&#39;t make any difference. Selenium didn&#39;t timeout, but it only return a html with an error message saying that &quot;The web page at ...... might be temporarily down or it may have moved permanently to a new web address&quot;.",
      "score" : 0,
      "owner" : {
        "account_id" : 1954650,
        "reputation" : 418,
        "user_id" : 1757949,
        "user_type" : "registered",
        "accept_rate" : 43,
        "profile_image" : "https://www.gravatar.com/avatar/578e8d3763dae63627a5674df7c87708?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "senderj",
        "link" : "https://stackoverflow.com/users/1757949/senderj"
      },
      "creation_date" : 1751008427,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140538633,
      "post_id" : 79676958,
      "body" : "In your list the most important measure is missing: TLS fingerprinting. Important because it works way earlier that the other measures and it explains why some clients work but others not even if he request is identical.",
      "score" : 0,
      "owner" : {
        "account_id" : 50585,
        "reputation" : 43459,
        "user_id" : 150978,
        "user_type" : "registered",
        "accept_rate" : 78,
        "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
        "display_name" : "Robert",
        "link" : "https://stackoverflow.com/users/150978/robert"
      },
      "creation_date" : 1750776462,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}