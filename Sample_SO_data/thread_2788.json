{
  "question" : {
    "question_id" : 79595404,
    "title" : "How to delete resource record from route 53 using AWS JAVA SDK",
    "body" : "<p>Im newbie in java and trying trying to write code to delete specific record from route 53.\nso far, I have written following code by referring java doc.</p>\n<pre><code>package oe.k8s;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport com.amazonaws.services.route53.AmazonRoute53;\nimport com.amazonaws.services.route53.AmazonRoute53Client;\nimport com.amazonaws.services.route53.model.*;\n\npublic class TestName1 {\n\n    public static void main(String[] args) {\n\n        AmazonRoute53 route53Client = AmazonRoute53Client.builder().withRegion(&quot;us-east-1&quot;).build();\n\n        listZones(route53Client);\n    }\n\n    public static void listZones(AmazonRoute53 route53Client) {\n        try {\n\n            ResourceRecordSet rr = new ResourceRecordSet(&quot;abc.com&quot;, &quot;A&quot;);\n\n            Change c = new Change(ChangeAction.DELETE, rr);\n\n            List&lt;Change&gt; cc = new ArrayList&lt;&gt;();\n            cc.add(c);\n\n            ChangeBatch cb = new ChangeBatch(cc);\n\n            ChangeResourceRecordSetsRequest ccc = new ChangeResourceRecordSetsRequest(&quot;abc123&quot;, cb);\n\n            ChangeResourceRecordSetsResult ccres = new ChangeResourceRecordSetsResult();\n            System.out.println(&quot;hiiiiiii&quot;);\n            System.out.println(ccres.getChangeInfo());\n\n            ListHostedZonesResult zonesResponse = route53Client.listHostedZones();\n            List&lt;HostedZone&gt; checklist = zonesResponse.getHostedZones();\n            for (HostedZone check : checklist) {\n                DeleteTrafficPolicyInstanceRequest rq = new DeleteTrafficPolicyInstanceRequest();\n                System.out.println(&quot;id is  &quot; + rq.getId());\n                System.out.println(&quot;The name is : &quot; + check.getName());\n                System.out.println(&quot;The resource count is : &quot; + check.getResourceRecordSetCount());\n\n            }\n\n        } catch (AmazonRoute53Exception e) {\n            System.err.println(e.getMessage());\n            System.exit(1);\n        }\n    }\n\n}\n</code></pre>\n<p>Issue is, it is not deleting record. code is getting compiled and running properly however nothing is happening.\nCan anyone suggest where I'm doing wrong?</p>\n<p>environment details:</p>\n<ul>\n<li>JAVA: 17</li>\n<li>AWS SDK version: 1.x</li>\n</ul>\n<p><strong>UPDATE 1</strong></p>\n<p>I modified the entire code as below</p>\n<pre><code>public static void main(String[] args) {\n\n        AmazonRoute53 route53Client = AmazonRoute53Client.builder().withRegion(&quot;us-east-1&quot;).build();\n\n        listZones(route53Client);\n    }\n\n    public static void listZones(AmazonRoute53 route53Client) {\n        try {\n\n            GetHostedZoneResult result = route53Client.getHostedZone(new GetHostedZoneRequest(&quot;Z0807dasdasasdNHP57O&quot;));\n            HostedZone zone = result.getHostedZone();\n\n            ResourceRecordSet recordSet = new ResourceRecordSet().withName(&quot;abc.com&quot;)\n                    .withType(RRType.TXT).withTTL(300L)\n                    .withResourceRecords(new ResourceRecord().withValue(&quot;abc.com&quot;));\n\n    \n            ChangeResourceRecordSetsRequest req = new ChangeResourceRecordSetsRequest()\n                    .withHostedZoneId(&quot;Z0807dasdasasdNHP57O&quot;).withChangeBatch(new ChangeBatch().withChanges(\n                            new Change().withAction(ChangeAction.DELETE).withResourceRecordSet(recordSet)));\n\n            route53Client.changeResourceRecordSets(req);\n\n            List&lt;Change&gt; cc = new ArrayList&lt;&gt;();\n            \n\n            ChangeBatch cb = new ChangeBatch(cc);\n\n            ChangeResourceRecordSetsRequest ccc = new ChangeResourceRecordSetsRequest(&quot;Z0807dasdasasdNHP57O&quot;, cb);\n\n            ChangeResourceRecordSetsResult ccres = route53Client.changeResourceRecordSets(ccc);\n\n            System.out.println(&quot;hiiiiiii&quot;);\n            System.out.println(ccres.getChangeInfo());\n\n            ListHostedZonesResult zonesResponse = route53Client.listHostedZones();\n            List&lt;HostedZone&gt; checklist = zonesResponse.getHostedZones();\n            for (HostedZone check : checklist) {\n                DeleteTrafficPolicyInstanceRequest rq = new DeleteTrafficPolicyInstanceRequest();\n                System.out.println(&quot;id is  &quot; + rq.getId());\n                System.out.println(&quot;The name is : &quot; + check.getName());\n                System.out.println(&quot;The resource count is : &quot; + check.getResourceRecordSetCount());\n\n            }\n\n        } catch (AmazonRoute53Exception e) {\n            System.err.println(e.getMessage());\n            System.exit(1);\n        }\n    }\n</code></pre>\n<p>getting the exception as below , not sure which resource data is missing . can we get some detailed logging ?</p>\n<blockquote>\n<p>[Tried to delete resource record set\n[name='abc.com.', type='TXT'] but the rdata\nprovided is invalid] (Service: AmazonRoute53; Status Code: 400; Error\nCode: InvalidChangeBatch; Request ID:\n3cccbde8-af09-42da-b894-cc53a1e1043f; Proxy: null)</p>\n</blockquote>\n",
    "tags" : [ "java", "amazon-route53", "aws-java-sdk" ],
    "owner" : {
      "account_id" : 2679463,
      "reputation" : 2914,
      "user_id" : 2315104,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=256&d=identicon&r=PG",
      "display_name" : "user2315104",
      "link" : "https://stackoverflow.com/users/2315104/user2315104"
    },
    "is_answered" : true,
    "view_count" : 64,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1745868393,
    "creation_date" : 1745781454,
    "link" : "https://stackoverflow.com/questions/79595404/how-to-delete-resource-record-from-route-53-using-aws-java-sdk",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79595424,
    "question_id" : 79595404,
    "body" : "<p>The operation to perform the actual delete can't be found in the snippet you shared:</p>\n<p>This should help:</p>\n<pre><code>\nChangeResourceRecordSetsResult ccres = route53Client.changeResourceRecordSets(ccc);\n</code></pre>\n<p>You need to call the client to initiate the DELETE action</p>\n<pre><code>route53Client.changeResourceRecordSets\n</code></pre>\n<p>Then you can log the response afterwards.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14853653,
      "reputation" : 451,
      "user_id" : 10726803,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/H3cwGSrO.jpg?s=256",
      "display_name" : "keemsisi",
      "link" : "https://stackoverflow.com/users/10726803/keemsisi"
    },
    "creation_date" : 1745782723,
    "last_activity_date" : 1745782723,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79595424" : [ {
      "comment_id" : 140377753,
      "post_id" : 79595424,
      "body" : "Thanks . Please have a look on UPDATE 1. need help",
      "score" : 0,
      "owner" : {
        "account_id" : 2679463,
        "reputation" : 2914,
        "user_id" : 2315104,
        "user_type" : "registered",
        "accept_rate" : 42,
        "profile_image" : "https://www.gravatar.com/avatar/67897548b9d55c6e2f8e3171fa7ca20d?s=256&d=identicon&r=PG",
        "display_name" : "user2315104",
        "link" : "https://stackoverflow.com/users/2315104/user2315104"
      },
      "creation_date" : 1745867229,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}