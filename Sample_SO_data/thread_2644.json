{
  "question" : {
    "question_id" : 79606780,
    "title" : "No CDC data in Cassandra binary logs (cdc_raw)",
    "body" : "<p>I encountered an issue while using CDC in Cassandra and need your help to resolve it.</p>\n<p>I have set up a Change Data Capture (CDC) system to track changes in a specific table. CDC is enabled, and I can see that binary logs are being created in the cdc_raw directory. However, I noticed that the data modify (insert new records, update existing ones, or delete records) in this table does not appear in the cdc_raw logs. That is, the logs remain empty.</p>\n<blockquote>\n<p>For reading CDC binary logs (cdc_raw), I rely on a pre-built .jar file that implements the Java class <a href=\"https://github.com/apache/cassandra/blob/cassandra-4.1.8/src/java/org/apache/cassandra/db/commitlog/CommitLogReader.java\" rel=\"nofollow noreferrer\">CommitLogReader.java</a></p>\n</blockquote>\n<p>Below is my sequence of steps:</p>\n<p>1 Installed Cassandra 4.1.8 in Docker</p>\n<p>2 Set the variables in the file <code>/etc/cassandra/cassandra.yaml</code></p>\n<blockquote>\n<p>cdc_enabled: true</p>\n<p>cdc_raw_directory: /var/lib/cassandra/cdc_raw</p>\n<p>commitlog_directory: /var/lib/cassandra/commitlog</p>\n<p>cdc_total_space: 4096MiB</p>\n<p>cdc_free_space_check_interval: 250ms</p>\n</blockquote>\n<p>3 Created a keyspace <code>demo</code></p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE KEYSPACE demo WITH REPLICATION = { 'class' : 'org.apache.cassandra.locator.SimpleStrategy', 'replication_factor': '3' };\n</code></pre>\n<p>4 Created a table <code>demo.my_table_cdc_text</code></p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE demo.my_table_cdc_text(\n    id int,\n    code text,\n    first_name text,\n    last_name text,\n    email text,\n    PRIMARY KEY(id, code)\n)\nWITH cdc=true;\n</code></pre>\n<p>5 Added data to the table <code>demo.my_table_cdc_text</code> (350 rows)</p>\n<pre class=\"lang-sql prettyprint-override\"><code>BEGIN batch\n    INSERT INTO demo.my_table_cdc_text (id, code, email, first_name, last_name) VALUES(769, 'brown fox jumps over t', 'Joelle.Stuart.11@yahoo.in', 'Abraham', 'Douglas');\n    INSERT INTO demo.my_table_cdc_text (id, code, email, first_name, last_name) VALUES(769, 'dogThe quick brown fox jumps ove', 'Calvin.Haines.02@hetnet.nl', 'Oscar', 'Jeremy');\n    INSERT INTO demo.my_table_cdc_text (id, code, email, first_name, last_name) VALUES(769, 'dogThe quick brown fox jumps over t', 'Mercedes.Pippen.46@yahoo.es', 'Maggie', 'Roberta');\n    .........\n    INSERT INTO demo.my_table_cdc_text (id, code, email, first_name, last_name) VALUES(769, 'fox jumps over', 'Teresa.Plumb.84@laposte.net', 'Ida', 'Tamara');\n    INSERT INTO demo.my_table_cdc_text (id, code, email, first_name, last_name) VALUES(769, 'fox jumps over the lazy dogThe quick bro', 'Hodierna.Nicol.73@terra.com.br', 'Rich', 'Beatrice');\napply batch;\n</code></pre>\n<p><strong>P.S</strong>: I also tried these parameters and commands:</p>\n<ul>\n<li>changed the <code>log_segment_size parameter</code> from <code>32MiB</code> to <code>1Mib</code>;</li>\n<li>run command: <code>nodetool flush demo my_table_cdc_text</code></li>\n</ul>\n",
    "tags" : [ "java", "database", "cassandra", "cdc", "cassandra-4.0" ],
    "owner" : {
      "account_id" : 15647909,
      "reputation" : 1,
      "user_id" : 11289759,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f9e4b605c6528cdc78777fc5e0ded128?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "4array",
      "link" : "https://stackoverflow.com/users/11289759/4array"
    },
    "is_answered" : false,
    "view_count" : 43,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746442056,
    "creation_date" : 1746442056,
    "link" : "https://stackoverflow.com/questions/79606780/no-cdc-data-in-cassandra-binary-logs-cdc-raw",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}