{
  "question" : {
    "question_id" : 79546016,
    "title" : "Force a bamboo task to execute in re-run scenario",
    "body" : "<p>I have a bamboo plan that does the following</p>\n<ol>\n<li>Deploys test sources to oracle</li>\n<li>Executes <code>FOO.BEFORE_ALL</code> proc</li>\n<li>Executes database tests in various stages and jobs</li>\n<li>Executes <code>FOO.AFTER_ALL</code> proc in a final stage</li>\n</ol>\n<p>This works fine for normal bamboo execution but doesn't work how I'd like in re-run scenarios.</p>\n<p>Since <code>FOO.AFTER_ALL</code> is executed in a final stage it executes regardless of pass/fail of previous stages/jobs.</p>\n<p>Is there any way to force <code>FOO.BEFORE_ALL</code> to be run in re-run scenarios?</p>\n<p>The default bamboo behavior for re-runs is to start at the first failed job which is after my BEFOREALL job. Is there any way to force this job to run in re-run scenario?</p>\n<p>Sample Bamboo plan java</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Plan createPlan() {\n  return new Plan(project(), &quot;Plan Name&quot;, &quot;PLANKEY&quot;)\n    .stages(\n      new Stage(&quot;Deploy&quot;).jobs(new MyDeployJob()),\n      new Stage(&quot;Setup&quot;).jobs(\n        new Job(&quot;Before All&quot;, &quot;BEFOREALL&quot;)\n          .tasks(new SqlTask().inlineBody(&quot;FOO.BEFORE_ALL;&quot;))\n      ),\n      new Stage(&quot;Unit Tests&quot;).jobs(\n        new PlSqlTestJob(&quot;FOO.UNIT_TESTS_1&quot;),\n        new PlSqlTestJob(&quot;FOO.UNIT_TESTS_2&quot;),\n        new PlSqlTestJob(&quot;FOO.UNIT_TESTS_3&quot;)\n      ),\n      new Stage(&quot;Integration Tests&quot;).jobs(\n        new PlSqlTestJob(&quot;FOO.INTEG_TESTS_1&quot;),\n        new PlSqlTestJob(&quot;FOO.INTEG_TESTS_2&quot;),\n        new PlSqlTestJob(&quot;FOO.INTEG_TESTS_3&quot;)\n      ),\n      new Stage(&quot;Tear Down&quot;)\n        .finalStage(true)         \n        .jobs(\n          new Job(&quot;After All&quot;, &quot;AFTERALL&quot;)\n            .tasks(new SqlTask().inlineBody(&quot;FOO.AFTER_ALL;&quot;))\n        )\n      )\n    );\n}\n</code></pre>\n",
    "tags" : [ "java", "bamboo", "bamboo-specs", "utplsql" ],
    "owner" : {
      "account_id" : 1096470,
      "reputation" : 29414,
      "user_id" : 1089967,
      "user_type" : "registered",
      "accept_rate" : 59,
      "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
      "display_name" : "lance-java",
      "link" : "https://stackoverflow.com/users/1089967/lance-java"
    },
    "is_answered" : false,
    "view_count" : 30,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743422487,
    "creation_date" : 1743417571,
    "link" : "https://stackoverflow.com/questions/79546016/force-a-bamboo-task-to-execute-in-re-run-scenario",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140385016,
    "post_id" : 79546016,
    "body" : "I don&#39;t think there&#39;s a good way to do this.  I was thinking about maybe manipulating some of the built in variables like <code>bamboo_RerunBuildTriggerReason_noOfRetries</code> or <code>bamboo_triggerReason_key=com.atlassian.bamboo.plugin.system.&zwnj;&#8203;triggerReason:RerunB&zwnj;&#8203;uildTriggerReason</code>, but you&#39;d have to be smart about how your jobs in the &quot;Unit Tests&quot; stage or &quot;Integraion Tests&quot; stage actually run.  Or, not run the &quot;Tear Down&quot; if <code>bamboo_buildFailed</code> is true, but that&#39;s going to leave cruft all over in the short term (you&#39;d still have to have <i>something</i> that does a <code>FOO.AFTER_ALL</code>).  I&#39;d just never rebuild:)",
    "score" : 0,
    "owner" : {
      "account_id" : 288029,
      "reputation" : 256,
      "user_id" : 588204,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a9d705fc87278b6084cd446ef33a33da?s=256&d=identicon&r=PG",
      "display_name" : "Jon V",
      "link" : "https://stackoverflow.com/users/588204/jon-v"
    },
    "creation_date" : 1746032882,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}