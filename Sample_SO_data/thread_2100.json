{
  "question" : {
    "question_id" : 79647021,
    "title" : "How to use JavaScript to build a simple new Component in Java for Vaadin",
    "body" : "<p>I worked with Vaadin before but could not figure out how to build my own Vaadin components with JavaScript from scratch. Then I did some work with Perl, Mojolicious, JavaScript, HTML and building my HTML+JavaScript components worked like a charm.</p>\n<p>Now I am back to Vaadin 24.7.6, Java 21, Maven, and JavaScript.</p>\n<p>I downloaded a Vaadin+Springboot example project an am trying to add JavaScript to it. I followed a Vaadin tutorial but I keep getting an error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.vaadin.flow.component.Component;\nimport com.vaadin.flow.component.Tag;\nimport com.vaadin.flow.component.dependency.JavaScript;\nimport com.vaadin.flow.component.dependency.JsModule;\nimport com.vaadin.flow.dom.Element;\n\n//@JavaScript(&quot;keyboard-german.js&quot;)\n//@Tag(&quot;cerebrummi_keyboard&quot;)\n//@JsModule(&quot;keyboard-german.js&quot;)\npublic abstract class Keyboard extends Component {\n   private static final long serialVersionUID = -4476014165075742457L;\n\n   public Keyboard() {}\n\n   public Keyboard(Element element) {\n      super(element);\n   }\n}\n</code></pre>\n<p>Each of the tags results in the same error:</p>\n<blockquote>\n<p>error during build: [31m[vite]: Rollup failed to resolve import\n&quot;keyboard-german.js&quot; from\n&quot;C:/Users/.../generated-flow-imports.js&quot;.\nThis is most likely unintended because it can break your application\nat runtime. If you do want to externalize this module explicitly add\nit to 'build.rollupOptions.external'</p>\n</blockquote>\n<p>Where do I find 'build.rollupOptions.external'? I searched the web, but could not find an answer.</p>\n<p>The JavaScript file is just simple right now:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;script type=&quot;module&quot;&gt;\nexport var cerebrummi_keyboard = &quot;This will become the keyboard&quot;;\n&lt;/script&gt;\n</code></pre>\n<p>The .js file was at first next to the Keyboard.java file. Later I moved it to the root of the project. I also changed <code>vite.config.ts</code> but could not find a solution, though reading in the vite handbook online.</p>\n<hr />\n<h2>Update</h2>\n<p>How to make Vaadin and JavaScript, HTML interact? It is not just about where to place the JavaScript file. How must the JavaScript file look like, which tags to use in Vaadin?</p>\n<h2>Update 2</h2>\n<p>The reason I am asking this question is that I would like to create new Vaadin components for others and me to use, like a keyboard with Hebrew characters.</p>\n<p>I did so in Java Swing to create the vocabulary trainer &quot;Cerebrummi&quot; (freeware) and am thinking about coding a web app with a similar design. You can see screenshots of Cerebrummi including the keyboard at:</p>\n<p><a href=\"https://www.heise.de/download/product/cerebrummi5_0\" rel=\"nofollow noreferrer\">screenshots of what I want to create</a></p>\n<h2>Update 3</h2>\n<p>Thank you, I got it right now, where to place the JavaScript file and use a tag to include it.</p>\n<p>Also, I have been looking at the link to GitHub with the examples and picked the spinwheel example. Unfortunately the example uses a library and is quite complex. Would it be possible to add an example without using a library and just creating a simple HTML button with JS click handler as a new Vaadin component. (I know there are buttons in Vaadin, but I want to learn how to do one myself.)</p>\n",
    "tags" : [ "javascript", "java", "vaadin" ],
    "owner" : {
      "account_id" : 30573283,
      "reputation" : 133,
      "user_id" : 23434446,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zE0vv.jpg?s=256",
      "display_name" : "dragoness",
      "link" : "https://stackoverflow.com/users/23434446/dragoness"
    },
    "is_answered" : true,
    "view_count" : 454,
    "answer_count" : 2,
    "score" : 3,
    "last_activity_date" : 1750282430,
    "creation_date" : 1748728225,
    "link" : "https://stackoverflow.com/questions/79647021/how-to-use-javascript-to-build-a-simple-new-component-in-java-for-vaadin",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79648241,
    "question_id" : 79647021,
    "body" : "<p>Your JS file is most likely in wrong directory and don't get included into front-end bundle. Project root or next to Java files don't work (at least without special configuration). <code>src/main/frontend/</code> or <code>src/main/resources/META-INF/resources/frontend/</code> (for add-ons) are good candidates. Locations are covered in the JavaDocs, but I often end up checking out <a href=\"https://vaadin.com/docs/latest/flow/advanced/loading-resources#flow.resource-cheat-sheet\" rel=\"nofollow noreferrer\">documentation page</a> for a summary.</p>\n<p>PS. I assume your JS file don't contain the html tags, but only the actual JS \uD83E\uDD13 In trivial cases an easy option can be to dump that tag as such</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2515523,
      "reputation" : 1964,
      "user_id" : 2187063,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4d32ebb394b8d37f261da3f1c5009a85?s=256&d=identicon&r=PG",
      "display_name" : "mstahv",
      "link" : "https://stackoverflow.com/users/2187063/mstahv"
    },
    "creation_date" : 1748844951,
    "last_activity_date" : 1748844951,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79655458,
    "question_id" : 79647021,
    "body" : "<p><a href=\"https://vaadin.com/blog/how-to-integrate-components-into-a-vaadin-flow-application\" rel=\"nofollow noreferrer\">This blogpost </a>shows you different ways of integrating external components. You haven't provided a full example of what you're trying to do and use, but it looks like you should most likely go with the &quot;JavaScript-based component/widget&quot; approach. TL;DR: create a JavaScript &quot;connector&quot;, link it to your Java component with <code>@JsModule([filename])</code> and use <code>getElement().executeJs</code> or <code>getElement().callJsFunction</code> to call JavaScript from Java (hint: those calls can also handle return values). Demo app source here: <a href=\"https://github.com/SebastianKuehnau/Component-Integration-Demo-App\" rel=\"nofollow noreferrer\">https://github.com/SebastianKuehnau/Component-Integration-Demo-App</a></p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 4430906,
      "reputation" : 4340,
      "user_id" : 3608089,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/U8YpL.jpg?s=256",
      "display_name" : "ollitietavainen",
      "link" : "https://stackoverflow.com/users/3608089/ollitietavainen"
    },
    "creation_date" : 1749189496,
    "last_activity_date" : 1749189496,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140525166,
    "post_id" : 79647021,
    "body" : "A good rule of thumb about bounties is that they are payment for advertising; they are <i>not</i> payment for free work. In general contributors here will have an easier time of it if they are self-actualised; their requests are all about how <i>they</i> can achieve something, rather than how someone can do their work for them. The difference in wording may seem subtle, but it reflects a major shift in mindset.",
    "score" : 0,
    "owner" : {
      "account_id" : 216950,
      "reputation" : 20182,
      "user_id" : 472495,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/4rtxd.png?s=256",
      "display_name" : "halfer",
      "link" : "https://stackoverflow.com/users/472495/halfer"
    },
    "creation_date" : 1750282591,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140479141,
    "post_id" : 79647021,
    "body" : "@cfrick My question is not only about where to put a static file, but how JavaScript and Vaadin interact.",
    "score" : 0,
    "owner" : {
      "account_id" : 30573283,
      "reputation" : 133,
      "user_id" : 23434446,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zE0vv.jpg?s=256",
      "display_name" : "dragoness",
      "link" : "https://stackoverflow.com/users/23434446/dragoness"
    },
    "creation_date" : 1748865993,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140478246,
    "post_id" : 79647021,
    "body" : "This question is similar to: <a href=\"https://stackoverflow.com/questions/57553973/where-should-i-place-my-vaadin-10-static-files\">Where should I place my Vaadin 10+ static files?</a>. If you believe it’s different, please <a href=\"https://stackoverflow.com/posts/79647021/edit\">edit</a> the question, make it clear how it’s different and/or how the answers on that question are not helpful for your problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 3837378,
      "reputation" : 37303,
      "user_id" : 3181392,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/SIgPs.png?s=256",
      "display_name" : "cfrick",
      "link" : "https://stackoverflow.com/users/3181392/cfrick"
    },
    "creation_date" : 1748843925,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140478139,
    "post_id" : 79647021,
    "body" : "@cfrick Thank you for the questions. I added the information.",
    "score" : 0,
    "owner" : {
      "account_id" : 30573283,
      "reputation" : 133,
      "user_id" : 23434446,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zE0vv.jpg?s=256",
      "display_name" : "dragoness",
      "link" : "https://stackoverflow.com/users/23434446/dragoness"
    },
    "creation_date" : 1748837311,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140476485,
    "post_id" : 79647021,
    "body" : "Please show where the file is located in your source-tree and for good measure, what build tool you are using and what exact version of Vaadin.",
    "score" : 1,
    "owner" : {
      "account_id" : 3837378,
      "reputation" : 37303,
      "user_id" : 3181392,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/SIgPs.png?s=256",
      "display_name" : "cfrick",
      "link" : "https://stackoverflow.com/users/3181392/cfrick"
    },
    "creation_date" : 1748765653,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79655458" : [ {
      "comment_id" : 140523998,
      "post_id" : 79655458,
      "body" : "If you want to integrate your own JavaScript-based component into a Vaadin view, there are a couple of straightforward ways to do it – ranging from simple DOM manipulations to full Web Component integration.  I’ve created a demo that shows two basic options: - calling custom event - via Server Side RPC call  \uD83D\uDC49 Check out the example here:  <a href=\"https://github.com/SebastianKuehnau/Component-Integration-Demo-App/blob/demo/src/main/java/org/vaadin/demo/views/demo/tabs/Tab6ExtJsComponent.java\" rel=\"nofollow noreferrer\">github.com/SebastianKuehnau/Component-Integration-Demo-App/b&zwnj;&#8203;lob/&hellip;</a>",
      "score" : 1,
      "owner" : {
        "account_id" : 40713172,
        "reputation" : 11,
        "user_id" : 29917125,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/e874b4bc6651519c2c711d33697cd889?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Sebastian K&#252;hnau",
        "link" : "https://stackoverflow.com/users/29917125/sebastian-k%c3%bchnau"
      },
      "creation_date" : 1750256897,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140498244,
      "post_id" : 79655458,
      "body" : "Could you be so kind to write a small example? I looked at the links you provided but they are special cases with npm or special imports like in the spinwheel case. How to make a button with Html, JavaScript and Vaadin by extending Component from Vaadin flow?",
      "score" : 0,
      "owner" : {
        "account_id" : 30573283,
        "reputation" : 133,
        "user_id" : 23434446,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/zE0vv.jpg?s=256",
        "display_name" : "dragoness",
        "link" : "https://stackoverflow.com/users/23434446/dragoness"
      },
      "creation_date" : 1749444720,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79648241" : [ {
      "comment_id" : 140485807,
      "post_id" : 79648241,
      "body" : "How to do the special configuration?",
      "score" : 0,
      "owner" : {
        "account_id" : 30573283,
        "reputation" : 133,
        "user_id" : 23434446,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/zE0vv.jpg?s=256",
        "display_name" : "dragoness",
        "link" : "https://stackoverflow.com/users/23434446/dragoness"
      },
      "creation_date" : 1749025768,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}