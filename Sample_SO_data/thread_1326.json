{
  "question" : {
    "question_id" : 79718686,
    "title" : "How to pass type parameter explicity to Collector.of method",
    "body" : "<p>I was trying to solve Java stream practise problem where I have to find out largest 5 Integers from given finite stream of Integer. I came up with below solution.</p>\n<pre><code>\n    new Random().ints(200, 1, 200000).boxed().collect(Collector.of(ArrayList&lt;Integer&gt;::new, ( acc, i ) -&gt; {\n        if ( acc.size() &gt; 4 )\n        {\n            for ( int ctr = acc.size() - 1; ctr &gt;= 0; ctr-- )\n            {\n                if ( i &gt; acc.get(ctr) )\n                {\n                    acc.set(ctr, i);\n                    break;\n                }\n            }\n        }\n        else\n        {\n            acc.add(i);\n        }\n    }, (a,b)-&gt; { a.addAll(b); return a;}, Function.identity(), Collector.Characteristics.IDENTITY_FINISH))\n    .forEach(System.out::println);;\n</code></pre>\n<p>My question is if I have to pass type parameter of Collector explicitly to Collector.of method then how to do that ? Below code gives error</p>\n<pre><code>Collector&lt;Integer, ArrayList&lt;Integer&gt;, ArrayList&lt;Integer&gt;&gt;.of(ArrayList&lt;Integer&gt;::new, ( acc, i ) -&gt; {\n            if ( acc.size() &gt; 4 )\n            {\n                for ( int ctr = acc.size() - 1; ctr &gt;= 0; ctr-- )\n                {\n                    if ( i &gt; acc.get(ctr) )\n                    {\n                        acc.set(ctr, i);\n                        break;\n                    }\n                }\n            }\n            else\n            {\n                acc.add(i);\n            }\n        }, (a,b)-&gt; { a.addAll(b); return a;}, Function.identity(), Collector.Characteristics.IDENTITY_FINISH)\n</code></pre>\n<p>Errors are</p>\n<ul>\n<li>ArrayList cannot be resolved to a variable\n<ul>\n<li>Collector cannot be resolved to a variable</li>\n<li>Integer cannot be resolved to a variable</li>\n<li>The method of(ArrayList::new, ( acc,  i) -&gt; {}, ( a,  b) -&gt; {}, Function.identity(),\nCollector.Characteristics) is undefined for the type StreamPractise</li>\n<li>Syntax error on token &quot;,&quot;, delete this token</li>\n<li>Integer cannot be resolved to a variable</li>\n<li>Integer cannot be resolved to a variable</li>\n<li>Syntax error on token &quot;.&quot;, delete this token</li>\n<li>ArrayList cannot be resolved to a variable</li>\n</ul>\n</li>\n</ul>\n",
    "tags" : [ "java" ],
    "owner" : {
      "account_id" : 12146228,
      "reputation" : 17,
      "user_id" : 8868460,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b2c79c7e60ec9af4d3d52e8236867e4b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NIRAJ RATHI",
      "link" : "https://stackoverflow.com/users/8868460/niraj-rathi"
    },
    "is_answered" : false,
    "view_count" : 111,
    "closed_date" : 1753798125,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1753889706,
    "creation_date" : 1753795566,
    "link" : "https://stackoverflow.com/questions/79718686/how-to-pass-type-parameter-explicity-to-collector-of-method",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79718743,
    "question_id" : 79718686,
    "body" : "<p>You specify the Type after the dot, not before. Like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collector.&lt;Integer, ArrayList&lt;Integer&gt;, ArrayList&lt;Integer&gt;&gt;of(ArrayList::new, (  acc,  i ) -&gt; {\n            if ( acc.size() &gt; 4 )\n            {\n                for ( int ctr = acc.size() - 1; ctr &gt;= 0; ctr-- )\n                {\n                    if ( i &gt; acc.get(ctr) )\n                    {\n                        acc.set(ctr, i);\n                        break;\n                    }\n                }\n            }\n            else\n            {\n                acc.add(i);\n            }\n        }, ( a,  b)-&gt; { a.addAll(b); return a;}, Function.identity(), Collector.Characteristics.IDENTITY_FINISH);\n</code></pre>\n<p>Alternatively, you could specify the Lambda's Typing and the rest would be inferred as well, or assign it to a typed variable before using it.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 33204902,
      "reputation" : 52,
      "user_id" : 25718310,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e503d5271437e46c18f0d67d4a7fa739?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user25718310",
      "link" : "https://stackoverflow.com/users/25718310/user25718310"
    },
    "creation_date" : 1753797708,
    "last_activity_date" : 1753889706,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140630280,
    "post_id" : 79718686,
    "body" : "Type arguments have to be placed after the dot, not before it. It don’t know why nobody was able to name that simple syntax error. However, there is rarely a need for that in practice, as you’d use the collector definition in a context where the types are implied. You could even use <code>Collector.of(ArrayList::new, (ArrayList&lt;Integer&gt; acc, Integer i ) -&gt; { &#47;* … *&#47; }, (a,b)-&gt; { a.addAll(b); return a;});</code> to get a collector with the correct stand-alone type.",
    "score" : 1,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 300981,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1753887421,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140627326,
    "post_id" : 79718686,
    "body" : "The code won&#39;t work anyway as it doesn&#39;t maintain <code>add(i)</code> in the sorted order as expected by loop using <code>set(ctr, i)</code>. eg try <code>List.of(1,2,6,7,8,9).stream()</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16283,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1753802835,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79718743" : [ {
      "comment_id" : 140627419,
      "post_id" : 79718743,
      "body" : "I was actually looking for way to actually pass type parameters to of method then how can I do that ?",
      "score" : 0,
      "owner" : {
        "account_id" : 12146228,
        "reputation" : 17,
        "user_id" : 8868460,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b2c79c7e60ec9af4d3d52e8236867e4b?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "NIRAJ RATHI",
        "link" : "https://stackoverflow.com/users/8868460/niraj-rathi"
      },
      "creation_date" : 1753805007,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}