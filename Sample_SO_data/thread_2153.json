{
  "question" : {
    "question_id" : 79642524,
    "title" : "How to only build a module (and those that list it as a dependency) when it receives code changes? This is a multi-module project",
    "body" : "<p>Let's say I have a multi-module project. There is a parent pom, and then there are 5 projects -- A, B, C, D, and E.</p>\n<p>B and C depend on A. D and E depend on B.</p>\n<p>Let's say that B receives changes.</p>\n<p>How can I build the parent such that it recognizes that only B received changes, and therefore, the only projects that need to built are B, D, and E?</p>\n<p>Alternatively, how can I minimize the amount of work done on A and C when the above scenario is in play? I know that running <code>mvn verify</code> will only do a compilation for B (and maybe D and E?). How can I get it to only do unit tests for them too? Meaning, I don't want A or C to have to compile or do unit tests, nust skip or something like that. Minimize computstion where possible, basically.</p>\n",
    "tags" : [ "java", "maven", "build", "verify", "recompile" ],
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "is_answered" : true,
    "view_count" : 193,
    "answer_count" : 2,
    "score" : 2,
    "last_activity_date" : 1749218948,
    "creation_date" : 1748445581,
    "link" : "https://stackoverflow.com/questions/79642524/how-to-only-build-a-module-and-those-that-list-it-as-a-dependency-when-it-rece",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79648418,
    "question_id" : 79642524,
    "body" : "<p>Interesting question. Assuming that you know which modules have changes, you can build them e.g. like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mvn verify -pl B -amd\n</code></pre>\n<p>where <code>-amd</code> means:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-amd,--also-make-dependents    If project list is specified, also build projects\n                               that depend on projects on the list\n</code></pre>\n<p>You can find out externally, e.g. via <code>git status</code> or <code>git diff --name-only</code> and maybe a script reducing the file list to a list of project base directories.</p>\n<p>Another option would be to try the <a href=\"https://github.com/elasticpath/mvnmin\" rel=\"nofollow noreferrer\">mvnmin</a> tool and see if it suits your needs.</p>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 1087271,
      "reputation" : 68569,
      "user_id" : 1082681,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://i.sstatic.net/lDK9h.png?s=256",
      "display_name" : "kriegaex",
      "link" : "https://stackoverflow.com/users/1082681/kriegaex"
    },
    "creation_date" : 1748853488,
    "last_activity_date" : 1748853488,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79648410,
    "question_id" : 79642524,
    "body" : "<p>I believe there is no single command which will 100% match your use case. Your solution will depend on your profiles, plugins, goals etc. For clarification I would split the solution way in two parts:</p>\n<ol>\n<li><p>recompile and reassemble the module B with children (lets say we will get a jar)</p>\n<p>We can achieve it with</p>\n<pre><code>mvn install -pl B -amd\n</code></pre>\n<p>-amd option will build all child modules (D and E)</p>\n</li>\n<li><p>reassemble the module A</p>\n<p>You can run a command which skips not necessary goals (f.e. with option -DskipTests for skipping unit testing) and focus on what you want to achieve. For example packing all submodule's jars in a single war: mvn war:war</p>\n</li>\n</ol>\n<p>But if you really want to build parent together with B you can use</p>\n<pre><code>mvn install -pl B -amd -am\n</code></pre>\n<p>-am option will build parent modules of B. So at the end this command builds A, B, D and E</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 4598721,
      "reputation" : 2843,
      "user_id" : 3730077,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/7yq5U.png?s=256",
      "display_name" : "Slava Kuravsky",
      "link" : "https://stackoverflow.com/users/3730077/slava-kuravsky"
    },
    "creation_date" : 1748853269,
    "last_activity_date" : 1748853269,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140486451,
    "post_id" : 79642524,
    "body" : "@khmarbaise Do you have any thoughts on this? Looks like there is 1 answer here that meets my needs. But since you are on the Maven team itself, wanted to hear your perspective.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1749038306,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79648410" : [ {
      "comment_id" : 140486445,
      "post_id" : 79648410,
      "body" : "Yeah, that&#39;s more or less what the other answer said. And to be clear, I only asked how to build Z because I figured that was a pre-requisite avoiding building A and C. Sorry for asking an XY Question.",
      "score" : 1,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1749038236,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140485819,
      "post_id" : 79648410,
      "body" : "&quot;separate from the dependency hierarchy&quot; sounds for my like Z has another projects as dependencies and not as modules. In that case you can run &quot;mvn install -pl B -amd&quot; and then &quot;mvn install Z&quot;. The first command will prepare jars, the second will use them according to your pom.",
      "score" : 1,
      "owner" : {
        "account_id" : 4598721,
        "reputation" : 2843,
        "user_id" : 3730077,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/7yq5U.png?s=256",
        "display_name" : "Slava Kuravsky",
        "link" : "https://stackoverflow.com/users/3730077/slava-kuravsky"
      },
      "creation_date" : 1749026011,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140479250,
      "post_id" : 79648410,
      "body" : "Sorry, I was a little unclear. I have a parent pom, let&#39;s call it Z, which is the parent of A, B, C, D, and E. But that is separate from the dependency hierarchy. I wanted to be able to build Z, and have it either skip over or do minimal work for A and C, but do the proper compile/test/jar for B, D, and E. Let me know if I am not clear. Alternatively, I am open to suggested edits for my question to help remove some of the ambiguity.",
      "score" : 1,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1748868097,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79648418" : [ {
      "comment_id" : 140495717,
      "post_id" : 79648418,
      "body" : "5 hours left, but I&#39;ll just award it. Thanks for the help, I&#39;ll use your Git suggestion and the <code>-amd</code> flag to rework our CI/CD pipeline. Thanks again!",
      "score" : 0,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1749313903,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140482015,
      "post_id" : 79648418,
      "body" : "Hmmmm, after actually poking around the documentation, it appears that the directions are to actually <b><i>replace</i></b> lifecycle phases by using Takari ones instead. So, instead of the <code>install</code> lifecycle phase, there is a <code>takari-install</code> variant instead. I&#39;m not saying that&#39;s a non-starter, but that definitely lowers the value of using Takari. Understanding that, seems like the <code>-pl</code> solution appears to be the best option available.",
      "score" : 0,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1748919536,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140481726,
      "post_id" : 79648418,
      "body" : "Ohhhhh, I like this Takari suggestion. I&#39;m going to play around with it, but if what little I&#39;ve read is correct, then this will meet my needs. Ty vm! I&#39;ll accept the answer, so that the bounty will auto-go to you once time is up. But I&#39;ll leave the bounty open in case more answers come in. Thanks again.",
      "score" : 0,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1748905344,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140479574,
      "post_id" : 79648418,
      "body" : "See also <a href=\"https://github.com/takari\" rel=\"nofollow noreferrer\">github.com/takari</a>.",
      "score" : 1,
      "owner" : {
        "account_id" : 1087271,
        "reputation" : 68569,
        "user_id" : 1082681,
        "user_type" : "registered",
        "accept_rate" : 90,
        "profile_image" : "https://i.sstatic.net/lDK9h.png?s=256",
        "display_name" : "kriegaex",
        "link" : "https://stackoverflow.com/users/1082681/kriegaex"
      },
      "creation_date" : 1748873062,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140479510,
      "post_id" : 79648418,
      "body" : "Sure, wait for other suggestions first. But I guess, if Maven had what you want, <i>mvnmin</i> probably would not exist. For better incremental build support in general, you might want to look into the <a href=\"http://takari.io/book/30-team-maven.html\" rel=\"nofollow noreferrer\">Takari</a> life cycle. It has been on my to-do list for years to play with it, but actually I never did.",
      "score" : 2,
      "owner" : {
        "account_id" : 1087271,
        "reputation" : 68569,
        "user_id" : 1082681,
        "user_type" : "registered",
        "accept_rate" : 90,
        "profile_image" : "https://i.sstatic.net/lDK9h.png?s=256",
        "display_name" : "kriegaex",
        "link" : "https://stackoverflow.com/users/1082681/kriegaex"
      },
      "creation_date" : 1748872171,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140479237,
      "post_id" : 79648418,
      "body" : "Thanks. Your suggestion about generating that list externally definitely sounds doable, albeit with some elbow grease required. But that <code>mvnmin</code> looks like a 1-to-1 match for what I am looking for. Only downside being that it is an executable, so I would have to get permission to install and use it in our CI/CD pipeline. I&#39;ll hold out for more answers, in case maven has some secret command that gives me <code>mvnmin</code>-like functionality out of the box. But barring that, this looks like the answer I will award the bounty to.",
      "score" : 0,
      "owner" : {
        "account_id" : 14010051,
        "reputation" : 250,
        "user_id" : 10118965,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "davidalayachew",
        "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
      },
      "creation_date" : 1748867816,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}