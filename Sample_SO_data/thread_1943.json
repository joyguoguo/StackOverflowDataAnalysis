{
  "question" : {
    "question_id" : 79661902,
    "title" : "Java GUI JList not updating when switching JPanel with CardLayout",
    "body" : "<p>I have one MainFrame and two JPanels:</p>\n<ul>\n<li><code>MainFrame</code> - where i switch panels</li>\n<li><code>Listings</code> – where my JList is</li>\n<li><code>RefreshListings</code> – where i swap from current JPanel to Listings JPanel and refresh the JList in Listings Panel.</li>\n</ul>\n<p>The issue:<br />\nAfter swapping Panel from <code>RefreshListings</code> to <code>Listings</code>, the <code>JList</code> appears blank or doesn't show the updated list.</p>\n<p>My MainFrame:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MainFrame() {\n    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    setBounds(100, 100, 450, 300);\n    contentPane = new JPanel();\n    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));\n    setContentPane(contentPane);\n    this.card = new CardLayout();\n    this.setLayout(this.card);\n    this.createRefreshListings();\n}\n\npublic void createRefreshListings() {\n    RefreshListings refresh = new RefreshListings(this, list);\n    this.add(refresh, &quot;RefreshListings&quot;);\n    this.card.show(getContentPane(), &quot;RefreshListings&quot;);\n}\npublic void createListings() {\n    Listings list = new Listings(this);\n    this.add(list, &quot;Listings&quot;);\n    this.card.show(getContentPane(), &quot;Listings&quot;);\n}\npublic Listings getListingPanel() {\n    return list;\n}\n</code></pre>\n<p>My Listings:</p>\n<pre><code>public class Listings extends JPanel {\n\n    private static final long serialVersionUID = 1L;\n    private MainFrame main;\n    private JList list;\n    private String arr = &quot;QEQEE&quot;;\n    /**\n     * Create the panel.\n     */\n    public Listings(MainFrame main) {\n        this.main = main;\n        setLayout(null);\n        \n        JScrollPane scrollPane = new JScrollPane();\n        scrollPane.setBounds(66, 36, 285, 164);\n        add(scrollPane);\n        \n        this.list = new JList();\n        scrollPane.setViewportView(list);\n        \n        JButton btnNewButton = new JButton(&quot;New button&quot;);\n        btnNewButton.setBounds(214, 210, 85, 21);\n        add(btnNewButton);\n    }\n    public void populateList() {\n        DefaultListModel model = new DefaultListModel();\n        model.addElement(arr);\n        this.list.setModel(model);\n    }\n}\n</code></pre>\n<p>My RefreshListings:</p>\n<pre><code>public class RefreshListings extends JPanel {\n\n    private static final long serialVersionUID = 1L;\n    private MainFrame main;\n    private Listings list;\n    /**\n     * Create the panel.\n     */\n    public RefreshListings(MainFrame main) {\n        this.main = main;\n        setLayout(null);\n        \n        JButton btnNewButton = new JButton(&quot;New button&quot;);\n        btnNewButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                main.createListings(); // swap to Listing Panel\n                main.getListingPanel.populateList(); // Refresh JList\n            }\n        });\n        btnNewButton.setBounds(180, 126, 85, 21);\n        add(btnNewButton);\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "swing", "jlist" ],
    "owner" : {
      "account_id" : 25909995,
      "reputation" : 41,
      "user_id" : 19634433,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
      "display_name" : "boy",
      "link" : "https://stackoverflow.com/users/19634433/boy"
    },
    "is_answered" : true,
    "view_count" : 86,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1749746454,
    "creation_date" : 1749641182,
    "link" : "https://stackoverflow.com/questions/79661902/java-gui-jlist-not-updating-when-switching-jpanel-with-cardlayout",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79662465,
    "question_id" : 79661902,
    "body" : "<p>Answer is here</p>\n<p>Communicate child panel with parent panel so child panel will not be destroy after switching panel. If no parent panel, the old screen will be destroyed, you lose stored references and you have to rebuild every screen each time.</p>\n<pre><code>// MainFrame\npublic MainFrame() {\n      list = new Listings();\n      refresh = new RefreshListings(this);\n      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n      setBounds(100,100,450,300);\n      card = new CardLayout();;\n      setLayout(this.card);\n      contentPane = new JPanel(card); // pass instance of cardlayout to contentPane\n      contentPane.add(refresh, &quot;Refresh&quot;); // add RefreshListing to contentPane Panel\n      contentPane.add(list, &quot;listings&quot;); // add Listings to contentPane Panel\n      setContentPane(contentPane);\n}\npublic void showPanel(String name) {\n      card.show(contentPane, name);\n}\npublic Listings getListingPanel() {\n      return list;\n}\n\n// RefreshListings\npublic class RefreshListings extends JPanel {\n      private MainFrame main;\n\n      public RefreshListings(MainFrame main) {\n           this.main = main;\n           JButton btnNewButton = new JButton(&quot;New button&quot;);\n           btnNewButton.addActionListener(new ActionListener() {\n                public void actionPerformed(ActionEvent e) {\n                           main.getListingPanel().populateList();\n                           main.showPanel(&quot;listings&quot;);\n                }\n      });\n       btnNewButton.setBounds(180,126,85,21);\n       add(btnNewButton);\n      }\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 25909995,
      "reputation" : 41,
      "user_id" : 19634433,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
      "display_name" : "boy",
      "link" : "https://stackoverflow.com/users/19634433/boy"
    },
    "creation_date" : 1749666213,
    "last_activity_date" : 1749746454,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79662350,
    "question_id" : 79661902,
    "body" : "<p>The problem is split between the body of <strong>Listing</strong>, its constructor and its <strong>populate()</strong> method.<br />\nIn the body you should declare:</p>\n<pre><code>DefaultListModel model;\n</code></pre>\n<p>in the constructor you should instantiate it:</p>\n<pre><code>model = new DefaultListModel();\n</code></pre>\n<p>and in the <strong>populate()</strong> method it should be:</p>\n<pre><code>public void populateList() {\n   model.addElement( arr );\n   list.setModel( model );\n}\n</code></pre>\n<p>With the previous method:</p>\n<pre><code>public void populateList() {\n    DefaultListModel model = new DefaultListModel();\n    model.addElement(arr);\n    this.list.setModel(model);\n}\n</code></pre>\n<p>with each call, you created a new (empty) model, added a string to it, and assigned it to <strong>list</strong>, so it only contained one string.</p>\n<p>The full class:</p>\n<pre><code>public class Listings extends JPanel {\n\n   private static final long serialVersionUID = 1L;\n   private MainFrame main;\n   DefaultListModel model;\n   private JList list;\n   private String arr = &quot;QEQEE&quot;;\n\n   public Listings( MainFrame main ) {\n      this.main = main;\n      setLayout( null );\n      JScrollPane scrollPane = new JScrollPane();\n      scrollPane.setBounds( 66, 36, 285, 164 );\n      add( scrollPane );\n      list = new JList();\n      scrollPane.setViewportView( list );\n      model = new DefaultListModel();\n\n      JButton btnNewButton = new JButton( &quot;New button&quot; );\n      btnNewButton.addActionListener( new ActionListener() {\n         public void actionPerformed( ActionEvent e ) {\n            populateList();\n         }\n      } );\n      btnNewButton.setBounds( 214, 210, 85, 21 );\n      add( btnNewButton );\n   }\n\n   public void populateList() {\n      model.addElement( arr );\n      list.setModel( model );\n   }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 916,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1749659067,
    "last_activity_date" : 1749660805,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140506188,
    "post_id" : 79661902,
    "body" : "1) Don&#39;t use a null layout. Swing was designed to be used with layout managers. 2) When you swap panels, don&#39;t create new panels. Instead, the panels should be created and added to the frame when you create the frame. Then when you want to swap panels you just use the CardLayout show(...) method.",
    "score" : 3,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1749658981,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140506133,
    "post_id" : 79661902,
    "body" : "I am assuming it is not possible to populate a JList while switching to another JPanel?",
    "score" : 0,
    "owner" : {
      "account_id" : 25909995,
      "reputation" : 41,
      "user_id" : 19634433,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
      "display_name" : "boy",
      "link" : "https://stackoverflow.com/users/19634433/boy"
    },
    "creation_date" : 1749657953,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140506088,
    "post_id" : 79661902,
    "body" : "not sure what the real problem, but one of many possibilities, from the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Container.html#add(java.awt.Component)\" rel=\"nofollow noreferrer\">documentation</a> of <code>add()</code>: &quot;<i>This method changes layout-related information, and therefore, invalidates the component hierarchy. If the container has already been displayed, the hierarchy must be validated thereafter in order to display the added component.</i>&quot; (often seen on this site) -- I would also check the official <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Swing Tutorial</a> from Oracle",
    "score" : 0,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1749657050,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140505764,
    "post_id" : 79661902,
    "body" : "Is it possible to refresh or populate a JList before switching to the JPanel? If yes, what’s the correct approach to update a JList in another JPanel just before showing that panel using CardLayout?",
    "score" : 0,
    "owner" : {
      "account_id" : 25909995,
      "reputation" : 41,
      "user_id" : 19634433,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
      "display_name" : "boy",
      "link" : "https://stackoverflow.com/users/19634433/boy"
    },
    "creation_date" : 1749651308,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79662350" : [ {
      "comment_id" : 140506495,
      "post_id" : 79662350,
      "body" : "I got it bro, it is working. I communicate between RefreshListing and Listings Panel with a mainPanel. In this way, the panel will not be destroy whenever i switch to another panel.",
      "score" : 0,
      "owner" : {
        "account_id" : 25909995,
        "reputation" : 41,
        "user_id" : 19634433,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
        "display_name" : "boy",
        "link" : "https://stackoverflow.com/users/19634433/boy"
      },
      "creation_date" : 1749664623,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140506485,
      "post_id" : 79662350,
      "body" : "so its not possible to populate in RefreshListings while changing to Listings panel. What will you suggest if i want to do this?",
      "score" : 0,
      "owner" : {
        "account_id" : 25909995,
        "reputation" : 41,
        "user_id" : 19634433,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
        "display_name" : "boy",
        "link" : "https://stackoverflow.com/users/19634433/boy"
      },
      "creation_date" : 1749664413,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140506379,
      "post_id" : 79662350,
      "body" : "when you change the panel (<b>RefreshListings</b> to <b>Listings</b>) <b>RefreshListings</b> becomes inaccessible, so you must use the one you originally configured, or remodel the entire <i>GUI</i>.",
      "score" : 0,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1749662126,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140506324,
      "post_id" : 79662350,
      "body" : "Yes, i removed the listener from btnNewButton because it is not the button i want to populate the list from. I want to populate from RefreshListing btnNewButton listener.",
      "score" : 0,
      "owner" : {
        "account_id" : 25909995,
        "reputation" : 41,
        "user_id" : 19634433,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
        "display_name" : "boy",
        "link" : "https://stackoverflow.com/users/19634433/boy"
      },
      "creation_date" : 1749661431,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140506297,
      "post_id" : 79662350,
      "body" : "I have added the complete code, I see that you have edited the question and removed the listener from <b>btnNewButton</b>, why?",
      "score" : 0,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1749660905,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140506286,
      "post_id" : 79662350,
      "body" : "I tried but it doesn&#39;t work. I still have to manually populate it when i am at listing panel.",
      "score" : 0,
      "owner" : {
        "account_id" : 25909995,
        "reputation" : 41,
        "user_id" : 19634433,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
        "display_name" : "boy",
        "link" : "https://stackoverflow.com/users/19634433/boy"
      },
      "creation_date" : 1749660506,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79662465" : [ {
      "comment_id" : 140509242,
      "post_id" : 79662465,
      "body" : "Thanks, I have deleted the unnecessary lines. As for layout managers, I have always been using either absolute or card layout. Which layout is widely use?",
      "score" : 0,
      "owner" : {
        "account_id" : 25909995,
        "reputation" : 41,
        "user_id" : 19634433,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t7b6h.jpg?s=256",
        "display_name" : "boy",
        "link" : "https://stackoverflow.com/users/19634433/boy"
      },
      "creation_date" : 1749746599,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140507168,
      "post_id" : 79662465,
      "body" : "(1+) for showing your solution, based on my comment. Now, all you need to do is get rid of the null layout. Learn to use layout managers. They simplify the code in the long run.",
      "score" : 0,
      "owner" : {
        "account_id" : 44852,
        "reputation" : 324701,
        "user_id" : 131872,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
        "display_name" : "camickr",
        "link" : "https://stackoverflow.com/users/131872/camickr"
      },
      "creation_date" : 1749687172,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140507020,
      "post_id" : 79662465,
      "body" : "Very well, you have achieved it, but you have some lines left that are not used, delete them  <b>contentPane = new JPanel();</b> and ** contentPane.setBorder(new EmptyBorder(5,5,5,5));**.",
      "score" : 0,
      "owner" : {
        "account_id" : 10843443,
        "reputation" : 916,
        "user_id" : 20882864,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
        "display_name" : "Marce Puente",
        "link" : "https://stackoverflow.com/users/20882864/marce-puente"
      },
      "creation_date" : 1749678722,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}