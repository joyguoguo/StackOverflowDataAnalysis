{
  "question" : {
    "question_id" : 79785110,
    "title" : "Custom postgres dialect isn&#39;t being picked up by spring",
    "body" : "<p>I have a Spring project with a PostgreSQL database. I'm trying to add a custom dialect, but I've noticed that Spring is not loading it.</p>\n<p>My dialect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.company.configuration;\n\npublic class CustomPostgreSQLDialect extends PostgreSQLDialect {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomPostgreSQLDialect.class);\n\n    public CustomPostgreSQLDialect() {\n        super();\n        LOGGER.warn(&quot;=== CustomPostgreSQLDialect INITIALIZED ===&quot;);\n    }\n}\n</code></pre>\n<p>and this is how I use it in the properties file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  jpa:\n    database: POSTGRESQL\n    database-platform: org.company.configuration.CustomPostgreSQLDialect\n</code></pre>\n<p>at startup I don't see the log <code>=== CustomPostgreSQLDialect INITIALIZED ===</code>, any idea what might be the issue? I've tried also to call it like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.company.configuration.CustomPostgreSQLDialect\n</code></pre>\n<p>This didn't work either. I tried recompiling and force cache cleaning via the command <code>mvn clean compile -U</code>, but still no luck!</p>\n",
    "tags" : [ "java", "spring", "postgresql", "hibernate", "dialect" ],
    "owner" : {
      "account_id" : 2966321,
      "reputation" : 3614,
      "user_id" : 2519395,
      "user_type" : "registered",
      "accept_rate" : 76,
      "profile_image" : "https://i.sstatic.net/8BTlv.jpg?s=256",
      "display_name" : "SlimenTN",
      "link" : "https://stackoverflow.com/users/2519395/slimentn"
    },
    "is_answered" : false,
    "view_count" : 133,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1760085389,
    "creation_date" : 1759902736,
    "link" : "https://stackoverflow.com/questions/79785110/custom-postgres-dialect-isnt-being-picked-up-by-spring",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79786407,
    "question_id" : 79785110,
    "body" : "<h2>Spring Boot 3.5.6</h2>\n<p>Before testing your custom CustomPostgreSQLDialect, use the defaults without specifying a dialect. Add the debug logging setting <code>org.hibernate.orm.dialect: DEBUG</code> to your application.yaml file and test.\nYou should normally see the default <code>Using dialect:org.hibernate.dialect.PostgreSQLDialect, version: 18.0</code> logged.</p>\n<p>This step is to confirm that your JPA application runs correctly.\nAfter confirming that your JPA application runs correctly, configure it to use the CustomPostgreSQLDialect ( <code>dialect: org.company.configuration.CustomPostgreSQLDialect</code>).</p>\n<h3>application.yml - default - no dialect config</h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/demodb\n    driver-class-name: org.postgresql.Driver\n    username: demouser\n    password: Passw0rd!\n\n  jpa:\n    properties:\n      hibernate:\n        format_sql: true\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n\nlogging:\n  level:\n    # --- Spring Data / ORM ---\n    org.springframework.data.jpa: DEBUG\n\n    # --- Hibernate ---    \n    org.hibernate.orm.dialect: DEBUG\n    org.hibernate.engine.jdbc.env.internal: DEBUG\n    org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl: DEBUG\n    \n    # --- Custom Dialect ---\n    com.example.CustomPostgreSQLDialect: DEBUG\n</code></pre>\n<h4>Build</h4>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn clean package\n</code></pre>\n<h4>Run</h4>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar target/app.jar\n</code></pre>\n<h4>Output</h4>\n<pre class=\"lang-none prettyprint-override\"><code> :: Spring Boot ::                (v3.5.6)\n\n2025-10-09T20:22:40.623+08:00 DEBUG 14973 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : Database -&gt;\n       name : PostgreSQL\n    version : 18.0 (Debian 18.0-1.pgdg13+3)\n      major : 18\n      minor : 0\n2025-10-09T20:22:40.623+08:00 DEBUG 14973 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : Driver -&gt;\n       name : PostgreSQL JDBC Driver\n    version : 42.7.7\n      major : 42\n      minor : 7\n\n2025-10-09T20:22:40.689+08:00 DEBUG 14973 --- [           main] org.hibernate.orm.dialect                : HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: 18.0\n</code></pre>\n<ul>\n<li>You can find out that the PostgreSQL version is 18. (My PostgreSQL server version)</li>\n<li>If dialect is not set, the default is <code>org.hibernate.dialect.PostgreSQLDialect, version: 18.0</code></li>\n</ul>\n<h3>Find out JPA, Hibernate version</h3>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:tree\n</code></pre>\n<p>get</p>\n<ul>\n<li>org.springframework.boot:spring-boot-starter-data-jpa:jar:3.5.6:compile</li>\n<li>org.springframework.data:spring-data-jpa:jar:3.5.4:compile</li>\n<li>org.hibernate.orm:hibernate-core:jar:6.6.29.Final:compile</li>\n<li>org.hibernate.common:hibernate-commons-annotations:jar:7.0.3.Final:runtime</li>\n</ul>\n<p>So, Hibernate 6.6.</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/6.6/javadocs/org/hibernate/dialect/package-summary.html\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/6.6/javadocs/org/hibernate/dialect/package-summary.html</a></p>\n<ul>\n<li>PostgreSQLDialect A SQL dialect for PostgreSQL 11 and above.</li>\n</ul>\n<h3>CustomPostgreSQLDialect.java</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package org.company.configuration;\n\nimport org.hibernate.dialect.PostgreSQLDialect;\nimport org.hibernate.engine.jdbc.dialect.spi.DialectResolutionInfo;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class CustomPostgreSQLDialect extends PostgreSQLDialect {\n    private static final Logger logger = LoggerFactory.getLogger(CustomPostgreSQLDialect.class);\n\n    public CustomPostgreSQLDialect() {\n        super();\n        logger.warn(&quot;&gt;&gt;&gt; CustomPostgreSQLDialect INITIALIZED&quot;);\n    }\n\n    public CustomPostgreSQLDialect(DialectResolutionInfo info) {\n        super(info);\n        logger.warn(&quot;&gt;&gt;&gt; CustomPostgreSQLDialect INITIALIZED DialectResolutionInfo info&quot;);\n    }\n}\n</code></pre>\n<h3>application.yml - CustomPostgreSQLDialect</h3>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  datasource:\n    url: jdbc:postgresql://localhost:5432/demodb\n    driver-class-name: org.postgresql.Driver\n    username: demouser\n    password: Passw0rd!\n\n  jpa:\n    properties:\n      hibernate:\n        dialect: org.company.configuration.CustomPostgreSQLDialect\n        format_sql: true\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n\nlogging:\n  level:\n    # --- Spring Data / ORM ---\n    org.springframework.data.jpa: DEBUG\n\n    # --- Hibernate ---\n    org.hibernate.orm.dialect: DEBUG\n    org.hibernate.engine.jdbc.env.internal: DEBUG\n    org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl: DEBUG\n    \n    # --- Custom Dialect ---\n    com.example.CustomPostgreSQLDialect: DEBUG\n</code></pre>\n<h4>Build</h4>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn clean package\n</code></pre>\n<h4>Run</h4>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar target/app.jar\n</code></pre>\n<h4>Output</h4>\n<pre class=\"lang-none prettyprint-override\"><code> :: Spring Boot ::                (v3.5.6)\n\n2025-10-09T20:27:23.436+08:00 DEBUG 15456 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : Database -&gt;\n       name : PostgreSQL\n    version : 18.0 (Debian 18.0-1.pgdg13+3)\n      major : 18\n      minor : 0\n2025-10-09T20:27:23.436+08:00 DEBUG 15456 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : Driver -&gt;\n       name : PostgreSQL JDBC Driver\n    version : 42.7.7\n      major : 42\n      minor : 7\n\n2025-10-09T20:27:23.463+08:00  WARN 15456 --- [           main] o.c.c.CustomPostgreSQLDialect            : &gt;&gt;&gt; CustomPostgreSQLDialect INITIALIZED DialectResolutionInfo info\n2025-10-09T20:27:23.464+08:00 DEBUG 15456 --- [           main] org.hibernate.orm.dialect                : HHH035001: Using dialect: org.company.configuration.CustomPostgreSQLDialect, version: 18.0\n</code></pre>\n<ul>\n<li>DEBUG 15456 --- [           main] org.hibernate.orm.dialect                : HHH035001: Using dialect: org.company.configuration.CustomPostgreSQLDialect, version: 18.0</li>\n<li>WARN 15456 --- [           main] o.c.c.CustomPostgreSQLDialect            : &gt;&gt;&gt; CustomPostgreSQLDialect INITIALIZED DialectResolutionInfo info</li>\n</ul>\n<p>Please add a logging level setting to application.yml to display which class of dialect is being loaded.</p>\n<p>Please note that the log shows that the <code>CustomPostgreSQLDialect(DialectResolutionInfo info)</code> constructor with the passed parameters is called instead of the empty constructor.</p>\n<p>Also, remember to add the <code>org.hibernate.orm.dialect: DEBUG</code> logging setting to your application.yaml file.\nYou should see <code>HHH035001: Using dialect: org.company.configuration.CustomPostgreSQLDialect, version: 18.0</code> in the log, confirming that CustomPostgreSQLDialect is being used.</p>\n<p>This version of the answer is modified from the answer to a previous question (CustomH2Dialect in Hibernate 6.5).\nCustomH2Dialect in Hibernate 6.5 (<a href=\"https://stackoverflow.com/questions/79170022/customh2dialect-in-hibernate-6-5/79172181#79172181\">CustomH2Dialect in Hibernate 6.5</a>)</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26698569,
      "reputation" : 4070,
      "user_id" : 20306007,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
      "display_name" : "life888888",
      "link" : "https://stackoverflow.com/users/20306007/life888888"
    },
    "creation_date" : 1760012971,
    "last_activity_date" : 1760085263,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140783431,
    "post_id" : 79785110,
    "body" : "Use either <code>spring.jpa.database</code> or <code>spring.jpa.database-platform</code> not both. As you want a custom one ditch the <code>spring.jpa.database</code> as that will only resolve to the default Postgres Dialect.",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1759912974,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79786407" : [ {
      "comment_id" : 140786645,
      "post_id" : 79786407,
      "body" : "@SlimenTN Regarding your question, the tag is <code>Spring</code> instead of <code>Spring Boot</code>, but your configuration file uses <code>application.yaml</code> . So, I need to confirm whether your application is <code>Spring Boot</code> or <code>Spring</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 26698569,
        "reputation" : 4070,
        "user_id" : 20306007,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
        "display_name" : "life888888",
        "link" : "https://stackoverflow.com/users/20306007/life888888"
      },
      "creation_date" : 1760023528,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140786515,
      "post_id" : 79786407,
      "body" : "@SlimenTN After change yaml file, remember to re-run the build (<code>mvn clean package</code>), and then re-run the program (<code>java -jar target&#47;app.jar</code>)",
      "score" : 0,
      "owner" : {
        "account_id" : 26698569,
        "reputation" : 4070,
        "user_id" : 20306007,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
        "display_name" : "life888888",
        "link" : "https://stackoverflow.com/users/20306007/life888888"
      },
      "creation_date" : 1760019603,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140786508,
      "post_id" : 79786407,
      "body" : "@SlimenTN Maybe you should post the contents of your complete minimal working Spring project so others can reproduce the same results.",
      "score" : 0,
      "owner" : {
        "account_id" : 26698569,
        "reputation" : 4070,
        "user_id" : 20306007,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
        "display_name" : "life888888",
        "link" : "https://stackoverflow.com/users/20306007/life888888"
      },
      "creation_date" : 1760019414,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140786503,
      "post_id" : 79786407,
      "body" : "spring does not load my dialet, even after setting in the yaml file I see this in the logs <code>HHH035001: Using dialect: org.hibernate.dialect.PostgreSQLDialect, version: 15.12</code>",
      "score" : 0,
      "owner" : {
        "account_id" : 2966321,
        "reputation" : 3614,
        "user_id" : 2519395,
        "user_type" : "registered",
        "accept_rate" : 76,
        "profile_image" : "https://i.sstatic.net/8BTlv.jpg?s=256",
        "display_name" : "SlimenTN",
        "link" : "https://stackoverflow.com/users/2519395/slimentn"
      },
      "creation_date" : 1760019248,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}