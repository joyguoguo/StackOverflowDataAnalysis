{
  "question" : {
    "question_id" : 79687123,
    "title" : "When using html2pdf to convert HTML to PDF, the CSS styles are lost",
    "body" : "<p>Problem description:\nI am using html2pdf to convert HTML to PDF, but I found that some CSS styles (such as flexbox) are not rendered correctly. I expected the PDF to maintain the same layout as the web page, but the generated PDF has incorrect styles.</p>\n<p>java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static byte[] createPDF(String htmlTmpStr, String fontFile) throws Exception {\n        ByteArrayOutputStream outputStream = null;\n        byte[] result = null;\n            outputStream = new ByteArrayOutputStream();\n            ITextRenderer renderer = new ITextRenderer();\n            renderer.setDocumentFromString(htmlTmpStr);\n            renderer.getSharedContext().setReplacedElementFactory(new B64ImgReplacedElementFactory());\n            renderer.getSharedContext().getTextRenderer().setSmoothingThreshold(1);\n\n            ITextFontResolver fontResolver = renderer.getFontResolver();\n            fontResolver.addFont(fontFile, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);\n            renderer.layout();\n            renderer.createPDF(outputStream);\n            result = outputStream.toByteArray();\n            outputStream.flush();\n            outputStream.close();\n        return result;\n    }\n</code></pre>\n<p>css code:</p>\n<pre class=\"lang-css prettyprint-override\"><code>&lt;style type=&quot;text/css&quot;&gt;\n        * {\n            -webkit-box-sizing: border-box;\n            -moz-box-sizing: border-box;\n            box-sizing: border-box;\n        }\n\n        body {\n            font-family: &quot;Arial&quot;;\n        }\n\n        @media print {\n            body {\n                -webkit-print-color-adjust: exact;\n            }\n        }\n\n        @media print {\n            @page {\n                size: 80mm 80mm;\n                margin-top: 0;\n                margin-right: 1rem;\n                margin-bottom: 0;\n                margin-left: 0;\n                min-height: auto;\n            }\n            html,\n            .content {\n                width: 80mm;\n                height: 85mm;\n                content: &quot;.&quot;;\n            }\n        }\n        .content.page-break {\n            display: block;\n            page-break-after: always;\n        }\n        .content {\n            width: 80mm;\n            height: 85mm;\n            background-color: white;\n            position: relative;\n            margin: 4px;\n        }\n        .line-clamp-1 {\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n        }\n        .line-clamp-2 {\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n            -webkit-box-orient: vertical;\n        }\n        .line-clamp-3 {\n            display: -webkit-box;\n            -webkit-line-clamp: 3;\n            -webkit-box-orient: vertical;\n        }\n        .line-clamp-4 {\n            display: -webkit-box;\n            -webkit-line-clamp: 4;\n            -webkit-box-orient: vertical;\n        }\n        .line-clamp-5 {\n            display: -webkit-box;\n            -webkit-line-clamp: 5;\n            -webkit-box-orient: vertical;\n        }\n        .line-clamp-6 {\n            display: -webkit-box;\n            -webkit-line-clamp: 6;\n            -webkit-box-orient: vertical;\n        }\n        .module {\n            overflow: hidden;\n        }\n        .line {\n            line-height: 12px;\n        }\n        .items :last-child {\n            border-bottom: 1px dotted;\n        }\n        #process-bar {\n            margin:auto;\n            position: fixed;\n            z-index: 1000;\n            width: 98%;\n            height: 8px;\n            top:  50%;\n            left: 50%;\n            transform: translate(-50%,-50%);\n        }\n        .w3-light-grey,\n        .w3-hover-light-grey:hover,\n        .w3-light-gray,\n        .w3-hover-light-gray:hover {\n            color: #000 !important;\n            background-color: #f1f1f1 !important;\n        }\n        .w3-round,\n        .w3-round-medium {\n            border-radius: 4px;\n        }\n        .w3-round-large {\n            border-radius: 8px;\n        }\n        .w3-green,\n        .w3-hover-green:hover {\n            color: #ff8328 !important;\n            background-color: #ff8328 !important;\n            height: 8px;\n            font-size: 1px;\n        }\n    &lt;/style&gt;\n</code></pre>\n<p>Error message:\nThere was no error reported, but the flex layout in the generated PDF is invalid and the text is left-aligned.\nThe attempted solutions:\nWe tried modifying the CSS, but the layout did not meet the requirements.\nWe consulted the documentation of html2pdf and found that it might not support some modern CSS features.\nQuestion:\nAre there any other Java libraries that can better support modern CSS?</p>\n",
    "tags" : [ "java", "css", "html2pdf" ],
    "owner" : {
      "account_id" : 30068602,
      "reputation" : 1,
      "user_id" : 23043082,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zU41w.jpg?s=256",
      "display_name" : "time",
      "link" : "https://stackoverflow.com/users/23043082/time"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1751446223,
    "creation_date" : 1751446223,
    "link" : "https://stackoverflow.com/questions/79687123/when-using-html2pdf-to-convert-html-to-pdf-the-css-styles-are-lost",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140559138,
    "post_id" : 79687123,
    "body" : "@KJ I&#39;m a bit lost by your comment - how is this a design issue not a coding issue? html2pdf seems to cope only with rather simple flex usage, but (I understand, haven&#39;t tried it) some other converters might work better (Pupeteer was mentioned but I&#39;ve not tried it).",
    "score" : 0,
    "owner" : {
      "account_id" : 15057644,
      "reputation" : 37567,
      "user_id" : 10867454,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b83d3504a2953fdb32c5d499ffffb882?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "A Haworth",
      "link" : "https://stackoverflow.com/users/10867454/a-haworth"
    },
    "creation_date" : 1751471097,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140558358,
    "post_id" : 79687123,
    "body" : "Your only real question appears to be this: <i>&quot;Are there any other Java libraries that can better support modern CSS?&quot;</i>.  That is off-topic for StackOverflow.",
    "score" : 1,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723428,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1751455620,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}