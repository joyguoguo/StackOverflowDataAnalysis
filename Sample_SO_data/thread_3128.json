{
  "question" : {
    "question_id" : 79570315,
    "title" : "MapStruct and Spring-Boot 3",
    "body" : "<p>I am having a problem where Spring Boot 3 is unable to find my MapStruct mapper implementation. Most questions and answers I have found online seem to cover where MapStruct hasn't created the MapperImpl as a bean, but I have generated implementation classes, annotated as @Components.</p>\n<p>I have a minimal reproduction on github <a href=\"https://github.com/glittle1972/mapstruct\" rel=\"nofollow noreferrer\">here</a></p>\n<p>I believe my POM is correct with mapstruct included as a dependency, and the mapstruct-processor included in the annotation processor path.</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>My implementation class is present under target/generated-sources/annotations, and I've set the componentModel to spring to ensure it is annotated as a @Component:</p>\n<pre><code>package com.example.demo;\n\nimport javax.annotation.processing.Generated;\nimport org.springframework.stereotype.Component;\n\n@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2025-04-12T09:58:09+0000&quot;,\n    comments = &quot;version: 1.6.3, compiler: javac, environment: Java 21.0.5&quot;\n)\n@Component\npublic class MyMapperImpl implements MyMapper {\n\n    @Override...\n</code></pre>\n<p>However when running the app, or even running tests while executing mvn clean install, I get the follow errors:</p>\n<pre><code>2025-04-12T09:58:45.338Z  WARN 12073 --- [demo] [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'demoController' defined in file [/workspaces/spring/mapstruct/target/classes/com/example/demo/DemoController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'com.example.demo.MyMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n2025-04-12T09:58:45.340Z  INFO 12073 --- [demo] [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2025-04-12T09:58:45.346Z  INFO 12073 --- [demo] [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2025-04-12T09:58:45.363Z ERROR 12073 --- [demo] [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.example.demo.DemoController required a bean of type 'com.example.demo.MyMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.example.demo.MyMapper' in your configuration.\n</code></pre>\n<p>So, I am pretty sure I have a bean of type com.example.demo.MyMapperImpl, which implements com.example.demo.MyMapper ?</p>\n<p>The errors can be replicated running</p>\n<pre><code>user&gt; ./mvnw clean install // error on testing\nuser&gt; ./mvnw clean install -DskipTests=true // builds OK\nuser&gt; ./mvnw spring-boot:run // error on run\n</code></pre>\n<p>I'm using JDK21, within a VSCode Java devcontainer in that makes a difference. Additionally, in my actual application, I added trace logging for org.springframework.beans and could confirm that there was a myMapperImpl bean in the ApplicationContext, but no bean of type myMapper could be found.</p>\n<p>Thank you.</p>\n",
    "tags" : [ "java", "spring-boot", "mapstruct" ],
    "owner" : {
      "account_id" : 1003762,
      "reputation" : 15,
      "user_id" : 1018016,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8d4836d05713ec406ca4fcdd5797b2bd?s=256&d=identicon&r=PG",
      "display_name" : "chorlton",
      "link" : "https://stackoverflow.com/users/1018016/chorlton"
    },
    "is_answered" : true,
    "view_count" : 518,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744544268,
    "creation_date" : 1744453709,
    "link" : "https://stackoverflow.com/questions/79570315/mapstruct-and-spring-boot-3",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79571493,
    "question_id" : 79570315,
    "body" : "<p>The issue lies somewhere with VS Code, because I've tried it on the command line (both Windows and Linux in WSL) and it worked just fine.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1744544268,
    "last_activity_date" : 1744544268,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140328371,
    "post_id" : 79570315,
    "body" : "I&#39;ve installed jdk21-openjdk with maven 3.9.9 on my host laptop and it works perfectly, so something within the VSCode devcontainer :/  Cheers for trying that out. If you want to post it as an answer I&#39;ll mark it as accepted.",
    "score" : 0,
    "owner" : {
      "account_id" : 1003762,
      "reputation" : 15,
      "user_id" : 1018016,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8d4836d05713ec406ca4fcdd5797b2bd?s=256&d=identicon&r=PG",
      "display_name" : "chorlton",
      "link" : "https://stackoverflow.com/users/1018016/chorlton"
    },
    "creation_date" : 1744483533,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140328019,
    "post_id" : 79570315,
    "body" : "For me, both <code>.&#47;mvnw clean install</code> and <code>.&#47;mvnw spring-boot:run</code> work without problems. Can you try a different machine?",
    "score" : 0,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1744473344,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140327789,
    "post_id" : 79570315,
    "body" : "Thanks for the hint. There is intermittent behaviour where VSCode complains about classes not being resolved, but then fixes them when opening the files. So it kind of sometimes does.I should have mentioned that the failures are with Maven though which I&#39;ll update the question to reflect.",
    "score" : 0,
    "owner" : {
      "account_id" : 1003762,
      "reputation" : 15,
      "user_id" : 1018016,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8d4836d05713ec406ca4fcdd5797b2bd?s=256&d=identicon&r=PG",
      "display_name" : "chorlton",
      "link" : "https://stackoverflow.com/users/1018016/chorlton"
    },
    "creation_date" : 1744468078,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140327488,
    "post_id" : 79570315,
    "body" : "A fresh clone of your repo installs just fine here using Git Bash. Maybe VS Code doesn&#39;t add <code>target&#47;generated-sources&#47;annotations</code> to the class path. Eclipse doesn&#39;t do that automatically, and it sometimes has issues finding classes. VS Code may have the same issue. Try adding the folder explicitly (no idea how though, I don&#39;t use VS Code for Java).",
    "score" : 0,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1744457628,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79571493" : [ {
      "comment_id" : 140330351,
      "post_id" : 79571493,
      "body" : "I&#39;ve confirmed that      user&gt; ./mvnw clean install     user&gt; ./mvnw spring-boot:run  works from a terminal without VSCode.It also works from within VSCode when the Java extension is not installed.  The issues start once the Java extension for VSCode is installed. It appears to be some timing issue between VSCode deciding to recompile classes and running Maven. It is not affected by my POM or Java code so I&#39;ll accept Rob&#39;s answer for the hints it provded.",
      "score" : 0,
      "owner" : {
        "account_id" : 1003762,
        "reputation" : 15,
        "user_id" : 1018016,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/8d4836d05713ec406ca4fcdd5797b2bd?s=256&d=identicon&r=PG",
        "display_name" : "chorlton",
        "link" : "https://stackoverflow.com/users/1018016/chorlton"
      },
      "creation_date" : 1744561358,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}