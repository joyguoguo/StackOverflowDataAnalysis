{
  "question" : {
    "question_id" : 79747022,
    "title" : "Spring Kafka @RetryableTopic does not identify Manually Created Retry Topics and DLT",
    "body" : "<p>I am using RetryableTopic to enable kafka retry mechanism in a consumer.\nThis is the sample code snippet I have tried.</p>\n<pre><code>@RetryableTopic(\n        attempts = &quot;3&quot;, \n        backoff = @Backoff(delay = 2000, multiplier = 2.0),\n        autoCreateTopics = &quot;false&quot;,\n        retryTopicSuffix = &quot;.retry&quot;,\n        dltTopicSuffix = &quot;.dlq&quot;\n)\n@KafkaListener(\n        groupId = &quot;${group.listener.id}&quot;,\n        topics = {&quot;${topic.name}&quot;},\n        concurrency = &quot;${concurrency}&quot;,\n        properties = {\n                &quot;max.poll.interval.ms=${topic.properties.max.poll.interval.ms}&quot;,\n                &quot;max.poll.records=${topic.properties.max.poll.records}&quot;\n        }\n)\npublic void consume() {\n    // do something\n}\n</code></pre>\n<p>I have created the retry topics and DLT according to the naming convention.</p>\n<p><strong>Original Topic:</strong>\n<em>my.original.topic</em></p>\n<p><strong>Retry Topics:</strong>\n<em>my.original.topic.retry-0,</em>\n<em>my.original.topic.retry-1</em></p>\n<p><strong>DLT:</strong>\n<em>my.original.topic.dlq</em></p>\n<p>But it gives the folowing error. It says retry topics are not present. But they are already created and functioning.\n(To ensure that, Tried to manually publishing for retry topics and DLT and it worked)</p>\n<pre><code>org.apache.kafka.common.errors.TimeoutException: Topic my.original.topic.retry-0 not present in metadata after 60000 ms. \n\nERROR 7824  [ntainer#0-0-C-1] o.s.k.l.DeadLetterPublishingRecoverer    : Dead-letter publication to my.original.topic.retry-0 failed for: omy.original.topic-2@133\n\norg.springframework.kafka.KafkaException: Send failed\nat org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:835) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:792) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:595) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.listener.DeadLetterPublishingRecoverer.publish(DeadLetterPublishingRecoverer.java:690) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.listener.DeadLetterPublishingRecoverer.send(DeadLetterPublishingRecoverer.java:599) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.listener.DeadLetterPublishingRecoverer.sendOrThrow(DeadLetterPublishingRecoverer.java:565) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.listener.DeadLetterPublishingRecoverer.accept(DeadLetterPublishingRecoverer.java:534) ~[spring-kafka-3.3.0.jar:3.3.0]\nat org.springframework.kafka.listener.FailedRecordTracker.attemptRecovery(FailedRecordTracker.java:228) ~[spring-kafka-3.3.0.jar:3.3.0]\n</code></pre>\n<p>What am I missing here?</p>\n",
    "tags" : [ "java", "spring-boot", "apache-kafka", "spring-kafka", "dead-letter" ],
    "owner" : {
      "account_id" : 18045956,
      "reputation" : 57,
      "user_id" : 13116949,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/51ffe07c6b33f204681126f45b2b56c4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kstackr",
      "link" : "https://stackoverflow.com/users/13116949/kstackr"
    },
    "is_answered" : false,
    "view_count" : 79,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1756222407,
    "creation_date" : 1756222407,
    "link" : "https://stackoverflow.com/questions/79747022/spring-kafka-retryabletopic-does-not-identify-manually-created-retry-topics-and",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140701942,
    "post_id" : 79747022,
    "body" : "That&#39;s great! Because you were using a wrong properties, here is a link that is useful to have <a href=\"https://docs.spring.io/spring-boot/appendix/application-properties/index.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/appendix/application-properties/&hellip;</a> All the properties available on Spring framework.",
    "score" : 1,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1756480070,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140700433,
    "post_id" : 79747022,
    "body" : "@JorgeCampos I was able to find the root cause. It was not pointing to the correct bootsrap server. I had to configure spring.kafka.producer.bootstrap-servers explicitly. spring.kafka.properties.bootstrap.servers did not work. Anyway Thank you very much for your inputs and support.",
    "score" : 0,
    "owner" : {
      "account_id" : 18045956,
      "reputation" : 57,
      "user_id" : 13116949,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/51ffe07c6b33f204681126f45b2b56c4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kstackr",
      "link" : "https://stackoverflow.com/users/13116949/kstackr"
    },
    "creation_date" : 1756438025,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140693804,
    "post_id" : 79747022,
    "body" : "Then the message is clear. The topic doesn&#39;t exists. Did you make sure they are available for the application to use (on the environment you are running)?",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1756226809,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140693663,
    "post_id" : 79747022,
    "body" : "@JorgeCampos The problem is in my case I need to use manually created topics by some other party.",
    "score" : 0,
    "owner" : {
      "account_id" : 18045956,
      "reputation" : 57,
      "user_id" : 13116949,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/51ffe07c6b33f204681126f45b2b56c4?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kstackr",
      "link" : "https://stackoverflow.com/users/13116949/kstackr"
    },
    "creation_date" : 1756223510,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140693647,
    "post_id" : 79747022,
    "body" : "maybe this is your problem? <code>autoCreateTopics = &quot;false&quot;,</code>  set it to true.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1756223166,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}