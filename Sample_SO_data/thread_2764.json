{
  "question" : {
    "question_id" : 79597497,
    "title" : "Designing an Android frontend for a Cloak proxy for OpenVPN",
    "body" : "<p>I'm developing an Android app in Java that interfaces with a Go service (Cloak proxy). The proxy listens locally and forwards traffic to an external proxy server.</p>\n<p>My app provides a frontend for the Go service, loaded as a library. I can compile the service with Go Mobile and call its functions in the app.</p>\n<p>However, when OpenVPN connects and the proxy connection is established, the proxy connection resets. I believe this occurs because the network change disrupts existing connections.</p>\n<p>Initially, I thought extending Android's <code>VPNService</code> and using <code>VPNService.protect()</code> for the Go service socket would solve this, as the service supports this feature. However, it didn't work. I then considered that my <code>VPNService</code> implementation might conflict with the OpenVPN app. Instead, I tried using <code>ConnectivityManager.bindProcessToNetwork()</code> with the Wi-Fi network ID, but this also failed.</p>\n<p>Hereâ€™s the Java code snippet from <code>MainActivity.onCreate()</code> where I bind the process to the Wi-Fi network:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);\nfor (Network net : cm.getAllNetworks()) {\n    NetworkInfo info = cm.getNetworkInfo(net);\n    if (info != null &amp;&amp; info.getType() == ConnectivityManager.TYPE_WIFI) {\n        cm.bindProcessToNetwork(net);\n        break;\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "android", "vpn" ],
    "owner" : {
      "user_type" : "does_not_exist",
      "display_name" : "John Goode"
    },
    "is_answered" : false,
    "view_count" : 80,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1745896200,
    "creation_date" : 1745864313,
    "link" : "https://stackoverflow.com/questions/79597497/designing-an-android-frontend-for-a-cloak-proxy-for-openvpn"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}