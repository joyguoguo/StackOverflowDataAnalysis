{
  "question" : {
    "question_id" : 79614201,
    "title" : "upgrading drools project gets unable to resolve ObjectType on CSV decision table",
    "body" : "<p>I am upgrading an existing project from an ancient drools version to 9.44. I have successfully used the following code to compile and test a spreadsheet and now I need it to work against one of my CSV files currently in production.</p>\n<p>Here is my utility method that returns a KieContainer</p>\n<pre><code>/**\n * From a decision table, create a rule container.\n * @param decisionTableFilename the file name of a decision table to be found on the classpath\n * @return a rule base\n */\npublic KieContainer getKieContainer(final String decisionTableFilename){\n    KieServices kieServices = KieServices.Factory.get();\n    Resource resource = ResourceFactory.newClassPathResource(decisionTableFilename, getClass());\n    KieFileSystem kieFileSystem = kieServices.newKieFileSystem().write(resource);\n    KieBuilder kieBuilder = kieServices.newKieBuilder(kieFileSystem);\n    kieBuilder.buildAll();\n    KieRepository kieRepository = kieServices.getRepository();\n    ReleaseId krDefaultReleaseId = kieRepository.getDefaultReleaseId();\n    KieContainer kieContainer = kieServices.newKieContainer(krDefaultReleaseId);\n    return kieContainer;\n}\n</code></pre>\n<p>And here is my test that is running this:</p>\n<pre><code>    Participant part = ParticipantTest.getSummonedParticipant();\n    PoolInfo poolInfo = part.getActivePool();\n    final String courtLocation = &quot;001&quot;;\n    poolInfo.setCourtLocation(courtLocation);\n\n    PostponementRequest postponementRequest = new PostponementRequest();\n    postponementRequest.setPart(part);\n    GregorianCalendar requestDate = new GregorianCalendar(2025, GregorianCalendar.MAY, 5);\n    postponementRequest.setRequestDate(requestDate);\n\n    assertEquals(courtLocation, poolInfo.getCourtLocation());\n    assertEquals(2, postponementRequest.getRequestedDayOfWeek());\n\n    LinkedList&lt;String&gt; list = new LinkedList&lt;&gt;();\n\n    KieContainer kieContainer = droolsUtil.getKieContainer(POSTPONE_RULES_CSV);\n    StatelessKieSession kieSession = kieContainer.newStatelessKieSession();\n\n    List&lt;Object&gt; parms = Arrays.asList(poolInfo, postponementRequest, list);\n    kieSession.execute(parms);\n    assertTrue(postponementRequest.isAllowed());\n</code></pre>\n<p>And here is the output I'm getting:</p>\n<pre><code>WARN  Environment variable M2_HOME is not set\nWARN  File 'rules/postponementRules.drl.csv' is in folder 'rules' but declares package 'postponementRules'. It is advised to have a correspondance between package and folder names.\nERROR Unable to build KieBaseModel:defaultKieBase\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_14']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_14']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_14']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_15']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_15']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_15']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_11']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_11']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_11']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_17']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_17']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_17']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_18']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_18']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_18']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_8']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_8']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_8']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_16']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_16']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_16']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_9']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_9']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_9']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_10']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_10']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_10']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_19']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_19']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_19']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_12']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_12']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_12']\n\nUnable to resolve ObjectType 'PoolInfo' : [Rule name='postponePart_13']\n\nUnable to resolve ObjectType 'LinkedList' : [Rule name='postponePart_13']\n\nUnable to resolve ObjectType 'PostponementRequest' : [Rule name='postponePart_13']\n\nRule Compilation error : [Rule name='postponePart_16']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_161987693659\n\nRule Compilation error : [Rule name='postponePart_11']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_111987693659\n\nRule Compilation error : [Rule name='postponePart_8']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_81987693659\n\nRule Compilation error : [Rule name='postponePart_14']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_141987693659\n\nRule Compilation error : [Rule name='postponePart_18']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_181987693659\n\nRule Compilation error : [Rule name='postponePart_13']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_131987693659\n\nRule Compilation error : [Rule name='postponePart_10']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_101987693659\n\nRule Compilation error : [Rule name='postponePart_9']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_91987693659\n\nRule Compilation error : [Rule name='postponePart_15']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_151987693659\n\nRule Compilation error : [Rule name='postponePart_17']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_171987693659\n\nRule Compilation error : [Rule name='postponePart_19']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_191987693659\n\nRule Compilation error : [Rule name='postponePart_12']\n    cannot find symbol\n  symbol:   variable postponementRequest\n  location: class rule_table.Rule_postponePart_121987693659\n\n\nWARN  Unable to resolve artifact: org.default:artifact:1.0.0\nWARN  Unable to resolve artifact: org.default:artifact:pom:1.0.0\n\njava.lang.RuntimeException: Cannot find KieModule: org.default:artifact:1.0.0\n\n    at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:192)\n    at org.drools.compiler.kie.builder.impl.KieServicesImpl.newKieContainer(KieServicesImpl.java:178)\n    at com.gs.jxx.util.DroolsUtil.getKieContainer(DroolsUtil.java:70)\n    at com.gs.jxx.util.DroolsUtilTest.getKieContainer(DroolsUtilTest.java:69)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)\n</code></pre>\n<p>The research I've done leads me to believe that the RuntimeException is due to the compiler errors, so that's what I'm focusing on.</p>\n<p>I'm also working under the assumption that the <code>cannot find symbol</code> errors are a result of the <code>unable to resolve ObjectType</code>, so that's what I'm focusing on.</p>\n<p>After lots of searching and reading code, I'm still nowhere to the cause of this. My best guess is that it's not finding my java file for the object type.</p>\n<p>Here is the csv file I'm passing in:</p>\n<pre><code>Postponement,1,RuleSet,postponementRules,,,,,,,\nPostponement,2,Import,&quot;com.gs.jxx.bo.PoolInfo,com.gs.jxx.request.PostponementRequest,java.util.LinkedList&quot;,,,,,,,\nPostponement,3,RuleTable postponePart,,,,,,,,\nPostponement,4,CONDITION,CONDITION,CONDITION,CONDITION,CONDITION,CONDITION,ACTION,,\nPostponement,5,pool:PoolInfo...,pool:PoolInfo...,pool:PoolInfo...,list:LinkedList,postponementRequest:PostponementRequest...,postponementRequest:PostponementRequest...,,,\nPostponement,6,courtLocation,&quot;daysBeforeSummons &gt;= $1, daysBeforeSummons &lt;= $2&quot;,ignoreLeadTime,size &gt;= $param,&quot;requestDaysAfterSummons &gt;= $1, requestDaysAfterSummons &lt;= $2&quot;,&quot;requestedDayOfWeek &gt;= $1, requestedDayOfWeek &lt;= $2&quot;,postponementRequest.setAllowed($param);,,\nPostponement,7,Court Location,Lead Time before summons date,IgnoreLeadTime,Always Zero,Postponement Window,Days of Week (2=Monday),Allowed,,\nPostponement,8,111,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,9,111,,true,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,10,222,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,11,222,,true,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,12,333,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\nPostponement,13,333,,true,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\nPostponement,14,801,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\nPostponement,15,801,,true,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\nPostponement,16,401,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,17,401,,true,0,&quot;65,155&quot;,&quot;2,5&quot;,true,,\nPostponement,18,701,&quot;13,999&quot;,false,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\nPostponement,19,701,,true,0,&quot;65,155&quot;,&quot;2,4&quot;,true,,\n</code></pre>\n<p>When I run it through the compiler, it appears to be compiling OK.</p>\n<pre><code>package rule_table;\n//generated from Decision Table\n// rule values at C8, header at C3\nrule &quot;postponePart_8&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;111&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C9, header at C3\nrule &quot;postponePart_9&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;111&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C10, header at C3\nrule &quot;postponePart_10&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;222&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C11, header at C3\nrule &quot;postponePart_11&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;222&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C12, header at C3\nrule &quot;postponePart_12&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;333&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C13, header at C3\nrule &quot;postponePart_13&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;333&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C14, header at C3\nrule &quot;postponePart_14&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;801&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C15, header at C3\nrule &quot;postponePart_15&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;801&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C16, header at C3\nrule &quot;postponePart_16&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;401&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C17, header at C3\nrule &quot;postponePart_17&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;401&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 5)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C18, header at C3\nrule &quot;postponePart_18&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;701&quot;, daysBeforeSummons &gt;= 13, daysBeforeSummons &lt;= 999, ignoreLeadTime == &quot;false&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n\n// rule values at C19, header at C3\nrule &quot;postponePart_19&quot;\n    when\n        pool:PoolInfo(courtLocation == &quot;701&quot;, ignoreLeadTime == &quot;true&quot;)\n        list:LinkedList(size &gt;= 0)\n        postponementRequest:PostponementRequest(requestDaysAfterSummons &gt;= 65, requestDaysAfterSummons &lt;= 155, requestedDayOfWeek &gt;= 2, requestedDayOfWeek &lt;= 4)\n    then\n        postponementRequest.setAllowed(true);\nend\n</code></pre>\n<p>But it won't run. Like I said, the CSV is running in production with drools, so it used to be valid syntax, so it's something that's changed with the versions.</p>\n<p>I'm not sure what to do next.</p>\n<p>EDIT</p>\n<p>After trying many things, I used a spreadsheet we used in production and ran it through the compiler. The interesting difference is that the compiler spat out import statements while there are no import statements coming out of my CSV file. This is the root of the issue.</p>\n<p>Now I just need to figure out why.</p>\n",
    "tags" : [ "java", "drools", "drools-decisiontables" ],
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "is_answered" : true,
    "view_count" : 53,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1747060259,
    "creation_date" : 1746796447,
    "link" : "https://stackoverflow.com/questions/79614201/upgrading-drools-project-gets-unable-to-resolve-objecttype-on-csv-decision-table",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79618063,
    "question_id" : 79614201,
    "body" : "<p>The issue was apparently being caused by the two extra columns at the beginning of the CSV lines. This was not a problem in previous versions, but evidently is now. Removing those two columns caused the rules to start compiling correctly.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "creation_date" : 1747060259,
    "last_activity_date" : 1747060259,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}