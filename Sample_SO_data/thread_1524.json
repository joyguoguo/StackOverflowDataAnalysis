{
  "question" : {
    "question_id" : 79698348,
    "title" : "MainActivity cannot be converted to runnable",
    "body" : "<p>my application is only 1 page to read sms, and I used <code>MainActivity</code> for it.</p>\n<p>On this line, on the very bottom <code>handler.postDelayed(this,5000);</code> AnroidStudio error: <code>incompatible types: MainActivity cannot be converted to Runnable</code></p>\n<p>What are other options? How can I fix this error ? I just want to have a timer that keeps running the function.</p>\n<pre><code>package com.example.emptyviews;\nimport android.content.ContentResolver;\nimport android.content.pm.PackageManager;\nimport android.database.Cursor;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.provider.Telephony;\nimport android.util.Log;\nimport android.widget.ArrayAdapter;\nimport android.widget.ListView;\nimport android.os.Handler;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport java.util.ArrayList;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ArrayList&lt;String&gt; smsList = new ArrayList&lt;&gt;();\n    private ListView listView;\n    private static final int READ_SMS_PERMISSION_CODE = 1;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        listView = findViewById(R.id.listView);\n        ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, smsList);\n        listView.setAdapter(adapter);\n\n        if (ContextCompat.checkSelfPermission(this, android.Manifest.permission.READ_SMS)\n                != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this,\n                    new String[]{android.Manifest.permission.READ_SMS}, READ_SMS_PERMISSION_CODE);\n        } else {\n/*\n            Timer timer = new Timer();\n            TimerTask task = new TimerTask() {\n                @Override\n                public void run() {\n                    readSms();\n                    //adapter.notifyDataSetChanged();\n                }\n            };\n            timer.schedule(task, 10000, 5000);\n        */\n        }\n\n    }\n\n\n    private void readSms() {\n        ContentResolver contentResolver = getContentResolver();\n        Cursor cursor = contentResolver.query(\n                Telephony.Sms.CONTENT_URI,\n                null,\n                null,\n                null,\n                null);\n\n        if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n          //  do {\n                String address = cursor.getString(cursor.getColumnIndexOrThrow(Telephony.Sms.ADDRESS));\n                String body = cursor.getString(cursor.getColumnIndexOrThrow(Telephony.Sms.BODY));\n                smsList.add(&quot;Sender: &quot; + address + &quot;\\nMessage: &quot; + body);\n         //   } while (cursor.moveToNext());\n        }\n\n        if (cursor != null) {\n            cursor.close();\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions,\n                                           @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == READ_SMS_PERMISSION_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                Handler handler = new Handler(getMainLooper());\n                handler.postDelayed(() -&gt; {\n                    readSms();\n                    ArrayAdapter&lt;String&gt; adapter = (ArrayAdapter&lt;String&gt;) listView.getAdapter();\n                    adapter.notifyDataSetChanged();\n                    handler.postDelayed(this,5000); // Repeat every 5 seconds\n                }, 5000); // Initial delay of 10 seconds\n\n            }\n        }\n    }\n\n}\n</code></pre>\n",
    "tags" : [ "java", "android", "android-activity" ],
    "owner" : {
      "account_id" : 9257999,
      "reputation" : 2826,
      "user_id" : 6876149,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://i.sstatic.net/LDe4I.jpg?s=256",
      "display_name" : "C.Unbay",
      "link" : "https://stackoverflow.com/users/6876149/c-unbay"
    },
    "is_answered" : true,
    "view_count" : 90,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1753150906,
    "creation_date" : 1752237812,
    "link" : "https://stackoverflow.com/questions/79698348/mainactivity-cannot-be-converted-to-runnable",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79698385,
    "question_id" : 79698348,
    "body" : "<p>Create a Runnable object and reference that like this</p>\n<pre><code>private final Handler handler = new Handler();\n\nprivate final Runnable runnable = new Runnable() {\n        @Override\n        public void run() {\n            readSms();\n            ArrayAdapter&lt;String&gt; adapter = (ArrayAdapter&lt;String&gt;) listView.getAdapter();\n            adapter.notifyDataSetChanged();\n            handler.postDelayed(this, 5000); // Repeat every 5 seconds\n        }\n    };\n</code></pre>\n<p>then your <code>onPermissionsResult</code> would look like this</p>\n<pre><code>@Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode == READ_SMS_PERMISSION_CODE) {\n            if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                handler.postDelayed(runnable, 5000); // Initial delay of 5 seconds\n\n            }\n        }\n    }\n</code></pre>\n<p>now you are referencing a runnable instead of the activity</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 295108,
      "reputation" : 74839,
      "user_id" : 599346,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=256&d=identicon&r=PG",
      "display_name" : "tyczj",
      "link" : "https://stackoverflow.com/users/599346/tyczj"
    },
    "creation_date" : 1752239144,
    "last_activity_date" : 1752239514,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}