{
  "question" : {
    "question_id" : 79533786,
    "title" : "Error when trying to attach remote debugger with nvim-dap and Java",
    "body" : "<p>I'm trying to set up remote debugging for a Java application in Neovim using <code>nvim-dap</code>. However, when I try to attach the debugger, I get the following error:</p>\n<blockquote>\n<p>Error  09:21:30 notify.error DAP Error on attach: Failed to attach\nto remote debuggee VM. Reason: java.net.ConnectException: Connection\nrefused</p>\n</blockquote>\n<h3>Neovim Configuration</h3>\n<p>I'm using the extra plugin <code>lang.java</code> from LazyVim, which contains the following configuration for <code>nvim-dap</code>:</p>\n<pre class=\"lang-lua prettyprint-override\"><code>  {\n    &quot;mfussenegger/nvim-dap&quot;,\n    optional = true,\n    opts = function()\n      local dap = require(&quot;dap&quot;)\n      dap.configurations.java = {\n        {\n          type = &quot;java&quot;,\n          request = &quot;attach&quot;,\n          name = &quot;Debug (Attach) - Remote&quot;,\n          hostName = &quot;127.0.0.1&quot;,\n          port = 5005,\n        },\n      }\n    end,\n    dependencies = {\n      {\n        &quot;williamboman/mason.nvim&quot;,\n        opts = { ensure_installed = { &quot;java-debug-adapter&quot;, &quot;java-test&quot; } },\n      },\n    },\n  }\n</code></pre>\n<h3>What I Tried</h3>\n<p>If I manually start the JVM with the following command before attaching the debugger, <code>nvim-dap</code> works correctly:</p>\n<pre><code>java -agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005 -cp bin exemplo.Autodromo\n</code></pre>\n<p>This makes the JVM start and wait on port 5005:</p>\n<blockquote>\n<p>Listening for transport dt_socket at address: 5005</p>\n</blockquote>\n<p>But if I try to start the debugger in Neovim without this manual step, I get the &quot;Connection refused&quot; error.</p>\n<h3>Question</h3>\n<p>What could be causing this issue? Is there any additional configuration I need to adjust so that <code>nvim-dap</code> can correctly attach to the Java process without manually starting the JVM with <code>-agentlib:jdwp</code>?</p>\n",
    "tags" : [ "java", "jvm", "remote-debugging", "neovim", "lazyvim" ],
    "owner" : {
      "account_id" : 40788159,
      "reputation" : 21,
      "user_id" : 29953194,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kEVpC6pb.png?s=256",
      "display_name" : "Joao Felipe",
      "link" : "https://stackoverflow.com/users/29953194/joao-felipe"
    },
    "is_answered" : false,
    "view_count" : 195,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1742910856,
    "creation_date" : 1742908315,
    "link" : "https://stackoverflow.com/questions/79533786/error-when-trying-to-attach-remote-debugger-with-nvim-dap-and-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}