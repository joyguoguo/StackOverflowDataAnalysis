{
  "question" : {
    "question_id" : 79729531,
    "title" : "Two API with same structure but when calling from postman one is working without sessionid and credential and another is not working",
    "body" : "<p>I have created two api's in my spring mvc project which have identical structure. But while calling using Postman or while hitting the APIs in browser/UI project, one is working without any credential or cookie[SessionId] but another one is not working.\nPlease help. Thanks is advance</p>\n<p>code of API which is not working without session/credentials:</p>\n<pre><code>@CrossOrigin(origins = &quot;http://123.123.151.123:4201&quot;)\n    @RequestMapping(value = &quot;/troubleshootingHitRate&quot;,method = RequestMethod.GET)\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; troubleshootingHitRate(@RequestParam String fromDate,\n            @RequestParam String toDate) {\n\n        System.out.println(&quot;=== Controller::&quot; + &quot; &quot; + &quot;FromDate::&quot; + fromDate + &quot; &quot; + &quot;ToDate::&quot; + toDate);\n\n        Map&lt;String, Object&gt; failureReport = ssaService.hitRateWithComparison(fromDate, toDate, &quot;failure&quot;);\n        HttpHeaders headers = new HttpHeaders();\n        headers.add(&quot;CustomHeader&quot;, &quot;Custom-Header&quot;);\n        return new ResponseEntity&lt;&gt;(failureReport, headers, HttpStatus.OK);\n    }\n</code></pre>\n<p>code of API which is working without session/credentials:</p>\n<pre><code>    public String report(@PathVariable(&quot;envid&quot;) int envid, Model model) {\n        String report_path = reportPath;\n        // System.out.println(&quot;Teating&quot;+ report_path);\n\n        report_path = report_path.replace(&quot;////&quot;, &quot;\\\\\\\\\\\\\\\\&quot;);\n\n        report_path = report_path.replace(&quot;/&quot;, &quot;\\\\\\\\&quot;);\n        // System.out.println(&quot;Teating08&quot;+ report_path);\n\n        List&lt;Result&gt; result = ssaService.getReport(envid + &quot;&quot;);\n        model.addAttribute(&quot;reportPaths&quot;, report_path);\n        model.addAttribute(&quot;report&quot;, result);\n        model.addAttribute(&quot;envid&quot;, envid);\n        return &quot;report&quot;;\n    }\n</code></pre>\n<p>Configuration Details:</p>\n<pre><code>public UrlBasedCorsConfigurationSource corsConfigurationSource() {\n                CorsConfiguration configuration = new CorsConfiguration();\n                configuration.setAllowedOrigins(Arrays.asList(&quot;http://123.123.151.123:4201&quot;)); // Allow all origins or specify your front-end URL\n                configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n                configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));\n                configuration.setAllowCredentials(false); // set true if using cookies/auth\n                configuration.setMaxAge(3600L);\n\n                UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n                source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n                return source;\n            }\n</code></pre>\n",
    "tags" : [ "java", "spring", "rest", "spring-mvc", "backend" ],
    "owner" : {
      "account_id" : 7106910,
      "reputation" : 35,
      "user_id" : 5436271,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
      "display_name" : "BipLab",
      "link" : "https://stackoverflow.com/users/5436271/biplab"
    },
    "is_answered" : true,
    "view_count" : 58,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1754727865,
    "creation_date" : 1754642664,
    "link" : "https://stackoverflow.com/questions/79729531/two-api-with-same-structure-but-when-calling-from-postman-one-is-working-without",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79730499,
    "question_id" : 79729531,
    "body" : "<p>In your API Gateway or spring security whatever you are using, you need to mark the API unauthenticated which means allow this API to be accessible without credentials o token.</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n        .authorizeRequests()\n        .antMatchers(&quot;/troubleshootingHitRate&quot;).permitAll() // Public access\n        .anyRequest().authenticated();\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 31238227,
      "reputation" : 32,
      "user_id" : 24043180,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1aaef49e829f4049701d24bdc5390642?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sajjad Haider",
      "link" : "https://stackoverflow.com/users/24043180/sajjad-haider"
    },
    "creation_date" : 1754727865,
    "last_activity_date" : 1754727865,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140651268,
    "post_id" : 79729531,
    "body" : "@seenukarthi Hi Karthi, I have added the configuration details to the post. Thanks.",
    "score" : 0,
    "owner" : {
      "account_id" : 7106910,
      "reputation" : 35,
      "user_id" : 5436271,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
      "display_name" : "BipLab",
      "link" : "https://stackoverflow.com/users/5436271/biplab"
    },
    "creation_date" : 1754643706,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140651256,
    "post_id" : 79729531,
    "body" : "@Stewart I have added that to allow cross origin access for that specific API. I don&#39;t think that has anything to do in this case.",
    "score" : 0,
    "owner" : {
      "account_id" : 7106910,
      "reputation" : 35,
      "user_id" : 5436271,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
      "display_name" : "BipLab",
      "link" : "https://stackoverflow.com/users/5436271/biplab"
    },
    "creation_date" : 1754643464,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140651253,
    "post_id" : 79729531,
    "body" : "2nd Part - configuration.setMaxAge(3600L);                 UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();                 source.registerCorsConfiguration(&quot;/**&quot;, configuration);                 return source;             }",
    "score" : 0,
    "owner" : {
      "account_id" : 7106910,
      "reputation" : 35,
      "user_id" : 5436271,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
      "display_name" : "BipLab",
      "link" : "https://stackoverflow.com/users/5436271/biplab"
    },
    "creation_date" : 1754643291,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140651252,
    "post_id" : 79729531,
    "body" : "@seenukarthi Here is the configuration details below. I have tried to call after commenting this configuration as well. public UrlBasedCorsConfigurationSource corsConfigurationSource() {                 CorsConfiguration configuration = new CorsConfiguration();      configuration.setAllowedOrigins(Arrays.asList(&quot;<a href=\"http://123.123.151.123:4201&quot;\" rel=\"nofollow noreferrer\">123.123.151.1&zwnj;&#8203;23:4201&quot;</a>));                  configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;));                 configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));                 configuration.setAllowCredentials(false);",
    "score" : 0,
    "owner" : {
      "account_id" : 7106910,
      "reputation" : 35,
      "user_id" : 5436271,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
      "display_name" : "BipLab",
      "link" : "https://stackoverflow.com/users/5436271/biplab"
    },
    "creation_date" : 1754643272,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140651244,
    "post_id" : 79729531,
    "body" : "What is the IP address you are calling from? That clause <code>@CrossOrigin(origins = &quot;http:&#47;&#47;123.123.151.123:4201&quot;)</code> seems to be the most obvious difference between the two methods.",
    "score" : 1,
    "owner" : {
      "account_id" : 55989,
      "reputation" : 19037,
      "user_id" : 167745,
      "user_type" : "registered",
      "accept_rate" : 76,
      "profile_image" : "https://i.sstatic.net/wBebv.jpg?s=256",
      "display_name" : "Stewart",
      "link" : "https://stackoverflow.com/users/167745/stewart"
    },
    "creation_date" : 1754643015,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140651232,
    "post_id" : 79729531,
    "body" : "What is your security configuration? Add the security configuration to your question?",
    "score" : 1,
    "owner" : {
      "account_id" : 551394,
      "reputation" : 8803,
      "user_id" : 916225,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/ba66e25b90b0c202ef0770f81391be97?s=256&d=identicon&r=PG",
      "display_name" : "seenukarthi",
      "link" : "https://stackoverflow.com/users/916225/seenukarthi"
    },
    "creation_date" : 1754642792,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79730499" : [ {
      "comment_id" : 140821779,
      "post_id" : 79730499,
      "body" : "I have figured out the problem. The solution is similar to your solution. Thanks @Sajjad",
      "score" : 0,
      "owner" : {
        "account_id" : 7106910,
        "reputation" : 35,
        "user_id" : 5436271,
        "user_type" : "registered",
        "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
        "display_name" : "BipLab",
        "link" : "https://stackoverflow.com/users/5436271/biplab"
      },
      "creation_date" : 1761627234,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140657713,
      "post_id" : 79730499,
      "body" : "Still facing the same problem.",
      "score" : 0,
      "owner" : {
        "account_id" : 7106910,
        "reputation" : 35,
        "user_id" : 5436271,
        "user_type" : "registered",
        "profile_image" : "https://lh6.googleusercontent.com/-yP_4VldcJKM/AAAAAAAAAAI/AAAAAAAAAG8/yLZUrjuRFjk/s256-rj/photo.jpg",
        "display_name" : "BipLab",
        "link" : "https://stackoverflow.com/users/5436271/biplab"
      },
      "creation_date" : 1754926267,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}