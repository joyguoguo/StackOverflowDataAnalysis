{
  "question" : {
    "question_id" : 79569557,
    "title" : "To run test cases in parallel and achieve data isolation,where each of the test cases share the same Kafka topic and source and target tables schemas",
    "body" : "<p>I am currently working on a Java and TestNG framework.Here, we first define a data model like Erwin data model with source, targets and transformation logic. Then during runtime we publish data on the Kafka topics and based on the data model, it creates namespaces , topics(with a fixed naming convention) on the kafka and source and target schemas. Since , we are using the same data-model on each run,source schema ,target schema ,kafka topics name remain same.This works well if before each run , we clean the topics and db schema and run the next test case sequentially. However, on running the test cases in parallel, leads to data inconsistency and data inconsistency as the same topics and schema is being used by the test cases. Also Kafka is not in our control to tweak/modify.\nWhat could be the best possible ways to achieve data isolation in this case, so that parallel execution can give unflaky results. Any help is appreciated.</p>\n",
    "tags" : [ "java", "apache-kafka", "spring-kafka", "kafka-consumer-api", "apache-kafka-connect" ],
    "owner" : {
      "account_id" : 13243482,
      "reputation" : 385,
      "user_id" : 9563278,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/s256-rj/photo.jpg",
      "display_name" : "ashish chauhan",
      "link" : "https://stackoverflow.com/users/9563278/ashish-chauhan"
    },
    "is_answered" : false,
    "view_count" : 61,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744398036,
    "creation_date" : 1744398036,
    "link" : "https://stackoverflow.com/questions/79569557/to-run-test-cases-in-parallel-and-achieve-data-isolation-where-each-of-the-test",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140332470,
    "post_id" : 79569557,
    "body" : "Yes that&#39;s seems to be the only feasible solution. Thanks for the input Vijay",
    "score" : 1,
    "owner" : {
      "account_id" : 13243482,
      "reputation" : 385,
      "user_id" : 9563278,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/s256-rj/photo.jpg",
      "display_name" : "ashish chauhan",
      "link" : "https://stackoverflow.com/users/9563278/ashish-chauhan"
    },
    "creation_date" : 1744627849,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140326752,
    "post_id" : 79569557,
    "body" : "If Kafka can&#39;t be changed, embed a unique testRunId in every message and filter on it during consumption to simulate topic isolation. Combine this with row-level DB isolation to safely run tests in parallel without interference.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744421188,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}