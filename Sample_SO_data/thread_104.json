{
  "question" : {
    "question_id" : 79828796,
    "title" : "Flyway migration unable to create relation (table) when attempting to add table to Java API",
    "body" : "<p>I am working on a Java Spring API where I need to create new relations (tables) that will be stored in a PostgreSQL database.</p>\n<p>I am creating new tables that add a new column to the existing tables with a character appended to the label.</p>\n<p>The app uses Flyway migration scripts for the database.</p>\n<p>I created a SQL file that creates a test table. I also added create table SQL commands within existing Java model files.</p>\n<p>When I build the API Docker container and also the console (this program builds the PostgreSQL database) Docker container, I run the app locally and then I get this error in the API console when I attempt to query the new tables through the app. Below is an example of an error.</p>\n<pre class=\"lang-none prettyprint-override\"><code>513 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper : ERROR: relation &quot;adds.ox_maint_r_c&quot; does not exist\n626 ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper : ERROR: relation &quot;adds.shed_storage_r_c&quot; does not exist\n</code></pre>\n<p>Also, I accessed the database using DBeaver and I do not see the new databases.</p>\n<p>Any recommendations on a solution? It seems nothing I am doing is affecting the database. Apologies for the long post as I am attempting to explain a problem with a lot of context.</p>\n",
    "tags" : [ "java", "spring", "postgresql", "debugging", "error-handling" ],
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "is_answered" : false,
    "view_count" : 67,
    "closed_date" : 1764006926,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764158943,
    "creation_date" : 1763996908,
    "link" : "https://stackoverflow.com/questions/79828796/flyway-migration-unable-to-create-relation-table-when-attempting-to-add-table",
    "closed_reason" : "Needs details or clarity"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140870746,
    "post_id" : 79828796,
    "body" : "It&#39;s not about what you believe; you have to be 100% sure. &quot;tools&quot; like Flyway make a lot of simple things suddenly tough to do. The script that tries to use the <code>ox_maint_r_c</code> table in the <code>adds</code> schema doesn&#39;t have it. This table might exist in another schema or even another database, on a different server, but that&#39;s all irrelevant. Check, check, and double check.",
    "score" : 0,
    "owner" : {
      "account_id" : 101001,
      "reputation" : 129306,
      "user_id" : 271959,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/H3bQRCRO.png?s=256",
      "display_name" : "Frank Heikens",
      "link" : "https://stackoverflow.com/users/271959/frank-heikens"
    },
    "creation_date" : 1764006880,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870707,
    "post_id" : 79828796,
    "body" : "Until you provide a test case with details on the complete chain code you are using there is really no way to provide an answer.",
    "score" : 0,
    "owner" : {
      "account_id" : 9513375,
      "reputation" : 20338,
      "user_id" : 7070613,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/iZQNZ.jpg?s=256",
      "display_name" : "Adrian Klaver",
      "link" : "https://stackoverflow.com/users/7070613/adrian-klaver"
    },
    "creation_date" : 1764005860,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870635,
    "post_id" : 79828796,
    "body" : "I believe it is pointing to the right Postgres db based on the Docker yml files. Something I neglected to mention is that the app uses Flyway db migration scripts.",
    "score" : 0,
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "creation_date" : 1764003865,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870618,
    "post_id" : 79828796,
    "body" : "1) Do not use DBeaver for troubleshooting, it creates it&#39;s own problems. Use <code>psql</code> to verify the contents of the database. 2) You need to create test case code that does the basic work of <code>CREATE TABLE</code> for the changes you are making and step through it to see why the tables are not actually being created.  3) Are you sure the changes are pointing at the correct database and/or Postgres cluster?",
    "score" : 1,
    "owner" : {
      "account_id" : 9513375,
      "reputation" : 20338,
      "user_id" : 7070613,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/iZQNZ.jpg?s=256",
      "display_name" : "Adrian Klaver",
      "link" : "https://stackoverflow.com/users/7070613/adrian-klaver"
    },
    "creation_date" : 1764003104,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870605,
    "post_id" : 79828796,
    "body" : "I am creating new tables that are just the old tables with an added column. The new table names will be the old name with an underscore and letter appended to the label.",
    "score" : 0,
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "creation_date" : 1764002720,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870602,
    "post_id" : 79828796,
    "body" : "1) Add the information to the question text as an update, so folks don&#39;t have to run through the comments to get relevant information. 2) This <i>... I am creating new tables that add a new column to the existing tables ...</i> does not make sense. You can ALTER TABLE, but it is still the same table or you can DROP/CREATE table.",
    "score" : 0,
    "owner" : {
      "account_id" : 9513375,
      "reputation" : 20338,
      "user_id" : 7070613,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/iZQNZ.jpg?s=256",
      "display_name" : "Adrian Klaver",
      "link" : "https://stackoverflow.com/users/7070613/adrian-klaver"
    },
    "creation_date" : 1764002575,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870594,
    "post_id" : 79828796,
    "body" : "I meant to say that in DBeaver I do not see the new tables within the schema specified in the Postgres database. As in, I added CREATE TABLE queries using SQL files and also in-line SQL queries within Java model files but I do not see the tables there.",
    "score" : 0,
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "creation_date" : 1764002454,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870587,
    "post_id" : 79828796,
    "body" : "The tables are handled through the Java model files using inline SQL SELECT statements that then map to Java objects. I do not actually see where there are CREATE TABLE queries for each of these individual tables. There are CREATE TABLE queries for other tables in the API but I don&#39;t see any for the tables replicating. For context, I am creating new tables that add a new column to the existing tables with a character appended to the label.",
    "score" : 0,
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "creation_date" : 1764002334,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870582,
    "post_id" : 79828796,
    "body" : "Look at the Postgres server log files and see what is actually hitting the database and work backwards from there. This <i>Also, I accessed the database using DBeaver and I do not see the new databases.</i> is confusing/does not make sense. What are you defining as a database?",
    "score" : 1,
    "owner" : {
      "account_id" : 9513375,
      "reputation" : 20338,
      "user_id" : 7070613,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/iZQNZ.jpg?s=256",
      "display_name" : "Adrian Klaver",
      "link" : "https://stackoverflow.com/users/7070613/adrian-klaver"
    },
    "creation_date" : 1764002137,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870570,
    "post_id" : 79828796,
    "body" : "Can you show me how you created the tables? And the general structure of the files?",
    "score" : 0,
    "owner" : {
      "account_id" : 25445224,
      "reputation" : 1,
      "user_id" : 30287374,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9cbd330258e27095c4c1c99b8b5e15b4?s=256&d=identicon&r=PG",
      "display_name" : "FokySNiK",
      "link" : "https://stackoverflow.com/users/30287374/fokysnik"
    },
    "creation_date" : 1764001629,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870551,
    "post_id" : 79828796,
    "body" : "I cleaned up the code section. Not sure how I can provide an example since I&#39;m working with an entire API and console programs with multiple files.",
    "score" : 0,
    "owner" : {
      "account_id" : 25556748,
      "reputation" : 45,
      "user_id" : 19340123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIHQX.png?s=256",
      "display_name" : "Njhasty",
      "link" : "https://stackoverflow.com/users/19340123/njhasty"
    },
    "creation_date" : 1764001010,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140870444,
    "post_id" : 79828796,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79828796/edit\">edit</a> the code and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.",
    "score" : 2,
    "owner" : {
      "account_id" : 5281408,
      "reputation" : 20275,
      "user_id" : 4216641,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/dVLIh.jpg?s=256",
      "display_name" : "Turing85",
      "link" : "https://stackoverflow.com/users/4216641/turing85"
    },
    "creation_date" : 1763997715,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}