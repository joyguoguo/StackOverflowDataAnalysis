{
  "question" : {
    "question_id" : 79675633,
    "title" : "How to get tiered prices and first (min) and last (max) unit?",
    "body" : "<p>I'm trying to retrieve the tiered pricing details from my Stripe product using the Stripe SDK. Iâ€™m passing the correct product_id and successfully retrieving a Price object that has billing_scheme = tiered.</p>\n<p>However, the tiers field on the Price object is null, even though the price is set up with multiple tiers in the Stripe Dashboard (see attached screenshot).</p>\n<p>My question is how can I get the tiered pricing price, the min and max seats from a given tiered price from my product?</p>\n<p><a href=\"https://i.sstatic.net/o9h1mdA4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/o9h1mdA4.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.sstatic.net/6I4ZJnBM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/6I4ZJnBM.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my code</p>\n<pre><code>fun getEnterprisePriceForSeats(seats: Int): Price {\n    // List all active prices for the Enterprise product\n    val params = PriceListParams.builder()\n        .setProduct(stripeEnterpriseSubscriptionProductId)\n        .setActive(true)\n        .setLimit(100)\n        .build()\n\n    val prices = Price.list(params).data\n\n    // Find the price whose metadata range matches the seat count\n    return prices.firstOrNull { price -&gt;\n        val min = price.metadata[&quot;min_seats&quot;]?.toInt() ?: 0\n        val max = price.metadata[&quot;max_seats&quot;]?.toInt() ?: Int.MAX_VALUE\n        seats in min..max\n    } ?: throw IllegalArgumentException(&quot;No Enterprise price found for $seats seats&quot;)\n}\n</code></pre>\n",
    "tags" : [ "java", "kotlin", "stripe-payments" ],
    "owner" : {
      "account_id" : 38773108,
      "reputation" : 91,
      "user_id" : 28945431,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/98cc84f60d6efd3c5487b976a1abab07?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user2342348",
      "link" : "https://stackoverflow.com/users/28945431/user2342348"
    },
    "is_answered" : true,
    "view_count" : 83,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1761113038,
    "creation_date" : 1750654771,
    "link" : "https://stackoverflow.com/questions/79675633/how-to-get-tiered-prices-and-first-min-and-last-max-unit",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79675773,
    "question_id" : 79675633,
    "body" : "<p>You need to expand <code>tiers</code> [0] when retrieving Prices to reveal the different tiered pricing (example: $39,99, $35.99, $29.55). This will return a list that contains the <code>up_to</code> [1] param that you can use to determine the min and max price.</p>\n<p>Based on the code snippet, you can add <code>`addExpand(&quot;data.tiers&quot;)</code> under PriceListParams.builder()</p>\n<p>[0] <a href=\"https://docs.stripe.com/api/prices/object#price_object-tiers\" rel=\"nofollow noreferrer\">https://docs.stripe.com/api/prices/object#price_object-tiers</a><br />\n[1] <a href=\"https://docs.stripe.com/api/prices/object#price_object-tiers-up_to\" rel=\"nofollow noreferrer\">https://docs.stripe.com/api/prices/object#price_object-tiers-up_to</a></p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 41117126,
      "reputation" : 61,
      "user_id" : 30127622,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/aea21b7da00ee49e65e810a8a496d34c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "aure",
      "link" : "https://stackoverflow.com/users/30127622/aure"
    },
    "creation_date" : 1750662989,
    "last_activity_date" : 1750662989,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}