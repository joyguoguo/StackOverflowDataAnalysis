{
  "question" : {
    "question_id" : 79612003,
    "title" : "Jenkins java.io.IOException, Failed to exec spawn helper (git)",
    "body" : "<p>Time to time I run into this issue, what is solved by a Jenkins restart, but I would be happy to find a better solution. Sometimes the builds can not even start, with the following error (this is the entire build log)</p>\n<pre><code>Started by user User1\njava.io.IOException: error=0, Failed to exec spawn helper: pid: 542215, exit value: 1\n    at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\n    at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:295)\n    at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:225)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1126)\nCaused: java.io.IOException: Cannot run program &quot;git&quot; (in directory &quot;/var/lib/jenkins/caches/git-c029b963d2526a8db1e38611d3ddcac9&quot;): error=0, Failed to exec spawn helper: pid: 542215, exit value: 1\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1170)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1089)\n    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:252)\n    at hudson.Proc$LocalProc.&lt;init&gt;(Proc.java:221)\n    at hudson.Launcher$LocalLauncher.launch(Launcher.java:995)\n    at hudson.Launcher$ProcStarter.start(Launcher.java:507)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2845)\nCaused: hudson.plugins.git.GitException: Error performing git command: git init /var/lib/jenkins/caches/git-c029b963d2526a8db1e38611d3ddcac9\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2868)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2772)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommandIn(CliGitAPIImpl.java:2767)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.launchCommand(CliGitAPIImpl.java:2056)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1080)\nCaused: hudson.plugins.git.GitException: Could not init /var/lib/jenkins/caches/git-c029b963d2526a8db1e38611d3ddcac9\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl$5.execute(CliGitAPIImpl.java:1082)\n    at PluginClassLoader for git-client//org.jenkinsci.plugins.gitclient.CliGitAPIImpl.init(CliGitAPIImpl.java:362)\n    at PluginClassLoader for git-client//hudson.plugins.git.GitAPI.init(GitAPI.java:246)\n    at PluginClassLoader for git//jenkins.plugins.git.GitSCMFileSystem$BuilderImpl.build(GitSCMFileSystem.java:390)\nCaused: java.io.IOException\n    at PluginClassLoader for git//jenkins.plugins.git.GitSCMFileSystem$BuilderImpl.build(GitSCMFileSystem.java:413)\n    at PluginClassLoader for scm-api//jenkins.scm.api.SCMFileSystem.of(SCMFileSystem.java:219)\n    at PluginClassLoader for workflow-cps//org.jenkinsci.plugins.workflow.cps.CpsScmFlowDefinition.create(CpsScmFlowDefinition.java:120)\n    at PluginClassLoader for workflow-cps//org.jenkinsci.plugins.workflow.cps.CpsScmFlowDefinition.create(CpsScmFlowDefinition.java:72)\n    at PluginClassLoader for workflow-job//org.jenkinsci.plugins.workflow.job.WorkflowRun.run(WorkflowRun.java:319)\n    at hudson.model.ResourceController.execute(ResourceController.java:101)\n    at hudson.model.Executor.run(Executor.java:446)\n[withMaven] downstreamPipelineTriggerRunListener - Failure to introspect build steps: java.io.IOException: playwright-gevi #158 did not yet start\n[withMaven] downstreamPipelineTriggerRunListener - Failure to introspect build steps: java.io.IOException: playwright-gevi #158 did not yet start\nFinished: FAILURE\n</code></pre>\n<p>When it happens it happens for all my builds, I can not start any build till I restart Jenkins. I believe there is nothing wrong with git (<code>Cannot run program &quot;git&quot;</code>) but the real issue is <code>Failed to exec spawn helper</code>, git just happens to be the first process it tries to run.</p>\n<p>notes:</p>\n<ul>\n<li>I use declarative pipelines, the Jenkinsfile itself also comes from the repo</li>\n<li>I have build agents, but as you can see it in the log this is happening on Jenkins itself, the build doesn't even reaches the point when it would select an agent.</li>\n</ul>\n<p>environment:</p>\n<ul>\n<li>Jenkins 2.492.3 (almost latest LTS)</li>\n<li>Ubuntu 22.04</li>\n<li>Java 21 (21.0.7)</li>\n<li>Jenkins is running as a systemd service</li>\n</ul>\n",
    "tags" : [ "java", "jenkins", "jenkins-plugins" ],
    "owner" : {
      "account_id" : 4857061,
      "reputation" : 1187,
      "user_id" : 3917748,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/KaZ19.png?s=256",
      "display_name" : "redseven",
      "link" : "https://stackoverflow.com/users/3917748/redseven"
    },
    "is_answered" : false,
    "view_count" : 1492,
    "answer_count" : 0,
    "score" : 5,
    "last_activity_date" : 1746781691,
    "creation_date" : 1746693549,
    "link" : "https://stackoverflow.com/questions/79612003/jenkins-java-io-ioexception-failed-to-exec-spawn-helper-git",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140444723,
    "post_id" : 79612003,
    "body" : "This was also <a href=\"https://community.jenkins.io/t/jenkins-issue-fatal-command-execution-failed/12460\" rel=\"nofollow noreferrer\">asked</a> on the Jenkins forum. One <a href=\"https://community.jenkins.io/t/jenkins-issue-fatal-command-execution-failed/12460/9\" rel=\"nofollow noreferrer\">answer</a> explains that this happens when Java got updated, but Jenkins still runs with the old Java. So restarting Jenkins after a system/java update should usually help.",
    "score" : 0,
    "owner" : {
      "account_id" : 1671693,
      "reputation" : 2870,
      "user_id" : 1538041,
      "user_type" : "registered",
      "accept_rate" : 57,
      "profile_image" : "https://www.gravatar.com/avatar/1aed70e09750ae19ea22e24279b15079?s=256&d=identicon&r=PG",
      "display_name" : "Martin H&#246;ller",
      "link" : "https://stackoverflow.com/users/1538041/martin-h%c3%b6ller"
    },
    "creation_date" : 1747811977,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140410337,
    "post_id" : 79612003,
    "body" : "We just ran into the same or a very similar issue, for us, a simple restart of jenkins solved it.",
    "score" : 0,
    "owner" : {
      "account_id" : 25729349,
      "reputation" : 96,
      "user_id" : 19485153,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1bab589f1a378df583e10ae2e8184bcc?s=256&d=identicon&r=PG",
      "display_name" : "Xentis",
      "link" : "https://stackoverflow.com/users/19485153/xentis"
    },
    "creation_date" : 1746781760,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140408812,
    "post_id" : 79612003,
    "body" : "I&#39;d check the <code>ulimit</code> on the machine you&#39;re running the master.",
    "score" : 1,
    "owner" : {
      "account_id" : 2335086,
      "reputation" : 7004,
      "user_id" : 2047614,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4ab539541e2207aa691d3c4566b9b2b6?s=256&d=identicon&r=PG",
      "display_name" : "MaratC",
      "link" : "https://stackoverflow.com/users/2047614/maratc"
    },
    "creation_date" : 1746731524,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140407832,
    "post_id" : 79612003,
    "body" : "I had the same issue today, same environment exactly. I updated all of the plugins in my Jenkins and then restarted the jenkins process via systemd on the agent. Now it works. My hunch is that the updated Jenkins also has an updated JAR file and that needed to be deployed with the systemd restart of the jenkins process. Just a hunch, though.",
    "score" : 1,
    "owner" : {
      "account_id" : 21501846,
      "reputation" : 51,
      "user_id" : 15845922,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhmHpsckeLNvRrCcYFaS4N3fKfTdtA_TZRvzjBt=k-s256",
      "display_name" : "Jacob anderson",
      "link" : "https://stackoverflow.com/users/15845922/jacob-anderson"
    },
    "creation_date" : 1746712204,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}