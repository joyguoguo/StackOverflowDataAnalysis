{
  "question" : {
    "question_id" : 79690486,
    "title" : "Correct Url to contact selenium in a Kubernetes cluster",
    "body" : "<p>I am working on trying to use selenium as a sidecar container for an application. In the application code I have tried the following:</p>\n<pre><code> URL remoteUrl = new URL(&quot;http://localhost:4444/wd/hub&quot;);\n\n ChromeOptions options = new ChromeOptions();\n options.addArguments(&quot;--headless&quot;, &quot;--disable-gpu&quot;, &quot;--no-sandbox&quot;, &quot;--disable-dev-shm-usage&quot;);\n log.info(&quot;starting web driver&quot;);\n WebDriver driver = new RemoteWebDriver(remoteUrl, options);\n</code></pre>\n<p>I have also tried</p>\n<pre><code> URL remoteUrl = new URL(&quot;http://remote-chrome-webdriver.default.svc.cluster.local:4444/wd/hub&quot;);\n\n</code></pre>\n<p>and</p>\n<pre><code>URL remoteUrl = new URL(&quot;http://remote-chrome-webdriver:4444/wd/hub&quot;);\n</code></pre>\n<p>And all of these options have yielded a ConnectException.</p>\n<p>My yaml defines the selenium container like this:</p>\n<pre><code>      initContainers:\n        - name: wait-for-chrome\n          image: busybox:latest\n          imagePullPolicy: IfNotPresent\n          command: ['sh', '-c', 'until curl -f http://remote-chrome-webdriver:4444/wd/hub/status; do echo &quot;Waiting fro remote-chrome-webdriver...&quot;; sleep 5; done;']\n          resources:\n            {{- toYaml .Values.resources | nindent 12 }}\n        - name: remote-chrome-webdriver\n          image: xxxxxxxxxx/selenium/standalone-chrome:4.23.1\n          imagePullPolicy: IfNotPresent\n          ports:\n            - name: http\n              containerPort: 4444\n              protocol: TCP\n          restartPolicy: Always\n          env:\n            - name: &quot;xxxxx_APPLICATION_CREDENTIALS&quot;\n              value: {{ .Values.env.xxxxxxxxxxx}}\n          envFrom:\n            - secretRef:\n                name: xxxxxx\n          volumeMounts:\n            - name: xxxxxx\n              readOnly: true\n              mountPath: &quot;/etc/xxxxx&quot;\n          resources:\n            {{- toYaml .Values.resources | nindent 12}}\n\n</code></pre>\n<p>Where I have redacted some sensitive information.</p>\n<p>What is the proper syntax to use in java code to allow the application to connect to the selenium sidecar?</p>\n",
    "tags" : [ "java", "kubernetes", "selenium-webdriver" ],
    "owner" : {
      "account_id" : 3128387,
      "reputation" : 864,
      "user_id" : 2646836,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/eYQ4O.jpg?s=256",
      "display_name" : "carlos palma",
      "link" : "https://stackoverflow.com/users/2646836/carlos-palma"
    },
    "is_answered" : true,
    "view_count" : 49,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752084377,
    "creation_date" : 1751647612,
    "link" : "https://stackoverflow.com/questions/79690486/correct-url-to-contact-selenium-in-a-kubernetes-cluster",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79696072,
    "question_id" : 79690486,
    "body" : "<p>The correct syntax in the code to reach the selenium standalone running in the kubernetes cluster was</p>\n<p><a href=\"http://remote-chrome-webdriver.default.svc:80/wd/hub\" rel=\"nofollow noreferrer\">http://remote-chrome-webdriver.default.svc:80/wd/hub</a></p>\n<p>Also we had to create a Kubernetes service to expose this selenium to other workloads in the cluster</p>\n<pre><code>apiVersion: v1\nkind: Service\nmetadata:\n  name: remote-chrome-webdriver\n  labels:\n    app: remote-chrome-webdriver\nspec:\n  selector:\n    app: remote-chrome-webdriver\n  ports:\n    - protocol: TCP\n      port: 80\n      targetPort: 4444\n  type: LoadBalancer\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3128387,
      "reputation" : 864,
      "user_id" : 2646836,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/eYQ4O.jpg?s=256",
      "display_name" : "carlos palma",
      "link" : "https://stackoverflow.com/users/2646836/carlos-palma"
    },
    "creation_date" : 1752084377,
    "last_activity_date" : 1752084377,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}