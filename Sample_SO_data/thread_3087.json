{
  "question" : {
    "question_id" : 79572688,
    "title" : "Java Iterator Views",
    "body" : "<p>I frequently would like to iterate over a view of some underlying data structure, e.g. a backwards iteration or only a slice of a list. The Java standard library has some support for multiple iterator views, e.g. with Map#keySet and Map#elemSet. I would like an API to quickly generate such views:</p>\n<pre><code>List&lt;A&gt; myList;\nfor (A it : iter(myList).from(24).backwards()) {\n    ...\n}\n</code></pre>\n<p>I would like an easy way to define these views ideally without being significantly slower than normal iterators.</p>\n",
    "tags" : [ "java", "foreach", "iterator" ],
    "owner" : {
      "account_id" : 3693614,
      "reputation" : 32,
      "user_id" : 3075623,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6c5f6ad130f250401152927d2b8d5556?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Taren",
      "link" : "https://stackoverflow.com/users/3075623/taren"
    },
    "is_answered" : true,
    "view_count" : 83,
    "answer_count" : 1,
    "score" : -2,
    "last_activity_date" : 1745424391,
    "creation_date" : 1744619165,
    "link" : "https://stackoverflow.com/questions/79572688/java-iterator-views",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79572710,
    "question_id" : 79572688,
    "body" : "<p>Perhaps you can achieve this using <code>ListIterator</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (ListIterator&lt;A&gt; it = myList.listIterator(24); it.hasPrevious(); ) {\n   A item = it.previous();\n   ...\n}\n</code></pre>\n<p>If you want from index 24 to 13 you could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (ListIterator&lt;A&gt; it = myList.listIterator(24); it.previousIndex() &gt; 12; ) {\n   A item = it.previous();\n   ...\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1096470,
      "reputation" : 29414,
      "user_id" : 1089967,
      "user_type" : "registered",
      "accept_rate" : 59,
      "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
      "display_name" : "lance-java",
      "link" : "https://stackoverflow.com/users/1089967/lance-java"
    },
    "creation_date" : 1744619962,
    "last_activity_date" : 1744623350,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140336065,
    "post_id" : 79572688,
    "body" : "FYI, <code>List.subList(...)</code> has existed since the introduction of the Collections Framework in Java 1.2.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1744709576,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140332109,
    "post_id" : 79572688,
    "body" : "It turns out Java 21 has these built in: myList.subList(0,25).reversed() gives the wanted (iterable) view without copying the list. The relevant documentation is here <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html#view\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/21/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>",
    "score" : 2,
    "owner" : {
      "account_id" : 3693614,
      "reputation" : 32,
      "user_id" : 3075623,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6c5f6ad130f250401152927d2b8d5556?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Taren",
      "link" : "https://stackoverflow.com/users/3075623/taren"
    },
    "creation_date" : 1744621668,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79572710" : [ {
      "comment_id" : 140333030,
      "post_id" : 79572710,
      "body" : "@Taren If you want a step size other than 1, Iterator is the wrong tool for your task.  Iterator <i>can</i> be made to do it, but it will be more awkward than other approaches, like Streams or just using an integer index and calling List.get.",
      "score" : 2,
      "owner" : {
        "account_id" : 2053598,
        "reputation" : 44936,
        "user_id" : 1831987,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
        "display_name" : "VGR",
        "link" : "https://stackoverflow.com/users/1831987/vgr"
      },
      "creation_date" : 1744637916,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140332199,
      "post_id" : 79572710,
      "body" : "<code>ListIterator</code> has <code>previousIndex()</code> and <code>nextIndex()</code> methods so you could do <code>for (ListIterator&lt;A&gt; it = myList.listIterator(24); it.previousIndex() &gt; 12; )</code>. Agreed that step size adds complexity",
      "score" : 2,
      "owner" : {
        "account_id" : 1096470,
        "reputation" : 29414,
        "user_id" : 1089967,
        "user_type" : "registered",
        "accept_rate" : 59,
        "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
        "display_name" : "lance-java",
        "link" : "https://stackoverflow.com/users/1089967/lance-java"
      },
      "creation_date" : 1744623031,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140332028,
      "post_id" : 79572710,
      "body" : "As soon as I want a different step size, or only iterate from 24 to 13, this becomes awkward. It&#39;s usable, but it requires some concentration whenever someone reads the code  ```     var iter  = list.listIterator(24);     int i = 24;     while (iter.hasPrevious) {         if (i-- &lt;= 12) { break; }                 var item = iter.previous();         ...     } ```",
      "score" : 0,
      "owner" : {
        "account_id" : 3693614,
        "reputation" : 32,
        "user_id" : 3075623,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/6c5f6ad130f250401152927d2b8d5556?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Taren",
        "link" : "https://stackoverflow.com/users/3075623/taren"
      },
      "creation_date" : 1744620360,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}