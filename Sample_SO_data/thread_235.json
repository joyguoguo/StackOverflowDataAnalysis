{
  "question" : {
    "question_id" : 79819309,
    "title" : "Every time I switch between frames on my bottom navigation view their is lag, How do i get rid of it?",
    "body" : "<p>I have an (android studio) garden app that uses multiple image/video views that sometimes change depending on the data. For example if the pressure is low the sky changes to a rainy day(if high it is clear weather). It also displays this data using text views and has a bottom nav view on the app. But sometimes when I switch between the frames the video views won't fully load right as well as the text views that hold the data on pressure, temperature, and humidity. This data specifically is reliant on actual sensors and I am using a raspberry pi 5 for it. It fetches data every 5 seconds. Here is my main activity code and my UpdateUI which is located in the HomeFragment</p>\n<pre><code>//Main Activity vvv\n\npublic class MainActivity extends AppCompatActivity {\n\n\n    ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        getSupportActionBar().setDisplayShowHomeEnabled(true);\n        getSupportActionBar().setLogo(R.mipmap.ic_launcher);\n        getSupportActionBar().setDisplayUseLogoEnabled(true);\n        getSupportActionBar().hide();\n\n\n        getSupportFragmentManager().beginTransaction().add(R.id.frame, new HomeFragment()).commit();\n        setContentView(binding.getRoot());\n        replaceFragment(new HomeFragment());\n        FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();\n        //fragmentTransaction.add(R.id.frame, new CreditsFragment());\n        fragmentTransaction.commit();\n\n        binding.navview.setOnItemSelectedListener(item -&gt; {\n\n            switch (item.getItemId()){\n\n                case R.id.Home:\n                    replaceFragment(new HomeFragment());\n                    break;\n                case R.id.HumidityWindSensor:\n                    replaceFragment(new HumidWindFragment());\n                    break;\n                case R.id.PressureSensor:\n                    replaceFragment(new PressureFragment());\n                    break;\n                case R.id.settings:\n                    replaceFragment(new settingsFragment());\n                    break;\n\n            }\n\n\n            return false;\n        });\n\n    }\n\n\n    private void replaceFragment(Fragment fragment) {\n\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n        fragmentTransaction.replace(R.id.frame, fragment);\n        fragmentTransaction.commit();\n    }\n\n //HomeFragment vvv\n //updates garden UI and sky UI\n    private void updateUI(double temperature, double humidity, double pressure) {\n\n        SharedPreferences hot = getActivity().getSharedPreferences(&quot;TooHot&quot;, Context.MODE_PRIVATE);\n        SharedPreferences cold = getActivity().getSharedPreferences(&quot;TooCold&quot;, Context.MODE_PRIVATE);\n\n        Float tooHot = hot.getFloat(&quot;Hot&quot;, 0);\n        Float tooCold = cold.getFloat(&quot;Cold&quot;, 0);\n\n        //int savedSoil = soilPreferences.getInt(&quot;lastSoil&quot;, 0);\n        //SharedPreferences airHumidChange = getActivity().getSharedPreferences(&quot;air&quot;, Context.MODE_PRIVATE);\n\n\n\n        if(temperature &lt; tooCold){\n            temp.setText(&quot;Temperature: &quot; + temperature + &quot;°F: &quot; + &quot;Heat On!&quot;);\n            heatercooler.setImageResource(R.drawable.heater);\n\n        }\n        else if(temperature &gt; tooHot){\n            temp.setText((&quot;Temperature: &quot; + temperature + &quot;°F: &quot; + &quot;Cool Off!&quot;));\n            heatercooler.setImageResource(R.drawable.coolingontwo);\n\n        }\n        else\n        {\n            temp.setText(&quot;Temperature: &quot; + temperature + &quot;°F: &quot; + &quot;Just Right!&quot;);\n            heatercooler.setImageResource(R.drawable.offmode);\n\n        }\n\n\n\n\n        if(pressure &gt; 30.20){\n            barometer.setText(&quot;Inches in Mercury: &quot; + pressure);\n            barometerTwo.setText(&quot;Fair Weather&quot;);\n            w = 0;\n        }\n        else if(pressure &lt;= 30.20 &amp;&amp; 29.80 &lt;= pressure){\n            barometer.setText(&quot;Inches in Mercury: &quot;  + pressure);\n            barometerTwo.setText(&quot;Steady Weather&quot;);\n            w = 0;\n        }\n        else if(pressure &lt; 29.80){\n            barometer.setText(&quot;Inches in Mercury: &quot;  + pressure );\n            barometerTwo.setText(&quot;Rain Likely&quot;);\n            w = 1;\n        }\n\n        if(w == 0)\n        {\n\n\n            Uri videoUri = Uri.parse(&quot;android.resource://&quot; + getActivity().getPackageName() +  &quot;/&quot; + R.raw.fairskygarden);\n            Uri videoCloud = Uri.parse(&quot;android.resource://&quot; + getActivity().getPackageName() + &quot;/&quot; + R.raw.nc);\n            videoSky.setVideoURI(videoUri);\n            cloudOne.setVideoURI(videoCloud);\n            cloudTwo.setVideoURI(videoCloud);\n\n            videoSky.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    videoSky.start();\n                    mp.setLooping(true);\n                }\n            });\n\n            cloudOne.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    cloudOne.start();\n                    mp.setLooping(true);\n                }\n            });\n\n            cloudTwo.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    cloudTwo.start();\n                    mp.setLooping(true);\n                }\n            });\n        }\n\n\n        else if(w == 1)\n        {\n            Uri videoUri = Uri.parse(&quot;android.resource://&quot; + getActivity().getPackageName() +  &quot;/&quot; + R.raw.rainyskygarden);\n            Uri videoCloud = Uri.parse(&quot;android.resource://&quot; + getActivity().getPackageName() + &quot;/&quot; + R.raw.rc);\n            videoSky.setVideoURI(videoUri);\n\n            cloudOne.setVideoURI(videoCloud);\n            cloudTwo.setVideoURI(videoCloud);\n\n            videoSky.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    videoSky.start();\n                    mp.setLooping(true);\n                }\n            });\n\n            cloudOne.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    cloudOne.start();\n                    mp.setLooping(true);\n                }\n            });\n\n            cloudTwo.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                @Override\n                public void onPrepared(MediaPlayer mp) {\n                    cloudTwo.start();\n                    mp.setLooping(true);\n                }\n            });\n        }\n\n        if(humidity &lt;= 39)\n        {\n            humidityPercent.setText(&quot;Humidity: &quot; + humidity + &quot;%&quot; + &quot; Too Dry! Humidifier On&quot;);\n            deHumidifer.setImageResource(R.drawable.humidiferontwo);\n           \n        }\n        else if(40 &lt;= humidity &amp;&amp; humidity &lt;= 60)\n        {\n            humidityPercent.setText(&quot;Humidity: &quot; + humidity + &quot;%&quot; + &quot; Just Right! Both Off&quot;);\n            deHumidifer.setImageResource(R.drawable.offhumidifer);\n           \n        }\n        else if(humidity &gt;= 61)\n        {\n            humidityPercent.setText(&quot;Humidity: &quot; + humidity + &quot;%&quot; + &quot; Too Moist! Dehumidifier On&quot;);\n            deHumidifer.setImageResource(R.drawable.dehumidiferon);\n           \n        }\n\n\n\n    }\n</code></pre>\n",
    "tags" : [ "java", "android", "lag", "raspberry-pi5" ],
    "owner" : {
      "account_id" : 40793077,
      "reputation" : 23,
      "user_id" : 29955291,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/e8Nex2Gv.jpg?s=256",
      "display_name" : "Isa",
      "link" : "https://stackoverflow.com/users/29955291/isa"
    },
    "is_answered" : false,
    "view_count" : 44,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1763058535,
    "creation_date" : 1763058535,
    "link" : "https://stackoverflow.com/questions/79819309/every-time-i-switch-between-frames-on-my-bottom-navigation-view-their-is-lag-ho",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}