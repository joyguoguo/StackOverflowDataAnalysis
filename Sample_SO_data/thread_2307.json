{
  "question" : {
    "question_id" : 79631220,
    "title" : "Custom generic Hibernate IdGeneratorType",
    "body" : "<p>I want to create a reusable custom ID generator with Hibernate so that I can do something like this:</p>\n<pre><code>@Id\n@CustomId(name = &quot;USR&quot;)\nprivate String id;\n</code></pre>\n<p>and use it across different entity models. Looking at the official docs and online, I haven't found my answer. This is what I have so far:</p>\n<pre><code>import org.hibernate.annotations.IdGeneratorType;\n\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.FIELD;\nimport static java.lang.annotation.ElementType.METHOD;\n\n@IdGeneratorType(CustomIdGenerator.class)\n@Retention(RetentionPolicy.RUNTIME)\n@Target({FIELD, METHOD})\npublic @interface CustomId {\n    String name();\n    int startWith() default 1;\n    int incrementBy() default 1;\n}\n</code></pre>\n<p>and I would like my <code>CustomIdGenerator</code> class to use the provided values from <code>CustomId</code>:</p>\n<pre><code>import org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.id.IdentifierGenerator;\n\npublic class CustomIdGenerator implements IdentifierGenerator {\n\n    private static int counter = startWith;\n\n    @Override\n    public Object generate(SharedSessionContractImplementor session, Object object) {\n        String prefix = name;\n        String suffix = String.format(&quot;%05d&quot;, counter += incrementBy);\n        return prefix + suffix;\n    }\n}\n</code></pre>\n<p>The result should be that it generates IDs like &quot;USR00001&quot;, &quot;USR00002&quot;, etc. in this case.</p>\n<p>Does anyone know how to get this to work?</p>\n",
    "tags" : [ "java", "spring-boot", "hibernate" ],
    "owner" : {
      "account_id" : 11350850,
      "reputation" : 33,
      "user_id" : 8321892,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d78b4c8ca60aaebbebc427cf2d4f8f17?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Cheesy Chameleon",
      "link" : "https://stackoverflow.com/users/8321892/cheesy-chameleon"
    },
    "is_answered" : false,
    "view_count" : 140,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1747925015,
    "creation_date" : 1747777996,
    "link" : "https://stackoverflow.com/questions/79631220/custom-generic-hibernate-idgeneratortype",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79633989,
    "question_id" : 79631220,
    "body" : "<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.*;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface CustomIdGenerator {\n    String prefix();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.reflect.Field;\nimport java.util.UUID;\n\npublic class CustomIdGeneratorUtil {\n\n\n    public static void generateCustomIds(Object obj) {\n        Class&lt;?&gt; clazz = obj.getClass();\n\n        for (Field field : clazz.getDeclaredFields()) {\n            if (field.isAnnotationPresent(CustomIdGenerator.class)) {\n                CustomIdGenerator annotation = field.getAnnotation(CustomIdGenerator.class);\n                String prefix = annotation.prefix();\n                String generatedId = prefix + UUID.randomUUID().toString().substring(0, 5).toUpperCase();\n\n                field.setAccessible(true);\n                try {\n                    field.set(obj, generatedId);\n                } catch (IllegalAccessException ex) {\n                    throw new RuntimeException(&quot;Unable to set ID&quot;, ex);\n                }\n            }\n        }\n</code></pre>\n<p>You can replace the <code>randomUUID</code> with your sequence generator if you need.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class User {\n    \n    @CustomIdGenerator(prefix = &quot;USR&quot;)\n    private String userId;\n\n    public String getUserId() {\n        return userId;\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9051102,
      "reputation" : 146,
      "user_id" : 6741224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/O9Qbh9u1.jpg?s=256",
      "display_name" : "Uday Kumar",
      "link" : "https://stackoverflow.com/users/6741224/uday-kumar"
    },
    "creation_date" : 1747925015,
    "last_activity_date" : 1747925015,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79633989" : [ {
      "comment_id" : 140450662,
      "post_id" : 79633989,
      "body" : "Is there a way to do this without reflection?",
      "score" : 0,
      "owner" : {
        "account_id" : 11350850,
        "reputation" : 33,
        "user_id" : 8321892,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/d78b4c8ca60aaebbebc427cf2d4f8f17?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Cheesy Chameleon",
        "link" : "https://stackoverflow.com/users/8321892/cheesy-chameleon"
      },
      "creation_date" : 1747942570,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140449723,
      "post_id" : 79633989,
      "body" : "This should work and give you what you want.",
      "score" : 0,
      "owner" : {
        "account_id" : 9051102,
        "reputation" : 146,
        "user_id" : 6741224,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/O9Qbh9u1.jpg?s=256",
        "display_name" : "Uday Kumar",
        "link" : "https://stackoverflow.com/users/6741224/uday-kumar"
      },
      "creation_date" : 1747925054,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}