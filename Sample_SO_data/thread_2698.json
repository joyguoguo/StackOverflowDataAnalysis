{
  "question" : {
    "question_id" : 79601864,
    "title" : "SQLException: Column (courthouseid) not found in any table in the query (or SLV is undefined) on composite-id field",
    "body" : "<p>I am in the process of converting an ancient Spring 3 app to Spring 6 and trying to change as little as possible due to timeframe. It uses XML mapping with hibernate.</p>\n<p>As part of this, I have encountered the above error one the following line of code in my DAO.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuppressWarnings(&quot;unchecked&quot;)\nList&lt;ConfigParameter&gt; configParameterList = (List&lt;ConfigParameter&gt;) hibernateSession.createQuery(\n                &quot;from ConfigParameter configParameter order by category, key, courthouseId, value&quot;).list();\n</code></pre>\n<p>The XML mappings for ConfigParameter look like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;hibernate-mapping&gt;\n    &lt;class name=&quot;com.gs.jxx.util.ConfigParameter&quot; table=&quot;CONFIG_PARMS&quot;&gt;\n        &lt;composite-id name=&quot;id&quot; class=&quot;com.gs.jxx.util.ConfigParameterKey&quot; mapped=&quot;true&quot;&gt;\n            &lt;key-property name=&quot;category&quot;/&gt;\n            &lt;key-property name=&quot;courthouseId&quot; column=&quot;COURT_LOC&quot;/&gt;\n            &lt;key-property name=&quot;key&quot;/&gt;\n        &lt;/composite-id&gt;\n\n        &lt;property name=&quot;category&quot;/&gt;\n        &lt;property name=&quot;courthouseId&quot; column=&quot;COURT_LOC&quot;/&gt;\n        &lt;property name=&quot;key&quot;/&gt;\n        &lt;property name=&quot;value&quot;/&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>And I have the key fields defined in both classes. As you can see, <code>courthouseId</code> is in both places. I figure that it is erroring out on this one because it's the first one that has a different column name than the name of the property.</p>\n<p>I've researched the as recent as I can find hibernate docs on XML mapping and they seem to support what I'm doing. <a href=\"https://docs.jboss.org/hibernate/orm/3.5/reference/en-US/html/mapping.html#mapping-declaration-compositeid\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/orm/3.5/reference/en-US/html/mapping.html#mapping-declaration-compositeid</a></p>\n<p>So how do I get past this?</p>\n",
    "tags" : [ "java", "spring", "hibernate", "hibernate-xml-mapping" ],
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "is_answered" : true,
    "view_count" : 62,
    "closed_date" : 1746565731,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1746121706,
    "creation_date" : 1746102859,
    "link" : "https://stackoverflow.com/questions/79601864/sqlexception-column-courthouseid-not-found-in-any-table-in-the-query-or-slv",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79602302,
    "question_id" : 79601864,
    "body" : "<p>After much searching and reading of source code of hibernate and it's documentation, I banged into a solution that seems to be working.</p>\n<p>The mapped parameter is rarely used in any of the examples online. This began to make me suspicious. So finally, I simply took it out and removed the duplicated properties from my class and mappings. Then I got the idea to reference the id in my query. This seems to be working. So here is the new mapping file:</p>\n<pre><code>&lt;hibernate-mapping&gt;\n    &lt;class name=&quot;com.gs.jxx.util.ConfigParameter&quot; table=&quot;CONFIG_PARMS&quot;&gt;\n        &lt;composite-id name=&quot;id&quot; class=&quot;com.gs.jxx.util.ConfigParameterKey&quot;&gt;\n          &lt;key-property name=&quot;category&quot;/&gt;\n          &lt;key-property name=&quot;courthouseId&quot; column=&quot;COURT_LOC&quot;/&gt;\n          &lt;key-property name=&quot;key&quot;/&gt;\n       &lt;/composite-id&gt;\n\n       &lt;property name=&quot;value&quot;/&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n<p>and here is the HQL being run.</p>\n<pre><code>Query&lt;ConfigParameter&gt; query = hibernateSession.createQuery(\n       &quot;from ConfigParameter conf order by conf.id.category, conf.id.key, conf.id.courthouseId, conf.value&quot;, ConfigParameter.class);\nList&lt;ConfigParameter&gt; configParameterList = query.list();\n</code></pre>\n<p>This appears to have solved my problem.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 938881,
      "reputation" : 15310,
      "user_id" : 967330,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://www.gravatar.com/avatar/b731ee0bd2400959e9d13737e42c6418?s=256&d=identicon&r=PG",
      "display_name" : "Thom",
      "link" : "https://stackoverflow.com/users/967330/thom"
    },
    "creation_date" : 1746121706,
    "last_activity_date" : 1746121706,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}