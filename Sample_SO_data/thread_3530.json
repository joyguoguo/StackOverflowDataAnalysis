{
  "question" : {
    "question_id" : 79542621,
    "title" : "How to process responses using springwebflux get() and post() methods in an quicker and effective way?",
    "body" : "<p>I have tried below code for both of my <code>get()</code> and <code>post()</code> using spring webflux client with JDK17, its working perfectly fine. Its seems like block method taking little bit more time to process response and its blocking the other requests till the current request processing is done. So is there a any way that I can read my responses other than <code>block()</code> method? Final consumers are Java applications uses some key data of JSON response from <code>post()</code> call. and from <code>get()</code> byte response they use to create a file.</p>\n<p>Its a SpringBoot (3.X.X) Application runs on Linux Server.</p>\n<pre><code>byte[] testResponse1 =  webclient.get()\n                       .uri(https://testclient/)\n                       .headers(HttpHeaders)\n                       .retrieve()\n                       .bodyToMono(byte[].class)\n                       .block()\n\nString testResponse2 =  webclient.post()\n                       .uri(https://testclient/)\n                       .contentType(MediaType.MULTIPART_FORM_DATA) \n                       .headers(HttpHeaders)\n                       .retrieve()\n                       .bodyToMono(String.class)\n                       .block()\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-webflux" ],
    "owner" : {
      "account_id" : 20986281,
      "reputation" : 47,
      "user_id" : 15420009,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d4f73fb811c51248927843dee54faf18?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dev9321",
      "link" : "https://stackoverflow.com/users/15420009/dev9321"
    },
    "is_answered" : true,
    "view_count" : 78,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744234014,
    "creation_date" : 1743208495,
    "link" : "https://stackoverflow.com/questions/79542621/how-to-process-responses-using-springwebflux-get-and-post-methods-in-an-quic",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79565362,
    "question_id" : 79542621,
    "body" : "<p>Using .block() makes the call synchronous and can block other requests in your reactive app. To keep it non-blocking and reactive, you should avoid .block() and instead work with Mono or Flux asynchronously using .subscribe() or chaining operators like .map() or .flatMap().</p>\n<pre><code>webClient.get()\n    .uri(&quot;https://testclient/&quot;)\n    .retrieve()\n    .bodyToMono(byte[].class)\n    .subscribe(response -&gt; {\n        // Process byte[] response, e.g., write to file\n    });\n\n\nwebClient.post()\n    .uri(&quot;https://testclient/&quot;)\n.contentType(MediaType.MULTIPART_FORM_DATA)\n    .retrieve()\n    .bodyToMono(String.class)\n    .subscribe(json -&gt; {\n        // Extract key values and use them\n    });\n</code></pre>\n<p>OR</p>\n<p>Instead of .block(), let your controller or service method return a Mono or Flux. This way, the calls remain non-blocking, and Spring WebFlux handles the async flow end-to-end.</p>\n<pre><code>public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; fetchFile() {\n    return webClient.get()\n        .uri(&quot;https://testclient/&quot;)\n        .retrieve()\n        .bodyToMono(byte[].class)\n        .map(data -&gt; ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=file.bin&quot;)\n            .body(data));\n}\n\npublic Mono&lt;String&gt; postAndGetJson() {\n    return webClient.post()\n        .uri(&quot;https://testclient/&quot;)\n        .contentType(MediaType.MULTIPART_FORM_DATA)\n        .retrieve()\n        .bodyToMono(String.class);\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 13408174,
      "reputation" : 64,
      "user_id" : 9675572,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-y5Qb9GaHjcY/AAAAAAAAAAI/AAAAAAAAALg/aelY_zv2Ggs/s256-rj/photo.jpg",
      "display_name" : "Nikhil Amin",
      "link" : "https://stackoverflow.com/users/9675572/nikhil-amin"
    },
    "creation_date" : 1744234014,
    "last_activity_date" : 1744234014,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140278340,
    "post_id" : 79542621,
    "body" : "Its regular spring boot application runs on regular linux server. Final consumers are Java applications, they uses some key data of JSON response from <code>post() </code>call. and from <code>get()</code> byte data of a file. â€“",
    "score" : 0,
    "owner" : {
      "account_id" : 20986281,
      "reputation" : 47,
      "user_id" : 15420009,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d4f73fb811c51248927843dee54faf18?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dev9321",
      "link" : "https://stackoverflow.com/users/15420009/dev9321"
    },
    "creation_date" : 1743300442,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140278168,
    "post_id" : 79542621,
    "body" : "who is the final consumer of the response? a wepbage, react angular? or is it that your spring server that runs a scheduled job? is this a fully reactive application or just a regular spring boot application",
    "score" : 0,
    "owner" : {
      "account_id" : 2064278,
      "reputation" : 15073,
      "user_id" : 1840146,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://i.sstatic.net/JXdxm.png?s=256",
      "display_name" : "Toerktumlare",
      "link" : "https://stackoverflow.com/users/1840146/toerktumlare"
    },
    "creation_date" : 1743293774,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140276991,
    "post_id" : 79542621,
    "body" : "This question lacks context. Some clarification questions: What is the signature of the function wrapping your code snippet? Assuming the requests you mention are the requests directed to your server, is your server using reactive (webflux) controllers?",
    "score" : 1,
    "owner" : {
      "account_id" : 18073373,
      "reputation" : 363,
      "user_id" : 13137415,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a353665396ac0d80d7c3f4a20cf62c45?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "rcasia",
      "link" : "https://stackoverflow.com/users/13137415/rcasia"
    },
    "creation_date" : 1743255914,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79565362" : [ {
      "comment_id" : 140322828,
      "post_id" : 79565362,
      "body" : "Thank you for you&#39;re response. I think second case will work for my use case though I return Mono objects spring is auto converting from mono object to actual object like string or byte[] response) back to the caller. So subscribe won&#39;t work since I need to return something.",
      "score" : 0,
      "owner" : {
        "account_id" : 20986281,
        "reputation" : 47,
        "user_id" : 15420009,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/d4f73fb811c51248927843dee54faf18?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Dev9321",
        "link" : "https://stackoverflow.com/users/15420009/dev9321"
      },
      "creation_date" : 1744336956,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}