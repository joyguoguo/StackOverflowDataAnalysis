{
  "question" : {
    "question_id" : 79799511,
    "title" : "Why does BottomNavigationView briefly switch to HomeFragment before returning to SettingsFragment after theme change?",
    "body" : "<p>I'm facing a weird UI flicker issue in my Android app when using BottomNavigationView and switching between light/dark modes.</p>\n<p>Here’s the scenario:</p>\n<p>I have a single MainActivity that hosts multiple fragments (HomeFragment, MyRecipesFragment, SavedFragment, and SettingsFragment).</p>\n<p>Inside SettingsFragment, when the user changes the theme, I call</p>\n<p><code>AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);</code></p>\n<p>(or MODE_NIGHT_NO, depending on selection).</p>\n<p>This causes the activity to recreate automatically, as expected.</p>\n<p>However, the problem is:\nWhen the activity recreates, the UI briefly shows the HomeFragment (the default one), and then jumps back to SettingsFragment.\nIt looks like the bottom navigation flashes to the home icon for 0.3 seconds before returning to settings.</p>\n<p>Here’s my simplified MainActivity code:</p>\n<pre class=\"lang-none prettyprint-override\"><code>    BottomNavigationView bottomNavigationView;\n    private static final String PREF_THEME = &quot;Theme&quot;;\n    private static final String KEY_THEME_NAME = &quot;ThemeName&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        SharedPreferences prefs = getSharedPreferences(PREF_THEME, MODE_PRIVATE);\n        int themeName = prefs.getInt(KEY_THEME_NAME, 0);\n\n        if (themeName == 0) {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_FOLLOW_SYSTEM);\n        } else if (themeName == 1) {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);\n        } else if (themeName == 2) {\n            AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_YES);\n        }\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        bottomNavigationView = findViewById(R.id.bottom_navigation);\n\n        if (savedInstanceState == null) {\n            loadFragment(new HomeFragment());\n        }\n\n        bottomNavigationView.setOnItemSelectedListener(item -&gt; {\n            Fragment selected = null;\n            if (item.getItemId() == R.id.nav_home)\n                selected = new HomeFragment();\n            else if (item.getItemId() == R.id.nav_mine)\n                selected = new MyRecipesFragment();\n            else if (item.getItemId() == R.id.nav_saved)\n                selected = new SavedFragment();\n            else if (item.getItemId() == R.id.nav_settings)\n                selected = new SettingsFragment();\n\n            if (selected != null) loadFragment(selected);\n            return true;\n        });\n    }\n\n    private void loadFragment(Fragment fragment) {\n        getSupportFragmentManager()\n            .beginTransaction()\n            .replace(R.id.frame_container, fragment)\n            .commit();\n    }\n}\n</code></pre>\n<p>Expected behavior:\nAfter changing the theme, I want the app to stay on the SettingsFragment without showing HomeFragment or resetting the bottom navigation selection.</p>\n<p>Actual behavior:\nAfter the theme change (and automatic recreate), the screen shows HomeFragment for a brief moment, then jumps back to SettingsFragment.\nVisually, the bottom navigation flashes as if it reselected Home.</p>\n<p>I’ll attach a short video showing the flicker for clarity.</p>\n<p>If you look closely, the &quot;Recipe&quot; tab is briefly selected first, and then it immediately switches back to &quot;Settings&quot; after the theme change.\n<a href=\"https://i.sstatic.net/gYR3B1NI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/gYR3B1NI.gif\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "android", "android-studio", "bottomnavigationview" ],
    "owner" : {
      "account_id" : 23296117,
      "reputation" : 13,
      "user_id" : 19514652,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/211def811fca43749ddb9ba39d7ec349?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Husky",
      "link" : "https://stackoverflow.com/users/19514652/husky"
    },
    "is_answered" : false,
    "view_count" : 91,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1761396988,
    "creation_date" : 1761396603,
    "link" : "https://stackoverflow.com/questions/79799511/why-does-bottomnavigationview-briefly-switch-to-homefragment-before-returning-to",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}