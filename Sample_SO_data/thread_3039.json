{
  "question" : {
    "question_id" : 79575860,
    "title" : "How to handle redirect Uri for google Oauth2.O in spring boot?",
    "body" : "<pre><code>package com.Oauth.OauthBackend.services.JwtService.UserService;\n\nimport java.util.Optional;\n\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.oauth2.core.user.OAuth2User;\nimport org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler;\nimport org.springframework.stereotype.Component;\n\nimport com.Oauth.OauthBackend.exceptionHandler.CustomException;\nimport com.Oauth.OauthBackend.models.Users;\nimport com.Oauth.OauthBackend.repository.UserRepository;\nimport com.Oauth.OauthBackend.services.JwtService.JwtService;\n\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\n@Component\npublic class UserSuccessHandler extends SimpleUrlAuthenticationSuccessHandler {\n\n    private final JwtService jwtService;\n    private final UserRepository repository;\n\n    public UserSuccessHandler(JwtService jwtService, UserRepository repository) {\n        this.jwtService = jwtService;\n        this.repository = repository;\n    }\n\n    @Override\n    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,\n                                        Authentication authentication) {\n\n        try {\n            System.out.println(&quot;come here&quot;);\n            OAuth2User oAuth2User = (OAuth2User) authentication.getPrincipal();\n            String email = oAuth2User.getAttribute(&quot;email&quot;);\n            Object id = oAuth2User.getAttribute(&quot;id&quot;);\n            String gitId = String.valueOf(id);\n            String claim = (email != null) ? email : gitId;\n\n            Users user;\n            Optional&lt;Users&gt; userOptional = (email != null) ?\n                    repository.findByEmail(claim) :\n                    repository.findByGitID(claim);\n\n            if (userOptional.isEmpty()) {\n                throw new CustomException(&quot;User not found&quot;, 404);\n            }\n\n            user = userOptional.get();\n\n            String accessToken = jwtService.generateAccessToken(claim);\n            String refreshToken = jwtService.generateRefreshToken(user.getId());\n\n            user.setRefreshToken(refreshToken);\n            repository.save(user);\n\n            // Redirect back to app with token\n            String deepLink =  &quot;myapp://page2?token=ACCESS_TOKEN&amp;uid=USER_ID&quot;\n                    .replace(&quot;ACCESS_TOKEN&quot;, accessToken)\n                    .replace(&quot;USER_ID&quot;, user.getId());\n            response.sendRedirect(deepLink);\n            System.out.println(deepLink);\n            System.out.println(&quot;accessToken is &quot; + accessToken);\n        } catch (Exception e) {\n            throw new CustomException(&quot;Error processing authentication success&quot;, 500);\n        }\n    }\n}\n</code></pre>\n<p>The problem i am facing is like i am not sure how to handle the redirect uri for google in google console, firstly i deployed my spring app to render and got domain name for <a href=\"https://oauth-5.onrender.com/oauth2/authorize/google\" rel=\"nofollow noreferrer\">https://oauth-5.onrender.com/oauth2/authorize/google</a> to choose the different accounts, then set the redirect uri in app.properties as <a href=\"https://oauth-5.onrender.com/login/oauth2/code/google\" rel=\"nofollow noreferrer\">https://oauth-5.onrender.com/login/oauth2/code/google</a> as well as in google dev console but getting error as redirect uri mismatched. Need to login then using deep link need to back to my app with all credentials like  String deepLink =  &quot;myapp://page2?token=ACCESS_TOKEN&amp;uid=USER_ID&quot;\n.replace(&quot;ACCESS_TOKEN&quot;, accessToken)\n.replace(&quot;USER_ID&quot;, user.getId());\nresponse.sendRedirect(deepLink); in userSuccessHandler , onAuthenticationSuccess.</p>\n",
    "tags" : [ "java", "spring-boot", "oauth-2.0", "android-deep-link" ],
    "owner" : {
      "account_id" : 27869283,
      "reputation" : 13,
      "user_id" : 21280183,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxbKMzkfudcJ_UXvL74OKp4R1Wo1kuwQC6v4bjn0Pg=k-s256",
      "display_name" : "Sachin Kumar",
      "link" : "https://stackoverflow.com/users/21280183/sachin-kumar"
    },
    "is_answered" : false,
    "view_count" : 42,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1744779359,
    "creation_date" : 1744743455,
    "link" : "https://stackoverflow.com/questions/79575860/how-to-handle-redirect-uri-for-google-oauth2-o-in-spring-boot",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}