{
  "question" : {
    "question_id" : 79540941,
    "title" : "How to enable remote debug in java app wrapped to deb package?",
    "body" : "<p>I have java application started remotely(spring boot).\nWe have gitlab pipeline which generates deb package and starts it on Ubuntu OS.</p>\n<p>I can do some things with that environment. For example restart:</p>\n<pre><code>sudo systemctl restart myapp.service\n</code></pre>\n<p>Now I want to enable remote debug of that application. But How can I restart it with debug enabled ?</p>\n<p>I know that <a href=\"https://stackoverflow.com/a/48396996/2674303\">I have to write</a> somewhere:</p>\n<pre><code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000\n</code></pre>\n<p>But I don't know where. Could you please clarify ?\nI suppose that this line has to be added somewhere here:\n<a href=\"https://i.sstatic.net/rEThOiak.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/rEThOiak.png\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "spring-boot", "remote-debugging", "deb" ],
    "owner" : {
      "account_id" : 3163862,
      "reputation" : 36864,
      "user_id" : 2674303,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://www.gravatar.com/avatar/411d782b77899035a96abb71b64e062a?s=256&d=identicon&r=PG",
      "display_name" : "gstackoverflow",
      "link" : "https://stackoverflow.com/users/2674303/gstackoverflow"
    },
    "is_answered" : false,
    "view_count" : 80,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744308337,
    "creation_date" : 1743151881,
    "link" : "https://stackoverflow.com/questions/79540941/how-to-enable-remote-debug-in-java-app-wrapped-to-deb-package",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79567309,
    "question_id" : 79540941,
    "body" : "<p>If you execute <code>ps -aux | grep java</code> with your service running, you should get command line like that :</p>\n<pre class=\"lang-bash prettyprint-override\"><code>/path/to/java_home/bin/java \\ #java executable\n-Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Xmx2G \\ # many and various optional arguments\n-cp file.jar:/path/to/libs \\ # or -classpath or -jar or -modulepath\nmy.program.MainClass arg1 arg2 # main class of program with its arguments\n</code></pre>\n<p>As they are many ways to package and launch a java application, this can vary. But if you have a similar line, you should put your -agentlib argument between arguments of the second line if the service configuration lets you do it.</p>\n<p>If it is not possible, as a workaround, you should define the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/java.html#using-the-jdk_java_options-launcher-environment-variable\" rel=\"nofollow noreferrer\"><code>JDK_JAVA_OPTIONS</code> environment variable</a> with the content <code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:8000</code> and the argument for debug will be prepended to your command line. Better is to define it only for the service, if not possible for the whole app.</p>\n<p>If you are sensitive to security concern, you should be aware that remote debug will transfer through the network datas of the app without encryption. You can use remote debug with ssh tunneling to prevent it : <a href=\"https://fbibonne.frama.io/posts/2025-03-25-debug-remote-jvm-with-intellij/#cr%c3%a9ation-de-la-configuration-de-d%c3%a9bogage-dans-intellij\" rel=\"nofollow noreferrer\">https://fbibonne.frama.io/posts/2025-03-25-debug-remote-jvm-with-intellij/#cr%c3%a9ation-de-la-configuration-de-d%c3%a9bogage-dans-intellij</a> (written in french but browser translation seems to work).</p>\n<p>Hope this helps</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 19234071,
      "reputation" : 91,
      "user_id" : 14055401,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6bf3171bbad35e7b596621ca4241d54a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "FBibonne",
      "link" : "https://stackoverflow.com/users/14055401/fbibonne"
    },
    "creation_date" : 1744308337,
    "last_activity_date" : 1744308337,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140272947,
    "post_id" : 79540941,
    "body" : "Impossible to answer without knowing what <code>&#47;opt&#47;REDACTED&#47;bin&#47;REDACTED</code> contains and how it invokes Java. The most trivial way forward is to modify that script to look for a <code>JAVA_DEBUG</code> environment variable and pass the proper options in the call to java.",
    "score" : 0,
    "owner" : {
      "account_id" : 1684984,
      "reputation" : 32155,
      "user_id" : 1548468,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=256&d=identicon&r=PG",
      "display_name" : "Botje",
      "link" : "https://stackoverflow.com/users/1548468/botje"
    },
    "creation_date" : 1743152615,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}