{
  "question" : {
    "question_id" : 79749540,
    "title" : "Is there a format to highlight RegEx format in a parameter in java?",
    "body" : "<p>I am making a method that recieves a RegEx, i want to know if there is a way to tell java that the string i am recieving is a RegEx and make it highlight it.</p>\n<p>Similar to what happens when you have the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;StringExample0123&quot;.replaceAll(&quot;[0-9]&quot;,&quot;&quot;);\n</code></pre>\n<p>The previous line of code would highlight both the &quot;[]&quot; and the &quot;-&quot; since they are part of RegEx formatting.</p>\n<p>So what i am looking for is that when i do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>customMethod(&quot;[0-9]&quot;);\n</code></pre>\n<p>is also highlighted with proper RegEx syntax</p>\n<p>Currently the customMethod() has only the replaceAll documentation that i tried to use to mess around and see if there was a way to highlight a param:</p>\n<pre><code>/**\n * Replaces each substring of this string that matches the given &lt;a\n * href=&quot;../util/regex/Pattern.html#sum&quot;&gt;regular expression&lt;/a&gt; with the\n * given replacement.\n *\n * &lt;p&gt; An invocation of this method of the form\n * &lt;i&gt;str&lt;/i&gt;{@code .replaceAll(}&lt;i&gt;regex&lt;/i&gt;{@code ,} &lt;i&gt;repl&lt;/i&gt;{@code )}\n * yields exactly the same result as the expression\n *\n * &lt;blockquote&gt;\n * &lt;code&gt;\n * {@link java.util.regex.Pattern}.{@link\n * java.util.regex.Pattern#compile(String) compile}(&lt;i&gt;regex&lt;/i&gt;).{@link\n * java.util.regex.Pattern#matcher(java.lang.CharSequence) matcher}(&lt;i&gt;str&lt;/i&gt;).{@link\n * java.util.regex.Matcher#replaceAll(String) replaceAll}(&lt;i&gt;repl&lt;/i&gt;)\n * &lt;/code&gt;\n * &lt;/blockquote&gt;\n *\n *&lt;p&gt;\n * Note that backslashes ({@code \\}) and dollar signs ({@code $}) in the\n * replacement string may cause the results to be different than if it were\n * being treated as a literal replacement string; see\n * {@link java.util.regex.Matcher#replaceAll Matcher.replaceAll}.\n * Use {@link java.util.regex.Matcher#quoteReplacement} to suppress the special\n * meaning of these characters, if desired.\n *\n * @param   regex\n *          the regular expression to which this string is to be matched\n *\n * @return  The resulting {@code String}\n * \n *          if the regular expression's syntax is invalid\n *\n * @see java.util.regex.Pattern\n *\n * @since 1.4\n */\n</code></pre>\n<p>And there is not any other configurations other than the default configs you get on a fresh install of InteliJ IDEA community edition or a freshly created Maven project.</p>\n<p>I tried copying the replaceAll() documentation of a string and pasted it for the method in hopes to see if there was some formatting, specific class or something they gave to achieve this but while it properly gave the documentation, it did not add the param highlighting.</p>\n<p>Expected Result ([] and - is highlighted due to it being part of regex syntax):<a href=\"https://i.sstatic.net/AJbZygd8.png\" rel=\"nofollow noreferrer\"><br />\nsnippet of code that reads &quot;StringExample0123&quot;.replaceAll(&quot;[0-9]&quot;,&quot;&quot;);</a></p>\n<p>Result (String formatting only, giving it only the green color):</p>\n<p><a href=\"https://i.sstatic.net/AJbZygd8.png\" rel=\"nofollow noreferrer\">snippet of code that reads customMethod(&quot;[0-9]&quot;);</a></p>\n<p>Additional note: If its InteliJ IDEA dependant i am using IDEA and would only work locally its a shame but its useful still. Thanks in advance</p>\n",
    "tags" : [ "java", "regex", "intellij-idea" ],
    "owner" : {
      "account_id" : 43697497,
      "reputation" : 11,
      "user_id" : 31371661,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/623c84490840946c5ebe56317cee3ea0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gianluca Barreyro",
      "link" : "https://stackoverflow.com/users/31371661/gianluca-barreyro"
    },
    "is_answered" : true,
    "view_count" : 140,
    "answer_count" : 1,
    "score" : -2,
    "last_activity_date" : 1756477653,
    "creation_date" : 1756411168,
    "link" : "https://stackoverflow.com/questions/79749540/is-there-a-format-to-highlight-regex-format-in-a-parameter-in-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79749553,
    "question_id" : 79749540,
    "body" : "<p>There is no 'this is regex' <em>at all</em> in the java language specification.</p>\n<p>However, you're doing it wrong. Please read to the end for the true solution.</p>\n<h2>But.. intellij has it!</h2>\n<p>That's an IntelliJ specific thing.</p>\n<p>It has an 'extension annotations' system baked into it, like many IDEs, where an external source indicates what annotations <em>should have been</em> on well known APIs (including <code>java.*</code> itself), primarily for <code>@Nullable</code> <code>@NonNull</code> purposes. Many libraries aren't annotated with such annotations, so somebody contributes a list of 'well, if it had been, these annotations would appear on these methods' and intellij uses that and ships with lists of such extension definitions. It includes an annotation that marks a parameter as 'this is a regex', and this is what powers IntelliJ's regex highlighting: It treats e.g. <code>Pattern.compile</code>'s <code>String pattern</code> argument as being annotated to indicate its a regex parameter via the external annotations mechanism. Other IDEs may employ a similar strategy.</p>\n<p>For IntelliJ this is described <a href=\"https://www.jetbrains.com/help/idea/annotating-source-code.html#external-annotations\" rel=\"nofollow noreferrer\">here in the JetBrain IntelliJ docs on java annotations</a>.</p>\n<p>The annotation you are looking for is called <code>org.intellij.lang.annotations.RegExp</code>, as found <a href=\"https://github.com/JetBrains/java-annotations/tree/master/src/jvmMain/java/org/intellij/lang/annotations\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>You can either use the external annotations feature (see the docs), or just add that annotation to your code. But it's not standard java, and it would have no effect on other IDEs.</p>\n<p>The maven GAV coordinates you need to add as a dependency to your pom to add these annotations to your project is <a href=\"https://mvnrepository.com/artifact/org.jetbrains/annotations\" rel=\"nofollow noreferrer\">org.jetbrans :: annotations</a>.</p>\n<h2>Doing it right</h2>\n<p>Optimally you're looking for a non-IDE-specific annotation. There are quite a few efforts (really suffering from that <a href=\"https://xkcd.com/927/\" rel=\"nofollow noreferrer\">XKCD thing</a>) but the one with lots of momentum behind it is <a href=\"https://jspecify.dev\" rel=\"nofollow noreferrer\">JSpecify</a>. Unfortunately, so far jspecify is <em>only</em> working on nullity annotations. You could check with them if they have any interest in adding this.</p>\n<h2>Doing it right, take 2</h2>\n<p>But, <em>all of this is wrong</em>. <code>replaceAll</code> is bad API design. It should never exist. The sheer number of SO questions that are confused about <code>replaceAll</code> is countable <strong>in percentages of all java questions</strong>, it is that bad.</p>\n<p>(For context: <code>.replace</code> also replaces all. The existence of <code>replaceAll</code> therefore <em>suggests</em> that <code>replace</code> thus must not be doing 'all'. Except, <code>replace</code> <em>also</em> replaces all (its argument is a literal string, that exact string is replaced, no regexp), <code>replaceAll</code> replaces all (but its argument is a regex), and <code>replaceFirst</code> replaces only the first occurrence and its first argument is a regex. There is no non-regex replaceFirst).</p>\n<p>The name of the method makes absolutely no indication that it's a regex.</p>\n<p>Therefore <strong>this is a security leak</strong> <sup>1</sup>. And one that confuses a ton (literally - see SO for proof of that) of users. Truly, if there is such a thing as 'crime against humanity' level idiotic API design, <code>replaceAll</code> is a real contender for this golden raspberry-esque award. <em>And you want to emulate it. What a terrible idea</em>.</p>\n<p>Java is nominal. Types should have names and those names should explain how things work. That's so obvious, there's a name for APIs that break this rule: &quot;Stringly typed API&quot; (it's a pejorative).</p>\n<p>Thus, if an argument is a regexp, then.. <em>declare it properly</em>.</p>\n<p>This method is correct:</p>\n<pre><code>/**\n * Additional information not already implied by the notion 'the method is named &quot;foobar&quot; and it has one parameter: A regex.\n */\nvoid foobar(Pattern pattern) { ... }\n</code></pre>\n<p>and this method is absolutely terrible:</p>\n<pre><code>/**\n * {@code pattern} is a regexp! Surprise!!\n * \n * Additional information not already implied by the notion 'the method is named &quot;foobar&quot; and it has one parameter: A regex.\n */\nvoid foobar(String pattern) {\n  Pattern p = Pattern.compile(pattern);\n}\n</code></pre>\n<p>And if you do it that way, you get what you want automatically. Because intellij already knows that <code>Pattern.compile</code> takes a regex, as do all other IDEs that have regexp-specific colouring available.</p>\n<p>It even has the considerable advantage that one can preconstruct the patterns. Pattern creation is not necessarily cheap. <code>.replaceAll</code> requires that the string is 'compiled' into a regular expression <em>every time</em>. By making the argument a pattern you both make that more clear <em>and</em> you offer a solution to it; something that <code>.replaceAll</code> simply doesn't have. A user can write:</p>\n<pre><code>private static final Pattern MY_PATTERN = Pattern.compile(&quot;...&gt;&quot;);\n</code></pre>\n<p>and just use <code>MY_PATTERN</code> as argument. Now the regex is only compiled once-per-VM-boot instead of millions of times during the VM's lifetime.</p>\n<hr />\n<p>[1] Regexes, huh? Parsing untrusted user input as a regexp (i.e. the code <code>Pattern.compile(someWebTextField.get())</code> is a security leak because running a regexp has essentially unbounded CPU impact: A small regex run against a small input can take an hour of CPU time, literally, given a sufficiently evilly crafted regex. Regexes can be used to calculate primes, for example. It's not even a matter of 'write a better optimized regex engine'. Regexes are that complex -inherently-. Most people don't know that. Even if you do, if you don't know that the argument to <code>replaceAll</code> is a regex, a hacker can take your server down with a single simple query lazily rerun every second or so. No need for a big DDOS network and DDOS mitigation strategies such as cloudflare or similar won't help you. Separately, if you thought it was a literal intermixed with user input, then regexes can obliterate your protections. Something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>someValue.replace(&quot;&gt;&gt;&quot; + untrustedUserInput.replace(&quot;&lt;&lt;&quot;, &quot;&quot;) + &quot;&lt;&lt;&quot;, newUserName);\n</code></pre>\n<p>Might be secure (though probably not a great idea). However, make those <code>replaceAll</code> and that is a serious vulnerability; I can e.g. input <code>foo|bar</code> and now the scan for the <code>&gt;&gt;</code> is eliminated due to the nature of the <code>|</code> which has special meaning in regex.</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107186,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1756411949,
    "last_activity_date" : 1756477653,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140699782,
    "post_id" : 79749540,
    "body" : "You might be looking for <a href=\"https://javadoc.io/static/org.jetbrains/annotations/26.0.2/org/intellij/lang/annotations/Pattern.html\" rel=\"nofollow noreferrer\"><code>@Pattern</code></a> from JetBrains annotations. Though you would need to add it as a compile-time dependency to your project one way or another. Other annotations from this pack like <code>@Contract</code> are good practice and integrate well with the IDE.",
    "score" : 0,
    "owner" : {
      "account_id" : 14914414,
      "reputation" : 1185,
      "user_id" : 10808904,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ts8fIsJj.png?s=256",
      "display_name" : "Xavier Pedraza",
      "link" : "https://stackoverflow.com/users/10808904/xavier-pedraza"
    },
    "creation_date" : 1756411824,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140699778,
    "post_id" : 79749540,
    "body" : "Can you please describe, what you exactly mean with &quot;highlighting&quot;? I suppose you mean a special coloring of regular expressions, but where should this happen? Where do you &quot;receive&quot; the string? Do you want to add formatting to your JavaDoc? Do you want to output it in a window or in a piece of HTML that is served somewhere? Shall the debugger add formatting? Also you added the same image for both examples, and you should inline that instead of linking.",
    "score" : 1,
    "owner" : {
      "account_id" : 3391382,
      "reputation" : 5360,
      "user_id" : 2846138,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2sp68.png?s=256",
      "display_name" : "cyberbrain",
      "link" : "https://stackoverflow.com/users/2846138/cyberbrain"
    },
    "creation_date" : 1756411569,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140699772,
    "post_id" : 79749540,
    "body" : "Do you mean to highlight it in Intellij editor?",
    "score" : 2,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1756411498,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79749553" : [ {
      "comment_id" : 140707782,
      "post_id" : 79749553,
      "body" : "Huh i see now, i was looking at the wrong place for answers. Thank you so much for the info.",
      "score" : 0,
      "owner" : {
        "account_id" : 43697497,
        "reputation" : 11,
        "user_id" : 31371661,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/623c84490840946c5ebe56317cee3ea0?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Gianluca Barreyro",
        "link" : "https://stackoverflow.com/users/31371661/gianluca-barreyro"
      },
      "creation_date" : 1756759924,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140701790,
      "post_id" : 79749553,
      "body" : "@XavierPedraza Answer edited to add those GAV coordinates. Thanks, Xavier!",
      "score" : 0,
      "owner" : {
        "account_id" : 401843,
        "reputation" : 107186,
        "user_id" : 768644,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
        "display_name" : "rzwitserloot",
        "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
      },
      "creation_date" : 1756477141,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140699794,
      "post_id" : 79749553,
      "body" : "The asker mentioned that they are using Maven, so when discussing <a href=\"https://mvnrepository.com/artifact/org.jetbrains/annotations\" rel=\"nofollow noreferrer\">JetBrains annotations</a> it would help to briefly mention the Maven dependency syntax necessary to get it on the compile classpath. The accurate analysis on why this contract is a bad idea does supersede this nitpick however.",
      "score" : 1,
      "owner" : {
        "account_id" : 14914414,
        "reputation" : 1185,
        "user_id" : 10808904,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/Ts8fIsJj.png?s=256",
        "display_name" : "Xavier Pedraza",
        "link" : "https://stackoverflow.com/users/10808904/xavier-pedraza"
      },
      "creation_date" : 1756412126,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}