{
  "question" : {
    "question_id" : 79748482,
    "title" : "How do I get rid of these artifacts on my JButton? And/or, what am I doing wrong here?",
    "body" : "<p>Here is a minimal, reproducible example. I am using Java 24 with the <code>--enable-preview</code> flag activated. I am on Windows 11.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import module java.desktop;\n\n\nvoid main() {\n    SwingUtilities.invokeLater( () -&gt; {\n        final JFrame frame = new JFrame();\n        frame.setTitle( &quot;This is a title&quot; );\n        frame.setSize( 500, 500 );\n        frame.setLocationRelativeTo( null );\n        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );\n        final JPanel mainPanel = new JPanel();\n        mainPanel.setLayout( new BorderLayout() );\n        final JPanel topPanel = new JPanel();\n        topPanel.setLayout( new BoxLayout( topPanel, BoxLayout.X_AXIS ) );\n\n        final var urlAsString = &quot;https://b.thumbs.redditmedia.com/2rTE46grzsr-Ll3Q.png&quot;;\n        try {\n\n            final var url = new URI( urlAsString ).toURL();\n            final BufferedImage image = ImageIO.read( url );\n            final var redditLogo = new JLabel( new ImageIcon( image ) );\n            topPanel.add( redditLogo );\n        }\n        catch( final Exception exception ) {\n            throw new RuntimeException( &quot;Failed to fetch image from &quot; + urlAsString, exception );\n        }\n        final JButton hotButton = new JButton();\n        hotButton.setText( &quot;hot&quot; );\n        topPanel.add( hotButton );\n\n        mainPanel.add( topPanel, BorderLayout.NORTH );\n        frame.add( mainPanel );\n        frame.setVisible( true );\n    }\n    );\n}\n</code></pre>\n<p>I am running this straight from the commandline, so nothing weird about my IDE. I also tried this with later versions of Java, such as Java 26.</p>\n<p>And here is the <code>JButton</code> with artifacts. Notice the extra junk at the bottom of the <code>JButton</code>.</p>\n<p><a href=\"https://i.sstatic.net/KnRYH84G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/KnRYH84G.png\" alt=\"JButton with weird artifacts at the bottom of it.\" /></a></p>\n<p>How do I get rid of the artifacts on the <code>JButton</code>?</p>\n<p>EDIT -- In case it isn't clear, this is the part of the image that I am taking issue with. Here is a zoomed in view.</p>\n<p><a href=\"https://i.sstatic.net/GDbMyKQE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/GDbMyKQE.png\" alt=\"enter image description here\" /></a></p>\n<p>See those black stuff under the button? That is my issue.</p>\n",
    "tags" : [ "java", "swing", "jbutton", "artifacts" ],
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "is_answered" : false,
    "view_count" : 185,
    "answer_count" : 0,
    "score" : 4,
    "last_activity_date" : 1756750040,
    "creation_date" : 1756329638,
    "link" : "https://stackoverflow.com/questions/79748482/how-do-i-get-rid-of-these-artifacts-on-my-jbutton-and-or-what-am-i-doing-wrong",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140710763,
    "post_id" : 79748482,
    "body" : "@maraca I was going to wait for the OpenJDK folks to fix this defect first. I don&#39;t much like the idea of calling this question answered if the answer is either workarounds or just acknowledging that it&#39;s a bug. Those who need to find out workarounds can look at these comments, but I&#39;d like to reserve the actual answers for actual solutions.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756873822,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140708418,
    "post_id" : 79748482,
    "body" : "@davidalayachew Interesting and makes sense, thanks for the info. You know that you can answer your question yourself? Might be helpful for others.",
    "score" : 1,
    "owner" : {
      "account_id" : 6136413,
      "reputation" : 9587,
      "user_id" : 4785110,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/71b70abe72497023835a6dd8961b7c89?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "maraca",
      "link" : "https://stackoverflow.com/users/4785110/maraca"
    },
    "creation_date" : 1756797327,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707547,
    "post_id" : 79748482,
    "body" : "@user85421 Do you have a HiDPI Display? The OpenJDK Maintainer I spoke to said that that is where this issue shows up for.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756750363,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707545,
    "post_id" : 79748482,
    "body" : "@maraca I spoke with the OpenJDK Maintainers for Java Swing, and long story short, this is due to left over data in the buffer being used incorrectly for HiDPI Displays like mine.",
    "score" : 1,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756750308,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707534,
    "post_id" : 79748482,
    "body" : "@user85421 Thanks for the tips on minifying the code. #1, #3, and #5 are definitely correct, but to the best of my knowledge, #2 and #4 are necessary to reproducing the issue. If you can see how to avoid that, let me know. I have edited the post to remove #1, #3, and #5.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756750000,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707512,
    "post_id" : 79748482,
    "body" : "@Stultuske I actually had one of the Java Swing maintainers confirm for me that this is a known issue. As it turns out, this is a surprisingly old and difficult bug to conquer, as it has been live since Java 9. They said that, as a temporary workaround, I should ensure that my <code>JButton</code> instances have dimensions whose values are a multiple of 4, or I should change my screen display scaling to 100% instead of 125%, as that messes up rendering on Hi DPI Displays like mine. Here is a link to their words -- <a href=\"https://mail.openjdk.org/pipermail/client-libs-dev/2025-August/031853.html\" rel=\"nofollow noreferrer\">mail.openjdk.org/pipermail/client-libs-dev/2025-August/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756748972,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707509,
    "post_id" : 79748482,
    "body" : "@camickr Reading the image twice was a leftover from a previous solution. Removed  it locally. Still didn&#39;t help for loading the image fully before using it.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756748766,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140707508,
    "post_id" : 79748482,
    "body" : "@camickr Using <code>JLabel</code> and/or switching to <code>FlowLayout</code> solved the problem for me, ty vm. Loading the image early didn&#39;t help. I even had it turned into an <code>ImageIcon</code> before calling <code>SwingUtilities.invokeLater()</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756748729,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140703713,
    "post_id" : 79748482,
    "body" : "The artifact would match the image if x would be 0 for the button, so it is like it was drawn there and then cut out and moved to the right, but taking too much at the bottom.",
    "score" : 1,
    "owner" : {
      "account_id" : 6136413,
      "reputation" : 9587,
      "user_id" : 4785110,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/71b70abe72497023835a6dd8961b7c89?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "maraca",
      "link" : "https://stackoverflow.com/users/4785110/maraca"
    },
    "creation_date" : 1756564205,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697771,
    "post_id" : 79748482,
    "body" : "minify - (could have started by removing <i>some</i> of the [exaggerated] indentation and empty lines - done by Marce), remove elements not needed to reproduce: 1) is <code>TOP_PANEL_COMPONENTS:</code> doing anything? 2) the second panel; 3) read the logo 2 times; 4) the logo itself at all; 5) <code>Hello world</code>; ... (see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> : &quot;<i>Minimal: Use as little code as possible that still produces the same problem</i>&quot;)",
    "score" : 2,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1756363722,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697667,
    "post_id" : 79748482,
    "body" : "to me, that looks like something you&#39;ve covered (but not entirely) with the button. doubt it is related to the button at all",
    "score" : 0,
    "owner" : {
      "account_id" : 3116234,
      "reputation" : 9469,
      "user_id" : 2636929,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/85fa83a02c04af43fcd224821ca9b750?s=256&d=identicon&r=PG",
      "display_name" : "Stultuske",
      "link" : "https://stackoverflow.com/users/2636929/stultuske"
    },
    "creation_date" : 1756359394,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697561,
    "post_id" : 79748482,
    "body" : "Also, why are you reading the image twice? Using ImageIO is the better way, since you will get an Exception if the image is not found.",
    "score" : 1,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1756353082,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697558,
    "post_id" : 79748482,
    "body" : "I don&#39;t use Java 24, so I can&#39;t test. Some suggestions to maybe narrow down the problem: 1) Did you try using a FlowLayout to see if BoxLayout is the problem as suggested? 2) Maybe try using a JLabel instead of the button. A label is transparent, so maybe you will see more text under the label which might give an idea what is causing the problem. 3) Did you try loading the image from your machine? Maybe the delay in loading the image is causing the problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324701,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1756352911,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697418,
    "post_id" : 79748482,
    "body" : "@AbdullahLeghari No, you misunderstood. I have edited my question to clarify the issue. Please read the edited question.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756344344,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697305,
    "post_id" : 79748482,
    "body" : "I was able to reproduce this at 100% display scaling on Windows 10 with OpenJDK 21. It seems to be a focus indicator rather than a rendering bug. If you changed the scaling while the program was running, it likely triggered a repaint event and shifted focus to the JPanel or JFrame, which may have made it look like the scaling change fixed the issue.",
    "score" : 0,
    "owner" : {
      "account_id" : 2392155,
      "reputation" : 2510,
      "user_id" : 2091803,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://i.sstatic.net/ZSHGW.png?s=256",
      "display_name" : "Abdullah Leghari",
      "link" : "https://stackoverflow.com/users/2091803/abdullah-leghari"
    },
    "creation_date" : 1756338482,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697251,
    "post_id" : 79748482,
    "body" : "I reported it to the mailing list here -- <a href=\"https://mail.openjdk.org/pipermail/client-libs-dev/2025-August/031778.html\" rel=\"nofollow noreferrer\">mail.openjdk.org/pipermail/client-libs-dev/2025-August/&hellip;</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756334772,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697245,
    "post_id" : 79748482,
    "body" : "@user85421 how would you suggest I minify my example? I am going to report it to the mailing list, to add to the list of users affected by the bug. To my understanding, I minified it as far as I could. Also, if you are using Java 24 and add the <code>--enable-preview</code> flag, the code above works with no changes necessary. Meaning, no need to add imports.",
    "score" : 1,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756334302,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697234,
    "post_id" : 79748482,
    "body" : "@user85421 Woah, scaling to 100% made it go away! That is so weird. It looks like the bug issue you linked to is related to mine.",
    "score" : 0,
    "owner" : {
      "account_id" : 14010051,
      "reputation" : 250,
      "user_id" : 10118965,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/61afd55894624ae8f6e4189b68db1f30?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "davidalayachew",
      "link" : "https://stackoverflow.com/users/10118965/davidalayachew"
    },
    "creation_date" : 1756333939,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697227,
    "post_id" : 79748482,
    "body" : "maybe related: <a href=\"https://stackoverflow.com/q/63634676/85421\">BoxLayout artifact at 125% display scaling</a> and bug <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8253530\" rel=\"nofollow noreferrer\">JDK-8253530</a>",
    "score" : 4,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1756333415,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140697215,
    "post_id" : 79748482,
    "body" : "unable to reproduce with Java 24, after adding missing imports: <a href=\"https://i.sstatic.net/LhUWAxBd.png\" rel=\"nofollow noreferrer\">i.sstatic.net/LhUWAxBd.png</a> - Windows 11, but display scale set to100% (not the usually recommended 125% that often causes similar problems) -- (posted example is neither minimal nor reproducible)",
    "score" : 1,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1756332947,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}