{
  "question" : {
    "question_id" : 79599571,
    "title" : "How do I prevent tycho-p2-repository-plugin from including all plugins from eclipse composite repo?",
    "body" : "<p>I'm trying to create p2 repository.</p>\n<p>In my pom.xml file there are many url's which includes my product features and eclipse composite(4.34) repo URL and other required jar's URL (customized p2 repo's).</p>\n<pre><code>              &lt;repository&gt;\n                &lt;url&gt;http://*/eclipse-4.34/e4.34-composite/&lt;/url&gt;\n              &lt;/repository&gt;\n              &lt;repository&gt;\n                &lt;url&gt;http://*/eclipse-4.34/orbit-r-4.34-202411201800/&lt;/url&gt;\n              &lt;/repository&gt;\n</code></pre>\n<p>Now the issue is my created p2 has increased in size. (earlier it was 1.5GB, and now it goes to 3.0GB). I noticed it is taking all the plugins from Eclipse composite &amp; orbit repo. <a href=\"https://download.eclipse.org/releases/2024-12/202412041000/plugins/\" rel=\"nofollow noreferrer\">https://download.eclipse.org/releases/2024-12/202412041000/plugins/</a></p>\n<p><strong>I want to reduce that size.</strong></p>\n<p>I have already defined the plugin not to include dependencies (even though the default was already false), but it won't work.</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.eclipse.tycho&lt;/groupId&gt;\n        &lt;artifactId&gt;tycho-p2-repository-plugin&lt;/artifactId&gt;\n        &lt;version&gt;4.0.10&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;xzCompress&gt;false&lt;/xzCompress&gt;\n            &lt;includeAllDependencies&gt;false&lt;/includeAllDependencies&gt;\n        &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Java version:17\nEclipse version:4.34(2024-12)\ntycho:4.0.10\nmaven:3.9.9</p>\n",
    "tags" : [ "java", "eclipse", "maven", "tycho", "p2" ],
    "owner" : {
      "account_id" : 31296310,
      "reputation" : 11,
      "user_id" : 24107954,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
      "display_name" : "rkamthe",
      "link" : "https://stackoverflow.com/users/24107954/rkamthe"
    },
    "is_answered" : false,
    "view_count" : 66,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1746019901,
    "creation_date" : 1745989472,
    "link" : "https://stackoverflow.com/questions/79599571/how-do-i-prevent-tycho-p2-repository-plugin-from-including-all-plugins-from-ecli",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79600412,
    "question_id" : 79599571,
    "body" : "<p>You can <a href=\"https://tycho.eclipseprojects.io/doc/latest/target-platform-configuration/target-platform-configuration-mojo.html#filters\" rel=\"nofollow noreferrer\">filter out</a> some unnecessary installable units.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>                 &lt;plugin&gt;\n                                &lt;groupId&gt;${tycho-groupid}&lt;/groupId&gt;\n                                &lt;artifactId&gt;target-platform-configuration&lt;/artifactId&gt;\n                                &lt;configuration&gt;\n                                        &lt;filters&gt;\n                                                &lt;filter&gt;\n                                                        &lt;type&gt;eclipse-plugin&lt;/type&gt;\n                                                        &lt;id&gt;org.eclipse.ui.intro&lt;/id&gt;\n                                                        &lt;removeAll /&gt;\n                                                &lt;/filter&gt;\n                                                &lt;filter&gt;\n                                                        &lt;type&gt;eclipse-plugin&lt;/type&gt;\n                                                        &lt;id&gt;org.eclipse.ui&lt;/id&gt;\n                                                        &lt;removeAll /&gt;\n                                                &lt;/filter&gt;\n                                                &lt;filter&gt;\n                                                        &lt;type&gt;eclipse-plugin&lt;/type&gt;\n                                                        &lt;id&gt;org.eclipse.ui.ide&lt;/id&gt;\n                                                        &lt;removeAll /&gt;\n                                                &lt;/filter&gt;\n                                        &lt;/filters&gt;\n                                &lt;/configuration&gt;\n                        &lt;/plugin&gt;\n</code></pre>\n<p>This solution is not a good fit for your case, but is technically applicable.\nIt helped me in a couple of similar situations - reducing a mirror and a product sizes.</p>\n<p>Of course, you should probably try Howgler's advice, as it is far more convenient when works.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 43022,
      "reputation" : 24626,
      "user_id" : 125562,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
      "display_name" : "Basilevs",
      "link" : "https://stackoverflow.com/users/125562/basilevs"
    },
    "creation_date" : 1746019513,
    "last_activity_date" : 1746019901,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140384197,
    "post_id" : 79599571,
    "body" : "When following howgler&#39;s recommendation,  beware Maven mirroring settings. They break repository references inside target definition.",
    "score" : 0,
    "owner" : {
      "account_id" : 43022,
      "reputation" : 24626,
      "user_id" : 125562,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
      "display_name" : "Basilevs",
      "link" : "https://stackoverflow.com/users/125562/basilevs"
    },
    "creation_date" : 1746018737,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140383338,
    "post_id" : 79599571,
    "body" : "Instead of <a href=\"https://wiki.eclipse.org/Tycho/Target_Platform/#Target_platform_configuration\" rel=\"nofollow noreferrer\">a simple target platform configuration you should have a target definition file</a>. e.g. something like <a href=\"https://github.com/howlger/IDEalized/blob/master/target-platform/idealized-target.target\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://github.com/vogellacompany/tycho-example/blob/master/releng/target-platform/target-platform.target\" rel=\"nofollow noreferrer\">this</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35015,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1746003767,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79600412" : [ {
      "comment_id" : 140395807,
      "post_id" : 79600412,
      "body" : "I found the root cause why this is happening. See below link:   <a href=\"https://stackoverflow.com/questions/79603907/slf4j-2-x-with-logback-is-not-working-in-osgi-eclipse-based-application\" title=\"slf4j 2 x with logback is not working in osgi eclipse based application\">stackoverflow.com/questions/79603907/&hellip;</a>   <code>requires.1.namespace=org.eclipse.equinox.p2.iu  requires.1.name=ch.qos.logback.classic.iufragment  requires.1.range=[$version$,$version$]  requires.1.greedy=true</code>  Because of this greedy=true it is downloading all transitive dependencies, which causes a build size issue. But if I remove this, my logging is not working. So I want this code to be added, and don&#39;t want a build size issue.",
      "score" : 0,
      "owner" : {
        "account_id" : 31296310,
        "reputation" : 11,
        "user_id" : 24107954,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/kf3s1zb8.png?s=256",
        "display_name" : "rkamthe",
        "link" : "https://stackoverflow.com/users/24107954/rkamthe"
      },
      "creation_date" : 1746420004,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}