{
  "question" : {
    "question_id" : 79831723,
    "title" : "&quot;command is either misspelled or could not be found&quot; with Win 11 but not Win 10",
    "body" : "<p>A year ago I created an Eclipse project (Eclipse 2020-06, Java 8, Win 10) that uses the GIS LAStools libary to e.g. extract data from a couple of files.</p>\n<p>I'm now using Win 11 on a different PC and want to work on the project again, so I copied the old project, installed the same Java version, the same Eclipse version (with the same settings, as far as I've seen) and the same library version.</p>\n<p>My code:</p>\n<pre><code>Process p = null;\nArrayList&lt;String&gt; lines = new ArrayList&lt;String&gt;();\nString lasbinpath = &quot;somepath\\\\LAStools\\\\bin&quot;;\nString command = &quot;lasindex64 -i someotherpath\\\\myfile.laz&quot;;\n\ntry {\n    ProcessBuilder builder = new ProcessBuilder(&quot;cmd.exe&quot;, &quot;/c&quot;, command);\n    Map&lt;String, String&gt; env = builder.environment();\n    env.put(&quot;path&quot;, lasbinpath);\n    builder.redirectErrorStream(true);\n    p = builder.start();\n    BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\n    String line;\n\n    while(true) {\n        line = br.readLine();\n        if (line==null) { break; }\n        lines.add(line);\n    }\n    br.close();\n} catch(IOException e) {\n    e.printStackTrace();\n} finally {\n    if(p!=null) { p.destroy(); }\n}\n</code></pre>\n<p>When I try to run it, there's always the same error:</p>\n<pre><code>The &quot;DOSKEY&quot; command is either misspelled or could not be found.\n</code></pre>\n<p>At first I thought that it might be the library's fault and started a <a href=\"https://gis.stackexchange.com/q/498138/148791\">question</a> in the GIS stackexchange.</p>\n<p>Yesterday I started up the old Win 10 PC again and the same code is still working fine there, even with the latest version of the library.</p>\n<p>On Win 11 the same error appears when I run the code in Eclipse 2025-09 with OpenJDK 24 (even when run as admin) but there's no error when I run the library's command directly in command prompt. The &quot;doskey.exe&quot; file does exist in the &quot;System32&quot; folder and while the &quot;Windows&quot; and &quot;System32&quot; folders are protected, of course, I can manually access them without any problems. Other (native) commands like <code>java -version</code> and <code>dir</code> work fine with my code.</p>\n<p>If I remove <code>env.put(&quot;path&quot;, lasbinpath)</code> and manually add the path to <code>PATH</code> instead, there's no more error and the code is working as expected.</p>\n<p>I know that Win 11 can be weird about permissions and I've had problems with those before (app that was working fine on Win 10 can't access files in Win 11, unless run as admin), so I think that this is the case here too.</p>\n<p>There are a couple of google search results about things not working as expected on Win 11, compared to Win 10 (not just with Java) but nothing about the <code>ProcessBuilder</code>. Is there a specific way I have to set up Eclipse and/or <code>ProcessBuilder</code> to give them access and work with a temporary <code>PATH</code>?</p>\n",
    "tags" : [ "java", "eclipse", "cmd", "classpath", "processbuilder" ],
    "owner" : {
      "account_id" : 2294271,
      "reputation" : 2013,
      "user_id" : 2016165,
      "user_type" : "registered",
      "accept_rate" : 45,
      "profile_image" : "https://www.gravatar.com/avatar/903c50cd9f03c52d8743d518020ae072?s=256&d=identicon&r=PG",
      "display_name" : "Neph",
      "link" : "https://stackoverflow.com/users/2016165/neph"
    },
    "is_answered" : false,
    "view_count" : 98,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1764602053,
    "creation_date" : 1764247727,
    "link" : "https://stackoverflow.com/questions/79831723/command-is-either-misspelled-or-could-not-be-found-with-win-11-but-not-win-10",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79831965,
    "question_id" : 79831723,
    "body" : "<p>As Panagiotis has said, you don't need either <code>cmd.exe</code> or to mess around with <code>PATH</code>. Assuming you're returning textual data, you just need something like:</p>\n<pre><code>   public static List&lt;String&gt; extractLAS() throws IOException {\n        List&lt;String&gt; command = List.of(\n                &quot;somepath\\\\LAStools\\\\bin\\\\lasindex64&quot;,\n                &quot;-i&quot;,\n                &quot;someotherpath\\\\myfile.laz&quot;);\n        ProcessBuilder pb = new ProcessBuilder(command);\n        try (Scanner s = new Scanner(pb.start().getInputStream()).useDelimiter(&quot;\\\\R&quot;)) {\n            return s.tokens().toList();\n        }\n    }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1764264184,
    "last_activity_date" : 1764264184,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79834995,
    "question_id" : 79831723,
    "body" : "<p>As it was mentioned both in the comments/chat below my question and in the other answer, there is a more direct way to access the library (call e.g. &quot;lasindex64.exe&quot; directly by its full path instead of using &quot;cmd.exe&quot;). When commands are used that way, they have to be passed to <code>ProcessBuilder</code> as a <code>List&lt;String&gt;</code>, not as a single <code>String</code> (there might be an error about an unrecognized command otherwise): Add a new element whenever there is a space character in the original command (unless it's a <code>String</code> surrounded by quotation marks).</p>\n<p>The answer to my question</p>\n<blockquote>\n<p>Is there a specific way I have to set up Eclipse and/or <code>ProcessBuilder</code> to give them access and work with a temporary <code>PATH</code>?</p>\n</blockquote>\n<p>is: Yes.</p>\n<p>The reason why my Win 11 Eclipse project/LAStools couldn't find the &quot;doskey.exe&quot; file is that <code>env.put</code> is case-sensitive. <code>env.put(&quot;path&quot;, lasbinpath);</code> uses a new/empty &quot;path&quot; that doesn't contain the path to e.g. the &quot;system32&quot; folder, which also causes the &quot;could not be found&quot; error. The exact spelling that has to be used to access the &quot;proper&quot; <code>PATH</code> environment variable is &quot;Path&quot; (capital &quot;P&quot;, rest is lowercase). <code>env.put</code> also overwrites the value for the given key, so the new folder path has to be appended like this:</p>\n<pre><code>String path = env.get(&quot;Path&quot;);\nenv.put(&quot;Path&quot;, path+(path.endsWith(&quot;;&quot;)?&quot;&quot;:&quot;;&quot;)+lasbinpath); //There might already be a semicolon at the end\n</code></pre>\n<p>The <code>PATH</code> used here is a copy of the actual environment variable, everything done here should (!) not be reflected there.</p>\n<p>I still don't know why this wasn't a problem in Win 10 but is now in Win 11. At least my code is now working as expected.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2294271,
      "reputation" : 2013,
      "user_id" : 2016165,
      "user_type" : "registered",
      "accept_rate" : 45,
      "profile_image" : "https://www.gravatar.com/avatar/903c50cd9f03c52d8743d518020ae072?s=256&d=identicon&r=PG",
      "display_name" : "Neph",
      "link" : "https://stackoverflow.com/users/2016165/neph"
    },
    "creation_date" : 1764602053,
    "last_activity_date" : 1764602053,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140881525,
    "post_id" : 79831723,
    "body" : "<b>Comments have been <a href=\"https://chat.stackoverflow.com/rooms/259859/discussion-on-question-by-neph-command-is-either-misspelled-or-could-not-be-fou\">moved to chat</a>; please do not continue the discussion here.</b> Before posting a comment below this one, please review the <a href=\"/help/privileges/comment\">purposes of comments</a>. Comments that do not request clarification or suggest improvements usually belong as an <a href=\"/help/how-to-answer\">answer</a>, on <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a>, or in <a href=\"https://chat.stackoverflow.com/\">Stack Overflow Chat</a>. Comments continuing discussion may be removed.",
    "score" : 0,
    "owner" : {
      "account_id" : 2312068,
      "reputation" : 97680,
      "user_id" : 2029983,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/0118fb43d1ce086d768e295339cf0ff4?s=256&d=identicon&r=PG",
      "display_name" : "Thom A",
      "link" : "https://stackoverflow.com/users/2029983/thom-a"
    },
    "creation_date" : 1764599818,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79834995" : [ {
      "comment_id" : 140883169,
      "post_id" : 79834995,
      "body" : "Well you can easily check if it works by just invoking the exact same command as in my code at the command prompt (without setting <code>PATH</code>). Always advisable to check that way first anyway.",
      "score" : 0,
      "owner" : {
        "account_id" : 22124137,
        "reputation" : 4244,
        "user_id" : 16376827,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name" : "g00se",
        "link" : "https://stackoverflow.com/users/16376827/g00se"
      },
      "creation_date" : 1764677065,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140882992,
      "post_id" : 79834995,
      "body" : "@g00se I think I know what you&#39;re hinting at: It might not be necessary to add the library&#39;s folder to <code>PATH</code> if you&#39;re calling its functions/.exe files directly, as shown by Panagiotis and you. I don&#39;t know if it can still access other functions automatically that way (haven&#39;t tested all of them yet and I don&#39;t know if it even does that). When run through <code>cmd.exe</code> with just the e.g. <code>lasindex64</code> command, as shown in the question, <code>PATH</code> has to be set of course.",
      "score" : 0,
      "owner" : {
        "account_id" : 2294271,
        "reputation" : 2013,
        "user_id" : 2016165,
        "user_type" : "registered",
        "accept_rate" : 45,
        "profile_image" : "https://www.gravatar.com/avatar/903c50cd9f03c52d8743d518020ae072?s=256&d=identicon&r=PG",
        "display_name" : "Neph",
        "link" : "https://stackoverflow.com/users/2016165/neph"
      },
      "creation_date" : 1764671142,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140882936,
      "post_id" : 79834995,
      "body" : "@g00se <code>Yes</code> - I have to set up &quot;ProcessBuilder&quot; to use &quot;Path&quot; instead of &quot;path&quot;, that&#39;s the necessary change/specific way. <code>You don&#39;t have to alter PATH to invoke the app do you?</code> - I do. The library doesn&#39;t work properly if its &quot;bin&quot; folder isn&#39;t set in <code>PATH</code>, I tested it without when I created the project (there&#39;s an error). It doesn&#39;t matter if it&#39;s set temporarily (like in my code, which I prefer) or permanently (by adding it to the environment variable by hand).",
      "score" : 0,
      "owner" : {
        "account_id" : 2294271,
        "reputation" : 2013,
        "user_id" : 2016165,
        "user_type" : "registered",
        "accept_rate" : 45,
        "profile_image" : "https://www.gravatar.com/avatar/903c50cd9f03c52d8743d518020ae072?s=256&d=identicon&r=PG",
        "display_name" : "Neph",
        "link" : "https://stackoverflow.com/users/2016165/neph"
      },
      "creation_date" : 1764669108,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140881771,
      "post_id" : 79834995,
      "body" : "<i>is: Yes</i>  Why is that? You don&#39;t have to alter <code>PATH</code> to invoke the app do you?",
      "score" : 0,
      "owner" : {
        "account_id" : 22124137,
        "reputation" : 4244,
        "user_id" : 16376827,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name" : "g00se",
        "link" : "https://stackoverflow.com/users/16376827/g00se"
      },
      "creation_date" : 1764606711,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79831965" : [ {
      "comment_id" : 140881536,
      "post_id" : 79831965,
      "body" : "<code>List.of</code> is only available in Java 9+, use <code>Arrays.asList</code> in Java 8.",
      "score" : 0,
      "owner" : {
        "account_id" : 2294271,
        "reputation" : 2013,
        "user_id" : 2016165,
        "user_type" : "registered",
        "accept_rate" : 45,
        "profile_image" : "https://www.gravatar.com/avatar/903c50cd9f03c52d8743d518020ae072?s=256&d=identicon&r=PG",
        "display_name" : "Neph",
        "link" : "https://stackoverflow.com/users/2016165/neph"
      },
      "creation_date" : 1764600410,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}