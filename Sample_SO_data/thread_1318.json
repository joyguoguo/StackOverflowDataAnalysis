{
  "question" : {
    "question_id" : 79719172,
    "title" : "Fix IllegalArgumentException for params in JPA",
    "body" : "<p>In JPA, I am trying to search the table with two optional fields say one and two which can be null at times. I have the controller and the repo like below.</p>\n<pre><code>class Some{\n    private SomeRepo someRepo;\n\n    public Stops(SomeRepo someRepo) {\n        this.someRepo = someRepo;\n    }\n\n\n    @GetMapping(&quot;/some&quot;)\n    public ResponseEntity&lt;Iterable&lt;SomeModel&gt;&gt; fetchData(\n            @RequestParam(value=&quot;code&quot;, required=false) Integer one, \n            @RequestParam(value=&quot;name&quot;, required=false) String two\n            ) {\n\n        Iterable&lt;SomeModel&gt; some;\n\n        some = this.someRepo.findByOneLikeAndTwoLikeIgnoreCaseOrderByOneAsc(one, two);\n        return ResponseEntity.ok(some);\n\n\n}\n</code></pre>\n<pre><code>public interface SomeRepo extends CrudRepository&lt;SomeModel, Long&gt; {\n\n    Iterable&lt;SomeModel&gt; findByOneLikeAndTwoLikeIgnoreCaseOrderByOneAsc(@Nullable Integer one, @Nullable String two);\n}\n</code></pre>\n<p>When I make a GET call with only one param like below, I am getting the below error, which should not be the case as I am using @Nullable for the method in the SomeRepo.</p>\n<pre><code>curl -X GET $HOST:$PORT/some?name=West\n\n2025-07-29T12:34:54.396-07:00 ERROR 1802042 --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : \nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception \n[Request processing failed: java.lang.IllegalArgumentException: \nValue of parameter with name one must not be null] with root cause at org.springframework.data.relational.repository.query.ParameterMetadataProvider.checkNullIsAllowed(ParameterMetadataProvider.java:123) ~[spring-data-relational-3.1.0.jar:3.1.0]\n        at org.springframework.data.relational.repository.query.ParameterMetadataProvider.next(ParameterMetadataProvider.java:88) ~[spring-data-relational-3.1.0.jar:3.1.0]\n        at org.springframework.data.relational.repository.query.CriteriaFactory.createCriteria(CriteriaFactory.java:109) ~[spring-data-relational-3.1.0.jar:3.1.0]\n \n\n</code></pre>\n",
    "tags" : [ "java", "spring", "jpa" ],
    "owner" : {
      "account_id" : 2233496,
      "reputation" : 128,
      "user_id" : 1970526,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ce5807d1df9b0bb6eb0a3d41ce2a01f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "oceano1970526",
      "link" : "https://stackoverflow.com/users/1970526/oceano1970526"
    },
    "is_answered" : false,
    "view_count" : 104,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1753913568,
    "creation_date" : 1753820004,
    "link" : "https://stackoverflow.com/questions/79719172/fix-illegalargumentexception-for-params-in-jpa",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79720592,
    "question_id" : 79719172,
    "body" : "<p>Like @M. Deinum and @Francesco Poli mentioned in the comment.</p>\n<p>A field in a like query cannot be null. one is null here that is not possible with a like hence the error when binding the parameters with the automatically generated query.</p>\n<p>To remove the <code>IllegalArgumentException</code>, the <code>like</code> can be removed and made like</p>\n<pre><code>Iterable&lt;SomeModel&gt; findByOneAndTwoIgnoreCaseOrderByOneAsc(@Nullable Integer one, @Nullable String two);\n</code></pre>\n<p>but this leads to unable to search on not the exact property values like part of a string. To handle this, @Francesco Poli answer of using <a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/query-by-example.html\" rel=\"nofollow noreferrer\">Query by Example</a> helps using the <code>Example</code> and the <code>ExampleMatcher</code> .</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2233496,
      "reputation" : 128,
      "user_id" : 1970526,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ce5807d1df9b0bb6eb0a3d41ce2a01f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "oceano1970526",
      "link" : "https://stackoverflow.com/users/1970526/oceano1970526"
    },
    "creation_date" : 1753913568,
    "last_activity_date" : 1753913568,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140631489,
    "post_id" : 79719172,
    "body" : "@FrancescoPoli I am not having any issues with many String fields, say if I like to search for an int field along with a String field with the int being null at times as I am getting <code>NullPointerException</code> .",
    "score" : 0,
    "owner" : {
      "account_id" : 2233496,
      "reputation" : 128,
      "user_id" : 1970526,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5ce5807d1df9b0bb6eb0a3d41ce2a01f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "oceano1970526",
      "link" : "https://stackoverflow.com/users/1970526/oceano1970526"
    },
    "creation_date" : 1753924770,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140629959,
    "post_id" : 79719172,
    "body" : "I suggest to implement the find method using a &quot;query by Example&quot; approach, declaring a specific <code>ExampleMatcher</code> (ref. <a href=\"https://docs.spring.io/spring-data/jpa/reference/repositories/query-by-example.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/jpa/reference/repositories/&hellip;</a>).",
    "score" : 2,
    "owner" : {
      "account_id" : 4031141,
      "reputation" : 1304,
      "user_id" : 3317192,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1Ybr6a3L.jpg?s=256",
      "display_name" : "Francesco Poli",
      "link" : "https://stackoverflow.com/users/3317192/francesco-poli"
    },
    "creation_date" : 1753881965,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140629143,
    "post_id" : 79719172,
    "body" : "You have to write HQL that checks for nulls.",
    "score" : 0,
    "owner" : {
      "account_id" : 4497436,
      "reputation" : 20786,
      "user_id" : 3656904,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "talex",
      "link" : "https://stackoverflow.com/users/3656904/talex"
    },
    "creation_date" : 1753863949,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140628777,
    "post_id" : 79719172,
    "body" : "A field in a <code>like</code> query cannot be <code>null</code>. <code>one</code> is <code>null</code> here that is not possible with a <code>like</code> hence the error when binding the parameters with the automatically generated query.",
    "score" : 4,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1753855193,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140628220,
    "post_id" : 79719172,
    "body" : "Nevermind, the cURL log sent above does not show <code>null</code> being passed as a value. I do still think <code>@Nullable</code> <i>in the <code>Some</code> class</i> is worth a try.",
    "score" : 1,
    "owner" : {
      "account_id" : 14914414,
      "reputation" : 1185,
      "user_id" : 10808904,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ts8fIsJj.png?s=256",
      "display_name" : "Xavier Pedraza",
      "link" : "https://stackoverflow.com/users/10808904/xavier-pedraza"
    },
    "creation_date" : 1753825199,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140628212,
    "post_id" : 79719172,
    "body" : "As indicated by the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html#required()\" rel=\"nofollow noreferrer\">docs</a>, the <code>required</code> field determines whether the request may omit the parameter and NOT whether the request may explicitly assign the parameter to null. Perhaps your clients should omit keys instead of sending null values, or perhaps <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/lang/Nullable.html\" rel=\"nofollow noreferrer\">@Nullable</a> <b>on the parameter</b> can solve this problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 14914414,
      "reputation" : 1185,
      "user_id" : 10808904,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ts8fIsJj.png?s=256",
      "display_name" : "Xavier Pedraza",
      "link" : "https://stackoverflow.com/users/10808904/xavier-pedraza"
    },
    "creation_date" : 1753825035,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}