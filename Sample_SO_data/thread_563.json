{
  "question" : {
    "question_id" : 79788277,
    "title" : "Java and Java Swing - Can someone explain these Thread.sleep() interactions?",
    "body" : "<p>I'm working on my first personal project - <a href=\"https://github.com/Arggonaut/java-blackjack\" rel=\"nofollow noreferrer\">making a simple game of blackjack</a> with Java and Java Swing (just what my class is going over) and I want to make it so that when a card is drawn in succession by the program (as compared to when the player presses the hit button), there is a slight pause in between each card being drawn.</p>\n<p>Here is my method that uses <code>Thread.sleep()</code>:</p>\n<pre><code>public static void pause(int time) {\n    //makes java pause for a certain amount of time in ms\n    try {\n        Thread.sleep(time);\n    }\n    catch (InterruptedException e) {\n        \n    }\n\n}   \n</code></pre>\n<p>I'm not sure if I'm just using it wrong, but whenever I have it like this:</p>\n<pre><code>public void drawFirstCards(){\n    //draw the initial two cards for the player and the dealer\n    hit(dealer);\n    pause(DRAW_DELAY);\n    hit(dealer);\n    pause(DRAW_DELAY);\n    hit(user);\n    pause(DRAW_DELAY);\n    hit(user);\n}\n</code></pre>\n<p>It works how I want it. I wanted to make it less 'copy and pasty' so I tried putting it in the hit method like this:</p>\n<pre><code>public void hit(Player player){\n    //draw a card and add its value to the score. If the score is over 21, the player state is bust. If the score is 21, the player state is blackjack.\n    Card drawnCard = deck.drawCard();\n    player.addCard(drawnCard);\n    player.addScore(drawnCard.getValue());\n    user.revalidate();\n    user.repaint();\n    pause(DRAW_DELAY);\n}\n</code></pre>\n<p>But now, the program but now, whenever I use the hit button, the icon of the card comes out after the pause rather than before which I don't like since it makes it feel laggy.</p>\n<p>Also, theres a bit of code later where I have a while loop that also uses my pause method:</p>\n<pre><code>public void dealersTurn() { //After the user stands or gets a blackjack, the dealer starts drawing cards\n   //draw cards until either the dealer busts or the dealer gets a score that is greater than or equal to the user\n   while (dealer.getScore() &lt; BLACKJACK &amp;&amp; dealer.getScore() &lt; user.getScore()) {\n       hit(dealer);\n       pause(DRAW_DELAY);\n   }\n</code></pre>\n<p>}</p>\n<p>I thought that the program would draw a card, wait, and then draw another card but instead it does all of the card draws and you have to wait the combined wait time before the icons come up in the gui.</p>\n<p>Can someone help me understand Threads.sleep() better so that I can get it to work how I want? Or, is there a better way to get the little pauses?</p>\n",
    "tags" : [ "java", "swing", "sleep" ],
    "owner" : {
      "account_id" : 34750429,
      "reputation" : 27,
      "user_id" : 26751823,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c73447eb924d52e1352f9f655f1bda2e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andy Zheng",
      "link" : "https://stackoverflow.com/users/26751823/andy-zheng"
    },
    "is_answered" : true,
    "view_count" : 238,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1760541974,
    "creation_date" : 1760222578,
    "link" : "https://stackoverflow.com/questions/79788277/java-and-java-swing-can-someone-explain-these-thread-sleep-interactions",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79788291,
    "question_id" : 79788277,
    "body" : "<p>Instead of <code>Thread.sleep(time)</code> you could try using a <code>javax.swing.Timer</code> and add a</p>\n<pre><code> timer.addActionListener(e -&gt; {\n    if (dealer.getScore() &lt; BLACKJACK &amp;&amp; dealer.getScore() &lt; user.getScore()) {\n        hit(dealer);\n    } else {\n        ((Timer) e.getSource()).stop();\n    }\n});\n</code></pre>\n<p>That would call the code in the ActionListerer every DRAW_DELAY ms. If this fixes it it migth be that <code>Thread.sleep(time)</code> stops the GUI thread and not the card dealing code. Start the timer when the user's turn is finished and the program's turn begins.</p>\n<p>A <code>java.util.Timer</code>will fire the event on some background thread. A <code>javax.swing.Timer</code>will fire the event on the EDT. It is the latter that you want in this case.</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 35730351,
      "reputation" : 52,
      "user_id" : 27370186,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/673d2788975b5b4b432f3ac73bb0400a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Abbadon",
      "link" : "https://stackoverflow.com/users/27370186/abbadon"
    },
    "creation_date" : 1760224720,
    "last_activity_date" : 1760253503,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140794366,
    "post_id" : 79788277,
    "body" : "This question was previously closed as duplicate of <a href=\"https://stackoverflow.com/questions/4215968/java-thread-sleep-puts-swing-ui-to-sleep-too\">java thread.sleep puts swing ui to sleep too</a>. Reopened for the reason stated by @MarcePuente.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1760430113,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140791514,
    "post_id" : 79788277,
    "body" : "I would like to reopen the question, because although the linked answers show a way to solve it, given that the application needs to introduce a delay in execution three times, the proposed method generates “ugly,” repetitive code.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 918,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1760286800,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140790877,
    "post_id" : 79788277,
    "body" : "Never swallow exception. An empty catch block is a dirty no-no. It hides from you exceptions happening when you run your code. It‘s like coding blind-folded. See <a href=\"https://www.javaspecialists.eu/archive/Issue146-The-Secrets-of-Concurrency-Part-1.html\" rel=\"nofollow noreferrer\">The Law of the Sabotaged Doorbell</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1760249578,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140790715,
    "post_id" : 79788277,
    "body" : "@rzwitserloot since Andy asked <i>&quot;Can someone help me understand Threads.sleep() better so that I can get it to work how I want? Or, is there a better way to get the little pauses?&quot;</i>, that doesn&#39;t feel like the wrong question at all.  They obviously need to improve their understanding of the EDT, why <code>Thread.sleep</code> isn&#39;t the right thing to use, and exactly how to slow down interface elements.   And that&#39;s pretty much what they asked for.",
    "score" : 3,
    "owner" : {
      "account_id" : 1085259,
      "reputation" : 80173,
      "user_id" : 1081110,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Fp4Pm.jpg?s=256",
      "display_name" : "Dawood ibn Kareem",
      "link" : "https://stackoverflow.com/users/1081110/dawood-ibn-kareem"
    },
    "creation_date" : 1760230033,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140790686,
    "post_id" : 79788277,
    "body" : "You&#39;re asking the wrong question. There is nothing to explain about <code>sleep</code>: It just does exactly what it says on the tin: It sleeps the current thread for the stated amount of milliseconds (roughly). What&#39;s confusing you is the nature of the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">EDT</a>. You cannot pause in the EDT (if you do, the app feels laggy and the OS will start informing the user it is hanging), but pausing outside the EDT doesn&#39;t do what you want. In other words, you can&#39;t use it <i>at all</i> to slow down interface elements.",
    "score" : 3,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107136,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1760226588,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140790657,
    "post_id" : 79788277,
    "body" : "Also check other questions like <a href=\"https://stackoverflow.com/questions/14074329/using-sleep-for-a-single-thread\" title=\"using sleep for a single thread\">stackoverflow.com/questions/14074329/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/32246105/swing-multithreading-my-gui-is-freezing\" title=\"swing multithreading my gui is freezing\">stackoverflow.com/questions/32246105/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 108033,
      "reputation" : 20099,
      "user_id" : 286934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=256&d=identicon&r=PG",
      "display_name" : "Progman",
      "link" : "https://stackoverflow.com/users/286934/progman"
    },
    "creation_date" : 1760224179,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}