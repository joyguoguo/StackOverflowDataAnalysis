{
  "question" : {
    "question_id" : 79562859,
    "title" : "No error on the grpc client when ignoring the response stream from the server",
    "body" : "<p>I call the grpc server with a blocking stub that returns a stream.</p>\n<pre><code>blockingStub.send(request);\n</code></pre>\n<p>The generated stub code in <code>blockingStub</code> looks like this</p>\n<pre><code>java.util.Iterator&lt;Response&gt; send(Request request);\n</code></pre>\n<p>But I don't need to handle the response and the stream can be big. So I ignore the iterator.</p>\n<p>I found that if the called server is not available then no error occurs. But I expect an error like <code>io.grpc.StatusRuntimeException: UNAVAILABLE</code>.\nIf I call iterator method <code>next()</code> or <code>hasNext()</code> then error appears.</p>\n<p>Is there a way to ignore the response stream and get an error if the server is not available?</p>\n",
    "tags" : [ "java", "grpc", "grpc-java" ],
    "owner" : {
      "account_id" : 22010208,
      "reputation" : 35,
      "user_id" : 16280606,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b4eafeb74bd1a30cd7b84e8eeae0d421?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "xtrx",
      "link" : "https://stackoverflow.com/users/16280606/xtrx"
    },
    "is_answered" : false,
    "view_count" : 152,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744151776,
    "creation_date" : 1744138727,
    "link" : "https://stackoverflow.com/questions/79562859/no-error-on-the-grpc-client-when-ignoring-the-response-stream-from-the-server",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79563160,
    "question_id" : 79562859,
    "body" : "<p>Use an async stub instead of a blocking stub. With the async API you can pass a StreamObserver which handles errors but ignores responses.</p>\n<pre><code>asyncStub.send(request, new StreamObserver&lt;&gt;() {\n    @Override\n    public void onNext(Response response) {\n        // ignore response\n    }\n    @Override\n    public void onError(Throwable throwable) {\n        // handle error\n    }\n    @Override\n    public void onCompleted() {\n        // rpc completed without error\n    }\n});\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14000948,
      "reputation" : 405,
      "user_id" : 10112588,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/shskA.jpg?s=256",
      "display_name" : "Donut",
      "link" : "https://stackoverflow.com/users/10112588/donut"
    },
    "creation_date" : 1744151776,
    "last_activity_date" : 1744151776,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79563160" : [ {
      "comment_id" : 140316158,
      "post_id" : 79563160,
      "body" : "yes grpc will read the whole response stream",
      "score" : 0,
      "owner" : {
        "account_id" : 14000948,
        "reputation" : 405,
        "user_id" : 10112588,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/shskA.jpg?s=256",
        "display_name" : "Donut",
        "link" : "https://stackoverflow.com/users/10112588/donut"
      },
      "creation_date" : 1744204160,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140314823,
      "post_id" : 79563160,
      "body" : "thanks for the answer. do i understand correctly that in this case the whole stream will still be read?",
      "score" : 0,
      "owner" : {
        "account_id" : 22010208,
        "reputation" : 35,
        "user_id" : 16280606,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b4eafeb74bd1a30cd7b84e8eeae0d421?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "xtrx",
        "link" : "https://stackoverflow.com/users/16280606/xtrx"
      },
      "creation_date" : 1744183123,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}