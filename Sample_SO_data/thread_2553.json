{
  "question" : {
    "question_id" : 79612732,
    "title" : "trade-off of update method design of the domain entity",
    "body" : "<p>I would like to ask you a question about dividing the method into small units.\nIt hasn't been long since I learned about DDD(Domain Driven Design).</p>\n<p>In both ways, branch logic is likely to increase somewhere if the value of the field is changed or added.</p>\n<p>I'm thinking, &quot;What's a design that can better adapt to change?&quot;</p>\n<p>I'm ashamed that the attached code seems too low, but from the designer's point of view, I'd like to know how to decide on a good design.</p>\n<p>I want to ask you about the design method that will be flexible, but I don't think that can be a clear question.</p>\n<p>Please let me know which of the two methods below can be a better design.</p>\n<h3>Method1</h3>\n<p>I implemented a separate method for updating field values in domain entities for each field.</p>\n<p>For example, <code>updateName()</code> and <code>updatePassword()</code> have been implemented to update updatedAt for each method.</p>\n<p>If a field is added, add a method.</p>\n<p>The more fields are added to an entity, the more code call <code>touch()</code>..!</p>\n<p>Within an entity object, a method of a clear role can be identified and will be used in conjunction with branch logic when used elsewhere.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class User {\n  private final UUID id;\n  private final Instant createdAt;\n  private Instant updatedAt;\n\n  private String name;\n  private String password;\n\n\n  public void touch() {\n    this.updatedAt = Instant.now();\n  }\n\n  public void updatePassword(String password) {\n    this.password = password;\n    touch();\n  }\n\n  public void updateName(String name) {\n    this.name = name;\n    touch();\n  }\n}\n</code></pre>\n<h3>Method2</h3>\n<p>receive multiple parameters in one method called <code>update()</code>,\nI was using the method of updating only the parameters that received the value and updating the updated At.</p>\n<p>I should also pay attention to the method signature, right..?</p>\n<p>Elsewhere, you only need to call 'update()' but pay attention to the parameter order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class User {\n  private final UUID id;\n  private final Instant createdAt;\n  private Instant updatedAt;\n\n  private String name;\n  private String password;\n\n  public void update(String name, String password) {\n    boolean anyValueUpdated = false;\n    if (name!= null &amp;&amp; !name.equals(this.username)) {\n      this.name= name;\n      anyValueUpdated = true;\n    }\n    if (password != null &amp;&amp; !password.equals(this.password)) {\n      this.password = password;\n      anyValueUpdated = true;\n    }\n    if (anyValueUpdated) {\n      this.updatedAt = Instant.now();\n    }\n  }\n</code></pre>\n<p>P.S If you have any advice on my concerns, please let me know! Keywords are really good :)</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "domain-driven-design" ],
    "owner" : {
      "account_id" : 23246249,
      "reputation" : 645,
      "user_id" : 17334807,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/bZ3lGpQU.png?s=256",
      "display_name" : "NINE",
      "link" : "https://stackoverflow.com/users/17334807/nine"
    },
    "is_answered" : true,
    "view_count" : 94,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746805959,
    "creation_date" : 1746718240,
    "link" : "https://stackoverflow.com/questions/79612732/trade-off-of-update-method-design-of-the-domain-entity",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79614478,
    "question_id" : 79612732,
    "body" : "<p>Firstly, keeping your properties private is the preferable thing to do.  In DDD, always use a public method to update private properties.  This is where you can enforce invariants before updating the property and declare your method using <em>ubiquitous language</em>.</p>\n<p>Secondly, and importantly, <strong>your public methods should be oriented around your use cases</strong>.  Specifically, if there is a use case where only a name is to be updated without the password being changed, then it makes sense to have an UpdateName method.  Similarly, if there is a use case where user only wants to change password and not the name then an UpdatePassword method is appropriate.  I.E. Method1</p>\n<p>If they are potentially both updated as part of a single action then Method2 is better, but I'd avoid the approach of 'ignoring' nulls.  You'll lose clarity of method's purpose.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3512135,
      "reputation" : 9495,
      "user_id" : 2936204,
      "user_type" : "registered",
      "accept_rate" : 83,
      "profile_image" : "https://www.gravatar.com/avatar/0ba10f4d606ab2b1546c7653e3cd25d0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Neil W",
      "link" : "https://stackoverflow.com/users/2936204/neil-w"
    },
    "creation_date" : 1746805959,
    "last_activity_date" : 1746805959,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140409594,
    "post_id" : 79612732,
    "body" : "Thank you for leaving a comment! I looked into the method you suggested. I think it can reduce a lot of redundant code when working with the setter method! But I&#39;m learning how to avoid <code>getter</code>, <code>setter</code> and write clear methods..! That&#39;s a good way, but I&#39;ll look for more other methods for now.  Thank you for your precious time!",
    "score" : 0,
    "owner" : {
      "account_id" : 23246249,
      "reputation" : 645,
      "user_id" : 17334807,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/bZ3lGpQU.png?s=256",
      "display_name" : "NINE",
      "link" : "https://stackoverflow.com/users/17334807/nine"
    },
    "creation_date" : 1746755627,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140408554,
    "post_id" : 79612732,
    "body" : "It&#39;s probably more natural for an app to use option 1, where each exposed property has a setter.  To avoid having to <code>touch()</code> everywhere, see <code>PropertyChangeListener</code>.",
    "score" : 1,
    "owner" : {
      "account_id" : 8909811,
      "reputation" : 2861,
      "user_id" : 6650475,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fe85994d05ad7aaaa1c47d638b37bc45?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrew S",
      "link" : "https://stackoverflow.com/users/6650475/andrew-s"
    },
    "creation_date" : 1746724841,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79614478" : [ {
      "comment_id" : 140412793,
      "post_id" : 79614478,
      "body" : "I&#39;ve also learned a sense of humor. ;)",
      "score" : 0,
      "owner" : {
        "account_id" : 23246249,
        "reputation" : 645,
        "user_id" : 17334807,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/bZ3lGpQU.png?s=256",
        "display_name" : "NINE",
        "link" : "https://stackoverflow.com/users/17334807/nine"
      },
      "creation_date" : 1746843244,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140412414,
      "post_id" : 79614478,
      "body" : "Yes, your understanding is correct.  The <code>science</code> of DDD provides many principles and guidelines.  The <code>art</code> of DDD is choosing the most appropriate way forward when those principles and guidelines in a particular situation seem to work against each other.  I wish I could just give you a standard.  I&#39;d be rich!",
      "score" : 1,
      "owner" : {
        "account_id" : 3512135,
        "reputation" : 9495,
        "user_id" : 2936204,
        "user_type" : "registered",
        "accept_rate" : 83,
        "profile_image" : "https://www.gravatar.com/avatar/0ba10f4d606ab2b1546c7653e3cd25d0?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Neil W",
        "link" : "https://stackoverflow.com/users/2936204/neil-w"
      },
      "creation_date" : 1746823977,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140412190,
      "post_id" : 79614478,
      "body" : "Thank you for your precious reply! I understood it as &quot;I can&#39;t conclude which is better and the right way for the situation that is being used is the best way for that situation.&quot; Is that correct?  As I applied the design principles, there are complementary principles, but I wanted to increase my ability to make decisions in the event of a trade-off, so I asked.  I will learn hard and grow if you give me a standard that can more clearly distinguish the difference between what is possible and what is appropriate.  Thank you for your precious time!",
      "score" : 0,
      "owner" : {
        "account_id" : 23246249,
        "reputation" : 645,
        "user_id" : 17334807,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/bZ3lGpQU.png?s=256",
        "display_name" : "NINE",
        "link" : "https://stackoverflow.com/users/17334807/nine"
      },
      "creation_date" : 1746817995,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}