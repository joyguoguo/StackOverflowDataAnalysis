{
  "question" : {
    "question_id" : 79540318,
    "title" : "Apache Camel Exchange/Message timestamp field is empty",
    "body" : "<p>I am trying to report latency metric for an Apache Camel Route by adding a bean at the end of the route and calculating the latency using the <a href=\"https://www.javadoc.io/doc/org.apache.camel/camel-api/latest/org/apache/camel/Exchange.html#MESSAGE_TIMESTAMP\" rel=\"nofollow noreferrer\">MESSAGE_TIMESTAMP field</a> of the Exchange Message object.</p>\n<p>The code is like this:</p>\n<pre><code>from(&quot;google-pubsub://...&quot;)\n            .process()\n            .bean(&quot;routeMetricsTimer&quot;,&quot;reportTimer&quot;);\n</code></pre>\n<p>In the RouteMetricsTimer bean, I tried to</p>\n<pre><code>        long messageTimeStamp = exchange.getMessage().getMessageTimestamp();\n        long duration = System.currentTimeMillis() - messageTimeStamp;\n        //report the time taken to process the message\n        \n</code></pre>\n<p>However I see that the MESSAGE_TIMESTAMP value is always 0.</p>\n<p>Is there a setting to enable this attribute in the message?</p>\n<p>I see this related answer suggests adding a timestamp property at the beginning of the route, but this question is about the MESSAGE_TIMESTAMP field.</p>\n<p><a href=\"https://stackoverflow.com/a/40522414/6352160\">https://stackoverflow.com/a/40522414/6352160</a></p>\n",
    "tags" : [ "java", "apache-camel", "spring-camel" ],
    "owner" : {
      "account_id" : 5449795,
      "reputation" : 2895,
      "user_id" : 6352160,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/571fa08b97950d4272f2fa581848cf73?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Shankar",
      "link" : "https://stackoverflow.com/users/6352160/shankar"
    },
    "is_answered" : true,
    "view_count" : 101,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1743718913,
    "creation_date" : 1743124057,
    "link" : "https://stackoverflow.com/questions/79540318/apache-camel-exchange-message-timestamp-field-is-empty",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79554122,
    "question_id" : 79540318,
    "body" : "<p>According to the doco: <a href=\"https://camel.apache.org/components/4.10.x/eips/message.html\" rel=\"nofollow noreferrer\">Message -Apache Camel</a></p>\n<ul>\n<li><em><code>timestamp</code></em>: the timestamp the message originates from. Some systems like JMS, Kafka, AWS have a timestamp on the event/message that Camel receives. This method returns the timestamp if a timestamp exists.</li>\n</ul>\n<p>It comes down to <code>google-pubsub</code> protocol on whether it includes timestamp as part of its message. You might need to explicitly assign the timestamp prior to sending to the pubsub protocol.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6669397,
      "reputation" : 101,
      "user_id" : 5145941,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-un6Ri25tpwA/AAAAAAAAAAI/AAAAAAAAADc/2054nGyQUGk/s256-rj/photo.jpg",
      "display_name" : "John Chan",
      "link" : "https://stackoverflow.com/users/5145941/john-chan"
    },
    "creation_date" : 1743718913,
    "last_activity_date" : 1743718913,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}