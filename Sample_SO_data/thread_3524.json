{
  "question" : {
    "question_id" : 79543355,
    "title" : "Reducing the image with deterioration of the image quality",
    "body" : "<p>I'm trying to shrink the image and then display it on a JFrame. But it's quality is getting worse.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\nimport java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Random;\nimport javax.imageio.ImageIO;\nimport javax.swing.*;\n\npublic class Mu {\n    public static void main(String[] str) {\n        Toolkit toolkit = Toolkit.getDefaultToolkit();\n        Dimension screenSize = toolkit.getScreenSize();\n        int width = screenSize.width;\n        int height = screenSize.height;\n\n        System.setProperty(&quot;sun.java2d.opengl&quot;, &quot;true&quot;);\n        \n        MyFrame appwin = new MyFrame();\n        appwin.setSize(new Dimension(appwin.w, appwin.h));\n        appwin.setResizable(false);\n        appwin.setAlwaysOnTop(true);\n        \n        Random r = new Random();\n        appwin.setLocation(r.nextInt(width - appwin.w), r.nextInt(height - appwin.h));\n        appwin.setVisible(true);\n    }\n}\n\nclass MyFrame extends JFrame {\n    private static final long serialVersionUID = 1L;\n    BufferedImage img;\n    int w, h;\n    \n    public MyFrame() {\n\n        addWindowListener(new WindowAdapter()\n        {\n            public void windowClosing(WindowEvent we)\n            {\n                System.exit(0);\n            }\n        });\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        try {\n            File imageFile = new File(&quot;img.jpg&quot;);\n            BufferedImage imgB = ImageIO.read(imageFile);\n            \n            int maxSize = 500;\n            \n            double scaleFactor = Math.min(\n                (double)maxSize / imgB.getWidth(),\n                (double)maxSize / imgB.getHeight()\n            );\n            \n            w = (int)(imgB.getWidth() * scaleFactor);\n            h = (int)(imgB.getHeight() * scaleFactor);\n            \n            img = highQualityResize(imgB, w, h);\n            \n            setPreferredSize(new Dimension(w, h));\n            pack();\n        } catch (IOException exc) {\n            exc.printStackTrace();\n            System.exit(1);\n        }\n    }\n    \n    @Override\n    public void paint(Graphics g) {\n        super.paint(g);\n        if (img != null) {\n\n            Insets insets = getInsets();\n            g.drawImage(img, insets.left, insets.top, w, h, this);\n        }\n    }\n    \n    public static BufferedImage highQualityResize(BufferedImage src, int w, int h) {\n        BufferedImage resized = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\n        Graphics2D g2d = resized.createGraphics();\n        \n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, \n                           RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, \n                           RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, \n                           RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, \n                           RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        \n        g2d.drawImage(src, 0, 0, w, h, null);\n        g2d.dispose();\n        return resized;\n    }\n}\n</code></pre>\n<p>I also used the Thumbnailator library and imgscalr library, but they didn't help.</p>\n<p>Original image:</p>\n<p><a href=\"https://i.sstatic.net/51KaIAWH.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/51KaIAWH.jpg\" alt=\"https://i.sstatic.net/51KaIAWH.jpg\" /></a></p>\n<p>Received image:</p>\n<p><a href=\"https://i.sstatic.net/GPqD7StQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/GPqD7StQ.png\" alt=\"https://i.sstatic.net/GPqD7StQ.png\" /></a></p>\n<p>I am making a program in Eclipse and when creating a project I specify “JavaSE-10” under “Use an execution environmant JRE”. Could this be the problem?</p>\n",
    "tags" : [ "java", "swing", "awt" ],
    "owner" : {
      "account_id" : 40774238,
      "reputation" : 1,
      "user_id" : 29946774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5d0d5f8f796f0942d30aedaeff51a9cd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey",
      "link" : "https://stackoverflow.com/users/29946774/andrey"
    },
    "is_answered" : false,
    "view_count" : 88,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743348290,
    "creation_date" : 1743256866,
    "link" : "https://stackoverflow.com/questions/79543355/reducing-the-image-with-deterioration-of-the-image-quality",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140286666,
    "post_id" : 79543355,
    "body" : "Side note: that <code>WindowAdapter</code> calling <code>System.exit(0);</code> is obsolete, as the subsequent <code>setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</code> does already the entire job of terminating the application on close.",
    "score" : 1,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 300981,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1743508232,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140280010,
    "post_id" : 79543355,
    "body" : "Also consider <code>AffineTransformOp</code>, mentioned <a href=\"https://stackoverflow.com/a/32639217/230513\">here</a> and <a href=\"https://stackoverflow.com/a/4216635/230513\">here</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 81822,
      "reputation" : 206045,
      "user_id" : 230513,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/632732029bf05854c17d0dea6c82dcb4?s=256&d=identicon&r=PG",
      "display_name" : "trashgod",
      "link" : "https://stackoverflow.com/users/230513/trashgod"
    },
    "creation_date" : 1743359548,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140279176,
    "post_id" : 79543355,
    "body" : "@GilbertLeBlanc This helped. Thank you",
    "score" : 0,
    "owner" : {
      "account_id" : 40774238,
      "reputation" : 1,
      "user_id" : 29946774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5d0d5f8f796f0942d30aedaeff51a9cd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey",
      "link" : "https://stackoverflow.com/users/29946774/andrey"
    },
    "creation_date" : 1743339152,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140278671,
    "post_id" : 79543355,
    "body" : "@aled This is what I did in WinForms in C# with a screen size of 500x500 <a href=\"https://easyupload.io/dgaio8\" rel=\"nofollow noreferrer\">easyupload.io/dgaio8</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 40774238,
      "reputation" : 1,
      "user_id" : 29946774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5d0d5f8f796f0942d30aedaeff51a9cd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey",
      "link" : "https://stackoverflow.com/users/29946774/andrey"
    },
    "creation_date" : 1743322038,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140278651,
    "post_id" : 79543355,
    "body" : "@aled For example, when you zoom out on a page in browser, the picture with this lion is not distorted as much. And I also zoomed out in C# in WPF. I set the picture to the window as background and set Stretch as Fill. And then the picture zoomed out well.",
    "score" : 0,
    "owner" : {
      "account_id" : 40774238,
      "reputation" : 1,
      "user_id" : 29946774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5d0d5f8f796f0942d30aedaeff51a9cd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey",
      "link" : "https://stackoverflow.com/users/29946774/andrey"
    },
    "creation_date" : 1743321465,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140277612,
    "post_id" : 79543355,
    "body" : "Windows is upscaling your images by 25%.  Add <code>System.setProperty(&quot;sun.java2d.uiScale&quot;, &quot;1&quot;);</code> as the first line of code and see if your image quality improves.",
    "score" : 1,
    "owner" : {
      "account_id" : 114128,
      "reputation" : 51685,
      "user_id" : 300257,
      "user_type" : "registered",
      "accept_rate" : 89,
      "profile_image" : "https://i.sstatic.net/gWeJr.jpg?s=256",
      "display_name" : "Gilbert Le Blanc",
      "link" : "https://stackoverflow.com/users/300257/gilbert-le-blanc"
    },
    "creation_date" : 1743273824,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140277609,
    "post_id" : 79543355,
    "body" : "@GilbertLeBlanc I ran this on Windows 10 with screen scaling at 125%",
    "score" : 0,
    "owner" : {
      "account_id" : 40774238,
      "reputation" : 1,
      "user_id" : 29946774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5d0d5f8f796f0942d30aedaeff51a9cd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey",
      "link" : "https://stackoverflow.com/users/29946774/andrey"
    },
    "creation_date" : 1743273598,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140277546,
    "post_id" : 79543355,
    "body" : "JDK 10 is obsolete but maybe not related to your problem. Use a current LTS JDK.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1743271627,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140277541,
    "post_id" : 79543355,
    "body" : "Is there a method to shrink an image without losing quality in any tool or language?",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1743271557,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140277351,
    "post_id" : 79543355,
    "body" : "Is the code running on  Windows 10 or 11 and have screen scaling &gt; 100%?",
    "score" : 1,
    "owner" : {
      "account_id" : 114128,
      "reputation" : 51685,
      "user_id" : 300257,
      "user_type" : "registered",
      "accept_rate" : 89,
      "profile_image" : "https://i.sstatic.net/gWeJr.jpg?s=256",
      "display_name" : "Gilbert Le Blanc",
      "link" : "https://stackoverflow.com/users/300257/gilbert-le-blanc"
    },
    "creation_date" : 1743266700,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}