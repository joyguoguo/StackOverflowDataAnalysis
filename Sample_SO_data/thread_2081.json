{
  "question" : {
    "question_id" : 79650278,
    "title" : "Why does table.deleteItem(primaryKey) behave differently when using with DynamoDBLocal vs aws-sdk (actual dynamoDb table)?",
    "body" : "<p>I have below code:</p>\n<pre><code>DeleteItemOutcome outcome = table.deleteItem(primaryKey); \nint status = outcome.getDeleteItemResult().getSdkHttpMetadata().getHttpStatusCode();\n</code></pre>\n<p>This is working fine when using with actual DynamoDB service, but getting null pointer when running in local using DynamoDBLocal.</p>\n<p>This is the error:</p>\n<blockquote>\n<p>Cannot invoke &quot;com.amazonaws.http.SdkHttpMetadata.getHttpStatusCode()&quot; because the return value of &quot;com.amazonaws.services.dynamodbv2.model.DeleteItemResult.getSdkHttpMetadata()&quot; is null.</p>\n</blockquote>\n<p>I tried using DeleteItemSpec with ReturnValue.ALL_OLD but still getting the same null pointer exception.</p>\n<pre><code>DeleteItemSpec deleteItemSpec = new DeleteItemSpec()\n            .withPrimaryKey(&quot;id&quot;, id)\n            .withReturnValues(ReturnValue.ALL_OLD);\nDeleteItemOutcome outcome = table.deleteItem(deleteItemSpec);\nint status = outcome.getDeleteItemResult().getSdkHttpMetadata().getHttpStatusCode();\n</code></pre>\n",
    "tags" : [ "java", "amazon-web-services", "amazon-dynamodb", "dynamo-local" ],
    "owner" : {
      "account_id" : 16913636,
      "reputation" : 394,
      "user_id" : 12500840,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/MXRb6tpB.jpg?s=256",
      "display_name" : "ClassHacker",
      "link" : "https://stackoverflow.com/users/12500840/classhacker"
    },
    "is_answered" : false,
    "view_count" : 62,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748952577,
    "creation_date" : 1748895343,
    "link" : "https://stackoverflow.com/questions/79650278/why-does-table-deleteitemprimarykey-behave-differently-when-using-with-dynamod",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140483191,
    "post_id" : 79650278,
    "body" : "I&#39;d presume some incompatibility between DynamoDB Local and the real DynamoDB service when it comes to returning responses and HTTP headers. You should find some way to report this to AWS support because it would be better for everyone if they behaved the same, as much as possible.",
    "score" : 0,
    "owner" : {
      "account_id" : 100740,
      "reputation" : 79837,
      "user_id" : 271415,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=256&d=identicon&r=PG",
      "display_name" : "jarmod",
      "link" : "https://stackoverflow.com/users/271415/jarmod"
    },
    "creation_date" : 1748952690,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140481477,
    "post_id" : 79650278,
    "body" : "Thanks for this, let me test it out and get back to you.",
    "score" : 0,
    "owner" : {
      "account_id" : 10749774,
      "reputation" : 20494,
      "user_id" : 7909676,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/50Vga.jpg?s=256",
      "display_name" : "Leeroy Hannigan",
      "link" : "https://stackoverflow.com/users/7909676/leeroy-hannigan"
    },
    "creation_date" : 1748896585,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}