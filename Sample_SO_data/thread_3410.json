{
  "question" : {
    "question_id" : 79551123,
    "title" : "How to fill in a frame of Blocks with a right click? Spigot Java",
    "body" : "<p>I have recently had the problem where I am unable to fill in the ancient city frame/portal.\n(1.21.1)\nThe issue I have come across is that I have to place 2 blocks of reinforced deepslate or else it does not work at all. This can be seen more clearly below in this image:</p>\n<p><a href=\"https://i.sstatic.net/JnWADV2C.png\" rel=\"nofollow noreferrer\">The Problem</a></p>\n<p>However it will still not work to expectations as it will offset the frame filling by one block as seen below...</p>\n<p><a href=\"https://i.sstatic.net/9QimB5YK.png\" rel=\"nofollow noreferrer\">Another Problem</a></p>\n<p>I will show my code below, sorry if I am making some silly mistake:</p>\n<pre><code>package poseidon.smp.customPortal;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.Material;\nimport org.bukkit.block.Block;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.block.Action;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic final class CustomPortal extends JavaPlugin implements Listener {\n\n    @Override\n    public void onEnable() {\n        Bukkit.getPluginManager().registerEvents(this, this);\n    }\n\n    @EventHandler\n    public void onRightClick(PlayerInteractEvent event) {\n        if (event.getAction() == Action.RIGHT_CLICK_BLOCK) {\n            Block clickedBlock = event.getClickedBlock();\n            if (clickedBlock != null &amp;&amp; clickedBlock.getType() == Material.REINFORCED_DEEPSLATE) {\n                Set&lt;Block&gt; frameBlocks = new HashSet&lt;&gt;();\n                findFrame(clickedBlock, frameBlocks);\n                fillFrameWithIce(frameBlocks);\n            }\n        }\n    }\n\n    private void findFrame(Block start, Set&lt;Block&gt; frameBlocks) {\n        findFrameRecursive(start, frameBlocks);\n        int minX = frameBlocks.stream().mapToInt(b -&gt; b.getX()).min().orElse(0);\n        int maxX = frameBlocks.stream().mapToInt(b -&gt; b.getX()).max().orElse(0);\n        int minY = frameBlocks.stream().mapToInt(b -&gt; b.getY()).min().orElse(0);\n        int maxY = frameBlocks.stream().mapToInt(b -&gt; b.getY()).max().orElse(0);\n        int minZ = frameBlocks.stream().mapToInt(b -&gt; b.getZ()).min().orElse(0);\n        int maxZ = frameBlocks.stream().mapToInt(b -&gt; b.getZ()).max().orElse(0);\n\n        for (int x = minX; x &lt;= maxX; x++) {\n            for (int y = minY; y &lt;= maxY; y++) {\n                frameBlocks.add(start.getWorld().getBlockAt(x, y, minZ));\n                frameBlocks.add(start.getWorld().getBlockAt(x, y, maxZ));\n            }\n        }\n\n        for (int z = minZ; z &lt;= maxZ; z++) {\n            for (int y = minY; y &lt;= maxY; y++) {\n                frameBlocks.add(start.getWorld().getBlockAt(minX, y, z));\n                frameBlocks.add(start.getWorld().getBlockAt(maxX, y, z));\n            }\n        }\n    }\n\n    private void findFrameRecursive(Block block, Set&lt;Block&gt; frameBlocks) {\n        if (block == null || frameBlocks.contains(block) || block.getType() != Material.REINFORCED_DEEPSLATE) {\n            return;\n        }\n        frameBlocks.add(block);\n\n        findFrameRecursive(block.getRelative(1, 0, 0), frameBlocks);\n        findFrameRecursive(block.getRelative(-1, 0, 0), frameBlocks);\n        findFrameRecursive(block.getRelative(0, 1, 0), frameBlocks);\n        findFrameRecursive(block.getRelative(0, -1, 0), frameBlocks);\n        findFrameRecursive(block.getRelative(0, 0, 1), frameBlocks);\n        findFrameRecursive(block.getRelative(0, 0, -1), frameBlocks);\n    }\n\n    private void fillFrameWithIce(Set&lt;Block&gt; frameBlocks) {\n        int minX = frameBlocks.stream().mapToInt(Block::getX).min().orElse(0);\n        int maxX = frameBlocks.stream().mapToInt(Block::getX).max().orElse(0);\n        int minY = frameBlocks.stream().mapToInt(Block::getY).min().orElse(0);\n        int maxY = frameBlocks.stream().mapToInt(Block::getY).max().orElse(0);\n        int minZ = frameBlocks.stream().mapToInt(Block::getZ).min().orElse(0);\n        int maxZ = frameBlocks.stream().mapToInt(Block::getZ).max().orElse(0);\n\n        for (int x = minX + 1; x &lt; maxX; x++) {\n            for (int y = minY + 1; y &lt; maxY; y++) {\n                for (int z = minZ + 1; z &lt; maxZ; z++) {\n                    Block block = frameBlocks.iterator().next().getWorld().getBlockAt(x, y, z);\n                    if (!frameBlocks.contains(block)) {\n                        block.setType(Material.STONE);\n                    }\n                }\n            }\n        }\n    }\n    @Override\n    public void onDisable() {\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "minecraft", "spigot" ],
    "owner" : {
      "account_id" : 28108662,
      "reputation" : 1,
      "user_id" : 21476845,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxZoGa7g515hy0lVnnqOG5mmv8W46N1GLYt-4kpD=k-s256",
      "display_name" : "The Spoofies",
      "link" : "https://stackoverflow.com/users/21476845/the-spoofies"
    },
    "is_answered" : false,
    "view_count" : 42,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743612129,
    "creation_date" : 1743612101,
    "link" : "https://stackoverflow.com/questions/79551123/how-to-fill-in-a-frame-of-blocks-with-a-right-click-spigot-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140772125,
    "post_id" : 79551123,
    "body" : "Did you find a solution yet? The recursive idea seems good, but will cause potentially larger areas to be filled with Stone, than only the plane of the portal",
    "score" : 0,
    "owner" : {
      "account_id" : 22627540,
      "reputation" : 1166,
      "user_id" : 16805423,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/LA3Jp.jpg?s=256",
      "display_name" : "Brentspine",
      "link" : "https://stackoverflow.com/users/16805423/brentspine"
    },
    "creation_date" : 1759354371,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}