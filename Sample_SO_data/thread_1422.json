{
  "question" : {
    "question_id" : 79707424,
    "title" : "Parse error in WebAssembly code only in Safari",
    "body" : "<p>I have compiled some Java code to WebAssembly via TeaVM. The resulting code runs nicely in Firefox and Chrome but throws an exception in Safari.</p>\n<pre><code>CompileError: WebAssembly.Module doesn't parse at byte 1657: invalid extended GC op 24, in function at index 2245\n</code></pre>\n<p>Can anybody tell me what's wrong with that code? I mean it can't be so bad if Firefox and Chrome can parse it without problems. I am using the most recent versions of all browsers and the offending code can be found here: <a href=\"https://mpmediasoft.de/test/tmp/ModelBridgeTeaVM.wasm\" rel=\"nofollow noreferrer\">https://mpmediasoft.de/test/tmp/ModelBridgeTeaVM.wasm</a></p>\n",
    "tags" : [ "java", "safari", "webassembly", "teavm" ],
    "owner" : {
      "account_id" : 5347179,
      "reputation" : 10766,
      "user_id" : 4262407,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://www.gravatar.com/avatar/0f96b67d37b84ebbc683ff5691c96261?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mipa",
      "link" : "https://stackoverflow.com/users/4262407/mipa"
    },
    "is_answered" : false,
    "view_count" : 146,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1752950434,
    "creation_date" : 1752944654,
    "link" : "https://stackoverflow.com/questions/79707424/parse-error-in-webassembly-code-only-in-safari",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79707493,
    "question_id" : 79707424,
    "body" : "<p>The issue is that Safari does not support some WASM operation: <a href=\"https://github.com/konsoletyper/teavm/issues/1028\" rel=\"nofollow noreferrer\">https://github.com/konsoletyper/teavm/issues/1028</a>.</p>\n<p>The solution is to use other browsers the operation.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1752950434,
    "last_activity_date" : 1752950434,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140602751,
    "post_id" : 79707424,
    "body" : "Don&#39;t use links to binary code. Instead for example show a desassembly.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1752950388,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79707493" : [ {
      "comment_id" : 140606190,
      "post_id" : 79707493,
      "body" : "@aled Code should be in the question per <a href=\"https://stackoverflow.com\">Stack Overflow</a> guidelines and links to repositories should be a backup (see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>). In this case WASM is equivalent to binary code, so de-compiling should be used at the least. I suspect just an hex dump of it would not be as useful. Finally a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is always recommended here, for others to reproduce the issue and verify a solution.",
      "score" : 0,
      "owner" : {
        "account_id" : 372682,
        "reputation" : 26512,
        "user_id" : 721855,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
        "display_name" : "aled",
        "link" : "https://stackoverflow.com/users/721855/aled"
      },
      "creation_date" : 1753106654,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140605451,
      "post_id" : 79707493,
      "body" : "Even if I could (but I can&#39;t) what would that help you. The question is purely about a piece of Wasm code which is accepted by Firefox and Chrome but is rejected by Safari. My assumption is that this is either a bug in Safari or some still unimplemented feature and my hope was that someone with more knowledge about Wasm than me could shed some light on this.",
      "score" : 0,
      "owner" : {
        "account_id" : 5347179,
        "reputation" : 10766,
        "user_id" : 4262407,
        "user_type" : "registered",
        "accept_rate" : 40,
        "profile_image" : "https://www.gravatar.com/avatar/0f96b67d37b84ebbc683ff5691c96261?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "mipa",
        "link" : "https://stackoverflow.com/users/4262407/mipa"
      },
      "creation_date" : 1753088645,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140603775,
      "post_id" : 79707493,
      "body" : "@mipa In that case you should provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in the question for other to reproduce the issue.",
      "score" : 0,
      "owner" : {
        "account_id" : 372682,
        "reputation" : 26512,
        "user_id" : 721855,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
        "display_name" : "aled",
        "link" : "https://stackoverflow.com/users/721855/aled"
      },
      "creation_date" : 1753015738,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140602952,
      "post_id" : 79707493,
      "body" : "Well, I am the author of the issue you have cited. I was hoping that someone would know more specifically why Safari is complaining or whether this could be attributed to a specific feature that could be avoided.",
      "score" : 1,
      "owner" : {
        "account_id" : 5347179,
        "reputation" : 10766,
        "user_id" : 4262407,
        "user_type" : "registered",
        "accept_rate" : 40,
        "profile_image" : "https://www.gravatar.com/avatar/0f96b67d37b84ebbc683ff5691c96261?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "mipa",
        "link" : "https://stackoverflow.com/users/4262407/mipa"
      },
      "creation_date" : 1752961291,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}