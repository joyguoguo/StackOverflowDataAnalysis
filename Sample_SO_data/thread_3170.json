{
  "question" : {
    "question_id" : 79567379,
    "title" : "App crashes when using setText on TextView",
    "body" : "<p>I am new to Appdevelopment.</p>\n<p>I am just trying out something network related.\nSo I have a textView in my xml File, the View is always found, and when I first startup the App the view.setText(&quot;connected&quot;);\nis working and sets the Text of the TextView.</p>\n<p>As soon as I disable the Wifi and the inner NetworkListener gets called my App just crashes.\nI am trying to debug it but as soon as the debbuger is on the line with view.setText(&quot;disconnected&quot;); it just crashes without anything, it does not go into the setText Method and the view is also not null.</p>\n<p>I am out of Ideas what to do, the only thing I would think is that I cannot use the TextView in this form a second time, but that doesn't really make sense.</p>\n<pre><code>private void addNetworkReceiver(){\n    NetWorkHandler handler = new NetWorkHandler(this);\n    handler.addNetworkListener(new NetworkListener() {\n        @Override\n        public void listen(boolean connected) {\n            Log.d(&quot;Network&quot;, String.valueOf(connected));\n            if(view == null){\n                return;\n            }\n            if(connected){\n                view.setText(&quot;connected&quot;);\n            } else {\n                view.setText(&quot;disconnected&quot;);\n            }\n        }\n    });\n}\n</code></pre>\n",
    "tags" : [ "java", "android" ],
    "owner" : {
      "account_id" : 14946078,
      "reputation" : 43,
      "user_id" : 10791320,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-YLyQYjB2bFw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hjV6eepsK-NR2-uwKzxhuY16JaZQ/mo/s256-rj/photo.jpg",
      "display_name" : "MineRickStar",
      "link" : "https://stackoverflow.com/users/10791320/minerickstar"
    },
    "is_answered" : true,
    "view_count" : 50,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744347121,
    "creation_date" : 1744311300,
    "link" : "https://stackoverflow.com/questions/79567379/app-crashes-when-using-settext-on-textview",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79568024,
    "question_id" : 79567379,
    "body" : "<p>You must perform the action on the main UI thread. Here is a way to do it adapted to your specific case:</p>\n<pre><code>view.post(new Runnable() {\n    @Override\n    public void run() {\n        if (connected) {\n            view.setText(&quot;connected&quot;);\n        } else {\n            view.setText(&quot;disconnected&quot;);\n        }\n    }\n});\n</code></pre>\n<p>If you have the activity available in that part of your code (i.e., a class that extends <code>AppCompatActivity</code> or some other activity), you can change <code>view.post</code> for <code>activity.runOnUiThread</code> in the code above.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 14466459,
      "reputation" : 519,
      "user_id" : 10449676,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d01efe3e65b50c64e2f93b28c668b6cc?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "FelipeCruzV10",
      "link" : "https://stackoverflow.com/users/10449676/felipecruzv10"
    },
    "creation_date" : 1744347121,
    "last_activity_date" : 1744347121,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140325842,
    "post_id" : 79567379,
    "body" : "I found nowhere where this was written down, but it is a very good insight.",
    "score" : 0,
    "owner" : {
      "account_id" : 14946078,
      "reputation" : 43,
      "user_id" : 10791320,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-YLyQYjB2bFw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hjV6eepsK-NR2-uwKzxhuY16JaZQ/mo/s256-rj/photo.jpg",
      "display_name" : "MineRickStar",
      "link" : "https://stackoverflow.com/users/10791320/minerickstar"
    },
    "creation_date" : 1744396363,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140321923,
    "post_id" : 79567379,
    "body" : "Action on views, like a TextView, must be performed on the main UI thread, so you have to use runOnUiThread to make it working",
    "score" : 2,
    "owner" : {
      "account_id" : 159437,
      "reputation" : 942,
      "user_id" : 378795,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/5xipb2HO.jpg?s=256",
      "display_name" : "Livio",
      "link" : "https://stackoverflow.com/users/378795/livio"
    },
    "creation_date" : 1744312605,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79568024" : [ {
      "comment_id" : 140325898,
      "post_id" : 79568024,
      "body" : "The changes on UI elements are required to be done from the Main Thread, therefore one should try to have the definition of those inside an Activity. However, when using background tasks, these are usually outside Activities, and so, one need this approach to update the UI based on the background task. At the end, the functions are there for a reason and to be used :)",
      "score" : 0,
      "owner" : {
        "account_id" : 14466459,
        "reputation" : 519,
        "user_id" : 10449676,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/d01efe3e65b50c64e2f93b28c668b6cc?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "FelipeCruzV10",
        "link" : "https://stackoverflow.com/users/10449676/felipecruzv10"
      },
      "creation_date" : 1744397656,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140325838,
      "post_id" : 79568024,
      "body" : "Yes that is what helps. I guess this is not really the way to do it.",
      "score" : 0,
      "owner" : {
        "account_id" : 14946078,
        "reputation" : 43,
        "user_id" : 10791320,
        "user_type" : "registered",
        "profile_image" : "https://lh6.googleusercontent.com/-YLyQYjB2bFw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hjV6eepsK-NR2-uwKzxhuY16JaZQ/mo/s256-rj/photo.jpg",
        "display_name" : "MineRickStar",
        "link" : "https://stackoverflow.com/users/10791320/minerickstar"
      },
      "creation_date" : 1744396296,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}