{
  "question" : {
    "question_id" : 79535991,
    "title" : "Joda date/time type `org.joda.time.Days` not supported by default:",
    "body" : "<p>I used joda 2.10.14 time and jackson2 2.18.3,</p>\n<pre><code>jackson-core-2.18.3.jar\njackson-databind-2.18.3.jar\njackson-datatype-joda-2.18.3.jar\njoda-time-2.10.14.jar\n</code></pre>\n<p>I have register JodaModule, but it also throw Exception, my code is</p>\n<pre><code>public static void main(String[] args) throws JsonProcessingException {\n    DateTime dateTime = new DateTime();\n    Days days = Days.days(1);\n    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n    map.put(&quot;dateTime&quot;, dateTime);\n    map.put(&quot;days&quot;, days);\n    ObjectMapper objectMapper = new ObjectMapper();\n    objectMapper.registerModule(new JodaModule());\n    String json = objectMapper.writeValueAsString(map);\n    System.out.println(json);\n}\n</code></pre>\n<p>the exception</p>\n<pre><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Joda date/time type `org.joda.time.Days` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-joda&quot; to enable handling (through reference chain: java.util.HashMap[&quot;days&quot;])\nat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77)\nat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1340)\nat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeFields(MapSerializer.java:808)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serializeWithoutTypeInfo(MapSerializer.java:764)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:720)\nat com.fasterxml.jackson.databind.ser.std.MapSerializer.serialize(MapSerializer.java:35)\nat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:502)\nat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:341)\nat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4819)\nat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsString(ObjectMapper.java:4060)\nat azkaban.utils.JSONUtils.main(JSONUtils.java:96)\n</code></pre>\n<p>I checked JodaModule code, found that it is not add Days deserializer. So, how should I resolve this issue?</p>\n<p><a href=\"https://i.sstatic.net/56kvaRHO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/56kvaRHO.png\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "jackson", "jodatime", "jackson-databind" ],
    "owner" : {
      "account_id" : 3761893,
      "reputation" : 417,
      "user_id" : 3126580,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/864efafb116d05ccef8a4c7b4cc1f7db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "hehe",
      "link" : "https://stackoverflow.com/users/3126580/hehe"
    },
    "is_answered" : true,
    "view_count" : 183,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1744115460,
    "creation_date" : 1742982500,
    "link" : "https://stackoverflow.com/questions/79535991/joda-date-time-type-org-joda-time-days-not-supported-by-default",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79547583,
    "question_id" : 79535991,
    "body" : "<p>The code maintainers have helped fix this problem.</p>\n<p>The fix is basically in line with my own implementation.</p>\n<p>They have written separate serialization and deserialization classes for each subclass of ReadablePeriod and registered them in the JodaModule. like this:</p>\n<p><code>com.fasterxml.jackson.datatype.joda.ser.DaysSerializer</code></p>\n<p><a href=\"https://github.com/FasterXML/jackson-datatype-joda/issues/162\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-datatype-joda/issues/162</a></p>\n<p><a href=\"https://github.com/FasterXML/jackson-datatype-joda/issues/160\" rel=\"nofollow noreferrer\">https://github.com/FasterXML/jackson-datatype-joda/issues/160</a></p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3761893,
      "reputation" : 417,
      "user_id" : 3126580,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/864efafb116d05ccef8a4c7b4cc1f7db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "hehe",
      "link" : "https://stackoverflow.com/users/3126580/hehe"
    },
    "creation_date" : 1743472985,
    "last_activity_date" : 1744115460,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140269178,
    "post_id" : 79535991,
    "body" : "Yeah, that’s a bit funny. It seems that that should work with a <code>org.joda.time.ReadablePeriod</code>, and <code>Days</code> does implements the <code>ReadablePeriod</code> interface.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1743074985,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140268130,
    "post_id" : 79535991,
    "body" : "I found jackson-datatype-joda is also has a serializer com.fasterxml.jackson.datatype.joda.deser.PeriodDeserializer&zwnj;&#8203;， but I don&#39;t known why it is not work.",
    "score" : 0,
    "owner" : {
      "account_id" : 3761893,
      "reputation" : 417,
      "user_id" : 3126580,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/864efafb116d05ccef8a4c7b4cc1f7db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "hehe",
      "link" : "https://stackoverflow.com/users/3126580/hehe"
    },
    "creation_date" : 1743058749,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140267934,
    "post_id" : 79535991,
    "body" : "@Anonymous yes, like P1D. I was use jackson 1.x, no problem. but update to 2.x ,it has this problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 3761893,
      "reputation" : 417,
      "user_id" : 3126580,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/864efafb116d05ccef8a4c7b4cc1f7db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "hehe",
      "link" : "https://stackoverflow.com/users/3126580/hehe"
    },
    "creation_date" : 1743054480,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140264719,
    "post_id" : 79535991,
    "body" : "Wondering what that code is doing and why not using <code>java.time</code>",
    "score" : 2,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4243,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1742983768,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140264713,
    "post_id" : 79535991,
    "body" : "What is your expected representation of 1 day in JSON? <code>P1D</code> or just <code>1</code>, for example?",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1742983683,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140264708,
    "post_id" : 79535991,
    "body" : "It seems to me that writing your own serializer for <code>Days</code> is the way to go. How to write and register your own serializer for Jackson is described in a number of places, so a search will be a good start. You may of course at first try your luck searching for a 3rd-party <code>Days</code> serializer.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1742983606,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}