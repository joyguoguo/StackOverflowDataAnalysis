{
  "question" : {
    "question_id" : 79755790,
    "title" : "Karate image comparison ignore antialiasing causing index out of bounds exception",
    "body" : "<p>When attempting to compare two images in karate via the <code>compareImage</code> keyword (or <code>karate.compareImage()</code> function) with the <code>ignoreAntialiasing</code> option set to true like so:</p>\n<pre><code>Background: Setup\n  * def originalImage = 'classpath:images/baseline.png'\n  * def modifiedImage = 'classpath:images/new.png'\n\n@ACP-0003_007\nScenario: Image comparison example\n  * configure imageComparison = { mismatchShouldPass: true, failureThreshold: 20 }\n  # Visual comparison can be seen in the Karate Report (not in cucumber-style report)\n  * compareImage { baseline: '#(originalImage)', latest: '#(modifiedImage)', options: { ignoreAntialiasing: true } }\n</code></pre>\n<p>The following error appears:</p>\n<pre><code>13:04:22.460 [main] INFO  com.intuit.karate - Karate version: 1.5.1\n13:04:23.406 [main] INFO  com.intuit.karate.Runner - karate.env is: 'ui'\n13:04:23.670 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-base.js\n13:04:23.673 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config.js\n13:04:23.674 [main] DEBUG com.intuit.karate.Suite - [config] classpath:karate-config-ui.js\n13:04:23.684 [main] INFO  com.intuit.karate.Suite - backed up existing 'target\\karate-reports' dir to: target\\karate-reports_1756983863676\n13:04:23.727 [main] INFO  c.intuit.karate.core.FeatureRuntime - found scenario at line: 9\n13:04:26.276 [main] INFO  com.intuit.karate - executing karate-base... \n13:04:26.279 [main] INFO  com.intuit.karate - loading karate custom keywords... \n13:04:26.854 [main] INFO  com.intuit.karate - executing karate-config... \n13:04:26.862 [main] INFO  com.intuit.karate - executing karate-config-ui... \n13:04:26.863 [main] INFO  com.intuit.karate - karate.env system property set to ui \n13:04:26.871 [main] INFO  com.intuit.karate - Chrome headless mode OFF \n13:04:27.629 [main] INFO  i.g.bonigarcia.wdm.WebDriverManager - Using chromedriver 139.0.7258.154 (resolved driver for Chrome 139)\n13:04:27.669 [main] INFO  i.g.bonigarcia.wdm.WebDriverManager - Exporting webdriver.chrome.driver as C:\\Users\\AOCS\\.cache\\selenium\\chromedriver\\win64\\139.0.7258.154\\chromedriver.exe\n13:04:29.315 [main] ERROR com.intuit.karate - src/test/java/component/features/ui-image-comparison.feature:12\n* compareImage { baseline: '#(originalImage)', latest: '#(modifiedImage)', options: { ignoreAntialiasing: true } }\nIndex 7680000 out of bounds for length 7680000\nsrc/test/java/component/features/ui-image-comparison.feature:12\n</code></pre>\n<p>Any particular reason why this could be? Only thing that stands out is that they are a different file size while being the same resolution.</p>\n",
    "tags" : [ "java", "user-interface", "testing", "karate", "image-comparison" ],
    "owner" : {
      "account_id" : 43186607,
      "reputation" : 23,
      "user_id" : 31124361,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/tCO9Nfey.jpg?s=256",
      "display_name" : "neilrcassidy",
      "link" : "https://stackoverflow.com/users/31124361/neilrcassidy"
    },
    "is_answered" : false,
    "view_count" : 40,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1760105750,
    "creation_date" : 1756993290,
    "link" : "https://stackoverflow.com/questions/79755790/karate-image-comparison-ignore-antialiasing-causing-index-out-of-bounds-exceptio",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140714690,
    "post_id" : 79755790,
    "body" : "sounds like a bug in the implementation. please consider submitting a pull request",
    "score" : 1,
    "owner" : {
      "account_id" : 48302,
      "reputation" : 58363,
      "user_id" : 143475,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/mCPBe.png?s=256",
      "display_name" : "Peter Thomas",
      "link" : "https://stackoverflow.com/users/143475/peter-thomas"
    },
    "creation_date" : 1756994489,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}