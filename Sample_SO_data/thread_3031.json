{
  "question" : {
    "question_id" : 79576743,
    "title" : "Authentication for email session in glassfish 4.1",
    "body" : "<p>I am forced to use glassfish 4.1 due to the project already in production. Have gotten the email session to load all the providers and resources successfully other than the 530 authentication required as per the debug console output :</p>\n<pre><code>Info:   DEBUG: JavaMail version 1.5.2\nInfo:   DEBUG: URL jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/angus-mail-2.0.3.jar!/META-INF/javamail.providers\nInfo:   DEBUG: successfully loaded resource: jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/angus-mail-2.0.3.jar!/META-INF/javamail.providers\nInfo:   DEBUG: URL jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/smtp-1.4.5.jar!/META-INF/javamail.providers\nInfo:   DEBUG: successfully loaded resource: jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/smtp-1.4.5.jar!/META-INF/javamail.providers\nInfo:   DEBUG: Tables of loaded providers\nInfo:   DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], org.eclipse.angus.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,org.eclipse.angus.mail.pop3.POP3SSLStore,Oracle], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], org.eclipse.angus.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,org.eclipse.angus.mail.pop3.POP3Store,Oracle]}\nInfo:   DEBUG: Providers Listed By Protocol: {smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], pop3=javax.mail.Provider[STORE,pop3,org.eclipse.angus.mail.pop3.POP3Store,Oracle], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], pop3s=javax.mail.Provider[STORE,pop3s,org.eclipse.angus.mail.pop3.POP3SSLStore,Oracle]}\nInfo:   DEBUG: URL jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/angus-mail-2.0.3.jar!/META-INF/javamail.address.map\nInfo:   DEBUG: successfully loaded resource: jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/angus-mail-2.0.3.jar!/META-INF/javamail.address.map\nInfo:   DEBUG: URL jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/smtp-1.4.5.jar!/META-INF/javamail.address.map\nInfo:   DEBUG: successfully loaded resource: jar:file:/C:/Users/Temujinp/Documents/NetbeansProjects/scavecgraph-platform/target/scavecgraph-platform-1.0/WEB-INF/lib/smtp-1.4.5.jar!/META-INF/javamail.address.map\nInfo:   530 authentication required\n</code></pre>\n<p>and my glassfish 4.1 email session is configured as such :\n<a href=\"https://i.sstatic.net/Qs62srDn.png\" rel=\"nofollow noreferrer\">glassfish 4.1 console email session configuration</a></p>\n<p>My code is in a servlet and is as follows :</p>\n<pre><code>import javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.URLName;\nimport javax.naming.InitialContext;\nimport javax.naming.NamingException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport java.util.Date;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\nimport java.io.IOException;\n\n/**\n *\n * @author Temujinp\n */\n@WebServlet(name = &quot;EmailSessionServlet&quot;, urlPatterns = {&quot;/EmailSessionServlet&quot;})\npublic class EmailSessionServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        sendEmail(&quot;scavecgraph@gmail.com&quot;, &quot;my subject&quot;, &quot;my body&quot;);\n    }\n\n    public void sendEmail(String to, String subject, String body) {\n        try {\n            PasswordAuthentication pa = new PasswordAuthentication(&quot;email@domain.net&quot;, &quot;password&quot;);\n            URLName urlName = new URLName(&quot;smtpout.secureserver.net&quot;);\n            InitialContext ic = new InitialContext();\n            String snName = &quot;mail/smtpSession&quot;;\n            Session session = (Session)ic.lookup(snName);\n            session.setPasswordAuthentication(urlName, pa);\n            session.setDebug(true);\n            \n            MimeMessage message = new MimeMessage(session);\n            try {\n                message.setFrom(new InternetAddress(&quot;info@scavecgraph.net&quot;));\n                InternetAddress[] address = {new InternetAddress(to)};\n                message.setRecipients(Message.RecipientType.TO, address);\n                message.setSubject(subject);\n                message.setSentDate(new Date());\n                message.setText(body);\n                Transport.send(message);\n            } catch (MessagingException ex) {\n                System.out.println(ex.getMessage());\n            }\n        } catch (NamingException ex) {\n            Logger.getLogger(EmailSessionServlet.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }        \n}\n</code></pre>\n<p>So I tried to specify a url and username with password in the configuration and java code. I do not know which is supposed to be used and need someone to explain to me why the java code one does not work. Or should I not use a session when a custom url, username and password is to be used. Any ideas.</p>\n<p>As per Patrycja Wegrzynowicz suggestion I added the email session config fields namely :</p>\n<pre><code>mail.smtp.auth : true\nmail.smtp.port : 587 \nmail.smtp.password : YourPassword\n</code></pre>\n<p>And it worked. The only question now is how do I monitor in the code that the email was sent successfully. Or is it just a fire and forget situation.\nMAY THANKS PATRYCJA, YOU SAVED MY BACON.</p>\n",
    "tags" : [ "java", "email", "glassfish-4.1" ],
    "owner" : {
      "account_id" : 32006332,
      "reputation" : 11,
      "user_id" : 29514573,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/993398429646767b4d87d685f08da442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "temujin",
      "link" : "https://stackoverflow.com/users/29514573/temujin"
    },
    "is_answered" : true,
    "view_count" : 46,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744807511,
    "creation_date" : 1744793238,
    "link" : "https://stackoverflow.com/questions/79576743/authentication-for-email-session-in-glassfish-4-1",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79576979,
    "question_id" : 79576743,
    "body" : "<p>You already have a session configured in GlassFish Admin Console. But, based on the screenshot, it's missing session properties. In your <code>Additional Properties</code> section, you need to configure:</p>\n<pre><code>mail.smtp.auth : true\nmail.smtp.port : 587 \nmail.smtp.password : YourPassword\n</code></pre>\n<p>Depending on your SMTP server, you may also need:</p>\n<ul>\n<li><code>mail-smtp-starttls-enable : true</code></li>\n<li>adjusting an SMTP port to a correct value (<code>587</code> is a default port for SMTP)</li>\n</ul>\n<p>If you have all your configuration in GlassFish Admin Console, then your code does NOT need to do any password setup manually. You only need to obtain a session:</p>\n<pre><code>Session session = (Session)ic.lookup(&quot;mail/smtpSession&quot;);\n// No setPasswordAuthentication needed\n</code></pre>\n<p>Here is the <a href=\"http://www.abinstance.com/blogpost?name=using-javamail-api-part-two-configuring-javamail-session-in-glassfish-server\" rel=\"nofollow noreferrer\">blog post</a> that explains such a  configuration in details.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16043894,
      "reputation" : 913,
      "user_id" : 11579604,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/z1aaG.png?s=256",
      "display_name" : "Patrycja Wegrzynowicz",
      "link" : "https://stackoverflow.com/users/11579604/patrycja-wegrzynowicz"
    },
    "creation_date" : 1744800089,
    "last_activity_date" : 1744800089,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140348831,
    "post_id" : 79576743,
    "body" : "Do not put a solution in your Question. Post your own Answer with a solution if the provided Answer is insufficient. And do not change your Question to ask another. If you have another issue, post another Question on Stack Overflow. If you do not understand how to use Stack Overflow, (a) study the Help section, and (b) look around and peruse existing Questions and Answers before posting.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346951,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1745000900,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140347213,
    "post_id" : 79576743,
    "body" : "Check the Javadoc of <a href=\"https://jakarta.ee/specifications/platform/10/apidocs/jakarta/mail/transport#send(jakarta.mail.Message)\" rel=\"nofollow noreferrer\">Transport.send</a>. The method throws a SendFailedException if the email was not sent to some recipients. The metjod sends the email directly to the SMTP server and will give you an exception if it fails.",
    "score" : 0,
    "owner" : {
      "account_id" : 411863,
      "reputation" : 7860,
      "user_id" : 784594,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/872bb9cfb80c71fe0f9f23f1c86958c4?s=256&d=identicon&r=PG",
      "display_name" : "Ondro Mih&#225;lyi",
      "link" : "https://stackoverflow.com/users/784594/ondro-mih%c3%a1lyi"
    },
    "creation_date" : 1744962140,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}