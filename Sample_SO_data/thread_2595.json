{
  "question" : {
    "question_id" : 79609924,
    "title" : "Filter negotiateSecurityFilter was not registered (disabled) - waffle - Spring boot",
    "body" : "<p><strong>Whitelabel Error Page</strong></p>\n<p><strong>This application has no explicit mapping for /error</strong></p>\n<p>I am trying to do a basic JSP project with spring boot with gradle.</p>\n<p>I downloaded a sample project, which works perfectly fine, but when I do the same changes on my existing working project, it does not load the landing page.</p>\n<p>I get this</p>\n<pre><code>Whitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n</code></pre>\n<p>Also I debug the sample project where it works and mine, in the</p>\n<pre><code> public void invokeAndHandle(ServletWebRequest webRequest, ModelAndViewContainer mavContainer, Object... providedArgs)  \n</code></pre>\n<p>method, the working one the webRequest contains the session and user</p>\n<pre><code>uri=/;client=0:0:0:0:0:0:0:1;session=0203525A1982FBB20DB79829EA8408AD;user=XX\\abcduser\n</code></pre>\n<p>but in my project, it only has the uri. In the request also I see principal in sample project, but not mine.</p>\n<p>Following are my classes</p>\n<pre><code>      @Configuration\n    public class WaffleSecurityConfig {\n\n    @Bean\n    public FilterRegistrationBean&lt;NegotiateSecurityFilter&gt; waffleFilter() {\n        FilterRegistrationBean&lt;NegotiateSecurityFilter&gt; registration = new FilterRegistrationBean&lt;&gt;();\n        registration.setFilter(new NegotiateSecurityFilter());    \n\n        return registration;\n    }\n\n---------------------------------\n        @RequestMapping(&quot;/&quot;)\n    public String home(HttpServletRequest request, Principal principal) {\n        System.out.println(&quot;&gt;&gt;&gt; Remote user: &quot; + request.getRemoteUser());\n        System.out.println(&quot;&gt;&gt;&gt; Principal: &quot; + (principal != null ? principal.getName() : &quot;null&quot;));\n        return &quot;index&quot;;\n    }\n\n--------------------\n    @SpringBootApplication\n    public class DemoApplicationRunner {\n        public static void main(String[] args) {\n            SpringApplication.run(DemoApplicationRunner.class, args);\n        }\n    }\n\n-----------------\n//application.properties\n\nlogging.config=classpath:log4jServlet.xml\nlogging.level.org.springframework = info\nlogging.level.org.eclipse.jetty = info\nspring.main.allow-circular-references=true\nspring.main.allow-bean-definition-overriding=true\n\nlogging.level.org.springframework.security=DEBUG\nlogging.level.com.github.waffle=DEBUG\n\nwaffle.filter.enabled=true\nwaffle.sso.enabled=true\n\nspring.mvc.view.prefix=/WEB-INF/jsp/\nspring.mvc.view.suffix=.jsp\nspring.mvc.static-path-pattern=/static/**\nspring.resources.static-locations=classpath:/static/\nspring.web.resources.static-locations=classpath:/static/,classpath:/META-INF/resources/,file:src/main/webapp/\nspring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration\n-----------------------\n//build.gradle\nplugins {\n    id 'application' // hack used to apply all the stuff from main build.gradle to this project\n    id 'org.springframework.boot' version &quot;${springBootVersion}&quot;\n    id 'java'\n}\n\nconfigurations {\n    implementation.exclude module: &quot;spring-boot-starter-tomcat&quot;\n    implementation.exclude module: &quot;spring-boot-starter-logging&quot;\n}\n\n\ndependencies {\n    implementation 'org.apache.logging.log4j:log4j-slf4j2-impl:2.19.0'\n    implementation platform(&quot;org.springframework.boot:spring-boot-dependencies:${springBootVersion}&quot;){\n\n        exclude group: &quot;com.microsoft.sqlserver&quot;, module: &quot;mssql-jdbc&quot;\n        exclude group: 'org.apache.logging.log4j', module: 'log4j-to-slf4j'\n    }\n\n    implementation group: &quot;javax.servlet&quot;, name: &quot;javax.servlet-api&quot;, version: &quot;4.0.1&quot;\n    implementation group: &quot;javax.servlet.jsp&quot;, name: &quot;javax.servlet.jsp-api&quot;, version: &quot;2.3.3&quot;\n    implementation('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'\n    }\n\n    runtimeOnly 'org.springframework.boot:spring-boot-starter-tomcat'\n\n    // Optional: For JSPs support\n    implementation 'org.apache.tomcat.embed:tomcat-embed-jasper'\n    implementation 'javax.servlet:jstl'\n\n    // existing dependencies...\n    implementation 'com.google.code.gson:gson:2.8.1'\n    implementation 'com.google.guava:guava:13.0.1'\n    implementation 'org.jfree:jfreechart:1.0.17'\n    implementation 'com.github.waffle:waffle-spring-boot-starter:3.0.0'\n}\n\nconfigurations.all {\n    exclude group: 'ch.qos.logback', module: 'logback-classic'\n    exclude group: 'ch.qos.logback', module: 'logback-core'\n    exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'\n}\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "jsp", "waffle" ],
    "owner" : {
      "account_id" : 10703126,
      "reputation" : 622,
      "user_id" : 7877771,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3bed9958030b113c6f6fabd56a979579?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "sachyy",
      "link" : "https://stackoverflow.com/users/7877771/sachyy"
    },
    "is_answered" : false,
    "view_count" : 66,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746807761,
    "creation_date" : 1746600563,
    "link" : "https://stackoverflow.com/questions/79609924/filter-negotiatesecurityfilter-was-not-registered-disabled-waffle-spring-b",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140410025,
    "post_id" : 79609924,
    "body" : "In my logs i got this  Filter negotiateSecurityFilter was not registered (disabled)  I thought this is the issue, but found out that it is due to this line  -- [ waffle.sso.enabled = true ] -- in application.properties.",
    "score" : 0,
    "owner" : {
      "account_id" : 10703126,
      "reputation" : 622,
      "user_id" : 7877771,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3bed9958030b113c6f6fabd56a979579?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "sachyy",
      "link" : "https://stackoverflow.com/users/7877771/sachyy"
    },
    "creation_date" : 1746773964,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}