{
  "question" : {
    "question_id" : 79689613,
    "title" : "Azure SQL Android Studio AssertionError: numMsgsRcvd:1 should be less than numMsgsSent:1",
    "body" : "<p>I'm trying to connect to my Azure SQL database via Android Studio, but keep getting an AssertionError while running the app. I'm using mssql-jdbc-12.10.1.jre11</p>\n<p>Server.java</p>\n<pre><code>    public static void Connect1() throws SQLException {\n        ResultSet resultSet = null;\n        try {\n            System.out.println(&quot;Connecting to the database&quot;);\n            Connection connection = DriverManager.getConnection(properties.getProperty(&quot;url&quot;), properties);\n            System.out.println(&quot;Database connection test: &quot; + connection.getCatalog());\n\n            System.out.println(&quot;Closing database connection&quot;);\n            connection.close();\n        }\n        catch(SQLException e){\n            e.printStackTrace();\n            System.out.println(&quot;Connection failed&quot;);\n        } catch (NetworkOnMainThreadException e){\n            e.printStackTrace();\n            System.out.println(&quot;Connection failed&quot;);\n        }catch (AssertionError e){\n            e.printStackTrace();\n            System.out.println(&quot;Connection failed&quot;);\n        }\n\n    }\n</code></pre>\n<p>I'm able to connect to the database via Apache NetBeans using the same connection code and jdbc library, so all of my connection variables are correct. I've also searched all over the internet for a solution but am unable to find any that work.</p>\n<p>AssertionError stack trace:</p>\n<pre><code>2025-07-03 19:36:32.627 19153-19175 System.err              com.example.azuretestjdbc            W  java.lang.AssertionError: numMsgsRcvd:1 should be less than numMsgsSent:1\n2025-07-03 19:36:32.627 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:6814)\n2025-07-03 19:36:32.627 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSReader.nextPacket(IOBuffer.java:6778)\n2025-07-03 19:36:32.627 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSReader.ensurePayload(IOBuffer.java:6750)\n2025-07-03 19:36:32.629 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSReader.readBytes(IOBuffer.java:7068)\n2025-07-03 19:36:32.630 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSChannel$SSLHandshakeInputStream.readInternal(IOBuffer.java:945)\n2025-07-03 19:36:32.632 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSChannel$SSLHandshakeInputStream.read(IOBuffer.java:935)\n2025-07-03 19:36:32.632 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSChannel$ProxyInputStream.readInternal(IOBuffer.java:1197)\n2025-07-03 19:36:32.633 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSChannel$ProxyInputStream.read(IOBuffer.java:1183)\n2025-07-03 19:36:32.633 19153-19175 System.err              com.example.azuretestjdbc            W      at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.readFromSocket(ConscryptEngineSocket.java:983)\n2025-07-03 19:36:32.633 19153-19175 System.err              com.example.azuretestjdbc            W      at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.processDataFromSocket(ConscryptEngineSocket.java:947)\n2025-07-03 19:36:32.633 19153-19175 System.err              com.example.azuretestjdbc            W      at com.android.org.conscrypt.ConscryptEngineSocket$SSLInputStream.-$$Nest$mprocessDataFromSocket(Unknown Source:0)\n2025-07-03 19:36:32.636 19153-19175 System.err              com.example.azuretestjdbc            W      at com.android.org.conscrypt.ConscryptEngineSocket.doHandshake(ConscryptEngineSocket.java:236)\n2025-07-03 19:36:32.638 19153-19175 System.err              com.example.azuretestjdbc            W      at com.android.org.conscrypt.ConscryptEngineSocket.startHandshake(ConscryptEngineSocket.java:218)\n2025-07-03 19:36:32.639 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.TDSChannel.enableSSL(IOBuffer.java:1843)\n2025-07-03 19:36:32.639 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3552)\n2025-07-03 19:36:32.639 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:3172)\n2025-07-03 19:36:32.640 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:3014)\n2025-07-03 19:36:32.640 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1836)\n2025-07-03 19:36:32.640 19153-19175 System.err              com.example.azuretestjdbc            W      at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1246)\n2025-07-03 19:36:32.643 19153-19175 System.err              com.example.azuretestjdbc            W      at java.sql.DriverManager.getConnection(DriverManager.java:580)\n2025-07-03 19:36:32.645 19153-19175 System.err              com.example.azuretestjdbc            W      at java.sql.DriverManager.getConnection(DriverManager.java:190)\n2025-07-03 19:36:32.646 19153-19175 System.err              com.example.azuretestjdbc            W      at com.example.azuretestjdbc.Server.Connect1(Server.java:58)\n2025-07-03 19:36:32.646 19153-19175 System.err              com.example.azuretestjdbc            W      at com.example.azuretestjdbc.MainActivity$2.run(MainActivity.java:67)\n2025-07-03 19:36:32.646 19153-19175 System.err              com.example.azuretestjdbc            W      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n2025-07-03 19:36:32.646 19153-19175 System.err              com.example.azuretestjdbc            W      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:644)\n2025-07-03 19:36:32.646 19153-19175 System.err              com.example.azuretestjdbc            W      at java.lang.Thread.run(Thread.java:1012)\n</code></pre>\n",
    "tags" : [ "java", "jdbc", "azure-sql-database", "sqlexception" ],
    "owner" : {
      "account_id" : 32166783,
      "reputation" : 1,
      "user_id" : 24964540,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ab8a04fe1357865e33164367180f8c95?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Lollipop Swamp",
      "link" : "https://stackoverflow.com/users/24964540/lollipop-swamp"
    },
    "is_answered" : false,
    "view_count" : 49,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1751594248,
    "creation_date" : 1751593951,
    "link" : "https://stackoverflow.com/questions/79689613/azure-sql-android-studio-assertionerror-nummsgsrcvd1-should-be-less-than-numms",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140565134,
    "post_id" : 79689613,
    "body" : "Microsoft jdbc drivers don&#39;t work well with android due to ssl code issues. There&#39;s a question about this every week. you need to either use old and busted jtds which might not work with azure, or even better, don&#39;t use jdbc direct from the phone, since you won&#39;t be able to secure it properly",
    "score" : 1,
    "owner" : {
      "account_id" : 17972905,
      "reputation" : 10131,
      "user_id" : 13061224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/GyOMS.jpg?s=256",
      "display_name" : "siggemannen",
      "link" : "https://stackoverflow.com/users/13061224/siggemannen"
    },
    "creation_date" : 1751636224,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}