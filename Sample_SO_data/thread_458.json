{
  "question" : {
    "question_id" : 79804122,
    "title" : "Configure Spring Context Using Arguments",
    "body" : "<p>What's the idiomatic way of deriving spring context beans from command line arguments ?</p>\n<p>I understand you can always parse the argument and call somewhat low lever APIs to create Beans before the context launch, but I am asking if there is a better way to handle this when building a Spring Boot Application + PicoCli</p>\n<p>something that looks like</p>\n<pre><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ConfigClass {\n\n    @Bean\n    //made up annotation for example purpose\n    @ConditionalOnArg(option = &quot;-p&quot;, value = &quot;p_value_1&quot;)\n    MyPArgService buildP() {\n\n        return new MyPArgService(&quot;p_value_1&quot;);\n\n    }\n}\n\n</code></pre>\n<p>The alternatives we have is either do your own proper parsing and context building programatically before the context launch or rely on <code>ApplicationArguments</code> from Spring to do this parsing, but in both cases it seems to be duplicate work and not fully taking advantage of the PicoCli integration</p>\n<p>Thanks in advance!\nAll ideas are welcome!</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "picocli" ],
    "owner" : {
      "account_id" : 7407857,
      "reputation" : 102,
      "user_id" : 5636231,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yuHZM.jpg?s=256",
      "display_name" : "Iqbal",
      "link" : "https://stackoverflow.com/users/5636231/iqbal"
    },
    "is_answered" : true,
    "view_count" : 103,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1762017312,
    "creation_date" : 1761763041,
    "link" : "https://stackoverflow.com/questions/79804122/configure-spring-context-using-arguments",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79804654,
    "question_id" : 79804122,
    "body" : "<p>What does the command line argument look like? If you do something like <code>-p=foo</code> you can just add an <code>@Value(&quot;p&quot;)</code> to your <code>buildP</code> method as a method argument and you will get the value injected.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126800,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1761820467,
    "last_activity_date" : 1761820467,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79804752,
    "question_id" : 79804122,
    "body" : "<p>Thanks, that's what I was missing, I thought @Value was exclusive to env vars and props, apparently Spring does inject command line args</p>\n<p>except, it looks like it works in this format</p>\n<p><code>-Dspring-boot.run.arguments=&quot;--p=foo&quot;</code></p>\n<p>with</p>\n<pre><code>@Value(&quot;${p}&quot;)\nString p;\n</code></pre>\n<p>Thanks again!</p>\n<p>This is much more straightforward</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7407857,
      "reputation" : 102,
      "user_id" : 5636231,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yuHZM.jpg?s=256",
      "display_name" : "Iqbal",
      "link" : "https://stackoverflow.com/users/5636231/iqbal"
    },
    "creation_date" : 1761826933,
    "last_activity_date" : 1762017312,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}