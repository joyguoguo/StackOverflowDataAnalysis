{
  "question" : {
    "question_id" : 79732615,
    "title" : "How to resolve dependencies for configuration &#39;:app:debugRuntimeClasspathCopy&#39;",
    "body" : "<p>I'm trying to sync my project in Android Studio.  I get these two errors:</p>\n<p>1.</p>\n<pre><code>Could not resolve all dependencies for configuration ':app:debugRuntimeClasspathCopy'.\nCannot select root node 'debugRuntimeClasspathCopy' as a variant. Configurations should not act as both a resolution root and a variant simultaneously. Be sure to mark configurations meant for resolution as canBeConsumed=false or use the 'resolvable(String)' configuration factory method to create them.\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>Could not resolve all dependencies for configuration ':app:debugRuntimeClasspathCopy'.\nCannot select root node 'debugRuntimeClasspathCopy' as a variant. Configurations should not act as both a resolution root and a variant simultaneously. Be sure to mark configurations meant for resolution as canBeConsumed=false or use the 'resolvable(String)' configuration factory method to create them.\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n&gt; Get more help at https://help.gradle.org.\n\n* Exception is:\ncom.intellij.openapi.externalSystem.model.ExternalSystemException: Could not resolve all dependencies for configuration ':app:debugRuntimeClasspathCopy'.\nCannot select root node 'debugRuntimeClasspathCopy' as a variant. Configurations should not act as both a resolution root and a variant simultaneously. Be sure to mark configurations meant for resolution as canBeConsumed=false or use the 'resolvable(String)' configuration factory method to create them.\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.executeAction(GradleModelFetchAction.java:228)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.lambda$doExecute$5(GradleModelFetchAction.java:116)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.lambda$runWithSpan$1(GradleOpenTelemetry.java:37)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.callWithSpan(GradleOpenTelemetry.java:55)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.callWithSpan(GradleOpenTelemetry.java:31)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.runWithSpan(GradleOpenTelemetry.java:36)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.doExecute(GradleModelFetchAction.java:115)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.lambda$execute$1(GradleModelFetchAction.java:94)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.callWithSpan(GradleOpenTelemetry.java:55)\n    at com.intellij.gradle.toolingExtension.impl.telemetry.GradleOpenTelemetry.callWithSpan(GradleOpenTelemetry.java:31)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.lambda$execute$2(GradleModelFetchAction.java:93)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.withOpenTelemetry(GradleModelFetchAction.java:291)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.lambda$execute$3(GradleModelFetchAction.java:92)\n    at com.intellij.gradle.toolingExtension.impl.util.GradleExecutorServiceUtil.withSingleThreadExecutor(GradleExecutorServiceUtil.java:18)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.execute(GradleModelFetchAction.java:91)\n    at com.intellij.gradle.toolingExtension.impl.modelAction.GradleModelFetchAction.execute(GradleModelFetchAction.java:34)\n    at org.gradle.tooling.internal.consumer.connection.InternalBuildActionAdapter.execute(InternalBuildActionAdapter.java:65)\n    at org.gradle.tooling.internal.provider.runner.AbstractClientProvidedBuildActionRunner$ActionAdapter.executeAction(AbstractClientProvidedBuildActionRunner.java:108)\n    at org.gradle.tooling.internal.provider.runner.AbstractClientProvidedBuildActionRunner$ActionAdapter.runAction(AbstractClientProvidedBuildActionRunner.java:96)\n    at \n\n\n....\n\n\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.lambda$execute$0(ForwardClientInput.java:40)\n    at org.gradle.internal.daemon.clientinput.ClientInputForwarder.forwardInput(ClientInputForwarder.java:80)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:64)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator.lambda$runCommand$0(DaemonStateCoordinator.java:321)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.AbstractManagedExecutor$1.run(AbstractManagedExecutor.java:47)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.base/java.lang.Thread.run(Unknown Source)\n\n\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 10.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nFor more on this, please refer to https://docs.gradle.org/9.0-milestone-1/userguide/command_line_interface.html#sec:command_line_warnings in the Gradle documentation.\n\nBUILD FAILED in 629ms\n</code></pre>\n<p>Closest post I could find on stackoverflow to my problem recommended I add this:</p>\n<pre><code>repositories{\n    mavenCentral()\n    maven {\n            url 'https://jitpack.io'\n        }\n}\n</code></pre>\n<p>This did not solve my problem.</p>\n<p>Gemini recommended adding this to the build.gradle file:</p>\n<pre><code>configurations.all {\n    if (it.name.contains('Classpath')) {\n        it.canBeConsumed = false\n    }\n}\n</code></pre>\n<p>I saw another post that said I should run a build and see all warnings.  It failed when I went to build it and it seemed to have a problem with minifyEnabled.  So I set minifyEnabled and shrinkResources to false and it built fine.  However I still have those same two errors when I sync.  Also, I think minify and shrinkResources are pretty important for size and security, so don't see that as a final solution.  Any other ideas?</p>\n",
    "tags" : [ "java", "android", "gradle", "ionic-framework", "capacitor" ],
    "owner" : {
      "account_id" : 8118267,
      "reputation" : 877,
      "user_id" : 6115999,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/494cb408065a3238988a031548d5c4d3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "filifunk",
      "link" : "https://stackoverflow.com/users/6115999/filifunk"
    },
    "is_answered" : true,
    "view_count" : 576,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1755799987,
    "creation_date" : 1754960317,
    "link" : "https://stackoverflow.com/questions/79732615/how-to-resolve-dependencies-for-configuration-appdebugruntimeclasspathcopy",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79742651,
    "question_id" : 79732615,
    "body" : "<p>I was hit with the same issue. I ended up doing -rm rf to the caches, the .gradle/ and the daemon. Next I downgraded my gradle version to 8.5: ./gradlew wrapper --gradle-version 8.5. It auto prompted me to use 9.0 on Android Studio and then it worked fine after that and built perfectly.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 29803545,
      "reputation" : 11,
      "user_id" : 22840779,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/82ade70032fc37ea3b2cb98e10b314a5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Akshat Misra",
      "link" : "https://stackoverflow.com/users/22840779/akshat-misra"
    },
    "creation_date" : 1755799987,
    "last_activity_date" : 1755799987,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140673020,
    "post_id" : 79732615,
    "body" : "I found that in my case I was opening the wrong project, and in opening the top-level android project for the app rather than the android project for the library I was interested in, everything imported successfully and I was able to see the source code of the libraries. Not sure if this is helpful for you.",
    "score" : 0,
    "owner" : {
      "account_id" : 980880,
      "reputation" : 6805,
      "user_id" : 1000626,
      "user_type" : "registered",
      "accept_rate" : 73,
      "profile_image" : "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=256&d=identicon&r=PG",
      "display_name" : "Chris Watts",
      "link" : "https://stackoverflow.com/users/1000626/chris-watts"
    },
    "creation_date" : 1755507918,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140667477,
    "post_id" : 79732615,
    "body" : "@filifunk what plugins are you using? is it happening on new project also?",
    "score" : 0,
    "owner" : {
      "account_id" : 7813562,
      "reputation" : 3441,
      "user_id" : 5909026,
      "user_type" : "registered",
      "accept_rate" : 45,
      "profile_image" : "https://lh6.googleusercontent.com/-VWT4S_cML3I/AAAAAAAAAAI/AAAAAAAADdw/OpPjHPOydG4/s256-rj/photo.jpg",
      "display_name" : "Najam Us Saqib",
      "link" : "https://stackoverflow.com/users/5909026/najam-us-saqib"
    },
    "creation_date" : 1755245746,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140660508,
    "post_id" : 79732615,
    "body" : "@ChrisWatts The build worked when I used the terminal inside Android Studio (./gradlew build --warning-mode=all ) and I disabled minify and shrinkresources.  But even with a complete build I still end up with that pesky Classpath error.",
    "score" : 0,
    "owner" : {
      "account_id" : 8118267,
      "reputation" : 877,
      "user_id" : 6115999,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/494cb408065a3238988a031548d5c4d3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "filifunk",
      "link" : "https://stackoverflow.com/users/6115999/filifunk"
    },
    "creation_date" : 1755010981,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140659849,
    "post_id" : 79732615,
    "body" : "I see you&#39;re using Ionic - I&#39;m having a similar issue today in setting up a React Native project with Android Studio. I believe it&#39;s to do with importing the complete dependencies/configuration from node_modules. Does your build work if you invoke gradle directly from the terminal, or is this only happening inside Android Studio?",
    "score" : 0,
    "owner" : {
      "account_id" : 980880,
      "reputation" : 6805,
      "user_id" : 1000626,
      "user_type" : "registered",
      "accept_rate" : 73,
      "profile_image" : "https://www.gravatar.com/avatar/15e1f36f8333463810b19b7e397ccd76?s=256&d=identicon&r=PG",
      "display_name" : "Chris Watts",
      "link" : "https://stackoverflow.com/users/1000626/chris-watts"
    },
    "creation_date" : 1754998065,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79742651" : [ {
      "comment_id" : 140712948,
      "post_id" : 79742651,
      "body" : "the actual fix was just this for me: ./gradlew wrapper --gradle-version 8.9",
      "score" : 0,
      "owner" : {
        "account_id" : 29803545,
        "reputation" : 11,
        "user_id" : 22840779,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/82ade70032fc37ea3b2cb98e10b314a5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Akshat Misra",
        "link" : "https://stackoverflow.com/users/22840779/akshat-misra"
      },
      "creation_date" : 1756929588,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}