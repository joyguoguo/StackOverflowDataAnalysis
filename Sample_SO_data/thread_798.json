{
  "question" : {
    "question_id" : 79771200,
    "title" : "How can I change view by window.setAttributes smoothly?",
    "body" : "<p>I am developing an Android project by java. First, I change the Activity to half of the screen. Then when user click a button, the activity will become full screen by animation. When the animation begin, the view will shake up an down(namely the view will first move up then move down).The code is shown as follow.</p>\n<pre><code>public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        AutoRouter.inject(this);\n\n        Window window = getWindow();\n        WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);\n        DisplayMetrics dm = new DisplayMetrics();\n        wm.getDefaultDisplay().getMetrics(dm);\n        WindowManager.LayoutParams para = window.getAttributes();\n        para.height = (int) halfScreenHeight;\n        para.width = (int) (dm.widthPixels);\n        para.gravity = Gravity.BOTTOM;\n        window.setAttributes(para);\n        window.setDimAmount(0.70f);\n\n        window.getDecorView().setOutlineProvider(new ViewOutlineProvider() {\n            @Override\n            public void getOutline(View view, Outline outline) {\n                outline.setRoundRect(0, 0, view.getWidth(), view.getHeight(), 30);\n            }\n        });\n\n        window.getDecorView().setClipToOutline(true);\n        \n        overridePendingTransition(R.anim.slide_in_bottom_ai_dialog, R.anim.slide_out_bottom_ai_dialog);\n    }\n\n//when user click,it will call this function\npublic void changeDialogHeight(int mode, double height) {\n        Window window = getWindow();\n        WindowManager.LayoutParams para = window.getAttributes();\n        int currentHeight = para.height;\n        int targetHeight = 0;\n        int screenHeight = Utils.getScreenHeight(BaseApplication.get());\n        switch (mode) {\n            case 0:\n                targetHeight = screenHeight;\n                break;\n            case 1:\n                targetHeight = screenHeight / 2;\n                break;\n            case 2:\n                if(height &gt; Utils.getScreenHeight(mContext) || height &lt; 50){\n                    height = Utils.getScreenHeight(mContext) / 2;\n                }\n                targetHeight = (int)height;\n                break;\n        }\n        \n        ValueAnimator valueAnimator = ValueAnimator.ofInt(currentHeight, targetHeight);\n        \n        valueAnimator.setDuration(400);\n        \n        valueAnimator.setInterpolator(new LinearInterpolator());\n\n        valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\n            @Override\n            public void onAnimationUpdate(ValueAnimator animation) {\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        int animatedValue = (int) animation.getAnimatedValue();\n                        \n                        para.height = animatedValue;\n                        window.setAttributes(para);\n                    }\n                });\n            }\n        });\n\n        // 启动动画\n        valueAnimator.start();\n    }\n</code></pre>\n<p>How can I change my code to make then animation smoothly?</p>\n",
    "tags" : [ "java", "android", "animation" ],
    "owner" : {
      "account_id" : 44033100,
      "reputation" : 3,
      "user_id" : 31540102,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dae4e427640b0d2cbb3ac6e4c1482bf7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user31540102",
      "link" : "https://stackoverflow.com/users/31540102/user31540102"
    },
    "is_answered" : false,
    "view_count" : 86,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1758534969,
    "creation_date" : 1758510860,
    "link" : "https://stackoverflow.com/questions/79771200/how-can-i-change-view-by-window-setattributes-smoothly",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}