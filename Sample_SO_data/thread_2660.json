{
  "question" : {
    "question_id" : 79605854,
    "title" : "Find relative date and time based distance between 2 dates using java date-time",
    "body" : "<p>How do I get the duration between 2 dates spread across multiple units (years, months, days, hours, minutes, and seconds) while taking into account the time of the start and end dates.</p>\n<p>Additionally, it needs to be a <em>relative</em> difference, taking the number of days per month into account. The <em>Period</em> class does this, but it ignores the date and time for the length between 2 dates.</p>\n<p>So if it's March 2nd 1pm and the end date is May 3rd 2pm, I want <em>2 Months, 1 day, and 1 hour left</em> (except including minutes and seconds).</p>\n<h2>Months Problem</h2>\n<p>I want to be able to get the months remaining until the end date by paying attention to the days in the month. I don't want '<em>2 months remaining</em> to mean 60 days left, I want it to mean months in the roman calendar.</p>\n<p><a href=\"https://i.sstatic.net/yTB8US0w.png\" rel=\"nofollow noreferrer\">Number of days per month in the Roman calendar</a></p>\n<p>or</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Month#Roman_calendar\" rel=\"nofollow noreferrer\">Source Wikipedia Table</a></p>\n<p>For example, if it's January 2nd and someone says that an event is in <em>2 months</em>, you're gonna think '<em>oh, it's March 2nd!'</em> No ones gonna think '<em>it's in 60 days</em>', because that's March 3rd!</p>\n<h1>What I tried</h1>\n<p>As far as I know, every way to calculate the time between 2 dates only finds it in one unit except the <code>Period</code> and <code>Duration</code> class. The problem is, <code>Period</code> calculates it as dates (years, months days), meaning it does take into account the days of a month, but it completely disregards the start and end <em>time</em> of the events, and <code>Duration</code> only gives me time (days, hours, minutes, seconds) while ignoring the days of each month (because you can't get the months).</p>\n<p>Here's a code example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.*;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoUnit;\n\npublic class Countdown {\n\n    private DateTimeFormatter dateTimeFormat;\n\n    private ZonedDateTime currentZDT;\n    private ZonedDateTime endZDT;\n\n    public Countdown() {\n\n        dateTimeFormat = DateTimeFormatter.ofPattern(&quot;EEEE, LLLL dd, yyyy, 'at' hh:mm a&quot;);\n\n        setDateTimes(2025, Month.JUNE, 5, 2, 36); // June 5th, 2025, at 2:36 AM\n\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;Current date/time:&quot;, currentZDT.format(dateTimeFormat)));\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;End event date/time:&quot;, endZDT.format(dateTimeFormat)));\n\n        System.out.println();\n\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;Elapsed Time using ChronoUnit:&quot;, remainingDays1()));\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;Elapsed Time using: ZonedDateTime.until():&quot;, remainingDays2()));\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;Elapsed Time using the Duration Class:&quot;, remainingTimeDuration()));\n        System.out.println(String.format(&quot;%-45s%s&quot;, &quot;Elapsed Time using the Period Class:&quot;, remainingTimePeriod()));\n\n    }\n\n    private void setDateTimes(int endYear, Month endMonth, int endDOM /* Day of Month */,\n            int endHour /* In 24-hour format */, int endMinute) {\n\n        ZoneId currentZone = ZoneId.systemDefault();\n\n        currentZDT = Instant.now().atZone(currentZone);\n\n        LocalDate endDate = LocalDate.of(endYear, endMonth, endDOM);\n        LocalTime endTime = LocalTime.of(endHour, endMinute);\n\n        endZDT = ZonedDateTime.of(endDate, endTime, currentZone);\n\n    }\n\n    // This returns part of what I need\n    public String remainingTimePeriod() {\n\n        /*\n         * Period DOES take into account the differences in the number of days in a\n         * month\n         * BUT it disregards the time of the current and end ZDT\n         */\n        Period per = Period.between(LocalDate.from(currentZDT), LocalDate.from(endZDT));\n\n        int days = per.getDays();\n        int months = per.getMonths();\n        int years = per.getYears();\n\n        return String.format(&quot;%d year(s), %d month(s), and %d day(s)&quot;, years, months, days);\n\n    }\n\n    // This returns the other part\n    public String remainingTimeDuration() {\n\n        //Duration doesn't even have a way to get months\n        Duration dur = Duration.between(currentZDT, endZDT);\n\n        long days = dur.toDaysPart();\n        long hours = dur.toHoursPart();\n        long minutes = dur.toMinutesPart();\n        long seconds = dur.toSecondsPart();\n\n        return String.format(&quot;%02d day(s), %02d hour(s), %02d minute(s), and %02d second(s) left&quot;, days, hours, minutes,\n                seconds);\n\n    }\n\n    /*\n     * These return the total time left in 1 unit (it cant be spread across multiple)\n     */\n\n    public long remainingDays1() {\n        return ChronoUnit.DAYS.between(currentZDT, endZDT);\n    }\n\n    public long remainingDays2() {\n        return currentZDT.until(endZDT, ChronoUnit.DAYS);\n    }\n\n}\n</code></pre>\n<p>This is the output when running it twice, pay attention to the <em>end time</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>Current date/time:                           Sunday, May 04, 2025, at 02:37 AM\nEnd event date/time:                         Thursday, June 05, 2025, at 02:38 AM\n\nElapsed Time using ChronoUnit:               32\nElapsed Time using: ZonedDateTime.until():   32\nElapsed Time using the Duration Class:       32 day(s), 00 hour(s), 00 minute(s), and 31 second(s) left\nElapsed Time using the Period Class:         0 year(s), 1 month(s), and 1 day(s)\n</code></pre>\n<p>and</p>\n<pre class=\"lang-none prettyprint-override\"><code>Current date/time:                           Sunday, May 04, 2025, at 02:37 AM\nEnd event date/time:                         Thursday, June 05, 2025, at 02:36 AM\n\nElapsed Time using ChronoUnit:               31\nElapsed Time using: ZonedDateTime.until():   31\nElapsed Time using the Duration Class:       31 day(s), 23 hour(s), 58 minute(s), and 21 second(s) left\nElapsed Time using the Period Class:         0 year(s), 1 month(s), and 1 day(s)\n</code></pre>\n<p>Every method of finding the distance changed across the examples except for <code>Period</code>, because it only calculates the difference between 2 dates in days, ignoring time since you have to convert the <code>ZonedDateTime</code> to a <code>LocalDate</code> object.</p>\n",
    "tags" : [ "java", "datetime" ],
    "owner" : {
      "account_id" : 29019850,
      "reputation" : 21,
      "user_id" : 29967066,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0k6otbbC.jpg?s=256",
      "display_name" : "Rohan Prabhala",
      "link" : "https://stackoverflow.com/users/29967066/rohan-prabhala"
    },
    "is_answered" : false,
    "view_count" : 100,
    "closed_date" : 1746383919,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748949102,
    "creation_date" : 1746378156,
    "link" : "https://stackoverflow.com/questions/79605854/find-relative-date-and-time-based-distance-between-2-dates-using-java-date-time",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140398866,
    "post_id" : 79605854,
    "body" : "ok thanks @Anonymous I&#39;ll try to incorporate aspects of your solution",
    "score" : 0,
    "owner" : {
      "account_id" : 29019850,
      "reputation" : 21,
      "user_id" : 29967066,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0k6otbbC.jpg?s=256",
      "display_name" : "Rohan Prabhala",
      "link" : "https://stackoverflow.com/users/29967066/rohan-prabhala"
    },
    "creation_date" : 1746506814,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140396290,
    "post_id" : 79605854,
    "body" : "- It’s not perfect, but we think it’s less confusing. For display we are converting long durations back to strings like <code>3y 4m 22d</code> using the same estimated durations. Our users don’t need the full precision.",
    "score" : 1,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1746436844,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140396289,
    "post_id" : 79605854,
    "body" : "In one system of ours we have a lot of time spans from a few seconds up to 7 years, many of them entered as part of the configuration and some calculated as age or remaining time to expiration. We found it confusing that when comparing 30 days to 1 month, sometimes the former is longer, sometimes the latter. So we settled on using <code>Duration</code> only. We are converting years, months and days from the configuration using the estimated durations provided by <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/temporal/ChronoUnit.html#getDuration()\" rel=\"nofollow noreferrer\"><code>ChronoUnit.getDuration()</code></a>. -",
    "score" : 1,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1746436828,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140396286,
    "post_id" : 79605854,
    "body" : "Unwise, it depends on what you need to obtain.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87400,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1746436813,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395769,
    "post_id" : 79605854,
    "body" : "@BasilBourque well I don&#39;t insist on it since I&#39;m open to alternative methods. Also, could you explain why mixing them would be unwise?",
    "score" : 1,
    "owner" : {
      "account_id" : 29019850,
      "reputation" : 21,
      "user_id" : 29967066,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0k6otbbC.jpg?s=256",
      "display_name" : "Rohan Prabhala",
      "link" : "https://stackoverflow.com/users/29967066/rohan-prabhala"
    },
    "creation_date" : 1746417579,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395635,
    "post_id" : 79605854,
    "body" : "If you insist on mixing calendar span (<code>Period</code>) with clock span (<code>Duration</code>), look at the <code>PeriodDuration</code> class in the <i>ThreeTen-Extra</i> library. But usually such mixing is unwise.",
    "score" : 2,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346951,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1746412159,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395126,
    "post_id" : 79605854,
    "body" : "I strongly recommend fully reading <a href=\"https://errorprone.info/docs/time\" rel=\"nofollow noreferrer\">errorprone.info/docs/time</a> to understand how dates and times work.  It&#39;s not going to answer your question, it&#39;s going to help you understand what you&#39;re asking more clearly.",
    "score" : 2,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1746386637,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}