{
  "question" : {
    "question_id" : 79736775,
    "title" : "JsonNode not reading correct Node value",
    "body" : "<p>I am trying to read XML into a JSONNode so I can pull values from it. For some reason the .get() function is reading the wrong Node. This is the XML I am trying to read:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;order&gt;\n    &lt;order_ID&gt;Test123456789&lt;/transaction_id&gt;\n    &lt;original_inception_date&gt;2024-09-25&lt;/original_inception_date&gt;\n    &lt;transaction&gt;\n        &lt;effective_date&gt;2023-12-31 00:00:00.000&lt;/effective_date&gt;\n        &lt;transaction_id&gt;1a123456a1234a12345678ab12a1a12a&lt;/transaction_id&gt;\n        &lt;product&gt;123&lt;/product&gt;\n        &lt;company&gt;1&lt;/company&gt;\n        &lt;lob&gt;LIFE&lt;/lob&gt;\n    &lt;/transaction&gt;\n&lt;/order&gt;\n</code></pre>\n<p>And this is the Java code I am using to read it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>XmlMapper xmlMapper = new XmlMapper();\nJsonNode node = xmlMapper.readTree(xmlString);\n\nfor(JsonNode forNode : node.get(&quot;transaction&quot;)) {\n    policyID                    = node.get(&quot;order_id&quot;).asText();\n    originalInceptionDate       = node.path(&quot;original_inception_date&quot;).asText();\n    transactionEffectiveDate    = forNode.get(&quot;effective_date&quot;).asText();\n    policyTransactionID         = forNode.get(&quot;transaction_id&quot;).asText();;\n    product                     = forNode.get(&quot;product&quot;).asText();\n    company                     = forNode.get(&quot;company&quot;).asText();\n    lob                         = forNode.get(&quot;lob&quot;).asText();\n\n}\n</code></pre>\n<p>Now for some reason when it gets to the for loop, instead of putting the transaction node and all its sub nodes into forNode, it instead just pulls the effective_date value and that's it.  This causes an error to occur when it tries to read one of the SubNodes in the forNode.  I am not sure why this is happening.</p>\n",
    "tags" : [ "java", "for-loop", "jsonnode" ],
    "owner" : {
      "account_id" : 5066858,
      "reputation" : 127,
      "user_id" : 4066764,
      "user_type" : "registered",
      "accept_rate" : 44,
      "profile_image" : "https://www.gravatar.com/avatar/e02f89d638f6ae54e7c6f55805075c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Karson074",
      "link" : "https://stackoverflow.com/users/4066764/karson074"
    },
    "is_answered" : true,
    "view_count" : 59,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1755351125,
    "creation_date" : 1755285894,
    "link" : "https://stackoverflow.com/questions/79736775/jsonnode-not-reading-correct-node-value",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79736792,
    "question_id" : 79736775,
    "body" : "<p>Your &lt;transaction&gt; is being parsed as an object, not an array, so your for loop iterates over its fields (effective_date, etc.) instead of over transactions. Check isArray() first and wrap it into an array if needed:</p>\n<pre><code>JsonNode txNode = root.path(&quot;transaction&quot;);\nif (!txNode.isArray()) {\n    txNode = new ObjectMapper().createArrayNode().add(txNode);\n}\n\nfor (JsonNode txn : txNode) {\n    System.out.println(txn.path(&quot;product&quot;).asText());\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "user_type" : "does_not_exist",
      "display_name" : "user31262317"
    },
    "creation_date" : 1755287113,
    "last_activity_date" : 1755287113,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140669952,
    "post_id" : 79736775,
    "body" : "@andrewJames The missing <code>&lt;&#47;order&gt;</code> was due to incorrect code formatting by the OP.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1755351175,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140669099,
    "post_id" : 79736775,
    "body" : "(Also, The Java &quot;order_id&quot; does not match the XML &lt;order_ID&gt;). You should show us the full error message and stack trace. If you have only one <code>&lt;transaction&gt;</code> in your file, then you cannot iterate it the way you are trying. See the <a href=\"https://stackoverflow.com/a/79736792/12567365\">answer</a> provided by @pavelpijevschi.",
    "score" : 0,
    "owner" : {
      "account_id" : 12743722,
      "reputation" : 22621,
      "user_id" : 12567365,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zNR3x.png?s=256",
      "display_name" : "andrewJames",
      "link" : "https://stackoverflow.com/users/12567365/andrewjames"
    },
    "creation_date" : 1755296172,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140669051,
    "post_id" : 79736775,
    "body" : "The XML in the question is invalid: <code>&lt;order_ID&gt;Test123456789&lt;&#47;transaction_id&gt;</code>. Also, there is no closing <code>&lt;&#47;order&gt;</code> tag. The question is also missing info about the specific libraries (and dependencies) being used - but I assume it&#39;s Jackson. Perhaps you can create a cleaned-up and runnable <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?",
    "score" : 0,
    "owner" : {
      "account_id" : 12743722,
      "reputation" : 22621,
      "user_id" : 12567365,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/zNR3x.png?s=256",
      "display_name" : "andrewJames",
      "link" : "https://stackoverflow.com/users/12567365/andrewjames"
    },
    "creation_date" : 1755294285,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}