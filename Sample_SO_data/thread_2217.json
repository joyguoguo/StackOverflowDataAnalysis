{
  "question" : {
    "question_id" : 79637626,
    "title" : "Dockerized Spring Boot application not responding to requests, while non-Dockerized version works",
    "body" : "<p><strong>Problem:</strong>\nI have Dockerized a Spring Boot application, but when I run the container, it doesn't respond to any HTTP requests. The non-Dockerized version works fine. How should this issue be handled?</p>\n<p>Steps Taken:</p>\n<p><strong>Built the Docker image:</strong></p>\n<pre><code>docker build -t rezos/tourmappers-rezg-thirdparty-activity-service:2.1.2 .\n</code></pre>\n<p><strong>Ran the container with port mapping (8380:8080):</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>docker run -d \\\n  --name tourmappers-rezg-thirdparty-activity-service \\\n  -p 8380:8080 \\\n  rezos/tourmappers-rezg-thirdparty-activity-service:2.1.2\n</code></pre>\n<p>Verified the container is running:</p>\n<pre><code>docker ps\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>CONTAINER ID   IMAGE                                                           COMMAND                  CREATED         STATUS         PORTS                                         NAMES\n9c29bd8e24d6   rezos/tourmappers-rezg-thirdparty-activity-service:2.1.2   &quot;java -jar rezg-thir…&quot;   7 minutes ago   Up 7 minutes   0.0.0.0:8380-&gt;8080/tcp, [::]:8380-&gt;8080/tcp   tourmappers-rezg-thirdparty-activity-service\n</code></pre>\n<p><strong>Output as Image:</strong>\n<a href=\"https://i.sstatic.net/OlK5PA61.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/OlK5PA61.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Logs:</strong>\nLogs only indicate the standard message printed when starting that application</p>\n<pre><code>$ docker logs 9c29bd8e24d6\n\n  .   __          _            __ _ _\n /\\\\ / _'_ _ _ _()_ _  _ _ \\ \\ \\ \\\n( ( )\\_ | '_ | '| | ' \\/ _` | \\ \\ \\ \\\n \\\\/  _)| |)| | | | | || (| |  ) ) ) )\n  '  |_| .|| ||| |\\_, | / / / /\n =========||==============|_/=////\n :: Spring Boot ::                (v2.7.4)\n\n09:42:48.853 [main] INFO  r.t.a.s.RezgThirdpartyActivityServiceApplication - Starting RezgThirdpartyActivityServiceApplication using Java 11.0.8 on 9c29bd8e24d6 with PID 1 (/rezg-thirdparty-activity-service.jar started by root in /)\n09:42:48.858 [main] INFO  r.t.a.s.RezgThirdpartyActivityServiceApplication - No active profile set, falling back to 1 default profile: &quot;default&quot;\n09:42:50.554 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8080 (http)\n09:42:50.574 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]\n09:42:50.574 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/9.0.65]\n09:42:50.688 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext\n09:42:50.688 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1721 ms\n09:42:51.808 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 3 endpoint(s) beneath base path '/actuator'\n09:42:51.862 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8080 (http) with context path ''\n09:42:51.885 [main] INFO  r.t.a.s.RezgThirdpartyActivityServiceApplication - Started RezgThirdpartyActivityServiceApplication in 3.841 seconds (JVM running for 4.417)\ngehan@gehan-Inspiron-3580:~$\n</code></pre>\n<p><strong>Dockerfile</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>FROM openjdk:11.0.8-jre-slim\n\nEXPOSE 8080\n\nCOPY build/libs/rezg-thirdparty-activity-service-0.0.1-SNAPSHOT.jar rezg-thirdparty-activity-service.jar\n\nCMD [&quot;java&quot;, &quot;-jar&quot;, &quot;rezg-thirdparty-activity-service.jar&quot;]\n</code></pre>\n<p><strong>Issue:</strong></p>\n<p>Requests to <code>http://localhost:8380/api/hotel/travelclick/process</code> time out.\nThe same request works on the non-Dockerized Spring Boot app (running on the same machine).</p>\n<p><strong>Questions:</strong></p>\n<ul>\n<li><p>How can I debug why the Dockerized app isn’t responding?</p>\n</li>\n<li><p>Are there common misconfigurations in Dockerfiles or Spring Boot that could cause this issue?</p>\n</li>\n</ul>\n<p><strong>Update:</strong>\nAnother point I missed is that the same application is deployed on the Staging server and the Production server, but it functions fine on these servers.</p>\n<p>The commands used to deploy to the production and staging servers are similar to the steps followed in the development environment.</p>\n<p><strong>Production Environment</strong></p>\n<pre><code>sudo docker login -u &quot;****&quot; -p &quot;******&quot; docker.io\nsudo docker run -p 8380:8080 --name tourmappers-rezg-thirdparty-activity-service  -v /var/log/rezg/sys/:/var/log/rezg/sys/ -v /var/log/rezg/app/:/var/log/rezg/app/ --memory=&quot;256m&quot;  rezos/tourmappers-rezg-thirdparty-activity-service:2.1.2-prod\n            tail -f /dev/null\n</code></pre>\n<p><strong>Staging Environment</strong></p>\n<pre><code>sudo docker login -u &quot;****&quot; -p &quot;******&quot; docker.io\nsudo docker run -p 8380:8080 --name tourmappers-rezg-thirdparty-activity-service  -v /var/log/rezg/sys/:/var/log/rezg/sys/ -v /var/log/rezg/app/:/var/log/rezg/app/ --memory=&quot;256m&quot;  rezos/tourmappers-rezg-thirdparty-activity-service:{{version}}-{{stage}}\ntail -f /dev/null\n</code></pre>\n<p>I am trying to verify a bug in the Developer environment, which follows somewhat similar steps as mentioned above. Could it be that some configurations are off in the developer environment? Anything specific to compare in these environments that may help identify the issue?</p>\n",
    "tags" : [ "java", "spring-boot", "docker", "rest" ],
    "owner" : {
      "account_id" : 1171454,
      "reputation" : 456,
      "user_id" : 1148552,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/yQ58B.jpg?s=256",
      "display_name" : "Gehan",
      "link" : "https://stackoverflow.com/users/1148552/gehan"
    },
    "is_answered" : true,
    "view_count" : 133,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1748910032,
    "creation_date" : 1748173769,
    "link" : "https://stackoverflow.com/questions/79637626/dockerized-spring-boot-application-not-responding-to-requests-while-non-dockeri",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79637933,
    "question_id" : 79637626,
    "body" : "<p>If your request is not even reaching the logs inside the container, the reason might be:<br />\nBy default, Spring Boot binds to <code>localhost</code> (<code>127.0.0.1</code>), which means it only accepts connections from within the container itself. As a result, even though you've mapped port <code>8380</code> on your host to port <code>8080</code> in the container, external requests (including those from your host machine) won't reach the application.</p>\n<p>You can try following:</p>\n<ul>\n<li>Configure Spring Boot to listen to all ports by adding following in <code>application.yml</code>:</li>\n</ul>\n<pre><code>server:\n  address: 0.0.0.0\n</code></pre>\n<ul>\n<li>pass as a command line argument:</li>\n</ul>\n<pre><code>docker run -d \\\n  --name tourmappers-rezg-thirdparty-activity-service \\\n  -p 8380:8080 \\\n  rezos/tourmappers-rezg-thirdparty-activity-service:2.1.2 \\\n  --server.address=0.0.0.0\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16924563,
      "reputation" : 19,
      "user_id" : 12240526,
      "user_type" : "registered",
      "profile_image" : "https://graph.facebook.com/1375713585928438/picture?type=large",
      "display_name" : "Kashif Ali",
      "link" : "https://stackoverflow.com/users/12240526/kashif-ali"
    },
    "creation_date" : 1748194998,
    "last_activity_date" : 1748194998,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140457270,
    "post_id" : 79637626,
    "body" : "I did check the container Logs, but nothing was printed there related to the request made. So I assume it was not reaching the application. Logs only indicate the standard message printed when starting that application.",
    "score" : 0,
    "owner" : {
      "account_id" : 1171454,
      "reputation" : 456,
      "user_id" : 1148552,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/yQ58B.jpg?s=256",
      "display_name" : "Gehan",
      "link" : "https://stackoverflow.com/users/1148552/gehan"
    },
    "creation_date" : 1748185695,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140457224,
    "post_id" : 79637626,
    "body" : "Is your logging configured to log to console or to a log file only? If it is to console, check the docker logs, I think the command should be <code>docker logs &lt;container&gt;</code>, there should be a command to go <i>into</i> the container to check the logs if it is to a log file, but I dont recall. In the mean time, you could just set up a volume so that instead of logging inside the container, it logs to the host",
    "score" : 2,
    "owner" : {
      "account_id" : 21724606,
      "reputation" : 1431,
      "user_id" : 16034206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/MRBdT.jpg?s=256",
      "display_name" : "pebble unit",
      "link" : "https://stackoverflow.com/users/16034206/pebble-unit"
    },
    "creation_date" : 1748183468,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140457131,
    "post_id" : 79637626,
    "body" : "Don&#39;t use images for the text output, copy the text and use <a href=\"https://stackoverflow.com/editing-help#code\">code block</a> format.",
    "score" : 1,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1748179274,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79637933" : [ {
      "comment_id" : 140498176,
      "post_id" : 79637933,
      "body" : "@Gehan are you running your docker in WSL2? That could be an issue, cuz I recall I had to enable some sort of firewall rule to enable traffic to be routed to the WSL2",
      "score" : 1,
      "owner" : {
        "account_id" : 21724606,
        "reputation" : 1431,
        "user_id" : 16034206,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/MRBdT.jpg?s=256",
        "display_name" : "pebble unit",
        "link" : "https://stackoverflow.com/users/16034206/pebble-unit"
      },
      "creation_date" : 1749440061,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140481861,
      "post_id" : 79637933,
      "body" : "@ pebble unit, The issue I am facing is when I try to access Dockerize in a local development environment. Similar commands are used in setting up the same application in Staging and production environments (mentioned in updates), and these applications work fine.",
      "score" : 0,
      "owner" : {
        "account_id" : 1171454,
        "reputation" : 456,
        "user_id" : 1148552,
        "user_type" : "registered",
        "accept_rate" : 67,
        "profile_image" : "https://i.sstatic.net/yQ58B.jpg?s=256",
        "display_name" : "Gehan",
        "link" : "https://stackoverflow.com/users/1148552/gehan"
      },
      "creation_date" : 1748910805,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140481847,
      "post_id" : 79637933,
      "body" : "@Kashif Ali, Thanks for your suggestion. I tried the above suggestion, but that too did not give the desired results. I have added how the same application is deployed in staging and production using very similar commands as used in the developer environment, but it works fine in these live environments.",
      "score" : 0,
      "owner" : {
        "account_id" : 1171454,
        "reputation" : 456,
        "user_id" : 1148552,
        "user_type" : "registered",
        "accept_rate" : 67,
        "profile_image" : "https://i.sstatic.net/yQ58B.jpg?s=256",
        "display_name" : "Gehan",
        "link" : "https://stackoverflow.com/users/1148552/gehan"
      },
      "creation_date" : 1748910407,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140458144,
      "post_id" : 79637933,
      "body" : "@Gehan, have you ever tried making a request from another machine (i.e. your local) to this specific dev server, or have you only been making requests from the same machine to itself?",
      "score" : 1,
      "owner" : {
        "account_id" : 21724606,
        "reputation" : 1431,
        "user_id" : 16034206,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/MRBdT.jpg?s=256",
        "display_name" : "pebble unit",
        "link" : "https://stackoverflow.com/users/16034206/pebble-unit"
      },
      "creation_date" : 1748224946,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}