{
  "question" : {
    "question_id" : 79556190,
    "title" : "Replace null values in csv when using Feeder with gatling",
    "body" : "<p>I am using <code>FeederBuilder&lt;String&gt;</code> to create a feeder for performance tests with gatling. The csv I'm using contains empty values. The performance tests errors out when it encounters those empty values. Therefore, I want to replace the empty values with null.</p>\n<p>I believe I use gatling's <a href=\"https://docs.gatling.io/reference/script/core/session/feeders/#transform\" rel=\"nofollow noreferrer\">transform function</a> to accomplish this, but I can't seem to get it right. I've tried the code below</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static FeederBuilder&lt;String&gt; appIdFeed =\n            csv(&quot;data.csv&quot;).transform((key, value) -&gt; \n                value.isEmpty() ? null : value\n            );\n</code></pre>\n<p>But that seems to make the entire feeder null: <code>Feeder csv(data.csv) is now empty</code></p>\n<p>I've also been trying to use maps and hashmaps, but I haven't been able to get that to work properly.</p>\n<p>Any ideas?</p>\n",
    "tags" : [ "java", "gatling" ],
    "owner" : {
      "account_id" : 28109666,
      "reputation" : 11,
      "user_id" : 21477638,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxZGZysjiOBiw6BicJHHhV1nB424dYmGVVvE1win=k-s256",
      "display_name" : "nijj67",
      "link" : "https://stackoverflow.com/users/21477638/nijj67"
    },
    "is_answered" : false,
    "view_count" : 84,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1744900801,
    "creation_date" : 1743798321,
    "link" : "https://stackoverflow.com/questions/79556190/replace-null-values-in-csv-when-using-feeder-with-gatling",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79556281,
    "question_id" : 79556190,
    "body" : "<p>Issue with your code:</p>\n<pre><code>value.isEmpty() ? null : value\n</code></pre>\n<ul>\n<li><p>You're telling Gatling to set the value to null</p>\n</li>\n<li><p>Gatling then removes that key entirely from the map</p>\n</li>\n<li><p>Result: missing keys â†’ simulation fails if your scenario expects them</p>\n</li>\n</ul>\n<p>You have two options depending on your desired behavior:</p>\n<p><strong>Option 1: Replace empty strings with a constant (e.g., &quot;N/A&quot;)</strong></p>\n<pre><code>FeederBuilder&lt;String&gt; appIdFeed = \n    csv(&quot;data.csv&quot;).transform((key, value) -&gt; value.isEmpty() ? &quot;N/A&quot; : value);\n</code></pre>\n<p><strong>Option 2: Replace empty strings with an actual null, but handle it safely in your scenario</strong></p>\n<p>If your test logic supports nullable values and you still want null, you can do something like:</p>\n<pre><code>FeederBuilder&lt;Object&gt; appIdFeed =\n    csv(&quot;data.csv&quot;).map(row -&gt; {\n        Map&lt;String, Object&gt; updated = new HashMap&lt;&gt;();\n        row.forEach((k, v) -&gt; updated.put(k, v.isEmpty() ? null : v));\n        return updated;\n    });\n</code></pre>\n<p>Just make sure your scenario handles null safely:</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1743802386,
    "last_activity_date" : 1743802386,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79579510,
    "question_id" : 79556190,
    "body" : "<blockquote>\n<p>But that seems to make the entire feeder null: <code>Feeder csv(data.csv) is now empty</code></p>\n</blockquote>\n<p>No, this statement is wrong. Your feeder ran empty because you're trying to pull more records than it contains and you're using the default <code>queue</code> strategy. Please check the documentation: <a href=\"https://docs.gatling.io/reference/script/core/session/feeders/#strategies\" rel=\"nofollow noreferrer\">https://docs.gatling.io/reference/script/core/session/feeders/#strategies</a></p>\n<p>Please note that Gatling EL will complain about <code>null</code> values. The workaround is to use <code>jsonStringify</code> , eg <code>#{foo.jsonStringify()}</code>.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6852429,
      "reputation" : 6743,
      "user_id" : 5269205,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ac7c0eb201acceb9416d7d2c5774cd18?s=256&d=identicon&r=PG",
      "display_name" : "St&#233;phane LANDELLE",
      "link" : "https://stackoverflow.com/users/5269205/st%c3%a9phane-landelle"
    },
    "creation_date" : 1744900801,
    "last_activity_date" : 1744900801,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}