{
  "question" : {
    "question_id" : 79651455,
    "title" : "How to handle NoSuchFileException while saving images in to mySQL with SpringBoot",
    "body" : "<p>I have just started studying Spring Boot. When I tried saving an image using Swagger UI, I got a NoSuchFileException. Can anyone tell me what I might be doing wrong or missing?</p>\n<p>Entity:</p>\n<pre><code>@Lob\n@Basic(fetch = FetchType.LAZY)\n@Column(name = &quot;book_cover&quot;)\nprivate byte[] bookCover;\n</code></pre>\n<p>Service:</p>\n<pre><code>public BookInfo addBook(BookInfo bookInfo, MultipartFile bookCover) throws IOException {\n\n    if (bookInfo.getBookName() == null || bookInfo.getBookName().isEmpty()\n    || bookInfo.getAuthorName() == null || bookInfo.getAuthorName().isEmpty()\n    || bookInfo.getBookDescription() == null || bookInfo.getBookDescription().isEmpty()\n    || bookInfo.getRentPrice() == null || bookInfo.getRentPrice() &lt; 0) {\n        throw new BadRequestException(&quot;Invalid book information.&quot;);\n    }\n\n\n    bookInfo.setBookCover(bookCover.getBytes());\n\n    bookInfoRepository.save(bookInfo);\n\n    return bookInfo;\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@PostMapping(value = &quot;/addBookInfo&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\npublic ResponseEntity&lt;BookInfo&gt; addBook(@ModelAttribute BookInfo bookInfo,\n                                        @RequestParam(&quot;bookCover&quot;) MultipartFile bookCover) throws IOException {\n        BookInfo savedBookInfo = bookInfoService.addBook(bookInfo, bookCover);\n        return new ResponseEntity&lt;&gt;(savedBookInfo, HttpStatus.CREATED);\n}\n</code></pre>\n<p>I have tried searching for information online and modifying my code, but none of the solutions have worked. I would really appreciate it if anyone could help me.&quot;</p>\n",
    "tags" : [ "java", "spring-boot", "jpa" ],
    "owner" : {
      "account_id" : 39092215,
      "reputation" : 11,
      "user_id" : 29103164,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/82fa7a3580252d37d84e16862d3ed712?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Đạt Phạm",
      "link" : "https://stackoverflow.com/users/29103164/%c4%90%e1%ba%a1t-ph%e1%ba%a1m"
    },
    "is_answered" : false,
    "view_count" : 60,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1750620056,
    "creation_date" : 1748962165,
    "link" : "https://stackoverflow.com/questions/79651455/how-to-handle-nosuchfileexception-while-saving-images-in-to-mysql-with-springboo",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79675383,
    "question_id" : 79651455,
    "body" : "<p>If you're doing this for a personal project, it's fine.</p>\n<p>I tried to recreate your sample case locally, as there was not detailed trail of error.</p>\n<p>In parameters, you've used MultipartFile type, which is correct, however, use @RequestPart, instead of @RequestParam.</p>\n<p>Even though, you can use ResponseEntity&lt;BookInfo&gt;, But it won't make sense in your output, unless it returns a &quot;view&quot;. So, if you're building a Rest API, then go for ResponseEntity&lt;String&gt; as a return type and return some message.</p>\n<p>If you're using Postgres, you won't have problem in choosing a correct datatype. Yet, if it's MySQL, you'll need to go for either MEDIUMBLOB or LONGBLOB, though it's not so much efficient, in production, but for a personal project, it's fine.</p>\n<pre><code>@Entity\n@Table(name = &quot;IMAGE&quot;)\npublic class Image {\n\n    @Id\n    @Column(name = &quot;ID&quot;)\n    private Long id;\n    @Column(name = &quot;NAME&quot;)\n    private String name;\n    @Lob\n    @Column(name = &quot;DATA&quot;)\n    private byte[] data;\n\n//  Getters and Setters\n\n}\n</code></pre>\n<p>I've used an Image object, instead of BookInfo. and in controller, I've used same addBook() method.</p>\n<pre><code>    @Autowired\n    ImageService imageService;\n\n    @PostMapping(value = &quot;/addImage&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\n    public ResponseEntity&lt;Image&gt; addBook(@ModelAttribute Image bookInfo,\n            @RequestPart(&quot;image&quot;) MultipartFile bookCover) throws Exception {\n        Image savedImage = imageService.addBook(bookInfo, bookCover);\n        System.out.println(&quot;Uploaded successfully&quot;);\n        return new ResponseEntity&lt;&gt;(savedImage, HttpStatus.CREATED);\n    }\n</code></pre>\n<p>Don't forget to mark your classes with appropriate stereo type annotations like @Controller or @Service etc.</p>\n<p>And lastly, one problem you might face is when you make it live and want to replicate the image data... [But that's the other story... ]</p>\n<p>If you want a sample request format in Postman checkout the Screenshot below.\n<a href=\"https://i.sstatic.net/Wy1eJIwX.png\" rel=\"nofollow noreferrer\">Screenshot Postman</a></p>\n<p>In a real business product, Developers use a combination of cloud's file storage service with the media's location in the form of a link. [You can check that out after your work is done.]</p>\n<p>Check out below article for the detailed breakdown for @RequestPart.\n<a href=\"https://www.baeldung.com/sprint-boot-multipart-requests\" rel=\"nofollow noreferrer\">Link for the use case that you've mentioned</a></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 39955006,
      "reputation" : 1,
      "user_id" : 29535366,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/AJmN0bV8.jpg?s=256",
      "display_name" : "Saurabh Ram",
      "link" : "https://stackoverflow.com/users/29535366/saurabh-ram"
    },
    "creation_date" : 1750619299,
    "last_activity_date" : 1750620056,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140484139,
    "post_id" : 79651455,
    "body" : "Also, an advice since you are starting. In general it is a <b>BAD</b> idea to save files into the database. There are maybe a handful reasons that would be ok but many many that is not ok. Here is a good discussion about it: <a href=\"https://softwareengineering.stackexchange.com/questions/150669/is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database\" title=\"is it a bad practice to store large files 10 mb in a database\">softwareengineering.stackexchange.com/questions/150669/&hellip;</a>",
    "score" : 2,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1748967706,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140483904,
    "post_id" : 79651455,
    "body" : "Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> then <a href=\"https://stackoverflow.com/posts/79651455/edit\">edit</a> and improve your question.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1748963531,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140483843,
    "post_id" : 79651455,
    "body" : "Hello, and welcome to Stackoverflow! Please post the exception, including its stacktrace.",
    "score" : 2,
    "owner" : {
      "account_id" : 30223964,
      "reputation" : 252,
      "user_id" : 23162960,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2451acfac254a6fc75757ecf89d75f9a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jannik S.",
      "link" : "https://stackoverflow.com/users/23162960/jannik-s"
    },
    "creation_date" : 1748962565,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}