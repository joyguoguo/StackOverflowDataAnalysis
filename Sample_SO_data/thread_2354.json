{
  "question" : {
    "question_id" : 79626008,
    "title" : "ignore newline in lookahead",
    "body" : "<p>I know there's a lot of questions on this, but so far haven't found one that works.</p>\n<p>For these strings, I want to grab everything between <code>foo</code> and <code>bar</code>, so both of these I want to return <code>between</code>:</p>\n<pre><code>foo between bar\nfoo between \nbar\n</code></pre>\n<p>My current effort is <code>(?&lt;=foo)(.*)(?=\\n|\\b)bar</code>, but it's only matching the first one.  What am I doing wrong?</p>\n<p><a href=\"https://regex101.com/r/hccbUh/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/hccbUh/1</a></p>\n",
    "tags" : [ "java", "regex" ],
    "owner" : {
      "account_id" : 3267339,
      "reputation" : 8893,
      "user_id" : 2751573,
      "user_type" : "registered",
      "accept_rate" : 52,
      "profile_image" : "https://i.sstatic.net/GsKBw.jpg?s=256",
      "display_name" : "Andrew",
      "link" : "https://stackoverflow.com/users/2751573/andrew"
    },
    "is_answered" : true,
    "view_count" : 117,
    "closed_date" : 1747592740,
    "answer_count" : 4,
    "score" : 1,
    "last_activity_date" : 1747560331,
    "creation_date" : 1747435123,
    "link" : "https://stackoverflow.com/questions/79626008/ignore-newline-in-lookahead",
    "closed_reason" : "Needs details or clarity"
  },
  "answers" : [ {
    "answer_id" : 79626342,
    "question_id" : 79626008,
    "body" : "<p>I would have suggested a simple solution of  grouping like <code>foo(.*?)bar</code> where in the 1st group you get your desired content between foo and bar.</p>\n<p>But as you only want to match the inside content so you may try the following:</p>\n<p><code>(?&lt;=foo)((?!bar|foo).)*?(?=bar)</code></p>\n<p><a href=\"https://regex101.com/r/hccbUh/2\" rel=\"nofollow noreferrer\">Explanation</a>:</p>\n<ul>\n<li><p>Positive Lookbehind <code>(?&lt;=</code><strong><code>foo)</code></strong> assert that the regex  matches <code>foo</code></p>\n</li>\n<li><p><code>((?!bar|foo).)*?</code>  where <strong><code>*?</code></strong> matches the previous token between <strong>zero</strong> and <strong>unlimited</strong> times</p>\n<p>Negative Lookahead <code>(?!</code><strong><code>bar|foo)</code></strong> assert that the regex  does not match 1st Alternative <code>bar</code> or 2nd Alternative <code>foo</code><br />\nIt also ensures that you dont have any <code>foo</code> in between <code>foo</code> and <code>bar</code>.</p>\n</li>\n<li><p>Positive Lookahead <code>(?=</code><strong><code>bar)</code></strong> assert that the regex  matches <code>bar</code></p>\n<p>Also don't forget to use <strong>s</strong> modifier: Single line. Dot matches newline characters</p>\n</li>\n</ul>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 335222,
      "reputation" : 10544,
      "user_id" : 761132,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://i.sstatic.net/dD7EK.jpg?s=256",
      "display_name" : "Mustofa Rizwan",
      "link" : "https://stackoverflow.com/users/761132/mustofa-rizwan"
    },
    "creation_date" : 1747471585,
    "last_activity_date" : 1747473507,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79626982,
    "question_id" : 79626008,
    "body" : "<p>Given this <code>(?&lt;=foo)(.*)(?=\\n|\\b)bar</code> regex.<br />\nIt will not match <code>foo stuff \\n bar</code>  It will only match\n<code>foo stuff bar</code> because <code>.*</code> cannot match newline here, which must be consumed by the regex in order to match.</p>\n<p>The assertion <code>(?=\\n|\\b)</code> does not consume any characters.</p>\n<p>Note that this assertion <code>(?=\\b)</code> is optimized by the engine to be just <code>\\b</code> at compile time.</p>\n<p>The regex can be modified to this <code>(?&lt;=foo)(.*)(?:\\n|\\b)bar</code>\nor even this <code>(?&lt;=foo)(.*)\\n?\\bbar</code> and it would match both.</p>\n<p><a href=\"https://regex101.com/r/IAQgB5/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/IAQgB5/1</a></p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 268704,
      "reputation" : 3643,
      "user_id" : 15577665,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/22b015407c4f216f37fb10bccb8debaf?s=256&d=identicon&r=PG",
      "display_name" : "sln",
      "link" : "https://stackoverflow.com/users/15577665/sln"
    },
    "creation_date" : 1747515331,
    "last_activity_date" : 1747515726,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79627073,
    "question_id" : 79626008,
    "body" : "<p>Because newline is a whitespace character, this works:</p>\n<pre><code>(?&lt;=foo )(.*?)(?=\\s+bar)\n</code></pre>\n<p>See <a href=\"https://rubular.com/r/nbmfO9vrjU6fBx\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<p>It also does not include the leading and trailing white space around &quot;between&quot;, which your specification indicates should be the case.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 93689,
      "reputation" : 427434,
      "user_id" : 256196,
      "user_type" : "moderator",
      "accept_rate" : 77,
      "profile_image" : "https://www.gravatar.com/avatar/d84b558fd67be10d5a718fb94231909d?s=256&d=identicon&r=PG",
      "display_name" : "Bohemian",
      "link" : "https://stackoverflow.com/users/256196/bohemian"
    },
    "creation_date" : 1747527734,
    "last_activity_date" : 1747553877,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79627301,
    "question_id" : 79626008,
    "body" : "<p>You could also turn on single line mode which would make <code>.</code> match newline character.</p>\n<p>But then you would need to make <code>.*</code> non greedy and use simplified regex:</p>\n<pre><code>(?&lt;=foo)(.*?)bar\n</code></pre>\n<p>References:</p>\n<ul>\n<li><a href=\"https://www.rexegg.com/regex-quantifiers.php\" rel=\"nofollow noreferrer\">Regex Quantifier Tutorial: Greedy, Lazy, Possessive</a></li>\n<li><a href=\"https://www.rexegg.com/regex-modifiers.php\" rel=\"nofollow noreferrer\">Regex Modifiers—Turning them On</a> and <a href=\"https://www.rexegg.com/regex-modifiers.php#dotall_origins\" rel=\"nofollow noreferrer\">Origins of DOTALL</a></li>\n</ul>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9606741,
      "reputation" : 41260,
      "user_id" : 7132550,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://graph.facebook.com/1063981417044495/picture?type=large",
      "display_name" : "Michał Turczyn",
      "link" : "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"
    },
    "creation_date" : 1747560331,
    "last_activity_date" : 1747560331,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140434870,
    "post_id" : 79626008,
    "body" : "You could make it simpler with <code>Matcher m = Pattern.compile(&quot;(?ms)foo(.*?)bar&quot;).matcher(s);m.results().f&zwnj;&#8203;orEach(r -&gt; System.out.println(r.group(1)));</code> (where <code>s</code> contains the multiline string you posted)",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4243,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1747479576,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140434469,
    "post_id" : 79626008,
    "body" : "andnote that matching somethinglike that, one should actually get group <code>2</code> (the <code>.*?</code>) and not the full match",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17100,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1747461240,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140434118,
    "post_id" : 79626008,
    "body" : "actually, &quot;<i>everything between <code>foo</code> and <code>bar</code></i>&quot; would be <code>&quot;(?s)foo(.*)bar&quot;</code> (or <code>&quot;(?s)foo(.*?)bar&quot;</code> that is, between <code>foo</code> and first <code>bar</code>) - no need for look-behind or look-ahead at all, but needs <code>(?s)</code> (or DOTALL option) so <code>.</code> also matches a newline",
    "score" : 4,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1747437119,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140434113,
    "post_id" : 79626008,
    "body" : "Also I don&#39;t understand why you&#39;re using lookahead and lookbehind. If the goal is to capture <code>between</code> twice you can just say <code>foo (.*) \\n?bar</code> — that makes two matches where each match has one capture group which is <code>&quot;between&quot;</code> in both cases.",
    "score" : 0,
    "owner" : {
      "account_id" : 137658,
      "reputation" : 539994,
      "user_id" : 341994,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=256&d=identicon&r=PG",
      "display_name" : "matt",
      "link" : "https://stackoverflow.com/users/341994/matt"
    },
    "creation_date" : 1747436959,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140434107,
    "post_id" : 79626008,
    "body" : "Your first capture group is not <code>&quot;between&quot;</code>. It is <code>&quot; between &quot;</code> (i.e. the spaces on both sides are part of the capture group). Is that really what you want?",
    "score" : 0,
    "owner" : {
      "account_id" : 137658,
      "reputation" : 539994,
      "user_id" : 341994,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=256&d=identicon&r=PG",
      "display_name" : "matt",
      "link" : "https://stackoverflow.com/users/341994/matt"
    },
    "creation_date" : 1747436573,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140434105,
    "post_id" : 79626008,
    "body" : "the 2nd one does not match - the <code>(.*)</code> must be followed by <code>\\n|\\b</code> <b>and</b> at the same time match the <code>b</code> of <code>bar</code> - the lookahead is zero-width - the <code>bar</code> should be included in the look-ahead - also consider setting the DOTALL option (if needed)",
    "score" : 0,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1747436534,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79627301" : [ {
      "comment_id" : 140436765,
      "post_id" : 79627301,
      "body" : "Well, you are right. I guess this lookbehind could be dropped.",
      "score" : 0,
      "owner" : {
        "account_id" : 9606741,
        "reputation" : 41260,
        "user_id" : 7132550,
        "user_type" : "registered",
        "accept_rate" : 75,
        "profile_image" : "https://graph.facebook.com/1063981417044495/picture?type=large",
        "display_name" : "Michał Turczyn",
        "link" : "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"
      },
      "creation_date" : 1747570598,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140436692,
      "post_id" : 79627301,
      "body" : "@user85421 to preserve OP requirement",
      "score" : 0,
      "owner" : {
        "account_id" : 9606741,
        "reputation" : 41260,
        "user_id" : 7132550,
        "user_type" : "registered",
        "accept_rate" : 75,
        "profile_image" : "https://graph.facebook.com/1063981417044495/picture?type=large",
        "display_name" : "Michał Turczyn",
        "link" : "https://stackoverflow.com/users/7132550/micha%c5%82-turczyn"
      },
      "creation_date" : 1747567368,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140436603,
      "post_id" : 79627301,
      "body" : "why the lookbehind?",
      "score" : 1,
      "owner" : {
        "account_id" : 31180,
        "reputation" : 29752,
        "user_id" : 85421,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
        "display_name" : "user85421",
        "link" : "https://stackoverflow.com/users/85421/user85421"
      },
      "creation_date" : 1747562856,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}