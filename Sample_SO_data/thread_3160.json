{
  "question" : {
    "question_id" : 79568205,
    "title" : "Google AppEngine Error &quot;The API call search.IndexDocument() required more quota than is available&quot;",
    "body" : "<p>A few hours ago, indexing documents on AppEngine search started failing. Been working for years.</p>\n<p>The following error occurs when saving a single document:</p>\n<pre><code>Caused by: com.google.appengine.api.search.PutException: The API call search.IndexDocument() required more quota than is available.\n\n    at com.google.appengine.api.search.IndexImpl$3.wrap(IndexImpl.java:335)\n\n    at com.google.appengine.api.search.IndexImpl$3.wrap(IndexImpl.java:314)\n\n    at com.google.appengine.api.utils.FutureWrapper.wrapAndCache(FutureWrapper.java:74)\n\n    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:115)\n\n    at com.google.appengine.api.search.FutureHelper.getInternal(FutureHelper.java:88)\n\n    at com.google.appengine.api.search.FutureHelper.quietGet(FutureHelper.java:47)\n\n    at com.google.appengine.api.search.IndexImpl.put(IndexImpl.java:499)\n\n    ... 76 more\n</code></pre>\n<p>I have checked the quotas page, and no quota seems to have been exceeded (<a href=\"https://i.sstatic.net/EDDEzguZ.png\" rel=\"nofollow noreferrer\">screenshot attached</a>). Also billing is enabled and settled.</p>\n<p>Any ideas on what happened? Thank you.</p>\n",
    "tags" : [ "java", "google-app-engine", "quota", "gae-search" ],
    "owner" : {
      "account_id" : 41335217,
      "reputation" : 1,
      "user_id" : 30241050,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0689198477da88887ee66a9579c14b67?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arnold PM",
      "link" : "https://stackoverflow.com/users/30241050/arnold-pm"
    },
    "is_answered" : false,
    "view_count" : 107,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1744985391,
    "creation_date" : 1744355269,
    "link" : "https://stackoverflow.com/questions/79568205/google-appengine-error-the-api-call-search-indexdocument-required-more-quota",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79581204,
    "question_id" : 79568205,
    "body" : "<p>It turns out it was no fault of our code, non-reproducible, some bad luck.</p>\n<p>Index-level quotas for a couple of indexes were reset to 0GB. It is important to note that quota for an index is by default 10GB, and it is not possible to for a user to set it to 0GB.</p>\n<p>Google Cloud support was helpful. After an investigation by Product Engineering Team, the explanation was that &quot;during a recent upgrade of our quota infrastructure, there was a transient error that may have temporarily reset your quota bucket.&quot;.</p>\n<p>If this happens to you, writes on the index are suddenly and effectively disabled. Quota increase request take days to be processed. No workaround. Therefore, your best bet may be to create a new index, copy the documents over to the new index and begin using the new index.</p>\n<p>After your request for quota increase has been granted, you may re-use the index. However, we noticed possible signs of data corruption, so it might be safer to delete all documents, delete the index, and start the index anew if need be.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 41335217,
      "reputation" : 1,
      "user_id" : 30241050,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0689198477da88887ee66a9579c14b67?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arnold PM",
      "link" : "https://stackoverflow.com/users/30241050/arnold-pm"
    },
    "creation_date" : 1744985391,
    "last_activity_date" : 1744985391,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140328801,
    "post_id" : 79568205,
    "body" : "Please provide enough code so others can better understand or reproduce the problem.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1744499749,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}