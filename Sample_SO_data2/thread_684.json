{
  "question" : {
    "question_id" : 79786529,
    "title" : "Remove signature and add picture of signature instead",
    "body" : "<p>I need to remove digital signatures from a PDF, but &quot;print&quot; the signature to the content beforehand (like print to &quot;Microsoft PDF Printer&quot; - print all Metadata and Signatures). In the resulting PDF, the signature is part of the content as a picture.</p>\n<p>Programmatically, my first attempt was to use PDFBox 2.0.</p>\n<p>Add a PDAnnotationRubberStamp with the information from the PDAnnotationWidget/PDAnnotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// [...]\nList&lt;PDAnnotation&gt; list1 = pDPage.getAnnotations();\nfor (PDAnnotation pDAnnotation : list1) {\n  if([check if the annotation is the signature field]) {\n    PDAnnotationRubberStamp pDAnnotationRubberStamp = new PDAnnotationRubberStamp();\n    pDAnnotationRubberStamp.setAnnotationName(pDAnnotationWidget.getAnnotationName());\n    pDAnnotationRubberStamp.setPage(pDPage);\n    pDAnnotationRubberStamp.setRectangle(pDAnnotationWidget.getRectangle());\n    pDAnnotationRubberStamp.setAppearance(pDAnnotationWidget.getAppearance());\n    pDAnnotationRubberStamp.setReadOnly(true);\n    list1.add(pDAnnotationRubberStamp);\n  }\n  list1.remove(pDAnnotation);\n}\n</code></pre>\n<p>This is working fine. But I need to get rid of the stamp as well and use a picture or something similar as the stamp is removed during processing in the Editorial System.</p>\n<p>How can I &quot;transform/convert&quot; the signature/RubberStamp to a picture and add to the PDF content?</p>\n",
    "tags" : [ "java", "pdf", "pdfbox" ],
    "owner" : {
      "account_id" : 44254830,
      "reputation" : 1,
      "user_id" : 31658380,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34c11a3ea24138b6535deb13f2697995?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andreas Radakovits",
      "link" : "https://stackoverflow.com/users/31658380/andreas-radakovits"
    },
    "is_answered" : false,
    "view_count" : 74,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1760084943,
    "creation_date" : 1760019646,
    "link" : "https://stackoverflow.com/questions/79786529/remove-signature-and-add-picture-of-signature-instead",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140800120,
    "post_id" : 79786529,
    "body" : "Thank you for the clarification. Then I will need to implement it myself - somehow.",
    "score" : 1,
    "owner" : {
      "account_id" : 44254830,
      "reputation" : 1,
      "user_id" : 31658380,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34c11a3ea24138b6535deb13f2697995?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andreas Radakovits",
      "link" : "https://stackoverflow.com/users/31658380/andreas-radakovits"
    },
    "creation_date" : 1760630655,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140792979,
    "post_id" : 79786529,
    "body" : "As far as I know PDFBox does not contain any explicit annotation flattening feature. Making use of the form flattening code, though, should make it easy to implement such a feature. Form flattening essentially is flattening of the form widget annotations plus removal of the form definition.",
    "score" : 3,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97023,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1760362496,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140792746,
    "post_id" : 79786529,
    "body" : "Ah, now it&#180;s working! Thank you! I have added a stamp to the PDF which is not flattened. Is there a possibility to flatten stamps as well? Any hints?",
    "score" : 0,
    "owner" : {
      "account_id" : 44254830,
      "reputation" : 1,
      "user_id" : 31658380,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34c11a3ea24138b6535deb13f2697995?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andreas Radakovits",
      "link" : "https://stackoverflow.com/users/31658380/andreas-radakovits"
    },
    "creation_date" : 1760357179,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140792405,
    "post_id" : 79786529,
    "body" : "<i>&quot;Is it enough to <code>PDAcroForm pDAcroForm = pDDocument.getDocumentCatalog().getAcroForm(); pDAcroForm.flatten();</code> because that somehow doesn&#180;t work.&quot;</i> - I just tested it just like that (obviously loading the document before and saving it thereafter) with PDFBox 3.0.5, and it did work as expected, the signature field visualization was flattened into the PDF. If it doesn&#39;t work for you, can you share an example PDF to reproduce the issue with?",
    "score" : 1,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97023,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1760346014,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140792156,
    "post_id" : 79786529,
    "body" : "Thanks for the hint! Is it enough to <code>PDAcroForm pDAcroForm = pDDocument.getDocumentCatalog().getAcroForm(); pDAcroForm.flatten();</code> because that somehow doesn&#180;t work. Can you please explain how to use that function correctly? Thank you!",
    "score" : 0,
    "owner" : {
      "account_id" : 44254830,
      "reputation" : 1,
      "user_id" : 31658380,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34c11a3ea24138b6535deb13f2697995?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andreas Radakovits",
      "link" : "https://stackoverflow.com/users/31658380/andreas-radakovits"
    },
    "creation_date" : 1760335248,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140786547,
    "post_id" : 79786529,
    "body" : "You essentially want to flatten the PDF fields (including the signature field). Thus, have you tried the <code>flatten</code> overloads of the document <code>PDAcroForm</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 1916831,
      "reputation" : 97023,
      "user_id" : 1729265,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VMMeP.jpg?s=256",
      "display_name" : "mkl",
      "link" : "https://stackoverflow.com/users/1729265/mkl"
    },
    "creation_date" : 1760020606,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}