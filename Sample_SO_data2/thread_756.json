{
  "question" : {
    "question_id" : 79779012,
    "title" : "SecurityFilterChain bean from the library conflicts with managementSecurityFilterChain bean from ManagementWebSecurityAutoConfiguration",
    "body" : "<p>I have a library that specifies <code>WebSecurity</code> where I'm creating <code>SecurityFilterChain</code> bean. Actually, <code>ManagementWebSecurityAutoConfiguration</code> is annotated with <code>@ConditionalOnDefaultWebSecurity</code> and if my bean will be injected before <code>ManagementWebSecurityAutoConfiguration</code>, it will work properly. But my bean is also being created after <code>managementSecurityFilterChain</code> (through debug) and the app is failing to launch with &quot;A filter chain that matches any request has already been configured ...&quot;.</p>\n<p>My configuration permits some paths including <code>/v3/**, /actuator/**</code> and some others, and specify other <code>anyRequest().authenticated()</code></p>\n<p>I've tried to use these annotations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoConfiguration(before = [SecurityAutoConfiguration::class, ManagementWebSecurityAutoConfiguration::class])\n@EnableWebSecurity\n</code></pre>\n<p>or</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoConfigureBefore(SecurityAutoConfiguration::class, ManagementWebSecurityAutoConfiguration::class)\n</code></pre>\n<p>But nothing worked. What should I do to make my <code>SecurityFilterChain</code> bean to be created before <code>ManagementWebSecurityAutoConfiguration</code> and <code>managementSecurityFilterChain</code>.</p>\n",
    "tags" : [ "java", "spring", "kotlin", "spring-security" ],
    "owner" : {
      "account_id" : 35417428,
      "reputation" : 33,
      "user_id" : 27190977,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2cddfab268fcd38be53fce903fc1d4d9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Semyon Volokh",
      "link" : "https://stackoverflow.com/users/27190977/semyon-volokh"
    },
    "is_answered" : false,
    "view_count" : 91,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1765356520,
    "creation_date" : 1759229618,
    "link" : "https://stackoverflow.com/questions/79779012/securityfilterchain-bean-from-the-library-conflicts-with-managementsecurityfilte",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140895858,
    "post_id" : 79779012,
    "body" : "@M. Deinum Hi, I faced the same problem. Here is my question with a more detailed explanation <a href=\"https://stackoverflow.com/staging-ground/79842768\">stackoverflow.com/staging-ground/79842768</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 31367400,
      "reputation" : 1,
      "user_id" : 24185487,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ced53b186518de58be0ab613a3ee9311?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrey Antonov",
      "link" : "https://stackoverflow.com/users/24185487/andrey-antonov"
    },
    "creation_date" : 1765360470,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140895662,
    "post_id" : 79779012,
    "body" : "There is too little information here. <code>@AutoConfiguration</code> will only work on auto configuraiton not regular configuration classes. It also depends on what you are doing inside your <code>securityFilterChain</code> bean method only apply filtering or do more? So please add the f ull configuration not just random snippets.",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1765353648,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140781321,
    "post_id" : 79779012,
    "body" : "Can you try to exclude management security auto-configuration &amp; in application.yml and handle actuator security in your main configuration: SecurityConfig.filterChain",
    "score" : 0,
    "owner" : {
      "account_id" : 6097406,
      "reputation" : 316,
      "user_id" : 4757784,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-5jsrL-7bG8I/AAAAAAAAAAI/AAAAAAAAABM/JMj0SpS1J1o/s256-rj/photo.jpg",
      "display_name" : "Emre Zorlu",
      "link" : "https://stackoverflow.com/users/4757784/emre-zorlu"
    },
    "creation_date" : 1759829066,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}