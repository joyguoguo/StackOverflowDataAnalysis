{
  "question" : {
    "question_id" : 79560549,
    "title" : "Create a custom CRUD query timesout during API call",
    "body" : "<p>I am learning to build APIs with CrudRepository.</p>\n<p>I am trying to mimic this:</p>\n<p><a href=\"https://i.sstatic.net/xdsTIpiI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/xdsTIpiI.png\" alt=\"enter image description here\" /></a></p>\n<p>I have 3 controllers, services, repos, etc. Mood, Stress and User.</p>\n<p>Inside of my MoodRepository, I have the following:</p>\n<pre><code>@Repository\npublic interface MoodRepository extends CrudRepository&lt;Mood, Long&gt; {\n\n    @Query(&quot;&quot;&quot;\n        SELECT DISTINCT u.name, u.userName, m.mood, s.stress, m.date as MOOD_DATE, s.date AS STRESS_DATE FROM User u JOIN Mood m ON u.id = m.userId JOIN Stress s ON u.id = s.userId&quot;&quot;&quot;)\n        List&lt;BadDayResponse&gt; badDayReport();\n\n}\n</code></pre>\n<p>I am able to build and launch the app, but when I hit the API, I get the following in console:</p>\n<blockquote>\n<p>Hibernate: select distinct\nu1_0.name,u1_0.user_name,m1_0.mood,s1_0.stress,m1_0.date,s1_0.date\nfrom users u1_0 join moods m1_0 on u1_0.id=m1_0.user_id join stress\ns1_0 on u1_0.id=s1_0.user_id</p>\n</blockquote>\n<p>Postman never completes.</p>\n<p>Inside of my BadDayResponse class, my code looks like this:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\npublic class BadDayResponse implements Serializable {\n\n    private Date moodDate;\n    private Date stressDate;\n    private String name;\n    private String userName;\n    private int mood;\n    private int stress;\n\n\n    BadDayResponse(String name, String userName, int mood, int stress, Date moodDate, Date stressDate) {\n        this.name = name;\n        this.userName = userName;\n        this.mood = mood;\n        this.stress = stress;\n        this.moodDate = moodDate;\n        this.stressDate = stressDate;\n    }\n    \n}\n</code></pre>\n<p>I am trying to get the SQL code to run and put it into a list that I can then iterate on and complete my task.</p>\n<p>I am going to post pictures of the Entity classes.</p>\n<p><a href=\"https://i.sstatic.net/5lUQp0HO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/5lUQp0HO.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.sstatic.net/F0hEqn8V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/F0hEqn8V.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.sstatic.net/trE6APRy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/trE6APRy.png\" alt=\"enter image description here\" /></a></p>\n<p>What can I try next?</p>\n",
    "tags" : [ "java", "rest", "crud-repository" ],
    "owner" : {
      "account_id" : 11174172,
      "reputation" : 3106,
      "user_id" : 8200290,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/we0BN.png?s=256",
      "display_name" : "letsCode",
      "link" : "https://stackoverflow.com/users/8200290/letscode"
    },
    "is_answered" : false,
    "view_count" : 54,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752049111,
    "creation_date" : 1744050231,
    "link" : "https://stackoverflow.com/questions/79560549/create-a-custom-crud-query-timesout-during-api-call",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79695313,
    "question_id" : 79560549,
    "body" : "<p>I believe you cannot return other entities from a JPA repository than defined in its generic values. So you have to return <code>Mood</code> objects when using</p>\n<pre><code>extends CrudRepository&lt;Mood, Long&gt;\n</code></pre>\n<p>When that's fixed, it could be that the <code>@Query</code> annotation has to be replace <code>@NativeQuery</code> for Hibernate to know how to map the returned single values into a <code>BadDayResponse</code> object.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9272532,
      "reputation" : 1,
      "user_id" : 6886026,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/r2IaI.jpg?s=256",
      "display_name" : "nihaf",
      "link" : "https://stackoverflow.com/users/6886026/nihaf"
    },
    "creation_date" : 1752049111,
    "last_activity_date" : 1752049111,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}