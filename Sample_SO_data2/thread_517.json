{
  "question" : {
    "question_id" : 79791763,
    "title" : "How do I tell when the screen&#39;s refresh rate changes?",
    "body" : "<p>I have to repaint the screen every refresh, and matching with the native refresh rate makes smooth animations. It seems the easiest way to get the native refresh rate is via:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Component.getGraphicsConfiguration().getDevice().getDisplayMode().getRefreshRate()\n</code></pre>\n<p>but calling this every frame would tank the framerate of my application to 4. How do I detect if the native refresh rate were to change without doing that?</p>\n",
    "tags" : [ "java", "awt", "screen", "frame-rate" ],
    "owner" : {
      "account_id" : 17201994,
      "reputation" : 446,
      "user_id" : 29046053,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
      "display_name" : "Coarse Rosinflower",
      "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
    },
    "is_answered" : true,
    "view_count" : 149,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1761524075,
    "creation_date" : 1760587416,
    "link" : "https://stackoverflow.com/questions/79791763/how-do-i-tell-when-the-screens-refresh-rate-changes",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79792311,
    "question_id" : 79791763,
    "body" : "<h3>Edit:</h3>\n<p>This does not seem to work in all cases. Specificaly it doesn't work on Linux, at least for some tested cases. Nevertheless, it seems to work on Windows so far.</p>\n<hr />\n<h3>Initial answer:</h3>\n<p>There seems to be no capability of registering any listeners to the <code>GraphicsDevice</code> itself, but at least there exists a workaround (with its limitations)...</p>\n<p>The question requests for detecting changes only on the refresh rate, but one can instead listen for whole <code>GraphicsConfiguration</code> changes by registering a <code>PropertyChangeListener</code> for the property <code>&quot;graphicsConfiguration&quot;</code>, on any <code>java.awt.Component</code>. And then call\n<code>getDevice().getDisplayMode().getRefreshRate()</code> on the <code>GraphicsConfiguration</code> object.</p>\n<p>Example code for testing:</p>\n<pre><code>import java.awt.Component;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.SwingUtilities;\n\npublic class TestGraphicsConfigProp {\n    \n    private static void printDeviceFPS(final Component source) {\n        System.out.println(&quot;Refresh rate (from &quot; + source.getClass().getSimpleName() + &quot;): &quot; + source.getGraphicsConfiguration().getDevice().getDisplayMode().getRefreshRate());\n    }\n    \n    public static void main(final String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            \n            final JButton button = new JButton(&quot;Print current FPS from mode&quot;);\n            button.addActionListener(e -&gt; printDeviceFPS((Component) e.getSource()));\n            \n            final JFrame frame = new JFrame(&quot;Test screen FPS change&quot;);\n            frame.addPropertyChangeListener(&quot;graphicsConfiguration&quot;, e -&gt; printDeviceFPS((Component) e.getSource()));\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.add(button);\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n<p>You can click the button to manually print the current FPS setting. I would suggest to do that first and then try changing your screen's FPS setting from your system's settings (and you will see the <code>PropertyChangeEvent</code> being fired). This is tested on Windows OS.</p>\n<p><a href=\"https://stackoverflow.com/a/79570097/6746785\">Here</a> is the source of this idea (a duplicate?). Nevertheless I couldn't find the <code>&quot;graphicsConfiguration&quot;</code> property being mentioned anywhere on the documentation sadly, at least not in the amount of time I gave it. It works, but if such property does not exist in the documentation then it could be an internal implementation detail which cannot be relied upon. Eitherway that property can be found hardcoded in the source code <a href=\"https://github.com/openjdk/jdk/blob/jdk-25-ga/src/java.desktop/share/classes/java/awt/Component.java#L1157\" rel=\"nofollow noreferrer\">here</a> (or <a href=\"https://github.com/openjdk/jdk/blob/6c48f4ed707bf0b15f9b6098de30db8aae6fa40f/src/java.desktop/share/classes/java/awt/Component.java#L1157\" rel=\"nofollow noreferrer\">permalink</a>). Also, the assumption is that when the display mode of the device changes, so does the <code>GraphicsConfiguration</code>.</p>\n<p>You are not using any <code>Component</code> in the question, but the question tags are <a href=\"/questions/tagged/java\" class=\"s-tag post-tag\" title=\"show questions tagged &#39;java&#39;\" aria-label=\"show questions tagged &#39;java&#39;\" rel=\"tag\" aria-labelledby=\"tag-java-tooltip-container\" data-tag-menu-origin=\"Unknown\">java</a> and <a href=\"/questions/tagged/awt\" class=\"s-tag post-tag\" title=\"show questions tagged &#39;awt&#39;\" aria-label=\"show questions tagged &#39;awt&#39;\" rel=\"tag\" aria-labelledby=\"tag-awt-tooltip-container\" data-tag-menu-origin=\"Unknown\">awt</a>, so I assume you are at some point using an instance of <code>Component</code> in one way or another. I am mentioning this because the above solution is limited on having a <code>Component</code> at hand. The above code uses Swing components though, for the sake of the example.</p>\n<p>Also note the above code may be called for other configuration changes as well, so you may have to filter out the cases where the refresh rate remains the same but the listener is still being fired.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9059972,
      "reputation" : 3471,
      "user_id" : 6746785,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
      "display_name" : "gthanop",
      "link" : "https://stackoverflow.com/users/6746785/gthanop"
    },
    "creation_date" : 1760627592,
    "last_activity_date" : 1761028767,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140818469,
    "post_id" : 79791763,
    "body" : "@Holger Actually, that operation was, in fact, the reason. Without it, we run at the target 100 FPS, but with it, we tank to a little over 4.",
    "score" : 0,
    "owner" : {
      "account_id" : 17201994,
      "reputation" : 446,
      "user_id" : 29046053,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
      "display_name" : "Coarse Rosinflower",
      "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
    },
    "creation_date" : 1761524204,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140818467,
    "post_id" : 79791763,
    "body" : "@Holger I had already changed it in my actual codebase when you&#39;d said that, though I didn&#39;t change the question text. Thank you for reminding me!",
    "score" : 0,
    "owner" : {
      "account_id" : 17201994,
      "reputation" : 446,
      "user_id" : 29046053,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
      "display_name" : "Coarse Rosinflower",
      "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
    },
    "creation_date" : 1761524154,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140812703,
    "post_id" : 79791763,
    "body" : "<code>GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenD&zwnj;&#8203;evices()[0]</code> is expensive <i>and</i> the wrong thing to do, as you shouldn’t assume that your window is always on the first device of the global list. You should do <code>getGraphicsConfiguration().getDevice().getDisplayMode().getR&zwnj;&#8203;efreshRate()</code> in the context of the animated <code>Component</code> instead. However, it’s hard to believe that the performance of the operation is so bad that you can do it only four times per second. The reasons for such a low frame rate must be somewhere else.",
    "score" : 1,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 300941,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1761216386,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140798561,
    "post_id" : 79791763,
    "body" : "@Abra Yes, though I don&#39;t know of any other.",
    "score" : 0,
    "owner" : {
      "account_id" : 17201994,
      "reputation" : 446,
      "user_id" : 29046053,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
      "display_name" : "Coarse Rosinflower",
      "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
    },
    "creation_date" : 1760588160,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140798557,
    "post_id" : 79791763,
    "body" : "Are you referring to this <a href=\"https://docs.oracle.com/en/java/javase/25/docs/api/java.desktop/java/awt/GraphicsEnvironment.html\" rel=\"nofollow noreferrer\">GraphicsEnvironment</a> class?",
    "score" : 0,
    "owner" : {
      "account_id" : 2485939,
      "reputation" : 20969,
      "user_id" : 2164365,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/RKSgV.png?s=256",
      "display_name" : "Abra",
      "link" : "https://stackoverflow.com/users/2164365/abra"
    },
    "creation_date" : 1760587745,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79792311" : [ {
      "comment_id" : 140805970,
      "post_id" : 79792311,
      "body" : "@CoarseRosinflower I just tested too, on Ubuntu in VirtualBox, with <code>xrandr</code> and JDK 25. The detection does not work there. That&#39;s unfortunate and I&#39;m sorry. Did not test initially on Linux.",
      "score" : 0,
      "owner" : {
        "account_id" : 9059972,
        "reputation" : 3471,
        "user_id" : 6746785,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
        "display_name" : "gthanop",
        "link" : "https://stackoverflow.com/users/6746785/gthanop"
      },
      "creation_date" : 1760951164,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140802806,
      "post_id" : 79792311,
      "body" : "Unfortunately, I just tested this on Linux with OpenJDK 21 and it did not catch the framerate change.",
      "score" : 0,
      "owner" : {
        "account_id" : 17201994,
        "reputation" : 446,
        "user_id" : 29046053,
        "user_type" : "registered",
        "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
        "display_name" : "Coarse Rosinflower",
        "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
      },
      "creation_date" : 1760735724,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140801562,
      "post_id" : 79792311,
      "body" : "@CoarseRosinflower Ok then. I changed it to <code>awt</code> tag (which is again not added by you as it seems, but you are confirming here that you use a <code>Component</code>, so it should still not invalidate the answer&#39;s assumption). Please let me know of any other comments about the answer, when possible, if any.",
      "score" : 0,
      "owner" : {
        "account_id" : 9059972,
        "reputation" : 3471,
        "user_id" : 6746785,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
        "display_name" : "gthanop",
        "link" : "https://stackoverflow.com/users/6746785/gthanop"
      },
      "creation_date" : 1760694817,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140800797,
      "post_id" : 79792311,
      "body" : "The <a href=\"https://stackoverflow.com/questions/tagged/swing\">swing</a> tag wasn&#39;t added by me, but yes, I do have an AWT component at hand.",
      "score" : 0,
      "owner" : {
        "account_id" : 17201994,
        "reputation" : 446,
        "user_id" : 29046053,
        "user_type" : "registered",
        "profile_image" : "https://lh4.googleusercontent.com/-MOC4Vt0c__w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8MQWSf6wFQ9vE0GSA1yvKPSXUSg/s256-rj/photo.jpg",
        "display_name" : "Coarse Rosinflower",
        "link" : "https://stackoverflow.com/users/29046053/coarse-rosinflower"
      },
      "creation_date" : 1760655746,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}