{
  "question" : {
    "question_id" : 79775491,
    "title" : "How to insert runtime values into java @interface annotation field?",
    "body" : "<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n\n     @Value(&quot;${x.y.z.value}&quot;)\n     private int value;\n\n     @SomeService(\n       service = &quot;XYZ&quot;,\n       dynamicValue = value\n     )\n     public &lt;Some_Object&gt; getSomethingAfterSomeOperation() {\n       return &lt;Some_Object&gt;;\n     }\n}\n</code></pre>\n<p>In my Service class(it is a Spring Boot project), I am reading a value from a YAML file and injecting it into a field <code>value</code> using the <code>@Value</code> annotation.</p>\n<p>On setting the attribute <code>dynamicValue</code> to <code>value</code> which is read from the YAML file, the compiler complains that <em>&quot;Attribute value must be constant&quot;</em>. I know it expects a compile time constant value, but is there any way to insert a runtime value here? Could you please suggest a workaround or anything for this? I have looked everywhere but I am not able to find a way to make this work. The <code>@SomeService</code> is an <code>@interface</code> annotation which has two fields: <code>service</code> takes a string value while <code>dynamicValue</code> accepts an integer. The retention policy is set to <code>RUNTIME</code> in the <code>@SomeService</code> annotation.</p>\n",
    "tags" : [ "java", "spring-boot" ],
    "owner" : {
      "account_id" : 4727528,
      "reputation" : 31,
      "user_id" : 3824001,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a47c1164f5b3eace0ea1085684e6a9ee?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user3824001",
      "link" : "https://stackoverflow.com/users/3824001/user3824001"
    },
    "is_answered" : true,
    "view_count" : 114,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1758915335,
    "creation_date" : 1758863845,
    "link" : "https://stackoverflow.com/questions/79775491/how-to-insert-runtime-values-into-java-interface-annotation-field",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79776320,
    "question_id" : 79775491,
    "body" : "<p>Unfortunately, you <strong>can’t put a runtime value directly into a Java annotation</strong>, because annotation fields must be compile-time constants. A common approach is to put a placeholder string in the annotation, like <code>dynamicValue = &quot;${x.y.z.value}&quot;</code>, and then resolve it at runtime using Spring’s <code>Environment</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String resolved = env.resolvePlaceholders(ann.dynamicValue());\nint value = Integer.parseInt(resolved);\n</code></pre>\n<p>The catch is that this only works if the code processing the annotation has access to the YAML or properties. If it doesn’t (for example, in a separate JAR), there’s really no practical way to do it. In that case, it’s usually better to pass the value through a Spring bean or configuration class instead of trying to cram it into an annotation.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 27420278,
      "reputation" : 26,
      "user_id" : 20918828,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AEdFTp4olL-AmAmtjt_VIeHg-2iAJMXewVk2eBPvRngdZJE=k-s256",
      "display_name" : "Hrithik Jagwani",
      "link" : "https://stackoverflow.com/users/20918828/hrithik-jagwani"
    },
    "creation_date" : 1758915335,
    "last_activity_date" : 1758915335,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79775692,
    "question_id" : 79775491,
    "body" : "<p>You put expression as value</p>\n<pre><code>     @SomeService(\n       service = &quot;XYZ&quot;,\n       dynamicValue = &quot;${x.y.z.value}&quot;\n     )\n</code></pre>\n<p>Whoever process <code>@SomeService</code> have to deal with it.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 4497436,
      "reputation" : 20786,
      "user_id" : 3656904,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "talex",
      "link" : "https://stackoverflow.com/users/3656904/talex"
    },
    "creation_date" : 1758878130,
    "last_activity_date" : 1758878130,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140761254,
    "post_id" : 79775491,
    "body" : "Interfaces expect constants.  Not really sure if this can be done even with Reflection, and even if it can be done, it is not meant for Production, and its behaviour is not constant, because the JVM could cache the values.  Can you change it into a configuration class instead of an interrface?",
    "score" : 1,
    "owner" : {
      "account_id" : 9504657,
      "reputation" : 8623,
      "user_id" : 7064617,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Q17Fg.png?s=256",
      "display_name" : "jcompetence",
      "link" : "https://stackoverflow.com/users/7064617/jcompetence"
    },
    "creation_date" : 1758873844,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140761059,
    "post_id" : 79775491,
    "body" : "The application I am working on has harcoded values in the application. We are trying to externalize the configuration value.",
    "score" : 0,
    "owner" : {
      "account_id" : 4727528,
      "reputation" : 31,
      "user_id" : 3824001,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a47c1164f5b3eace0ea1085684e6a9ee?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user3824001",
      "link" : "https://stackoverflow.com/users/3824001/user3824001"
    },
    "creation_date" : 1758868569,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140760962,
    "post_id" : 79775491,
    "body" : "No, it’s not possible. Why do you need/want to pass the value like this instead of just passing it normally?",
    "score" : 3,
    "owner" : {
      "account_id" : 2020478,
      "reputation" : 31412,
      "user_id" : 1806780,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://i.sstatic.net/NCB41.jpg?s=256",
      "display_name" : "Sami Kuhmonen",
      "link" : "https://stackoverflow.com/users/1806780/sami-kuhmonen"
    },
    "creation_date" : 1758865607,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79775692" : [ {
      "comment_id" : 140762581,
      "post_id" : 79775692,
      "body" : "@user3824001 Do you mean that the YAML file isn&#39;t packaged with the application <i>at all</i>?  It shouldn&#39;t need to be specifically in the same JAR as the annotated class (or at least you have control over that).  If the YAML is not packaged with the application then what you&#39;re trying to do is not data externalization in the conventional sense.  It would be better characterized as <i>code generation</i>.",
      "score" : 0,
      "owner" : {
        "account_id" : 2792262,
        "reputation" : 190712,
        "user_id" : 2402272,
        "user_type" : "registered",
        "accept_rate" : 85,
        "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
        "display_name" : "John Bollinger",
        "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
      },
      "creation_date" : 1758912031,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140761454,
      "post_id" : 79775692,
      "body" : "@user3824001 Then there is no practical way to do it.",
      "score" : 0,
      "owner" : {
        "account_id" : 4497436,
        "reputation" : 20786,
        "user_id" : 3656904,
        "user_type" : "registered",
        "accept_rate" : 67,
        "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "talex",
        "link" : "https://stackoverflow.com/users/3656904/talex"
      },
      "creation_date" : 1758880021,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140761446,
      "post_id" : 79775692,
      "body" : "It is being read in a different jar that does not have access to the yaml file with &#39;x.y.z.value&#39; exposed to it. The value needs to be passed here itself from the yaml file.",
      "score" : 0,
      "owner" : {
        "account_id" : 4727528,
        "reputation" : 31,
        "user_id" : 3824001,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/a47c1164f5b3eace0ea1085684e6a9ee?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "user3824001",
        "link" : "https://stackoverflow.com/users/3824001/user3824001"
      },
      "creation_date" : 1758879826,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}