{
  "question" : {
    "question_id" : 79835427,
    "title" : "Multi-Gradle with Spring Boot Config Question",
    "body" : "<p>I'm looking for an explanation to why do I need to have a <code>build.gradle</code> in my service directory to stop the root build.gradle from treating it like a buildable project:</p>\n<p>My Directory:</p>\n<pre><code>root:\n|-&gt; services\n   |-&gt; gateway\n      |-&gt; (under the normal folder structure) GatewayApplication.java (Where my @SpringBootApplication is)\n      |-&gt; build.gradle\n   |-&gt; userService\n      |-&gt; UserServiceApplication.java (Where my @SpringBootApplication is)\n      |-&gt; build.gradle\n   |-&gt; build.gradle (the gradle file in question)\n|-&gt; (root's) build.gradle\n|-&gt; settings.gradle\n</code></pre>\n<p>My <code>setting.gradle</code></p>\n<pre><code>rootProject.name = 'black-creek'\n// I thought that these would dictate that it where these directories, gateway and userService where the only buildable gradle projects\ninclude 'services:gateway'\ninclude 'services:userService'\n</code></pre>\n<p>root <code>build.gradle</code>:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '4.0.0' apply false\n    id 'io.spring.dependency-management' version '1.1.7' apply false\n}\n\nallprojects {\n    group = 'ciallsoftware'\n    version = '0.0.1-SNAPSHOT'\n}\n\nsubprojects {\n    apply plugin: 'java'\n    apply plugin: 'org.springframework.boot'\n    apply plugin: 'io.spring.dependency-management'\n\n    java {\n        toolchain {\n            languageVersion = JavaLanguageVersion.of(21)\n        }\n    }\n\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        developmentOnly 'org.springframework.boot:spring-boot-devtools'\n        testImplementation 'org.springframework.boot:spring-boot-starter-test'\n        testRuntimeOnly 'org.junit.platform:junit-platform-launcher'\n    }\n\n    tasks.named('test') {\n        useJUnitPlatform()\n    }\n}\n</code></pre>\n<p>Each of the service's projects have their own <code>build.gradle</code> for their specific dependencies. So I won't post those.</p>\n<p>If I didn't include the <code>build.gradle</code> at the root of the service directory I'd continuously receive the following error:</p>\n<pre><code>./gradlew bR\n&gt; Task :services:bootRun FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':services:bootRun'.\n&gt; Failed to query the value of task ':services:bootRun' property 'mainClass'.\n   &gt; Main class name has not been configured and it could not be resolved from classpath \n</code></pre>\n<p>But I had discovered that the build.gradle was treating my service directory as a buildable project, even though I thought in the settings.gradle I dictated it was the subdirectories, i.e <code>services:gateway</code>, not the service directory. I had to include in the build.gradle in question:</p>\n<pre><code>bootJar {\n    enabled = false\n}\nbootRun {\n    enabled = false\n}\njar {\n    enabled = false\n}\n</code></pre>\n<p>I guess I just don't understand why it would treat my service directory as a buildable project, and why I would have to include what was printed just above this to prevent it.\nAny explanation / insight would be helpful.</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "gradle", "build.gradle" ],
    "owner" : {
      "account_id" : 12883424,
      "reputation" : 317,
      "user_id" : 16492630,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6d9b4d29d992db6b2980892e9ba504cf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "RogueGingerz",
      "link" : "https://stackoverflow.com/users/16492630/roguegingerz"
    },
    "is_answered" : true,
    "view_count" : 63,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1764647076,
    "creation_date" : 1764642427,
    "link" : "https://stackoverflow.com/questions/79835427/multi-gradle-with-spring-boot-config-question",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79835464,
    "question_id" : 79835427,
    "body" : "<p>As per the given structure,<br />\nservices directory contains build.gradle so it became the gradle project.If the directory contains build file then that will make it as a gradle project unless considering about settings.gradle</p>\n<p><strong>why it would treat my service directory as a buildable project?</strong><br />\nbuild.gradle in that directory makes it as buildable project</p>\n<p><strong>Why did services try to run springboot?</strong><br />\nIn the root build.gradle contains springboot plugin so it will be applied to all subprojects. since the services will execute the bootrun task.So the boot tries to find the mainClass but it doesn't contains any source code so it will fails as follows</p>\n<pre><code>\n ./gradlew bR\n&gt; Task :services:bootRun FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':services:bootRun'.\n&gt; Failed to query the value of task ':services:bootRun' property 'mainClass'.\n   &gt; Main class name has not been configured and it could not be resolved from classpath \n \n</code></pre>\n<p><strong>Fix</strong></p>\n<p><strong>Delete the  build.gradle from services directory</strong> and ensure setting.gradle only includes the following subprojects</p>\n<pre><code>\n       include 'services:gateway'\n       include 'services:userService'\n</code></pre>\n<p>Also <strong>clear the gradle cache</strong> and try to re execute this</p>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 26137201,
      "reputation" : 323,
      "user_id" : 19827057,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/eAPUxDRv.jpg?s=256",
      "display_name" : "mariya cherian",
      "link" : "https://stackoverflow.com/users/19827057/mariya-cherian"
    },
    "creation_date" : 1764647076,
    "last_activity_date" : 1764647076,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}