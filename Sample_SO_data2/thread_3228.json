{
  "question" : {
    "question_id" : 79566158,
    "title" : "Solrj write operations failing",
    "body" : "<p>I'm using Solrj to query a core, print the result and finally, add a new field to it and finally commit the changes back to the core.\nThis is my attual code:</p>\n<pre><code>public void testConnection() {        \n        System.setProperty(&quot;org.slf4j.simpleLogger.defaultLogLevel&quot;, &quot;debug&quot;);\n\n        String urlString = &quot;http://solr_IP/solr/core_name&quot;;\n\n        CredentialsProvider credentialsProvider = new BasicCredentialsProvider();\n        credentialsProvider.setCredentials(\n                new AuthScope(AuthScope.ANY),\n                new UsernamePasswordCredentials(&quot;user&quot;, &quot;password&quot;)\n        );\n\n        RequestConfig requestConfig = RequestConfig.custom()\n                .setSocketTimeout(10000)\n                .setConnectTimeout(10000)\n                .build();\n\n        CloseableHttpClient httpClient = HttpClients.custom()\n                .setDefaultCredentialsProvider(credentialsProvider)\n                .setDefaultRequestConfig(requestConfig)\n                .build();\n\n        HttpSolrClient solr = new HttpSolrClient.Builder(urlString)\n                .withHttpClient(httpClient)\n                .withResponseParser(new XMLResponseParser())\n                .build();\n\n        solr.setParser(new XMLResponseParser());\n\n        try {\n\n            SolrQuery query = new SolrQuery();\n            query.setQuery(&quot;strain_id:999&quot;);\n            QueryResponse response = solr.query(query);\n            SolrDocumentList results = response.getResults();\n\n            for (SolrDocument doc : results) {\n                System.out.println(&quot;Found document: &quot; + doc + &quot;\\n&quot;);\n            }\n\n            System.out.println(&quot;Creating a new strain\\n&quot;);\n            SolrInputDocument doc = new SolrInputDocument();\n            doc.addField(&quot;strain_id&quot;, 9999);\n            doc.addField(&quot;do_id&quot;, &quot;DOID: 9744 modified&quot;);\n\n            System.out.println(&quot;Adding strain.\\n&quot;);\n            solr.add(doc);\n            System.out.println(&quot;Commit changes.\\n&quot;);\n            solr.commit();\n            System.out.println(&quot;New strain added.\\n&quot;);\n        } catch (SolrServerException e) {\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new RuntimeException(e);\n        }\n\n        System.out.println();\n    }\n</code></pre>\n<p>But every time I get the following error:</p>\n<pre><code>Found document: SolrDocument{id=999, strain_id=999, do_id=DOID: 9744, _version_=1829001984233963520}\n\nCreating a new strain\n\nAdding strain.\n\norg.apache.solr.client.solrj.SolrServerException: IOException occurred when talking to server at: http://solr_IP/solr/core_name\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:695)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:266)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248)\n    at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:225)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:177)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:138)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:156)\n    at org.example.TestLoader.testConnection(TestLoader.java:72)\n    at org.example.TestLoader.main(TestLoader.java:95)\nCaused by: org.apache.http.client.ClientProtocolException\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:571)\n    ... 8 more\nCaused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:225)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    ... 11 more\njava.lang.RuntimeException: org.apache.solr.client.solrj.SolrServerException: IOException occurred when talking to server at: http://87.106.58.218:8983/solr/strain_disease\n    at org.example.TestLoader.testConnection(TestLoader.java:79)\n    at org.example.TestLoader.main(TestLoader.java:95)\nCaused by: org.apache.solr.client.solrj.SolrServerException: IOException occurred when talking to server at: http://87.106.58.218:8983/solr/strain_disease\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:695)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:266)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.request(HttpSolrClient.java:248)\n    at org.apache.solr.client.solrj.SolrRequest.process(SolrRequest.java:225)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:177)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:138)\n    at org.apache.solr.client.solrj.SolrClient.add(SolrClient.java:156)\n    at org.example.TestLoader.testConnection(TestLoader.java:72)\n    ... 1 more\nCaused by: org.apache.http.client.ClientProtocolException\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:187)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpSolrClient.java:571)\n    ... 8 more\nCaused by: org.apache.http.client.NonRepeatableRequestException: Cannot retry request with a non-repeatable request entity.\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:225)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    ... 11 more\n\nProcess finished with exit code 0\n</code></pre>\n<p>So the read operation can be performed without any issue, but the writing one is always raising this error.\nFrom terminal I'm able to use the curl command for both reading and writing operations so as far as I know it is not my Solr configuration the problem.\nI even tried to perform only the write operation but I just get the error.\nHow can I solve that?</p>\n",
    "tags" : [ "java", "solr", "solrj" ],
    "owner" : {
      "account_id" : 23099543,
      "reputation" : 141,
      "user_id" : 17209145,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJzozV98lZe6n73nWI5uFA8Oq66REKv3KaFBw9Bh=k-s256",
      "display_name" : "Andrea",
      "link" : "https://stackoverflow.com/users/17209145/andrea"
    },
    "is_answered" : false,
    "view_count" : 33,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744275680,
    "creation_date" : 1744274946,
    "link" : "https://stackoverflow.com/questions/79566158/solrj-write-operations-failing",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}