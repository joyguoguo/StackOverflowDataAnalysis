{
  "question" : {
    "question_id" : 79694833,
    "title" : "How do I align controls after dragging on Android app?",
    "body" : "<p>I am trying to implement tile dragging of buttons.\nThe buttons are created dynamically once. There are 15 but only used if visible by assigning a letter to them.\nThey can be selected by tapping.\nI also have methods that will shuffle or align.\nAlignment is done by comparing the position of the buttons and evenly spacing them.</p>\n<p>The problem is when I drag them they usually do not align after dragging even when I have align as part of the dragging code.\nSecond problem is the button is sometimes selected during the dragging process.</p>\n<pre><code>    // DRAGGING ROUTINES\n    private class SingleTapConfirm extends GestureDetector.SimpleOnGestureListener {\n\n        @Override\n        public boolean onSingleTapUp(MotionEvent event) {\n            return true;\n        }\n    }\n</code></pre>\n<pre><code>    View.OnTouchListener mover = new View.OnTouchListener() {\n        @Override\n        public boolean onTouch(View v, MotionEvent event) {\n\n            // dragging\n            Log.e(&quot;MotionEvent&quot;, String.valueOf(event.getAction()));\n            switch (event.getAction()) {\n\n                case MotionEvent.ACTION_DOWN:\n                case MotionEvent.ACTION_BUTTON_PRESS: //\n                    dX = v.getX() - event.getRawX();\n                    break;\n\n                case MotionEvent.ACTION_MOVE:\n                    v.animate()\n                            .x(event.getRawX() + dX)\n                            .setDuration(0)\n                            .start();\n                    break;\n\n                case MotionEvent.ACTION_OUTSIDE:\n                case MotionEvent.ACTION_UP:\n                case MotionEvent.ACTION_BUTTON_RELEASE: //\n                case MotionEvent.ACTION_CANCEL: //\n                default:\n                    Arrays.sort(buttons, new Comparator&lt;Button&gt;() {\n                        @Override\n                        public int compare(Button b1, Button b2) {\n                            if (b1.getX() &gt;= b2.getX()) return 1;  // &gt;= gives b1 preference; 2 buttons cannot be in same place\n                            else return -1;\n                        }\n                    });\n                    alignButtons();\n                    break;\n            }\n\n            // single tap adds selected button letter to answer\n            if (gestureDetector.onTouchEvent(event)) {\n                addLetter(v);\n                if (dragger)\n                    alignButtons();\n            }\n            return true;\n        }\n    };\n\n</code></pre>\n<pre><code>    private void alignButtons() {\n        Log.i(&quot;ButtonStart&quot;, Float.toString(buttonStart) );\n        int seq = 0;\n        for (int i = 0; i &lt; buttons.length; i++) {\n            if (buttons[i].getVisibility() == View.VISIBLE) {\n                float pos = buttonStart + (seq * buttonWidth);\n                buttons[i].setX(pos);\n                seq++;\n                Log.i(buttons[i].getText().toString(), Float.toString(buttons[i].getX()));\n            }\n        }\n    }\n\n</code></pre>\n",
    "tags" : [ "java", "android" ],
    "owner" : {
      "account_id" : 5123768,
      "reputation" : 77,
      "user_id" : 4106573,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0ygEnzCY.png?s=256",
      "display_name" : "Dana Bell",
      "link" : "https://stackoverflow.com/users/4106573/dana-bell"
    },
    "is_answered" : false,
    "view_count" : 33,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1762522392,
    "creation_date" : 1752009189,
    "link" : "https://stackoverflow.com/questions/79694833/how-do-i-align-controls-after-dragging-on-android-app",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79810170,
    "question_id" : 79694833,
    "body" : "<p>I found a fix.</p>\n<p>I added a pause in the default branch of the switch statement and it works (aligns buttons) on every device I tested. The only remaining issue is that the app sometimes detects a touch after dragging, selecting the button. The mysterious thing is that I don't have this problem when building a beta version.</p>\n<pre><code>                default:\n                    Arrays.sort(buttons, new Comparator&lt;&gt;() {\n                        @Override\n                        public int compare(Button b1, Button b2) {\n                            if (b1.getX() &gt;= b2.getX())\n                                return 1;  // &gt;= gives b1 preference; 2 buttons cannot be in same place\n                            else return -1;\n                        }\n                    });\n\n                    Handler handler = new Handler();\n                    handler.postDelayed(new Runnable() {\n                        @Override\n                        public void run() {\n                            alignButtons();\n                        }\n                    }, 100);\n                    break;\n            }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 5123768,
      "reputation" : 77,
      "user_id" : 4106573,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0ygEnzCY.png?s=256",
      "display_name" : "Dana Bell",
      "link" : "https://stackoverflow.com/users/4106573/dana-bell"
    },
    "creation_date" : 1762351590,
    "last_activity_date" : 1762522392,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}