{
  "question" : {
    "question_id" : 79549433,
    "title" : "Android RTL print canvas layout",
    "body" : "<p>Is there a way to make Android print Canvas RTL? Make the canvas.drawText() behave for RTL (right to left text, like Arabic and Hebrew)? (And RTL alignment should be set to always left (so that numeric columns also remain right aligned)).</p>\n<ul>\n<li>Page layout flipped (count positions from right instead of left)</li>\n<li>Text typed right (RTL), that it looks to do already on non-flipped layouts</li>\n</ul>\n<p>Like for:</p>\n<ul>\n<li>Android app screen RTL:\nAppCompatDelegate.setApplicationLocales(LocaleListCompat.create(Locale.forLanguageTag(sLang)));</li>\n<li>Windows winapi app screen RTL:\nSetProcessDefaultLayout(LAYOUT_RTL);</li>\n<li>Windows winapi print RTL:<br />\nSetLayout(pdPrint.hDC, LAYOUT_RTL);</li>\n</ul>\n<p>Or is this something I must do myself?</p>\n",
    "tags" : [ "java", "android", "android-canvas" ],
    "owner" : {
      "account_id" : 6889546,
      "reputation" : 816,
      "user_id" : 5293554,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/s256-rj/photo.jpg",
      "display_name" : "Jan Bergstr&#246;m",
      "link" : "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"
    },
    "is_answered" : true,
    "view_count" : 60,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1761869854,
    "creation_date" : 1743554859,
    "link" : "https://stackoverflow.com/questions/79549433/android-rtl-print-canvas-layout",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79805319,
    "question_id" : 79549433,
    "body" : "<p>Well as comments above I have not found any feature to flip the Canvas for Rtl.</p>\n<p>But the solution is quite easy.</p>\n<ol>\n<li><p>In the print page function detect Rtl and call the print rect function with a bRtl switch</p>\n</li>\n<li><p>In the the print rect function set alignment always right (in Rtl it is, in Ltr numbers are right and text is left)</p>\n</li>\n<li><p>In the the print rect function, the rect position must be moved (as it is not possible to flip)</p>\n</li>\n</ol>\n<pre><code>if(bRtl) { // In Rtl we have to flip left right rect positions\n    rect.left = iSizePixelsX - (rect.left + iCellWidthPix);\n    rect.right = rect.left + iCellWidthPix;\n    }\n</code></pre>\n<p>The print text functions of the android library handles the text Rtl and Ltr right, need no adjustment.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6889546,
      "reputation" : 816,
      "user_id" : 5293554,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/s256-rj/photo.jpg",
      "display_name" : "Jan Bergstr&#246;m",
      "link" : "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"
    },
    "creation_date" : 1761869854,
    "last_activity_date" : 1761869854,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140292671,
    "post_id" : 79549433,
    "body" : "Well, if you&#39;re manually drawing each cell, then yeah, I&#39;d think that you&#39;d have to handle that yourself. <code>Canvas</code> doesn&#39;t know anything about layout directions or RTL languages or anything. <code>View</code>s handle that stuff onscreen. I&#39;m not familiar with <code>PrintDocumentAdapter</code>, however.",
    "score" : 1,
    "owner" : {
      "account_id" : 3397419,
      "reputation" : 39341,
      "user_id" : 2850651,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ooWVw.jpg?s=256",
      "display_name" : "Mike M.",
      "link" : "https://stackoverflow.com/users/2850651/mike-m"
    },
    "creation_date" : 1743639224,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140292637,
    "post_id" : 79549433,
    "body" : "No, I have a layout like a spreadsheet. The text is fine, but I need left and right to be flipped of text cells (that I print one by one), counting the positions from left or right. I print individual text cells on the canvas and the cells are OK but I want the left in LTR to be printed right in RTL etc. MS is doing it by a command but is there any in Android PrintDocumentAdapter?",
    "score" : 0,
    "owner" : {
      "account_id" : 6889546,
      "reputation" : 816,
      "user_id" : 5293554,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/s256-rj/photo.jpg",
      "display_name" : "Jan Bergstr&#246;m",
      "link" : "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"
    },
    "creation_date" : 1743638609,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140292608,
    "post_id" : 79549433,
    "body" : "I&#39;m sorry, but I&#39;m really not sure what you&#39;re trying to do, or what the specific issue is. Are you having problems with the text drawing RTL? Or do you mean that you&#39;re trying to change the Views in a layout to RTL before printing? If you&#39;re printing something that&#39;s onscreen, can you just <code>draw()</code> the <code>View</code> or <code>ViewGroup</code> to the <code>Canvas</code>? Morrison&#39;s right; some code would probably help.",
    "score" : 0,
    "owner" : {
      "account_id" : 3397419,
      "reputation" : 39341,
      "user_id" : 2850651,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ooWVw.jpg?s=256",
      "display_name" : "Mike M.",
      "link" : "https://stackoverflow.com/users/2850651/mike-m"
    },
    "creation_date" : 1743637444,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140292536,
    "post_id" : 79549433,
    "body" : "Mike M: You mean there are no such general feature as in Windows PrintHdc to set RTL because the way I am printing is too raw using class PrintAdapter extends PrintDocumentAdapter and just print my cells on the Canvas canvas = page.getCanvas();? That if I would use a StaticLayout that I write my text on and then put it on the Canvas I can get my StaticLayout in RTL-mode by the setApplicationLocales (that is already set for the app)?  Question is if making the RTL layout in the present raw printing is easier, I think so?",
    "score" : 0,
    "owner" : {
      "account_id" : 6889546,
      "reputation" : 816,
      "user_id" : 5293554,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/s256-rj/photo.jpg",
      "display_name" : "Jan Bergstr&#246;m",
      "link" : "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"
    },
    "creation_date" : 1743635035,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140288439,
    "post_id" : 79549433,
    "body" : "I&#39;m not sure if I&#39;m understanding the question correctly, but if you specifically want to draw it yourself, there is a simpler way than <code>Canvas#drawText()</code>. When your draw gets complicated like that, you want to skip <code>drawText()</code> and use one of Android&#39;s text <code>Layout</code>s instead, like a <code>StaticLayout</code> created with <a href=\"https://developer.android.com/reference/android/text/StaticLayout.Builder\" rel=\"nofollow noreferrer\">its <code>Builder</code></a>. You just give it the text, a <code>TextPaint</code>, and the available width, and it&#39;ll work out the details for you. You then simply <code>draw()</code> it to your <code>Canvas</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 3397419,
      "reputation" : 39341,
      "user_id" : 2850651,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ooWVw.jpg?s=256",
      "display_name" : "Mike M.",
      "link" : "https://stackoverflow.com/users/2850651/mike-m"
    },
    "creation_date" : 1743557928,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140288426,
    "post_id" : 79549433,
    "body" : "Unclear if you&#39;ve seen: <a href=\"https://developer.android.com/training/basics/supporting-devices/languages\" rel=\"nofollow noreferrer\">developer.android.com/training/basics/supporting-devices/&hellip;</a> More details about what you&#39;ve tried with code and possibly resultant images may be helpful.",
    "score" : 1,
    "owner" : {
      "account_id" : 111736,
      "reputation" : 12346,
      "user_id" : 295004,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a29d6038e4dcb7fac98ef41c002975e1?s=256&d=identicon&r=PG",
      "display_name" : "Morrison Chang",
      "link" : "https://stackoverflow.com/users/295004/morrison-chang"
    },
    "creation_date" : 1743557377,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}