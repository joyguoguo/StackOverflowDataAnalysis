{
  "question" : {
    "question_id" : 79757024,
    "title" : "How to copy the dependencies of main into testFixtures?",
    "body" : "<p>I have a typical Architectury project structure, i.e. a <strong>common</strong> module and a <strong>fabric</strong> and a <strong>neoforge</strong> module, both depending on the former. I wanted to make tests for both fabric and neoforge in the common module, but that didn't work because there I don't have a platform. So my next best idea was to write the tests in common under <strong>testFixtures</strong> and import them in the other two subprojects, based on <a href=\"https://stackoverflow.com/a/60138176/9396257\">this answer</a>. That <em>almost</em> works, but in testFixtures the Minecraft code isn't recognized at all (didn't have that problem in main or test). How can I recognize it?</p>\n<p>This is my root gradle:</p>\n<pre><code>plugins {\n    id 'dev.architectury.loom' version '1.11-SNAPSHOT' apply false\n    id 'architectury-plugin' version '3.4-SNAPSHOT'\n    id 'com.github.johnrengelman.shadow' version '8.1.1' apply false\n}\n\narchitectury {\n    minecraft = project.minecraft_version\n}\n\nallprojects {\n    group = rootProject.maven_group\n    version = rootProject.mod_version\n}\n\nsubprojects {\n    apply plugin: 'dev.architectury.loom'\n    apply plugin: 'architectury-plugin'\n    apply plugin: 'maven-publish'\n\n    base {\n        // Set up a suffixed format for the mod jar names, e.g. `example-fabric`.\n        archivesName = &quot;$rootProject.archives_name-$project.name&quot;\n    }\n\n    repositories {\n        // Add repositories to retrieve artifacts from in here.\n        // You should only use this when depending on other mods because\n        // Loom adds the essential maven repositories to download Minecraft and libraries from automatically.\n        // See https://docs.gradle.org/current/userguide/declaring_repositories.html\n        // for more information about repositories.\n    }\n\n    test {\n        useJUnitPlatform()\n    }\n\n    dependencies {\n        minecraft &quot;net.minecraft:minecraft:$rootProject.minecraft_version&quot;\n        mappings loom.officialMojangMappings()\n    }\n\n    java {\n        // Loom will automatically attach sourcesJar to a RemapSourcesJar task and to the &quot;build&quot; task\n        // if it is present.\n        // If you remove this line, sources will not be generated.\n        withSourcesJar()\n\n        sourceCompatibility = JavaVersion.VERSION_21\n        targetCompatibility = JavaVersion.VERSION_21\n    }\n\n    tasks.withType(JavaCompile).configureEach {\n        it.options.release = 21\n    }\n\n    // Configure Maven publishing.\n    publishing {\n        publications {\n            mavenJava(MavenPublication) {\n                artifactId = base.archivesName.get()\n                from components.java\n            }\n        }\n\n        // See https://docs.gradle.org/current/userguide/publishing_maven.html for information on how to set up publishing.\n        repositories {\n            // Add repositories to publish to here.\n            // Notice: This block does NOT have the same function as the block in the top level.\n            // The repositories here will be used for publishing your artifact, not for\n            // retrieving dependencies.\n        }\n    }\n}\n</code></pre>\n<p>This is my common gradle:</p>\n<pre><code>plugins {\n    id 'java-library'\n    id 'java-test-fixtures'\n}\n\narchitectury {\n    common rootProject.enabled_platforms.split(',')\n}\n\ndependencies {\n    // We depend on Fabric Loader here to use the Fabric @Environment annotations,\n    // which get remapped to the correct annotations on each platform.\n    // Do NOT use other classes from Fabric Loader.\n    modImplementation &quot;net.fabricmc:fabric-loader:$rootProject.fabric_loader_version&quot;\n\n    modImplementation &quot;dev.architectury:architectury:$rootProject.architectury_api_version&quot;\n\n    testFixturesImplementation &quot;dev.architectury:architectury:$rootProject.architectury_api_version&quot;\n    testFixturesImplementation &quot;org.junit.jupiter:junit-jupiter-api:5.8.1&quot;\n}\n\nsourceSets {\n    main {\n        resources {\n            srcDirs(&quot;src/main/generated&quot;)\n        }\n    }\n}\n</code></pre>\n<p>This is my fabric gradle:</p>\n<pre><code>plugins {\n    id 'com.github.johnrengelman.shadow'\n    id 'java-library'\n}\n\narchitectury {\n    platformSetupLoomIde()\n    fabric()\n}\n\nconfigurations {\n    common {\n        canBeResolved = true\n        canBeConsumed = false\n    }\n    compileClasspath.extendsFrom common\n    runtimeClasspath.extendsFrom common\n    developmentFabric.extendsFrom common\n\n    // Files in this configuration will be bundled into your mod using the Shadow plugin.\n    // Don't use the `shadow` configuration from the plugin itself as it's meant for excluding files.\n    shadowBundle {\n        canBeResolved = true\n        canBeConsumed = false\n    }\n}\n\ndependencies {\n    modImplementation &quot;net.fabricmc:fabric-loader:$rootProject.fabric_loader_version&quot;\n\n    modImplementation &quot;net.fabricmc.fabric-api:fabric-api:$rootProject.fabric_api_version&quot;\n\n    modImplementation &quot;dev.architectury:architectury-fabric:$rootProject.architectury_api_version&quot;\n\n    common(project(path: ':common', configuration: 'namedElements')) { transitive false }\n\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.1'\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.1'\n    testImplementation(testFixtures(project(&quot;:common&quot;)))\n\n    shadowBundle project(path: ':common', configuration: 'transformProductionFabric')\n}\n\nprocessResources {\n    inputs.property 'version', project.version\n\n    filesMatching('fabric.mod.json') {\n        expand version: project.version\n    }\n}\n\nshadowJar {\n    configurations = [project.configurations.shadowBundle]\n    archiveClassifier = 'dev-shadow'\n}\n\nremapJar {\n    input.set shadowJar.archiveFile\n}\n</code></pre>\n",
    "tags" : [ "java", "gradle", "minecraft" ],
    "owner" : {
      "account_id" : 12407594,
      "reputation" : 221,
      "user_id" : 9396257,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b70709b506dfa2212295401bd589f668?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "SK19",
      "link" : "https://stackoverflow.com/users/9396257/sk19"
    },
    "is_answered" : false,
    "view_count" : 71,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1757091243,
    "creation_date" : 1757091243,
    "link" : "https://stackoverflow.com/questions/79757024/how-to-copy-the-dependencies-of-main-into-testfixtures",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}