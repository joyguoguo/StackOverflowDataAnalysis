{
  "question" : {
    "question_id" : 79722159,
    "title" : "Duplicate JTabbedPane tab",
    "body" : "<p>Swing doesn't allow duplicate tab components.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// javax.swing.JTabbedPane#insertTab\n    public void insertTab(String title, Icon icon, Component component, String tip, int index) {\n        int newIndex = index;\n\n        // If component already exists, remove corresponding\n        // tab so that new tab gets added correctly\n        // Note: we are allowing component=null because of compatibility,\n        // but we really should throw an exception because much of the\n        // rest of the JTabbedPane implementation isn't designed to deal\n        // with null components for tabs.\n        int removeIndex = indexOfComponent(component);\n        if (component != null &amp;&amp; removeIndex != -1) {\n            removeTabAt(removeIndex);\n            if (newIndex &gt; removeIndex) {\n                newIndex--;\n            }\n        }\n</code></pre>\n<p>So how do you implement the &quot;duplicate&quot; feature (similar to the one Chrome has)?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPanel;\nimport javax.swing.JPopupMenu;\nimport javax.swing.JTabbedPane;\nimport javax.swing.WindowConstants;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Container;\nimport java.awt.Dimension;\nimport java.awt.event.ActionEvent;\n\npublic class TabbedPaneDemo {\n    \n    private static JTabbedPane tabbedPane;\n\n    public static void main(String[] args) {\n        Container mainPanel = createMainPanel();\n        JFrame frame = new JFrame(&quot;Tabbed Pane demo&quot;);\n        frame.setContentPane(mainPanel);\n        frame.setLocationRelativeTo(null);\n        frame.pack();\n        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n\n    private static JComponent createMainPanel() {\n        JPanel panel = new JPanel(new BorderLayout());\n        panel.add(createTabbedPane());\n        return panel;\n    }\n\n    private static JTabbedPane createTabbedPane() {\n        tabbedPane = new JTabbedPane();\n        tabbedPane.addTab(&quot;Green tab&quot;, createGreenPanel());\n        tabbedPane.addTab(&quot;Red tab&quot;, createRedPanel());\n        tabbedPane.setPreferredSize(new Dimension(250, 150));\n        tabbedPane.setComponentPopupMenu(createPopupMenu());\n        return tabbedPane;\n    }\n\n    private static Component createGreenPanel() {\n        JPanel panel = new JPanel();\n        panel.setName(&quot;Green panel&quot;);\n        panel.setBackground(Color.GREEN);\n        return panel;\n    }\n\n    private static Component createRedPanel() {\n        JPanel panel = new JPanel();\n        panel.setName(&quot;Red panel&quot;);\n        panel.setBackground(Color.RED);\n        return panel;\n    }\n\n    private static JPopupMenu createPopupMenu() {\n        JPopupMenu popupMenu = new JPopupMenu();\n        popupMenu.add(createDuplicateTabItem());\n        return popupMenu;\n    }\n\n    private static JMenuItem createDuplicateTabItem() {\n        JMenuItem menuItem = new JMenuItem(&quot;Duplicate&quot;); // doesn't work\n        menuItem.addActionListener(TabbedPaneDemo::duplicate);\n        return menuItem;\n    }\n\n    private static void duplicate(ActionEvent event) {\n        Component selectedComponent = tabbedPane.getSelectedComponent();\n        String selectedComponentTitle = tabbedPane.getTitleAt(tabbedPane.indexOfComponent(selectedComponent));\n        tabbedPane.addTab(selectedComponentTitle, selectedComponent);\n    }\n}\n</code></pre>\n<p>I could do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static Component createGreenPanel() {\n        JPanel panel = new JPanel();\n        panel.setName(&quot;Green panel&quot;);\n        panel.setBackground(Color.GREEN);\n        panel.putClientProperty(&quot;creator&quot;, (Supplier&lt;Component&gt;) TabbedPaneDemo::createGreenPanel);\n        return panel;\n    }\n\n    private static Component createRedPanel() {\n        JPanel panel = new JPanel();\n        panel.setName(&quot;Red panel&quot;);\n        panel.setBackground(Color.RED);\n        panel.putClientProperty(&quot;creator&quot;, (Supplier&lt;Component&gt;) TabbedPaneDemo::createRedPanel);\n        return panel;\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    @SuppressWarnings(&quot;unchecked&quot;)\n    private static void duplicate(ActionEvent event) {\n        JComponent selectedComponent = (JComponent) tabbedPane.getSelectedComponent();\n        String selectedComponentTitle = tabbedPane.getTitleAt(tabbedPane.indexOfComponent(selectedComponent));\n        Supplier&lt;Component&gt; selectedComponentCreator = (Supplier&lt;Component&gt;) selectedComponent.getClientProperty(&quot;creator&quot;);\n        if (selectedComponentCreator == null) return;\n        Component selectedComponentDuplicate = selectedComponentCreator.get();\n        tabbedPane.addTab(selectedComponentTitle, selectedComponentDuplicate);\n        tabbedPane.setSelectedComponent(selectedComponentDuplicate);\n    }\n</code></pre>\n<p>But if the duplicated tab contains some state that I need to duplicate as well (for example, some form input or selections), it won't work as expected.</p>\n<p>Java 8.</p>\n",
    "tags" : [ "java", "swing" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : true,
    "view_count" : 125,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1754236459,
    "creation_date" : 1754030808,
    "link" : "https://stackoverflow.com/questions/79722159/duplicate-jtabbedpane-tab",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79722667,
    "question_id" : 79722159,
    "body" : "<p>Every Swing component is a Java Bean, and can be used with the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/beans/package-summary.html\" rel=\"nofollow noreferrer\">java.beans package</a>.  You can serialize your tab and then deserialize it, effectively making a copy:</p>\n<pre><code>private static void duplicate(ActionEvent event) {\n    Component selectedComponent = tabbedPane.getSelectedComponent();\n    String selectedComponentTitle = tabbedPane.getTitleAt(tabbedPane.indexOfComponent(selectedComponent));\n\n    Component clonedComponent;\n\n    ByteArrayOutputStream serializedForm = new ByteArrayOutputStream();\n    try (XMLEncoder encoder = new XMLEncoder(serializedForm)) {\n        encoder.setExceptionListener(e -&gt; {\n            throw new RuntimeException(e);\n        });\n\n        encoder.writeObject(selectedComponent);\n    }\n\n    ByteArrayInputStream in =\n        new ByteArrayInputStream(serializedForm.toByteArray());\n    try (XMLDecoder decoder = new XMLDecoder(in)) {\n        decoder.setExceptionListener(e -&gt; {\n            throw new RuntimeException(e);\n        });\n\n        clonedComponent = (Component) decoder.readObject();\n    }\n\n    tabbedPane.addTab(selectedComponentTitle, clonedComponent);\n}\n</code></pre>\n<p>In theory, you could also use regular Java serialization (ObjectInputStream and ObjectOutputStream), but use of XMLEncoder and XMLDecoder is guaranteed to be supported, while every Swing componentâ€™s documentation warns that serialized forms may not be stable.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1754060000,
    "last_activity_date" : 1754060000,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79724149,
    "question_id" : 79722159,
    "body" : "<p>JTabbedPane indexOfComponent(component) check with == method which means it check the components are same in memory. so if you are passing the same component it will not work,</p>\n<p>You can override the indexOfComponent method and allow it to pass the duplicate component</p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 15262806,
      "reputation" : 1,
      "user_id" : 11012339,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-wWjTcEJVMl8/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMWKcrIYQ7YqVZTVP4NL84CcEKc3w/mo/s256-rj/photo.jpg",
      "display_name" : "AKL SOFTAWARE",
      "link" : "https://stackoverflow.com/users/11012339/akl-softaware"
    },
    "creation_date" : 1754236459,
    "last_activity_date" : 1754236459,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140634946,
    "post_id" : 79722159,
    "body" : "You need to copy state manually. There is no magic bullet here.",
    "score" : 4,
    "owner" : {
      "account_id" : 4497436,
      "reputation" : 20796,
      "user_id" : 3656904,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "talex",
      "link" : "https://stackoverflow.com/users/3656904/talex"
    },
    "creation_date" : 1754039111,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140634888,
    "post_id" : 79722159,
    "body" : "@talex no, it shouldn&#39;t. But the initial state should be identical",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1754037571,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140634676,
    "post_id" : 79722159,
    "body" : "Do you want them to share state? If one tab is edited another should change as well?",
    "score" : 2,
    "owner" : {
      "account_id" : 4497436,
      "reputation" : 20796,
      "user_id" : 3656904,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "talex",
      "link" : "https://stackoverflow.com/users/3656904/talex"
    },
    "creation_date" : 1754031817,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}