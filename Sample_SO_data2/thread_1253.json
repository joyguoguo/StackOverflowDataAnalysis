{
  "question" : {
    "question_id" : 79730259,
    "title" : "Why does Maven take several seconds to start?",
    "body" : "<p>After typing my Maven command, it takes several seconds before the compilation steps gets underway.  Why is that? What is happening for those several seconds?</p>\n<p>More to the point, is there an option so that goes faster?  Several seconds may not sound like a lot, but I run this command repetitively in my process, and several seconds is enough time for my Intel i5-4590 CPU at 3.30 GHz to handle billions of operations - what exactly is occupying that time, and can I avoid it?</p>\n<p>The following are videos and screenshots of using Maven to build the Minum project, a small Java web framework.  It is at <a href=\"https://github.com/byronka/minum\" rel=\"nofollow noreferrer\">https://github.com/byronka/minum</a>. The only third-party dependencies are the JDK, Jacoco, and Junit.</p>\n<ul>\n<li>Java version: 21.0.7</li>\n<li>OS: Windows 10 64-bit professional</li>\n<li>using Cygwin for a Posix environment</li>\n<li>Maven 3.9.3</li>\n</ul>\n<p>Video: <a href=\"https://renomad.com/maven_perf/maven_takes_six_seconds_to_start_but_why.mp4\" rel=\"nofollow noreferrer\">https://renomad.com/maven_perf/maven_takes_six_seconds_to_start_but_why.mp4</a></p>\n<p>Key moments from the video:</p>\n<ul>\n<li>Computer receives the command at <a href=\"https://renomad.com/maven_perf/maven_starts_processing_at_1_second.png\" rel=\"nofollow noreferrer\">one second</a></li>\n<li>at <a href=\"https://renomad.com/maven_perf/maven_no_output_yet_at_7_seconds.png\" rel=\"nofollow noreferrer\">seven seconds</a>  we still haven't seen output from Maven</li>\n<li>at <a href=\"https://renomad.com/maven_perf/maven_starts_compiling_at_9_seconds.png\" rel=\"nofollow noreferrer\">nine seconds</a> Maven outputs that compilation has started.</li>\n</ul>\n<p>A commenter suggested I run with the -X option.  Here is the result:</p>\n<p>the <a href=\"https://renomad.com/maven_perf/maven_running_with_X_option.mp4\" rel=\"nofollow noreferrer\">video of running with -X</a></p>\n<ul>\n<li>Receives command at <a href=\"https://renomad.com/maven_perf/maven_with_x_option_at_1_second.png\" rel=\"nofollow noreferrer\">1 second</a></li>\n<li>at <a href=\"https://renomad.com/maven_perf/maven_with_x_option_at_6_seconds.png\" rel=\"nofollow noreferrer\">6 seconds</a> we're not showing a lot.</li>\n<li>at <a href=\"https://renomad.com/maven_perf/maven_with_x_option_at_11_seconds.png\" rel=\"nofollow noreferrer\">11 seconds</a> we hit the beginning of the compilation step.</li>\n</ul>\n",
    "tags" : [ "java", "performance", "maven" ],
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "is_answered" : true,
    "view_count" : 244,
    "answer_count" : 2,
    "score" : -1,
    "last_activity_date" : 1754758293,
    "creation_date" : 1754690232,
    "link" : "https://stackoverflow.com/questions/79730259/why-does-maven-take-several-seconds-to-start",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79730745,
    "question_id" : 79730259,
    "body" : "<p>I recommend to measure the startup performance. So first step is to download  <a href=\"https://github.com/sharkdp/hyperfine\" rel=\"noreferrer\">https://github.com/sharkdp/hyperfine</a> to your machine... and afterwards let us measure the things which are interesting...</p>\n<p>So first</p>\n<pre><code>mvn --version\n</code></pre>\n<p>This will printout some information about the used JVM and version and the version of Maven itself.</p>\n<pre><code>$&gt; mvn --version\nApache Maven 3.9.11 (3e54c93a704957b63ee3494413a2b544fd3d825b)\nMaven home: /Users/khm/.sdkman/candidates/maven/current\nJava version: 21.0.8, vendor: Eclipse Adoptium, runtime: /Users/khm/.sdkman/candidates/java/21.0.8-tem\nDefault locale: en_DE, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;14.6.1&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>So now we will try to do a measurement via this command</p>\n<pre><code>hyperfine 'mvn --version'\n</code></pre>\n<p>This will give use a good estimation of the startup time of Maven (without reading pom files) including the startup time of the JVM.</p>\n<pre><code>$&gt; hyperfine 'mvn --version'\nBenchmark 1: mvn --version\n  Time (mean ± σ):     353.3 ms ±   9.5 ms    [User: 188.6 ms, System: 29.5 ms]\n  Range (min … max):   341.5 ms … 373.1 ms    10 runs\n</code></pre>\n<p>So the same test done on an older system (very important NOT Windows! It is a Debian 12 Bookworm System):</p>\n<pre><code>model name  : Intel(R) Core(TM) i5-8400 CPU @ 2.80GHz\n</code></pre>\n<p>So using the same Maven version</p>\n<pre><code>testing@control:~$ mvn --version\nApache Maven 3.9.11 (3e54c93a704957b63ee3494413a2b544fd3d825b)\nMaven home: /home/testing/.sdkman/candidates/maven/current\nJava version: 21.0.8, vendor: Eclipse Adoptium, runtime: /home/testing/.sdkman/candidates/java/21.0.8-tem\nDefault locale: en_US, platform encoding: UTF-8\nOS name: &quot;linux&quot;, version: &quot;6.8.12-13-pve&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;\n</code></pre>\n<p>and now running the same test:</p>\n<pre><code>testing@control:~$ hyperfine-v1.19.0-i686-unknown-linux-musl/hyperfine 'mvn --version' \nBenchmark 1: mvn --version\n  Time (mean ± σ):     164.3 ms ±   4.3 ms    [User: 234.8 ms, System: 36.8 ms]\n  Range (min … max):   157.2 ms … 170.6 ms    17 runs\n</code></pre>\n<p>So next I have cloned the given example project <a href=\"https://github.com/byronka/minum.git\" rel=\"noreferrer\">https://github.com/byronka/minum.git</a>\nand tried that building via <code>mvn clean verify</code> which fails... because some tests are broken...So I used <code>mvn clean verify -DskipTests</code> to see building performance and not the test performance.</p>\n<p>On my MacBook M1:</p>\n<pre><code>$&gt; hyperfine 'mvn clean verify -DskipTests' \nBenchmark 1: mvn clean verify -DskipTests\n  Time (mean ± σ):      3.034 s ±  0.080 s    [User: 8.217 s, System: 0.449 s]\n  Range (min … max):    2.949 s …  3.201 s    10 runs\n</code></pre>\n<p>The same project on the older machine:</p>\n<pre><code>testing@control:~/minum$ ../hyperfine-v1.19.0-i686-unknown-linux-musl/hyperfine 'mvn clean verify -DskipTests' \nBenchmark 1: mvn clean verify -DskipTests\n  Time (mean ± σ):      4.237 s ±  0.031 s    [User: 13.086 s, System: 0.363 s]\n  Range (min … max):    4.199 s …  4.299 s    10 runs\n</code></pre>\n<p>Even though the startup of the JVM is on the Linux machine is two times faster (ca. 150 ms vs. 300 ms)... the overall performance is on Mac saving more than a second.</p>\n<p><strong>HINT</strong>: Try not to use Cygwin environment... just try plain Windows command line (aka DOS Box; Not the PowerShell)...and retry your builds there... and also try measuring those different shells with hyperfine...</p>\n<p><strong>Questions</strong>:</p>\n<ul>\n<li>What kind of hard drive are you using on your windows machine? Is that an SSD or is that a spinning drive?</li>\n<li>Do you have running a virus scanner? If so please check and turn it off for testing?</li>\n</ul>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98455,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1754757613,
    "last_activity_date" : 1754758293,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79730560,
    "question_id" : 79730259,
    "body" : "<p>When you run the application for the first time, it will download all dependencies from the remote repositories to local repositories so it is a bit time taking process so the application may face a delay. From the second time and onward when you start the application, it will load libraries from the local repos and missing libraries from the remote, so it needs a few seconds to organize this whole process.</p>\n<p>Removing unwanted dependencies from your pom.xml can significantly improve the performance of your application.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 31238227,
      "reputation" : 32,
      "user_id" : 24043180,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1aaef49e829f4049701d24bdc5390642?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sajjad Haider",
      "link" : "https://stackoverflow.com/users/24043180/sajjad-haider"
    },
    "creation_date" : 1754736050,
    "last_activity_date" : 1754736050,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140670006,
    "post_id" : 79730259,
    "body" : "@ByronKatz That&#39;s &quot;unfortunate&quot;, because Windows Defender&#39;s &quot;cloud scan&quot; can block for up to 10 seconds and could explain the delay you see (although generally that will not trigger repeatedly in the same session for the same files).",
    "score" : 1,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1755352732,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140670001,
    "post_id" : 79730259,
    "body" : "@MarkRotteveel I am sure, Windows Defender is disabled.",
    "score" : 0,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1755352631,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140655160,
    "post_id" : 79730259,
    "body" : "Are you sure? Windows comes with Windows Defender, and that is enabled by default.",
    "score" : 3,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1754822277,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140654379,
    "post_id" : 79730259,
    "body" : "Robert, no anti virus is installed",
    "score" : 1,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1754764162,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140654220,
    "post_id" : 79730259,
    "body" : "What Anti-Virus solution is installed? Java and Maven use JAR files files which are ZIP files, so an Anti-Virus system that wants to scan them all before using it has to decompress the content for scanning...",
    "score" : 4,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43469,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1754757993,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140654168,
    "post_id" : 79730259,
    "body" : "That said, I have seen around the internet people saying their build sometimes fails with <code>mvnd</code> yet doesn&#39;t fail with <code>mvn</code>. So, it may not be the most stable of technologies.",
    "score" : 0,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1754756140,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140654126,
    "post_id" : 79730259,
    "body" : "Each time you invoke Maven a JVM has to start and then Maven has to find and parse the POM files, determine execution order, and other things before any goals are executed. This can take time. The daemon should at least cut out the JVM startup time, which is likely the most significant amount of time in this context. As for your daemons apparently terminating, you should be able to <a href=\"https://github.com/apache/maven-mvnd?tab=readme-ov-file#configuration\" rel=\"nofollow noreferrer\">configure the idle timeout</a>. Though I think the default timeout is 3 <i>hours</i>, so I&#39;m not sure why your daemons are terminating so quickly.",
    "score" : 0,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1754755102,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653330,
    "post_id" : 79730259,
    "body" : "I don&#39;t question your motive for asking this. I&#39;m just saying you haven&#39;t provide any relevant technical details for others to be able to help. There are any number of possible reasons that are related to your particular system. It could be simple that the computer is too old or lacking resources. Without more detail and steps for reproduction I would suggest to try to use a profiler and see what is using the time. Also check if the duration of a Maven demon can be configured.",
    "score" : 2,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1754711096,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653225,
    "post_id" : 79730259,
    "body" : "I do note that if I take a minute or two between running <code>mvnd test</code> again, it indicates a need to start a new daemon, so not quite as fast as I hoped.",
    "score" : 0,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1754701231,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653221,
    "post_id" : 79730259,
    "body" : "aled - this is just something I&#39;ve been wondering for years and finally got around to asking.  It&#39;s not an issue particular to this project, it&#39;s the only way I&#39;ve ever seen Maven behave, over the past 20 years I&#39;ve worked with it...  a several second startup.",
    "score" : 0,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1754701034,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653192,
    "post_id" : 79730259,
    "body" : "Still, I wish I knew what reason there was for needing so long.  In human time, one could say that 5 or 6 seconds is not much.  In computer time, it makes me wonder what all is going on.",
    "score" : 0,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1754699210,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653186,
    "post_id" : 79730259,
    "body" : "Thanks Slaw, that was a good suggestion.  It&#39;s basically instant with that daemon.",
    "score" : 0,
    "owner" : {
      "account_id" : 367545,
      "reputation" : 524,
      "user_id" : 713809,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
      "display_name" : "Byron Katz",
      "link" : "https://stackoverflow.com/users/713809/byron-katz"
    },
    "creation_date" : 1754698836,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653121,
    "post_id" : 79730259,
    "body" : "The CPU is from 2014. Not exactly new. Billions of operations has no meaning without a period of time. Also what is the status of the system. What is the total memory and available memory? What processes are running? CPU usage? JDK version and architecture? OS and version? See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Does it reproduce in any other system? Which Maven version? What is in the pom?",
    "score" : 4,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1754695160,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140653095,
    "post_id" : 79730259,
    "body" : "Try using the <a href=\"https://maven.apache.org/tools/mvnd.html\" rel=\"nofollow noreferrer\">Maven Daemon</a>. That should at least cut out the JVM startup time when executing Maven. When Maven 4 is released you can also try using the <a href=\"https://maven.apache.org/whatsnewinmaven4.html\" rel=\"nofollow noreferrer\">Maven Shell</a>.",
    "score" : 3,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1754693262,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79730560" : [ {
      "comment_id" : 140654487,
      "post_id" : 79730560,
      "body" : "The screen shots and even the videos showing the intial download is not the problem... and not done during the tests.. and removing &quot;unwanted dependencies&quot; is kind of strange either your app don&#39;t need them .. then they are unused or they are used so you can not remove them... and the performance can effected but not in that way...",
      "score" : 2,
      "owner" : {
        "account_id" : 112317,
        "reputation" : 98455,
        "user_id" : 296328,
        "user_type" : "registered",
        "accept_rate" : 60,
        "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
        "display_name" : "khmarbaise",
        "link" : "https://stackoverflow.com/users/296328/khmarbaise"
      },
      "creation_date" : 1754769818,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79730745" : [ {
      "comment_id" : 140670084,
      "post_id" : 79730745,
      "body" : "The hard drive is an SSD.  I am not running a virus scanner, and Windows Defender is disabled.",
      "score" : 0,
      "owner" : {
        "account_id" : 367545,
        "reputation" : 524,
        "user_id" : 713809,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
        "display_name" : "Byron Katz",
        "link" : "https://stackoverflow.com/users/713809/byron-katz"
      },
      "creation_date" : 1755355278,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140654383,
      "post_id" : 79730745,
      "body" : "Fantastic! Let me get back with you, this is great stuff.",
      "score" : 0,
      "owner" : {
        "account_id" : 367545,
        "reputation" : 524,
        "user_id" : 713809,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/lqC64.jpg?s=256",
        "display_name" : "Byron Katz",
        "link" : "https://stackoverflow.com/users/713809/byron-katz"
      },
      "creation_date" : 1754764371,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}