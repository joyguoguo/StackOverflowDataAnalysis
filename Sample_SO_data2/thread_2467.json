{
  "question" : {
    "question_id" : 79621058,
    "title" : "How to customize SAML 2 Service Provider metadata with Spring Security SAML 2",
    "body" : "<p>I'm implementing a SAML 2.0 Service Provider using Spring Boot 3.4 and Spring Security 6.4, with the <a href=\"https://docs.spring.io/spring-security/reference/servlet/saml2/index.html\" rel=\"nofollow noreferrer\">SAML 2 service provider module</a> (<code>org.springframework.security:spring-security-saml2-service-provider</code>).</p>\n<p><strong>How do I customize the SP metadata returned by <code>/saml2/metadata</code>?</strong></p>\n<hr />\n<p>I've tried providing my own instance of <code>Saml2MetadataResolver</code>, but it had no effect (the callback method given to <code>setEntityDescriptorCustomizer</code> is never invoked):</p>\n<pre><code>@Configuration\npublic class MySaml2MetadataConfig {\n    @Bean\n    public Saml2MetadataResolver metadataResolver(RelyingPartyRegistrationRepository registrations) {\n        OpenSaml4MetadataResolver resolver = new OpenSaml4MetadataResolver();\n        resolver.setEntityDescriptorCustomizer(parameters -&gt; {\n            EntityDescriptor entityDescriptor = parameters.getEntityDescriptor();\n            // Customize the content of md:EntityDescriptor...\n        });\n        return resolver;\n    }\n}\n</code></pre>\n<hr />\n<p>My <a href=\"https://docs.spring.io/spring-security/reference/servlet/saml2/login/overview.html#servlet-saml2login-minimalconfiguration\" rel=\"nofollow noreferrer\">(minimal) configuration</a> so far is the following:</p>\n<ul>\n<li><p><code>application.yaml</code></p>\n<pre><code>spring:\n  security:\n    saml2:\n      relyingparty:\n        registration:\n          my-sp-reg:\n            assertingparty:\n              entity-id: http://example.com/idp\n              singlesignon:\n                url: http://example.com/idp/sso\n                sign-request: false\n</code></pre>\n</li>\n<li><p>Spring Security Java configuration class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http.authorizeHttpRequests(authorize -&gt; authorize.anyRequest().authenticated())\n                .saml2Login(withDefaults())\n                .saml2Metadata(withDefaults())\n                .build();\n    }\n}\n</code></pre>\n</li>\n</ul>\n",
    "tags" : [ "java", "spring-boot", "spring-security", "saml", "saml-2.0" ],
    "owner" : {
      "account_id" : 85548,
      "reputation" : 7926,
      "user_id" : 238421,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/364633fd122d04290ae7257642b45800?s=256&d=identicon&r=PG",
      "display_name" : "Danilo Piazzalunga",
      "link" : "https://stackoverflow.com/users/238421/danilo-piazzalunga"
    },
    "is_answered" : false,
    "view_count" : 168,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1747212055,
    "creation_date" : 1747212055,
    "link" : "https://stackoverflow.com/questions/79621058/how-to-customize-saml-2-service-provider-metadata-with-spring-security-saml-2",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}