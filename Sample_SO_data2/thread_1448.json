{
  "question" : {
    "question_id" : 79708940,
    "title" : "Getting user client IP in Jenkins",
    "body" : "<p>In Jenkins, I need the IP/Computer Name of the client computer that the user started a Jenkins job from. I have tried this, but it never reaches the inner &quot;if&quot; source: <a href=\"https://groups.google.com/g/jenkinsci-users/c/OugX6BzFHGQ/m/Xr_gPnr4CQAJ\" rel=\"nofollow noreferrer\">Source 1</a> <a href=\"https://stackoverflow.com/questions/41394712/inject-variable-in-jenkins-pipeline-with-groovy-script\">Source 2</a>:</p>\n<pre><code>import hudson.model.*\nimport static hudson.model.Cause.RemoteCause\n\n\ndef ipaddress=&quot;&quot;\nfor (CauseAction action : currentBuild.getActions(CauseAction.class)) {\n\n    for (Cause cause : action.getCauses()) {\n        if(cause instanceof RemoteCause){\n             ipaddress=cause.addr\n             break;\n        }\n    }\n}\nreturn [&quot;ip&quot;:ipaddress]\n\n</code></pre>\n",
    "tags" : [ "java", "jenkins", "groovy", "continuous-integration" ],
    "owner" : {
      "account_id" : 30180924,
      "reputation" : 27,
      "user_id" : 23129231,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocJDSuJPl5y0koC55ZIs3cKft8Gu3NR9Mz_H-Y6IhfEH=k-s256",
      "display_name" : "HammerOfSweden",
      "link" : "https://stackoverflow.com/users/23129231/hammerofsweden"
    },
    "is_answered" : false,
    "view_count" : 104,
    "closed_date" : 1753699871,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1753219281,
    "creation_date" : 1753094427,
    "link" : "https://stackoverflow.com/questions/79708940/getting-user-client-ip-in-jenkins",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79711068,
    "question_id" : 79708940,
    "body" : "<p>It seems there's no <code>RemoteCause</code> when your job's triggered manually by a logged-in user in Jenkins web UI. It's generated only for triggers initiated via the remote access API like a curl command or another script hitting the Jenkins URL without authentication credentials. But when your pipeline script runs the original web request information is gone including IP address. That's because the build runs as a separate process, often long after Jenkins controller has already handled the initial web request (which contains user's IP) and put a build into the queue. I guess Jenkins intentionally doesn't pass this information into the build context for security and architectural reasons. So in this case there's <strong>no way to link the build cause to the user's IP address by default</strong>.</p>\n<p>You can install <a href=\"https://plugins.jenkins.io/audit-trail\" rel=\"nofollow noreferrer\">Audit Trail</a> plugin as a solution. Using it you can find the information about user's IP in the log. Explore the documentation.</p>\n<p>Alternatively you can also just pass the IP as parameter when make the remote call, check this <a href=\"https://stackoverflow.com/a/30970667/1177031\">answer</a>.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1207862,
      "reputation" : 4210,
      "user_id" : 1177031,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/79eaae35b3331731ecfb9e360bb8380b?s=256&d=identicon&r=PG",
      "display_name" : "kapandron",
      "link" : "https://stackoverflow.com/users/1177031/kapandron"
    },
    "creation_date" : 1753219281,
    "last_activity_date" : 1753219281,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140607719,
    "post_id" : 79708940,
    "body" : "The <code>RemoteCause</code> only appears when the job is triggered via Jenkins API calls like @daggett said. For manual triggers from the web UI, you&#39;ll see <code>UserIdCause</code> instead, which gives you the user who started the job but not their IP address.  Can you tell why you need IP address of the user who started the job?",
    "score" : 0,
    "owner" : {
      "account_id" : 24403934,
      "reputation" : 31,
      "user_id" : 18332327,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5e6e4006c4bb0ed1602aebac441cf7ab?s=256&d=identicon&r=PG",
      "display_name" : "Rahul",
      "link" : "https://stackoverflow.com/users/18332327/rahul"
    },
    "creation_date" : 1753159247,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140606480,
    "post_id" : 79708940,
    "body" : "check what other cause types you have in the list. i bet you don&#39;t have there <code>RemoteCause</code>. i don&#39;t think you&#39;ll have RemoteCause unless job was triggered by api call.",
    "score" : 0,
    "owner" : {
      "account_id" : 1333316,
      "reputation" : 29017,
      "user_id" : 1276664,
      "user_type" : "registered",
      "accept_rate" : 17,
      "profile_image" : "https://www.gravatar.com/avatar/873470471a482071b8e085095cf89221?s=256&d=identicon&r=PG",
      "display_name" : "daggett",
      "link" : "https://stackoverflow.com/users/1276664/daggett"
    },
    "creation_date" : 1753112939,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140606200,
    "post_id" : 79708940,
    "body" : "What @Julia was asking was really: why do you need the IP of the client that started the job? There may be a different way of resolved that root question.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1753106881,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140605728,
    "post_id" : 79708940,
    "body" : "...so, what I&#39;m saying is: In Jenkins, I need the IP/Computer Name of the client computer that the user started the job from. That&#39;s my question :) The code is &quot;what I have tried so far&quot;.",
    "score" : 0,
    "owner" : {
      "account_id" : 30180924,
      "reputation" : 27,
      "user_id" : 23129231,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocJDSuJPl5y0koC55ZIs3cKft8Gu3NR9Mz_H-Y6IhfEH=k-s256",
      "display_name" : "HammerOfSweden",
      "link" : "https://stackoverflow.com/users/23129231/hammerofsweden"
    },
    "creation_date" : 1753095781,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140605711,
    "post_id" : 79708940,
    "body" : "Well, I need the IP/Computer Name of the user who started the job in Jenkins, and this is the only suggested solution I have found. It&#39;s an old thread, so I find no point in replying to that thread. Instead I have tried this solution, and I can see that it reaches both for-loops, but never the &quot;if&quot;. Since I don&#39;t really understand the code involved, I&#39;m having trouble solving this. So I would like som input. Is the code still valid? Do people have other suggestions?",
    "score" : 0,
    "owner" : {
      "account_id" : 30180924,
      "reputation" : 27,
      "user_id" : 23129231,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocJDSuJPl5y0koC55ZIs3cKft8Gu3NR9Mz_H-Y6IhfEH=k-s256",
      "display_name" : "HammerOfSweden",
      "link" : "https://stackoverflow.com/users/23129231/hammerofsweden"
    },
    "creation_date" : 1753095434,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140605686,
    "post_id" : 79708940,
    "body" : "Hi! I think this might be an XY problem (asking about an attempted solution rather than the problem at hand). What are you actually hoping to achieve with this?",
    "score" : 0,
    "owner" : {
      "account_id" : 19185251,
      "reputation" : 2134,
      "user_id" : 14016161,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/05881e900ae5359a2e09f35eb66458ed?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Julia",
      "link" : "https://stackoverflow.com/users/14016161/julia"
    },
    "creation_date" : 1753094641,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}