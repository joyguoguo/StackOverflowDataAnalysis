{
  "question" : {
    "question_id" : 79549087,
    "title" : "deploy spring-boot 3.1 on heroku with tomcat 10.1",
    "body" : "<p>I am deploying a spring-boot v3.1 and java 21 on heroku. By default heroku propose tomcat 9.0.3. I am not able to switch on tomcat 10.1 which is needed for my project.</p>\n<p>As describe in documentation, i use the plugin webapp-runner v10.1.34.0 in order to use tomcat 10.1</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;&lt;goal&gt;copy&lt;/goal&gt;&lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;com.heroku&lt;/groupId&gt;\n                                    &lt;artifactId&gt;webapp-runner&lt;/artifactId&gt;\n                                    &lt;version&gt;10.1.34.0&lt;/version&gt;\n                                    &lt;destFileName&gt;webapp-runner.jar&lt;/destFileName&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>i update my procfile</p>\n<pre><code>web: java $JAVA_OPTS -jar target/dependency/webapp-runner.jar --port $PORT target/monsuivi-app.war\n</code></pre>\n<p>using maven clean package i build a war file and then using heroku cli command to upload to heroku server.</p>\n<pre><code>remote: -----&gt; Building on the Heroku-24 stack\nremote: -----&gt; Using buildpack: heroku/jvm\nremote: -----&gt; JVM Common app detected\nremote: -----&gt; Installing Azul Zulu OpenJDK 21.0.6\nremote: -----&gt; Discovering process types\nremote:        Procfile declares types -&gt; web\nremote:\nremote: -----&gt; Compressing...\nremote:        Done: 143.7M\nremote: -----&gt; Launching...\nremote:        Released v20\nremote:        https://monsuivi-XXXXXX-XXXX.herokuapp.com/ deployed to Heroku\nremote:\n-----&gt; Done\n\n\n</code></pre>\n<p>On heroku log i see server is started but still using tomcat 9.0.30.</p>\n<pre><code>2025-04-01T19:46:49.727953+00:00 app[web.1]: Setting JAVA_TOOL_OPTIONS defaults based on dyno size. Custom settings will override them.\n2025-04-01T19:46:49.730841+00:00 app[web.1]: Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF-8 -XX:MaxRAM=536870912 -Xmx300m -Xss512k -XX:CICompilerCount=2\n2025-04-01T19:46:50.236505+00:00 app[web.1]: Expanding monsuivi-app.war into /app/target/tomcat.28055/webapps/expanded\n2025-04-01T19:46:50.236540+00:00 app[web.1]: Adding Context  for /app/target/tomcat.28055/webapps/expanded\n2025-04-01T19:46:50.442914+00:00 app[web.1]: Apr 01, 2025 7:46:50 PM org.apache.coyote.AbstractProtocol init\n2025-04-01T19:46:50.442916+00:00 app[web.1]: INFO: Initializing ProtocolHandler [&quot;http-nio-28055&quot;]\n2025-04-01T19:46:50.457600+00:00 app[web.1]: Apr 01, 2025 7:46:50 PM org.apache.catalina.core.StandardService startInternal\n2025-04-01T19:46:50.457602+00:00 app[web.1]: INFO: Starting service [Tomcat]\n2025-04-01T19:46:50.457853+00:00 app[web.1]: Apr 01, 2025 7:46:50 PM org.apache.catalina.core.StandardEngine startInternal\n2025-04-01T19:46:50.457854+00:00 app[web.1]: INFO: Starting Servlet engine: [Apache Tomcat/9.0.30]\n2025-04-01T19:46:50.638337+00:00 app[web.1]: Apr 01, 2025 7:46:50 PM org.apache.catalina.startup.ContextConfig getDefaultWebXmlFragment\n2025-04-01T19:46:50.638346+00:00 app[web.1]: INFO: No global web.xml found\n2025-04-01T19:46:50.660451+00:00 app[web.1]: Apr 01, 2025 7:46:50 PM org.apache.tomcat.util.descriptor.web.WebXml setVersion\n2025-04-01T19:46:50.660452+00:00 app[web.1]: WARNING: Unknown version string [5.0]. Default version will be used.\n2025-04-01T19:46:50.914619+00:00 heroku[web.1]: State changed from starting to up\n2025-04-01T19:46:53.476052+00:00 app[web.1]: Apr 01, 2025 7:46:53 PM org.apache.jasper.servlet.TldScanner scanJars\n2025-04-01T19:46:53.476067+00:00 app[web.1]: INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n2025-04-01T19:46:53.510613+00:00 app[web.1]: Apr 01, 2025 7:46:53 PM org.apache.coyote.AbstractProtocol start\n2025-04-01T19:46:53.510615+00:00 app[web.1]: INFO: Starting ProtocolHandler [&quot;http-nio-28055&quot;]\n````\nif you can help\nBrgds \ncyrille\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "heroku", "tomcat" ],
    "owner" : {
      "account_id" : 7564416,
      "reputation" : 45,
      "user_id" : 5740621,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/E1Qfo.png?s=256",
      "display_name" : "aviateur22",
      "link" : "https://stackoverflow.com/users/5740621/aviateur22"
    },
    "is_answered" : false,
    "view_count" : 46,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1743581695,
    "creation_date" : 1743537919,
    "link" : "https://stackoverflow.com/questions/79549087/deploy-spring-boot-3-1-on-heroku-with-tomcat-10-1",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79550063,
    "question_id" : 79549087,
    "body" : "<p>You cannot change runtime (Tomcat version) of cloud service provider. <a href=\"https://devcenter.heroku.com/changelog-items/1724\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/changelog-items/1724</a> .</p>\n<p>use this</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n    ...\n    &lt;plugins&gt;\n        ...\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;&lt;goal&gt;copy&lt;/goal&gt;&lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;artifactItems&gt;\n                            &lt;artifactItem&gt;\n                                &lt;groupId&gt;com.heroku&lt;/groupId&gt;\n                                &lt;artifactId&gt;webapp-runner&lt;/artifactId&gt;\n                                &lt;version&gt;9.0.97.0&lt;/version&gt;\n                                &lt;destFileName&gt;webapp-runner.jar&lt;/destFileName&gt;\n                            &lt;/artifactItem&gt;\n                        &lt;/artifactItems&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>Source of code snipet <a href=\"https://devcenter.heroku.com/articles/java-webapp-runner\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/java-webapp-runner</a></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 4597208,
      "reputation" : 1,
      "user_id" : 3728901,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://www.gravatar.com/avatar/8621a1f0563a46ea809098b960d7923f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Vy Do",
      "link" : "https://stackoverflow.com/users/3728901/vy-do"
    },
    "creation_date" : 1743581695,
    "last_activity_date" : 1743581695,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79550063" : [ {
      "comment_id" : 140290468,
      "post_id" : 79550063,
      "body" : "We should be able to use a another version of tomcat with the webapp-runner version &gt;= 10.1.17.0 (<a href=\"https://devcenter.heroku.com/changelog-items/2789\" rel=\"nofollow noreferrer\">devcenter.heroku.com/changelog-items/2789</a>). but i am still with tomcat version 9.0.30",
      "score" : 0,
      "owner" : {
        "account_id" : 7564416,
        "reputation" : 45,
        "user_id" : 5740621,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/E1Qfo.png?s=256",
        "display_name" : "aviateur22",
        "link" : "https://stackoverflow.com/users/5740621/aviateur22"
      },
      "creation_date" : 1743598060,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}