{
  "question" : {
    "question_id" : 79641936,
    "title" : "How to use JAXB to generate map in Java classes",
    "body" : "<p>I'm working with a large XSD schema containing many <code>xsd:element</code> entries that have a <code>xml:lang</code> attribute. I would like to use JAXB with a custom binding to generate a <code>Map&lt;String, String&gt;</code> in the generated Java classes instead of individual classes for each of these elements.</p>\n<p>Here's a simplified example of such an element in the XSD:</p>\n<pre><code>&lt;xsd:element name=&quot;textileMaterialThreadCount&quot;&gt;\n  &lt;xsd:complexType&gt;\n    &lt;xsd:simpleContent&gt;\n      &lt;xsd:extension base=&quot;xsd:string&quot;&gt;\n        &lt;xsd:attribute ref=&quot;xml:lang&quot; use=&quot;required&quot;/&gt;\n      &lt;/xsd:extension&gt;\n    &lt;/xsd:simpleContent&gt;\n  &lt;/xsd:complexType&gt;\n&lt;/xsd:element&gt;\n</code></pre>\n<p>By default, JAXB generates a separate static class for each such element:</p>\n<pre><code>@XmlElement(required = true)\nprotected TextileMaterialDetails.TextileMaterialThreadCount textileMaterialThreadCount;\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = { &quot;value&quot; })\npublic static class TextileMaterialThreadCount {\n\n    @XmlValue\n    protected String value;\n\n    @XmlAttribute(name = &quot;lang&quot;, namespace = &quot;http://www.w3.org/XML/1998/namespace&quot;, required = true)\n    protected String lang;\n\n    public String getValue() { return value; }\n    public void setValue(String value) { this.value = value; }\n\n    public String getLang() { return lang; }\n    public void setLang(String lang) { this.lang = lang; }\n}\n</code></pre>\n<p>What I want instead:\nFor every such <code>xml:lang</code>-based element, I want JAXB to generate a <code>Map&lt;String, String&gt;</code> — where the key is the language code and the value is the string content.</p>\n<p>What I Tried:\nI attempted to write a custom <code>XmlAdapter</code> to handle this:</p>\n<pre><code>public class XmlLangMapAdapter extends XmlAdapter&lt;Object, Map&lt;String, String&gt;&gt; {\n\n    @Override\n    public Map&lt;String, String&gt; unmarshal(Object v) throws Exception {\n        if (v == null) return Collections.emptyMap();\n\n        Method getValue = v.getClass().getMethod(&quot;getValue&quot;);\n        Method getLang = v.getClass().getMethod(&quot;getLang&quot;);\n\n        String value = (String) getValue.invoke(v);\n        String lang = (String) getLang.invoke(v);\n\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        map.put(lang, value);\n        return map;\n    }\n\n    @Override\n    public Object marshal(Map&lt;String, String&gt; map) throws Exception {\n        throw new UnsupportedOperationException(&quot;Marshalling is not supported.&quot;);\n    }\n}\n</code></pre>\n<p>I tried applying this adapter via a custom JAXB binding file (<code>custom-bindings.xjb</code>), but I wasn’t successful in getting it to apply. Here's a sample of my current .xjb file (used for date mappings):</p>\n<pre><code>&lt;jaxb:bindings xmlns:jaxb=&quot;https://jakarta.ee/xml/ns/jaxb&quot;\n               xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n               version=&quot;3.0&quot;&gt;\n\n  &lt;jaxb:globalBindings&gt;\n    &lt;jaxb:javaType name=&quot;java.time.LocalDate&quot; xmlType=&quot;xs:date&quot; parseMethod=&quot;java.time.LocalDate.parse&quot;/&gt;\n    &lt;jaxb:javaType name=&quot;java.time.LocalDateTime&quot; xmlType=&quot;xs:dateTime&quot; parseMethod=&quot;java.time.LocalDateTime.parse&quot;/&gt;\n    &lt;jaxb:javaType name=&quot;java.time.Year&quot; xmlType=&quot;xs:gYear&quot; parseMethod=&quot;java.time.Year.parse&quot;/&gt;\n  &lt;/jaxb:globalBindings&gt;\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>I also tried to extend this with <code>&lt;javaType&gt;</code> or <code>@XmlJavaTypeAdapter</code>, but couldn't find a way to generically map the <code>xml:lang</code> pattern to <code>Map&lt;String, String&gt;</code> via bindings.</p>\n<p>My Setup:\nI'm using the following Maven setup for JAXB code generation:</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.jvnet.jaxb&lt;/groupId&gt;\n      &lt;artifactId&gt;jaxb-maven-plugin&lt;/artifactId&gt;\n      &lt;version&gt;4.0.8&lt;/version&gt;\n      &lt;executions&gt;\n        &lt;execution&gt;\n          &lt;goals&gt;\n            &lt;goal&gt;generate&lt;/goal&gt;\n          &lt;/goals&gt;\n        &lt;/execution&gt;\n      &lt;/executions&gt;\n      &lt;configuration&gt;\n        &lt;schemaDirectory&gt;${basedir}&lt;/schemaDirectory&gt;\n        &lt;bindingDirectory&gt;${basedir}/src/main/resources/schema&lt;/bindingDirectory&gt;\n        &lt;bindingIncludes&gt;custom-binding.xjb&lt;/bindingIncludes&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;\n  &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<ul>\n<li><p>How can I configure JAXB (via bindings or otherwise or other alternative) so that any XSD element with <code>xml:lang</code> is automatically mapped to a Map&lt;String, String&gt; in the generated Java classes, instead of generating a static class with value and lang?</p>\n</li>\n<li><p>Ideally, I'm looking for a generic, reusable approach that works across the entire schema or XSD file that has various kinds of elements, not a static or hardcoded mapping for one or two elements.</p>\n</li>\n<li><p>If this is not possible with JAXB alone, are there any tools or alternative strategies (e.g. post-processing with XJC plugins, model customisation) to achieve this kind of transformation?</p>\n</li>\n</ul>\n",
    "tags" : [ "java", "xml", "xsd", "jaxb" ],
    "owner" : {
      "account_id" : 10278040,
      "reputation" : 3642,
      "user_id" : 7584240,
      "user_type" : "registered",
      "accept_rate" : 17,
      "profile_image" : "https://i.sstatic.net/9BMGL.jpg?s=256",
      "display_name" : "BATMAN_2008",
      "link" : "https://stackoverflow.com/users/7584240/batman-2008"
    },
    "is_answered" : false,
    "view_count" : 65,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748518396,
    "creation_date" : 1748425282,
    "link" : "https://stackoverflow.com/questions/79641936/how-to-use-jaxb-to-generate-map-in-java-classes",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}