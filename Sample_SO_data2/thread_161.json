{
  "question" : {
    "question_id" : 79824928,
    "title" : "WildFly Undertow UT000173: Invalid control character [250] in cookie - persists",
    "body" : "<p>I'm experiencing a persistent cookie corruption issue with my Java EE web application deployed on WildFly 37.0.1.Final. The error appears immediately when accessing the application URL, even after clearing all browser cookies, server cache, and testing in incognito mode.</p>\n<p>I'm a development student and this issue is honestly driving me a bit crazy, since I can’t figure out why it keeps happening despite trying all the usual fixes. Any guidance would be really appreciated. Thanks in advance!</p>\n<h3>Error Details</h3>\n<p><strong>Full Error Message:</strong></p>\n<pre><code>java.lang.IllegalArgumentException: UT000173: An invalid control character [250] was present in the cookie value or attribute\n    at io.undertow.core@2.3.18.Final//io.undertow.util.LegacyCookieSupport.isHttpSeparator(LegacyCookieSupport.java:149)\n    at io.undertow.core@2.3.18.Final//io.undertow.util.LegacyCookieSupport.isHttpToken(LegacyCookieSupport.java:170)\n    at io.undertow.core@2.3.18.Final//io.undertow.util.LegacyCookieSupport.adjustedCookieVersion(LegacyCookieSupport.java:255)\n    at io.undertow.core@2.3.18.Final//io.undertow.server.Connectors.getCookieString(Connectors.java:195)\n    at io.undertow.core@2.3.18.Final//io.undertow.server.Connectors.flattenCookies(Connectors.java:121)\n</code></pre>\n<p><strong>When it occurs:</strong> Immediately upon accessing <code>http://localhost:8080/Pedidos/</code> before any user interaction.</p>\n<h3>Relevant <code>@SessionScoped</code> bean</h3>\n<pre><code>@Data\n@SessionScoped\n@Named\npublic class Cesta implements Serializable {\n    private static final long serialVersionUID = 1L;\n    private List productos = new ArrayList&lt;&gt;();\n    private User usuario;\n}\n</code></pre>\n<h3>Request forwarding code</h3>\n<pre><code>@WebServlet(&quot;/&quot;)\npublic class PedidosController extends HttpServlet {\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) \n            throws ServletException, IOException {\n        request.getRequestDispatcher(&quot;/login.jsp&quot;).forward(request, response);\n    }\n}\n</code></pre>\n<h3>persistence.xml</h3>\n<pre><code>&lt;persistence&gt;\n    &lt;persistence-unit name=&quot;Pubs&quot;&gt;\n        &lt;jta-data-source&gt;java:/Pubs&lt;/jta-data-source&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<h3>standalone.xml datasource</h3>\n<pre><code>&lt;connection-url&gt;jdbc:sqlserver://localhost:1433;databaseName=Pubs;encrypt=false&lt;/connection-url&gt;\n&lt;driver&gt;sqlserver&lt;/driver&gt;\n</code></pre>\n<p>That's all — thanks!</p>\n",
    "tags" : [ "java", "cookies", "jboss", "wildfly" ],
    "owner" : {
      "account_id" : 44738281,
      "reputation" : 21,
      "user_id" : 31910164,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JpWSvp42.jpg?s=256",
      "display_name" : "kinderBueno",
      "link" : "https://stackoverflow.com/users/31910164/kinderbueno"
    },
    "is_answered" : true,
    "view_count" : 52,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1763723549,
    "creation_date" : 1763586240,
    "link" : "https://stackoverflow.com/questions/79824928/wildfly-undertow-ut000173-invalid-control-character-250-in-cookie-persists",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79826440,
    "question_id" : 79824928,
    "body" : "<p><strong>SOLVED!</strong></p>\n<p>After extensive troubleshooting, I found the issue: my computer name was &quot;Belzebú&quot; (with an accented ú).</p>\n<p>I changed it to &quot;Belcebu&quot; (without the accent) and everything started working! The issue was how WildFly/Java handles special characters in system paths and hostnames.</p>\n<p>I can't believe something as simple as an accented character could cause this, but here we are!</p>\n<p>Lesson learned: Avoid special characters (á, é, í, ó, ú, ñ, etc.) in computer names when working with Java/WildFly.</p>\n<p>Thanks to everyone who helped!</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 44738281,
      "reputation" : 21,
      "user_id" : 31910164,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JpWSvp42.jpg?s=256",
      "display_name" : "kinderBueno",
      "link" : "https://stackoverflow.com/users/31910164/kinderbueno"
    },
    "creation_date" : 1763723549,
    "last_activity_date" : 1763723549,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140866054,
    "post_id" : 79824928,
    "body" : "@g00se I actually tried that too and it didn&#39;t work either. After reading through comments on other posts, I realized my PC was named &quot;BelZeb&#250;&quot; (with an accented &#250;) Changed it to &quot;Belzebu&quot; and everything finally works! Can&#39;t believe a simple accent in the computer name could cause all this chaos. Thanks so much to everyone who took the time to help, especially g00se for sticking with me through this. Really appreciate it!",
    "score" : 0,
    "owner" : {
      "account_id" : 44738281,
      "reputation" : 21,
      "user_id" : 31910164,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JpWSvp42.jpg?s=256",
      "display_name" : "kinderBueno",
      "link" : "https://stackoverflow.com/users/31910164/kinderbueno"
    },
    "creation_date" : 1763723181,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140866029,
    "post_id" : 79824928,
    "body" : "Actually that wasn&#39;t meant to be an answer. It was meant to be this comment: <i>... even after clearing all browser cookies, server cache, and testing in incognito mode</i>  That&#39;s not going to help. Clearing cookies will not prevent further writing attempts and nor will using incognito mode. Disallowing cookies at all from localhost might, but that would be a poor method of &#39;fixing&#39; the problem.",
    "score" : 1,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1763722069,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865968,
    "post_id" : 79824928,
    "body" : "@g00se thank u so muchh",
    "score" : 0,
    "owner" : {
      "account_id" : 44738281,
      "reputation" : 21,
      "user_id" : 31910164,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/JpWSvp42.jpg?s=256",
      "display_name" : "kinderBueno",
      "link" : "https://stackoverflow.com/users/31910164/kinderbueno"
    },
    "creation_date" : 1763720293,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865372,
    "post_id" : 79824928,
    "body" : "similar to <a href=\"https://stackoverflow.com/questions/46349095/undertow-request-failed-httpserverexchange-error-loading-web-page\">Undertow request failed HttpServerExchange error loading web page</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 2230571,
      "reputation" : 2805,
      "user_id" : 1968258,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ov83X.jpg?s=256",
      "display_name" : "Marcos Zolnowski",
      "link" : "https://stackoverflow.com/users/1968258/marcos-zolnowski"
    },
    "creation_date" : 1763683312,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865336,
    "post_id" : 79824928,
    "body" : "similar to <a href=\"https://stackoverflow.com/questions/67693002/error-io-undertow-request-default-task-1-ut005071-undertow-request-failed-h\">UT005071: Undertow request failed HttpServerExchange</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 2230571,
      "reputation" : 2805,
      "user_id" : 1968258,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ov83X.jpg?s=256",
      "display_name" : "Marcos Zolnowski",
      "link" : "https://stackoverflow.com/users/1968258/marcos-zolnowski"
    },
    "creation_date" : 1763680433,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865220,
    "post_id" : 79824928,
    "body" : "I&#39;m going to take a guess that it might be to do with how the Wildfly/Undertow environment is set up with regard to character encoding, but I&#39;m not sure",
    "score" : 2,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1763675586,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140863252,
    "post_id" : 79824928,
    "body" : "Is there a copy of the full source anywhere accessible to us?",
    "score" : 3,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1763589164,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79826440" : [ {
      "comment_id" : 140866070,
      "post_id" : 79826440,
      "body" : "Glad you got it sorted out. I&#39;m going to take a guess that the host OS is Windows ;)",
      "score" : 0,
      "owner" : {
        "account_id" : 22124137,
        "reputation" : 4244,
        "user_id" : 16376827,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name" : "g00se",
        "link" : "https://stackoverflow.com/users/16376827/g00se"
      },
      "creation_date" : 1763723768,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}