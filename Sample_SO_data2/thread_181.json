{
  "question" : {
    "question_id" : 79832635,
    "title" : "getResource returns null for a resource that does exist",
    "body" : "<p>I have resurrected a program written in Java using Eclipse: I last worked on it in 2016. I am now using JaveSE-21, and this code no longer works- the returned URL is null.</p>\n<pre><code>String name = &quot;res/images/ifx_micro_red.png&quot;;\nURL url = ClickImage.class.getClassLoader().getResource(name);\n</code></pre>\n<p>res and res.images appear directly below src in the project tree.</p>\n<p>If I add this code just beforehand, the file ifx_micro_red.png is listed.</p>\n<pre><code>Scanner scanner = new Scanner(ClickImage.class.getClassLoader().getResourceAsStream(&quot;res/images&quot;));\nwhile (scanner.hasNextLine()) {\n   System.out.println(scanner.nextLine());\n}\nscanner.close ();\n</code></pre>\n<p>I don't understand how getResourceAsStream can find the file, but getResource cannot.</p>\n<hr>\nUpdate: I used the debugger to step into getResource, and found that it returns null because the module descriptor says that open is false. \nSo, I am allowed to see that the file appears in the listing of the res/images directory, but I am not allowed to open it, and this (bizarrely) is implemented by returning a null URL for the file. \n<p>It seems that I need to put something like\nres open\nin the module_info file, but I have not yet found the correct syntax.</p>\n",
    "tags" : [ "java", "java-resources" ],
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "is_answered" : false,
    "view_count" : 110,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1764376682,
    "creation_date" : 1764338869,
    "link" : "https://stackoverflow.com/questions/79832635/getresource-returns-null-for-a-resource-that-does-exist",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140879741,
    "post_id" : 79832635,
    "body" : "If you have a <code>module-info.java</code> file then add an <code>opens res.images;</code> directive. If you don&#39;t have that file then all your packages are already &quot;open&quot;. Or you could use <code>Class::getResource</code>--instead of <code>ClassLoader::getResource</code>--with a class inside your module and it will work in either case, even if the package isn&#39;t opened.",
    "score" : 0,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1764481577,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878406,
    "post_id" : 79832635,
    "body" : "@rzwitersloot I was using getResource rather than getResourceAsStream because I wanted to pass the url to iomageio.read (). It turns out that imageio.read() can also accept a stream, so I am now doing it that way.",
    "score" : 0,
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "creation_date" : 1764376794,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878402,
    "post_id" : 79832635,
    "body" : "@rzwitserloot you were right: the problem is with using modules. I set up a new &#39;non-module&#39; project, imported all the files, and it worked. Just like that. Feel free to post that as an answer and I&#39;ll accept it.",
    "score" : 0,
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "creation_date" : 1764376549,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878400,
    "post_id" : 79832635,
    "body" : "@g00se It&#39;s fine saying &quot;Do it right&quot;, but the trick is knowing what &quot;right&quot; is.  Using /src/main/resources/images doesn&#39;t work, because this isn&#39;t a Maven project. For a vanilla Eclipse project, the resources are in /src/res. The issue is not the location of the resources, but permission to access a particular resource.",
    "score" : 0,
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "creation_date" : 1764376465,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878380,
    "post_id" : 79832635,
    "body" : "I tend to discourage discussion of weird side effects of doing things wrong. Do it right. Do it NOW. If you like the mental exercise of wrestling with problems, you&#39;ll probably find you still have some problem to get your teeth into when you do it the <i>right</i> way.",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1764374396,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878363,
    "post_id" : 79832635,
    "body" : "@g00se well when you do not package your compiled classes and resources into an archive like JAR or WAR or EAR, and do not have your project under management of a build tool, folder structure <i>will</i> have an impact. I agree with you that one should not rely on weird side effects.",
    "score" : 0,
    "owner" : {
      "account_id" : 3391382,
      "reputation" : 5350,
      "user_id" : 2846138,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2sp68.png?s=256",
      "display_name" : "cyberbrain",
      "link" : "https://stackoverflow.com/users/2846138/cyberbrain"
    },
    "creation_date" : 1764372574,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878358,
    "post_id" : 79832635,
    "body" : "@g00se While that (use just &#39;images&#39;, not &#39;res/images&#39;) is a good idea, it has nothing to do with OP&#39;s problem. And it&#39;s not such a stellar plan that one should drop everything and refactor an existing resurrected project. I wouldn&#39;t mess with existing structures at all here, the gain is near zilch here. OP is clearly not trying to treat their resources as files, that&#39;s not the problem here. I think that&#39;s what g00se is getting at, but cyberbrain&#39;s advice about printing user.dir is completely irrelevant, that has <i>no effect whatsoever</i> on gRAS/getResource!",
    "score" : 0,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1764372444,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878226,
    "post_id" : 79832635,
    "body" : "Files/folders and resources are completely different paradigms and shouldn&#39;t be and <i>cannot</i> be mixed. The only time you would treat an image file-wise is if the user were able to enter an arbitrary path for the app to work upon. I&#39;m guessing that&#39;s <i>not</i> the case here. A resource path (url) should not map to a <i>directory</i> (such as <code>&quot;res&#47;images&quot;</code>) as that makes no sense",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1764365010,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878067,
    "post_id" : 79832635,
    "body" : "Another possibility would be that you start the two pieces of code in a different folder, you should print out <code>System.getProperty(&quot;user.dir&quot;)</code> for both cases, just to make sure you start in the same folder, because you work with a relative path.",
    "score" : 0,
    "owner" : {
      "account_id" : 3391382,
      "reputation" : 5350,
      "user_id" : 2846138,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2sp68.png?s=256",
      "display_name" : "cyberbrain",
      "link" : "https://stackoverflow.com/users/2846138/cyberbrain"
    },
    "creation_date" : 1764355490,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140878066,
    "post_id" : 79832635,
    "body" : "are you sure it is not a filesystem issue? So do you have the permissions to read the folder <i>res/images</i>  and the file <i>ifx_micro_red.png</i> as well?",
    "score" : 0,
    "owner" : {
      "account_id" : 3391382,
      "reputation" : 5350,
      "user_id" : 2846138,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2sp68.png?s=256",
      "display_name" : "cyberbrain",
      "link" : "https://stackoverflow.com/users/2846138/cyberbrain"
    },
    "creation_date" : 1764355395,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877942,
    "post_id" : 79832635,
    "body" : "You&#39;d be wise to migrate your tree to a build tool compliant structure. &#39;res&#39; is redundant really. You need <code>&#47;src&#47;main&#47;resources&#47;images</code> only, in which to place your image resources. Load with something like: <code>contentPane.add(new JLabel(new ImageIcon(ClickImage.class.getResource(&quot;&#47;images&#47;ifx_micro_re&zwnj;&#8203;d.png&quot;))));</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1764349209,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877891,
    "post_id" : 79832635,
    "body" : "About your actual problem (not posting as an answer because I am unsure if it&#39;s right): [A] don&#39;t use the module system. Few do, it&#39;s annoying, and adds nothing. It&#39;s for the JDK itself. But, if you must, [B] The gRAS system is sort of designed around the idea that resources also follow the packaging namespace and concept. And module-info.java has an &#39;opens&#39; that takes a package. So, open the &#39;package&#39; that your resource is in. Here that is <code>res.images</code>. You may want to revisit where you stick those images.",
    "score" : 0,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1764347064,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877886,
    "post_id" : 79832635,
    "body" : "Note that you&#39;re kinda doing it wrong. The right syntax is <code>ClickImage.class.getResourceAsStream(&quot;&#47;&quot; + whatYouHave)</code>. Going via the ClassLoader will get you an NPE in boot contexts. Also, it&#39;s pointless extra code. The only difference is that the <code>gRAS</code> and <code>getResource</code> calls on <code>Class</code> itself are relative to the class unless you shove a / in front.",
    "score" : 3,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1764346947,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877770,
    "post_id" : 79832635,
    "body" : "@greg-449 correct. Not sure how to open the resources. Oddly, I can access MessagesBundle files.",
    "score" : 0,
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "creation_date" : 1764342436,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877764,
    "post_id" : 79832635,
    "body" : "@Rumi-SEMustFollowtheCC-SA no, it&#39;s not.",
    "score" : 1,
    "owner" : {
      "account_id" : 3396830,
      "reputation" : 396,
      "user_id" : 2850217,
      "user_type" : "registered",
      "accept_rate" : 42,
      "profile_image" : "https://i.sstatic.net/QZr9N.png?s=256",
      "display_name" : "JavaLatte",
      "link" : "https://stackoverflow.com/users/2850217/javalatte"
    },
    "creation_date" : 1764342329,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877739,
    "post_id" : 79832635,
    "body" : "Note newer versions of Java have much stricter rules about what can be accessed if the module system is being used. See the Javadoc for <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/ClassLoader.html#getResource(java.lang.String)\" rel=\"nofollow noreferrer\">getResource</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 3159259,
      "reputation" : 111562,
      "user_id" : 2670892,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/4iPV5.png?s=256",
      "display_name" : "greg-449",
      "link" : "https://stackoverflow.com/users/2670892/greg-449"
    },
    "creation_date" : 1764341653,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877681,
    "post_id" : 79832635,
    "body" : "Is the file embedded inside a JAR?",
    "score" : 2,
    "owner" : {
      "account_id" : 24947964,
      "reputation" : 43,
      "user_id" : 18813094,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Tctij.png?s=256",
      "display_name" : "Rumi-SE Must Follow the CC-SA",
      "link" : "https://stackoverflow.com/users/18813094/rumi-se-must-follow-the-cc-sa"
    },
    "creation_date" : 1764339862,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}