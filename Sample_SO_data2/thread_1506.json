{
  "question" : {
    "question_id" : 79702909,
    "title" : "How to use a Service or Repository from another module in a Java Spring Boot monolithic project?",
    "body" : "<p>I have an Admin module and a Core module, I have to use the CustomerRepository from Admin module in Core Module. When I try to import the module as a dependency, I get build errors. It says the CustomerRepository is not found, but during compile time it shows and can code.</p>\n<p>Here I added the Admin module in Core</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.TMS&lt;/groupId&gt;\n    &lt;artifactId&gt;tms-admin&lt;/artifactId&gt;\n    &lt;version&gt;3.4.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I used the CustomerRepository in the TransportOrder service method like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service \n@RequiredArgsConstructor \n@Slf4j \npublic class TransportOrderServiceImpl implements TransportOrderService {\n\nprivate final CustomerRepository customerRepository;\n\n}\n</code></pre>\n<p>Note: both use a module called tms-common, it's for sharing DTOs across other modules.</p>\n<p>I ran <code>mvn clean install -e -X</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:...:compile (default-compile) on project tms-core: Compilation failure:\n[ERROR] cannot find symbol\n[ERROR]   symbol:   class CustomerRepository\n[ERROR]   location: package com.TMS.repository\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "maven", "monolithic", "maven-multi-module" ],
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "is_answered" : true,
    "view_count" : 223,
    "closed_date" : 1753122648,
    "answer_count" : 3,
    "score" : -1,
    "last_activity_date" : 1753104899,
    "creation_date" : 1752640201,
    "link" : "https://stackoverflow.com/questions/79702909/how-to-use-a-service-or-repository-from-another-module-in-a-java-spring-boot-mon",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79709142,
    "question_id" : 79702909,
    "body" : "<p>You’ve created a <strong>circular dependency</strong>, or you're importing a module (tms-admin) that should not expose JPA Repositories to other modules like tms-core.</p>\n<p>Spring Boot multi-module architecture best practices discourage cross-module repository usage like this.</p>\n<p>A good solution here could be Restructure Your Modules.</p>\n<ul>\n<li><p>Move <strong>CustomerRepository</strong> and related entities (like <strong>Customer</strong>) into a <strong>new shared module</strong>, like TMS-data</p>\n</li>\n<li><p>then update your module dependencies like:</p>\n<p>In core:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.TMS&lt;/groupId&gt;\n    &lt;artifactId&gt;tms-data&lt;/artifactId&gt;\n    &lt;version&gt;3.4.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>in admin:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.TMS&lt;/groupId&gt;\n    &lt;artifactId&gt;tms-data&lt;/artifactId&gt;\n    &lt;version&gt;3.4.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Now both core and admin can use CustomerRepository <strong>without circular dependency</strong>.</p>\n<p>Do not forget to enable JPA repository scanning in your main application (usually in core):</p>\n<p>@SpringBootApplication(scanBasePackages = &quot;com.TMS&quot;)</p>\n<p>@EnableJpaRepositories(basePackages = &quot;com.TMS.customer.repository&quot;)</p>\n<p>@EntityScan(basePackages = &quot;com.TMS.customer.model&quot;)</p>\n<p>Using CustomerRepository directly from tms-admin inside tms-core creates tight coupling and breaks modularity.</p>\n<p>It <strong>may work temporarily</strong> with tricks like manually adding @ComponentScan, but will always break Maven and clean builds due to dependency cycles.</p>\n</li>\n</ul>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 15602074,
      "reputation" : 21,
      "user_id" : 11255927,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8c2e5ac074f9fdca0f3b92a5c5e9e964?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "vee",
      "link" : "https://stackoverflow.com/users/11255927/vee"
    },
    "creation_date" : 1753104585,
    "last_activity_date" : 1753104671,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79709100,
    "question_id" : 79702909,
    "body" : "<p>I think, tms-admin, it should be a jar as a Util that needs to be pushed. Additionally, all dependencies required to use the tms-admin should also be present in the current module. Furthermore, you must include these dependencies in the component scan. Additionally, the CustomerRepository class should be public and have a bean annotation.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28818722,
      "reputation" : 26,
      "user_id" : 22071759,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AAcHTtflQySFQNK_ZlucgVlrJqfF_vD5xYwe4qkS4oyLEQ=k-s256",
      "display_name" : "commit",
      "link" : "https://stackoverflow.com/users/22071759/commit"
    },
    "creation_date" : 1753102457,
    "last_activity_date" : 1753102457,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79709148,
    "question_id" : 79702909,
    "body" : "<p>You’re getting the error because your <code>tms-core</code> module cannot see the <code>CustomerRepository</code> class at compile time.</p>\n<p>Make sure of these things:</p>\n<ol>\n<li><p><strong>Correct dependency</strong><br />\nIn <code>tms-core/pom.xml</code>, add:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.TMS&lt;/groupId&gt;\n    &lt;artifactId&gt;tms-admin&lt;/artifactId&gt;\n    &lt;version&gt;3.4.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p><strong>Repository is public and in right package</strong><br />\nCheck that <code>CustomerRepository</code> is public and in the <code>com.TMS.repository</code> package.</p>\n</li>\n<li><p><strong>No circular dependencies</strong><br />\nMake sure <code>tms-admin</code> does <strong>not</strong> depend on <code>tms-core</code>. Maven does not allow circular dependencies.</p>\n</li>\n<li><p><strong>Module is in parent pom.xml</strong><br />\nYour root <code>pom.xml</code> should include all modules:</p>\n<pre><code>&lt;modules&gt;\n    &lt;module&gt;tms-common&lt;/module&gt;\n    &lt;module&gt;tms-admin&lt;/module&gt;\n    &lt;module&gt;tms-core&lt;/module&gt;\n&lt;/modules&gt;\n\n</code></pre>\n</li>\n<li><p><strong>IDE cache</strong></p>\n<p>If you use IntelliJ or another IDE, try:</p>\n</li>\n</ol>\n<ul>\n<li><p>Reimport Maven project</p>\n</li>\n<li><p>Invalidate caches and restart</p>\n</li>\n</ul>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28079183,
      "reputation" : 35,
      "user_id" : 21450546,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxabiTJycSVdM0yuScZoC4o1t0AlVWb230_rswy3=k-s256",
      "display_name" : "Nurlis Kimbiletov",
      "link" : "https://stackoverflow.com/users/21450546/nurlis-kimbiletov"
    },
    "creation_date" : 1753104899,
    "last_activity_date" : 1753104899,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140594181,
    "post_id" : 79702909,
    "body" : "@M.Deinum hey, thank you so much for your answers. I&#39;ve decided to use Feign client to call the customer resource. I was first hesitant because I thought feign would be a lot slower.",
    "score" : 0,
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "creation_date" : 1752675783,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140593377,
    "post_id" : 79702909,
    "body" : "Only 1 <code>application.yaml</code> will be loaded from 1 location. The one in your own project will be loaded as that is the one detected (and overriding) the one from the jar (they are both in the same place, the root of the classpath).",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1752657319,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140593365,
    "post_id" : 79702909,
    "body" : "@M.Deinum, So, It worked and the build is completed after doing what the reference guide said &lt;classifier&gt;exec&lt;/classifier&gt;. but the problem is applicatoin.yml file&#39;s variable values are not picking up. how can I solve this? also I have to tell to pick up the separate profile configuration file.",
    "score" : 0,
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "creation_date" : 1752657107,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140593009,
    "post_id" : 79702909,
    "body" : "yah @M.Deinum tms-admin is another application.",
    "score" : 0,
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "creation_date" : 1752650911,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592992,
    "post_id" : 79702909,
    "body" : "If <code>tms-admin</code> is another Spring Boot application you cannot use that as a dependency. How to make it work is described in <a href=\"https://docs.spring.io/spring-boot/how-to/build.html#howto.build.use-a-spring-boot-application-as-dependency\" rel=\"nofollow noreferrer\">the reference guide</a>. Another option is to move the shared code to a dedicated shared project and share between both projects.",
    "score" : 0,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1752650406,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592980,
    "post_id" : 79702909,
    "body" : "yah I imported the CustomerRepository in the TMS-Core&#39;s service class.",
    "score" : 0,
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "creation_date" : 1752650158,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592942,
    "post_id" : 79702909,
    "body" : "CustomerRepository is in the TMS admin.",
    "score" : 0,
    "owner" : {
      "account_id" : 19753395,
      "reputation" : 1,
      "user_id" : 14464257,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
      "display_name" : "RagJN",
      "link" : "https://stackoverflow.com/users/14464257/ragjn"
    },
    "creation_date" : 1752649441,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592937,
    "post_id" : 79702909,
    "body" : "Did you add an import for <code>CustomerRepository</code>? (It is in a package, right?)",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1752649245,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79709142" : [ {
      "comment_id" : 140611074,
      "post_id" : 79709142,
      "body" : "I moved on from this approch, and using FeignClient.",
      "score" : 0,
      "owner" : {
        "account_id" : 19753395,
        "reputation" : 1,
        "user_id" : 14464257,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GhZ3zHu24jw7gDaTq6NZmEgBageeLovHEhvhZyyrQ=k-s256",
        "display_name" : "RagJN",
        "link" : "https://stackoverflow.com/users/14464257/ragjn"
      },
      "creation_date" : 1753255682,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140606718,
      "post_id" : 79709142,
      "body" : "Yes, both can be Spring Boot apps — that does not change the rule about modular design",
      "score" : 0,
      "owner" : {
        "account_id" : 15602074,
        "reputation" : 21,
        "user_id" : 11255927,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/8c2e5ac074f9fdca0f3b92a5c5e9e964?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "vee",
        "link" : "https://stackoverflow.com/users/11255927/vee"
      },
      "creation_date" : 1753117638,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140606599,
      "post_id" : 79709142,
      "body" : "Here, I can see both are Spring Boot applications. Can we use it if it is also a Spring Boot application?",
      "score" : 0,
      "owner" : {
        "account_id" : 28818722,
        "reputation" : 26,
        "user_id" : 22071759,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/AAcHTtflQySFQNK_ZlucgVlrJqfF_vD5xYwe4qkS4oyLEQ=k-s256",
        "display_name" : "commit",
        "link" : "https://stackoverflow.com/users/22071759/commit"
      },
      "creation_date" : 1753115029,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}