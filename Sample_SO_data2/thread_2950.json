{
  "question" : {
    "question_id" : 79585813,
    "title" : "Is there a way to get a list of entities registered in a room database?",
    "body" : "<p>Is there a way to get a list of Class objects which is the same list that is specified in the Database annotation of the RoomDatabase implementation? I've tried to access that same annotation but for some reason</p>\n<pre><code>val dbAnnotation = AppDatabase::class.java.getAnnotation(Database::class.java)\n</code></pre>\n<p>returns <code>null</code>. I also don't see any fitting methods on the actual instance of the Database.</p>\n<pre><code>@Database(\n    entities = {\n        // How do I get this entities list in my code dynamically?\n    },\n    autoMigrations = {\n        ...\n    },\n    version = 2\n)\npublic abstract class AppDatabase extends RoomDatabase {\n...\n}\n</code></pre>\n",
    "tags" : [ "java", "android", "kotlin", "android-room" ],
    "owner" : {
      "account_id" : 31255093,
      "reputation" : 53,
      "user_id" : 24062281,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b9ae51d2b4ecf004eca9b7872061c069?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jan Th&#252;rmann",
      "link" : "https://stackoverflow.com/users/24062281/jan-th%c3%bcrmann"
    },
    "is_answered" : false,
    "view_count" : 104,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1745310105,
    "creation_date" : 1745303457,
    "link" : "https://stackoverflow.com/questions/79585813/is-there-a-way-to-get-a-list-of-entities-registered-in-a-room-database",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79585990,
    "question_id" : 79585813,
    "body" : "<p>there are several reasons why it might return null. are you running in minifield context? this might strip the annotations.</p>\n<p>this should work out probably, if you find it correctly.</p>\n<pre><code>val dbAnnotation = AppDatabase::class.java.getAnnotation(androidx.room.Database::class.java)\n\nif (dbAnnotation != null) {\n    val entityClasses = dbAnnotation.entities\n    for (entity in entityClasses) {\n       // do whatever you please\n    }\n} else {\n    println(&quot;bad luck!&quot;)\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28362342,
      "reputation" : 13,
      "user_id" : 21692158,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f820294e4a64cb18cba28cd19d4ec39f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mingus2",
      "link" : "https://stackoverflow.com/users/21692158/mingus2"
    },
    "creation_date" : 1745310105,
    "last_activity_date" : 1745310105,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140375604,
    "post_id" : 79585813,
    "body" : "<code>getAnnotation(Database::class.java)</code> returns null because annotations on Kotlin classes don&#39;t carry over automatically to Java&#39;s reflection system in certain cases. This can happen if the annotation is not <code>@Retention(AnnotationRetention.RUNTIME)</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 3525574,
      "reputation" : 883,
      "user_id" : 2946787,
      "user_type" : "registered",
      "accept_rate" : 80,
      "profile_image" : "https://i.sstatic.net/82Qt1Y1T.jpg?s=256",
      "display_name" : "sfinja",
      "link" : "https://stackoverflow.com/users/2946787/sfinja"
    },
    "creation_date" : 1745827763,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140374532,
    "post_id" : 79585813,
    "body" : "Room&#39;s annotations are marked <code>@Retention(AnnotationRetention.BINARY)</code> (<a href=\"https://developer.android.com/reference/androidx/room/Database\" rel=\"nofollow noreferrer\">example</a>), which means that they&#39;re available to the build tools and such, but not at runtime. The easiest alternative is probably to manually create a companion or top-level list.",
    "score" : 0,
    "owner" : {
      "account_id" : 3397419,
      "reputation" : 39341,
      "user_id" : 2850651,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ooWVw.jpg?s=256",
      "display_name" : "Mike M.",
      "link" : "https://stackoverflow.com/users/2850651/mike-m"
    },
    "creation_date" : 1745787260,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140356861,
    "post_id" : 79585813,
    "body" : "I don&#39;t see how that is any different. As expected, annotation?.entities is null.",
    "score" : 0,
    "owner" : {
      "account_id" : 31255093,
      "reputation" : 53,
      "user_id" : 24062281,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b9ae51d2b4ecf004eca9b7872061c069?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jan Th&#252;rmann",
      "link" : "https://stackoverflow.com/users/24062281/jan-th%c3%bcrmann"
    },
    "creation_date" : 1745308167,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140356695,
    "post_id" : 79585813,
    "body" : "Can you try val annotation = AppDatabase::class.java.getAnnotation(androidx.room.Database&zwnj;&#8203;::class.java) val entities = annotation?.entities?",
    "score" : 0,
    "owner" : {
      "account_id" : 5523754,
      "reputation" : 20738,
      "user_id" : 4385913,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://i.sstatic.net/ijSum.png?s=256",
      "display_name" : "Skizo-ozᴉʞS ツ",
      "link" : "https://stackoverflow.com/users/4385913/skizo-oz%e1%b4%89%ca%9es-%e3%83%84"
    },
    "creation_date" : 1745304501,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79585990" : [ {
      "comment_id" : 140357879,
      "post_id" : 79585990,
      "body" : "What is minifield context?",
      "score" : 0,
      "owner" : {
        "account_id" : 31255093,
        "reputation" : 53,
        "user_id" : 24062281,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b9ae51d2b4ecf004eca9b7872061c069?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Jan Th&#252;rmann",
        "link" : "https://stackoverflow.com/users/24062281/jan-th%c3%bcrmann"
      },
      "creation_date" : 1745329093,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140357875,
      "post_id" : 79585990,
      "body" : "Why would adding &quot;androidx.room.&quot; in front of Database change anything? The above code just prints &quot;bad luck!&quot;.",
      "score" : 0,
      "owner" : {
        "account_id" : 31255093,
        "reputation" : 53,
        "user_id" : 24062281,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b9ae51d2b4ecf004eca9b7872061c069?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Jan Th&#252;rmann",
        "link" : "https://stackoverflow.com/users/24062281/jan-th%c3%bcrmann"
      },
      "creation_date" : 1745329061,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}