{
  "question" : {
    "question_id" : 79625153,
    "title" : "PING AM 8.0 installation fails: ConnectionPool is already closed",
    "body" : "<p>I'm trying to install PING AM (formerly forgerock) on Ubuntu Server and Tomcat10.</p>\n<p>During the install, either via interactive or passive install i get stuck at <code>Reinitializing system properties</code> for <code>ConnectionPool is already closed</code></p>\n<p>I'm not sure which connection is closed and why.</p>\n<p>AM can connect to the PING DS LDAP, both config and identities ldaps. I can see it modifying the LDAP.</p>\n<p>The details:</p>\n<pre><code>05/16/2025 12:02:49:615 PM UTC: Loading Schema opendj_uma_pending_requests.ldif\n05/16/2025 12:02:52:616 PM UTC: ...Success.\n05/16/2025 12:02:52:617 PM UTC: Reinitializing system properties.\nAMSetupServlet.processRequest: error java.lang.IllegalStateException: ConnectionPool is already closed\n        at org.forgerock.opendj.ldap.ConnectionPool.connect0(ConnectionPool.java:460)\n        at org.forgerock.opendj.ldap.ConnectionPool$1.subscribeActual(ConnectionPool.java:364)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleDoOnTerminate.subscribeActual(SingleDoOnTerminate.java:34)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleDoOnSuccess.subscribeActual(SingleDoOnSuccess.java:35)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleDoOnError.subscribeActual(SingleDoOnError.java:35)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:35)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleDefer.subscribeActual(SingleDefer.java:43)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleMap.subscribeActual(SingleMap.java:35)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleFlatMapPublisher.subscribeActual(SingleFlatMapPublisher.java:59)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15917)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15863)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableUsing.subscribeActual(FlowableUsing.java:73)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15917)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableDoOnEach.subscribeActual(FlowableDoOnEach.java:50)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15917)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15863)\n        at io.reactivex.rxjava3.internal.operators.single.SingleFlatMapPublisher$SingleFlatMapPublisherObserver.onSuccess(SingleFlatMapPublisher.java:96)\n        at io.reactivex.rxjava3.internal.operators.single.SingleFromCallable.subscribeActual(SingleFromCallable.java:55)\n        at io.reactivex.rxjava3.core.Single.subscribe(Single.java:4855)\n        at io.reactivex.rxjava3.internal.operators.single.SingleFlatMapPublisher.subscribeActual(SingleFlatMapPublisher.java:59)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15917)\n        at io.reactivex.rxjava3.core.Flowable.subscribe(Flowable.java:15863)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableRepeatWhen$WhenReceiver.onNext(FlowableRepeatWhen.java:100)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableFlatMap$MergeSubscriber.tryEmit(FlowableFlatMap.java:270)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableFlatMap$InnerSubscriber.onNext(FlowableFlatMap.java:627)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableUsing$UsingSubscriber.onNext(FlowableUsing.java:104)\n        at io.reactivex.rxjava3.internal.operators.flowable.FlowableTimer$TimerSubscriber.run(FlowableTimer.java:76)\n        at io.reactivex.rxjava3.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:38)\n        at io.reactivex.rxjava3.internal.schedulers.ScheduledDirectTask.call(ScheduledDirectTask.java:25)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1583)\n\n\nDumping all configuration parameters...\n\nRequest Parameters:\nacceptLicense = true\nADMIN_CONFIRM_PWD = #########\nADMIN_PWD = #########\nAMLDAPUSERPASSWD = #########\nAMLDAPUSERPASSWD_CONFIRM = #########\nBASE_DIR = /root/am\nCOOKIE_DOMAIN = .forgerock.local\nDATA_STORE = dirServer\nDIRECTORY_ADMIN_PORT = 4444\nDIRECTORY_PORT = 1636\nDIRECTORY_SERVER = ds.forgerock.local\nDIRECTORY_SSL = SSL\nDS_DIRMGRDN = uid=am-config,ou=admins,ou=am-config\nDS_DIRMGRPASSWD = #########\nlocale = en_US\nPLATFORM_LOCALE = en_US\nROOT_SUFFIX = ou=am-config\nSERVER_URL = https://forgerock.local:8443\nUserStore = #########\nUSERSTORE_DOMAINNAME = ds.forgerock.local\nUSERSTORE_HOST = ds.forgerock.local\nUSERSTORE_MGRDN = uid=am-identity-bind-account,ou=admins,ou=identities\nUSERSTORE_PASSWD = #########\nUSERSTORE_PORT = 2636\nUSERSTORE_SSL = SSL\nUSERSTORE_SUFFIX = ou=identities\nUSERSTORE_TYPE = LDAPv3ForOpenDS\n\nExternal user repo configuration items:\nUSERSTORE_PASSWD = #########\nuserStoreDomainName = ds.forgerock.local\nuserStoreHostName = ds.forgerock.local\nuserStoreLoginID = uid=am-identity-bind-account,ou=admins,ou=identities\nuserStoreLoginPassword = #########\nuserStorePort = 2636\nuserStoreRootSuffix = ou=identities\nuserStoreSSL = SSL\nuserStoreType = LDAPv3ForOpenDS\n\nMain configuration items:\nacceptLicense = true\nactionLink = createConfig\nADMIN_PWD = #########\nAM_COEXIST = false\nAM_ENC_KEY = #########\nAM_REALM = true\nAMLDAPUSERPASSWD = #########\nAMLDAPUSERPASSWD_CONFIRM = #########\nAMSDK_I18N_KEY = a101\nAUTH_DEFAULT_CONFIG = ldapService\nBASE_DIR = /root/am\nCONFIGURATION_PROVIDER_CLASS = com.sun.identity.plugin.configuration.impl.ConfigurationInstanceImpl\nCONSOLE_URI = /am\nCOOKIE_DOMAIN = .forgerock.local\nCOOKIE_ENCODE = false\nDATA_STORE = dirServer\nDATASTORE_NOTIFICATION = true\nDATASTORE_PROVIDER_CLASS = com.sun.identity.plugin.datastore.impl.IdRepoDataStoreProvider\nDB_NAME = appData\nDEBUG_DIR = debug\nDEBUG_SUBDIR = debug\nDEFAULT_AUTH_MODULE = DataStore\nDEFAULT_ORG = ou=am-config\nDIRECTORY_ADMIN_PORT = 4444\nDIRECTORY_JMX_PORT = 1689\nDIRECTORY_PORT = 1636\nDIRECTORY_SERVER = ds.forgerock.local\nDIRECTORY_SSL = SSL\nDISABLE_PERSISTENT_SEARCH = aci,um\nDIT_LOADED = false\nDS_DIRMGRDN = uid=am-config,ou=admins,ou=am-config\nDS_DIRMGRPASSWD = #########\nDS_UM_SCHEMA = sms\nENCADADMINPASSWD = #########\nENCADMINPASSWD = #########\nENCDSDIRMGRPASSWD = #########\nGlobalAccessTokenModificationScriptId = d22f9a0c-426a-4466-b95e-d0f125b0d5fa\nGlobalAmazonProfileNormalizationScriptId = 6b3cfd48-62d3-48ff-a96f-fe8f3a22ab30\nGlobalAppleProfileNormalizationScriptId = 484e6246-dbc6-4288-97e6-54e55431402e\nGlobalAuthenticationTreeDecisionNodeScriptId = 01e1a3c0-038b-4c16-956a-6c9d89328cff\nGlobalClientSideAuthModuleScriptId = c827d2b4-3608-4693-868e-bbcf86bd87c7\nGlobalClientSideDeviceIdMatchScriptId = 157298c0-7d31-4059-a95b-eeb08473b7e5\nGlobalConfigProviderScriptId = 5e854779-6ec1-4c39-aeba-0477e0986646\nGlobalDeviceProfileMatchDecisionNodeScriptId = 13e3f263-9cd3-4844-8d1c-040fd0dd02eb\nGlobalEntitlementConditionScriptId = 9de3eb62-f131-4fac-a294-7bd170fd4acb\nGlobalFacebookProfileNormalizationScriptId = bae1d54a-e97d-4997-aa5d-c027f21af82c\nGlobalGitHubProfileNormalizationScriptId = a7a78773-445b-4eca-bb93-409e86bced81\nGlobalGoogleProfileNormalizationScriptId = 58d29080-4563-480b-89bb-1e7719776a21\nGlobalInstagramProfileNormalizationScriptId = 1244e639-4a31-401d-ab61-d75133d8dc9e\nGlobalItsmeProfileNormalizationScriptId = 3d97c436-42c0-4dd0-a571-ea6f34f752b3\nGlobalLibraryScriptId = 6c49bebe-3a62-11ed-a261-0242ac120002\nGlobalLinkedInProfileNormalizationScriptId = 8862ca8f-7770-4af5-a888-ac0df0947f36\nGlobalMayActScriptId = c735de08-f8f2-4e69-aa4a-2d8d3d438323\nGlobalMicrosoftProfileNormalizationScriptId = 73cecbfc-dad0-4395-be6a-6858ee3a80e5\nGlobalNormalizedProfileToIdentityScriptId = ed685f9f-5909-4726-86e8-22bd38b47663\nGlobalNormalizedProfileToManagedUserScriptId = 58c824ae-84ed-4724-82cd-db128fc3f6c\nGlobalOauth2AuthorizeEndpointDataProviderScriptId = 3f93ef6e-e54a-4393-aba1-f322656db28a\nGlobalOAuth2DynamicClientRegistrationScriptId = 4b6b7e8e-cf03-46c8-949f-c5742dbd6bc5\nGlobalOAuth2EvaluateScopeScriptId = da56fe60-8b38-4c46-a405-d6b306d4b336\nGlobalOAuth2ValidateScopeScriptId = 25e6c06d-cf70-473b-bd28-26931edc476b\nGlobalOidcClaimsScriptId = 36863ffb-40ec-48b9-94b1-9a99f71cc3b5\nGlobalSalesforceProfileNormalizationScriptId = 312e951f-70c5-49d2-a9ae-93aef909d5df\nGlobalSaml2IdpAttributeMapperScriptId = c4f22465-2368-4e27-8013-e6399974fd48\nGlobalServerSideAuthModuleScriptId = 7e3d7067-d50f-4674-8c76-a3e13a810c33\nGlobalServerSideDeviceIdMatchScriptId = 703dab1a-1921-4981-98dd-b8e5349d8548\nGlobalSocialIdPProfileTransformationScriptId = 1d475815-72cb-42eb-aafd-4026989d28a7\nGlobalTwitterProfileNormalizationScriptId = 8e298710-b55e-4085-a464-88a375a4004b\nGlobalVKontakteProfileNormalizationScriptId = 403cf226-6051-4368-8b72-9ba14f9a5140\nGlobalWeChatProfileNormalizationScriptId = 472534ec-a25f-468d-a606-3fb1935190df\nGlobalWordPressProfileNormalizationScriptId = 91d197de-5916-4dca-83b5-9a4df26e7159\nGlobalYahooProfileNormalizationScriptId = 424da748-82cc-4b54-be6f-82bd64d82a74\nHASHADMINPASSWD = #########\nie7fix = 13\nIS_INSTALL_VARDIR = baseDir\nIS_PRODNAME = /am\nKEYSTORE-KEY-PASSWORD = #########\nLDAP_CONNECTION_MODE = LDAPS\nlocale = en_US\nLOG_DIR = audit\nLOG_PROVIDER_CLASS = com.sun.identity.plugin.log.impl.LogProvider\nMONAGENT_PROVIDER_CLASS = com.sun.identity.plugin.monitoring.impl.AgentProvider\nMONSAML2_PROVIDER_CLASS = com.sun.identity.plugin.monitoring.impl.FedMonSAML2SvcProvider\nNORMALIZED_ORGBASE = ou=am-config\nNORMALIZED_RS = ou=am-config\nNoScriptDefined = [Empty]\nOLDCON_DEPLOY_URI = /am\nORG_BASE = ou=am-config\nORG_NAMING_ATTR = o\nORG_OBJECT_CLASS = sunismanagedorganization\nORG_ROOT_SUFFIX = ou=am-config\nOUTPUT_DIR = basedir/uri\nPAM_SERVICE_NAME = other\nPeople_NM_ORG_ROOT_SUFFIX = People_ou=am-config\nPLATFORM_LOCALE = en_US\nROOT_SUFFIX = ou=am-config\nROOTURL_PROVIDER_CLASS = org.forgerock.openam.federation.plugin.rooturl.impl.FmRootUrlProvider\nRS_RDN = am-config\nSERVER_HOST = forgerock.local\nSERVER_PORT = 8443\nSERVER_PROTO = https\nSERVER_URI = /am\nSERVER_URL = https://forgerock.local:8443\nSESSION_PROVIDER_CLASS = com.sun.identity.plugin.session.impl.FMSessionProvider\nSESSION_ROOT_SUFFIX = o=openam-session\nSESSION_STORE_TYPE = external\nSM_CONFIG_BASEDN = ou=am-config\nSM_CONFIG_BASEDN_RDNA = ou\nSM_CONFIG_BASEDN_RDNV = am-config\nSM_CONFIG_ROOT_SUFFIX = ou=am-config\nSM_ROOT_SUFFIX_HAT = ou=am-config\nSMS_OBJECT_CLASS = SmsWrapperObject\nUM_DIRECTORY_PORT = 2636\nUM_DIRECTORY_SERVER = ds.forgerock.local\nUM_DS_DIRMGRDN = uid=am-identity-bind-account,ou=admins,ou=identities\nUM_DS_DIRMGRPASSWD = #########\nUM_ENABLED = true\nUM_NORMALIZED_ORGBASE = ou=identities\nUM_SSL = true\nUSER_HOME = /root\nUSER_NAMING_ATTR = uid\nUSER_OBJECT_CLASS = inetorgperson\nUSER_PROFILE_CHOICE = false\nUSERSTORE_DOMAINNAME = ds.forgerock.local\nUSERSTORE_HOST = ds.forgerock.local\nUSERSTORE_MGRDN = uid=am-identity-bind-account,ou=admins,ou=identities\nUSERSTORE_PASSWD = #########\nUSERSTORE_PORT = 2636\nUSERSTORE_SSL = SSL\nUSERSTORE_SUFFIX = ou=identities\nUSERSTORE_TYPE = LDAPv3ForOpenDS\nuserStoreRootSuffix = ou=identities\nVERSION = ForgeRock Access Management 8.0.1 (2025-April-15 11:37)\nXML_ENCODING = ISO-8859-1\n\nFinished dumping all configuration parameters\n</code></pre>\n<p>Thank you.</p>\n",
    "tags" : [ "java", "tomcat", "tomcat10", "forgerock" ],
    "owner" : {
      "account_id" : 42016508,
      "reputation" : 1,
      "user_id" : 30556192,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/7e77267d4edcf9f3b100987d981726db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "iugementoverflow",
      "link" : "https://stackoverflow.com/users/30556192/iugementoverflow"
    },
    "is_answered" : false,
    "view_count" : 61,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1764163150,
    "creation_date" : 1747397533,
    "link" : "https://stackoverflow.com/questions/79625153/ping-am-8-0-installation-fails-connectionpool-is-already-closed",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79830749,
    "question_id" : 79625153,
    "body" : "<p>Installation process most probably stops at <strong>Reinitializing system properties</strong> message because pingDS has no enough free disk space. IT requires almost 6GBs of free disk space. You can find relevant error message regarding this at the ldap-access.audit.json file.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 44814380,
      "reputation" : 1,
      "user_id" : 31949698,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1e11c76eee8987a763c95952c07486b7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gryphon",
      "link" : "https://stackoverflow.com/users/31949698/gryphon"
    },
    "creation_date" : 1764163150,
    "last_activity_date" : 1764163150,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140433448,
    "post_id" : 79625153,
    "body" : "Please provide enough code so others can better understand or reproduce the problem.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1747419054,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}