{
  "question" : {
    "question_id" : 79586147,
    "title" : "Change line separator by programming",
    "body" : "<p>In Java, we use a BuffedWriter and the newline() method. Previously, you could change the character of the new line by changing the system property &quot;Line.separator&quot;. Unfortunately, the Newline method seems to use System.LineSeparator() which is initialized at the very beginning from the &quot;Line.separator&quot; property. How can we change the character to use by the Newline() method, without changing newline() by the call of write()? We need to change it by programming. We cannot change the JVM argument, as the research program the line separator it must use.</p>\n<p>It works in Java 1.8 and not in 11. We see nothing in Java's documentation that could prevent us from doing this.</p>\n",
    "tags" : [ "java", "system", "writer" ],
    "owner" : {
      "account_id" : 18108025,
      "reputation" : 3645,
      "user_id" : 13165246,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/52193d8dfb53c93a85eee36a1f4acdc6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Answerrer",
      "link" : "https://stackoverflow.com/users/13165246/answerrer"
    },
    "is_answered" : true,
    "view_count" : 122,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1745329250,
    "creation_date" : 1745315838,
    "link" : "https://stackoverflow.com/questions/79586147/change-line-separator-by-programming",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79586180,
    "question_id" : 79586147,
    "body" : "<p>This is a similar problem to <a href=\"https://stackoverflow.com/questions/63144771/how-can-i-force-java-stdout-on-windows-to-use-the-n-line-seperator/63149515#63149515\">How can I force Java stdout on windows to use the &quot;\\n&quot; line seperator?</a>.</p>\n<p><code>System.setProperty(&quot;line.separator&quot;,&quot;\\n&quot;);</code> will not change <code>System.lineSeparator()</code>. Applying a system property change <code>-Dline.separator=</code> is not easy from some command lines but can be achieved by using <code>java @file ...</code> as in the other answer.</p>\n<p>On Windows you can save the line separator arguments to a file from <code>CMD.EXE</code>:</p>\n<pre><code>echo -Dline.separator=&quot;\\n&quot;   &gt; gnu.args\necho -Dline.separator=&quot;\\r\\n&quot; &gt; windows.args\n</code></pre>\n<p>On some bash you can use ANSI C quoting <code>java -Dline.separator=$'\\n'</code> - see  <a href=\"https://stackoverflow.com/questions/3708991/setting-java-vm-line-separator\">Setting Java VM line.separator</a>.</p>\n<p>Ideally, declare your own <code>BufferedWriter</code> (or PrintWriter as in other answer) so that System property change is per use and does not affect the whole JVM:</p>\n<pre><code>static BufferedWriter newLineWriter(Writer out, String lineSep) {\n    return new BufferedWriter(out) {\n        public void newLine() throws IOException {\n            write(lineSep);\n        }\n    };\n}\npublic static void main(String[] args) throws IOException {\n    try(BufferedWriter out = newLineWriter(new FileWriter(&quot;unix.txt&quot;), &quot;\\n&quot;)) {\n        out.write(&quot;Line 1&quot;);\n        out.newLine();\n        out.write(&quot;Line 2&quot;);\n    }\n    try(BufferedWriter out = newLineWriter(new FileWriter(&quot;pc.txt&quot;), &quot;\\r\\n&quot;))  {\n        out.write(&quot;Line A&quot;);\n        out.newLine();\n        out.write(&quot;Line B&quot;);\n    }\n    try(BufferedWriter out = new BufferedWriter(new FileWriter(&quot;jvm.txt&quot;)))  {\n        out.write(&quot;Line C&quot;);\n        out.newLine();\n        out.write(&quot;Line D&quot;);\n    }\n    System.out.println(&quot;Unix &quot;+Arrays.toString(Files.readAllBytes(Path.of(&quot;unix.txt&quot;))));\n    System.out.println(&quot;PC   &quot;+Arrays.toString(Files.readAllBytes(Path.of(&quot;pc.txt&quot;))));\n    System.out.println(&quot;JVM  &quot;+Arrays.toString(Files.readAllBytes(Path.of(&quot;jvm.txt&quot;))));\n}\n</code></pre>\n<p>If you run the above with <code>java @gnu.args ... </code> it will show the line separator handling for each case:</p>\n<pre><code>Unix [76, 105, 110, 101, 32, 49, 10, 76, 105, 110, 101, 32, 50]\nPC   [76, 105, 110, 101, 32, 65, 13, 10, 76, 105, 110, 101, 32, 66]\nJVM  [76, 105, 110, 101, 32, 67, 10, 76, 105, 110, 101, 32, 68]\n</code></pre>\n<p>If you run the above with <code>java @windows.args ... </code> it will show:</p>\n<pre><code>Unix [76, 105, 110, 101, 32, 49, 10, 76, 105, 110, 101, 32, 50]\nPC   [76, 105, 110, 101, 32, 65, 13, 10, 76, 105, 110, 101, 32, 66]\nJVM  [76, 105, 110, 101, 32, 67, 13, 10, 76, 105, 110, 101, 32, 68]\n</code></pre>\n",
    "score" : 4,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16284,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1745316954,
    "last_activity_date" : 1745329250,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140357338,
    "post_id" : 79586147,
    "body" : "<i>&quot;We see nothing in Java&#39;s documentation that could prevent us from doing this.&quot;</i> - And likewise, there is typically nothing in the (pre-Java 11) javadocs that says it will work.  In the cases where changing a system property does (or did) work, it is generally speaking <i>undocumented behavior</i>.  Undocumented behavior may change from one Java version to the next.",
    "score" : 4,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723470,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1745318825,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140357328,
    "post_id" : 79586147,
    "body" : "The statement (about changing system properties not necessarily having the desired effect) is true for earlier versions of Java too.  It just wasn&#39;t formally noted in the javadocs.",
    "score" : 2,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723470,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1745318588,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140357231,
    "post_id" : 79586147,
    "body" : "Because things have changed between versions? What kind of answer are you expecting here? The documentation for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/System.html#getProperties()\" rel=\"nofollow noreferrer\"><code>System.getProperties</code></a> in Java 11 specifically mentions that changing a standard system property &quot;may not have the desired effect&quot;. <code>line.separator</code> is one of those properties.",
    "score" : 8,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292280,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1745316461,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140357217,
    "post_id" : 79586147,
    "body" : "In Java 1.8, we can change the lineSeparator and not in Java 11, for the bufferWriter. Why ?",
    "score" : 0,
    "owner" : {
      "account_id" : 18108025,
      "reputation" : 3645,
      "user_id" : 13165246,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/52193d8dfb53c93a85eee36a1f4acdc6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Answerrer",
      "link" : "https://stackoverflow.com/users/13165246/answerrer"
    },
    "creation_date" : 1745316267,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140357209,
    "post_id" : 79586147,
    "body" : "Why not just use <code>write</code> to write whatever you want? This sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>.",
    "score" : 5,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292280,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1745316038,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79586180" : [ {
      "comment_id" : 140357889,
      "post_id" : 79586180,
      "body" : "@k314159 I&#39;m unlikely to edit my own related answer, but just in case someone ever does I&#39;ve pasted the details in here.",
      "score" : 0,
      "owner" : {
        "account_id" : 5998820,
        "reputation" : 16284,
        "user_id" : 4712734,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "DuncG",
        "link" : "https://stackoverflow.com/users/4712734/duncg"
      },
      "creation_date" : 1745329228,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140357855,
      "post_id" : 79586180,
      "body" : "Good answer, but the mention of <code>@gnu.args</code> and <code>@window.args</code> relies on the linked answer being unchanged in the future. It would be better to make the answer self-sufficient.",
      "score" : 1,
      "owner" : {
        "account_id" : 19118721,
        "reputation" : 12499,
        "user_id" : 13963086,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "k314159",
        "link" : "https://stackoverflow.com/users/13963086/k314159"
      },
      "creation_date" : 1745328640,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}