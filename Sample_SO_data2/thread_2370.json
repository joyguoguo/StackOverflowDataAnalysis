{
  "question" : {
    "question_id" : 79628195,
    "title" : "JPanel not always drawing",
    "body" : "<p>So I have a program that takes some values from a file and saves them to be calculated and then drawn on the screen, the part that takes the values and calculates them works but my JPanel doesn't always paint it, it works sometimes but as soon as I resize the tab they disappear, I don't know why. Here are my codes:</p>\n<p>Simulator:</p>\n<pre><code>package IDK;\n\nimport java.io.*;\nimport java.util.*;\nimport javax.swing.*;\nimport java.awt.event.*;\nimport java.awt.*;\n\nimport window.*;\n\npublic class simulator {\n\n    static File file;\n    static HashMap &lt;Integer, String&gt; fileCont = new HashMap &lt;&gt; ();\n    static Rectangle viewBox = new Rectangle ();\n    static int [] camInfo = new int [3];\n    static int keyCode;\n\n    public static void start () {\n\n        camInfo [0] = 12;\n        camInfo [1] = 0;\n        camInfo [2] = 0;\n\n        int partNum = 0;\n        String [] partSeg;\n        fileAccessor (&quot;test&quot;, &quot;read&quot;);\n\n        while ((partSeg = fileCont.get (partNum).split (&quot;:&quot;)) [0].equals (&quot;cP&quot;) == false) {\n\n            partNum ++;\n        }\n\n        part [] parts = new part [partNum]; //Part is a custom variable that is used for the calculations using the .step () function. \n\n        for (int i = 0; i &lt; partNum; i ++) {\n\n            partSeg = fileCont.get (i).split (&quot;:&quot;);\n            parts [i] = new part (partSeg [0], Integer.valueOf (partSeg [1]), Integer.valueOf (partSeg [2]), Integer.valueOf (partSeg [3]), Integer.valueOf (partSeg [4]));\n        }\n\n        fileCont.clear ();\n\n        for (int i = 0; i &lt; partNum; i ++) {\n\n            parts [i].step ();\n            fileCont.put (i, parts [i].type + &quot;:&quot; + parts [i].x + &quot;:&quot; + parts [i].y + &quot;:&quot; + parts [i].xVel + &quot;:&quot; + parts [i].yVel);\n        }\n\n        int inViewNum = 0;\n        viewBox = new Rectangle (camInfo [1], camInfo [2], (int) camInfo [1] + frame.f.getWidth () / 100 * camInfo [0], (int) camInfo [1] + frame.f.getHeight () / 100 * camInfo [0]);\n\n        for (int i = 0; i &lt; partNum; i ++) {\n\n            if (parts [i].x &gt;= viewBox.x &amp; parts [i].y &gt;= viewBox.y &amp; parts [i].x &lt;= viewBox.width &amp; parts [i].y &lt;= viewBox.height) {\n\n                if ((partSeg = fileCont.get (i).split (&quot;:&quot;)) [0].equals (&quot;p+&quot;)) {\n\n                    panel.graphParts.put (inViewNum, &quot;oval:&quot; + (parts [i].x - viewBox.x) + &quot;:&quot; + (parts [i].y - viewBox.y) + &quot;:12:12&quot; + &quot;:255:50:50&quot;);\n                } else if ((partSeg = fileCont.get (i).split (&quot;:&quot;)) [0].equals (&quot;n0&quot;)) {\n\n                    panel.graphParts.put (inViewNum, &quot;oval:&quot; + (parts [i].x - viewBox.x) + &quot;:&quot; + (parts [i].y - viewBox.y) + &quot;:12:12&quot; + &quot;:50:50:50&quot;);\n                } else if ((partSeg = fileCont.get (i).split (&quot;:&quot;)) [0].equals (&quot;e-&quot;)) {\n\n                    panel.graphParts.put (inViewNum, &quot;oval:&quot; + (parts [i].x - viewBox.x) + &quot;:&quot; + (parts [i].y - viewBox.y) + &quot;:12:12&quot; + &quot;:50:50:255&quot;);\n                } else if ((partSeg = fileCont.get (i).split (&quot;:&quot;)) [0].equals (&quot;Y&quot;)) {\n\n                    panel.graphParts.put (inViewNum, &quot;oval:&quot; + (parts [i].x - viewBox.x) + &quot;:&quot; + (parts [i].y - viewBox.y) + &quot;:12:12&quot; + &quot;:255:255:50&quot;);\n                }\n\n                camera ();\n                inViewNum ++;\n            }\n        }\n\n        fileCont.put (partNum, &quot;cP:&quot; + camInfo [1] + &quot;:&quot; + camInfo [2]);\n        fileAccessor (&quot;test&quot;, &quot;write&quot;);\n    }\n\n    static void camera () {\n\n        switch (keyCode) {\n\n            case 87:\n            case 38:\n                camInfo [2] += 5;\n            break;\n\n            case 65:\n            case 37:\n                camInfo [1] -= 5;\n            break;\n\n            case 83:\n            case 40:\n                camInfo [2] -= 5;\n            break;\n\n            case 68:\n            case 39:\n                camInfo [1] += 5;\n            break;\n\n            case 73:\n                camInfo [0] --;\n            break;\n\n            case 79:\n                camInfo [0] ++;\n            break;\n        }\n\n        if (camInfo [0] &lt; 1) {\n\n            camInfo [0] = 1;\n        }\n\n        if (camInfo [0] &gt; 1000) {\n\n            camInfo [0] = 1000;\n        }\n\n        frame.p.repaint ();\n    }\n\n    static void inputDetector () {\n\n        frame.p.getInputMap ().put (KeyStroke.getKeyStroke (&quot;R&quot;), &quot;&quot;);\n\n        frame.p.addKeyListener (new KeyAdapter () {\n\n            public void keyPressed (KeyEvent e) {\n\n                keyCode = e.getKeyCode ();\n            }\n        });\n    }\n\n    static void fileAccessor (String fileName, String op) {\n\n        file = new File (&quot;src/saves/&quot; + fileName + &quot;_save.txt&quot;);\n\n        if (op.equals (&quot;make&quot;)) {\n\n            try {\n\n                file.createNewFile ();\n            } catch (IOException e) {}\n        } else if (op.equals (&quot;write&quot;)) {\n\n            try (BufferedWriter writer = new BufferedWriter (new FileWriter (file))) {\n\n                int line = 0;\n    \n                while (fileCont.get (line) != null) {\n    \n                    writer.write (fileCont.get (line));\n                    writer.newLine ();\n                    line ++;\n                }\n            } catch (IOException e) {}\n        } else if (op.equals (&quot;read&quot;)) {\n\n            fileCont.clear ();\n\n            try (BufferedReader reader = new BufferedReader (new FileReader (file))) {\n\n                String lineCont;\n                int line = 1;\n\n                while ((lineCont = reader.readLine ()) != null) {\n\n                    fileCont.put (line - 1, lineCont);\n                    line ++;\n                }\n            } catch (IOException e) {}\n        }\n    }\n}\n</code></pre>\n<p>Frame:</p>\n<pre><code>package window;\n\nimport javax.swing.*;\nimport java.awt.*;\n\npublic class frame {\n\n    public static JFrame f = new JFrame (&quot;frame&quot;);\n    public static JPanel p = new panel ();\n    \n    public static void createWindow () {\n\n        f.add (p);\n        f.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\n        f.setMinimumSize (new Dimension (800, 500));\n        f.setLocationRelativeTo (null);\n        f.setVisible (true);\n    }\n}\n</code></pre>\n<p>Panel:</p>\n<pre><code>package window;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.*;\n\npublic class panel extends JPanel {\n\n    public static HashMap &lt;Integer, String&gt; graphParts = new HashMap &lt;&gt; ();\n    static int partNum = 0;\n\n    public void paintComponent (Graphics g) {\n\n        super.paintComponent (g);\n\n        while (graphParts.get (partNum) != null) {\n\n            String [] graphSeg = graphParts.get (partNum).split (&quot;:&quot;);\n            g.setColor (new Color (Integer.valueOf (graphSeg [5]), Integer.valueOf (graphSeg [6]), Integer.valueOf (graphSeg [7])));\n\n            if (graphSeg [0].equals (&quot;oval&quot;)) {\n\n                g.fillOval (Integer.valueOf (graphSeg [1]), Integer.valueOf (graphSeg [2]), Integer.valueOf (graphSeg [3]), Integer.valueOf (graphSeg [4]));\n            } else if (graphSeg [0].equals (&quot;rect&quot;)) {\n\n                g.fillRect (Integer.valueOf (graphSeg [1]), Integer.valueOf (graphSeg [2]), Integer.valueOf (graphSeg [3]), Integer.valueOf (graphSeg [4]));\n            }\n\n            partNum ++;\n        }\n    }\n}\n</code></pre>\n<p>Part:</p>\n<pre><code>package IDK;\n\npublic class part {\n\n    int x, y, xVel, yVel, state;\n    String type;\n\n    public part () {\n\n    }\n\n    public part (String interfaceType, int interfaceX, int interfaceY, int interfaceXVel, int interfaceYVel) {\n\n        type = interfaceType;\n        x = interfaceX;\n        y = interfaceY;\n        xVel = interfaceXVel;\n        yVel = interfaceYVel;\n    }\n\n    void step () {\n\n        switch (type) {\n\n            case &quot;p+&quot;:\n                x += xVel;\n                y += yVel;\n            break;\n\n            case &quot;n0&quot;:\n                x += xVel;\n                y += yVel;\n            break;\n\n            case &quot;e-&quot;:\n                x += xVel;\n                y += yVel;\n            break;\n\n            case &quot;Y&quot;:\n                x += xVel;\n                y += yVel;\n            break;\n        }\n    }\n}\n</code></pre>\n<p>Test (The File With The Values):</p>\n<pre><code>p+:0:0:0:0\nn0:0:0:0:0\ne-:0:0:0:0\nY:0:0:0:0\ncP:0:0\n</code></pre>\n<p>Help is appreciated.</p>\n",
    "tags" : [ "java", "graphics" ],
    "owner" : {
      "account_id" : 35209200,
      "reputation" : 21,
      "user_id" : 27052657,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Hugo Way",
      "link" : "https://stackoverflow.com/users/27052657/hugo-way"
    },
    "is_answered" : true,
    "view_count" : 55,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1747637622,
    "creation_date" : 1747636563,
    "link" : "https://stackoverflow.com/questions/79628195/jpanel-not-always-drawing",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79628221,
    "question_id" : 79628195,
    "body" : "<p>You must redraw your panel every time <code>paintComponent(Graphics g)</code> is called.</p>\n<p>Currently <code>partNum</code> is an instance field that is never reset back to 0 and therefore the parts are only drawn once.</p>\n<p>Remove that <code>static int partNum = 0;</code> field and instead create it as local variable in <code>paintComponent(Graphics g)</code>. You could even replace the <code>while</code> loop with a <code>for</code> loop:</p>\n<pre><code>    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n\n        for (int partNum = 0; graphParts.get(partNum) != null; partNum++) {\n\n            String[] graphSeg = graphParts.get(partNum).split(&quot;:&quot;);\n            g.setColor(new Color(Integer.valueOf(graphSeg [5]), Integer.valueOf(graphSeg[6]), Integer.valueOf(graphSeg[7])));\n\n            if (graphSeg[0].equals(&quot;oval&quot;)) {\n                g.fillOval(Integer.valueOf(graphSeg[1]), Integer.valueOf(graphSeg[2]), Integer.valueOf(graphSeg[3]), Integer.valueOf(graphSeg[4]));\n\n            } else if (graphSeg[0].equals(&quot;rect&quot;)) {\n                g.fillRect(Integer.valueOf(graphSeg[1]), Integer.valueOf(graphSeg[2]), Integer.valueOf(graphSeg[3]), Integer.valueOf(graphSeg[4]));\n            }\n        }\n    }\n</code></pre>\n<p>Also, I'm not quite sure why you declared <code>graphParts</code> as <code>HashMap&lt;Integer, String&gt;</code> when all the keys are sequential index values - you could easily declare it as <code>List&lt;String&gt;</code></p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7423601,
      "reputation" : 21950,
      "user_id" : 5646962,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/950788cd150c2e596944181dfd8421af?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thomas Kl&#228;ger",
      "link" : "https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger"
    },
    "creation_date" : 1747637622,
    "last_activity_date" : 1747637622,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140442358,
    "post_id" : 79628195,
    "body" : "Ok, Il need to look into those things. Thanks.",
    "score" : 0,
    "owner" : {
      "account_id" : 35209200,
      "reputation" : 21,
      "user_id" : 27052657,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Hugo Way",
      "link" : "https://stackoverflow.com/users/27052657/hugo-way"
    },
    "creation_date" : 1747740226,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140439041,
    "post_id" : 79628195,
    "body" : "You need to abandon this mass usage of <a href=\"https://technojeeves.com/index.php/aliasjava1/108-static-is-a-swear-word\" rel=\"nofollow noreferrer\"><code>static</code></a> Also: <i>catch (IOException e) {}</i> is a no-no in <a href=\"https://technojeeves.com/index.php/aliasjava1/94-ignoring-exceptions-is-dangerous\" rel=\"nofollow noreferrer\">this context</a>. Look at <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">proper naming</a>  too",
    "score" : 1,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1747655553,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140438234,
    "post_id" : 79628195,
    "body" : "Hello Hugo, it seems to be missing the main class.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 924,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1747638657,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79628221" : [ {
      "comment_id" : 140442388,
      "post_id" : 79628221,
      "body" : "Oh, I see, makes sense that the path wouldn&#39;t work.",
      "score" : 0,
      "owner" : {
        "account_id" : 35209200,
        "reputation" : 21,
        "user_id" : 27052657,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Hugo Way",
        "link" : "https://stackoverflow.com/users/27052657/hugo-way"
      },
      "creation_date" : 1747740818,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140439250,
      "post_id" : 79628221,
      "body" : "Thomas is right. Plus, if <i>fileCont</i> is a <code>List&lt;String&gt;</code> it will allow you to do, simply <code>fileCont = Files.readAllLines(Path.of(System.getProperty(&quot;user.home&quot;), &quot;saves&quot;, &quot;fn&quot; + &quot;_save.txt&quot;));</code> (Don&#39;t use <i>src/</i> in your paths - it has nothing to do with properly deployed apps)",
      "score" : 0,
      "owner" : {
        "account_id" : 22124137,
        "reputation" : 4244,
        "user_id" : 16376827,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name" : "g00se",
        "link" : "https://stackoverflow.com/users/16376827/g00se"
      },
      "creation_date" : 1747659355,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140438217,
      "post_id" : 79628221,
      "body" : "Ok, thanks for the help.",
      "score" : 0,
      "owner" : {
        "account_id" : 35209200,
        "reputation" : 21,
        "user_id" : 27052657,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Hugo Way",
        "link" : "https://stackoverflow.com/users/27052657/hugo-way"
      },
      "creation_date" : 1747638234,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}