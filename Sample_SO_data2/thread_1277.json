{
  "question" : {
    "question_id" : 79727629,
    "title" : "Spring Framework, WebApplicationContext, Property missing upon @ConditionalOnProperty validation",
    "body" : "<p>I want to use the <code>@ConditionalOnProperty</code> to register beans based on the property presence:</p>\n<pre><code>@ConditionalOnProperty(name = &quot;aws.secrets-manager.sm.enable&quot;, havingValue = &quot;true&quot;)\n@EnableConfigurationProperties(AwsSecretsManagerProperties.class)\npublic class AwsSecretsManagerConfig {\n}\n\n@Configuration\n@Import(AwsSecretsManagerConfig.class)\npublic class MyPortalAwsSecretsManagerConfig {\n\n}\n</code></pre>\n<p>As for now, the bean is not registered regardless of the property value. When debugging the behaviour, I noticed that the <code>my-web.properties</code> property source is added to  <code>WebApplicationContext</code>'s property sources after <code>AwsSecretsManagerConfig</code> bean creation attempt.</p>\n<p>The <code>WebApplicationContext</code> is configured in the <code>web.xml</code> file:</p>\n<pre><code>&lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&lt;/listener&gt;\n&lt;context-param&gt;\n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n    &lt;param-value&gt;/WEB-INF/root-mvc.xml&lt;/param-value&gt;\n&lt;/context-param&gt;\n</code></pre>\n<p>The <code>root-mvc.xml</code> file contains the properties bean declaration:</p>\n<pre><code>&lt;context:property-placeholder properties-ref=&quot;appProperties&quot; /&gt;\n\n&lt;beans profile=&quot;local,integration-test&quot;&gt;\n    &lt;util:properties id=&quot;appProperties&quot; location=&quot;/WEB-INF/my-web.properties&quot; /&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>My current guess is that this happens because <code>@ConditionalOnProperty</code> is a part of Spring Boot Autoconfigure, which might affect the beans' loading order. The annotation-based configurations are loaded before the XML.</p>\n<p>Appreciate, if somebody could provide more details of what exactly happens under the hood and how to solve the issue?</p>\n",
    "tags" : [ "java", "spring" ],
    "owner" : {
      "account_id" : 6876655,
      "reputation" : 1711,
      "user_id" : 5284890,
      "user_type" : "registered",
      "accept_rate" : 57,
      "profile_image" : "https://www.gravatar.com/avatar/29eba1495323dbf53959560fde5f2c35?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Eager",
      "link" : "https://stackoverflow.com/users/5284890/eager"
    },
    "is_answered" : false,
    "view_count" : 79,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1754508841,
    "creation_date" : 1754500436,
    "link" : "https://stackoverflow.com/questions/79727629/spring-framework-webapplicationcontext-property-missing-upon-conditionalonpro",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79727643,
    "question_id" : 79727629,
    "body" : "<p>Place your properties in a location that loads before auto-configuration:</p>\n<pre><code>@SpringBootApplication\n@PropertySource(&quot;classpath:/WEB-INF/my-web.properties&quot;)\npublic class MyApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 30690555,
      "reputation" : 1,
      "user_id" : 23530179,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocLDr8ZrqcVu1KSu7SA_j9Imh1ysZzk4_8nnpBAGkDGpuRMc=k-s256",
      "display_name" : "Cesar Saucedo",
      "link" : "https://stackoverflow.com/users/23530179/cesar-saucedo"
    },
    "creation_date" : 1754501185,
    "last_activity_date" : 1754501185,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140659318,
    "post_id" : 79727629,
    "body" : "@M.Deinum, thanks for pointing this out. Let me check this.",
    "score" : 0,
    "owner" : {
      "account_id" : 6876655,
      "reputation" : 1711,
      "user_id" : 5284890,
      "user_type" : "registered",
      "accept_rate" : 57,
      "profile_image" : "https://www.gravatar.com/avatar/29eba1495323dbf53959560fde5f2c35?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Eager",
      "link" : "https://stackoverflow.com/users/5284890/eager"
    },
    "creation_date" : 1754985407,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140656601,
    "post_id" : 79727629,
    "body" : "You are using Spring Boot features in a plain Spring application. That isn&#39;t going to work unless you use Spring Boot to bootstrap your web application (as documented here <a href=\"https://docs.spring.io/spring-boot/how-to/deployment/traditional-deployment.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/how-to/deployment/&hellip;</a>)",
    "score" : 1,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1754894213,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79727643" : [ {
      "comment_id" : 140650948,
      "post_id" : 79727643,
      "body" : "@Sankozi I think there is a reason why that annotation is in Spring Boot API and not Spring API. Maybe you could make it work without Spring Boot but it is definitely not supported and may stop working after any release.",
      "score" : 0,
      "owner" : {
        "account_id" : 66967,
        "reputation" : 603,
        "user_id" : 196207,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/c01c5b8834da35cbfbcf09c29d101600?s=256&d=identicon&r=PG",
        "display_name" : "Sankozi",
        "link" : "https://stackoverflow.com/users/196207/sankozi"
      },
      "creation_date" : 1754634052,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140648781,
      "post_id" : 79727643,
      "body" : "@Sankozi As mentioned in the question, I use <code>@ConditionalOnProperty</code> to define if the bean should be created. I don&#39;t use SpringBoot&#39;s embedded application server, dependency management feature. To my understanding, Spring Boot is built on top of the Spring Framework; hence, you can use some of its parts in a Spring-based project.",
      "score" : 0,
      "owner" : {
        "account_id" : 6876655,
        "reputation" : 1711,
        "user_id" : 5284890,
        "user_type" : "registered",
        "accept_rate" : 57,
        "profile_image" : "https://www.gravatar.com/avatar/29eba1495323dbf53959560fde5f2c35?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Eager",
        "link" : "https://stackoverflow.com/users/5284890/eager"
      },
      "creation_date" : 1754565777,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140648187,
      "post_id" : 79727643,
      "body" : "@Eager But <a href=\"https://docs.spring.io/spring-boot/api/java/org/springframework/boot/autoconfigure/condition/ConditionalOnProperty.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/api/java/org/springframework/boot&zwnj;&#8203;/&hellip;</a> is Spring Boot API. Are you using those annotations without Spring Boot?",
      "score" : 1,
      "owner" : {
        "account_id" : 66967,
        "reputation" : 603,
        "user_id" : 196207,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/c01c5b8834da35cbfbcf09c29d101600?s=256&d=identicon&r=PG",
        "display_name" : "Sankozi",
        "link" : "https://stackoverflow.com/users/196207/sankozi"
      },
      "creation_date" : 1754549714,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140647340,
      "post_id" : 79727643,
      "body" : "@GeorgiiLvov Sorry for the confusion.",
      "score" : 0,
      "owner" : {
        "account_id" : 6876655,
        "reputation" : 1711,
        "user_id" : 5284890,
        "user_type" : "registered",
        "accept_rate" : 57,
        "profile_image" : "https://www.gravatar.com/avatar/29eba1495323dbf53959560fde5f2c35?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Eager",
        "link" : "https://stackoverflow.com/users/5284890/eager"
      },
      "creation_date" : 1754509995,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140647293,
      "post_id" : 79727643,
      "body" : "@Eager, then please add tags to the questions more precisely, as you originally specified the spring-boot tag",
      "score" : 0,
      "owner" : {
        "account_id" : 18586978,
        "reputation" : 3850,
        "user_id" : 15000097,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/yFl4M.jpg?s=256",
        "display_name" : "Georgii Lvov",
        "link" : "https://stackoverflow.com/users/15000097/georgii-lvov"
      },
      "creation_date" : 1754508993,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140647108,
      "post_id" : 79727643,
      "body" : "As itâ€™s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/79727643/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1754504672,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140647031,
      "post_id" : 79727643,
      "body" : "thanks for the response, but it is not a Spring Boot-based application.",
      "score" : 1,
      "owner" : {
        "account_id" : 6876655,
        "reputation" : 1711,
        "user_id" : 5284890,
        "user_type" : "registered",
        "accept_rate" : 57,
        "profile_image" : "https://www.gravatar.com/avatar/29eba1495323dbf53959560fde5f2c35?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Eager",
        "link" : "https://stackoverflow.com/users/5284890/eager"
      },
      "creation_date" : 1754502331,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}