{
  "question" : {
    "question_id" : 79804893,
    "title" : "Cannot deserialize JSON that I had serialized?",
    "body" : "<p>I am attempting to create a class that serializes and deserializes a Java class into JSON. I am using\nQuarkus REST Jackson to convert between a class called NetInfo and JSON, writing to a file called\nnet.json.</p>\n<p>I am able to serialize the class, but I cannot deserialize it.</p>\n<p>My reading/writing class is shown below:</p>\n<pre><code>public class WriterReaderFile\n{\n    private static final ObjectMapper theMapper = new ObjectMapper()\n        .enable(SerializationFeature.WRAP_ROOT_VALUE)\n        .enable(SerializationFeature.INDENT_OUTPUT);\n        \n     public boolean writeToFile(File theFile,NetInfoList theList)\n    {\n        boolean exists = theFile.exists();\n\n        if(exists)\n        {\n            try\n            {\n                theMapper.writeValue(theFile, theList);\n            }\n            catch (Exception e)\n            {\n                e.printStackTrace();\n            }\n        }\n\n        return(exists);\n    }\n\n     public NetInfoList readFromFile(File theFile)\n    {\n        NetInfoList theList = theMapper.convertValue(theFile, NetInfoList.class);\n        return(theList);\n    }\n\n}\n</code></pre>\n<p>Note that I am saving a class caalled &quot;NetInfoList&quot;. This class is pbelow:</p>\n<pre><code>@JsonRootName(&quot;MyInfo&quot;)\npublic class NetInfoList extends ArrayList&lt;NetInfo&gt;\n{\n    public NetInfoList()\n    {\n        super();\n    }\n}\n</code></pre>\n<p>The NetInfo class that is listed in NetInfoList is below:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n// @JsonRootName(&quot;Info&quot;)\npublic class NetInfo\n{\n   @JsonProperty(&quot;URI&quot;)\n   private String thePath;\n\n   @JsonProperty(&quot;Protocol&quot;)\n   @Builder.Default\n   private HttpProtocol selProtocol = HttpProtocol.Http;\n\n   @JsonProperty(&quot;Action&quot;)\n   @Builder.Default\n   private HttpAction theAction = HttpAction.Get;\n}\n</code></pre>\n<p>Please note the use of Lombok on this class.</p>\n<p>When I test this class, I write out 3 NetInfo instances to Net.json. I get the following output:</p>\n<pre><code>{\n  &quot;MyInfo&quot; : [ {\n    &quot;URI&quot; : &quot;/first&quot;,\n    &quot;Protocol&quot; : &quot;Http&quot;,\n    &quot;Action&quot; : &quot;Get&quot;\n  }, {\n    &quot;URI&quot; : &quot;/second&quot;,\n    &quot;Protocol&quot; : &quot;Http&quot;,\n    &quot;Action&quot; : &quot;Get&quot;\n  }, {\n    &quot;URI&quot; : &quot;/third&quot;,\n    &quot;Protocol&quot; : &quot;Http&quot;,\n   &quot;Action&quot; : &quot;Get&quot;\n  } ]\n}\n</code></pre>\n<p>No problem, though I would like to have a Root Name for each of my NetInfo objects. My putting a\n@JsonRootName annotation on the NetInfo class gets ignored by the parser (it is commented out).</p>\n<p>Unfortunately, when I try to read the Net.json file and turn it back into a NetInfo object, I get the\nfollowing error:</p>\n<pre><code>java.lang.IllegalArgumentException: Cannot deserialize value of type `net.factor3.app.net.NetInfoList` from String value (token `JsonToken.VALUE_STRING`)\n at [Source: UNKNOWN; byte offset: #UNKNOWN]\n\n    at com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4730)\n    at com.fasterxml.jackson.databind.ObjectMapper.convertValue(ObjectMapper.java:4661)\n    at net.factor3.app.defender.proxies.WriterReaderFile.readFromFile(WriterReaderFile.java:161)\n    at net.factor3.app.defender.BasicProxyTests.testreadFromFile(BasicProxyTests.java:140)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)\nCaused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `net.factor3.app.net.NetInfoList` from String value (token `JsonToken.VALUE_STRING`)\n at [Source: UNKNOWN; byte offset: #UNKNOWN]\n    at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:72)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1822)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1596)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1543)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:404)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer._deserializeFromString(CollectionDeserializer.java:331)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:251)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:29)\n</code></pre>\n<p>This does not make sense. Can someone tell me why I cannot deserialize a class that was originally\nserialized without problems? Could it be a bug in the Quarkus Jackson libraries? Is there something\nI should do to make the JSON deserializable?</p>\n",
    "tags" : [ "java", "json", "jackson", "quarkus" ],
    "owner" : {
      "account_id" : 1039893,
      "reputation" : 2348,
      "user_id" : 1046184,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/bXSMO.jpg?s=256",
      "display_name" : "Factor Three",
      "link" : "https://stackoverflow.com/users/1046184/factor-three"
    },
    "is_answered" : true,
    "view_count" : 94,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1761852319,
    "creation_date" : 1761835987,
    "link" : "https://stackoverflow.com/questions/79804893/cannot-deserialize-json-that-i-had-serialized",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79805123,
    "question_id" : 79804893,
    "body" : "<p>You are calling convertValue. This method is for converting one Java object into another (for example, a Map into a POJO). You are passing it a java.io.File object. Jackson has no idea what to do with this, so it likely just calls theFile.toString() (which returns the file path as a String) and tries to deserialize that path string. That's why you get the error.\nYou need to use readValue, which is designed to read from an I/O source (like a File, InputStream, or URL), parse its content, and map it to your object.</p>\n<pre><code>public NetInfoList readProxies(File theFile) {\n    try {\n        NetInfoList theList = theMapper.readValue(theFile, NetInfoList.class);\n        return theList;\n    } catch (IOException e) {\n        e.printStackTrace();\n        throw new RuntimeException(&quot;Failed to read and parse &quot; + theFile.getName(), e);\n    }\n}\n</code></pre>\n",
    "score" : 4,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 17553626,
      "reputation" : 521,
      "user_id" : 12733532,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-EAww28wDCxk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgKS9dXdmUh-hOQPlZYZygBUfLwQ/s256-rj/photo.jpg",
      "display_name" : "Max",
      "link" : "https://stackoverflow.com/users/12733532/max"
    },
    "creation_date" : 1761850499,
    "last_activity_date" : 1761850499,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140827879,
    "post_id" : 79804893,
    "body" : "Actually, that was a typo. It should be a NetInfoList that gets written. I will correct it.",
    "score" : 0,
    "owner" : {
      "account_id" : 1039893,
      "reputation" : 2348,
      "user_id" : 1046184,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/bXSMO.jpg?s=256",
      "display_name" : "Factor Three",
      "link" : "https://stackoverflow.com/users/1046184/factor-three"
    },
    "creation_date" : 1761851265,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}