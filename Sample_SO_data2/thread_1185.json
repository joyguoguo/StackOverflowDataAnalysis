{
  "question" : {
    "question_id" : 79738078,
    "title" : "java.lang.NoClassDefFoundError: org/apache/commons/pool2/impl/GenericObjectPoolConfig when creating JedisConnectionFactory in Spring Boot Reactive app",
    "body" : "<p>I'm working on a Spring Boot (3.x) reactive application and trying to configure Redis using Jedis.</p>\n<p>During application startup, I get the following error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jedisConnectionFactory' defined in class path resource [com/myapp/config/RedisConfig.class]: Failed to instantiate [org.springframework.data.redis.connection.jedis.JedisConnectionFactory]: Factory method 'jedisConnectionFactory' threw exception with message: org/apache/commons/pool2/impl/GenericObjectPoolConfig\nCaused by: java.lang.NoClassDefFoundError: org/apache/commons/pool2/impl/GenericObjectPoolConfig\n</code></pre>\n<p>This seems to indicate that the <code>GenericObjectPoolConfig</code> class from Apache Commons Pool 2 is missing.</p>\n<p><strong>What I have tried:</strong></p>\n<ul>\n<li><p>Verified that my Redis configuration class has the <code>jedisConnectionFactory</code> bean defined properly.</p>\n</li>\n<li><p>Cleaned and rebuilt the project.</p>\n</li>\n<li><p>Googled the error and found that commons-pool2 is a required dependency, but it doesn't seems to be included in my project transitively.</p>\n</li>\n</ul>\n<p><strong>My build tool:</strong></p>\n<p>Using Maven (or Gradle) — here is my dependency snippet for Redis and Jedis:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis-reactive&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-pool2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<pre><code>package com.amit.auth.authservice.configs;\n\nimport org.springframework.beans.factory.annotation.Value; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.data.redis.connection.RedisPassword; import org.springframework.data.redis.connection.RedisStandaloneConfiguration; import org.springframework.data.redis.connection.jedis.JedisClientConfiguration; import org.springframework.data.redis.connection.jedis.JedisConnectionFactory; import org.springframework.data.redis.core.RedisTemplate; import org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Configuration public class RedisConfig {\n@Value(&quot;${spring.data.redis.host}&quot;)\nprivate String redisHost;\n\n@Value(&quot;${spring.data.redis.port}&quot;)\nprivate int redisPort;\n\n@Value(&quot;${spring.data.redis.password:}&quot;)\nprivate String redisPassword;\n\n@Bean\npublic JedisConnectionFactory jedisConnectionFactory() {\n    RedisStandaloneConfiguration config = new RedisStandaloneConfiguration(redisHost, redisPort);\n    if (redisPassword != null &amp;&amp; !redisPassword.isBlank()) {\n        config.setPassword(RedisPassword.of(redisPassword));\n    }\n    JedisClientConfiguration clientConfig = JedisClientConfiguration.builder().build();\n    return new JedisConnectionFactory(config, clientConfig);\n}\n\n@Bean\npublic RedisTemplate&lt;String, String&gt; redisTemplate(JedisConnectionFactory jedisConnectionFactory) {\n    RedisTemplate&lt;String, String&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(jedisConnectionFactory);\n    template.setKeySerializer(new StringRedisSerializer());\n    template.setValueSerializer(new StringRedisSerializer());\n    template.afterPropertiesSet();\n    return template;\n}\n</code></pre>\n<p>}</p>\n<p><strong>How to solve that error?</strong></p>\n",
    "tags" : [ "java", "spring", "spring-boot", "maven", "redis" ],
    "owner" : {
      "account_id" : 31250441,
      "reputation" : 23,
      "user_id" : 24056977,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0d9ce5377d83510033da839c5018cd3f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Amit Kumar Behera",
      "link" : "https://stackoverflow.com/users/24056977/amit-kumar-behera"
    },
    "is_answered" : false,
    "view_count" : 152,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1755506321,
    "creation_date" : 1755461165,
    "link" : "https://stackoverflow.com/questions/79738078/java-lang-noclassdeffounderror-org-apache-commons-pool2-impl-genericobjectpoolc",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140674114,
    "post_id" : 79738078,
    "body" : "Jedis is not the reactive Redis library for Java. Try using LettuceConnectionFactory instead. Or try adding Jedis to the dependencies.",
    "score" : 0,
    "owner" : {
      "account_id" : 12135313,
      "reputation" : 325,
      "user_id" : 8860945,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/80586c2558fe6c34fc7191d596c8514d?s=256&d=identicon&r=PG",
      "display_name" : "Raphael De Lio",
      "link" : "https://stackoverflow.com/users/8860945/raphael-de-lio"
    },
    "creation_date" : 1755533979,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140672441,
    "post_id" : 79738078,
    "body" : "This question is similar to: <a href=\"https://stackoverflow.com/questions/34413/why-am-i-getting-a-noclassdeffounderror-in-java\">Why am I getting a NoClassDefFoundError in Java?</a>. If you believe it’s different, please <a href=\"https://stackoverflow.com/posts/79738078/edit\">edit</a> the question, make it clear how it’s different and/or how the answers on that question are not helpful for your problem.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1755485734,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}