{
  "question" : {
    "question_id" : 79566621,
    "title" : "Java - Deleting previous console inputs out of System.in - Why does 1 version of my Code work and not the other version?",
    "body" : "<p>The diffrence in the code is in the deleteInput()-Method. Everything else is the same.\nThe question is at the end, because it's about the console output.</p>\n<p>The code:</p>\n<pre><code>public class DeletePreviousInputs {\n    static Scanner scanner = new Scanner(System.in);\n\n    public static void main(String[] args) throws InterruptedException, IOException {\n        System.out.println(&quot;write something in the console&quot;);\n        /*\n        * What I wrote:\n        1 &lt;enter&gt; 2 &lt;enter&gt; 3 &lt;enter&gt; 4 &lt;enter&gt;\n        */\n        Thread.currentThread();\n        Thread.sleep(8000); //simulates delay\n        deleteInput();\n        System.out.println(&quot;after input should be deleted&quot;);\n        System.out.println(scanner.nextLine());\n        System.out.println(scanner.nextLine());\n        System.out.println(scanner.nextLine());\n    }\n\n    //Version 1 of the deleteInput()-Method:\n    private static void deleteInput() throws InterruptedException {\n        try {\n            while (System.in.available() &gt; 0) {\n                //This is the part, where the code will differ in Version 2\n                scanner.nextLine();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    //Version 2 of the deleteInput()-Method:\n    private static void deleteInput() throws InterruptedException {\n        try {\n            while (System.in.available() &gt; 0) {\n                //This is the part, where the code differs\n                Scanner dummyScanner = new Scanner(System.in);\n                dummyScanner.nextLine();\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p><strong>Output version 1:</strong></p>\n<pre><code>write something in the console\n1\n2\n3\nafter input should be deleted\n2\n3\n</code></pre>\n<p><strong>Output version 2:</strong></p>\n<pre><code>write something in the console\n1\n2\n3\nafter input should be deleted\n</code></pre>\n<p>Why does version 1 not delete/skip all of the previous input?\nWhy does version 2 work perfectly?</p>\n<p>I tried to delete all previous input of System.in so that only the latest/newest would be recognized by the Scanner.\nI didn't expect to see a diffrence in the functionality between the two deleteInput()-Methods.\nI do not understand why one version works and the other does not work.</p>\n<p>Update:</p>\n<p>@Sash (I can't answer to your comment for some reason, so I update here)\nI tried it and changed only the deleteInput()-method to this:</p>\n<pre><code>System.out.println(&quot;deleteInput()-method has started&quot;);\nwhile (scanner.hasNextLine()) {\n    scanner.nextLine();\n}\nSystem.out.println(&quot;deleteInput()-method has ended&quot;);\n</code></pre>\n<p>But that creates a loop and the method is never left. Here is the output I get:</p>\n<pre><code>write something in the console\n1\n2\n3\ndeleteInput()-method has started\n</code></pre>\n<p>If I replace scanner.nextLine() with:</p>\n<pre><code>if(scanner.nextLine().isEmpty()) {\n    break;\n}\n</code></pre>\n<p>it also does not leave the method.</p>\n",
    "tags" : [ "java", "java.util.scanner", "system.in" ],
    "owner" : {
      "account_id" : 41318481,
      "reputation" : 23,
      "user_id" : 30233070,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/XO1hiGcg.jpg?s=256",
      "display_name" : "Ian",
      "link" : "https://stackoverflow.com/users/30233070/ian"
    },
    "is_answered" : true,
    "view_count" : 100,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1744291756,
    "creation_date" : 1744287410,
    "link" : "https://stackoverflow.com/questions/79566621/java-deleting-previous-console-inputs-out-of-system-in-why-does-1-version-of",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79566733,
    "question_id" : 79566621,
    "body" : "<p><code>Scanner</code> maintains its own buffer. When you call <code>nextLine</code>, it doesn't necessarily reads just a single line. It tries to fill its buffer, reading as much as possible, then returns the first line in its buffer.</p>\n<p>In version 1's <code>deleteInput</code>, <code>System.in.available() &gt; 0</code> is initially true, and the scanner reads everything (all 4 lines) in <code>System.in</code>, because its buffer happens to be big enough. In the second iteration of the loop, <code>System.in.available() &gt; 0</code> would be false, because everything is now in the scanner's buffer.</p>\n<p>After <code>deleteInput()</code>, you use the same scanner to read lines. Since the scanner's buffer still contains some lines, <code>readLine</code> will return a line from the buffer, instead of reading from the underlying <code>System.in</code> stream.</p>\n<p>In version 2, you use a different scanner in <code>deleteInput</code>, so the buffer of <code>scanner</code> remains empty. As a result, the <code>scanner.nextLine()</code> after <code>deleteInput()</code> will actually read from <code>System.in</code>.</p>\n<p>As an alternative to using a different <code>Scanner</code>, you can also do:</p>\n<pre><code>System.in.readNBytes(System.in.available());\n</code></pre>\n<p>Note that neither the above nor your version 2 will skip things that <code>scanner</code> has already put into its buffer, before you call <code>deleteInput</code>. For example,</p>\n<pre><code>Thread.sleep(8000); // suppose the user enters multiple lines during this time\nscanner.nextLine(); // this fills the scanner's buffer\ndeleteInput(); // this will only read anything if the input does not fit into the scanner's buffer\nSystem.out.println(scanner.nextLine()); // if there is a line in the scanner's buffer, this will only read from the buffer, not from System.in\n</code></pre>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292280,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1744290526,
    "last_activity_date" : 1744290526,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79566757,
    "question_id" : 79566621,
    "body" : "<h3>Version 1 of <code>deleteInput</code></h3>\n<ul>\n<li><code>scanner.nextLine()</code> returns one line, but consumes  <strong>the whole available input</strong></li>\n<li>Therefore next <code>System.out.println(scanner.nextLine())</code> has something to print,</li>\n</ul>\n<p>Additional note: <code>System.in.available()</code> returns <code>0</code> after a single call to <code>scanner.nextLine()</code>, because whole input is consumed by <code>scanner</code></p>\n<hr />\n<h3>Version 2 of <code>deleteInput</code></h3>\n<ul>\n<li><code>dummyScanner</code> consumes the whole available input.</li>\n<li>Because of this, the original <code>scanner.nextLine()</code> has nothing to read</li>\n<li>Therefore, <code>System.out.println(scanner.nextLine())</code> outputs nothing</li>\n</ul>\n<hr />\n<p>Code to illustrate this behavior:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Input 3 lines&quot;);\n\nThread.currentThread();\nThread.sleep(8000);\n\nSystem.out.println(&quot;After sleep&quot;);\n\nScanner scanner1 = new Scanner(System.in);\nScanner scanner2 = new Scanner(System.in);\n\nSystem.out.println(&quot;scanner1.nextLine() - &quot; + scanner1.nextLine());\n\nif (System.in.available() &gt; 0) {\n    System.out.println(&quot;scanner2.nextLine() - &quot; + scanner2.nextLine());\n} else {\n    System.out.println(&quot;No input available&quot;);\n}\n\nSystem.out.println(&quot;scanner1.nextLine() - &quot; + scanner1.nextLine());\nSystem.out.println(&quot;scanner1.nextLine() - &quot; + scanner1.nextLine());\n</code></pre>\n<p>On input:</p>\n<pre><code>1\n2\n3\n</code></pre>\n<p>Output is:</p>\n<pre><code>After sleep\nscanner1.nextLine() - 1\nNo input available\nscanner1.nextLine() - 2\nscanner1.nextLine() - 3\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 10320634,
      "reputation" : 3398,
      "user_id" : 7613649,
      "user_type" : "registered",
      "accept_rate" : 25,
      "profile_image" : "https://www.gravatar.com/avatar/c95137fce225c304ac42743da3816d6c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Geba",
      "link" : "https://stackoverflow.com/users/7613649/geba"
    },
    "creation_date" : 1744291049,
    "last_activity_date" : 1744291756,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140320398,
    "post_id" : 79566621,
    "body" : "Ah okay, so the output of version 2 is the desired output. That wasn&#39;t very clear.",
    "score" : 0,
    "owner" : {
      "account_id" : 6651855,
      "reputation" : 292280,
      "user_id" : 5133585,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/dfqcw.png?s=256",
      "display_name" : "Sweeper",
      "link" : "https://stackoverflow.com/users/5133585/sweeper"
    },
    "creation_date" : 1744289327,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140320393,
    "post_id" : 79566621,
    "body" : "Version 1 does only skip the first line. Version 2 skips all lines. I don&#39;t understand why version 1 only skips the first line and not all lines",
    "score" : 0,
    "owner" : {
      "account_id" : 41318481,
      "reputation" : 23,
      "user_id" : 30233070,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/XO1hiGcg.jpg?s=256",
      "display_name" : "Ian",
      "link" : "https://stackoverflow.com/users/30233070/ian"
    },
    "creation_date" : 1744289196,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}