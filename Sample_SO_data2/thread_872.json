{
  "question" : {
    "question_id" : 79768212,
    "title" : "How to access event timestamp in @EventSourcingHandler in Axon Framework?",
    "body" : "<p>Iâ€™m using Spring Boot with Axon (<code>axon-eventsourcing:4.5.8</code>) and want to capture the timestamp of an event inside an aggregate.\nMy handler looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EventSourcingHandler\npublic void on(FooEvent event, @Timestamp Instant requestedAt) {\n    ...\n}\n</code></pre>\n<p>This works fine, however the <a href=\"https://apidocs.axoniq.io/4.5/org/axonframework/eventsourcing/EventSourcingHandler.html\" rel=\"nofollow noreferrer\">Axon docs</a> say:</p>\n<blockquote>\n<p>Parameters of type Instant will resolve to the timestamp of the EventMessage. This is the time at which the Event was generated.</p>\n</blockquote>\n<p>Based on that, I expected this to work as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EventSourcingHandler\npublic void on(FooEvent event, Instant requestedAt) {\n    ...\n}\n</code></pre>\n<p>But then my fixture tests fail with:</p>\n<pre class=\"lang-none prettyprint-override\"><code>No resource of type [java.time.Instant] has been registered. It is required for one of the handlers being executed.\n</code></pre>\n<p>So my question is: Is this a documentation bug, or am I missing something about parameter resolution in <code>@EventSourcingHandler</code>?</p>\n<hr />\n<p>Axon docs also state for <a href=\"https://apidocs.axoniq.io/4.5/org/axonframework/eventhandling/Timestamp.html\" rel=\"nofollow noreferrer\">@Timestamp</a></p>\n<blockquote>\n<p>Annotation indication that a parameter on an <strong>Event Handler</strong> method should be injected with the Timestamp of an Event Message. The parameter type must be assignable from Instant.</p>\n</blockquote>\n<p>This leads me to believe this is only for <code>@EventHandler</code>s and not <code>@EventSourcingHandler</code>. Am I missing or misinterpreting something here?</p>\n",
    "tags" : [ "java", "spring-boot", "axon", "axon-framework" ],
    "owner" : {
      "account_id" : 4756794,
      "reputation" : 3839,
      "user_id" : 3845362,
      "user_type" : "registered",
      "accept_rate" : 62,
      "profile_image" : "https://www.gravatar.com/avatar/84e378ff1658fb120d489719844453c5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Edito",
      "link" : "https://stackoverflow.com/users/3845362/edito"
    },
    "is_answered" : false,
    "view_count" : 90,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1758189852,
    "creation_date" : 1758186265,
    "link" : "https://stackoverflow.com/questions/79768212/how-to-access-event-timestamp-in-eventsourcinghandler-in-axon-framework",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}