{
  "question" : {
    "question_id" : 79782860,
    "title" : "How to configure Gradle to pickup ArchUnit tests via @Tag annotation?",
    "body" : "<p>When I tried to integrate ArchUnit into our setup, I noticed that ArchUnit tests were not being picked up by Gradle.</p>\n<p>Our Gradle config contains several testing tasks to separate UnitTests, IntegrationTests, and AcceptanceTests. Those tasks only pick up tagged classes:</p>\n<pre><code>test {\n    useJUnitPlatform {\n        includeTags &quot;UnitTest&quot;\n    }\n}\n</code></pre>\n<p>It appears that ArchUnit tests are not being picked up despite being tagged correctly.</p>\n<pre><code>@Tag(&quot;UnitTest&quot;)\n@AnalyzeClasses(packages = &quot;com.example&quot;, importOptions = {ImportOption.DoNotIncludeTests.class})\npublic class ArchTests {\n    ...\n}\n</code></pre>\n<p>When I invert the includeTags to excludeTags the ArchUnit tests are being picked up.</p>\n<pre><code>test {\n    useJUnitPlatform {\n        excludeTags &quot;IntegrationsTest&quot;, &quot;AcceptanceTest&quot;\n    }\n}\n</code></pre>\n<p>How can I configure Gradle/ArchUnit to preserve the <code>include</code> notion?</p>\n",
    "tags" : [ "java", "gradle", "junit5", "archunit" ],
    "owner" : {
      "account_id" : 14789526,
      "reputation" : 137,
      "user_id" : 10680861,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-xKtMN31ekmU/AAAAAAAAAAI/AAAAAAAABvY/hgz_UBEVzi0/s256-rj/photo.jpg",
      "display_name" : "Sebastian Sprenger",
      "link" : "https://stackoverflow.com/users/10680861/sebastian-sprenger"
    },
    "is_answered" : true,
    "view_count" : 89,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1759658668,
    "creation_date" : 1759651144,
    "link" : "https://stackoverflow.com/questions/79782860/how-to-configure-gradle-to-pickup-archunit-tests-via-tag-annotation",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79782911,
    "question_id" : 79782860,
    "body" : "<p>Does this message from <a href=\"https://github.com/TNG/ArchUnit/issues/1238#issuecomment-1913746233\" rel=\"nofollow noreferrer\">ArchUnit issue 1238</a> help?</p>\n<blockquote>\n<p><code>@Tag</code> is actually from the JUnit Jupiter API, while ArchUnit is a completely different JUnit 5 engine that just builds on the JUnit platform. As such ArchUnit will never react to things that come from <code>org.junit.jupiter</code>.\nHowever, ArchUnit offers almost the same API, you just have to use <a href=\"https://javadoc.io/doc/com.tngtech.archunit/archunit-junit5-api/latest/com/tngtech/archunit/junit/ArchTag.html\" rel=\"nofollow noreferrer\"><code>@ArchTag</code></a> instead of <code>@Tag</code>. It should behave very similar to <code>@Tag</code> in all respects.</p>\n</blockquote>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 18069010,
      "reputation" : 3257,
      "user_id" : 13134095,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1IU6U.png?s=256",
      "display_name" : "Manfred",
      "link" : "https://stackoverflow.com/users/13134095/manfred"
    },
    "creation_date" : 1759658668,
    "last_activity_date" : 1759658668,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79782911" : [ {
      "comment_id" : 140778159,
      "post_id" : 79782911,
      "body" : "Brilliant, this does exactly what I want! Thanks a lot!",
      "score" : 0,
      "owner" : {
        "account_id" : 14789526,
        "reputation" : 137,
        "user_id" : 10680861,
        "user_type" : "registered",
        "profile_image" : "https://lh6.googleusercontent.com/-xKtMN31ekmU/AAAAAAAAAAI/AAAAAAAABvY/hgz_UBEVzi0/s256-rj/photo.jpg",
        "display_name" : "Sebastian Sprenger",
        "link" : "https://stackoverflow.com/users/10680861/sebastian-sprenger"
      },
      "creation_date" : 1759677633,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}