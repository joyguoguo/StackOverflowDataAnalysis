{
  "question" : {
    "question_id" : 79602052,
    "title" : "&quot;org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class:&quot; When trying to use a configuration class",
    "body" : "<p>I am new to Spring, and I'm trying to make a configuration class to configure Spring Security for a spring boot API. However when I created a class with the <code>@Configuration</code> annotation, I got an error. It's the same error whether I try to define beans in the class or if it's an empty class. I tried doing it in a simpler project and I didn't get that error. Here is my config class:</p>\n<pre><code>package com.school_database_access_api;\n\nimport javax.sql.DataSource;\n\nimport org.springframework.config.java.annotation.Configuration;\n\n@Configuration\npublic class SecurityConfig\n{\n    \n}\n\n</code></pre>\n<p>And here is the stack trace:</p>\n<pre><code>\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n\n[32m :: Spring Boot :: [39m              [2m (v3.4.5)[0;39m\n\n[2m2025-05-01T16:18:07.658+02:00[0;39m [32m INFO[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36mc.s.SchoolDbAccessApiApplication        [0;39m [2m:[0;39m Starting SchoolDbAccessApiApplication using Java 21.0.6 with PID 12848 (C:\\Users\\lucas\\Projets\\Eclipse-Workspace\\FirstJavaApp\\SchoolDbAccessAPI\\target\\classes started by lucas in C:\\Users\\lucas\\Projets\\Eclipse-Workspace\\FirstJavaApp\\SchoolDbAccessAPI)\n[2m2025-05-01T16:18:07.661+02:00[0;39m [32m INFO[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36mc.s.SchoolDbAccessApiApplication        [0;39m [2m:[0;39m No active profile set, falling back to 1 default profile: &quot;default&quot;\n[2m2025-05-01T16:18:07.733+02:00[0;39m [32m INFO[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36m.e.DevToolsPropertyDefaultsPostProcessor[0;39m [2m:[0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n[2m2025-05-01T16:18:07.733+02:00[0;39m [32m INFO[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36m.e.DevToolsPropertyDefaultsPostProcessor[0;39m [2m:[0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n[2m2025-05-01T16:18:07.891+02:00[0;39m [33m WARN[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36mConfigServletWebServerApplicationContext[0;39m [2m:[0;39m Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\lucas\\Projets\\Eclipse-Workspace\\FirstJavaApp\\SchoolDbAccessAPI\\target\\classes\\com\\school_database_access_api\\SecurityConfig.class]\n[2m2025-05-01T16:18:07.959+02:00[0;39m [31mERROR[0;39m [35m12848[0;39m [2m--- [SchoolDbAccessAPI] [  restartedMain] [0;39m[36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to read candidate component class: file [C:\\Users\\lucas\\Projets\\Eclipse-Workspace\\FirstJavaApp\\SchoolDbAccessAPI\\target\\classes\\com\\school_database_access_api\\SecurityConfig.class]\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:510) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.findCandidateComponents(ClassPathScanningCandidateComponentProvider.java:351) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:277) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:128) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:346) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:281) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:204) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:172) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:418) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:290) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:349) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:118) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:791) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:609) ~[spring-context-6.2.6.jar:6.2.6]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.4.5.jar:3.4.5]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753) ~[spring-boot-3.4.5.jar:3.4.5]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-3.4.5.jar:3.4.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:318) ~[spring-boot-3.4.5.jar:3.4.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1362) ~[spring-boot-3.4.5.jar:3.4.5]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1351) ~[spring-boot-3.4.5.jar:3.4.5]\n    at com.school_database_access_api.SchoolDbAccessApiApplication.main(SchoolDbAccessApiApplication.java:11) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.4.5.jar:3.4.5]\nCaused by: java.lang.annotation.AnnotationFormatError: Invalid default: public abstract org.springframework.beans.factory.annotation.Autowire org.springframework.config.java.annotation.Configuration.defaultAutowire()\n    at java.base/java.lang.reflect.Method.getDefaultValue(Method.java:781) ~[na:na]\n    at org.springframework.core.annotation.AttributeMethods.&lt;init&gt;(AttributeMethods.java:73) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AttributeMethods.compute(AttributeMethods.java:268) ~[spring-core-6.2.6.jar:6.2.6]\n    at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330) ~[na:na]\n    at org.springframework.core.annotation.AttributeMethods.forAnnotationType(AttributeMethods.java:251) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMapping.&lt;init&gt;(AnnotationTypeMapping.java:119) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.addIfPossible(AnnotationTypeMappings.java:118) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.addAllMappings(AnnotationTypeMappings.java:80) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.&lt;init&gt;(AnnotationTypeMappings.java:72) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.createMappings(AnnotationTypeMappings.java:278) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.lambda$get$0(AnnotationTypeMappings.java:273) ~[spring-core-6.2.6.jar:6.2.6]\n    at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330) ~[na:na]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.get(AnnotationTypeMappings.java:273) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:226) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:189) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:175) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.TypeMappedAnnotation.of(TypeMappedAnnotation.java:617) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.annotation.MergedAnnotation.of(MergedAnnotation.java:612) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.type.classreading.MergedAnnotationReadingVisitor.visitEnd(MergedAnnotationReadingVisitor.java:98) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3023) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.asm.ClassReader.accept(ClassReader.java:611) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.asm.ClassReader.accept(ClassReader.java:427) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122) ~[spring-core-6.2.6.jar:6.2.6]\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:470) ~[spring-context-6.2.6.jar:6.2.6]\n    ... 23 common frames omitted\n</code></pre>\n<p>Here is my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.4.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    \n    &lt;groupId&gt;com.LucasBrelivet&lt;/groupId&gt;\n    &lt;artifactId&gt;SchoolDbAccessAPI&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;SchoolDbAccessAPI&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;url/&gt;\n    \n    &lt;licenses&gt;\n        &lt;license/&gt;\n    &lt;/licenses&gt;\n    \n    &lt;developers&gt;\n        &lt;developer/&gt;\n    &lt;/developers&gt;\n    \n    &lt;scm&gt;\n        &lt;connection/&gt;\n        &lt;developerConnection/&gt;\n        &lt;tag/&gt;\n        &lt;url/&gt;\n    &lt;/scm&gt;\n    \n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.javaconfig&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-javaconfig&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0.m3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springdoc/springdoc-openapi-starter-webmvc-ui --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.8.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!--&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>The stack trace mentions the Autowire annotation, which I use in a couple places, namely fields in my controller and my tests. Apparently here it's a default, and it's invalid? A default for what? Why is it invalid, and what can I do to change it?</p>\n",
    "tags" : [ "java", "spring-boot", "maven" ],
    "owner" : {
      "account_id" : 41478833,
      "reputation" : 101,
      "user_id" : 30309362,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/422a624d67eaba2a3403f8d15d836a83?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Lucas Br&#233;livet",
      "link" : "https://stackoverflow.com/users/30309362/lucas-br%c3%a9livet"
    },
    "is_answered" : true,
    "view_count" : 99,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1746112041,
    "creation_date" : 1746111018,
    "link" : "https://stackoverflow.com/questions/79602052/org-springframework-beans-factory-beandefinitionstoreexception-failed-to-read",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79602079,
    "question_id" : 79602052,
    "body" : "<p>It seems that you use obsolete dependency in you pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.javaconfig&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-javaconfig&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.m3&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>And that's why you're using incorrect import:</p>\n<pre><code>import org.springframework.config.java.annotation.Configuration;\n</code></pre>\n<p>Use instead:</p>\n<pre><code>import org.springframework.context.annotation.Configuration;\n</code></pre>\n<p>This is correct <code>@Configuration</code> for Spring Boot 3+ and Spring Framework 6.</p>\n",
    "score" : 5,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 38931631,
      "reputation" : 671,
      "user_id" : 29023248,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
      "display_name" : "Aleksey Bykov",
      "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
    },
    "creation_date" : 1746112041,
    "last_activity_date" : 1746112041,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79602079" : [ {
      "comment_id" : 140387523,
      "post_id" : 79602079,
      "body" : "glad to hear it, good luck with the project!",
      "score" : 0,
      "owner" : {
        "account_id" : 38931631,
        "reputation" : 671,
        "user_id" : 29023248,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
        "display_name" : "Aleksey Bykov",
        "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
      },
      "creation_date" : 1746116076,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140387478,
      "post_id" : 79602079,
      "body" : "Thank you, removing that dependency and changing the import seems to have fixed the problem.",
      "score" : 0,
      "owner" : {
        "account_id" : 41478833,
        "reputation" : 101,
        "user_id" : 30309362,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/422a624d67eaba2a3403f8d15d836a83?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Lucas Br&#233;livet",
        "link" : "https://stackoverflow.com/users/30309362/lucas-br%c3%a9livet"
      },
      "creation_date" : 1746115242,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}