{
  "question" : {
    "question_id" : 79596580,
    "title" : "Can&#39;t execute requests from Swagger UI to API Gateway for different services",
    "body" : "<p>In a multi-module Gradle project</p>\n<ul>\n<li>the following dependencies are used in services:</li>\n</ul>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-web'\n// SpringDoc OpenAPI\nimplementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.8.6'\n</code></pre>\n<ul>\n<li>in API Gateway:</li>\n</ul>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-webflux'\nimplementation 'org.springframework.cloud:spring-cloud-starter-gateway'\nimplementation 'org.springframework.cloud:spring-cloud-starter-openfeign'\nimplementation 'org.springframework.cloud:spring-cloud-starter-loadbalancer'\nimplementation 'org.springframework.cloud:spring-cloud-starter-circuitbreaker-reactor-resilience4j' \nimplementation 'org.springframework.cloud:spring-cloud-starter-config'\n// SpringDoc OpenAPI \nimplementation 'org.springdoc:springdoc-openapi-starter-webflux-ui:2.8.6'\n</code></pre>\n<ul>\n<li>properties in services</li>\n</ul>\n<pre><code>spring: \n  application: \n    name: &lt;service name&gt;\nserver: \n  port: &lt;service port&gt;\nspringdoc: \n  api-docs: \n    enabled: true \n    path: /v3/api-docs\n</code></pre>\n<ul>\n<li>property in API Gateway</li>\n</ul>\n<pre><code>spring: \n  application: \n    name: api-gateway\nserver: \n  port: 8765 \ncloud: \n  gateway: \n    httpclient: \n      response-timeout: 5s \n    routes: \n      - id: api-gateway-route \n        uri: http://api-gateway:8765 (I don't know how to insert // characters on stackoverflow)\n        predicates: \n          - Path=/gateway/** \n        filters: \n          - RewritePath=/gateway/(?&lt;segment&gt;.*), /${segment} \n          - name: Retry \n          args: \n            retries: 3 \n            statuses: BAD_GATEWAY, SERVICE_UNAVAILABLE \n            methods: GET, POST \n          - name: CircuitBreaker \n            args: \n              name: apiGatewayCircuitBreaker \n              fallbackUri: forward:/fallback/gateway \n\n      - id: resume-analyzer-route \n        uri: http://resume-analyzer:8083 \n        predicates: \n          - Path=/analyzer/** \n        filters: \n          - RewritePath=/analyzer/(?&lt;segment&gt;.*), /${segment} \n          - name: Retry \n            args: \n            retries: 3 \n            statuses: BAD_GATEWAY, SERVICE_UNAVAILABLE \n            methods: GET, POST \n          - name: CircuitBreaker \n            args: \n              name: resumeAnalyzerCircuitBreaker \n              fallbackUri: forward:/fallback/analyzer \n\n      - id: resume-generator-route \n        uri: http://resume-generator:8082 \n        predicates: \n          - Path=/generator/** \n        filters: \n          - RewritePath=/generator/(?&lt;segment&gt;.*), /${segment} \n          - name: Retry \n            args: \n              retries: 3 \n              statuses: BAD_GATEWAY, SERVICE_UNAVAILABLE \n              methods: GET, POST \n          - name: CircuitBreaker \n            args: \n              name: resumeGeneratorCircuitBreaker \n              fallbackUri: forward:/fallback/generator\n\n        - id: deepseek-service-route\n          uri: http://deepseek-service:9090\n          predicates:\n            - Path=/deepseek/**\n          filters:\n            - RewritePath=/deepseek/(?&lt;segment&gt;.*), /${segment}\n            - name: Retry\n              args:\n                retries: 3\n                statuses: BAD_GATEWAY, SERVICE_UNAVAILABLE\n                methods: GET, POST\n            - name: CircuitBreaker\n              args:\n                name: deepseekServiceCircuitBreaker\n                fallbackUri: forward:/fallback/deepseek\nspringdoc: \n  api-docs: \n    enabled: true \n    path: /v3/api-docs \n  swagger-ui: \n    enabled: true \n    config-url: /v3/api-docs/swagger-config \n    urls: \n      - name: api gateway \n        url: /gateway/v3/api-docs \n      - name: resume analyzer \n        url: /analyzer/v3/api-docs \n      - name: resume generator \n        url: /generator/v3/api-docs \n      - name: deepseek service \n        url: /deepseek/v3/api-docs\n</code></pre>\n<p>Swagger UI is available at URL <em>http://localhost:8765/swagger-ui/index.html</em>\nIn Swagger UI I can switch between API services using a drop-down list. But when I try to execute a request from the documentation I get an error:</p>\n<p><em>swagger-ui-bundle.js:2\nGET http://api-gateway:8765/api/status net::ERR_NAME_NOT_RESOLVED</em></p>\n<p>What I tried:</p>\n<ul>\n<li>I changed the routes in the API Gateway property, if I substitute &quot;localhost&quot; instead of api-gateway and service names in the uri, then I only have access to the documentation from APE Gateway, requests in which are processed correctly (HTTP Status 200), but when changing the API Gateway drop-down list to any service, I get an error, the documentation is not displayed</li>\n<li>I read Swagger UI and OpenAPI documentation, but I could not find a suitable example</li>\n</ul>\n<p>What I want to get:</p>\n<ul>\n<li>access to all documentation (services and API Gateway) via one URL (http://localhost:8765/swagger-ui/index.html) - achieved</li>\n<li>working requests from Swagger UI - <strong>need your help</strong></li>\n</ul>\n",
    "tags" : [ "java", "spring-boot", "openapi", "swagger-ui" ],
    "owner" : {
      "account_id" : 37031475,
      "reputation" : 1,
      "user_id" : 28042300,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dd0ce5d5c51b0598f6cd66abd7548b34?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Виктор Гловлюк",
      "link" : "https://stackoverflow.com/users/28042300/%d0%92%d0%b8%d0%ba%d1%82%d0%be%d1%80-%d0%93%d0%bb%d0%be%d0%b2%d0%bb%d1%8e%d0%ba"
    },
    "is_answered" : false,
    "view_count" : 93,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1745906498,
    "creation_date" : 1745847312,
    "link" : "https://stackoverflow.com/questions/79596580/cant-execute-requests-from-swagger-ui-to-api-gateway-for-different-services",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79597693,
    "question_id" : 79596580,
    "body" : "<p>Maybe it will be useful for someone!\nAs far as I could understand the problem:</p>\n<ul>\n<li>swagger UI automatically generates a server to which requests from the documentation are sent, based on:</li>\n</ul>\n<pre><code>cloud:\n  gateway:\n    routes:\n      - id: resume-analyzer-route\n        uri: http://resume-analyzer:8083\n</code></pre>\n<p>But you can implement a bean in each service and in API Gateway, for manual server configuration, which will override the default server, it helped me!</p>\n<pre><code>@OpenAPIDefinition\n@Configuration\npublic class OpenApiConfig {\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .addServersItem(new Server()\n                        .url(&quot;http://localhost:8765/analyzer&quot;)\n                        .description(&quot;Analyzer API&quot;));\n    }\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 37031475,
      "reputation" : 1,
      "user_id" : 28042300,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dd0ce5d5c51b0598f6cd66abd7548b34?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Виктор Гловлюк",
      "link" : "https://stackoverflow.com/users/28042300/%d0%92%d0%b8%d0%ba%d1%82%d0%be%d1%80-%d0%93%d0%bb%d0%be%d0%b2%d0%bb%d1%8e%d0%ba"
    },
    "creation_date" : 1745906498,
    "last_activity_date" : 1745906498,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}