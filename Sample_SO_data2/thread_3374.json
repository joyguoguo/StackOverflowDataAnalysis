{
  "question" : {
    "question_id" : 79555043,
    "title" : "Why Is My Key Listener Not Working (Java)",
    "body" : "<p>I have a <code>KeyListener</code> inside a file called Input, along with a <code>MouseWheelListener</code>. While the <code>MouseWheelListener</code> works as expected, the <code>KeyListener</code> does not respond properly. I've looked around for solutions, but as I am new to Java, I can't pinpoint the issue. There are 4 files here they are, frame and panel are in the window folder and input and camera are in the IDK folder:</p>\n<p>Frame:</p>\n<pre><code>package window;\n\nimport javax.swing.*;\nimport java.awt.*;\n\nimport IDK.input;\n\npublic class frame {\n\n    public static JPanel p = new panel ();\n\n    public static void main (String [] args) {\n\n        createWindow ();\n        input.inputDetect ();\n    }\n\n    public static void createWindow () {\n\n        JFrame f = new JFrame (&quot;frame&quot;);\n        f.add (p);\n        f.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\n        f.setMinimumSize (new Dimension (800, 500));\n        f.setLocationRelativeTo (null);\n        f.setVisible (true);\n    }\n}\n</code></pre>\n<p>Panel:</p>\n<pre><code>package window;\n\nimport javax.swing.*;\nimport java.awt.*;\n\nimport IDK.camera;\n\npublic class panel extends JPanel {\n\n    public void paint (Graphics g) {\n\n        super.paint (g);\n\n        g.fillRect (camera.viewBox.x, camera.viewBox.y, camera.viewBox.width, camera.viewBox.height);\n    }\n}\n</code></pre>\n<p>Input:</p>\n<pre><code>package IDK;\n\nimport java.awt.event.*;\n\nimport window.frame;\n\npublic class input {\n\n    public static int notches;\n    public static int keyCode;\n\n    public static void inputDetect () {\n\n        frame.p.addMouseWheelListener (new MouseWheelListener () {\n\n            public void mouseWheelMoved (MouseWheelEvent e) {\n\n                notches = e.getWheelRotation();\n                camera.viewBoxCal ();\n            }\n        });\n\n        frame.p.addKeyListener (new KeyAdapter () {\n    \n            public void keyPressed (KeyEvent e) {\n    \n                System.out.println (&quot;test&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n<p>Camera:</p>\n<pre><code>package IDK;\n\nimport java.awt.*;\n\nimport window.frame;\n\npublic class camera {\n\n    static float [] camInfo = new float [3];\n    public static Rectangle viewBox = new Rectangle ();\n\n    public static void viewBoxCal () {\n\n        camInfo [0] = 0.f;\n        camInfo [1] = 0.f;\n\n        if (input.notches &gt; 0) {\n\n            if (camInfo [2] &lt; 10) {\n\n                camInfo [2] += 0.1;\n            }\n        } else if (camInfo [2] &gt; 0.1) {\n\n            camInfo [2] -= 0.1;\n        }\n\n        viewBox = new Rectangle ((int) camInfo [0], (int) camInfo [1], (int) (frame.p.getWidth () * camInfo [2] / 10), (int) (frame.p.getHeight () * camInfo [2] / 10));\n        System.out.println (viewBox);\n        return;\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "keylistener" ],
    "owner" : {
      "account_id" : 35209200,
      "reputation" : 21,
      "user_id" : 27052657,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Hugo Way",
      "link" : "https://stackoverflow.com/users/27052657/hugo-way"
    },
    "is_answered" : true,
    "view_count" : 136,
    "answer_count" : 2,
    "score" : 1,
    "last_activity_date" : 1746454861,
    "creation_date" : 1743761842,
    "link" : "https://stackoverflow.com/questions/79555043/why-is-my-key-listener-not-working-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79557088,
    "question_id" : 79555043,
    "body" : "<p>This is an example of doing it with key bindings. So far, just left arrow, right arrow and numpad + implemented. Try to avoid the string literals I used ;)</p>\n<pre><code>import java.awt.Container;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Rectangle;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.KeyEvent;\n\nimport javax.swing.AbstractAction;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.KeyStroke;\n\npublic class KeyBindingDemo extends JFrame {\n    private void setGui() {\n        try {\n            setLocation(0, 100);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            add(new RectanglePanel());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            EventQueue.invokeAndWait(() -&gt; {\n                KeyBindingDemo f = new KeyBindingDemo();\n                f.setGui();\n                f.setSize(200, 200);\n                f.setVisible(true);\n            });\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private class RectanglePanel extends JPanel {\n        private static final int MOVE_INC = 5;\n        private static final int RESIZE_INC = 2;\n        Rectangle viewBox = new Rectangle(50, 50);\n\n        public RectanglePanel() {\n            getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,0), &quot;moveRight&quot;);\n            getActionMap().put(&quot;moveRight&quot;, new MoveRight());\n            getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,0), &quot;moveLeft&quot;);\n            getActionMap().put(&quot;moveLeft&quot;, new MoveLeft());\n            getInputMap().put(KeyStroke.getKeyStroke(KeyEvent.VK_ADD, 0), &quot;grow&quot;);\n            getActionMap().put(&quot;grow&quot;, new Grow());\n        }\n\n        private class Grow extends AbstractAction {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                viewBox.width += RESIZE_INC;\n                viewBox.height += RESIZE_INC;\n                repaint();\n            }\n        }\n\n        private class MoveRight extends AbstractAction {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                viewBox.x += RectanglePanel.MOVE_INC;\n                repaint();\n            }\n        }\n\n        private class MoveLeft extends AbstractAction {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                viewBox.x -= RectanglePanel.MOVE_INC;\n                repaint();\n            }\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2 = (Graphics2D) g;\n            g2.draw(viewBox);\n        }\n    }\n}\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1743862497,
    "last_activity_date" : 1743862886,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79555942,
    "question_id" : 79555043,
    "body" : "<p>From what I know, there are two things that I'll suggest you to try:</p>\n<ol>\n<li><p>Ensure that the component on which you make the action has the focus. This can easily be done by setting it manually in your code, here is a basic example:</p>\n<pre><code>public static void inputDetect() {\n    frame.p.setFocusable(true); //sets the focus.\n    frame.p.requestFocusInWindow(); // Ensures JPanel can receive key events.\n\n    frame.p.addMouseWheelListener(new MouseWheelListener() {\n        public void mouseWheelMoved(MouseWheelEvent e) {\n            notches = e.getWheelRotation();\n            camera.viewBoxCal();\n        }\n    });\n\n    frame.p.addKeyListener(new KeyAdapter() {\n        public void keyPressed(KeyEvent e) {\n            System.out.println(&quot;Key Pressed: &quot; + e.getKeyCode()); // Debugging output.\n        }\n    });\n}\n</code></pre>\n<p>On this topic, I also found some resources that might help:</p>\n<p><a href=\"https://stackoverflow.com/questions/5378757/why-wont-the-keypressed-method-be-called\">Why won't the keyPressed method be called?</a> - A similar question posted on Stack Overflow that you could check out so that you can see other alternatives of solving a problem similar to yours.</p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a> - This was suggested by @Gilbert Le Blanc. It is an insightful and easy to follow documentation about how to properly create a GUI with the Java SWING library.</p>\n</li>\n<li><p>Key bindings are generally superior to requesting focus on a component, I will offer just a simple example that you can further leverage in you code, as there is already a detailed answer covering strictly key bindings.</p>\n<p>Simple example:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.event.ActionEvent;\n\npublic class KeyBindingExample {\n    public static void main(String[] args) {\n        JFrame frame = new JFrame(&quot;Key Binding Example&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(300, 200);\n\n        JPanel panel = new JPanel();\n        frame.add(panel);\n\n        // Get the input map and action map from the panel\n        InputMap inputMap = panel.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);\n        ActionMap actionMap = panel.getActionMap();\n\n        // Bind the 'A' key to an action\n        inputMap.put(KeyStroke.getKeyStroke('A'), &quot;printMessage&quot;);\n        actionMap.put(&quot;printMessage&quot;, new AbstractAction() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                System.out.println(&quot;You pressed 'A'!&quot;);\n            }\n        });\n\n        frame.setVisible(true);\n    }\n}\n\n</code></pre>\n<p>Also, if you are interested into how key bindings work, here is a Stack Overflow post covering this: <a href=\"https://stackoverflow.com/questions/15753551/java-keybindings-how-does-it-work\">Java KeyBindings: How does it work?</a>.</p>\n</li>\n</ol>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 38890247,
      "reputation" : 156,
      "user_id" : 29003408,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/LhjH9Wyd.jpg?s=256",
      "display_name" : "Andrei GreblÄƒ",
      "link" : "https://stackoverflow.com/users/29003408/andrei-grebl%c4%83"
    },
    "creation_date" : 1743787168,
    "last_activity_date" : 1746353278,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140299381,
    "post_id" : 79555043,
    "body" : "Thanks for all of your help, I looked at the Oracle page and now it is working great!",
    "score" : 0,
    "owner" : {
      "account_id" : 35209200,
      "reputation" : 21,
      "user_id" : 27052657,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Hugo Way",
      "link" : "https://stackoverflow.com/users/27052657/hugo-way"
    },
    "creation_date" : 1743771756,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140299319,
    "post_id" : 79555043,
    "body" : "Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.",
    "score" : 0,
    "owner" : {
      "account_id" : 114128,
      "reputation" : 51685,
      "user_id" : 300257,
      "user_type" : "registered",
      "accept_rate" : 89,
      "profile_image" : "https://i.sstatic.net/gWeJr.jpg?s=256",
      "display_name" : "Gilbert Le Blanc",
      "link" : "https://stackoverflow.com/users/300257/gilbert-le-blanc"
    },
    "creation_date" : 1743770786,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298946,
    "post_id" : 79555043,
    "body" : "For a <code>KeyListener</code> to work, you need to ensure that the component on which it&#39;s set has the focus - a topic for you to look into, though key bindings are probably superior",
    "score" : 1,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1743765533,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298883,
    "post_id" : 79555043,
    "body" : "Do you get any error message? To resolve your circular dependencies: don&#39;t access static member fields (that are not used as constants) from other classes. Either pass the <code>frame</code> instance to manipulate them as parameters to other methods or constructors, or put public methods (not <code>static</code> please) to the class that owns the field to manipulate - then you will have to pass your own instance of that class (<code>frame</code>) to the other methods or classes.",
    "score" : 0,
    "owner" : {
      "account_id" : 3391382,
      "reputation" : 5350,
      "user_id" : 2846138,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2sp68.png?s=256",
      "display_name" : "cyberbrain",
      "link" : "https://stackoverflow.com/users/2846138/cyberbrain"
    },
    "creation_date" : 1743764331,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298812,
    "post_id" : 79555043,
    "body" : "It&#39;s good that you&#39;re <i>trying</i> to be modular/OO about things but in this case, it&#39;s somewhat over-the-top and has resulted in circular dependencies, which is a no-no",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1743763042,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298803,
    "post_id" : 79555043,
    "body" : "Ok, thanks. The key listener is for camera movement",
    "score" : 0,
    "owner" : {
      "account_id" : 35209200,
      "reputation" : 21,
      "user_id" : 27052657,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Hugo Way",
      "link" : "https://stackoverflow.com/users/27052657/hugo-way"
    },
    "creation_date" : 1743762927,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298800,
    "post_id" : 79555043,
    "body" : "@JonSkeet is right about <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">naming</a>. Also, avoid <a href=\"https://technojeeves.com/index.php/aliasjava1/108-static-is-a-swear-word\" rel=\"nofollow noreferrer\">static</a>. You should override <code>paintComponent</code>, not <code>paint</code>. What is your key listener for? You would be better to use key bindings",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1743762838,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140298788,
    "post_id" : 79555043,
    "body" : "Separate from anything else, I would <i>strongly</i> advise you to start following Java naming conventions <i>immediately</i>. The fact that you&#39;ve got a method called <code>input</code> in a class called <code>input</code> is highly confusing to start with.",
    "score" : 1,
    "owner" : {
      "account_id" : 11683,
      "reputation" : 1521090,
      "user_id" : 22656,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/6d8ebb117e8d83d74ea95fbdd0f87e13?s=256&d=identicon&r=PG",
      "display_name" : "Jon Skeet",
      "link" : "https://stackoverflow.com/users/22656/jon-skeet"
    },
    "creation_date" : 1743762568,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79557088" : [ {
      "comment_id" : 140311845,
      "post_id" : 79557088,
      "body" : "That&#39;s good. In case you wondered, I did away with the mouse wheel scrolling as it&#39;s not active on my system, so I couldn&#39;t test it ;)",
      "score" : 0,
      "owner" : {
        "account_id" : 22124137,
        "reputation" : 4244,
        "user_id" : 16376827,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
        "display_name" : "g00se",
        "link" : "https://stackoverflow.com/users/16376827/g00se"
      },
      "creation_date" : 1744117763,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140311250,
      "post_id" : 79557088,
      "body" : "I tried you demo program and it has show me a lot that I didn&#39;t know, thank a lot.",
      "score" : 0,
      "owner" : {
        "account_id" : 35209200,
        "reputation" : 21,
        "user_id" : 27052657,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/3f1f40f2f2209796475a2e9e4dee7b81?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Hugo Way",
        "link" : "https://stackoverflow.com/users/27052657/hugo-way"
      },
      "creation_date" : 1744106692,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}