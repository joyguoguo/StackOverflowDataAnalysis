{
  "question" : {
    "question_id" : 79778898,
    "title" : "Application still prints Logback logs instead of Log4j2 after migration",
    "body" : "<p>I migrated my Spring Boot application from Logback to Log4j2, but the application is still printing logs using Logback.</p>\n<p>What I did so far:</p>\n<ol>\n<li><p><strong>Added Log4j2 dependencies:</strong></p>\n  \n org.springframework.boot\n spring-boot-starter-log4j2\n  \n</li>\n<li><p><strong>Created a log4j2.xml config file in src/main/resources.</strong></p>\n</li>\n<li><p><strong>Removed my old logback-spring.xml.</strong></p>\n</li>\n</ol>\n<p>But when I start the app, I still see logs with the Logback format, not Log4j2.</p>\n<p><strong>Example log output:</strong></p>\n<blockquote>\n<p>2025-09-30 12:45:23.123  INFO 12345 --- [           main]\ncom.example.demo.MyApp   : Application started</p>\n<p>14:10:57,475 |-WARN in\nch.qos.logback.core.model.processor.ImplicitModelHandler - Ignoring\nunknown property [Properties] in\n[ch.qos.logback.classic.LoggerContext] 14:10:57,475 |-WARN in\nch.qos.logback.core.model.processor.ImplicitModelHandler - Ignoring\nunknown property [Appenders] in [ch.qos.logback.classic.LoggerContext]\n14:10:57,475 |-WARN in\nch.qos.logback.core.model.processor.ImplicitModelHandler - Ignoring\nunknown property [Loggers] in [ch.qos.logback.classic.LoggerContext]\n14:10:57,475 |-INFO in\nch.qos.logback.core.model.processor.DefaultProcessor@296bfddb - End of\nconfiguration.</p>\n</blockquote>\n<p><strong>Expected:</strong></p>\n<p>Logs should follow my log4j2.xml pattern.</p>\n<p>Logback should not load at all.</p>\n<p><strong>Questions:</strong></p>\n<p>Why is Logback still taking precedence even after adding Log4j2?</p>\n<p>Do I need to explicitly exclude spring-boot-starter-logging in my build.gradle?</p>\n<p>What is the correct way to ensure only Log4j2 is used in Spring Boot?</p>\n",
    "tags" : [ "java", "spring-boot", "logging", "log4j2", "logback" ],
    "owner" : {
      "account_id" : 6132216,
      "reputation" : 603,
      "user_id" : 4782065,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/2754d1d0e13c8d19317307a2ef3f81fd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ankit",
      "link" : "https://stackoverflow.com/users/4782065/ankit"
    },
    "is_answered" : true,
    "view_count" : 128,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1760249807,
    "creation_date" : 1759222285,
    "link" : "https://stackoverflow.com/questions/79778898/application-still-prints-logback-logs-instead-of-log4j2-after-migration",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79778909,
    "question_id" : 79778898,
    "body" : "<p>I think you need to exclude it in your build.gradle as Spring Boot uses Logback as default.</p>\n<p>Afterwards, you can add log4j2 to your dependencies.</p>\n<pre><code>configurations.all {\n    exclude group: &quot;org.springframework.boot&quot;, module: &quot;spring-boot-starter-logging&quot;\n    exclude group: &quot;ch.qos.logback&quot;\n}\ndependencies {\n    implementation(&quot;org.springframework.boot:spring-boot-starter-log4j2&quot;)\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 21102967,
      "reputation" : 56,
      "user_id" : 15512520,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-Mml4xx7K72E/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuckvF-mdRwDNeG-of-LxO_upYPIBGg/s96-c/s256-rj/photo.jpg",
      "display_name" : "Domiii",
      "link" : "https://stackoverflow.com/users/15512520/domiii"
    },
    "creation_date" : 1759222999,
    "last_activity_date" : 1759222999,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79788399,
    "question_id" : 79778898,
    "body" : "<p>Since the questioner did not provide a complete <code>build.gradle</code> configuration, I used the simplest web starter as the basic configuration.</p>\n<h2>Project Tree</h2>\n<pre><code>demo-logging\n├── build.gradle\n└── src\n    └── main\n        ├── java\n        │   └── com\n        │       └── example\n        │           ├── DemoLoggingApplication.java\n        │           └── HelloController.java\n        └── resources\n            ├── application.properties\n            └── log4j2.xml\n</code></pre>\n<h3>log4j2.xml</h3>\n<p>LOG_PATTERN <code>***** %msg%n</code>, Here use 5 consecutive asterisk characters <code>*</code> as a special mark.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;LOG_PATH&quot;&gt;logs&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_FILE&quot;&gt;app.log&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_PATTERN&quot;&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} -  ***** %msg%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot; /&gt;\n        &lt;/Console&gt;\n\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;${LOG_PATH}/${LOG_FILE}&quot;\n                     filePattern=&quot;${LOG_PATH}/app-%d{yyyy-MM-dd}.log.gz&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot; /&gt;\n            &lt;Policies&gt;\n                &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; /&gt;\n            &lt;/Policies&gt;\n            &lt;DefaultRolloverStrategy max=&quot;7&quot;/&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;org.springframework&quot; level=&quot;INFO&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot; /&gt;\n            &lt;AppenderRef ref=&quot;File&quot; /&gt;\n        &lt;/Logger&gt;\n\n        &lt;Logger name=&quot;com.example&quot; level=&quot;DEBUG&quot; additivity=&quot;false&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot; /&gt;\n            &lt;AppenderRef ref=&quot;File&quot; /&gt;\n        &lt;/Logger&gt;\n\n        &lt;Root level=&quot;INFO&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot; /&gt;\n            &lt;AppenderRef ref=&quot;File&quot; /&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n\n&lt;/Configuration&gt;\n</code></pre>\n<h3>application.properties</h3>\n<p>default</p>\n<pre><code>spring.application.name=demo-logging\n</code></pre>\n<h3>DemoLoggingApplication.java</h3>\n<p>default</p>\n<pre><code>package com.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DemoLoggingApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoLoggingApplication.class, args);\n    }\n\n}\n</code></pre>\n<h3>HelloController.java</h3>\n<pre><code>package com.example;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\n@RestController\npublic class HelloController {\n    private static final Logger logger = LoggerFactory.getLogger(HelloController.class);\n        \n    @GetMapping(&quot;/hello/{name}&quot;)\n    public String sayHello(\n            @PathVariable String name,\n            @RequestParam(value = &quot;greeting&quot;, defaultValue = &quot;Hello&quot;) String greeting) {\n            String msg = String.format(&quot;%s, %s!&quot;, greeting, name);\n            logger.info(&quot;&gt;&gt;&gt;&gt; Received request with msg: {}&quot;, msg);\n        return msg;\n    }\n}\n</code></pre>\n<h3>build.gradle - default - logback</h3>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.5.6'\n    id 'io.spring.dependency-management' version '1.1.7'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\ndescription = 'Demo project for Spring Boot'\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(17)\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n}\n\nbootJar {\n    archiveFileName = 'app.jar'\n}\n</code></pre>\n<h2>Build , Run and Test</h2>\n<h3>Build</h3>\n<pre><code>gradle clean build\n</code></pre>\n<h3>Run</h3>\n<pre><code>java -jar build/libs/app.jar\n</code></pre>\n<h3>Test</h3>\n<pre><code>curl http://localhost:8080/hello/Marry\n</code></pre>\n<h2>Find dependencies - default</h2>\n<pre><code>gradle dependencies --console=plain --configuration runtimeClasspath\n</code></pre>\n<p>get result: <code>spring-boot-starter-logging</code> &lt;- <code>logback</code></p>\n<pre><code>\\--- org.springframework.boot:spring-boot-starter-web -&gt; 3.5.6\n     +--- org.springframework.boot:spring-boot-starter:3.5.6\n     |    +--- org.springframework.boot:spring-boot:3.5.6\n....\n     |    +--- org.springframework.boot:spring-boot-starter-logging:3.5.6\n     |    |    +--- ch.qos.logback:logback-classic:1.5.18\n     |    |    |    +--- ch.qos.logback:logback-core:1.5.18\n     |    |    |    \\--- org.slf4j:slf4j-api:2.0.17\n     |    |    +--- org.apache.logging.log4j:log4j-to-slf4j:2.24.3\n     |    |    |    +--- org.apache.logging.log4j:log4j-api:2.24.3\n     |    |    |    \\--- org.slf4j:slf4j-api:2.0.16 -&gt; 2.0.17\n     |    |    \\--- org.slf4j:jul-to-slf4j:2.0.17\n     |    |         \\--- org.slf4j:slf4j-api:2.0.17\n</code></pre>\n<p>link result to <code>build.gradle</code> config: <code>spring-boot-starter-web</code></p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n}\n</code></pre>\n<h2>Exclude logging, add log4j2</h2>\n<ul>\n<li>exclude <code>spring-boot-starter-logging</code></li>\n<li>add log4j2 starter <code>spring-boot-starter-log4j2</code></li>\n</ul>\n<pre><code>dependencies {\n    implementation('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'\n    }\n\n    implementation 'org.springframework.boot:spring-boot-starter-log4j2'\n}\n</code></pre>\n<h3>build.gradle - log4j2</h3>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.5.6'\n    id 'io.spring.dependency-management' version '1.1.7'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\ndescription = 'Demo project for Spring Boot'\n\njava {\n    toolchain {\n        languageVersion = JavaLanguageVersion.of(17)\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'\n    }\n\n    implementation 'org.springframework.boot:spring-boot-starter-log4j2'\n\n}\n\nbootJar {\n    archiveFileName = 'app.jar'\n}\n</code></pre>\n<h2>Find dependencies - log4j2</h2>\n<pre><code>gradle dependencies --console=plain --configuration runtimeClasspath\n</code></pre>\n<p>get result: There is no <code>logging</code> or <code>logback</code> in the content, now it shows <code>log4j2</code>.</p>\n<pre><code>+--- org.springframework.boot:spring-boot-starter-web -&gt; 3.5.6\n|    +--- org.springframework.boot:spring-boot-starter:3.5.6\n|    |    +--- org.springframework.boot:spring-boot:3.5.6\n...\n\\--- org.springframework.boot:spring-boot-starter-log4j2 -&gt; 3.5.6\n     +--- org.apache.logging.log4j:log4j-slf4j2-impl:2.24.3\n     |    +--- org.apache.logging.log4j:log4j-api:2.24.3\n     |    +--- org.slf4j:slf4j-api:2.0.16 -&gt; 2.0.17\n     |    \\--- org.apache.logging.log4j:log4j-core:2.24.3\n     |         \\--- org.apache.logging.log4j:log4j-api:2.24.3\n     +--- org.apache.logging.log4j:log4j-core:2.24.3 (*)\n     \\--- org.apache.logging.log4j:log4j-jul:2.24.3\n          \\--- org.apache.logging.log4j:log4j-api:2.24.3\n</code></pre>\n<h2>Build , Run and Test</h2>\n<h3>Build</h3>\n<pre><code>gradle clean build\n</code></pre>\n<h3>Run</h3>\n<pre><code>java -jar build/libs/app.jar\n</code></pre>\n<h3>Test</h3>\n<pre><code>curl http://localhost:8080/hello/Marry\n</code></pre>\n<h3>Console Output</h3>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n\n :: Spring Boot ::                (v3.5.6)\n\n2025-10-12 12:41:57.458 [main] INFO  com.example.DemoLoggingApplication -  ***** Starting DemoLoggingApplication v0.0.1-SNAPSHOT using Java 17.0.12 with PID 15168 (/home/demo/demo-logging/build/libs/app.jar started by demo in /home/demo/demo-logging)\n2025-10-12 12:41:57.466 [main] DEBUG com.example.DemoLoggingApplication -  ***** Running with Spring Boot v3.5.6, Spring v6.2.11\n2025-10-12 12:41:57.468 [main] INFO  com.example.DemoLoggingApplication -  ***** No active profile set, falling back to 1 default profile: &quot;default&quot;\n2025-10-12 12:41:58.145 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer -  ***** Tomcat initialized with port 8080 (http)\n2025-10-12 12:41:58.158 [main] INFO  org.apache.coyote.http11.Http11NioProtocol -  ***** Initializing ProtocolHandler [&quot;http-nio-8080&quot;]\n2025-10-12 12:41:58.160 [main] INFO  org.apache.catalina.core.StandardService -  ***** Starting service [Tomcat]\n2025-10-12 12:41:58.160 [main] INFO  org.apache.catalina.core.StandardEngine -  ***** Starting Servlet engine: [Apache Tomcat/10.1.46]\n2025-10-12 12:41:58.190 [main] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] -  ***** Initializing Spring embedded WebApplicationContext\n2025-10-12 12:41:58.192 [main] INFO  org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext -  ***** Root WebApplicationContext: initialization completed in 678 ms\n2025-10-12 12:41:58.464 [main] INFO  org.apache.coyote.http11.Http11NioProtocol -  ***** Starting ProtocolHandler [&quot;http-nio-8080&quot;]\n2025-10-12 12:41:58.480 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer -  ***** Tomcat started on port 8080 (http) with context path '/'\n2025-10-12 12:41:58.487 [main] INFO  com.example.DemoLoggingApplication -  ***** Started DemoLoggingApplication in 1.346 seconds (process running for 2.248)\n2025-10-12 12:42:03.832 [http-nio-8080-exec-1] INFO  org.apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] -  ***** Initializing Spring DispatcherServlet 'dispatcherServlet'\n2025-10-12 12:42:03.834 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet -  ***** Initializing Servlet 'dispatcherServlet'\n2025-10-12 12:42:03.841 [http-nio-8080-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet -  ***** Completed initialization in 7 ms\n2025-10-12 12:42:03.934 [http-nio-8080-exec-1] INFO  com.example.HelloController -  ***** &gt;&gt;&gt;&gt; Received request with msg: Hello, Marry!\n</code></pre>\n<p>NOTE: log4j2.xml, &quot;***** %msg%n&quot;</p>\n<p><code>&lt;Property name=&quot;LOG_PATTERN&quot;&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} -  ***** %msg%n&lt;/Property&gt; &lt;/Properties&gt;</code></p>\n<p>you can find out: <code>***** Tomcat started on port 8080 (http) with context path '/' </code></p>\n<p>This output format can be confirmed to be output through log4j2.</p>\n<pre><code>2025-10-12 12:41:58.480 [main] INFO  org.springframework.boot.web.embedded.tomcat.TomcatWebServer -  ***** Tomcat started on port 8080 (http) with context path '/' \n</code></pre>\n<p>Note that this setup is based on only including spring-boot-starter-web, and then using <code>gradle dependencies --console=plain --configuration runtimeClasspath</code> to find out which module logback (logging) is being used by, and then we exclude it.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26698569,
      "reputation" : 4074,
      "user_id" : 20306007,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/98bbc403493aee3681b71dae7abef66e?s=256&d=identicon&r=PG",
      "display_name" : "life888888",
      "link" : "https://stackoverflow.com/users/20306007/life888888"
    },
    "creation_date" : 1760249807,
    "last_activity_date" : 1760249807,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140768833,
    "post_id" : 79778898,
    "body" : "Check dependency tree for that package with <code>.&#47;gradlew dependencyInsight --dependency logback</code> and add <code>exclude</code> as needed.",
    "score" : 1,
    "owner" : {
      "account_id" : 3377022,
      "reputation" : 14383,
      "user_id" : 2834978,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ff9af10001f37bc0de566ca2caf2f558?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "LMC",
      "link" : "https://stackoverflow.com/users/2834978/lmc"
    },
    "creation_date" : 1759238268,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140768314,
    "post_id" : 79778898,
    "body" : "ANd you did exclude the logback dependencies? If not that will take precedence.",
    "score" : 1,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126777,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1759222722,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79778909" : [ {
      "comment_id" : 140768884,
      "post_id" : 79778909,
      "body" : "@Ankit Can you share the dependency tree?",
      "score" : 0,
      "owner" : {
        "account_id" : 4705591,
        "reputation" : 31,
        "user_id" : 3807851,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/28b2c7fcc2edacc5168d804f0a532321?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Davis",
        "link" : "https://stackoverflow.com/users/3807851/davis"
      },
      "creation_date" : 1759239138,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140768391,
      "post_id" : 79778909,
      "body" : "It’s not working.",
      "score" : 0,
      "owner" : {
        "account_id" : 6132216,
        "reputation" : 603,
        "user_id" : 4782065,
        "user_type" : "registered",
        "accept_rate" : 0,
        "profile_image" : "https://www.gravatar.com/avatar/2754d1d0e13c8d19317307a2ef3f81fd?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Ankit",
        "link" : "https://stackoverflow.com/users/4782065/ankit"
      },
      "creation_date" : 1759224323,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140768340,
      "post_id" : 79778909,
      "body" : "The best thing to do would be to print a dependency tree and figure out where logback is being injected.  This can be then excluded from that module.",
      "score" : 2,
      "owner" : {
        "account_id" : 4705591,
        "reputation" : 31,
        "user_id" : 3807851,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/28b2c7fcc2edacc5168d804f0a532321?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Davis",
        "link" : "https://stackoverflow.com/users/3807851/davis"
      },
      "creation_date" : 1759223270,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}