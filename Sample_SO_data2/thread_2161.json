{
  "question" : {
    "question_id" : 79644702,
    "title" : "Spring GraphQL Controller cannot see Spring Service",
    "body" : "<p>I had a perfectly working Spring Boot application with Java 21.  The problem is when I now try to add GraphQL to the mix.  The GraphQL libraries are in the <code>pom.xml</code> and that includes the Spring GraphQL Test.</p>\n<p>The issue is that when I try to run my GraphQLController and GraphQLControllerTest, then it says that there is NoSuchBeanDefinition for my CompanyService.  Without GraphQL everything works fine.</p>\n<p>First, the application properties:</p>\n<pre class=\"lang-none prettyprint-override\"><code>spring.graphql.graphiql.enabled=true\n</code></pre>\n<p>The CompanyService has always worked and tests out just fine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class CompanyServiceImpl implements CompanyService  {\n    private CompanyRepository companyRepo;\n    private CompanyMapper companyMapper;\n\n    public CompanyServiceImpl(CompanyRepository companyRepo, \n                              CompanyMapper companyMapper) {\n        this.companyRepo = companyRepo;\n        this.companyMapper = companyMapper;\n    }\n</code></pre>\n<p>Now the GraphQL Controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class GraphQLCompanyController {\n\n    private final CompanyService companyService;\n\n    @Autowired\n    public GraphQLCompanyController(CompanyService companyService) {\n        this.companyService = companyService;\n    }\n\n    @QueryMapping\n    public CompanyDTO companyById(@Argument long id) {\n        return companyService.findDtoById(id);\n    }\n}\n</code></pre>\n<p>As you can see, in both the ComnpanyService and the GraphQL Controller I am using Constructor injection.   However, the 'CompanyService' cannot be found in this controller.</p>\n<p>The <code>src/main/resources/graphql/schema.graphql</code> is defined as follows:</p>\n<pre class=\"lang-none prettyprint-override\"><code>type Query {\n    companyById(id: ID): Company\n}\n\ntype Company {\n    companyId: ID\n    active: Boolean\n    companyCode: String\n    companyName: String\n    description: String\n    address1: String\n    address2: String\n    city: String\n    state: String\n    zip: String\n}\n</code></pre>\n<p>As you can see from the <code>GraphQLCompanyController</code>, when a GraphQL query is made with an simple id (a long), I should call the business service, which in turn queries the database, gets the entity, and within the Service we use MapStruct to convert from Entity to DTO, and then we want to return that CompanyDTO in GraphQL format.</p>\n<pre><code>UPDATE:\n</code></pre>\n<p>As requested, here is the graphql libraries from the pom.xml</p>\n<pre><code>    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.4.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;lombok.version&gt;1.18.38&lt;/lombok.version&gt;\n        &lt;mapstruct.version&gt;1.6.3&lt;/mapstruct.version&gt;\n        &lt;lombok-mapstruct-binding.version&gt;0.2.0&lt;/lombok-mapstruct-binding.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-graphql&lt;/artifactId&gt; \n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.graphql&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-graphql-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "graphql", "spring-graphql" ],
    "owner" : {
      "account_id" : 1835763,
      "reputation" : 2040,
      "user_id" : 1666206,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/QKAVW.jpg?s=256",
      "display_name" : "tjholmes66",
      "link" : "https://stackoverflow.com/users/1666206/tjholmes66"
    },
    "is_answered" : false,
    "view_count" : 82,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748573454,
    "creation_date" : 1748558438,
    "link" : "https://stackoverflow.com/questions/79644702/spring-graphql-controller-cannot-see-spring-service",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140471753,
    "post_id" : 79644702,
    "body" : "Perhaps you&#39;re using <code>@GraphQlTest</code> in your test? As described in its javadoc, classes annotated <code>@Service</code> are not automatically loaded in such sliced tests.",
    "score" : 0,
    "owner" : {
      "account_id" : 1473276,
      "reputation" : 117494,
      "user_id" : 1384297,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rmR9b.jpg?s=256",
      "display_name" : "Andy Wilkinson",
      "link" : "https://stackoverflow.com/users/1384297/andy-wilkinson"
    },
    "creation_date" : 1748593578,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140471362,
    "post_id" : 79644702,
    "body" : "Can you add the entire stack trace of the error please?",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1748582887,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140471188,
    "post_id" : 79644702,
    "body" : "As requested, I have added graphql references from the pom.xml file.",
    "score" : 0,
    "owner" : {
      "account_id" : 1835763,
      "reputation" : 2040,
      "user_id" : 1666206,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/QKAVW.jpg?s=256",
      "display_name" : "tjholmes66",
      "link" : "https://stackoverflow.com/users/1666206/tjholmes66"
    },
    "creation_date" : 1748573435,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140470900,
    "post_id" : 79644702,
    "body" : "Please show how did you add/configure GraphiQL dependencies to your project, also run a <code>mvn dependency:tree</code> (if using maven) it might be that its dependency depending which one you are using is bringing a different starter of spring boot",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1748559613,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}