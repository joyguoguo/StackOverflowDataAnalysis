{
  "question" : {
    "question_id" : 79772763,
    "title" : "Android. Android studio doesn&#39;t display my customized keyboard",
    "body" : "<p>I am learning to program Android applications and features.\nMy current project is a simple and basic keyboard with the following features:</p>\n<p>Cannot go uppercase -- so no shift button</p>\n<p>Cannot change between the alpha keyboard and characters.</p>\n<p>Basically, this keyboard should only show numbers in the top row and letters beneath it, with no ability to add characters like “$,%,^,@” etc</p>\n<p>Background colour of the whole keyboard and keys are be green with outlines of white for each key on the keyboard -- this is to show that I understand the colouring methods</p>\n<p>So, this project is built on an 'Empty Views Activity' on Android Studio Narwhal-3. code is in Java and XML.</p>\n<p>let me paste the code below for each file:</p>\n<p><strong>MainActivity</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.myapplication;\n\nimport android.os.Bundle;\n\nimport androidx.activity.EdgeToEdge;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.graphics.Insets;\nimport androidx.core.view.ViewCompat;\nimport androidx.core.view.WindowInsetsCompat;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        EdgeToEdge.enable(this);\n        setContentView(R.layout.activity_main);\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -&gt; {\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\n            return insets;\n        });\n    }\n}\n</code></pre>\n<p><strong>MyKeyboardService</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.myapplication;\n\nimport android.inputmethodservice.InputMethodService;\nimport android.inputmethodservice.Keyboard;\nimport android.inputmethodservice.KeyboardView;\nimport android.view.View;\nimport android.view.inputmethod.InputConnection;\n\npublic class MyKeyboardService extends InputMethodService\n        implements KeyboardView.OnKeyboardActionListener {\n\n    private KeyboardView kv;\n    private Keyboard keyboard;\n\n    @Override\n    public View onCreateInputView() {\n        View v = getLayoutInflater().inflate(R.layout.keyboard_view, null);\n        kv = v.findViewById(R.id.keyboard);\n        keyboard = new Keyboard(this, R.xml.simple_keyboard);\n        kv.setKeyboard(keyboard);\n        kv.setOnKeyboardActionListener(this);\n\n        //disable the preview pop-up above keys\n        kv.setPreviewEnabled(false);\n        return v;\n    }\n\n\n\n    @Override\n    public void onKey(int primaryCode, int[] keyCodes) {\n        InputConnection ic = getCurrentInputConnection();\n        if (ic == null) return;\n\n        //handle special keys\n        if (primaryCode == Keyboard.KEYCODE_DELETE) {\n            ic.deleteSurroundingText(1, 0);\n            return;\n        } else if (primaryCode == 10) { // Enter/newline\n            ic.commitText(&quot;\\n&quot;, 1);\n            return;\n        } else if (primaryCode == 32) { // Space\n            ic.commitText(&quot; &quot;, 1);\n            return;\n        }\n        //something to make the letters remain lowercase\n        char c = (char) primaryCode;\n        if (Character.isLetter(c)) {\n            ic.commitText(String.valueOf(Character.toLowerCase(c)), 1);\n        } else if (Character.isDigit(c)) {\n            ic.commitText(String.valueOf(c), 1);\n        }\n    }\n\n    @Override public void onPress(int primaryCode) {}\n    @Override public void onRelease(int primaryCode) {}\n    @Override public void onText(CharSequence text) {}\n    @Override public void swipeLeft() {}\n    @Override public void swipeRight() {}\n    @Override public void swipeDown() {}\n    @Override public void swipeUp() {}\n}\n</code></pre>\n<p><strong>XML FILES</strong><br />\n<em>res\\drawable\\ic_launcher_background.xml</em> and <em>res\\drawable\\ic_launcher_foreground.xml</em> are both unchanged and auto generated</p>\n<p><strong>AndroidManifest.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    package=&quot;com.example.myapplication&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot;/&gt;\n\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;service\n            android:name=&quot;.MyKeyboardService&quot;\n            android:label=&quot;@string/app_name&quot;\n            android:permission=&quot;android.permission.BIND_INPUT_METHOD&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.view.InputMethod&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.view.im&quot;\n                android:resource=&quot;@xml/method&quot; /&gt;\n        &lt;/service&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p><em>res\\drawable*<em>key_background.xml</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:shape=&quot;rectangle&quot;&gt;\n    &lt;solid android:color=&quot;#008000&quot; /&gt;\n    &lt;stroke android:width=&quot;2dp&quot; android:color=&quot;#FFFFFF&quot; /&gt;\n    &lt;corners android:radius=&quot;4dp&quot; /&gt;\n    &lt;padding android:left=&quot;4dp&quot; android:top=&quot;4dp&quot; android:right=&quot;4dp&quot; android:bottom=&quot;4dp&quot;/&gt;\n&lt;/shape&gt;\n</code></pre>\n<p><em>res\\layout*<em>activity_main.xml</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/main&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello World!&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;EditText\n        android:id=&quot;@+id/editTextText&quot;\n        android:layout_width=&quot;289dp&quot;\n        android:layout_height=&quot;153dp&quot;\n        android:ems=&quot;10&quot;\n        android:hint=&quot;Custom output&quot;\n        android:inputType=&quot;text&quot;\n        tools:layout_editor_absoluteX=&quot;65dp&quot;\n        tools:layout_editor_absoluteY=&quot;63dp&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p><em>res\\layout*<em>keyboard_view</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:background=&quot;@color/green&quot;&gt;\n\n    &lt;android.inputmethodservice.KeyboardView\n        android:id=&quot;@+id/keyboard&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:keyBackground=&quot;@drawable/key_background&quot;\n        android:keyPreviewHeight=&quot;0dp&quot;\n        android:keyTextSize=&quot;18sp&quot;\n        android:labelTextSize=&quot;18sp&quot;\n        android:verticalCorrection=&quot;0dp&quot; /&gt;\n&lt;/FrameLayout&gt;\n</code></pre>\n<p><em>res\\values*<em>colors.xml</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;color name=&quot;green&quot;&gt;#008000&lt;/color&gt;\n&lt;/resources&gt;\n</code></pre>\n<p><em>res\\xml*<em>backup_rules.xml</em></em>* and <em>res\\xml\\data_extraction_rules.xml</em>* are unchanged and auto generated with the project.<br />\n<em>res\\xml*<em>method.xml</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;input-method xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:settingsActivity=&quot;.SettingsActivity&quot;&gt;\n    &lt;subtype\n        android:imeSubtypeLocale=&quot;en_US&quot;\n        android:imeSubtypeMode=&quot;keyboard&quot;\n        android:label=&quot;@string/subtype_label&quot;/&gt;\n&lt;/input-method&gt;\n</code></pre>\n<p><em>res\\xml*<em>simple_keyboard.xml</em></em>*</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;Keyboard xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:keyWidth=&quot;10%p&quot;\n    android:keyHeight=&quot;56dp&quot;\n    android:horizontalGap=&quot;0px&quot;\n    android:verticalGap=&quot;0px&quot;&gt;\n\n    &lt;!-- row: 1234567890 --&gt;\n    &lt;Row android:rowEdgeFlags=&quot;top&quot;&gt;\n        &lt;Key android:codes=&quot;49&quot; android:keyLabel=&quot;1&quot; /&gt;\n        &lt;Key android:codes=&quot;50&quot; android:keyLabel=&quot;2&quot; /&gt;\n        &lt;Key android:codes=&quot;51&quot; android:keyLabel=&quot;3&quot; /&gt;\n        &lt;Key android:codes=&quot;52&quot; android:keyLabel=&quot;4&quot; /&gt;\n        &lt;Key android:codes=&quot;53&quot; android:keyLabel=&quot;5&quot; /&gt;\n        &lt;Key android:codes=&quot;54&quot; android:keyLabel=&quot;6&quot; /&gt;\n        &lt;Key android:codes=&quot;55&quot; android:keyLabel=&quot;7&quot; /&gt;\n        &lt;Key android:codes=&quot;56&quot; android:keyLabel=&quot;8&quot; /&gt;\n        &lt;Key android:codes=&quot;57&quot; android:keyLabel=&quot;9&quot; /&gt;\n        &lt;Key android:codes=&quot;48&quot; android:keyLabel=&quot;0&quot; /&gt;\n    &lt;/Row&gt;\n\n    &lt;!-- row;qwertyuiop --&gt;\n    &lt;Row&gt;\n        &lt;Key android:codes=&quot;113&quot; android:keyLabel=&quot;q&quot; /&gt;\n        &lt;Key android:codes=&quot;119&quot; android:keyLabel=&quot;w&quot; /&gt;\n        &lt;Key android:codes=&quot;101&quot; android:keyLabel=&quot;e&quot; /&gt;\n        &lt;Key android:codes=&quot;114&quot; android:keyLabel=&quot;r&quot; /&gt;\n        &lt;Key android:codes=&quot;116&quot; android:keyLabel=&quot;t&quot; /&gt;\n        &lt;Key android:codes=&quot;121&quot; android:keyLabel=&quot;y&quot; /&gt;\n        &lt;Key android:codes=&quot;117&quot; android:keyLabel=&quot;u&quot; /&gt;\n        &lt;Key android:codes=&quot;105&quot; android:keyLabel=&quot;i&quot; /&gt;\n        &lt;Key android:codes=&quot;111&quot; android:keyLabel=&quot;o&quot; /&gt;\n        &lt;Key android:codes=&quot;112&quot; android:keyLabel=&quot;p&quot; /&gt;\n    &lt;/Row&gt;\n\n    &lt;!-- row: asdfghjkl --&gt;\n    &lt;Row&gt;\n        &lt;Key android:codes=&quot;97&quot;  android:keyLabel=&quot;a&quot; /&gt;\n        &lt;Key android:codes=&quot;115&quot; android:keyLabel=&quot;s&quot; /&gt;\n        &lt;Key android:codes=&quot;100&quot; android:keyLabel=&quot;d&quot; /&gt;\n        &lt;Key android:codes=&quot;102&quot; android:keyLabel=&quot;f&quot; /&gt;\n        &lt;Key android:codes=&quot;103&quot; android:keyLabel=&quot;g&quot; /&gt;\n        &lt;Key android:codes=&quot;104&quot; android:keyLabel=&quot;h&quot; /&gt;\n        &lt;Key android:codes=&quot;106&quot; android:keyLabel=&quot;j&quot; /&gt;\n        &lt;Key android:codes=&quot;107&quot; android:keyLabel=&quot;k&quot; /&gt;\n        &lt;Key android:codes=&quot;108&quot; android:keyLabel=&quot;l&quot; /&gt;\n    &lt;/Row&gt;\n\n    &lt;!-- row:delete + zxcvbnm + enter &amp; sapce --&gt;\n    &lt;Row android:rowEdgeFlags=&quot;bottom&quot;&gt;\n        &lt;!-- Delete --&gt;\n        &lt;Key android:codes=&quot;-5&quot; android:keyLabel=&quot;⌫&quot; android:isRepeatable=&quot;true&quot; android:keyWidth=&quot;15%p&quot;/&gt;\n        &lt;!-- last row letters --&gt;\n        &lt;Key android:codes=&quot;122&quot; android:keyLabel=&quot;z&quot; /&gt;\n        &lt;Key android:codes=&quot;120&quot; android:keyLabel=&quot;x&quot; /&gt;\n        &lt;Key android:codes=&quot;99&quot;  android:keyLabel=&quot;c&quot; /&gt;\n        &lt;Key android:codes=&quot;118&quot; android:keyLabel=&quot;v&quot; /&gt;\n        &lt;Key android:codes=&quot;98&quot;  android:keyLabel=&quot;b&quot; /&gt;\n        &lt;Key android:codes=&quot;110&quot; android:keyLabel=&quot;n&quot; /&gt;\n        &lt;Key android:codes=&quot;109&quot; android:keyLabel=&quot;m&quot; /&gt;\n        &lt;!-- Space and Enter --&gt;\n        &lt;Key android:codes=&quot;32&quot; android:keyLabel=&quot;space&quot; android:keyWidth=&quot;20%p&quot;/&gt;\n        &lt;Key android:codes=&quot;10&quot; android:keyLabel=&quot;↵&quot; android:keyWidth=&quot;10%p&quot;/&gt;\n    &lt;/Row&gt;\n\n&lt;/Keyboard&gt;\n</code></pre>\n<p><strong>EDIT:</strong> I added the <em>AndroidManifest.xml</em> code which I had forgotten to add.</p>\n",
    "tags" : [ "java", "android", "xml" ],
    "owner" : {
      "account_id" : 18093191,
      "reputation" : 97,
      "user_id" : 13152159,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-ptFBEjLNvLU/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNn_U8yTK9NzCcywpkhW8lAcuNbKQ/s256-rj/photo.jpg",
      "display_name" : "Martin Sieburg",
      "link" : "https://stackoverflow.com/users/13152159/martin-sieburg"
    },
    "is_answered" : false,
    "view_count" : 65,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1758736799,
    "creation_date" : 1758639368,
    "link" : "https://stackoverflow.com/questions/79772763/android-android-studio-doesnt-display-my-customized-keyboard",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140757595,
    "post_id" : 79772763,
    "body" : "@marcinj Got it. added it at the top of the XML file list.",
    "score" : 0,
    "owner" : {
      "account_id" : 18093191,
      "reputation" : 97,
      "user_id" : 13152159,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-ptFBEjLNvLU/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNn_U8yTK9NzCcywpkhW8lAcuNbKQ/s256-rj/photo.jpg",
      "display_name" : "Martin Sieburg",
      "link" : "https://stackoverflow.com/users/13152159/martin-sieburg"
    },
    "creation_date" : 1758735746,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140756143,
    "post_id" : 79772763,
    "body" : "Add to your question also how your AndroidManifest.xml looks like",
    "score" : 0,
    "owner" : {
      "account_id" : 216120,
      "reputation" : 50296,
      "user_id" : 471160,
      "user_type" : "registered",
      "accept_rate" : 90,
      "profile_image" : "https://i.sstatic.net/9Z23A.jpg?s=256",
      "display_name" : "marcinj",
      "link" : "https://stackoverflow.com/users/471160/marcinj"
    },
    "creation_date" : 1758696507,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140755004,
    "post_id" : 79772763,
    "body" : "@GabeSechan In AS&#39;s emulator, it picks it up as a optional keyboard. Heading to Settings, i set the keyboard option to select this one. Theoretically, I should have been able to change the IME from the standard phone-esque keyboard",
    "score" : 0,
    "owner" : {
      "account_id" : 18093191,
      "reputation" : 97,
      "user_id" : 13152159,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-ptFBEjLNvLU/AAAAAAAAAAI/AAAAAAAAAAA/AAKWJJNn_U8yTK9NzCcywpkhW8lAcuNbKQ/s256-rj/photo.jpg",
      "display_name" : "Martin Sieburg",
      "link" : "https://stackoverflow.com/users/13152159/martin-sieburg"
    },
    "creation_date" : 1758642436,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140754951,
    "post_id" : 79772763,
    "body" : "Are you setting your keyboard as the default for the device?  If not, where are you telling Android to use this custom keyboard for that particular text view?  Because I don&#39;t see you doing that anywhere.  Just having a custom keyboard in an app is not sufficient to use it.",
    "score" : 0,
    "owner" : {
      "account_id" : 1790714,
      "reputation" : 94818,
      "user_id" : 1631193,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/ac9dfee58394495fa69f12f58a928be3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gabe Sechan",
      "link" : "https://stackoverflow.com/users/1631193/gabe-sechan"
    },
    "creation_date" : 1758641278,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}