{
  "question" : {
    "question_id" : 79606010,
    "title" : "Using NIO.2 to eventually delete a temporary file in Java",
    "body" : "<p>The legacy class <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/File.html\" rel=\"nofollow noreferrer\"><code>File</code></a> (singular) offers the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/File.html#deleteOnExit()\" rel=\"nofollow noreferrer\"><code>deleteOnExit</code></a> method to automatically delete a file later, when the JVM exits.</p>\n<p>\uD83D\uDC49\uD83C\uDFFD How to do the same in the modern NIO.2 classes?</p>\n<p>The newer <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/nio/file/Files.html\" rel=\"nofollow noreferrer\"><code>Files</code></a> (plural) offers replacement method <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/nio/file/Files.html#delete(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>delete</code></a> (and <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/nio/file/Files.html#deleteIfExists(java.nio.file.Path)\" rel=\"nofollow noreferrer\"><code>deleteIfExists</code></a>) for <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/io/File.html#delete()\" rel=\"nofollow noreferrer\"><code>File#delete</code></a>. But I do not see a replacement for <code>deleteOnExit</code>.</p>\n<p>Consider the following code using the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/io/index.html\" rel=\"nofollow noreferrer\">NIO.2</a> classes. It seems odd that I must fall back onto the older <code>File</code> class for this one feature.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try\n{\n    String message = &quot;Whatever &quot; + Instant.now() ;\n    final Path path =  \n            Files.writeString (\n                    Files.createTempFile ( &quot;Example_&quot; , &quot;.txt&quot; ) ,\n                    message ,\n                    StandardCharsets.UTF_8\n            );\n    List &lt;String&gt; lines = Files.readAllLines ( path );\n    path.toFile ( ).deleteOnExit ( );  // ⬅️ Delete later, when the JVM exits.\n    return path;  // Return the path for further writing.\n}\ncatch ( IOException e )\n{\n    throw new RuntimeException ( e );\n}\n</code></pre>\n",
    "tags" : [ "java", "file", "nio", "delete-file", "nio2" ],
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "is_answered" : false,
    "view_count" : 37,
    "closed_date" : 1746405288,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746389916,
    "creation_date" : 1746389615,
    "link" : "https://stackoverflow.com/questions/79606010/using-nio-2-to-eventually-delete-a-temporary-file-in-java",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140395525,
    "post_id" : 79606010,
    "body" : "Related (if not duplicate): <a href=\"https://stackoverflow.com/q/28752006/6395627\">Alternative to File.deleteOnExit() in Java NIO?</a>",
    "score" : 2,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1746404299,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395222,
    "post_id" : 79606010,
    "body" : "<code>deleteOnExit</code> is a good way to kill application servers with <code>OutOfMemoryError</code> as it builds a huge collection. Best to use finally clause to clear out temp files as you go. Perhaps this is why NIO does not have it.",
    "score" : 2,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16284,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1746390137,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}