{
  "question" : {
    "question_id" : 79690169,
    "title" : "Different maven version between intellij runner and console (WSL)",
    "body" : "<p>In IntelliJ IDEA, using WSL (Windows Subsystem for Linux), in a maven Java project, when I tried to import an external lib the lib can be used in command line, in the IDE Editor, but not in the IDE test runner.</p>\n<p>Using IntelliJ Maven view, I can synchronize the project.</p>\n<p>It downloads the jar in my .m2 on WSL space (/home/myUser/.m2), it makes my java files compile in the Editor, I can then ctrl+click to open the source code, or use auto-completion, no warning, no errors.</p>\n<p>I can run mvn test in command line, no problem.</p>\n<p>But when I try to run the tests using IntelliJ test runner, it display a compliation error :</p>\n<blockquote>\n<p>\\wsl.localhost\\Ubuntu\\home\\myUser\\workspace\\TheProject\\src\\test\\java\\org\\example\\ATest.java:5:39<br />\njava: package org.apache.commons.lang3 does not exist</p>\n</blockquote>\n<p>Apart from this error, nothing change in the editor, no red line, no warning, I can still use the auto-completion for this lib.</p>\n<p>If I run mvn test using the mvn view in IntelliJ, I get an error</p>\n<blockquote>\n<p>The JAVA_HOME environment variable is not defined correctly, this environment variable is needed to run this program</p>\n</blockquote>\n<p>Example with appache.commons.lang3 (but it can be any new lib).</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.*;   // it was already imported in a previous project\n\nimport static org.apache.commons.lang3.StringUtils.isBlank;         // the new import\n\nclass ATest {\n\n    @Test\n    public void test_pass() {\n        assertTrue(isBlank(null));\n        assertTrue(isBlank(&quot;&quot;));\n        assertTrue(isBlank(&quot;   &quot;));\n        assertTrue(isBlank(&quot;\\t&quot;));\n    }\n}\n</code></pre>\n<p>I add the dependency in the <code>pom.xml</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;untitled&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.11.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>It's probably a configuration problem, but I have no idea where should I change something.</p>\n<p>I already try to invalidate cache and restart, a lot of times.</p>\n",
    "tags" : [ "java", "maven", "intellij-idea", "windows-subsystem-for-linux" ],
    "owner" : {
      "account_id" : 6952128,
      "reputation" : 900,
      "user_id" : 5334435,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/5bcb7fe6b7e5c7429ec8136fb537ea9f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "GaspardP",
      "link" : "https://stackoverflow.com/users/5334435/gaspardp"
    },
    "is_answered" : false,
    "view_count" : 103,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1760375605,
    "creation_date" : 1751631458,
    "link" : "https://stackoverflow.com/questions/79690169/different-maven-version-between-intellij-runner-and-console-wsl",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140584610,
    "post_id" : 79690169,
    "body" : "The JVM  classpath is not correct - this might be a mapping problem in IntelliJ preparing the launcher, in other words a bug in IntelliJ.  I would suggest asking JetBrains support in the Help menu if you are a paying customer.",
    "score" : 0,
    "owner" : {
      "account_id" : 21994,
      "reputation" : 75391,
      "user_id" : 53897,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/enNdg.jpg?s=256",
      "display_name" : "Thorbj&#248;rn Ravn Andersen",
      "link" : "https://stackoverflow.com/users/53897/thorbj%c3%b8rn-ravn-andersen"
    },
    "creation_date" : 1752325006,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140566432,
    "post_id" : 79690169,
    "body" : "1. Which JDK is defined for the project? (Open Project Settings | Project and check field SDK has an SDK defined). 2. What is the configured Maven home path? (Check in Settings | Build, Execution, Deployment | Build Tools | Maven) 3. Which JRE is defined for the Run Configurations? (Open Run/Debug Configurations for test runner and scroll down to Java Options, field JRE)",
    "score" : 1,
    "owner" : {
      "account_id" : 9590587,
      "reputation" : 3206,
      "user_id" : 7121619,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c8ae7806f7bb2bd49a07b56c925c90b5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Marit",
      "link" : "https://stackoverflow.com/users/7121619/marit"
    },
    "creation_date" : 1751696628,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140565432,
    "post_id" : 79690169,
    "body" : "provided you have the wsl version of intellij, when you run a test on intellij, it auto creates a run configuration usually, and for wsl run targets are in the ultimate edition of intellij. (wsl run target: <a href=\"https://www.jetbrains.com/help/idea/how-to-use-wsl-development-environment-in-product.html#wsl_run_target\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a> ). my guess is that your intellij is compiling within the wsl but the auto run target is pointed at your windows version. OR maybe try mirror the env vars between win and wsl (<a href=\"https://devblogs.microsoft.com/commandline/share-environment-vars-between-wsl-and-windows/\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/commandline/&hellip;</a>)",
    "score" : 1,
    "owner" : {
      "account_id" : 25283467,
      "reputation" : 61,
      "user_id" : 19110932,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/64d8f168ae8d8884bd835655c4296d2e?s=256&d=identicon&r=PG",
      "display_name" : "swany",
      "link" : "https://stackoverflow.com/users/19110932/swany"
    },
    "creation_date" : 1751643342,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}