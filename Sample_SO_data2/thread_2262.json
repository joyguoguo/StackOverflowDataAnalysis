{
  "question" : {
    "question_id" : 79636745,
    "title" : "Unresolved reference: FlutterActivity in MainActivity.kt after major changes in a chess game",
    "body" : "<p>After major changes in a chess game to make it workable in android im getting errors and it doesnt launch the game although it works on browsers and windows, I tried to fix build gradle and gradle properties as i guess thats the actual bottleneck which causes this error, I tried to go through even with AI and even that didnt fix the errors but made everything only worse, evening opening the project as android didnt help either, here is the error I get:</p>\n<pre><code>Launching lib\\main.dart on sdk gphone64 x86 64 in debug mode...\nRunning Gradle task 'assembleDebug'...\ne: file:///C:/Users/Flieg/Downloads/GameDev/chesster/chesster_app/android/app/src/main/kotlin/com/chesster/app/MainActivity.kt:2:11 Unresolved reference: flutter\ne: file:///C:/Users/Flieg/Downloads/GameDev/chesster/chesster_app/android/app/src/main/kotlin/com/chesster/app/MainActivity.kt:3:22 Unresolved reference: FlutterActivity\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileDebugKotlin'.\n&gt; A failure occurred while executing org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction\n   &gt; Compilation error. See log for more details\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n&gt; Get more help at https://help.gradle.org.\n\nBUILD FAILED in 2m 46s\nError: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>I changed my gradle files multiple times and still it doesnt fix the problem, here are relevant files:</p>\n<p>app/build.gradle.kts</p>\n<pre><code>plugins {\n    id(&quot;com.android.application&quot;)\n    id(&quot;org.jetbrains.kotlin.android&quot;)\n    id(&quot;dev.flutter.flutter-gradle-plugin&quot;)\n    id(&quot;com.google.gms.google-services&quot;)\n    id(&quot;com.google.firebase.crashlytics&quot;)\n}\n\nandroid {\n    namespace = &quot;com.chesster.app&quot;\n    compileSdk = 35 // Stable version (35 is preview)\n\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_17\n        targetCompatibility = JavaVersion.VERSION_17\n    }\n\n    kotlinOptions {\n        jvmTarget = &quot;17&quot;\n        freeCompilerArgs += listOf(\n            &quot;-Xjvm-default=all&quot;,\n            &quot;-opt-in=kotlin.RequiresOptIn&quot;  // Updated from -Xopt-in\n        )\n    }\n\n    sourceSets {\n        getByName(&quot;main&quot;) {\n            java.srcDirs(&quot;src/main/kotlin&quot;)\n            manifest.srcFile(&quot;src/main/AndroidManifest.xml&quot;)\n        }\n    }\n    defaultConfig {\n        applicationId = &quot;com.chesster.app&quot;\n        minSdk = 23\n        targetSdk = 35 // Match compileSdk\n        versionCode = 6300\n        versionName = &quot;6.3.0&quot;\n        multiDexEnabled = true\n        vectorDrawables.useSupportLibrary = true\n\n        ndk {\n            abiFilters.addAll(setOf(&quot;arm64-v8a&quot;)) // x86_64 rarely needed\n        }\n    }\n\n    buildTypes {\n        release {\n            isShrinkResources = true\n            isMinifyEnabled = true\n            proguardFiles(\n                getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;),\n                &quot;proguard-rules.pro&quot;\n            )\n            // TODO: Setup proper signing config\n            signingConfig = signingConfigs.getByName(&quot;debug&quot;)\n        }\n\n        debug {\n            //applicationIdSuffix = &quot;.debug&quot;\n            // Replace deprecated flag\n            enableUnitTestCoverage = false\n            enableAndroidTestCoverage = false\n        }\n    }\n\n    buildFeatures {\n        buildConfig = true\n        viewBinding = true\n    }\n\n    packaging {\n        resources {\n            excludes += setOf(\n                &quot;META-INF/{AL2.0,LGPL2.1}&quot;,\n                &quot;DebugProbesKt.bin&quot;,\n                &quot;kotlin-tooling-metadata.json&quot;,\n                &quot;**/libflutter.so&quot;,\n                &quot;**/libapp.so&quot;\n            )\n        }\n    }\n\n    lint {\n        abortOnError = true\n        checkReleaseBuilds = true // Enable for release builds\n        baseline = file(&quot;lint-baseline.xml&quot;)\n    }\n}\n\nflutter {\n    source = &quot;../..&quot;\n    target = &quot;lib/main.dart&quot;\n}\n\ndependencies {\n\n    implementation(&quot;androidx.core:core-ktx:1.12.0&quot;) // Recommended\n    // Core Android\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:2.0.4&quot;)\n    implementation(&quot;androidx.multidex:multidex:2.0.1&quot;)\n    implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\n    implementation(&quot;com.google.android.material:material:1.9.0&quot;)\n\n    // ViewBinding\n    implementation(&quot;androidx.activity:activity-ktx:1.8.0&quot;)\n    implementation(&quot;androidx.fragment:fragment-ktx:1.6.2&quot;)\n\n    implementation(&quot;androidx.core:core-ktx:1.12.0&quot;) {\n        exclude(group = &quot;org.jetbrains.kotlin&quot;, module = &quot;kotlin-stdlib-jdk7&quot;)\n    }\n\n    // Firebase\n    implementation(platform(&quot;com.google.firebase:firebase-bom:33.0.0&quot;)) // Updated\n    implementation(&quot;com.google.firebase:firebase-analytics-ktx&quot;)\n    implementation(&quot;com.google.firebase:firebase-auth-ktx&quot;)\n    implementation(&quot;com.google.firebase:firebase-firestore-ktx&quot;)\n    implementation(&quot;com.google.firebase:firebase-messaging-ktx&quot;)\n    implementation(&quot;com.google.firebase:firebase-crashlytics-ktx&quot;)\n    implementation(&quot;com.google.firebase:firebase-perf-ktx&quot;)\n\n    // Play Services\n    implementation(&quot;com.google.android.gms:play-services-auth:21.1.0&quot;) // Latest\n\n    // Lifecycle\n    implementation(&quot;androidx.lifecycle:lifecycle-process:2.7.0&quot;) // Updated\n\n    // Stripe\n    implementation(&quot;com.stripe:stripe-android:20.40.1&quot;) { // Latest\n        exclude(module = &quot;kotlin-stdlib-jdk8&quot;)\n    }\n\n  /*  // Database\n    implementation(&quot;com.tekartik.sqflite:sqflite:2.4.2@aar&quot;) {\n        exclude(group = &quot;androidx.core&quot;, module = &quot;core&quot;)\n    }\n*/\n    // WebKit\n    implementation(&quot;androidx.webkit:webkit:1.9.0&quot;) // Updated\n    // Flutter Embedding\n    /*\n    debugImplementation(&quot;io.flutter:flutter_embedding_debug:3.29.3&quot;)\n    profileImplementation(&quot;io.flutter:flutter_embedding_profile:3.29.3&quot;)\n    releaseImplementation(&quot;io.flutter:flutter_embedding_release:3.29.3&quot;)\n    */\n}\n</code></pre>\n<p>gradle.properties:</p>\n<pre><code>org.gradle.jvmargs=-Xmx8G -XX:MaxMetaspaceSize=4G -XX:ReservedCodeCacheSize=512m -XX:+HeapDumpOnOutOfMemoryError\nandroid.useAndroidX=true\nandroid.enableJetifier=true\nflutter.ndkVersion=27.0.12077973\nflutterVersion=3.29.3  # Must match your Flutter version\nflutter.enableFullEmbedding=true\n</code></pre>\n<p>settings.gradle.kts:</p>\n<pre><code>import java.io.File\nimport org.gradle.api.GradleException\n\npluginManagement {\n    repositories {\n        google()\n        mavenCentral()\n        gradlePluginPortal()\n        maven(&quot;https://storage.googleapis.com/download.flutter.io&quot;)\n    }\n\n    val localFile = File(rootDir, &quot;local.properties&quot;).takeIf { it.exists() }\n        ?: File(rootDir.parentFile, &quot;local.properties&quot;).takeIf { it.exists() }\n        ?: throw GradleException(\n            &quot;&quot;&quot;\n            Missing local.properties! Create it with:\n            flutter.sdk=C:\\\\\\\\flutter\n            sdk.dir=C:\\\\\\\\Android\\\\\\\\Sdk\n            (Use DOUBLE BACKSLASHES for Windows paths)\n            &quot;&quot;&quot;.trimIndent()\n        )\n\n    val props = java.util.Properties().apply {\n        java.io.FileInputStream(localFile).use { fis -&gt;\n            load(fis)\n        }\n    }\n\n    val flutterSdkPath = props.getProperty(&quot;flutter.sdk&quot;)\n        ?: throw GradleException(&quot;Missing 'flutter.sdk' in local.properties&quot;)\n\n    includeBuild(&quot;$flutterSdkPath/packages/flutter_tools/gradle&quot;)\n\n    resolutionStrategy {\n        eachPlugin {\n            when (requested.id.id) {\n                &quot;dev.flutter.flutter-gradle-plugin&quot; -&gt; {\n                    useModule(&quot;dev.flutter:flutter-gradle-plugin:3.29.3&quot;)\n                }\n                &quot;com.google.gms.google-services&quot; -&gt; {\n                    useModule(&quot;com.google.gms:google-services:4.4.1&quot;)\n                }\n                &quot;com.google.firebase.crashlytics&quot; -&gt; {\n                    useModule(&quot;com.google.firebase:firebase-crashlytics-gradle:2.9.9&quot;)\n                }\n            }\n        }\n    }\n}\n\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)\n    repositories {\n        google()\n        mavenCentral()\n        maven {\n            url = uri(&quot;https://storage.googleapis.com/download.flutter.io&quot;)\n            metadataSources {\n                artifact() // Critical for Flutter artifacts\n            }\n        }\n        maven(url = &quot;https://www.jitpack.io&quot;) {\n            content {\n                includeGroupByRegex(&quot;com\\\\.github\\\\..*&quot;)\n            }\n        }\n    }\n}\n\nrootProject.name = &quot;chesster&quot;\ninclude(&quot;:app&quot;)\n</code></pre>\n<p>and android/build.gradle.kts:</p>\n<pre><code>import com.android.build.gradle.BaseExtension\nimport org.jetbrains.kotlin.gradle.dsl.KotlinJvmOptions\n\nbuildscript {\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath(&quot;com.android.tools.build:gradle:8.10.0&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.22&quot;)\n        classpath(&quot;com.google.gms:google-services:4.4.2&quot;)\n        classpath(&quot;com.google.firebase:firebase-crashlytics-gradle:2.9.9&quot;)\n    }\n}\n\nallprojects {\n    plugins.withType&lt;JavaBasePlugin&gt; {\n        configure&lt;JavaPluginExtension&gt; {\n            toolchain {\n                languageVersion.set(JavaLanguageVersion.of(17))\n                // Either remove this line completely or use:\n                vendor.set(JvmVendorSpec.ADOPTIUM) // For Eclipse Temurin\n                // OR (for any vendor)\n                // vendor.set(JvmVendorSpec.matching { it.contains(&quot;oracle&quot;, ignoreCase = true) })\n            }\n        }\n    }\n}\nsubprojects {\n    afterEvaluate {\n        if (plugins.hasPlugin(&quot;com.android.base&quot;)) {\n            configure&lt;BaseExtension&gt; {\n                compileOptions {\n                    sourceCompatibility = JavaVersion.VERSION_17\n                    targetCompatibility = JavaVersion.VERSION_17\n                }\n\n                (this as ExtensionAware).extensions.configure&lt;KotlinJvmOptions&gt;(&quot;kotlinOptions&quot;) {\n                    jvmTarget = &quot;17&quot;\n                    freeCompilerArgs += listOf(\n                        &quot;-Xopt-in=kotlin.RequiresOptIn&quot;,\n                        &quot;-Xjvm-default=all&quot;\n                    )\n                }\n\n                defaultConfig {\n                    vectorDrawables.useSupportLibrary = true\n                }\n\n                packagingOptions {\n                    resources {\n                        excludes.add(&quot;META-INF/AL2.0&quot;)\n                        excludes.add(&quot;META-INF/LGPL2.1&quot;)\n                        excludes.add(&quot;**/libflutter.so&quot;) // Flutter specific\n                    }\n                }\n            }\n        }\n    }\n}\n\ntasks.register(&quot;clean&quot;, Delete::class) {\n    delete(rootProject.layout.buildDirectory)\n}\n</code></pre>\n<p>what could be the bottleneck? I cleaned the files multiple times did pub upgrade and so on but somehow this error still persists\nthats the simple MainActivity.kt file</p>\n<pre><code>package com.chesster.app\nimport io.flutter.embedding.android.FlutterActivity\nclass MainActivity : FlutterActivity()\n</code></pre>\n",
    "tags" : [ "java", "android", "flutter", "gradle" ],
    "owner" : {
      "account_id" : 6538734,
      "reputation" : 644,
      "user_id" : 5057200,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://graph.facebook.com/998722690147651/picture?type=large",
      "display_name" : "Sparkm4n",
      "link" : "https://stackoverflow.com/users/5057200/sparkm4n"
    },
    "is_answered" : false,
    "view_count" : 44,
    "closed_date" : 1748109781,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1748117224,
    "creation_date" : 1748088267,
    "link" : "https://stackoverflow.com/questions/79636745/unresolved-reference-flutteractivity-in-mainactivity-kt-after-major-changes-in",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}