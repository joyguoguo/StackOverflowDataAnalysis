{
  "question" : {
    "question_id" : 79614899,
    "title" : "Using spark to read data from MinIO",
    "body" : "<p>I have been trying to pull data from MinIO using spark using s3a but when running the code there was not much happening when I set the log level to debug it found that the connection with minIO is not made.</p>\n<pre><code>public static void main(String[] args) throws IOException {\n        SparkSession spark = SparkSession.builder()\n                .appName(&quot;TestMinIOSpark&quot;)\n                .master(&quot;local[*]&quot;) // or your cluster config\n                .config(&quot;spark.hadoop.fs.s3a.endpoint&quot;, &quot;http://127.0.0.1:9000/&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.access.key&quot;, &quot;username&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.secret.key&quot;, &quot;password&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.path.style.access&quot;, &quot;true&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3AFileSystem&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.aws.credentials.provider&quot;, &quot;org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider&quot;)\n                .config(&quot;spark.jars.packages&quot;, &quot;org.apache.hadoop:hadoop-aws:3.4.1,software.amazon.awssdk:bundle:2.29.6,software.amazon.awssdk:core:2.29.6&quot;)\n                .config(&quot;spark.hadoop.fs.s3a.connection.ssl.enabled&quot;, &quot;false&quot;)\n                .getOrCreate();\n        Properties properties = getProperties();\n\n        StructType schema = new StructType(new StructField[]{\n                new StructField(&quot;id&quot;, DataTypes.IntegerType, false, Metadata.empty()),\n                new StructField(&quot;name&quot;, DataTypes.StringType, false, Metadata.empty()),\n                new StructField(&quot;age&quot;, DataTypes.IntegerType, false, Metadata.empty())\n        });\n\n        // Create sample data\n        List&lt;Row&gt; data = Arrays.asList(\n                RowFactory.create(1, &quot;Alice&quot;, 25),\n                RowFactory.create(2, &quot;Bob&quot;, 30),\n                RowFactory.create(3, &quot;Charlie&quot;, 35)\n        );\n\n        // Create DataFrame from data and schema\n        Dataset&lt;Row&gt; df = spark.createDataFrame(data, schema);\n\n        df.write()\n                .mode(&quot;overwrite&quot;)\n                .parquet(&quot;s3a://test/test-write/&quot;);\n    }\n</code></pre>\n",
    "tags" : [ "java", "apache-spark", "amazon-s3", "minio", "minio-java-sdk" ],
    "owner" : {
      "account_id" : 29779245,
      "reputation" : 1,
      "user_id" : 22822342,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocII4K5j_T8aRRmu3KL0Scs6nRMq8odwaCUMprGvAyejUdo=k-s256",
      "display_name" : "OUSSAMA EL ALAOUI EL ISMAILI",
      "link" : "https://stackoverflow.com/users/22822342/oussama-el-alaoui-el-ismaili"
    },
    "is_answered" : false,
    "view_count" : 86,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1746826629,
    "creation_date" : 1746826629,
    "link" : "https://stackoverflow.com/questions/79614899/using-spark-to-read-data-from-minio",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140526459,
    "post_id" : 79614899,
    "body" : "There can be a bunch of possible reasons for this. Could you provide a log?",
    "score" : 0,
    "owner" : {
      "account_id" : 20850387,
      "reputation" : 108,
      "user_id" : 15315053,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1db5386ca04a80b976c5a77df9bcbe01?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Yan",
      "link" : "https://stackoverflow.com/users/15315053/yan"
    },
    "creation_date" : 1750331763,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}