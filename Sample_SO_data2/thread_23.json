{
  "question" : {
    "question_id" : 79834742,
    "title" : "Android Java Surfaceview, declaring and hiding",
    "body" : "<p>I have a main activity with a button. When I press the button, a hidden <code>SurfaceView</code> becomes visible and an animation shows. It's working really well, but I have two problems.</p>\n<p>First, what is the proper way to declare an external <code>SurfaceView</code> class in the manifest? I have declared it as a normal activity, but I'm pretty sure it's not the correct way. Android studio says:</p>\n<blockquote>\n<p>The class should provide a default constructor (a public constructor with no arguments).</p>\n</blockquote>\n<p>How do I do that?</p>\n<p>Second, when the animation is finished I want to hide the <code>SurfaceView</code> again. How and where do I do this?</p>\n<p>Manifest:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;activity\n    android:name=&quot;com.lammet.intervaltimer.ClockSurfaceView&quot;\n    android:theme=&quot;@style/Theme.IntervalTimer&quot;\n    android:configChanges=&quot;locale|orientation&quot;\n    android:exported=&quot;false&quot;&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.intent.action.INTERVALSURFACEVIEW&quot; /&gt;\n        &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/activity&gt; \n</code></pre>\n<p>Main Activity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>binding.setIntervalGoButton.setOnClickListener(v -&gt; {\n    binding.setIntervalLayout.setVisibility(View.GONE);\n    binding.clockSurfaceview.setVisibility(View.VISIBLE);\n    invalidateOptionsMenu();\n});\n</code></pre>\n<p>intervalSurfaceView:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class IntervalSurfaceView extends SurfaceView implements SurfaceHolder.Callback, Runnable {\n    public IntervalSurfaceView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        surfaceHolder = getHolder();\n        surfaceHolder.addCallback(this);\n    }\n    @Override\n    public void surfaceCreated(@NonNull SurfaceHolder holder) {\n        gIsIntervalRunning = true;\n        drawingThread = new Thread(this);\n        drawingThread.start();\n    }\n    @Override\n    public void surfaceChanged(@NonNull SurfaceHolder holder, int format, int width, int height) {\n    }\n    @Override\n    public void surfaceDestroyed(@NonNull SurfaceHolder holder) {\n        gIsIntervalRunning = false;\n        try {\n            drawingThread.join(); // Wait for the thread to finish\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n    }\n    @Override\n    public void run() {\n        while (gIsIntervalRunning) {\n            Canvas canvas = null;\n            try {\n                canvas = surfaceHolder.lockCanvas();\n                if (canvas != null) {\n                    synchronized (surfaceHolder) {\n                        drawInterval(canvas);\n                    }\n                }\n            } finally {\n                if (canvas != null) {\n                    surfaceHolder.unlockCanvasAndPost(canvas);\n                }\n            }\n            try {\n                Thread.sleep(100); // Approximately 60 FPS\n            } catch (InterruptedException e) {\n                Thread.currentThread().interrupt();\n            }\n        }\n    }\n    protected static void drawInterval(Canvas canvas) {\n    // The animation is drawn\n    if (animation == finished) gIsIntervalRunning = false;\n    }\n</code></pre>\n",
    "tags" : [ "java", "android", "surfaceview" ],
    "owner" : {
      "account_id" : 3017087,
      "reputation" : 308,
      "user_id" : 2558929,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/5d3d0aadc37091c3e37e4d9d9ff1584f?s=256&d=identicon&r=PG",
      "display_name" : "Tomas F.",
      "link" : "https://stackoverflow.com/users/2558929/tomas-f"
    },
    "is_answered" : true,
    "view_count" : 55,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1764602206,
    "creation_date" : 1764588159,
    "link" : "https://stackoverflow.com/questions/79834742/android-java-surfaceview-declaring-and-hiding",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79834846,
    "question_id" : 79834742,
    "body" : "<p>I can help you with your first question,<br />\nyou donâ€™t declare a SurfaceView in the manifest.<br />\nActivities, Services or Receivers belong there. A custom view is just a UI component, not a component that Android launches.</p>\n<p>So remove this from your manifest:<br />\n<code>&lt;activity</code><br />\n<code>    android:name=&quot;com.lammet.intervaltimer.ClockSurfaceView&quot;</code><br />\n<code>    ..../&gt;</code></p>\n<p>The warning The class should provide a default constructor only appears because Android Studio thinks your SurfaceView is an Activity (since you put it in the manifest). Once you remove, the warning goes away.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7145820,
      "reputation" : 521,
      "user_id" : 5461560,
      "user_type" : "registered",
      "accept_rate" : 20,
      "profile_image" : "https://graph.facebook.com/526568690855242/picture?type=large",
      "display_name" : "Badrinath",
      "link" : "https://stackoverflow.com/users/5461560/badrinath"
    },
    "creation_date" : 1764593442,
    "last_activity_date" : 1764593442,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}