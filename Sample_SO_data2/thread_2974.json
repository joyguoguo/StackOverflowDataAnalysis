{
  "question" : {
    "question_id" : 79583903,
    "title" : "OpenCV Java UnsatisfiedLinkError in IntelliJ with nonfree modules after compiling from source",
    "body" : "<p>I'm trying to use OpenCV's nonfree functionalities (like SIFT/SURF) in Java by compiling from source, but I'm encountering a DLL loading error in IntelliJ.</p>\n<p>Here's my setup:</p>\n<p>I'm using <strong>windows 11 24h2</strong></p>\n<p>Compilation Details:\nOpenCV Version: <strong>4.12.0</strong></p>\n<p>CMake Configurations (the most important I think):</p>\n<pre><code>BUILD_SHARED_LIBS = ON\nBUILD_JAVA = ON\nBUILD_opencv_world = OFF\nBUILD_opencv_java = ON\nOPENCV_ENABLE_NONFREE = ON\nOPENCV_EXTRA_MODULES_PATH = C:/opencv-build/opencv_contrib/modules\n</code></pre>\n<p>Compiler: <strong>Visual Studio 2022 (Release mode, x64)</strong></p>\n<p>Generated files:</p>\n<ul>\n<li><strong>opencv_java4120.dll (in build/lib/release)</strong></li>\n<li>opencv-4120.jar</li>\n<li>some others .dll for the additional modules and some binary files</li>\n</ul>\n<p>The compilation finished normally, I didn't have any errors.</p>\n<p>I set the opencv version in pom.xml (I'm using maven)</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.opencv&lt;/groupId&gt;\n    &lt;artifactId&gt;opencv&lt;/artifactId&gt;\n    &lt;version&gt;4.12.0&lt;/version&gt;\n    &lt;scope&gt;system&lt;/scope&gt;\n    &lt;systemPath&gt;${project.basedir}/lib/opencv-4120.jar&lt;/systemPath&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>I've also added the dll path to IntelliJ's VM options</p>\n<pre><code>-Djava.library.path=.\\src\\main\\resources \n</code></pre>\n<p>I've tried with a simple code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.analisis;\n\nimport org.opencv.core.*;\n\npublic class Main {\n  static {\n    System.loadLibrary(Core.NATIVE_LIBRARY_NAME);\n  }\n\n  public static void main(String[] args) {\n    System.out.println(&quot;opencv version: &quot; + Core.VERSION);\n  }\n}\n</code></pre>\n<p>This code works, but when I want to import a image using the <code>Imgcodecs</code> module I get this</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: \nC:\\Users\\jesus\\IdeaProjects\\analisis_img\\src\\main\\resources\\opencv_java4120.dll: \nError in a dynamic link library initialization routine. (DLL)\n    at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n    ...\n</code></pre>\n<p>I Verified that:</p>\n<p>The JAR and DLL versions match (both are from the same OpenCV build).</p>\n<p>All required DLLs are in the same directory.</p>\n<ul>\n<li>Why does the DLL fail to initialize despite correct paths?</li>\n<li>Are there missing dependencies I should check?</li>\n<li>Is there a precompiled Java-friendly version of OpenCV with nonfree modules?</li>\n</ul>\n<p>The project is academic (patents aren't an issue).</p>\n<p>I'm open to alternatives for using nonfree algorithms if compilation proves too complex.</p>\n",
    "tags" : [ "java", "opencv", "intellij-idea", "dll", "unsatisfiedlinkerror" ],
    "owner" : {
      "account_id" : 28795776,
      "reputation" : 11,
      "user_id" : 22053987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5f713f3c28b34dff14f621ae8173b7e2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jesus",
      "link" : "https://stackoverflow.com/users/22053987/jesus"
    },
    "is_answered" : false,
    "view_count" : 85,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1745285493,
    "creation_date" : 1745196862,
    "link" : "https://stackoverflow.com/questions/79583903/opencv-java-unsatisfiedlinkerror-in-intellij-with-nonfree-modules-after-compilin",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140356742,
    "post_id" : 79583903,
    "body" : "maybe they&#39;re very close to releasing 4.12 but that should leave signs elsewhere too. 4.11 is the current release. anyway, I don&#39;t use java more than once every couple of years, so I can&#39;t be of any help.",
    "score" : 0,
    "owner" : {
      "account_id" : 3072614,
      "reputation" : 16444,
      "user_id" : 2602877,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c76ea7b35660e77624550130276c61d3?s=256&d=identicon&r=PG",
      "display_name" : "Christoph Rackwitz",
      "link" : "https://stackoverflow.com/users/2602877/christoph-rackwitz"
    },
    "creation_date" : 1745305717,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140356237,
    "post_id" : 79583903,
    "body" : "not at all, when i cloned the repository of opencv i put 4.xx but, at this point i dont know which version is if you say so, maybe 4.1.2?",
    "score" : 0,
    "owner" : {
      "account_id" : 28795776,
      "reputation" : 11,
      "user_id" : 22053987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5f713f3c28b34dff14f621ae8173b7e2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jesus",
      "link" : "https://stackoverflow.com/users/22053987/jesus"
    },
    "creation_date" : 1745286052,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140354006,
    "post_id" : 79583903,
    "body" : "is this AI-generated? there is no 4.12 yet, neither as a release nor as a tag.",
    "score" : 0,
    "owner" : {
      "account_id" : 3072614,
      "reputation" : 16444,
      "user_id" : 2602877,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c76ea7b35660e77624550130276c61d3?s=256&d=identicon&r=PG",
      "display_name" : "Christoph Rackwitz",
      "link" : "https://stackoverflow.com/users/2602877/christoph-rackwitz"
    },
    "creation_date" : 1745229435,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}