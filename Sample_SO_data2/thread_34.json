{
  "question" : {
    "question_id" : 79844233,
    "title" : "Configure jax-ws in Glassfish not to supply client certificate in SSL handshake",
    "body" : "<p>I have built a jax-ws web service client using the jaxws-maven-plugin. It is failing when I use it from a Glassfish 7.0.25 server with Java 21.</p>\n<p>I'm calling a SAP server which only validates the client certificate in the SSL handshake if one is supplied by the client. If a client certificate is not supplied then SAP allows the connection.</p>\n<p>SAP returns a CertificateRequest message during the SSL handshake, with a list of trusted certificate authorities.</p>\n<p>Unfortunately, Glassfish sends its self-signed certificate, which isn't signed by one of these authorities and isn't trusted, and SAP abandons the handshake. I would like it not to supply a client certificate.</p>\n<p>As part of the investigation into the problem, I wrote a web service client using jakarta.xml.soap.SOAPMessage and java.net.http.HttpClient. When I run it from the same Glassfish server, it returns 'No X.509 certificate for client authentication, use empty Certificate message instead', and the handshake is successful.</p>\n<p>Does anyone know if it is possible to configure jax-ws to not to return a client certificate during the ssl handshake?</p>\n",
    "tags" : [ "java", "ssl", "jax-ws" ],
    "owner" : {
      "account_id" : 44982689,
      "reputation" : 13,
      "user_id" : 32037727,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/139b8a2b8a5acd7e9c3b832725379288?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Stevec",
      "link" : "https://stackoverflow.com/users/32037727/stevec"
    },
    "is_answered" : true,
    "view_count" : 46,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1765482577,
    "creation_date" : 1765474910,
    "link" : "https://stackoverflow.com/questions/79844233/configure-jax-ws-in-glassfish-not-to-supply-client-certificate-in-ssl-handshake",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79844320,
    "question_id" : 79844233,
    "body" : "<p>JAX-WS is sending a client cert because GlassFish gives it a default SSLContext that contains that self-signed cert. If a server asks for a cert, JAX-WS just sends whatever it has..</p>\n<p>I recommand that you give the port an SSLContext with no KeyManagers, so it has nothing to send</p>\n<pre class=\"lang-java prettyprint-override\"><code>SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\nctx.init(new KeyManager[0], null, null);\n\n((BindingProvider) port).getRequestContext().put(\n    &quot;com.sun.xml.ws.transport.https.client.SSLSocketFactory&quot;,\n    ctx.getSocketFactory()\n);\n</code></pre>\n<p>This forces an empty Certificate message and SAP stops complaining...</p>\n<blockquote>\n<p>No magic JAX-WS flag exists.</p>\n</blockquote>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 12972904,
      "reputation" : 1113,
      "user_id" : 9377995,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Hl13jffO.png?s=256",
      "display_name" : "gdoura mohamed",
      "link" : "https://stackoverflow.com/users/9377995/gdoura-mohamed"
    },
    "creation_date" : 1765482577,
    "last_activity_date" : 1765482577,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140898476,
    "post_id" : 79844233,
    "body" : "can you create a custom X509KeyManager that explicitly returns no client certificates?",
    "score" : 0,
    "owner" : {
      "account_id" : 62495,
      "reputation" : 11195,
      "user_id" : 185672,
      "user_type" : "registered",
      "accept_rate" : 77,
      "profile_image" : "https://www.gravatar.com/avatar/9996dccf311e44fbe9c6059ba5d57ad4?s=256&d=identicon&r=PG",
      "display_name" : "Phil",
      "link" : "https://stackoverflow.com/users/185672/phil"
    },
    "creation_date" : 1765475276,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}