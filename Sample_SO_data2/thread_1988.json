{
  "question" : {
    "question_id" : 79660974,
    "title" : "How to Use Custom Extensions with the XMLBeans maven Plugin?",
    "body" : "<p>I'm trying to use a custom extension with the Apache XMLBeans plugin, but I'm encountering errors during the generation process. Here is the custom extension class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.chepseskaf.tools;\n\nimport org.apache.xmlbeans.SchemaTypeSystem;\nimport org.apache.xmlbeans.impl.tool.SchemaCompilerExtension;\n\nimport java.util.Map;\n\npublic class MyExtension implements SchemaCompilerExtension {\n\n    @Override\n    public void schemaCompilerExtension(SchemaTypeSystem schemaTypeSystem, Map map) {\n        // Implement me\n    }\n\n    @Override\n    public String getExtensionName() {\n        return this.getClass().getSimpleName();\n    }\n}\n</code></pre>\n<p>And here is my plugin configuration in <code>pom.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n    &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n    &lt;version&gt;5.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n    &lt;configuration&gt;\n        &lt;repackage&gt;com.chepseskaf.driver.metadata&lt;/repackage&gt;\n        &lt;name&gt;model&lt;/name&gt;\n        &lt;partialMethods&gt;ALL&lt;/partialMethods&gt;\n        &lt;sourceDir&gt;${project.basedir}/xsd&lt;/sourceDir&gt;\n        &lt;extensions&gt;\n            &lt;extension&gt;com.chepseskaf.tools.MyExtension&lt;/extension&gt;\n        &lt;/extensions&gt;\n        &lt;verbose&gt;true&lt;/verbose&gt;\n        &lt;quiet&gt;false&lt;/quiet&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-beta3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>However, the generation crashes with the following error:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>[ERROR] Failed to execute goal org.apache.xmlbeans:xmlbeans:5.3.0:compile (default) on project model-driver: Unable to parse configuration of mojo org.apache.xmlbeans:xmlbeans:5.3.0:compile for parameter className: Cannot set 'className' in class org.apache.xmlbeans.impl.tool.Extension: InvocationTargetException: com.chepseskaf.tools.MyExtension -&gt; [Help 1]\n\nCaused by: java.lang.ClassNotFoundException: com.chepseskaf.tools.MyExtension\n    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass (SelfFirstStrategy.java:42)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.unsynchronizedLoadClass (ClassRealm.java:225)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:210)\n    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass (ClassRealm.java:205)\n</code></pre>\n<p>It seems like the plugin is unable to find the <code>com.chepseskaf.tools.MyExtension</code> class. How can I properly configure and use my custom extension with the XMLBeans plugin?</p>\n<p>Any help would be greatly appreciated.</p>\n",
    "tags" : [ "java", "maven", "xmlbeans", "xmlbeans-maven-plugin" ],
    "owner" : {
      "account_id" : 91741,
      "reputation" : 676,
      "user_id" : 251745,
      "user_type" : "registered",
      "accept_rate" : 61,
      "profile_image" : "https://www.gravatar.com/avatar/795ebf006996ab9091896c94820758e3?s=256&d=identicon&r=PG",
      "display_name" : "chepseskaf",
      "link" : "https://stackoverflow.com/users/251745/chepseskaf"
    },
    "is_answered" : true,
    "view_count" : 104,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1749656660,
    "creation_date" : 1749579702,
    "link" : "https://stackoverflow.com/questions/79660974/how-to-use-custom-extensions-with-the-xmlbeans-maven-plugin",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79662291,
    "question_id" : 79660974,
    "body" : "<p>I managed to get it working (at least in 2 to 3 out of 5 builds), and that's exactly where the problem lies. Unfortunately, this plugin is very unstable and seems to be severely affected by timing issues. Therefore, I would suggest seriously considering another solution for your specific problem. To get it working (at least in about 2 to 3 out of 5 builds), you can try the following:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  \n  ...\n\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n        &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n        &lt;version&gt;5.3.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;configuration&gt;\n          &lt;repackage&gt;com.chepseskaf.driver.metadata&lt;/repackage&gt;\n          &lt;name&gt;model&lt;/name&gt;\n          &lt;partialMethods&gt;ALL&lt;/partialMethods&gt;\n          &lt;sourceDir&gt;${project.basedir}/xsd&lt;/sourceDir&gt;\n          &lt;extensions&gt;\n            &lt;extension&gt;\n              &lt;className&gt;com.chepseskaf.tools.MyExtension&lt;/className&gt; &lt;!-- added the className here --&gt;\n            &lt;/extension&gt;\n          &lt;/extensions&gt;\n          &lt;verbose&gt;true&lt;/verbose&gt;\n          &lt;quiet&gt;false&lt;/quiet&gt;\n        &lt;/configuration&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-beta3&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;com.chepseskaf&lt;/groupId&gt;          &lt;!-- please adjust the dependency in the following lines (where your MyExtension.class is located) --&gt;\n            &lt;artifactId&gt;your-artifact-id&lt;/artifactId&gt;\n            &lt;version&gt;your-version&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.xmlbeans&lt;/groupId&gt;\n      &lt;artifactId&gt;xmlbeans&lt;/artifactId&gt;\n      &lt;version&gt;5.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>However, keep in mind that it will be highly unstable if it works. According to <a href=\"https://issues.apache.org/jira/browse/XMLBEANS-628\" rel=\"nofollow noreferrer\">this problem</a>, the project is currently not very viable (see the first comment). So I would really suggest looking for alternatives depending on the concrete use case.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 18030424,
      "reputation" : 46,
      "user_id" : 13105206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2c182.jpg?s=256",
      "display_name" : "tim-danger",
      "link" : "https://stackoverflow.com/users/13105206/tim-danger"
    },
    "creation_date" : 1749656660,
    "last_activity_date" : 1749656660,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140503868,
    "post_id" : 79660974,
    "body" : "You can set the <code>&lt;classPath&gt;com.chepseskaf.tools&lt;&#47;classPath&gt;</code> inside configuration. Furthermore, I added <code>&lt;className&gt;com.chepseskaf.tools.MyExtension&lt;&#47;className&gt;</code> inside extension-tag. This will make the ClassNotFound go away. However, there will be another error. Have to look a little closer at it tomorrow. Good luck",
    "score" : 1,
    "owner" : {
      "account_id" : 18030424,
      "reputation" : 46,
      "user_id" : 13105206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2c182.jpg?s=256",
      "display_name" : "tim-danger",
      "link" : "https://stackoverflow.com/users/13105206/tim-danger"
    },
    "creation_date" : 1749591401,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140503769,
    "post_id" : 79660974,
    "body" : "@tim-danger The dependency is included. The generated code is working.",
    "score" : 0,
    "owner" : {
      "account_id" : 91741,
      "reputation" : 676,
      "user_id" : 251745,
      "user_type" : "registered",
      "accept_rate" : 61,
      "profile_image" : "https://www.gravatar.com/avatar/795ebf006996ab9091896c94820758e3?s=256&d=identicon&r=PG",
      "display_name" : "chepseskaf",
      "link" : "https://stackoverflow.com/users/251745/chepseskaf"
    },
    "creation_date" : 1749588708,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140503687,
    "post_id" : 79660974,
    "body" : "Lines 51-57 in the first pom-screenshot",
    "score" : 0,
    "owner" : {
      "account_id" : 18030424,
      "reputation" : 46,
      "user_id" : 13105206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2c182.jpg?s=256",
      "display_name" : "tim-danger",
      "link" : "https://stackoverflow.com/users/13105206/tim-danger"
    },
    "creation_date" : 1749586589,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140503674,
    "post_id" : 79660974,
    "body" : "Did you maybe forget to include the org.apache.xmlbeans- dependency in your pom as described <a href=\"https://xmlbeans.apache.org/guide/Maven.html\" rel=\"nofollow noreferrer\">here</a>? Outside of your plugin-section.",
    "score" : 0,
    "owner" : {
      "account_id" : 18030424,
      "reputation" : 46,
      "user_id" : 13105206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2c182.jpg?s=256",
      "display_name" : "tim-danger",
      "link" : "https://stackoverflow.com/users/13105206/tim-danger"
    },
    "creation_date" : 1749585971,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79662291" : [ {
      "comment_id" : 140508057,
      "post_id" : 79662291,
      "body" : "It works by adding the dependency, thank you!",
      "score" : 0,
      "owner" : {
        "account_id" : 91741,
        "reputation" : 676,
        "user_id" : 251745,
        "user_type" : "registered",
        "accept_rate" : 61,
        "profile_image" : "https://www.gravatar.com/avatar/795ebf006996ab9091896c94820758e3?s=256&d=identicon&r=PG",
        "display_name" : "chepseskaf",
        "link" : "https://stackoverflow.com/users/251745/chepseskaf"
      },
      "creation_date" : 1749721533,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}