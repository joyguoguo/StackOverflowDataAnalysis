{
  "question" : {
    "question_id" : 79567026,
    "title" : "Is there a way to clone a Java object to a superclass object?",
    "body" : "<p>I have a JSF application that has a <code>Settings</code> object that used to be <code>@ApplicationScoped</code> but is being changed to <code>@SessionScoped</code> because the application is being expanded to support users who need different <code>Settings</code> values. An object of a superclass of <code>Settings</code> is required by a method that runs in a Thread. When <code>Settings</code> was <code>@ApplicationScoped</code>, it worked fine to simply pass a (the) <code>Settings</code> object to the Thread-run method, because it was a singleton. However, that no longer works, because the Thread executes outside the context of a Session. What I would like to do is create an instance of a superclass of <code>Settings</code> that is a clone of <code>Settings</code> insofar as the methods and data members defined by that superclass. However, I don't know that <code>clone()</code> (or the native code behind it) can be employed in that way. (I only need a shallow copy.) What I would like to do, in (somewhat) pseudocode, is the following:</p>\n<pre><code>public class SettingsBase\n{\n   int dataMember1;\n   ...\n}\n\n@SessionScoped\npublic class Settings extends SettingsBase implements Serializable\n{\n   int appDataMember1;\n}\n\nSettings settings = new Settings();\nSettingsBase baseSettings = (SettingsBase)settings.clone( &lt;SettingsBase&gt; );\nassert !(baseSettings instanceof Settings);\n</code></pre>\n<p>If I can't do this, I will have to add a method to <code>SettingsBase</code> that copies all of the (30+) data members to a new instance of the class, such as below, which I was hoping to avoid:</p>\n<pre><code>public static SettingsBase cloneFrom( SettingsBase settings )\n{\n   SettingsBase newSettings = new SettingsBase();\n   newSettings.dataMember1 = settings.dataMember1;\n   newSettings.dataMember2 = settings.dataMember2;\n   ...\n   return( newSettings );\n}\n</code></pre>\n",
    "tags" : [ "java", "cdi" ],
    "owner" : {
      "account_id" : 993644,
      "reputation" : 1623,
      "user_id" : 1010173,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/384e546b224f9a917459eea478d91b6f?s=256&d=identicon&r=PG",
      "display_name" : "Kevin Rahe",
      "link" : "https://stackoverflow.com/users/1010173/kevin-rahe"
    },
    "is_answered" : false,
    "view_count" : 106,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1744373567,
    "creation_date" : 1744297780,
    "link" : "https://stackoverflow.com/questions/79567026/is-there-a-way-to-clone-a-java-object-to-a-superclass-object",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79567344,
    "question_id" : 79567026,
    "body" : "<p>You could use ModelMapper <a href=\"https://modelmapper.org/user-manual/\" rel=\"nofollow noreferrer\">https://modelmapper.org/user-manual/</a></p>\n<p>This is a very simple example:</p>\n<pre><code>public class SettingsBase {\n    int dataMember;\n}\n\npublic class Settings {\n    int dataMember;\n}\n</code></pre>\n<p>Use ModelMapper in this way:</p>\n<pre><code>public SettingsBase clone(Settings settings) {\n   return new ModelMapper().map(settings, SettingsBase.class);\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 25481526,
      "reputation" : 336,
      "user_id" : 19277782,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c6654815992416a2f9ff508c303169d3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "CaptainPyscho",
      "link" : "https://stackoverflow.com/users/19277782/captainpyscho"
    },
    "creation_date" : 1744309450,
    "last_activity_date" : 1744309450,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79567710,
    "question_id" : 79567026,
    "body" : "<p>Though I didn't intend it to be, this turned out to be a bit of a trick question. I had debated the necessity of tagging the question with jsf, and in fact someone even removed that tag from the question, but it turns out to be a key factor in the possible solutions. Because I could implement it fairly quickly (thank you emacs) and the superclass changes only rarely, I decided to implement the workaround I suggested in the question:</p>\n<pre><code>public static SettingsBase cloneFrom( SettingsBase settings )\n{\n   SettingsBase newSettings = new SettingsBase();\n   newSettings.dataMember1 = settings.dataMember1;\n   newSettings.dataMember2 = settings.dataMember2;\n   ...\n   return( newSettings );\n}\n</code></pre>\n<p>However, that doesn't work if the object I'm cloning is a SessionScoped (or ApplicationScoped!) JSF bean. When I tried it, the data members in the new <code>SettingsBase</code> object always had default values, rather than the values I expected to be copied from the source object. In order to make this strategy actually work, I had to use the getters implemented by <code>SettingsBase</code>, such as:</p>\n<pre><code>public static SettingsBase cloneFrom( SettingsBase settings )\n{\n   SettingsBase newSettings = new SettingsBase();\n   newSettings.dataMember1 = settings.getDataMember1();\n   newSettings.dataMember2 = settings.getDataMember2();\n   ...\n   return( newSettings );\n}\n</code></pre>\n<p>I don't know exactly what the @SessionScoped and @ApplicationScoped annotations do under the hood, but when I look at an object from a class so annotated in the (NetBeans) debugger, there are no values in the data members other than the defaults, which explains why my first attempt at a solution failed. As for the other solutions based on third-party libraries that were posed, whether they would work depends on how they're implemented. If they employ standard getters and setters, they will probably work. If they simply copy data members a la <code>Object.clone()</code>, they probably won't.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 993644,
      "reputation" : 1623,
      "user_id" : 1010173,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/384e546b224f9a917459eea478d91b6f?s=256&d=identicon&r=PG",
      "display_name" : "Kevin Rahe",
      "link" : "https://stackoverflow.com/users/1010173/kevin-rahe"
    },
    "creation_date" : 1744326851,
    "last_activity_date" : 1744330952,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140324401,
    "post_id" : 79567026,
    "body" : "My copy of Core JavaServer Faces, Third Edition, covers CDI, so I&#39;ve always thought of it as simply a version or specialization of JSF, rather than something distinctly separate from it. I see that there is a cdi tag available, though, so I added it, as obviously leaving java as the only tag is not sufficient.",
    "score" : 0,
    "owner" : {
      "account_id" : 993644,
      "reputation" : 1623,
      "user_id" : 1010173,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/384e546b224f9a917459eea478d91b6f?s=256&d=identicon&r=PG",
      "display_name" : "Kevin Rahe",
      "link" : "https://stackoverflow.com/users/1010173/kevin-rahe"
    },
    "creation_date" : 1744373920,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140324064,
    "post_id" : 79567026,
    "body" : "From which package exactly did you import the annotations? If it&#39;s <code>javax.enterprise.context</code> (CDI spec, which is indeed known to create <a href=\"https://stackoverflow.com/a/8658693\">proxies</a> on them), then it&#39;s still not a JSF spec related issue. JSF native annotations from <code>javax.faces.bean</code> (deprecated since 2.3 and removed in 4.0 already) don&#39;t do that and therefore can&#39;t cause the described &quot;issue&quot;.",
    "score" : 0,
    "owner" : {
      "account_id" : 52822,
      "reputation" : 1114580,
      "user_id" : 157882,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://www.gravatar.com/avatar/89927e2f4bde24991649b353a37678b9?s=256&d=identicon&r=PG",
      "display_name" : "BalusC",
      "link" : "https://stackoverflow.com/users/157882/balusc"
    },
    "creation_date" : 1744367357,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140321384,
    "post_id" : 79567026,
    "body" : "@Kevin Rahe, You can use apache-beanutils to clone the object if you must to clone it,  BeanUtils.copyProperties(baseSettings, settings);   &lt;dependency&gt;   &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;   &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;   &lt;version&gt;1.9.4&lt;/version&gt; &lt;/dependency&gt;",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744301878,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140321182,
    "post_id" : 79567026,
    "body" : "I suggest reworking the model so Settings HAS-A SettingsBase instead of Settings IS-A SettingsBase (and of course rename models accordingly afterwards).",
    "score" : 3,
    "owner" : {
      "account_id" : 52822,
      "reputation" : 1114580,
      "user_id" : 157882,
      "user_type" : "registered",
      "accept_rate" : 93,
      "profile_image" : "https://www.gravatar.com/avatar/89927e2f4bde24991649b353a37678b9?s=256&d=identicon&r=PG",
      "display_name" : "BalusC",
      "link" : "https://stackoverflow.com/users/157882/balusc"
    },
    "creation_date" : 1744299069,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140321141,
    "post_id" : 79567026,
    "body" : "You canâ€™t use Java clone to only copy part of the object hierarchy (or any implementation of it). with your structure you can create a constructor in your SettingsBase that receives an instance of it and you write the code, yes to copy all 30+ members (you can use reflection, any AI can generate that bit for you pretty easy). Another option is to use a library like Apache Commons Lang <code>MyObject cloned = SerializationUtils.clone(original);</code> but you wouldn&#39;t need the base one and it requires to impl Serializeable: <code>MyObject cloned = SerializationUtils.clone(original);</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1744298489,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}