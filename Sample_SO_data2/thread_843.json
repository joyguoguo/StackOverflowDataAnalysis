{
  "question" : {
    "question_id" : 79770239,
    "title" : "JBeret SE, Weld SE and command line parameters",
    "body" : "<p>I am wondering how efficiently handle startup parameters. So far I used to do it in my <code>public static void main(String[] args)</code> method and taking it from there.</p>\n<p>Now I want to combine both Java Batch and CDI through JBeret and Weld. While JBeret does not impose how I trigger a job, Weld gives me the idea to handle application configuration in an <code>@ApplicationScoped</code> bean. From the documentation this should be possible: <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html_single/#cdi_se_module\" rel=\"nofollow noreferrer\">Weld should inject command line arguments</a>.</p>\n<p>Apparently this does not work. Or only works if at the same time the next chapter is followed as well: <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html_single/#_bootstrapping_cdi_se\" rel=\"nofollow noreferrer\">Bootstrapping CDI SE</a></p>\n<p>But as soon as my replace my main class with Weld's main class I can no longer setup JBeret - and it feels odd to do it in the event handler.</p>\n<p>What other options exist to start the batch job, or how can I keep my own main method yet have command line parameters injected into the bean? How do others handle runtime configuration? Any ideas or hints welcome.</p>\n<p><strong>Update:</strong>\nI found a <a href=\"https://stackoverflow.com/a/75155697/4222206\">simiar post</a> that explains why StartMain works plus at the same time state it is no good design. Remains for my question: What would be a better design or practise?</p>\n",
    "tags" : [ "java", "cdi", "jboss-weld", "jberet", "jbatch" ],
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "is_answered" : false,
    "view_count" : 56,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1758519901,
    "creation_date" : 1758365232,
    "link" : "https://stackoverflow.com/questions/79770239/jberet-se-weld-se-and-command-line-parameters",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79771262,
    "question_id" : 79770239,
    "body" : "<p>Investigating how I could provide command line parameters as a bean, or evaluate the configuration (command line + env vars + config files) and provide that as a bean I repeatedly stumbled over <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html_single/#_bootstrapping_cdi_se\" rel=\"nofollow noreferrer\">https://docs.jboss.org/weld/reference/latest/en-US/html_single/#_bootstrapping_cdi_se</a>.</p>\n<p>Then I found out I would have to initialize Weld myself and in the <code>afterBeanDiscovery</code> event add my CommandLine or Configuration bean using the correct description. To get hold of that event I'd have to implement my own <a href=\"https://docs.jboss.org/weld/reference/latest/en-US/html_single/#extend\" rel=\"nofollow noreferrer\">Portable Extension</a>. While going there I experimented a lot and was yet not satisfied with the resulting code.</p>\n<p>Looking again how StartMain worked internally, I finally found <a href=\"https://github.com/weld/core/blob/544c528b37b0e175bc99472084c2474079c3d1e2/environments/se/core/src/main/java/org/jboss/weld/environment/se/StartMain.java#L28\" rel=\"nofollow noreferrer\">the class at Github</a>. And have to say that it is generic, reusable (it does not assume how an application loads configuration) yet resolves the bootstrapping problem quite straightforward.</p>\n<p>Thus I cannot agree StartMain is bad design as pointed out <a href=\"https://stackoverflow.com/a/75155697/4222206\">here</a>. Instead I will create a bean that has the Parameters injection point and in the postCreate event will create a thread to run my initial main method.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "creation_date" : 1758519901,
    "last_activity_date" : 1758519901,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}