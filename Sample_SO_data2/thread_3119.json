{
  "question" : {
    "question_id" : 79572819,
    "title" : "Spring Boot 3.3.3 and reactive WebClient logging of traceId sometimes missing",
    "body" : "<p>We are using Spring boot 3.3.3 and Java 21 and the reactive WebClient for REST calls.The application is configured for telemetry using micrometer and opentelemetry bridge (<code>micrometer-tracing-bridge-otel</code>).</p>\n<p>When logging is configured for the Reactive WebClient API calls (post/get), the traceId is not logged consistently.</p>\n<p>When using <code>slf4j</code> log methods e.g. <code>log.info()</code>, the <code>traceId</code> appears for some POST methods and some GET methods but otherwise is not logged at all.</p>\n<p>We have also tried enabling virtual threads for both Spring (<code>spring.threads.virtual.enabled</code> = true) and Reactor (<code>-Dreactor.schedulers.defaultBoundedElasticOnVirtualThreads = true</code>) however the traceId is still missing from the logs sometimes.</p>\n<p>This used to work on Spring Boot version 3.3.2</p>\n",
    "tags" : [ "java", "spring-boot", "reactive", "micrometer-tracing" ],
    "owner" : {
      "account_id" : 684166,
      "reputation" : 2618,
      "user_id" : 532383,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5b16537f0f4ce1a484c06d3fc996ea37?s=256&d=identicon&r=PG",
      "display_name" : "Ayub Malik",
      "link" : "https://stackoverflow.com/users/532383/ayub-malik"
    },
    "is_answered" : false,
    "view_count" : 244,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1744643858,
    "creation_date" : 1744623383,
    "link" : "https://stackoverflow.com/questions/79572819/spring-boot-3-3-3-and-reactive-webclient-logging-of-traceid-sometimes-missing",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140340208,
    "post_id" : 79572819,
    "body" : "There was a change to to the reactor BOM to 2023.0.9 and Jetty Reactive HTTPClient to 4.0.6 - perhaps it&#39;s related to that",
    "score" : 0,
    "owner" : {
      "account_id" : 111792,
      "reputation" : 3011,
      "user_id" : 295118,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/3308dae9212a52af8a7addb6771482de?s=256&d=identicon&r=PG",
      "display_name" : "scarba05",
      "link" : "https://stackoverflow.com/users/295118/scarba05"
    },
    "creation_date" : 1744797616,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}