{
  "question" : {
    "question_id" : 79701428,
    "title" : "Why is allInterceptors not resolved in ApiClient.mustache when using openapi-generator-maven-plugin?",
    "body" : "<p><strong>Question:</strong>\nI'm trying to customize the ApiClient class generated by the OpenAPI Generator to include a custom interceptor. I want to update the initHttpClient method so that it includes my interceptor class.</p>\n<p><strong>Expected Output:</strong></p>\n<pre><code>private void initHttpClient() {\n    List&lt;Interceptor&gt; interceptors = new ArrayList&lt;&gt;();\n    interceptors.add(new derrick.com.app.interceptor.TestLoggingInterceptor());\n    initHttpClient(interceptors);\n}\n</code></pre>\n<p><strong>Actual Output:</strong></p>\n<pre><code>private void initHttpClient() {\n    List&lt;Interceptor&gt; interceptors = new ArrayList&lt;&gt;();\n    interceptors.add(new ()); // The interceptor package and class name is missing\n    initHttpClient(interceptors);\n}\n</code></pre>\n<p><strong>Plugin Configuration in pom.xml:</strong></p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;6.6.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;output&gt;${project.build.directory}/generated-sources/openapi&lt;/output&gt;\n        &lt;modelPackage&gt;za.co.nedbank.groupplatform.generated.model&lt;/modelPackage&gt;\n        &lt;generateApiTests&gt;false&lt;/generateApiTests&gt;\n        &lt;generateModelTests&gt;false&lt;/generateModelTests&gt;\n        &lt;configOptions&gt;\n            &lt;java17&gt;true&lt;/java17&gt;\n            &lt;jakarta&gt;true&lt;/jakarta&gt;\n            &lt;useJakartaEe&gt;true&lt;/useJakartaEe&gt;\n            &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n            &lt;hideGenerationTimestamp&gt;true&lt;/hideGenerationTimestamp&gt;\n            &lt;serializationLibrary&gt;gson&lt;/serializationLibrary&gt;\n            &lt;useBeanValidation&gt;true&lt;/useBeanValidation&gt;\n        &lt;/configOptions&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;generate-groupcore-clients&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;inputSpec&gt;${project.basedir}/src/main/resources/swagger/Test_Swagger_v1_1235.yaml&lt;/inputSpec&gt;\n                &lt;generatorName&gt;java&lt;/generatorName&gt;\n                &lt;library&gt;okhttp-gson&lt;/library&gt;\n                &lt;apiPackage&gt;derrick.com.app.generated.groupcore.client.api&lt;/apiPackage&gt;\n                &lt;invokerPackage&gt;derrick.com.app.generated.groupcore.client&lt;/invokerPackage&gt;\n                &lt;apiNameSuffix&gt;Client&lt;/apiNameSuffix&gt;\n                &lt;templateDirectory&gt;${project.basedir}/src/main/resources/openapi-templates&lt;/templateDirectory&gt;\n                &lt;additionalProperties&gt;\n                    &lt;allInterceptors&gt;derrick.com.app.interceptor.TestLoggingInterceptor&lt;/allInterceptors&gt;\n                &lt;/additionalProperties&gt;\n                &lt;configOptions&gt;\n                    &lt;useRuntimeException&gt;true&lt;/useRuntimeException&gt;\n                &lt;/configOptions&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p><strong>Interceptor Class:</strong></p>\n<pre><code>package derrick.com.app.interceptor;\n\nimport lombok.extern.slf4j.Slf4j;\nimport okhttp3.Interceptor;\nimport okhttp3.Response;\nimport java.io.IOException;\n\n@Slf4j\npublic class TestLoggingInterceptor implements Interceptor {\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        log.info(&quot;Intercepting request: {}&quot;, chain.request().url());\n        Response response = chain.proceed(chain.request());\n        log.info(&quot;Received response for {}: {}&quot;, chain.request().url(), response.code());\n        return response;\n    }\n}\n</code></pre>\n<p><strong>ApiClient.mustache Template Snippet: the template is copied but the below is just snippet</strong></p>\n<pre><code> private void initHttpClient() {\n        List&lt;Interceptor&gt; interceptors = new ArrayList&lt;&gt;();\n        {{#allInterceptors}}\n        interceptors.add(new {{.}}());\n        {{/allInterceptors}}\n        {{^allInterceptors}}\n            {{#allInterceptor}}\n            interceptors.add(new {{{allInterceptor}}}());\n            {{/allInterceptor}}\n        {{/allInterceptors}}\n        initHttpClient(interceptors);\n    }\n</code></pre>\n<p><strong>Problem:</strong>\nDespite specifying allInterceptors in additionalProperties, the generated code does not resolve the class name and package correctly. Instead, it outputs new ().</p>\n<p><strong>Question:</strong>\nWhy is allInterceptors not being resolved in the mustache template?\nIs there a specific way to pass and access custom additionalProperties in the template?\nHow can I ensure that the interceptor class is correctly injected into the generated ApiClient?</p>\n",
    "tags" : [ "java", "spring", "spring-boot" ],
    "owner" : {
      "account_id" : 4077092,
      "reputation" : 11,
      "user_id" : 3348476,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9bc32777f34c411fd673c6ea972614c5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Deza",
      "link" : "https://stackoverflow.com/users/3348476/deza"
    },
    "is_answered" : false,
    "view_count" : 46,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1752536252,
    "creation_date" : 1752536252,
    "link" : "https://stackoverflow.com/questions/79701428/why-is-allinterceptors-not-resolved-in-apiclient-mustache-when-using-openapi-gen",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}