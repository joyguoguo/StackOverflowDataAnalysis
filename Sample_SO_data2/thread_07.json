{
  "question" : {
    "question_id" : 79847533,
    "title" : "Selecting ComboBox item in TestFX test",
    "body" : "<p>How do you select a <code>ComboBox</code> item, presumably using <code>FxRobot</code>?</p>\n<p>I want to select the item &quot;like a real user&quot; (not programmatically) without getting coupled to the items' string representation (the combo's items are custom objects, not strings). I have a reference to the item I want to select.</p>\n<p><a href=\"https://web.archive.org/web/20120201020550/http://fest.easytesting.org/\" rel=\"nofollow noreferrer\">FEST</a> / <a href=\"https://github.com/assertj/assertj-swing\" rel=\"nofollow noreferrer\">AssertJ Swing</a> has &quot;fixture&quot; classes for that. TestFX apparently doesn't have those.</p>\n<p>The library's <a href=\"https://github.com/TestFX/TestFX\" rel=\"nofollow noreferrer\">README</a> is concise, doesn't provide details on the matter.</p>\n<p>Java 8.</p>\n",
    "tags" : [ "java", "javafx", "javafx-8", "testfx" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : false,
    "view_count" : 41,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1765799373,
    "creation_date" : 1765789427,
    "link" : "https://stackoverflow.com/questions/79847533/selecting-combobox-item-in-testfx-test",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79847534,
    "question_id" : 79847533,
    "body" : "<p>I came up with three working solutions.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.geometry.Pos;\nimport javafx.scene.Node;\nimport javafx.scene.Scene;\nimport javafx.scene.control.ComboBox;\nimport javafx.scene.control.ListCell;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport org.hamcrest.Matcher;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.testfx.api.FxRobot;\nimport org.testfx.framework.junit5.ApplicationExtension;\nimport org.testfx.framework.junit5.Start;\nimport org.testfx.matcher.base.GeneralMatchers;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.function.Predicate;\n\n@ExtendWith(ApplicationExtension.class)\nclass FXComboBoxDemoTest {\n\n    ComboBox&lt;Person&gt; peopleCombo;\n\n    @Start\n    void itemSelectionTest(Stage stage) {\n        VBox root = new VBox();\n        root.alignmentProperty().set(Pos.CENTER);\n        peopleCombo = new ComboBox&lt;&gt;();\n        peopleCombo.setId(&quot;people-combo&quot;);\n        root.getChildren().add(peopleCombo);\n        stage.setScene(new Scene(root));\n        stage.show();\n    }\n\n    @Test\n    void selectJoshTest(FxRobot robot) {\n        Person alice = new Person(&quot;Alice&quot;);\n        Person josh = new Person(&quot;Josh&quot;);\n        List&lt;Person&gt; people = Arrays.asList(alice, josh);\n        people.forEach(peopleCombo.getItems()::add);\n\n        robot.clickOn(&quot;#people-combo&quot;);\n        // solution #1\n        ListCell&lt;?&gt; targetCell = robot.lookup(&quot;.list-cell&quot;)\n                .match(contains(josh))\n                .query();\n        // solution #2\n//        ListCell&lt;?&gt; targetCell = robot.lookup(&quot;.list-cell&quot;)\n//                .match(cellContains(josh))\n//                .query();\n        // solution #3\n//        ListCell&lt;?&gt; targetCell = robot.lookup(&quot;.list-cell&quot;)\n//                .match(nodeIsCellContaining(josh))\n//                .query();\n        robot.clickOn(targetCell);\n    }\n\n    private static Predicate&lt;ListCell&lt;?&gt;&gt; contains(Object item) {\n        return cell -&gt; item.equals(cell.getItem());\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    private static Matcher&lt;ListCell&lt;?&gt;&gt; cellContains(Person josh) {\n        return GeneralMatchers.typeSafeMatcher(ListCell.class, null, cell -&gt; josh.equals(cell.getItem()));\n    }\n\n    private static Matcher&lt;Node&gt; nodeIsCellContaining(Person josh) {\n        Predicate&lt;Node&gt; isCell = ListCell.class::isInstance;\n        Predicate&lt;Node&gt; containsJosh = n -&gt; josh.equals(((ListCell&lt;?&gt;) n).getItem());\n        return GeneralMatchers.baseMatcher(null, isCell.and(containsJosh));\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n\n    private final String name;\n\n    public Person(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String toString() {\n        return getName();\n    }\n}\n</code></pre>\n<p>I'm not sure, though, which one (if any) represents what the library's creators had in mind for such cases.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1765789530,
    "last_activity_date" : 1765789530,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140904021,
    "post_id" : 79847533,
    "body" : "@Abra yeah, basically. Your AssertJ and FEST references are a bit off, but they are irrelevant anyway. The question is about TestFX. The <code>FxRobot</code> reference is accurate",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1765799206,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140903916,
    "post_id" : 79847533,
    "body" : "Are you referring to this <a href=\"https://joel-costigliola.github.io/assertj/index.html\" rel=\"nofollow noreferrer\">AssertJ</a> and this <a href=\"https://mvnrepository.com/artifact/org.easytesting/fest-assert\" rel=\"nofollow noreferrer\">FEST</a> and this <a href=\"https://testfx.github.io/TestFX/docs/javadoc/testfx-core/javadoc/org.testfx/org/testfx/api/FxRobot.html\" rel=\"nofollow noreferrer\">FxRobot</a>?",
    "score" : 0,
    "owner" : {
      "account_id" : 2485939,
      "reputation" : 20969,
      "user_id" : 2164365,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/RKSgV.png?s=256",
      "display_name" : "Abra",
      "link" : "https://stackoverflow.com/users/2164365/abra"
    },
    "creation_date" : 1765794559,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79847534" : [ {
      "comment_id" : 140904437,
      "post_id" : 79847534,
      "body" : "What is your test case actually testing here? From the code, you appear to be testing that selection in the combo box works correctly. That is, you are testing if the library code for the combo box is working; you are not testing your own code in any sense. Surely that is the responsibility of the library?",
      "score" : 0,
      "owner" : {
        "account_id" : 2518243,
        "reputation" : 210916,
        "user_id" : 2189127,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
        "display_name" : "James_D",
        "link" : "https://stackoverflow.com/users/2189127/james-d"
      },
      "creation_date" : 1765816846,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}