{
  "question" : {
    "question_id" : 79669103,
    "title" : "&quot;/config-dirs/ch.qos.logback/logback-classic/1.4.9&quot;: not found Micronaut native docker image build with micronuat",
    "body" : "<pre><code>plugins {\n    id(&quot;io.micronaut.application&quot;) version &quot;4.5.3&quot;\n    id(&quot;com.gradleup.shadow&quot;) version &quot;8.3.6&quot;\n    id(&quot;io.micronaut.aot&quot;) version &quot;4.5.3&quot;\n}\n\nversion = &quot;0.1&quot;\ngroup = &quot;com.example&quot;\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    annotationProcessor(&quot;io.micronaut:micronaut-http-validation&quot;)\n    annotationProcessor(&quot;io.micronaut.serde:micronaut-serde-processor&quot;)\n    implementation(&quot;io.micronaut.serde:micronaut-serde-jackson&quot;)\n    compileOnly(&quot;io.micronaut:micronaut-http-client&quot;)\n    runtimeOnly(&quot;ch.qos.logback:logback-classic&quot;)\n    testImplementation(&quot;io.micronaut:micronaut-http-client&quot;)\n}\n\n\napplication {\n    mainClass = &quot;com.example.Application&quot;\n}\njava {\n    sourceCompatibility = JavaVersion.toVersion(&quot;21&quot;)\n    targetCompatibility = JavaVersion.toVersion(&quot;21&quot;)\n}\n\n\ngraalvmNative.toolchainDetection = true\n\nmicronaut {\n    runtime(&quot;netty&quot;)\n    testRuntime(&quot;junit5&quot;)\n    processing {\n        incremental(true)\n        annotations(&quot;com.example.*&quot;)\n    }\n    aot {\n        // Please review carefully the optimizations enabled below\n        // Check https://micronaut-projects.github.io/micronaut-aot/latest/guide/ for more details\n        optimizeServiceLoading = true\n        convertYamlToJava = true\n        precomputeOperations = true\n        cacheEnvironment = true\n        optimizeClassLoading = true\n        deduceEnvironment = true\n        optimizeNetty = true\n        replaceLogbackXml = true\n    }\n}\n\n\ntasks.named&lt;io.micronaut.gradle.docker.NativeImageDockerfile&gt;(&quot;dockerfileNative&quot;) {\n    jdkVersion = &quot;21&quot;\n}\n</code></pre>\n<p>Now I am doing native compilation using GraalVm with micronaut gradle plugin in Intellj</p>\n<p>Since I have done multiple times the nativeCompile, here is the output</p>\n<pre><code>10:42:04 pm: Executing 'nativeCompile'…\n\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :classes UP-TO-DATE\n&gt; Task :jar UP-TO-DATE\n&gt; Task :generateResourcesConfigFile UP-TO-DATE\n&gt; Task :nativeCompile UP-TO-DATE\n\nBUILD SUCCESSFUL in 174ms\n5 actionable tasks: 5 up-to-date\n10:42:04 pm: Execution finished 'nativeCompile'.\n</code></pre>\n<p>Then I am generative the docker image using dockerfileNative</p>\n<pre><code>10:43:57 pm: Executing 'dockerfileNative'…\n\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :classes UP-TO-DATE\n&gt; Task :jar UP-TO-DATE\n&gt; Task :generateResourcesConfigFile UP-TO-DATE\n&gt; Task :dockerfileNative UP-TO-DATE\n\nBUILD SUCCESSFUL in 149ms\n5 actionable tasks: 5 up-to-date\n10:43:57 pm: Execution finished 'dockerfileNative'.\n</code></pre>\n<p><strong>Generated Docker File</strong></p>\n<pre><code>FROM ghcr.io/graalvm/native-image-community:21-ol9 AS graalvm\nWORKDIR /home/app\nCOPY --link layers/libs /home/app/libs\nCOPY --link layers/app /home/app/\nCOPY --link layers/resources /home/app/resources\nRUN mkdir /home/app/config-dirs\nRUN mkdir -p /home/app/config-dirs/generateResourcesConfigFile\nRUN mkdir -p /home/app/config-dirs/io.netty/netty-common/4.1.115.Final\nRUN mkdir -p /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final\nRUN mkdir -p /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9\nCOPY --link config-dirs/generateResourcesConfigFile /home/app/config-dirs/generateResourcesConfigFile\nCOPY --link config-dirs/io.netty/netty-common/4.1.115.Final /home/app/config-dirs/io.netty/netty-common/4.1.115.Final\nCOPY --link config-dirs/io.netty/netty-transport/4.1.115.Final /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final\nCOPY --link config-dirs/ch.qos.logback/logback-classic/1.4.9 /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9\nRUN native-image --exclude-config .*/libs/netty-buffer-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-common-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-transport-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http2-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-handler-4.1.119.Final.jar ^/META-INF/native-image/.* -cp /home/app/libs/*.jar:/home/app/resources:/home/app/application.jar --no-fallback -o application -H:ConfigurationFileDirectories=/home/app/config-dirs/generateResourcesConfigFile,/home/app/config-dirs/io.netty/netty-codec-http/4.1.80.Final,/home/app/config-dirs/io.netty/netty-common/4.1.115.Final,/home/app/config-dirs/io.netty/netty-buffer/4.1.80.Final,/home/app/config-dirs/io.netty/netty-transport/4.1.115.Final,/home/app/config-dirs/io.netty/netty-handler/4.1.80.Final,/home/app/config-dirs/io.netty/netty-codec-http2/4.1.80.Final,/home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9 com.example.Application\nFROM cgr.dev/chainguard/wolfi-base:latest\nEXPOSE 8080\nCOPY --link --from=graalvm /home/app/application /app/application\nENTRYPOINT [&quot;/app/application&quot;]\n</code></pre>\n<p>Now when I am trying to build this docker image <code>docker buildx build -f DockerfileNative -t micronaut-native:0.1 .</code></p>\n<pre><code>docker buildx build -f DockerfileNative -t micronaut-native:0.1 .\n[+] Building 3.1s (20/22)                                                                                                                                    docker:desktop-linux\n =&gt; [internal] load build definition from DockerfileNative                                                                                                                   0.0s\n =&gt; =&gt; transferring dockerfile: 2.36kB                                                                                                                                       0.0s\n =&gt; [internal] load metadata for cgr.dev/chainguard/wolfi-base:latest                                                                                                        2.4s\n =&gt; [internal] load metadata for ghcr.io/graalvm/native-image-community:21-ol9                                                                                               3.0s\n =&gt; [internal] load .dockerignore                                                                                                                                            0.0s\n =&gt; =&gt; transferring context: 2B                                                                                                                                              0.0s\n =&gt; CANCELED [graalvm  1/15] FROM ghcr.io/graalvm/native-image-community:21-ol9@sha256:faed0fd6809b138254bdd6c7046e56894f4d9566ecbc7b0952aab43e65e16e0e                      0.0s\n =&gt; =&gt; resolve ghcr.io/graalvm/native-image-community:21-ol9@sha256:faed0fd6809b138254bdd6c7046e56894f4d9566ecbc7b0952aab43e65e16e0e                                         0.0s\n =&gt; =&gt; sha256:faed0fd6809b138254bdd6c7046e56894f4d9566ecbc7b0952aab43e65e16e0e 741B / 741B                                                                                   0.0s\n =&gt; =&gt; sha256:f4a7e898503a75b97e9ba21219fcb60819bfecf7e41d0b1ca2778ae3856f64ec 948B / 948B                                                                                   0.0s\n =&gt; =&gt; sha256:a7ef0a956932c3a1d3089cb425f491a66da1949e779a304de16c062587321698 4.18kB / 4.18kB                                                                               0.0s\n =&gt; CANCELED [stage-1 1/2] FROM cgr.dev/chainguard/wolfi-base:latest@sha256:0cac3831501d73b388a1bd0e8ef7f26f07aa0c5d6117b1d15af517a91a1f894b                                 0.0s\n =&gt; =&gt; resolve cgr.dev/chainguard/wolfi-base:latest@sha256:0cac3831501d73b388a1bd0e8ef7f26f07aa0c5d6117b1d15af517a91a1f894b                                                  0.0s\n =&gt; =&gt; sha256:a26fb4478d6eac7518b5883d234c8c015a93504f8b325884b5f7cee4516729db 2.37kB / 2.37kB                                                                               0.0s\n =&gt; =&gt; sha256:5a9592482544af794aa1371cc300f6e4acf13364bb65980b7a878bc36f79e157 2.41kB / 2.41kB                                                                               0.0s\n =&gt; =&gt; sha256:0cac3831501d73b388a1bd0e8ef7f26f07aa0c5d6117b1d15af517a91a1f894b 935B / 935B                                                                                   0.0s\n =&gt; [internal] load build context                                                                                                                                            0.0s\n =&gt; =&gt; transferring context: 2B                                                                                                                                              0.0s\n =&gt; CACHED [graalvm  2/15] WORKDIR /home/app                                                                                                                                 0.0s\n =&gt; ERROR [graalvm  3/15] COPY --link layers/libs /home/app/libs                                                                                                             0.0s\n =&gt; ERROR [graalvm  4/15] COPY --link layers/app /home/app/                                                                                                                  0.0s\n =&gt; ERROR [graalvm  5/15] COPY --link layers/resources /home/app/resources                                                                                                   0.0s\n =&gt; CACHED [graalvm  6/15] RUN mkdir /home/app/config-dirs                                                                                                                   0.0s\n =&gt; CACHED [graalvm  7/15] RUN mkdir -p /home/app/config-dirs/generateResourcesConfigFile                                                                                    0.0s\n =&gt; CACHED [graalvm  8/15] RUN mkdir -p /home/app/config-dirs/io.netty/netty-common/4.1.115.Final                                                                            0.0s\n =&gt; CACHED [graalvm  9/15] RUN mkdir -p /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final                                                                         0.0s\n =&gt; CACHED [graalvm 10/15] RUN mkdir -p /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9                                                                           0.0s\n =&gt; ERROR [graalvm 11/15] COPY --link config-dirs/generateResourcesConfigFile /home/app/config-dirs/generateResourcesConfigFile                                              0.0s\n =&gt; ERROR [graalvm 12/15] COPY --link config-dirs/io.netty/netty-common/4.1.115.Final /home/app/config-dirs/io.netty/netty-common/4.1.115.Final                              0.0s\n =&gt; ERROR [graalvm 13/15] COPY --link config-dirs/io.netty/netty-transport/4.1.115.Final /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final                        0.0s\n =&gt; ERROR [graalvm 14/15] COPY --link config-dirs/ch.qos.logback/logback-classic/1.4.9 /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9                            0.0s\n------\n &gt; [graalvm  3/15] COPY --link layers/libs /home/app/libs:\n------\n------\n &gt; [graalvm  4/15] COPY --link layers/app /home/app/:\n------\n------\n &gt; [graalvm  5/15] COPY --link layers/resources /home/app/resources:\n------\n------\n &gt; [graalvm 11/15] COPY --link config-dirs/generateResourcesConfigFile /home/app/config-dirs/generateResourcesConfigFile:\n------\n------\n &gt; [graalvm 12/15] COPY --link config-dirs/io.netty/netty-common/4.1.115.Final /home/app/config-dirs/io.netty/netty-common/4.1.115.Final:\n------\n------\n &gt; [graalvm 13/15] COPY --link config-dirs/io.netty/netty-transport/4.1.115.Final /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final:\n------\n------\n &gt; [graalvm 14/15] COPY --link config-dirs/ch.qos.logback/logback-classic/1.4.9 /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9:\n------\nDockerfileNative:14\n--------------------\n  12 |     COPY --link config-dirs/io.netty/netty-common/4.1.115.Final /home/app/config-dirs/io.netty/netty-common/4.1.115.Final\n  13 |     COPY --link config-dirs/io.netty/netty-transport/4.1.115.Final /home/app/config-dirs/io.netty/netty-transport/4.1.115.Final\n  14 | &gt;&gt;&gt; COPY --link config-dirs/ch.qos.logback/logback-classic/1.4.9 /home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9\n  15 |     RUN native-image --exclude-config .*/libs/netty-buffer-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-common-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-transport-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-codec-http2-4.1.119.Final.jar ^/META-INF/native-image/.* --exclude-config .*/libs/netty-handler-4.1.119.Final.jar ^/META-INF/native-image/.* -cp /home/app/libs/*.jar:/home/app/resources:/home/app/application.jar --no-fallback -o application -H:ConfigurationFileDirectories=/home/app/config-dirs/generateResourcesConfigFile,/home/app/config-dirs/io.netty/netty-codec-http/4.1.80.Final,/home/app/config-dirs/io.netty/netty-common/4.1.115.Final,/home/app/config-dirs/io.netty/netty-buffer/4.1.80.Final,/home/app/config-dirs/io.netty/netty-transport/4.1.115.Final,/home/app/config-dirs/io.netty/netty-handler/4.1.80.Final,/home/app/config-dirs/io.netty/netty-codec-http2/4.1.80.Final,/home/app/config-dirs/ch.qos.logback/logback-classic/1.4.9 com.example.Application\n  16 |     FROM cgr.dev/chainguard/wolfi-base:latest\n--------------------\nERROR: failed to solve: failed to compute cache key: failed to calculate checksum of ref 0d63c85b-567a-4d10-a2af-1ff4815eafd9::f02iyzdzacza50tu7qa1qgf5l: &quot;/config-dirs/ch.qos.logback/logback-classic/1.4.9&quot;: not found\n</code></pre>\n",
    "tags" : [ "java", "micronaut", "graalvm", "graalvm-native-image" ],
    "owner" : {
      "account_id" : 1189122,
      "reputation" : 17456,
      "user_id" : 1162409,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/YSzYR.jpg?s=256",
      "display_name" : "San Jaisy",
      "link" : "https://stackoverflow.com/users/1162409/san-jaisy"
    },
    "is_answered" : false,
    "view_count" : 43,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1750326091,
    "creation_date" : 1750164541,
    "link" : "https://stackoverflow.com/questions/79669103/config-dirs-ch-qos-logback-logback-classic-1-4-9-not-found-micronaut-native",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79670451,
    "question_id" : 79669103,
    "body" : "<p>Debugging steps</p>\n<pre><code>./gradlew dockerBuildNative --dry-run\n:compileJava SKIPPED \n:processResources SKIPPED \n:classes SKIPPED \n:runnerJar SKIPPED \n:buildNativeLayersTask SKIPPED \n:jar SKIPPED :generateResourcesConfigFile SKIPPED \n:dockerfileNative SKIPPED \n:dockerPrepareContext SKIPPED \n:dockerBuildNative SKIPPED\n</code></pre>\n<p>Well I was missing few steps</p>\n<ol>\n<li><p>Step 1 - <code>./gradlew clean</code></p>\n</li>\n<li><p>Step 2 - <code>./gradlew build</code></p>\n</li>\n<li><p>Step 3 - <code>./gradlew nativeCompile</code></p>\n</li>\n<li><p>Step 4 - <code>./gradlew buildNativelayersTask</code></p>\n</li>\n<li><p>Step 5 - <code>./gradlew dockerPrepareContext</code></p>\n</li>\n<li><p>Step 6 - <code>./gradlew dockerfileNative</code></p>\n</li>\n</ol>\n<p><code>docker buildx build -f DockerfileNative -t micronuat-0.2 .</code></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1189122,
      "reputation" : 17456,
      "user_id" : 1162409,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/YSzYR.jpg?s=256",
      "display_name" : "San Jaisy",
      "link" : "https://stackoverflow.com/users/1162409/san-jaisy"
    },
    "creation_date" : 1750242416,
    "last_activity_date" : 1750326091,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}