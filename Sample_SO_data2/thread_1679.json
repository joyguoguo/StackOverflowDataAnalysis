{
  "question" : {
    "question_id" : 79688452,
    "title" : "Making FEST ComponentFinder not throw if there&#39;s no match on find() call",
    "body" : "<p>How can I make <code>ComponentFinder</code> not throw if no match is found (<code>finder.find()</code>)?</p>\n<p>I am writing a simple wrapper around <code>ComponentFinder</code> to make writing GUI tests easier. I want it to, among other things, return <code>Optional</code>s if one component is requested but none is found. I could make the delegate <code>ComponentFinder</code> invoke <code>findAll()</code> and then return an <code>Optional</code> of the first element or <code>Optional.empty()</code> if the collection is empty. However, it would make the method less efficient as the delegate would traverse the entire component hierarchy even if only one match is desired.</p>\n<p><code>catch</code>ing <code>ComponentLookupException</code>s feels wrong (as any <code>try/catch</code> involving <code>RuntimeException</code>s)</p>\n<p>Java 8.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.fest.swing.core.BasicComponentFinder;\nimport org.fest.swing.core.ComponentFinder;\nimport org.fest.swing.core.GenericTypeMatcher;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\n\nimport static org.junit.jupiter.api.Assertions.assertNull;\n\npublic class ComponentFinderTest {\n\n    ComponentFinder finder;\n\n    @BeforeEach\n    void setUp() {\n        finder = BasicComponentFinder.finderWithCurrentAwtHierarchy();\n    }\n\n    @Test\n    public void testFind() throws Exception {\n        JPanel panel = new JPanel();\n        // throws org.fest.swing.exception.ComponentLookupException\n        JLabel label = finder.find(panel, new GenericTypeMatcher&lt;JLabel&gt;(JLabel.class, false) {\n            @Override\n            protected boolean isMatching(JLabel component) {\n                return true;\n            }\n        });\n        assertNull(label);\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "swing", "fest" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : true,
    "view_count" : 46,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1751533685,
    "creation_date" : 1751528008,
    "link" : "https://stackoverflow.com/questions/79688452/making-fest-componentfinder-not-throw-if-theres-no-match-on-find-call",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79688578,
    "question_id" : 79688452,
    "body" : "<p>You can write a wrapper (decorator) for a given class and change its behavior on return values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ComponentFinderWrapper {\n  public static ComponentFinderWrapper finderWithCurrentAwtHierarchy() {\n    var finder = BasicComponentFinder.finderWithCurrentAwtHierarchy();\n    return new ComponentFinderWrapper(finder);\n  }\n\n  public final ComponentFinder componentFinder;\n\n  public ComponentFinderWrapper(ComponentFinder componentFinder) {\n    this.componentFinder = componentFinder;\n  }\n\n  public Optional&lt;JComponent&gt; find(Container root, ComponentMatcher m) {\n    try {\n      return Optional.of((JComponent) componentFinder.find(root, m));\n    } catch (ComponentLookupException e) {\n      return Optional.empty();\n    }\n  }\n}\n</code></pre>\n<p>Test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.assertj.core.api.Assertions.assertThat;\n\nclass SanityTest {\n  @Test\n  void shouldFindEmptyOptional() {\n    ComponentFinderWrapper finder = ComponentFinderWrapper.finderWithCurrentAwtHierarchy();\n\n    Optional&lt;JComponent&gt; component = finder.find(new JPanel(), new GenericTypeMatcher&lt;&gt;(JLabel.class, false) {\n      @Override\n      protected boolean isMatching(JLabel component) {\n        return true;\n      }\n    });\n\n    assertThat(component).isEmpty();\n  }\n}\n</code></pre>\n<p>Main benefit: with decorator you can change any method behavior you like, even if the given original class is <code>final</code> etc.</p>\n<p>Main drawback: you need to write a wrapper method in <code>ComponentFinderWrapper</code> for each method you need to work with.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 40864244,
      "reputation" : 632,
      "user_id" : 30001713,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f59ea01a76709335047f0cee269d788e?s=256&d=identicon&r=PG",
      "display_name" : "biggujo",
      "link" : "https://stackoverflow.com/users/30001713/biggujo"
    },
    "creation_date" : 1751533685,
    "last_activity_date" : 1751533685,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140561185,
    "post_id" : 79688452,
    "body" : "@biggujo I would need to write a lot. Its <code>delegate</code> is private, for instance",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1751530965,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140561102,
    "post_id" : 79688452,
    "body" : "Try writing a child class from ComponentFinder that overrides the behavior of find() method, so you can use CustomComponentFinder with the desired actions.",
    "score" : 0,
    "owner" : {
      "account_id" : 40864244,
      "reputation" : 632,
      "user_id" : 30001713,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f59ea01a76709335047f0cee269d788e?s=256&d=identicon&r=PG",
      "display_name" : "biggujo",
      "link" : "https://stackoverflow.com/users/30001713/biggujo"
    },
    "creation_date" : 1751529121,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140561095,
    "post_id" : 79688452,
    "body" : "<code>org.fest.swing.core.BasicComponentFinder#find(org.fest.swing&zwnj;&#8203;.hierarchy.Component&zwnj;&#8203;Hierarchy, org.fest.swing.core.ComponentMatcher)</code> collects a <code>Collection</code> anyway, so my suggestion that <code>findAll()</code> would be costlier may not hold true after all",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1751529023,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}