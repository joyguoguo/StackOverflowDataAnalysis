{
  "question" : {
    "question_id" : 79632152,
    "title" : "How can I fix my loading Animation in JavaFX?",
    "body" : "<p>How can I fix my loading Animation in Java FX that goes up to a certain point but then suddenly refreshes mid-way. Below is my code:</p>\n<pre><code>package com.example.messengerappfx.util;\n\nimport javafx.animation.AnimationTimer;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\n\npublic class LoadingAnimation {\n\n    private final HBox container = new HBox(5);\n    private final Circle[] dots = new Circle[3];\n    private AnimationTimer timer;\n    private long animationDuration;\n    private long pauseDuration;\n    private double amplitude = 10;\n    private long startTime;\n\n    public LoadingAnimation(long animationDuration, long pauseDuration) {\n        this.animationDuration = animationDuration;\n        this.pauseDuration = pauseDuration;\n\n        initializeDots();\n        createAnimationTimer();\n    }\n\n    private void initializeDots() {\n        for (int i = 0; i &lt; dots.length; i++) {\n            Circle dot = new Circle(4, Color.LIGHTGRAY);\n            dots[i] = dot;\n            container.getChildren().add(dot);\n        }\n    }\n\n    private void createAnimationTimer() {\n        timer = new AnimationTimer() {\n            @Override\n            public void handle(long now) {\n                if (startTime == 0) startTime = System.nanoTime();\n\n                long elapsed = (now - startTime) / 1_000_000;\n                long totalCycleDuration = animationDuration + pauseDuration;\n                long currentCycleTime = elapsed % totalCycleDuration;\n\n                animateDots(currentCycleTime);\n            }\n        };\n    }\n\n    private void animateDots(long currentCycleTime) {\n        if (currentCycleTime &lt; animationDuration) {\n            for (int i = 0; i &lt; dots.length; i++) {\n                double delay = i * (animationDuration / 3.0);\n                double phase = Math.max(0, Math.min(1, (currentCycleTime - delay) / (double)animationDuration));\n                dots[i].setTranslateY(-amplitude * Math.sin(phase * Math.PI));\n            }\n        } else {\n            resetDots();\n        }\n    }\n\n    private void resetDots() {\n        for (Circle dot : dots) {\n            dot.setTranslateY(0);\n        }\n    }\n\n    public void start() {\n        startTime = 0;\n        timer.start();\n    }\n\n    public void stop() {\n        timer.stop();\n    }\n\n    public HBox getNode() {\n        return container;\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "animation", "javafx" ],
    "owner" : {
      "account_id" : 38270054,
      "reputation" : 11,
      "user_id" : 28686133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2d0b18dda7ff8b68a9854af04b5b4e22?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Tim Weiss",
      "link" : "https://stackoverflow.com/users/28686133/tim-weiss"
    },
    "is_answered" : true,
    "view_count" : 76,
    "closed_date" : 1747929328,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1747926555,
    "creation_date" : 1747835953,
    "link" : "https://stackoverflow.com/questions/79632152/how-can-i-fix-my-loading-animation-in-javafx",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79632420,
    "question_id" : 79632152,
    "body" : "<p>Here is a sample that you can play with to get the exact behaviour that you like. It uses TranslateTransitions and a ParallelTransition to move Circles.</p>\n<p>LoadingAnimation.java</p>\n<pre><code>import javafx.animation.ParallelTransition;\nimport javafx.animation.TranslateTransition;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.shape.Circle;\nimport javafx.util.Duration;\n\npublic class LoadingAnimation {\n\n    private final HBox container = new HBox(5);\n    private final Circle[] dots = new Circle[3];\n    ParallelTransition parallelTransition = new ParallelTransition();\n\n    public LoadingAnimation(int numberOfCircles, Long speed, int cycleCount)\n    {\n        for(int i = 0; i &lt; numberOfCircles; i++)\n        {\n            Circle circle = new Circle(10, Color.BLUE);\n            container.getChildren().add(circle);\n\n            TranslateTransition translateTransition = new TranslateTransition(Duration.millis(speed), circle );\n            translateTransition.setFromY(0);\n            translateTransition.setToY(-25);\n            translateTransition.setCycleCount(cycleCount);\n            translateTransition.setAutoReverse(true);\n            translateTransition.setDelay(Duration.millis(500 * i));\n\n            parallelTransition.getChildren().add(translateTransition);\n        }        \n    }\n\n    \n\n    \n    \n\n    private void resetDots() {\n        for (Circle dot : dots) {\n            dot.setTranslateY(0);\n        }\n    }\n\n    public void start() {\n        parallelTransition.playFromStart();\n    }\n\n    public void stop() {\n        parallelTransition.stop();\n    }\n\n    public HBox getNode() {\n        return container;\n    }\n}\n</code></pre>\n<p>Main.java</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport javafx.animation.Timeline;\nimport javafx.application.Application;\nimport javafx.scene.Scene;\nimport javafx.scene.layout.StackPane;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\npublic class App extends Application {\n\n    @Override\n    public void start(Stage stage) \n    {   \n        List&lt;LoadingAnimation&gt; loadingAnimationList = new ArrayList();        \n        loadingAnimationList.add(new LoadingAnimation(3, 500L, Timeline.INDEFINITE));\n        loadingAnimationList.add(new LoadingAnimation(4, 500L, 3));\n        loadingAnimationList.add(new LoadingAnimation(3, 1000L, Timeline.INDEFINITE));\n        loadingAnimationList.add(new LoadingAnimation(4, 1000L, 4));\n        loadingAnimationList.add(new LoadingAnimation(3, 2000L, Timeline.INDEFINITE));\n        loadingAnimationList.add(new LoadingAnimation(4, 2000L, 5));\n        \n        VBox vBox = new VBox(50);\n        loadingAnimationList.forEach((t) -&gt; {vBox.getChildren().add(t.getNode());});\n        \n        \n        StackPane root = new StackPane(vBox);\n        Scene scene = new Scene(root);  \n        stage.setWidth(500);\n        stage.setHeight(500);\n        stage.setScene(scene);\n        stage.show();\n        \n        loadingAnimationList.forEach((t) -&gt; {\n            t.start();\n        });\n    }\n\n    public static void main(String[] args)\n    {\n        launch(args);\n    }\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1747845514,
    "last_activity_date" : 1747845514,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79633766,
    "question_id" : 79632152,
    "body" : "<p>Only one half of the wave was shown. I just multiplied the time here:</p>\n<pre><code>if (currentCycleTime &lt; animationDuration * 2) {\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 38270054,
      "reputation" : 11,
      "user_id" : 28686133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2d0b18dda7ff8b68a9854af04b5b4e22?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Tim Weiss",
      "link" : "https://stackoverflow.com/users/28686133/tim-weiss"
    },
    "creation_date" : 1747917644,
    "last_activity_date" : 1747926555,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140446899,
    "post_id" : 79632152,
    "body" : "I found my mistake: i only displayed one half of the wave i doubled in l50 animation duration and now a full wave is shown thank you for your ideas !",
    "score" : 1,
    "owner" : {
      "account_id" : 38270054,
      "reputation" : 11,
      "user_id" : 28686133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2d0b18dda7ff8b68a9854af04b5b4e22?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Tim Weiss",
      "link" : "https://stackoverflow.com/users/28686133/tim-weiss"
    },
    "creation_date" : 1747849605,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140446894,
    "post_id" : 79632152,
    "body" : "Because otherwise they get stuck mid animation for 1 secound and then the animation moves on",
    "score" : 0,
    "owner" : {
      "account_id" : 38270054,
      "reputation" : 11,
      "user_id" : 28686133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2d0b18dda7ff8b68a9854af04b5b4e22?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Tim Weiss",
      "link" : "https://stackoverflow.com/users/28686133/tim-weiss"
    },
    "creation_date" : 1747849476,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140446583,
    "post_id" : 79632152,
    "body" : "Why are you resetting the dots if you don&#39;t want to reset the dots? <code>else{resetDots();}</code>",
    "score" : 1,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1747843865,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140446148,
    "post_id" : 79632152,
    "body" : "Create and post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. The issue is not apparent (to me, at least) without being able to run this.",
    "score" : 1,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1747837124,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}