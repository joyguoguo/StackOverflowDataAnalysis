{
  "question" : {
    "question_id" : 79797211,
    "title" : "Creating a BluetoothManager crashes my app",
    "body" : "<p>I am a begginer in app development and I started to create a very basic app in which I would like to introduce some bluetooth functionalities. I followed the documentation from Android Developers:\n<a href=\"https://developer.android.com/develop/connectivity/bluetooth/setup#java\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/connectivity/bluetooth/setup#java</a></p>\n<p>I followed the first steps, creating an instance of BluetoothManager and getting the BluetoothAdapter:</p>\n<pre><code>BluetoothManager myBluetoothManager = getSystemService(BluetoothManager.class);\nBluetoothAdapter myBluetoothAdapter = myBluetoothManager.getAdapter();\n</code></pre>\n<p>I also modified the manifest with the required permissions:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot;\n                 android:maxSdkVersion=&quot;30&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot;\n                 android:maxSdkVersion=&quot;30&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot;\n                 android:usesPermissionFlags=&quot;neverForLocation&quot;/&gt;\n&lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n</code></pre>\n<p>The problem I face is that when I run my app, it automatically crashes. If I comment this specific line, it starts working:</p>\n<pre><code>BluetoothManager myBluetoothManager = getSystemService(BluetoothManager.class);\n</code></pre>\n<p>If can anyone explain what am I missing or provide me some good resources.\nThanks</p>\n",
    "tags" : [ "java", "android", "bluetooth" ],
    "owner" : {
      "account_id" : 44408219,
      "reputation" : 1,
      "user_id" : 31737120,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/65YstSoB.png?s=256",
      "display_name" : "Claudiu",
      "link" : "https://stackoverflow.com/users/31737120/claudiu"
    },
    "is_answered" : false,
    "view_count" : 37,
    "closed_date" : 1761167553,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1761164892,
    "creation_date" : 1761164892,
    "link" : "https://stackoverflow.com/questions/79797211/creating-a-bluetoothmanager-crashes-my-app",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140812078,
    "post_id" : 79797211,
    "body" : "I wouldn&#39;t feel stupid about that, it&#39;s subtle.  The reason that&#39;s an error is that the Context isn&#39;t fully initialized until onCreate is called, so calling getSystemService before that (at init time, which is when variables are initialized) won&#39;t have a fully initialized Context to call it on yet.",
    "score" : 2,
    "owner" : {
      "account_id" : 1790714,
      "reputation" : 94752,
      "user_id" : 1631193,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/ac9dfee58394495fa69f12f58a928be3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gabe Sechan",
      "link" : "https://stackoverflow.com/users/1631193/gabe-sechan"
    },
    "creation_date" : 1761191663,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140811753,
    "post_id" : 79797211,
    "body" : "I solved my problem. I feel very stupid but I wrote &quot;BluetoothManager myBluetoothManager = getSystemService(BluetoothManager.class);&quot; outside of my onCreate method. I moved it inside and now it works corectly Thanks",
    "score" : 0,
    "owner" : {
      "account_id" : 44408219,
      "reputation" : 1,
      "user_id" : 31737120,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/65YstSoB.png?s=256",
      "display_name" : "Claudiu",
      "link" : "https://stackoverflow.com/users/31737120/claudiu"
    },
    "creation_date" : 1761167288,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140811700,
    "post_id" : 79797211,
    "body" : "Use Logcat to examine the stack trace associated with your crash. If you cannot interpret the stack trace, please edit your question and post the stack trace. You might also wish to explain a bit more about where this code resides.",
    "score" : 1,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011055,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1761165113,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}