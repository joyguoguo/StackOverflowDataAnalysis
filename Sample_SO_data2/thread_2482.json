{
  "question" : {
    "question_id" : 79619632,
    "title" : "Wildfly schema cannot be read because &#39;vfs&#39; access is restricted due to accessExternalSchema",
    "body" : "<p>I am trying to run a Spring web application on a Wildfly application server. There are some XML schemas in it, that reference each other with relative paths like this:</p>\n<p>schema1.xsd:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xs:include schemaLocation=&quot;schema2.xsd&quot;/&gt;\n</code></pre>\n<p>Now, when I deploy the application, it fails with the following message</p>\n<blockquote>\n<p>org.xml.sax.SAXParseException; systemId: vfs:/content/myApp.war/WEB-INF/classes/schemas/schema1.xsd; lineNumber: 5; columnNumber: 42; schema_reference: Failed to read schema document 'schema2.xsd', because 'vfs' access is not allowed due to restriction set by the accessExternalSchema property.</p>\n</blockquote>\n<p>This makes sense, because VFS is indeed, not explicitly allowed. But, I can't seem to find a way to fix this.</p>\n<p>I know that usually I could add <code>javax.xml.accessExternalSchema=vfs</code>\nor even <code>javax.xml.accessExternalSchema=all</code> to the system properties, and it should work. But, it doesn't, the error still remains.</p>\n<p>I have tried adding it through the Jboss CLI, I've also tried to put it in the <code>standalone.conf</code> and I've even tried setting the <code>JAVA_OPTS</code> system property. None seemed to work.</p>\n<p>How can this be solved? If I can't allow access to <code>vfs</code> protocol, maybe I can convince the application to work with relative paths instead, but how?</p>\n<p>If I traced it down correctly, I think that this is the class responsible: <code>org.springframework.xml.DocumentBuilderFactoryUtils</code>, which explicitly seems to deactivate external schema access:</p>\n<pre class=\"lang-java prettyprint-override\"><code>factory.setAttribute(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;);\n</code></pre>\n<p>I'm using wildfly 29.0.1, JDK 17</p>\n",
    "tags" : [ "java", "wildfly" ],
    "owner" : {
      "account_id" : 8517137,
      "reputation" : 1002,
      "user_id" : 6385232,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4ac0a06c961f3af17dca9b69fce42201?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "geanakuch",
      "link" : "https://stackoverflow.com/users/6385232/geanakuch"
    },
    "is_answered" : false,
    "view_count" : 67,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1747439049,
    "creation_date" : 1747138468,
    "link" : "https://stackoverflow.com/questions/79619632/wildfly-schema-cannot-be-read-because-vfs-access-is-restricted-due-to-accessex",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}