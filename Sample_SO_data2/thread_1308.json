{
  "question" : {
    "question_id" : 79724891,
    "title" : "Unable to write JSON:Java 8 date/time type java.time.LocalDateTime when using Hateos Json API",
    "body" : "<p>I am working on <a href=\"https://toedter.github.io/spring-hateoas-jsonapi/release/reference/\" rel=\"nofollow noreferrer\">Spring Hateos Json APi</a>.</p>\n<p>I have a Get request</p>\n<pre><code>import static com.toedter.spring.hateoas.jsonapi.MediaTypes.JSON_API_VALUE;\nimport org.springframework.hateoas.EntityModel;\nimport java.time.LocalDateTime;\n\n   \n    @GetMapping(&quot;/getMovie&quot;,produces = JSON_API_VALUE)\n    public Movie getMovie(){\n         LocalDateTime localDateTime=LocalDateTime.now();\n          return new Movie(1,&quot;Avengers&quot;,localDateTime);       \n        }    \n \n</code></pre>\n<blockquote>\n<p>and the Movie class has</p>\n</blockquote>\n<pre><code>   Public class Movie{\n    private Integer id;\n    private String name;\n    private LocalDateTime availableTime;\n    \n    //Getters setters and Constructor\n    }\n\n}\n</code></pre>\n<p>I have added the following configuration for Object Mapper</p>\n<pre><code>@Bean\n    @Primary\n    fun objectMapper(): ObjectMapper =\n        JsonMapper.builder()\n            .addModule(JavaTimeModule())\n            .build()\n</code></pre>\n<p>I am using following dependencies of Hateos and jsonapi</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter'\nimplementation 'com.toedter:spring-hateoas-jsonapi:2.1.3'\nimplementation 'org.springframework.boot:spring-boot-starter-hateoas'\ncompile 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.7.3'\n</code></pre>\n<p>I get the following error</p>\n<pre><code>org.springframework.http.converter.HttpMessageNotWritableException:Could not write JSON:Java 8 date/time type java.time.LocalDateTime not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;\n</code></pre>\n<p>If I add</p>\n<pre><code> @JsonSerialize(using = LocalDateTimeSerializer.class)\n   @JsonDeserialize(using = LocalDateTimeDeserializer.class)\n   private LocalDateTime localdaetTime;\n</code></pre>\n<p>When I use the above code on the getter,It works but I cannot use this because the model class is present in the library and I cannot change it.\nAlso If I remove ,<code>produces = JSON_API_VALUE</code> from the controller , the code seems to work. Looks like it is taking the ObjectMapper configurations from the hateos Json api and not from the configurations I have provided</p>\n",
    "tags" : [ "java", "java-time", "jackson-databind", "spring-hateoas" ],
    "owner" : {
      "account_id" : 5193931,
      "reputation" : 527,
      "user_id" : 4155906,
      "user_type" : "registered",
      "accept_rate" : 31,
      "profile_image" : "https://www.gravatar.com/avatar/422382cb91b41217109d8d0c2ffcb914?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thejas",
      "link" : "https://stackoverflow.com/users/4155906/thejas"
    },
    "is_answered" : false,
    "view_count" : 80,
    "closed_date" : 1754362315,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1754324104,
    "creation_date" : 1754309199,
    "link" : "https://stackoverflow.com/questions/79724891/unable-to-write-jsonjava-8-date-time-type-java-time-localdatetime-when-using-ha",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140641303,
    "post_id" : 79724891,
    "body" : "@BasilBourque This is not the actual implementation it&#39;s just for asking question and also I cannot change the Type since its coming from a different library",
    "score" : 0,
    "owner" : {
      "account_id" : 5193931,
      "reputation" : 527,
      "user_id" : 4155906,
      "user_type" : "registered",
      "accept_rate" : 31,
      "profile_image" : "https://www.gravatar.com/avatar/422382cb91b41217109d8d0c2ffcb914?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thejas",
      "link" : "https://stackoverflow.com/users/4155906/thejas"
    },
    "creation_date" : 1754324927,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140641270,
    "post_id" : 79724891,
    "body" : "By the way, <code>LocalDateTime</code> is the wrong class to use for tracking a moment such as when a product became available. I cannot imagine a case where calling <code>LocalDateTime.now</code> makes sense. Instead, use <code>java.time.Instant</code> to track a moment (a point on the timeline), <code>Instant.now</code>. For SQL database, convert to <code>OffsetDateTime</code>. For presentation to user, convert to <code>ZonedDateTime</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1754323947,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140640726,
    "post_id" : 79724891,
    "body" : "Iâ€™m convinced that the root cause is the same as in that other question. But your setup seems different, so you may not be able to apply the solutions from there (you should try and see). The link is good; but I prefer to keep this question open.",
    "score" : 3,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87409,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1754312627,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140640654,
    "post_id" : 79724891,
    "body" : "@Chaosfire Clearly !! The error log is different and in my case , the erorr is caused due to Hateos implementation. I have also edited my question",
    "score" : 1,
    "owner" : {
      "account_id" : 5193931,
      "reputation" : 527,
      "user_id" : 4155906,
      "user_type" : "registered",
      "accept_rate" : 31,
      "profile_image" : "https://www.gravatar.com/avatar/422382cb91b41217109d8d0c2ffcb914?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thejas",
      "link" : "https://stackoverflow.com/users/4155906/thejas"
    },
    "creation_date" : 1754310326,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}