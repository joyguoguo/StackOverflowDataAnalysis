{
  "question" : {
    "question_id" : 79753682,
    "title" : "Gregorian Calendar gets the wrong &quot;start of the week&quot;",
    "body" : "<p>This is August 2025:</p>\n<pre class=\"lang-none prettyprint-override\"><code>          August 2025       \n    Mon Tue Wed Thu Fri Sat Sun  \n                      1   2   3  \n      4   5   6   7   8   9  10  \n --&gt; 11  12  13  14  15 (16) 17  \n     18  19  20  21  22  23  24  \n     25  26  27  28  29  30  31  \n</code></pre>\n<p>Given a date (e.g. 2025-08-16) I want to get the beginning of the week. The first day of the week is Monday, so the beginning of the week is 2025-08-11.</p>\n<p>I used this code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.TimeZone;\n\npublic class Sample {\n\n    public static void main(String[] args) {\n        Calendar dt = Calendar.getInstance(TimeZone.getTimeZone(&quot;Europe/Rome&quot;));\n        dt.setFirstDayOfWeek(Calendar.MONDAY);\n        \n        // set to 2025-08-16\n        dt.set(Calendar.YEAR, 2025);\n        dt.set(Calendar.MONTH, Calendar.AUGUST);\n        dt.set(Calendar.DATE, 16);\n\n        //dt.getTimeInMillis(); // &lt;-- UNCOMMENT THIS AFTER FIRST RUN\n        \n        dt.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\n        \n        // SHOULD BE 2025-08-11 \n        System.out.println(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(dt.getTime()));\n\n    }\n}\n</code></pre>\n<p>Running it, it returns 2025-08-04, which is completely wrong. But uncommenting the line marked with &quot;UNCOMMENT THIS&quot;, which is a <em>get</em> operation, the actual result becomes the expected one (2025-08-11).</p>\n<p>Is it a JDK bug? How can I explain it?</p>\n",
    "tags" : [ "java", "datetime", "calendar", "java.util.calendar" ],
    "owner" : {
      "account_id" : 2839888,
      "reputation" : 128,
      "user_id" : 2439704,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/y3wtr.jpg?s=256",
      "display_name" : "Francesco Sblendorio",
      "link" : "https://stackoverflow.com/users/2439704/francesco-sblendorio"
    },
    "is_answered" : true,
    "view_count" : 156,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1756828540,
    "creation_date" : 1756826991,
    "link" : "https://stackoverflow.com/questions/79753682/gregorian-calendar-gets-the-wrong-start-of-the-week",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79753702,
    "question_id" : 79753682,
    "body" : "<h2>tl;dr</h2>\n<p>Use only <em>java.time</em> classes for date-time work. Never use <code>Calendar</code>.</p>\n<pre><code>LocalDate\n.of( 2025 , Month.AUGUST , 16 )\n.with( \n    TemporalAdjusters.previousOrSame ( DayOfWeek.MONDAY ) \n)\n</code></pre>\n<h2>Avoid legacy date-time classes</h2>\n<p>Never use the terribly flawed legacy date time classes such as <code>Date</code>, <code>Calendar</code>, and <code>SimpleDateFormat</code>.</p>\n<p>Use only the modern <em>java.time</em> classes.</p>\n<h2><em>java.time</em></h2>\n<p>Represent a date with <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/LocalDate.html\" rel=\"noreferrer\"><code>java.time.LocalDate</code></a>.</p>\n<pre><code>LocalDate ld = LocalDate.of( 2025 , Month.AUGUST , 16 ) ;\n</code></pre>\n<p>Use a <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/TemporalAdjuster.html\" rel=\"noreferrer\"><code>TemporalAdjuster</code></a> (class name is singular) to get the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/TemporalAdjusters.html#previousOrSame(java.time.DayOfWeek)\" rel=\"noreferrer\">previous Monday</a>, or get the same date if it is a <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/DayOfWeek.html#MONDAY\" rel=\"noreferrer\">Monday</a>. The utility class <a href=\"https://TemporalAdjusters\" rel=\"noreferrer\"><code>TemporalAdjusters</code></a> (class name is plural) provides the adjuster you need.</p>\n<pre><code>TemporalAdjuster adjuster = TemporalAdjusters.previousOrSame ( DayOfWeek.MONDAY ) ;\n</code></pre>\n<p>Apply the adjuster to produce a <code>LocalDate</code> object.</p>\n<pre><code>LocalDate previousOrSameMonday = ld.with( adjuster ) ;\n</code></pre>\n",
    "score" : 6,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1756828225,
    "last_activity_date" : 1756828540,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140711146,
    "post_id" : 79753682,
    "body" : "Another thing that no one needs to know any more: <code>Calendar.getInstance()</code> never guaranteed to give you a <code>GregorianCalendar</code>.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87409,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1756887760,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140711142,
    "post_id" : 79753682,
    "body" : "Since no one should use <code>Calendar</code> any more, also no one should need to know whether you have found a bug in it (which, as others say, you have not; the behaviour is explained it the docs; warning: they are long and not exactly easy to understand).",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87409,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1756887652,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140711129,
    "post_id" : 79753682,
    "body" : "Since ISO 8601 weeks begin on Mondays, you may use <code>LocalDate.of(2025, Month.AUGUST, 16).with(WeekFields.ISO.dayOfWeek(), 1)</code>. It yields the desired <code>2025-08-11</code>. I think it clearly reads that you want day 1 of the ISO week.",
    "score" : 0,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87409,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1756887325,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140709912,
    "post_id" : 79753682,
    "body" : "It is stated in the documentation that set(field, value) does not trigger a re-compute of the internal timestamp value. In your case, the DATE and the DAY_OF_WEEK are ambiguous, and you have to read the docs more carefully (or even study the source) to understand what happens when Calendar tries to resolve all the fields into an actual time.",
    "score" : 8,
    "owner" : {
      "account_id" : 116746,
      "reputation" : 12898,
      "user_id" : 306030,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://i.sstatic.net/y053l.jpg?s=256",
      "display_name" : "forty-two",
      "link" : "https://stackoverflow.com/users/306030/forty-two"
    },
    "creation_date" : 1756833443,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140709866,
    "post_id" : 79753682,
    "body" : "There are good reasons for everyone advising you to use the java.time package.  Both Calendar and SimpleDateFormat deal with both date and time of day, and they rely on a TimeZone property to do that.  You did not set a time of day on your Calendar and you did not set a TimeZone on your SimpleDateFormat, so you may not be getting the day you think youâ€™re getting.  The java.time classes fix all of this ambiguity.",
    "score" : 2,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1756832115,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140709685,
    "post_id" : 79753682,
    "body" : "The bug is, that you&#39;re using java.util.Calendar. It&#39;s 2025, why aren&#39;t you using java.time?",
    "score" : 9,
    "owner" : {
      "account_id" : 1888781,
      "reputation" : 2498,
      "user_id" : 1707427,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4d1a2608ee35e2df7d2400a02e62bb20?s=256&d=identicon&r=PG",
      "display_name" : "S&#246;ren",
      "link" : "https://stackoverflow.com/users/1707427/s%c3%b6ren"
    },
    "creation_date" : 1756827340,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79753702" : [ {
      "comment_id" : 140712422,
      "post_id" : 79753702,
      "body" : "... and/or to java.time.",
      "score" : 0,
      "owner" : {
        "account_id" : 7612423,
        "reputation" : 87409,
        "user_id" : 5772882,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Anonymous",
        "link" : "https://stackoverflow.com/users/5772882/anonymous"
      },
      "creation_date" : 1756915713,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140712281,
      "post_id" : 79753702,
      "body" : "@BasilBourque TBH, I think that comparison is unfair to the Yugo ;)",
      "score" : 2,
      "owner" : {
        "account_id" : 116746,
        "reputation" : 12898,
        "user_id" : 306030,
        "user_type" : "registered",
        "accept_rate" : 70,
        "profile_image" : "https://i.sstatic.net/y053l.jpg?s=256",
        "display_name" : "forty-two",
        "link" : "https://stackoverflow.com/users/306030/forty-two"
      },
      "creation_date" : 1756912617,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140710360,
      "post_id" : 79753702,
      "body" : "@FrancescoSblendorio You did not, Francesco. The reasons for that boil down to essentially: Boy oh boy that API is <i>terrible</i>. What you are observing <i>is</i> specified behaviour (&#39;works as intended&#39;), the real bug is: &quot;The specified behaviour is written by a delirious evildoer&quot;. This is one of the more important reasons <i>why</i> its best not to mess with <code>java.util.Calendar</code>. It&#39;s a lie (instances represent a zoned time, not a calendar at all), and it has API that is <i>bewilderingly</i> misleading. Yes, even the fact that a <code>get</code> operation has side effects is all specified.",
      "score" : 5,
      "owner" : {
        "account_id" : 401843,
        "reputation" : 107206,
        "user_id" : 768644,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
        "display_name" : "rzwitserloot",
        "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
      },
      "creation_date" : 1756846189,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140710320,
      "post_id" : 79753702,
      "body" : "@FrancescoSblendorio I strongly suggest you waste no time at all in trying to understand the legacy date-time classes. They are a bloody awful mess, written by people who did not understand date-time handling. If you ask me how to repair your <a href=\"https://en.wikipedia.org/wiki/Yugo\" rel=\"nofollow noreferrer\">Yugo</a>, I am going to tell you to buy a used Honda/Toyota.",
      "score" : 3,
      "owner" : {
        "account_id" : 322981,
        "reputation" : 347089,
        "user_id" : 642706,
        "user_type" : "registered",
        "accept_rate" : 58,
        "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
        "display_name" : "Basil Bourque",
        "link" : "https://stackoverflow.com/users/642706/basil-bourque"
      },
      "creation_date" : 1756845442,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140709802,
      "post_id" : 79753702,
      "body" : "Ok, it&#39;s correct to use modern API.    But I ask: did I find a bug in legacy classes? Or the bug is in my code?",
      "score" : 1,
      "owner" : {
        "account_id" : 2839888,
        "reputation" : 128,
        "user_id" : 2439704,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/y3wtr.jpg?s=256",
        "display_name" : "Francesco Sblendorio",
        "link" : "https://stackoverflow.com/users/2439704/francesco-sblendorio"
      },
      "creation_date" : 1756829845,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}