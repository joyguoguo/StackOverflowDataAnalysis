{
  "question" : {
    "question_id" : 79822524,
    "title" : "How to use identity attribute of io.quarkus.scheduler.Scheduled in log messages",
    "body" : "<p>I have a Java Quarkus application which is using JBoss for logging.</p>\n<p>I am using a scheduled job via <code>io.quarkus.scheduler.Scheduled</code> like so:</p>\n<pre><code>private static final Logger LOGGER = Logger.getLogger(ReportFetchTask.class);\n\n...\n\n@Scheduled(every = &quot;1h&quot;, identity = &quot;test&quot;, concurrentExecution = SKIP)\n    public void fetchData() {\n        LOGGER.info(&quot;Fetching data...&quot;);\n    }\n</code></pre>\n<p>The Quarkus docs <a href=\"https://quarkus.io/guides/scheduler-reference#identity\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/scheduler-reference#identity</a> mention that the <code>identity</code> field is used in log messages, but it does not appear.</p>\n<p>I tried adapting the log format to <code>quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) [identity:%X{identity}] %s%e%n</code> assuming that the <code>identity</code> might be added to the MDC (<a href=\"https://quarkus.io/guides/logging#use-mdc-to-add-contextual-log-information\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/logging#use-mdc-to-add-contextual-log-information</a>), but that does not seem to be the case:<br />\n<code>2025-11-17 17:02:25,004 INFO  [x.x.x.x] (vert.x-worker-thread-1) [identity:] Fetching data...</code></p>\n<p>How can I let the <code>identity</code> show up in the log message? The documentation made it seem like this would happen automatically but I couldn't find anything on how to set this up.\nI guess I could add it manually via the MDC myself, but then what is the purpose of the <code>identity</code> field?</p>\n<p>I also have logs that aren't made in scheduled tasks, so for those logs ideally the identity field would not show up at all.</p>\n",
    "tags" : [ "java", "logging", "jboss", "quarkus" ],
    "owner" : {
      "account_id" : 23169736,
      "reputation" : 12,
      "user_id" : 17269145,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJz2Nao9xM_GZKWzqIcXNDRqqENltKfqyL_KMB4-=k-s256",
      "display_name" : "Alessandro Escher",
      "link" : "https://stackoverflow.com/users/17269145/alessandro-escher"
    },
    "is_answered" : true,
    "view_count" : 54,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1763396127,
    "creation_date" : 1763395909,
    "link" : "https://stackoverflow.com/questions/79822524/how-to-use-identity-attribute-of-io-quarkus-scheduler-scheduled-in-log-messages",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79822530,
    "question_id" : 79822524,
    "body" : "<p><code>identity</code> in <code>@Scheduled</code> is only used by Quarkus’ <strong>own scheduler logs</strong>, not by your application logger. Quarkus does <strong>not</strong> place the identity into the MDC, so <code>%X{identity}</code> will always be empty unless you explicitly write it.If you want the scheduler identity to appear in your own log messages, you must add it to the MDC yourself. The usual pattern is:</p>\n<pre><code>@Scheduled(every = &quot;1h&quot;, identity = &quot;test&quot;)\nvoid fetchData() {\n    try (MDC.MDCCloseable ignored = MDC.putCloseable(&quot;identity&quot;, &quot;test&quot;)) {\n        LOGGER.info(&quot;Fetching data...&quot;);\n    }\n}\n</code></pre>\n<p>Your log format can then use <code>%X{identity}</code> and it will print correctly. Quarkus doesn’t currently provide any built-in way to auto-propagate the scheduled job identity into application-level logs.</p>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 26661173,
      "reputation" : 149,
      "user_id" : 25504374,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/gG2noSIz.jpg?s=256",
      "display_name" : "Tuhin Shaikh",
      "link" : "https://stackoverflow.com/users/25504374/tuhin-shaikh"
    },
    "creation_date" : 1763396127,
    "last_activity_date" : 1763396127,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}