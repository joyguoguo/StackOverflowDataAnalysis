{
  "question" : {
    "question_id" : 79591202,
    "title" : "What is the idiomatic use of HiveMQ client&#39;s `subscribePublishes` method",
    "body" : "<p>I cannot figure out how to use the <a href=\"https://javadoc.io/doc/com.hivemq/hivemq-mqtt-client/latest/com/hivemq/client/mqtt/mqtt5/Mqtt5RxClient.html#subscribePublishes-com.hivemq.client.mqtt.mqtt5.message.subscribe.Mqtt5Subscribe-\" rel=\"nofollow noreferrer\"><code>FlowableWithSingle&lt;Mqtt5Publish,Mqtt5SubAck&gt; subscribePublishes(Mqtt5Subscribe subscribe)</code></a> method of the HiveMQ Rx client API. It returns <code>FlowableWithSingle</code> which holds the <code>Flowable</code> with the published messages. The <code>FlowableWithSingle</code> also holds a <code>Single</code> with the result of the subscription.</p>\n<p>It seems to me that what I should do is to wait on the <code>Single</code> so that I see the subscription result, and then work with the messages received in the <code>Flowable</code>.</p>\n<p>The problem is how to do both things, one after the other, in a single pipeline? The subscription and message processing is in the middle of large pipeline.</p>\n<p>Any call to <code>flatMap</code> will lose me the access to the <code>Single</code> part and vice versa.</p>\n",
    "tags" : [ "java", "rx-java2", "hivemq" ],
    "owner" : {
      "account_id" : 137100,
      "reputation" : 18303,
      "user_id" : 341065,
      "user_type" : "registered",
      "accept_rate" : 72,
      "profile_image" : "https://www.gravatar.com/avatar/8e57fe4b0f7381288a8e1e4c6cd77a8e?s=256&d=identicon&r=PG",
      "display_name" : "wilx",
      "link" : "https://stackoverflow.com/users/341065/wilx"
    },
    "is_answered" : false,
    "view_count" : 39,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1746113037,
    "creation_date" : 1745516836,
    "link" : "https://stackoverflow.com/questions/79591202/what-is-the-idiomatic-use-of-hivemq-clients-subscribepublishes-method",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79601819,
    "question_id" : 79591202,
    "body" : "<p>When using <code>FlowableWithSingle&lt;Mqtt5Publish,Mqtt5SubAck&gt; subscribePublishes</code>, it can result is a few different states depending on the result of the subscription.  It with either :</p>\n<ul>\n<li><p>Emit the SubAck message as the single and first element if at least one subscription of the Subscribe message was successful, and then emit the Publish messages matching the successful subscriptions of the Subscribe message,</p>\n</li>\n<li><p>Emits an Mqtt5SubAckException if the received SubAck message if it only contains Error Codes</p>\n</li>\n<li><p>Or, errors with a different exception if an error occurred before the Subscribe message was sent.</p>\n</li>\n</ul>\n<p>As for the implementation here, could you please explain your intention with this configuration a little more fully so that we can better provide implementation suggestions?  It sounds like you are using this flowable in place of confirming subscription success via the returned SubAck, where we would typically recommend utilizing SubAck as definition confirmation of a successful subscription.</p>\n<p>Disclaimer: I am a member of the HiveMQ Team</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28425005,
      "reputation" : 72,
      "user_id" : 21746495,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AGNmyxZCmyIIrtD1UOnhIoiLI_phQvmOfqBIyjb8a-zv=k-s256",
      "display_name" : "Aaron Franz",
      "link" : "https://stackoverflow.com/users/21746495/aaron-franz"
    },
    "creation_date" : 1746100976,
    "last_activity_date" : 1746113037,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}