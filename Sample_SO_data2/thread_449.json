{
  "question" : {
    "question_id" : 79809212,
    "title" : "Jose4j - Getting array out of bound exception",
    "body" : "<p>I am using the jose <a href=\"https://mvnrepository.com/artifact/org.bitbucket.b_c/jose4j\" rel=\"nofollow noreferrer\">JOSE4j</a> Â» <a href=\"https://mvnrepository.com/artifact/org.bitbucket.b_c/jose4j/0.9.6\" rel=\"nofollow noreferrer\">0.9.6</a> library and I am passing a jwt token to</p>\n<pre><code>jwtConsumer.processToClaims(\n    tokenString)\n</code></pre>\n<p>method to the following class</p>\n<pre><code>org.jose4j.jwt.consumer.JwtConsumer\n</code></pre>\n<p>Post which I am getting array out of bound index,<br />\n**error: java.lang.ArrayIndexOutOfBoundsException: Index 4355 out of bounds for length 4355,<br />\nerror: java.lang.ArrayIndexOutOfBoundsException: Index 3634 out of bounds for length 3634,<br />\n**<br />\nand so on for multiple different tokens.<br />\nI suspect the issue coming from method</p>\n<pre><code>processContext\n</code></pre>\n<pre><code>originalJoseObjects.subList(idx + 1, originalJoseObjects.size());\n</code></pre>\n<p>which eventually goes to</p>\n<pre><code>static void subListRangeCheck(int fromIndex, int toIndex, int size) {\n    if (fromIndex &lt; 0)\n        throw new IndexOutOfBoundsException(&quot;fromIndex = &quot; + fromIndex);\n    if (toIndex &gt; size)\n        throw new IndexOutOfBoundsException(&quot;toIndex = &quot; + toIndex);\n    if (fromIndex &gt; toIndex)\n        throw new IllegalArgumentException(&quot;fromIndex(&quot; + fromIndex +\n                                           &quot;) &gt; toIndex(&quot; + toIndex + &quot;)&quot;);\n}\n</code></pre>\n<p>wanted to check if anyone else faced any such issue, or there is any reason we get this error.<br />\nAny help would be appreciated.</p>\n<p>1 important update - i am running my code on java 21 with spring boot 3.5.3.</p>\n",
    "tags" : [ "java", "jose4j" ],
    "owner" : {
      "account_id" : 11261851,
      "reputation" : 1,
      "user_id" : 8259931,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c25b1926fdb1007eea1bccb13ecb287?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Akshat Rana",
      "link" : "https://stackoverflow.com/users/8259931/akshat-rana"
    },
    "is_answered" : false,
    "view_count" : 43,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1762280476,
    "creation_date" : 1762277205,
    "link" : "https://stackoverflow.com/questions/79809212/jose4j-getting-array-out-of-bound-exception",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140836527,
    "post_id" : 79809212,
    "body" : "Note also that that you are mistaken about the locus of the exception.  Perhaps you&#39;re looking at the wrong version of the source or the wrong source file.  Neither the exception class nor the detail message you report matches the source excerpt you present.",
    "score" : 1,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1762285631,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140836525,
    "post_id" : 79809212,
    "body" : "The exception message you posted is entirely reasonable in and of itself. My first guess would be that you&#39;re getting an exception because the <code>tokenString</code> argument you are presenting does not contain a well-formed JWT token. Not that I, personally, know how recognize a well-formed one.",
    "score" : 0,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1762285527,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}