{
  "question" : {
    "question_id" : 79694316,
    "title" : "Issue when using GitHub-managed packages in other repos with workflows",
    "body" : "<p>I have created the following 3 repos:</p>\n<ul>\n<li><a href=\"https://github.com/grchr/yf-models-proto\" rel=\"nofollow noreferrer\">https://github.com/grchr/yf-models-proto</a> - contains protobuf definitions</li>\n<li><a href=\"https://github.com/grchr/yf-project\" rel=\"nofollow noreferrer\">https://github.com/grchr/yf-project</a> - a library with some functionality</li>\n<li><a href=\"https://github.com/grchr/fintestq\" rel=\"nofollow noreferrer\">https://github.com/grchr/fintestq</a> - a Quarkus project that uses (among others) my 2 other repos</li>\n</ul>\n<p>I publish packages through GitHub instead of Maven as it seemed easier to have a one stop shop. You can find here the latest publications for the 2 first projects:</p>\n<ul>\n<li><a href=\"https://github.com/grchr/yf-project/packages/2573404\" rel=\"nofollow noreferrer\">https://github.com/grchr/yf-project/packages/2573404</a></li>\n<li><a href=\"https://github.com/grchr/yf-models-proto/packages/2573407\" rel=\"nofollow noreferrer\">https://github.com/grchr/yf-models-proto/packages/2573407</a></li>\n</ul>\n<p>In the <a href=\"https://github.com/grchr/fintestq/blob/main/pom.xml#L82\" rel=\"nofollow noreferrer\"><code>pom.xml</code></a> I use the dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.grchr&lt;/groupId&gt;\n  &lt;artifactId&gt;yf-project&lt;/artifactId&gt;\n  &lt;version&gt;0.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.github.grchr&lt;/groupId&gt;\n  &lt;artifactId&gt;yf-models-proto&lt;/artifactId&gt;\n  &lt;version&gt;1.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And I also declare them in the <a href=\"https://github.com/grchr/fintestq/blob/main/pom.xml#L199\" rel=\"nofollow noreferrer\">repositories section</a>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;github-yf-project&lt;/id&gt;\n        &lt;name&gt;GitHub Packages&lt;/name&gt;\n        &lt;url&gt;https://maven.pkg.github.com/grchr/yf-project&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n    &lt;repository&gt;\n        &lt;id&gt;github-yf-models-proto&lt;/id&gt;\n        &lt;name&gt;GitHub Packages&lt;/name&gt;\n        &lt;url&gt;https://maven.pkg.github.com/grchr/yf-models-proto&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n<p>Locally I am not facing any issues when building the project. However my <a href=\"https://github.com/grchr/fintestq/blob/main/.github/workflows/ci.yml\" rel=\"nofollow noreferrer\"><code>ci.yml</code></a> workflow does.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>## A basic GitHub Actions workflow for your Quarkus application.\n\nname: CI build\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Configure Maven GitHub Packages auth\n        uses: s4u/maven-settings-action@v2\n        with:\n          servers: |\n            [\n              {\n                &quot;id&quot;: &quot;github-yf-project&quot;,\n                &quot;username&quot;: &quot;${{ github.actor }}&quot;,\n                &quot;password&quot;: &quot;${{ secrets.GITHUB_TOKEN }}&quot;\n              },\n              {\n                &quot;id&quot;: &quot;github-yf-models-proto&quot;,\n                &quot;username&quot;: &quot;${{ github.actor }}&quot;,\n                &quot;password&quot;: &quot;${{ secrets.GITHUB_TOKEN }}&quot;\n              }\n            ]\n      \n      - name: Clear Maven cache for grchr packages\n        run: rm -rf ~/.m2/repository/com/github/grchr\n      \n      - name: Show Maven settings (debug)\n        run: grep '&lt;id&gt;' ~/.m2/settings.xml || true\n\n      - name: Set up Java\n        uses: actions/setup-java@v4\n        with:\n          distribution: temurin\n          java-version: 17\n          cache: maven\n\n      - name: Build\n        run: ./mvnw verify -B\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  18.075 s\n[INFO] Finished at: 2025-07-08T11:18:21Z\n[INFO] ------------------------------------------------------------------------\nError:  Failed to execute goal on project fintestq: Could not collect dependencies for project com.example:fintestq:jar:1.0.0-SNAPSHOT\nError:  Failed to read artifact descriptor for com.github.grchr:yf-project:jar:0.0.6\nError:      Caused by: The following artifacts could not be resolved: com.github.grchr:yf-project:pom:0.0.6 (absent): Could not transfer artifact com.github.grchr:yf-project:pom:0.0.6 from/to github-yf-project (https://maven.pkg.github.com/grchr/yf-project): status code: 401, reason phrase: Unauthorized (401)\nError:  Failed to read artifact descriptor for com.github.grchr:yf-models-proto:jar:1.0.2\nError:      Caused by: The following artifacts could not be resolved: com.github.grchr:yf-models-proto:pom:1.0.2 (absent): Could not transfer artifact com.github.grchr:yf-models-proto:pom:1.0.2 from/to github-yf-project (https://maven.pkg.github.com/grchr/yf-project): status code: 401, reason phrase: Unauthorized (401)\nError:  -&gt; [Help 1]\nError:  \nError:  To see the full stack trace of the errors, re-run Maven with the -e switch.\nError:  Re-run Maven using the -X switch to enable full debug logging.\nError:  \nError:  For more information about the errors and possible solutions, please read the following articles:\nError:  [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException\nError: Process completed with exit code 1.\n</code></pre>\n<p>I have tried changing tokens, changing actions permissions, reworking the package naming to <code>com.github.username</code> from <code>org.opensource</code> as I had it originally. The issue persists.</p>\n<p>How can I resolve this issue?</p>\n",
    "tags" : [ "java", "maven", "github", "github-actions" ],
    "owner" : {
      "account_id" : 16465470,
      "reputation" : 121,
      "user_id" : 11950199,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/2de3b398bd74f64b56d7a704d8da2253?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "YokedSinger8062",
      "link" : "https://stackoverflow.com/users/11950199/yokedsinger8062"
    },
    "is_answered" : false,
    "view_count" : 74,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1752675679,
    "creation_date" : 1751980627,
    "link" : "https://stackoverflow.com/questions/79694316/issue-when-using-github-managed-packages-in-other-repos-with-workflows",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79703573,
    "question_id" : 79694316,
    "body" : "<p>No need to change settings xml, because those packages are already public, it should download without any tokens like below</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>name: CI build\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Clear Maven cache for grchr packages\n        run: rm -rf ~/.m2/repository/com/github/grchr\n      \n      - name: Set up Java\n        uses: actions/setup-java@v4\n        with:\n          distribution: temurin\n          java-version: 17\n          cache: maven\n\n      - name: Build\n        run: ./mvnw verify -B\n</code></pre>\n<p>If you want to make those packages private you can follow <a href=\"https://stackoverflow.com/a/67406422/175554\">this answer</a> to define the usename password in <code>settings.xml</code></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 58650,
      "reputation" : 4975,
      "user_id" : 175554,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/KmFczdGy.jpg?s=256",
      "display_name" : "ozkanpakdil",
      "link" : "https://stackoverflow.com/users/175554/ozkanpakdil"
    },
    "creation_date" : 1752675679,
    "last_activity_date" : 1752675679,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140591654,
    "post_id" : 79694316,
    "body" : "Re &quot;<i>status code: 401, reason phrase: Unauthorized (401)</i>&quot; in the err msg: What if you try to add these infos to your <a href=\"https://maven.apache.org/settings.html#Servers\" rel=\"nofollow noreferrer\"><code>settings.xml</code></a> rather than in the <code>ci.yml</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 1937747,
      "reputation" : 15080,
      "user_id" : 1744774,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
      "display_name" : "Gerold Broser",
      "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
    },
    "creation_date" : 1752598265,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}