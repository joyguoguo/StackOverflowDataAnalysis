{
  "question" : {
    "question_id" : 79634238,
    "title" : "Upload a file using graphServiceClient",
    "body" : "<p>I am trying to use java to upload a file to SharePoint. How can i do that ?</p>\n<p>Right now i am trying to create a new DriveItem,</p>\n<pre><code>DriveItem driveItem = new DriveItem();\ndriveItem.setName(&quot;New File.txt&quot;);\nHashMap&lt;String, Object&gt; additionalData = new HashMap&lt;String, Object&gt;();\nadditionalData.put(&quot;@microsoft.graph.conflictBehavior&quot;, &quot;rename&quot;);\ndriveItem.setAdditionalData(additionalData);\nDriveItem result = graphClient\n.drives()\n.byDriveId(&quot;{drive-id}&quot;)\n.items()\n.byDriveItemId(&quot;parentFolder&quot;)\n.children()\n.post(driveItem);\n</code></pre>\n<p>add content to it,</p>\n<pre><code>File testFile = new File(path); \nInputStream testStream = new FileInputStream(testFile);\n\ngraphClient\n.drives()\n.byDriveId(&quot;{drive-id}&quot;)\n.items()\n.byDriveItemId(&quot;uploadedFileId&quot;)\n.content()\n.buildRequest()\n.put(fileContentsInBytes, createCallback);\n</code></pre>\n<p>and checkin:</p>\n<pre><code>CheckinPostRequestBody checkinPostRequestBody = new CheckinPostRequestBody();\ngraphClient\n.drives()\n.byDriveId(&quot;{drive-id}&quot;)\n.items()\n.byDriveItemId(&quot;uploadedFileId&quot;)\n.checkin()\n.post(checkinPostRequestBody);\n</code></pre>\n<p>But this doesn't work. I'm getting 502 Generic server error.\nWhat am i doing wrong ?</p>\n",
    "tags" : [ "java", "graphserviceclient" ],
    "owner" : {
      "account_id" : 7447337,
      "reputation" : 1267,
      "user_id" : 5663107,
      "user_type" : "registered",
      "accept_rate" : 18,
      "profile_image" : "https://www.gravatar.com/avatar/c257512a8978ca4172e3c468cc07cddb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Lazaruss",
      "link" : "https://stackoverflow.com/users/5663107/lazaruss"
    },
    "is_answered" : false,
    "view_count" : 35,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1747933911,
    "creation_date" : 1747933911,
    "link" : "https://stackoverflow.com/questions/79634238/upload-a-file-using-graphserviceclient",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140491171,
    "post_id" : 79634238,
    "body" : "It seems java does not support this method yet. I was able to use RestTemplate and rest apis to 1) get the token, 2) upload file with content, 3) add field attributes.",
    "score" : 0,
    "owner" : {
      "account_id" : 7447337,
      "reputation" : 1267,
      "user_id" : 5663107,
      "user_type" : "registered",
      "accept_rate" : 18,
      "profile_image" : "https://www.gravatar.com/avatar/c257512a8978ca4172e3c468cc07cddb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Lazaruss",
      "link" : "https://stackoverflow.com/users/5663107/lazaruss"
    },
    "creation_date" : 1749146198,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}