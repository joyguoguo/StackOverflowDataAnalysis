{
  "question" : {
    "question_id" : 79553344,
    "title" : "While executing script to execute a query, getting can&#39;t read &quot;1207&quot;: no such variable",
    "body" : "<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\n# Set paths and variables\nJAVAPATH=/usr/java/latest/bin/java\nPRESTO_JAR_PATH=/data2/pqr/presto/trino\nPRESTO_SERVER=https://a.b.c.d:9443\nUSER=pqrxyz\nPASSWORD=&quot;pwdenb\\$1207&quot;  # Password with $ symbol correctly escaped\nPRESTO_CATALOG=xyzp\nPRESTO_SCHEMA=cmlop\nTABLE_NAME=test_table\n\nfilename_tmp=utcrj.csv\ncurrent_time=$(date +%s)\n\nlogfileName=$current_time\nlogfileName+=&quot;_trino_error.log&quot;\n\nlogfile=&quot;/data2/pqr/dev/logs/$current_time.txt&quot;\n\nquery=&quot;select * from test_table limit 100&quot;\n\n# First, login and execute the query using the full password\necho &quot;Logging in and executing query...&quot;\n/usr/bin/expect &lt;&lt;EOD\nset timeout -1\nspawn $JAVAPATH -Xmx1G -jar $PRESTO_JAR_PATH \\\n  --server $PRESTO_SERVER \\\n  --user $USER \\\n  --password $PASSWORD \\\n  --catalog $PRESTO_CATALOG \\\n  --schema $PRESTO_SCHEMA \\\n  --debug \\\n  --execute &quot;$query&quot; \\\n  --output-format TSV_HEADER \\\n  &gt; &quot;/data2/pqr/dev/$filename_tmp&quot; \\\n  2&gt; &quot;/data2/pqr/dev/logs/$logfileName&quot;\n\n# Handling password prompt (this step is inside the expect block above)\nexpect {\n    &quot;Password for user $USER:&quot; {\n        send &quot;$PASSWORD\\r&quot;\n    }\n    timeout {\n        puts &quot;Timed out waiting for password prompt&quot;\n        exit 1\n    }\n}\nexpect eof  # Wait for the end of the spawned process\nEOD\n\nrunStatus=$?\n\n# Check if the command was successful\nif [ $runStatus -ne 0 ]; then\n    echo &quot;Error executing query. Please check logs.&quot;\n    exit 1\nfi\n\n# Convert TSV to CSV\necho &quot;Converting TSV to CSV...&quot;\nsed 's/\\t/,/g' &quot;/data2/pqr/dev/$filename_tmp&quot; &gt; &quot;/data2/pqr/dev/DailyTrend.csv&quot;\n\n# Clean up temporary file\necho &quot;Cleaning up temporary files...&quot;\nrm /data2/pqr/dev/$filename_tmp\n\necho &quot;Process completed successfully!&quot;\n</code></pre>\n<p>While trying to execute the above sh script, I get the below error</p>\n<p>Password is matching with the one I have</p>\n<pre class=\"lang-none prettyprint-override\"><code>can't read &quot;1207&quot;: no such variable\n    while executing\n&quot;spawn /usr/java/latest/bin/java -Xmx1G -jar /data2/cgnat/presto/trino   --server https://a.b.c.d:9443  --user b0267175   --pa...&quot;\n</code></pre>\n<p>I tried removing $ from script, but it still did not work.</p>\n",
    "tags" : [ "java", "hive", "trino" ],
    "owner" : {
      "account_id" : 23586307,
      "reputation" : 1,
      "user_id" : 17624713,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJzLvLPZDn_5gNy3F3Wn9k4cMtFl-9zJhLyv6Yts=k-s256",
      "display_name" : "Azmat Hayat",
      "link" : "https://stackoverflow.com/users/17624713/azmat-hayat"
    },
    "is_answered" : false,
    "view_count" : 41,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743758935,
    "creation_date" : 1743693453,
    "link" : "https://stackoverflow.com/questions/79553344/while-executing-script-to-execute-a-query-getting-cant-read-1207-no-such-va",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140332837,
    "post_id" : 79553344,
    "body" : "get anywhere with this? did you brute-force it by changing your password to not have a $ in it just to verify that everything else is ok?",
    "score" : 0,
    "owner" : {
      "account_id" : 6116286,
      "reputation" : 381,
      "user_id" : 4771210,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-9yuPwV8tRJM/AAAAAAAAAAI/AAAAAAAAAF4/dkCswo2Ot7c/s256-rj/photo.jpg",
      "display_name" : "Lester Martin",
      "link" : "https://stackoverflow.com/users/4771210/lester-martin"
    },
    "creation_date" : 1744634570,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140300066,
    "post_id" : 79553344,
    "body" : "no help same error. I want to first login to trino using username and password and then execute the query and output of query i want to store in csv file. I want to do this daily by scheduling on cron",
    "score" : 0,
    "owner" : {
      "account_id" : 23586307,
      "reputation" : 1,
      "user_id" : 17624713,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJzLvLPZDn_5gNy3F3Wn9k4cMtFl-9zJhLyv6Yts=k-s256",
      "display_name" : "Azmat Hayat",
      "link" : "https://stackoverflow.com/users/17624713/azmat-hayat"
    },
    "creation_date" : 1743781224,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140295946,
    "post_id" : 79553344,
    "body" : "When defining the variable, you can either use single quotes around variable value, or escape it with no quotes.  IE - <code>foo=&#39;a$b&#39;</code> or <code>foo=a\\$b</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 3267339,
      "reputation" : 8893,
      "user_id" : 2751573,
      "user_type" : "registered",
      "accept_rate" : 52,
      "profile_image" : "https://i.sstatic.net/GsKBw.jpg?s=256",
      "display_name" : "Andrew",
      "link" : "https://stackoverflow.com/users/2751573/andrew"
    },
    "creation_date" : 1743699274,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140295695,
    "post_id" : 79553344,
    "body" : "Try single quote characters around the password.",
    "score" : 1,
    "owner" : {
      "account_id" : 29555382,
      "reputation" : 1005,
      "user_id" : 22651151,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/HH5yW.jpg?s=256",
      "display_name" : "OldBoy",
      "link" : "https://stackoverflow.com/users/22651151/oldboy"
    },
    "creation_date" : 1743695637,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}