{
  "question" : {
    "question_id" : 79702449,
    "title" : "Maven YAML pipeline not running tests but tests exist",
    "body" : "<p>I am trying to test my code in a YAML pipeline using Maven but for whatever reason mvn test seems to skip over the compiled test.</p>\n<p>Here is part of my pipeline, with specific point to look at the test job:</p>\n<pre><code>default:\n  image: maven:latest\n  before_script:\n    - apt-get update\n    - apt-get -y install make\n\ntest-job:\n  stage: test\n  script:\n    - mvn compile test-compile\n    - mvn -X test\n  artifacts:\n    reports:\n      junit:\n        - target/surefire-reports/*.xml\n    paths:\n      - target/\n\n  rules:\n    - if: '$CI_COMMIT_BRANCH == &quot;main&quot;'\n</code></pre>\n<p>When running mvn test on my device I receive this response:</p>\n<pre><code>[ERROR] Failures: \n[ERROR]   ForwardTest.movingForwardChangesPositionTest:145-&gt;movingForwardChangesPosition:177 expected: &lt;1&gt; but was: &lt;0&gt;\n[ERROR]   LaunchTest.canLaunchAnotherRobot:268 expected: &lt;OK&gt; but was: &lt;ERROR&gt;\n[ERROR]   LookAroundTest.RobotSeesObstacleAndThreeRobotsTest:266-&gt;RobotSeesObstacleAndThreeRobots:289 R1 failed to launch ==&gt; expected: &lt;OK&gt; but was: &lt;ERROR&gt;\n[ERROR] Errors: \n[ERROR]   LaunchTest.launchRobotsIntoWorldWithObject:316 NullPointer Cannot invoke &quot;com....\n[INFO]\n[ERROR] Tests run: 59, Failures: 3, Errors: 1, Skipped: 0\n[INFO]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:19 min\n[INFO] Finished at: 2025-07-15T19:17:04+02:00\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>But when the pipeline runs it, it runs 0 tests. I have run it through debug and this is what I get:</p>\n<pre><code>[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n[DEBUG] Determined Maven Process ID 253\n[DEBUG] boot classpath:  /root/.m2/repository/org/apache/maven/surefire/surefire-booter/2.22.1/surefire-booter-2.22.1.jar  /root/.m2/repository/org/apache/maven/surefire/surefire-api/2.22.1/surefire-api-2.22.1.jar  /root/.m2/repository/org/apache/maven/surefire/surefire-logger-api/2.22.1/surefire-logger-api-2.22.1.jar  /builds/jurosecpt024/brownfields_robot_worlds_5/target/test-classes  /builds/jurosecpt024/brownfields_robot_worlds_5/target/classes  /root/.m2/repository/com/fasterxml/jackson/core/jackson-databind/2.13.4.2/jackson-databind-2.13.4.2.jar  /root/.m2/repository/com/fasterxml/jackson/core/jackson-annotations/2.13.4/jackson-annotations-2.13.4.jar  /root/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.13.4/jackson-core-2.13.4.jar  /root/.m2/repository/org/junit/jupiter/junit-jupiter-engine/5.6.3/junit-jupiter-engine-5.6.3.jar  /root/.m2/repository/org/apiguardian/apiguardian-api/1.1.0/apiguardian-api-1.1.0.jar  /root/.m2/repository/org/junit/platform/junit-platform-engine/1.6.3/junit-platform-engine-1.6.3.jar  /root/.m2/repository/org/opentest4j/opentest4j/1.2.0/opentest4j-1.2.0.jar  /root/.m2/repository/org/junit/platform/junit-platform-commons/1.6.3/junit-platform-commons-1.6.3.jar  /root/.m2/repository/org/junit/jupiter/junit-jupiter-api/5.6.3/junit-jupiter-api-5.6.3.jar  /root/.m2/repository/org/mockito/mockito-core/3.6.28/mockito-core-3.6.28.jar  /root/.m2/repository/net/bytebuddy/byte-buddy/1.10.18/byte-buddy-1.10.18.jar  /root/.m2/repository/net/bytebuddy/byte-buddy-agent/1.10.18/byte-buddy-agent-1.10.18.jar  /root/.m2/repository/org/objenesis/objenesis/3.1/objenesis-3.1.jar  /root/.m2/repository/info/picocli/picocli/4.6.1/picocli-4.6.1.jar  /root/.m2/repository/za/co/wethinkcode/flow/1.0.2/flow-1.0.2.jar  /root/.m2/repository/org/junit/jupiter/junit-jupiter/5.9.3/junit-jupiter-5.9.3.jar  /root/.m2/repository/org/junit/jupiter/junit-jupiter-params/5.9.3/junit-jupiter-params-5.9.3.jar  /root/.m2/repository/org/eclipse/jgit/org.eclipse.jgit/6.8.0.202311291450-r/org.eclipse.jgit-6.8.0.202311291450-r.jar  /root/.m2/repository/com/googlecode/javaewah/JavaEWAH/1.2.3/JavaEWAH-1.2.3.jar  /root/.m2/repository/commons-codec/commons-codec/1.16.0/commons-codec-1.16.0.jar  /root/.m2/repository/org/yaml/snakeyaml/2.0/snakeyaml-2.0.jar  /root/.m2/repository/org/slf4j/slf4j-nop/2.0.17/slf4j-nop-2.0.17.jar  /root/.m2/repository/org/slf4j/slf4j-api/2.0.17/slf4j-api-2.0.17.jar  /root/.m2/repository/junit/junit/4.13.2/junit-4.13.2.jar  /root/.m2/repository/org/hamcrest/hamcrest-core/1.3/hamcrest-core-1.3.jar  /root/.m2/repository/org/json/json/20250107/json-20250107.jar  /root/.m2/repository/org/apache/maven/surefire/surefire-junit-platform/2.22.1/surefire-junit-platform-2.22.1.jar  /root/.m2/repository/org/junit/platform/junit-platform-launcher/1.3.1/junit-platform-launcher-1.3.1.jar\n[DEBUG] boot(compact) classpath:  surefire-booter-2.22.1.jar  surefire-api-2.22.1.jar  surefire-logger-api-2.22.1.jar  test-classes  classes  jackson-databind-2.13.4.2.jar  jackson-annotations-2.13.4.jar  jackson-core-2.13.4.jar  junit-jupiter-engine-5.6.3.jar  apiguardian-api-1.1.0.jar  junit-platform-engine-1.6.3.jar  opentest4j-1.2.0.jar  junit-platform-commons-1.6.3.jar  junit-jupiter-api-5.6.3.jar  mockito-core-3.6.28.jar  byte-buddy-1.10.18.jar  byte-buddy-agent-1.10.18.jar  objenesis-3.1.jar  picocli-4.6.1.jar  flow-1.0.2.jar  junit-jupiter-5.9.3.jar  junit-jupiter-params-5.9.3.jar  org.eclipse.jgit-6.8.0.202311291450-r.jar  JavaEWAH-1.2.3.jar  commons-codec-1.16.0.jar  snakeyaml-2.0.jar  slf4j-nop-2.0.17.jar  slf4j-api-2.0.17.jar  junit-4.13.2.jar  hamcrest-core-1.3.jar  json-20250107.jar  surefire-junit-platform-2.22.1.jar  junit-platform-launcher-1.3.1.jar\n[DEBUG] Forking command line: /bin/sh -c cd /builds/jurosecpt024/brownfields_robot_worlds_5 &amp;&amp; /opt/java/openjdk/bin/java -jar /builds/jurosecpt024/brownfields_robot_worlds_5/target/surefire/surefirebooter176623298947581464.jar /builds/jurosecpt024/brownfields_robot_worlds_5/target/surefire 2025-07-15T16-41-44_933-jvmRun1 surefire6481390047470844897tmp surefire_013346051799234250954tmp\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  21.732 s\n[INFO] Finished at: 2025-07-15T16:41:55Z\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p>So the test-classes file is being checked but it's not finding anything but the compilation succeeded and the artifacts I get show the .class files there. Please help</p>\n",
    "tags" : [ "java", "maven", "maven-surefire-plugin" ],
    "owner" : {
      "account_id" : 43048940,
      "reputation" : 1,
      "user_id" : 31048568,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0d4b72656060c7dd5c8cf0f9fa984c50?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jude Rose",
      "link" : "https://stackoverflow.com/users/31048568/jude-rose"
    },
    "is_answered" : false,
    "view_count" : 69,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1752603855,
    "creation_date" : 1752600132,
    "link" : "https://stackoverflow.com/questions/79702449/maven-yaml-pipeline-not-running-tests-but-tests-exist",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140592375,
    "post_id" : 79702449,
    "body" : "This part <code>surefire-booter-2.22.1.jar </code> shows me you are using an ancient old version of maven-surefire-plugin ... use the 3.5.2 .... no such old things...",
    "score" : 1,
    "owner" : {
      "account_id" : 112317,
      "reputation" : 98455,
      "user_id" : 296328,
      "user_type" : "registered",
      "accept_rate" : 60,
      "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
      "display_name" : "khmarbaise",
      "link" : "https://stackoverflow.com/users/296328/khmarbaise"
    },
    "creation_date" : 1752618919,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592136,
    "post_id" : 79702449,
    "body" : "This is a YAML for gitlab. And as for the redundancy, it came because I was going mad with trying to figure out what was wrong. Not that it helped at all of course.",
    "score" : 0,
    "owner" : {
      "account_id" : 43048940,
      "reputation" : 1,
      "user_id" : 31048568,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0d4b72656060c7dd5c8cf0f9fa984c50?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jude Rose",
      "link" : "https://stackoverflow.com/users/31048568/jude-rose"
    },
    "creation_date" : 1752610410,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140591866,
    "post_id" : 79702449,
    "body" : "... cont&#39;d: See <a href=\"https://stackoverflow.com/a/30953905/1744774\">this answer to Maven: Lifecycle vs. Phase vs. Plugin vs. Goal</a> about Maven&#39;s phases and more.",
    "score" : 0,
    "owner" : {
      "account_id" : 1937747,
      "reputation" : 15080,
      "user_id" : 1744774,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
      "display_name" : "Gerold Broser",
      "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
    },
    "creation_date" : 1752602944,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140591861,
    "post_id" : 79702449,
    "body" : "Just a few hints: <code>mvn compile test-compile</code> is pointless since <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Default_Lifecycle\" rel=\"nofollow noreferrer\">the <code>compile</code> phase is passed prior to <code>test-compile</code> anyway</a>. (Which makes sense since the classes under test should be compiled before testing them, of course.) <code>mvn compile test-compile</code> immediately before <code>mvn test</code> is pointless, too, since you can see under the link what&#39;s passed prior to the <code>test</code> phase.",
    "score" : 0,
    "owner" : {
      "account_id" : 1937747,
      "reputation" : 15080,
      "user_id" : 1744774,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/e3xZV.png?s=256",
      "display_name" : "Gerold Broser",
      "link" : "https://stackoverflow.com/users/1744774/gerold-broser"
    },
    "creation_date" : 1752602879,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140591798,
    "post_id" : 79702449,
    "body" : "The YAML is for gitlab?",
    "score" : 0,
    "owner" : {
      "account_id" : 888714,
      "reputation" : 36717,
      "user_id" : 927493,
      "user_type" : "registered",
      "accept_rate" : 61,
      "profile_image" : "https://i.sstatic.net/sxsnm.png?s=256",
      "display_name" : "JF Meier",
      "link" : "https://stackoverflow.com/users/927493/jf-meier"
    },
    "creation_date" : 1752601337,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}