{
  "question" : {
    "question_id" : 79755837,
    "title" : "Problem upgrading custom SPI JAR in Keycloak 26.1.3 (expects old version)",
    "body" : "<p>I'm having a problem with Quarkus Cache</p>\n<p>I’m using Keycloak 26.1.3 (Quarkus distribution, Windows) and I created a custom SPI.</p>\n<p>My first version was packaged as custom-spi-13.0.0.jar and I placed it in the providers folder.</p>\n<p>Later I created a new version called custom-spi-14.0.0.jar. I deleted the old JAR and copied the new one.</p>\n<p>When I run Keycloak, it still complains that it is expecting the 13.0.0 JAR.</p>\n<p>Things I tried:</p>\n<ul>\n<li>Deleted the old JAR (custom-spi-13.0.0.jar).</li>\n<li>Put the new JAR (custom-spi-14.0.0.jar) in providers.</li>\n<li>Deleted the folders data/ and lib/quarkus/.</li>\n<li>Ran <code>kc.bat build</code>.</li>\n</ul>\n<p>At this point I get the following error:</p>\n<pre><code>F:\\keycloak\\bin&gt;kc.bat build Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:118) at java.base/java.lang.reflect.Method.invoke(Method.java:580) at io.quarkus.bootstrap.runner.QuarkusEntryPoint.doRun(QuarkusEntryPoint.java:62) at io.quarkus.bootstrap.runner.QuarkusEntryPoint.main(QuarkusEntryPoint.java:33) Caused by: picocli.CommandLine$InitializationException: Could not instantiate and add subcommand org.keycloak.quarkus.runtime.cli.command.Export: java.lang.RuntimeException: java.nio.file.NoSuchFileException: F:\\keycloak\\lib\\..\\providers\\jakarta.ws.rs-api-3.1.0.jar......\n</code></pre>\n<p>So it looks like Keycloak is still trying to load cached metadata for the old version and fails when it’s missing.</p>\n",
    "tags" : [ "java", "keycloak", "keycloak-spi" ],
    "owner" : {
      "account_id" : 43794225,
      "reputation" : 1,
      "user_id" : 31420638,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e264b22a085284dfa39579d59600a024?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alejandro Sanchez Torres",
      "link" : "https://stackoverflow.com/users/31420638/alejandro-sanchez-torres"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1757343830,
    "creation_date" : 1756995424,
    "link" : "https://stackoverflow.com/questions/79755837/problem-upgrading-custom-spi-jar-in-keycloak-26-1-3-expects-old-version",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140757094,
    "post_id" : 79755837,
    "body" : "Why does the error mention <code>jakarta.ws.rs-api-3.1.0.jar</code> when you said your custom SPI is packaged as <code>custom-spi-x.x.x.jar</code>? Did you also inadvertently delete other JARs in the folder?",
    "score" : 0,
    "owner" : {
      "account_id" : 16057,
      "reputation" : 19284,
      "user_id" : 34586,
      "user_type" : "registered",
      "accept_rate" : 79,
      "profile_image" : "https://www.gravatar.com/avatar/ac3e559ed68f6ac290116c629934a91d?s=256&d=identicon&r=PG",
      "display_name" : "Lukman",
      "link" : "https://stackoverflow.com/users/34586/lukman"
    },
    "creation_date" : 1758722544,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140714931,
    "post_id" : 79755837,
    "body" : "Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1756998995,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}