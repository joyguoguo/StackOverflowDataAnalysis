{
  "question" : {
    "question_id" : 79560256,
    "title" : "Best way to generate parent schema specification using Swagger Gradle Plugin",
    "body" : "<p>Swagger Gradle Plugin generates a JSON OpenAPI specification from a Jakarta Web application specification.</p>\n<pre><code>plugins {\n    id 'java'\n    id 'io.swagger.core.v3.swagger-gradle-plugin' version '2.2.30'\n}\n\ngroup = 'fr.laboiteadodo.issues'\nversion = '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'io.swagger.core.v3:swagger-jaxrs2-jakarta:2.2.30'\n    implementation 'jakarta.ws.rs:jakarta.ws.rs-api:4.0.0'\n}\n\ntest {\n    useJUnitPlatform()\n}\n\nresolve {\n    classpath = sourceSets.main.runtimeClasspath\n    openAPI31 = true\n    outputDir = layout.buildDirectory\n    outputFileName = 'openapi'\n    prettyPrint = true\n    resourceClasses = ['MyResource']\n}\n</code></pre>\n<p>The application provides a base DTO <code>Foo</code> extended by <code>ExtendedFoo</code> and <code>ExtraFoo</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Foo {\n    String getLorem();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// @Schema(allOf = Foo.class)\npublic interface ExtendedFoo extends Foo {\n    String getIpsum();\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// @Schema(allOf = Foo.class)\npublic interface ExtraFoo extends Foo {\n    String getDolor();\n}\n</code></pre>\n<p>And the resource uses only the extended DTO :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;&quot;)\npublic interface MyResource {\n    @GET\n    @Path(&quot;extended&quot;)\n    ExtendedFoo getExtended();\n\n    @GET\n    @Path(&quot;extra&quot;)\n    ExtraFoo getExtra();\n}\n</code></pre>\n<p>With this configuration, <code>Foo</code> is not exposed by the specification. For some reasons, I need it to be in the OpenAPI file.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  // ...\n  &quot;components&quot; : {\n    &quot;schemas&quot; : {\n      &quot;ExtendedFoo&quot; : {\n        &quot;type&quot; : &quot;object&quot;,\n        &quot;properties&quot; : {\n          &quot;ipsum&quot; : {\n            &quot;type&quot; : &quot;string&quot;\n          },\n          &quot;lorem&quot; : {\n            &quot;type&quot; : &quot;string&quot;\n          }\n        }\n      },\n      &quot;ExtraFoo&quot; : {\n        &quot;type&quot; : &quot;object&quot;,\n        &quot;properties&quot; : {\n          &quot;dolor&quot; : {\n            &quot;type&quot; : &quot;string&quot;\n          },\n          &quot;lorem&quot; : {\n            &quot;type&quot; : &quot;string&quot;\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>If I annotate the subtypes with <code>@Schema(allOf = Foo.class)</code>, <code>Foo</code> becomes part of the OpenAPI specification file but all its properties are repeated in <code>ExtendedFoo</code> and <code>ExtraFoo</code> schemas despite of the presence of <code>{ &quot;$ref&quot; : &quot;#/components/schemas/Foo&quot; }</code> :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  // ...\n  &quot;components&quot; : {\n    &quot;schemas&quot; : {\n      &quot;ExtendedFoo&quot; : {\n        &quot;allOf&quot; : [ {\n          &quot;$ref&quot; : &quot;#/components/schemas/Foo&quot;\n        }, {\n          &quot;type&quot; : &quot;object&quot;,\n          &quot;properties&quot; : {\n            &quot;ipsum&quot; : {\n              &quot;type&quot; : &quot;string&quot;\n            },\n            &quot;lorem&quot; : {\n              &quot;type&quot; : &quot;string&quot;\n            }\n          }\n        } ]\n      },\n      &quot;Foo&quot; : {\n        &quot;type&quot; : &quot;object&quot;,\n        &quot;properties&quot; : {\n          &quot;lorem&quot; : {\n            &quot;type&quot; : &quot;string&quot;\n          }\n        }\n      },\n      &quot;ExtraFoo&quot; : {\n        &quot;allOf&quot; : [ {\n          &quot;$ref&quot; : &quot;#/components/schemas/Foo&quot;\n        }, {\n          &quot;type&quot; : &quot;object&quot;,\n          &quot;properties&quot; : {\n            &quot;dolor&quot; : {\n              &quot;type&quot; : &quot;string&quot;\n            },\n            &quot;lorem&quot; : {\n              &quot;type&quot; : &quot;string&quot;\n            }\n          }\n        } ]\n      }\n    }\n  }\n}\n</code></pre>\n<p>Is that a bug ? Is there a best way to have all of them in the final OpenAPI JSON file ?</p>\n",
    "tags" : [ "java", "gradle", "swagger", "openapi" ],
    "owner" : {
      "account_id" : 8371967,
      "reputation" : 159,
      "user_id" : 6286793,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/756b8169fdd66036d7f0eb756df3f9b6?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Calcimicium",
      "link" : "https://stackoverflow.com/users/6286793/calcimicium"
    },
    "is_answered" : false,
    "view_count" : 53,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744039363,
    "creation_date" : 1744039363,
    "link" : "https://stackoverflow.com/questions/79560256/best-way-to-generate-parent-schema-specification-using-swagger-gradle-plugin",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}