{
  "question" : {
    "question_id" : 79571417,
    "title" : "Wiremock stubbing for queries with list values",
    "body" : "<p>I have no problem with stubbing request with several query parameters in Wiremock. But when one or many of them are required to be in format <code>?name=value1&amp;name=value2&amp;name=value3</code> I get stumped.\nI was hoping that I get to add the same parameter to builder several times but it seems It will only get the last one. Is there some other methods in addition to <code>withQueryParam</code> or <code>withQueryParams</code> or can I use them somehow differently?</p>\n<p>Example snippet of code</p>\n<pre><code>myStub(Long companyId, List&lt;Long&gt; personIds){\n...\n     MappingBuilder mappingBuilder =\n            request(HttpMethod.GET.name(), urlPathEqualTo(&quot;someUrl&quot;)).withQueryParams(Map.of(&quot;companyId&quot;, equalTo(companyId.toString())));\n        personIds.forEach(id -&gt; mappingBuilder.withQueryParam(&quot;personIds&quot;, equalTo(id.toString())));\n    \n        stubFor(mappingBuilder.willReturn(aResponse()\n...\n\n</code></pre>\n<p>Will get a stubbing error from which it can be seen that only on of the patterns are added to key. Although queryparams should support multiple values per key.</p>\n<pre><code>-----------------------------------------------------------------------------------------------------------------------\n| Closest stub                                             | Request                                                  |\n-----------------------------------------------------------------------------------------------------------------------\n\n-----------------------------------------------------------------------------------------------------------------------\n                                                           |\nGET                                                        | GET\n[path] url                                                 | url?personIds=0personIds=1&amp;companyId=2\n                                                           |\n                                                           |\nQuery: companyId = 2                                       |                                     &lt;&lt;&lt;&lt;&lt; Query is not present\nQuery: personIds = 1                                       | personIds: 0\n                                                           | personIds: 1\n                                                           |\n                                                           |\n-----------------------------------------------------------------------------------------------------------------------\n</code></pre>\n",
    "tags" : [ "java", "wiremock", "stubbing" ],
    "owner" : {
      "account_id" : 3020730,
      "reputation" : 187,
      "user_id" : 2561849,
      "user_type" : "registered",
      "accept_rate" : 33,
      "profile_image" : "https://graph.facebook.com/100005851511274/picture?type=large",
      "display_name" : "Jens-Konrad Preem",
      "link" : "https://stackoverflow.com/users/2561849/jens-konrad-preem"
    },
    "is_answered" : false,
    "view_count" : 54,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744539318,
    "creation_date" : 1744538925,
    "link" : "https://stackoverflow.com/questions/79571417/wiremock-stubbing-for-queries-with-list-values",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}