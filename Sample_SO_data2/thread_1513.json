{
  "question" : {
    "question_id" : 79702259,
    "title" : "Exclude certain nested props in DTO with Jackson",
    "body" : "<p>Assuming I have these three DTO's</p>\n<pre><code>data class CountryDTO(\n    val name: String,\n    val isoAlpha3: String,\n    val subContinent: SubContinentDto,\n    val continent: ContinentDto\n)\n\ndata class SubContinentDTO(\n    val name: String,\n    val continent: ContinentDto\n)\n\ndata class ContinentDTO(\n    val name: String,\n)\n</code></pre>\n<p>A response with a single <code>CountryDTO</code> in it would have duplicated values: <code>ContinentDTO</code> would be in <code>CountryDTO</code> <em>and</em> nested in <code>SubContinentDTO</code>. If I return a <code>CountryDTO</code>, I would not want <code>ContinentDTO</code> to be nested in <code>SubContinentDTO</code>, but only &quot;on the first level&quot; of <code>CountryDTO</code>.</p>\n<p>But, if I return a <code>SubContinentDTO</code>, I would want a <code>ContinentDTO</code> to be in there, becaue now its not nested anymore.</p>\n<p>Now, I could create a <code>CountryNotNestedDTO</code> which would contain a <code>SubContinentNotNestedDTO</code></p>\n<pre><code>data class CountryNotNestedDTO(\n    val name: String,\n    val isoAlpha3: String,\n    val subContinent: SubContinentNotNestedDTO,\n    val continent: ContinentDto\n)\n\ndata class SubContinentNotNestedDTO(\n    val name: String,\n)\n</code></pre>\n<p>But this feels rather strange... Is there a way to tell Jackson to exclude certain properties from classes, depending on where the class is used? Or is there something else I could do in order not to have these more or less duplicated DTOs?</p>\n",
    "tags" : [ "java", "kotlin", "jackson", "dto" ],
    "owner" : {
      "account_id" : 4640755,
      "reputation" : 12779,
      "user_id" : 3935035,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/5c21dec7663fbae432c1af0df0c8b8f1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "four-eyes",
      "link" : "https://stackoverflow.com/users/3935035/four-eyes"
    },
    "is_answered" : true,
    "view_count" : 63,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1752592230,
    "creation_date" : 1752590982,
    "link" : "https://stackoverflow.com/questions/79702259/exclude-certain-nested-props-in-dto-with-jackson",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79702274,
    "question_id" : 79702259,
    "body" : "<p>This is a typical problem when creating an API. I know of 3 ways of doing this:</p>\n<ol>\n<li><p>Move all the common field into a separate <code>SubCountinentFlatDto</code>. And in your <code>SubContinentFullDto</code> include the common <code>SubCountinentFlatDto</code> and mark it as <code>@JsonUnwrapped</code> - this way during serialization all the nested fields are going to be included in the parent object.</p>\n</li>\n<li><p>Use inheritance, but this will limit you in how flexible you want to be in separating the DTOs because multiple inheritance isn't a thing in Java.</p>\n</li>\n<li><p>Use <code>@JsonView</code> to mark that this field is applicable only in certain contexts. During (de)serialization you'll need to specify which views you're interested in. However, this is a questionable practice because later you'll be passing this object to your methods which won't know about views and won't know which fields to use or not.</p>\n</li>\n</ol>\n<p>A typical situation when you want to have different sets of fields is <code>POST</code>ing a resource (the <code>id</code> field should be excluded) and <code>GET</code>ing resource (<code>id</code> must be present).</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 476019,
      "reputation" : 15626,
      "user_id" : 886697,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/b5Dq4.jpg?s=256",
      "display_name" : "Stanislav Bashkyrtsev",
      "link" : "https://stackoverflow.com/users/886697/stanislav-bashkyrtsev"
    },
    "creation_date" : 1752591826,
    "last_activity_date" : 1752592230,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79702274" : [ {
      "comment_id" : 140591425,
      "post_id" : 79702274,
      "body" : "I do not have difficulties followng them. But since I posted a Q with actual examples and did not as a general &quot;How to to do this&quot; Q, in the spirit of StackOverflow, it would be nice to have an example/to see this solved :)",
      "score" : 0,
      "owner" : {
        "account_id" : 4640755,
        "reputation" : 12779,
        "user_id" : 3935035,
        "user_type" : "registered",
        "accept_rate" : 86,
        "profile_image" : "https://www.gravatar.com/avatar/5c21dec7663fbae432c1af0df0c8b8f1?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "four-eyes",
        "link" : "https://stackoverflow.com/users/3935035/four-eyes"
      },
      "creation_date" : 1752593013,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140591405,
      "post_id" : 79702274,
      "body" : "@four-eyes Do you have difficulties following these? If so, would be great to see more concrete questions. Otherwise, these things seem to be trivial to find on the internet.",
      "score" : 0,
      "owner" : {
        "account_id" : 476019,
        "reputation" : 15626,
        "user_id" : 886697,
        "user_type" : "registered",
        "accept_rate" : 92,
        "profile_image" : "https://i.sstatic.net/b5Dq4.jpg?s=256",
        "display_name" : "Stanislav Bashkyrtsev",
        "link" : "https://stackoverflow.com/users/886697/stanislav-bashkyrtsev"
      },
      "creation_date" : 1752592619,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140591381,
      "post_id" : 79702274,
      "body" : "Thanks a lot. Could you give examples, that would improve the quality of your answer :)",
      "score" : 0,
      "owner" : {
        "account_id" : 4640755,
        "reputation" : 12779,
        "user_id" : 3935035,
        "user_type" : "registered",
        "accept_rate" : 86,
        "profile_image" : "https://www.gravatar.com/avatar/5c21dec7663fbae432c1af0df0c8b8f1?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "four-eyes",
        "link" : "https://stackoverflow.com/users/3935035/four-eyes"
      },
      "creation_date" : 1752591976,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}