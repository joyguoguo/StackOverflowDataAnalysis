{
  "question" : {
    "question_id" : 79587478,
    "title" : "How can I run multiple tests in the same Chrome window",
    "body" : "<p>I have seen several posts around this, but none that really answer how to do it. We are currently using Selenium and Java to test our applications in Chrome. We are moving to a single sign-on (SSO) that requires manual intervention. The thought is to spin up a chromedriver window and manually intervene when needed in the SSO, but then to spin up all subsequent tests to run in that same chromedriver window. Is this even possible to do and how would you go about doing it?</p>\n<p>This is what my current setup method looks like. We are setting the webDriverClassName to use ChromeDriver within a properties file.</p>\n<pre><code>@Before\npublic void setup() throws Exception {\n    logger.debug(&quot;running test {}#{}()&quot;, testClassName, testMethodName);\n    Class&lt;?&gt; webDriverClass = Class.forName(webDriverClassName);\n    if (ChromeDriver.class.equals(webDriverClass)) {\n        ChromeOptions options = getChromeOptions();\n        driver = new ChromeDriver(options);\n    }\n\n    driver.manage().timeouts().implicitlyWait(webDriverDefaultTimeout);\n\n    wait = new WebDriverWait(driver, webDriverDefaultTimeout) {\n        @SuppressWarnings(&quot;unused&quot;)\n        public &lt;V&gt; V until(Function&lt;? super WebDriver, V&gt; isTrue) {\n            long start = System.currentTimeMillis();\n            try {\n                return super.until(isTrue);\n            } finally {\n                logger.debug(&quot;waited {} ms&quot;, System.currentTimeMillis() - start);\n            }\n        }\n\n        @SuppressWarnings(&quot;unused&quot;)\n        public void until(ExpectedCondition&lt;Boolean&gt; isTrue) {\n            long start = System.currentTimeMillis();\n            try {\n                super.until(isTrue);\n            } finally {\n                logger.debug(&quot;waited {} ms&quot;, System.currentTimeMillis() - start);\n            }\n        }\n    };\n    seleniumUtils.setWait(wait);\n    seleniumUtils.setDriver(driver);\n    driver.manage().window().maximize();\n}\n</code></pre>\n",
    "tags" : [ "java", "selenium-webdriver", "single-sign-on" ],
    "owner" : {
      "account_id" : 41304994,
      "reputation" : 1,
      "user_id" : 30226109,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dcb61662902d16657e03afddf3a6950f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kristie",
      "link" : "https://stackoverflow.com/users/30226109/kristie"
    },
    "is_answered" : false,
    "view_count" : 61,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1745399721,
    "creation_date" : 1745357808,
    "link" : "https://stackoverflow.com/questions/79587478/how-can-i-run-multiple-tests-in-the-same-chrome-window",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140363284,
    "post_id" : 79587478,
    "body" : "Ooof. I would talk to dev about a bypass or something, at least in the lower environments, that would allow you to test the application without the SSO requirements. Or... maybe they would allow setting some credentials in Windows Credential Manager that would allow the SSO to succeed without the mobile phone auths.",
    "score" : 1,
    "owner" : {
      "account_id" : 2772450,
      "reputation" : 26488,
      "user_id" : 2386774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=256&d=identicon&r=PG",
      "display_name" : "JeffC",
      "link" : "https://stackoverflow.com/users/2386774/jeffc"
    },
    "creation_date" : 1745446656,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140363138,
    "post_id" : 79587478,
    "body" : "@JeffC, what I mean by &quot;manual invention&quot; is after the username/password are entered, a QR code is displayed followed by 2 authentications on my phone.",
    "score" : 0,
    "owner" : {
      "account_id" : 41304994,
      "reputation" : 1,
      "user_id" : 30226109,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dcb61662902d16657e03afddf3a6950f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kristie",
      "link" : "https://stackoverflow.com/users/30226109/kristie"
    },
    "creation_date" : 1745442711,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140362601,
    "post_id" : 79587478,
    "body" : "@Krisie, Create a singleton SharedWebDriver class that uses a persistent user-data-dir Chrome profile and reuses the same ChromeDriver instance across tests. This ensures all tests run in the same authenticated Chrome window.",
    "score" : 1,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1745431646,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140362503,
    "post_id" : 79587478,
    "body" : "What do you mean by &quot;manual intervention&quot;? Edit your question and update it with more details.",
    "score" : 0,
    "owner" : {
      "account_id" : 2772450,
      "reputation" : 26488,
      "user_id" : 2386774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=256&d=identicon&r=PG",
      "display_name" : "JeffC",
      "link" : "https://stackoverflow.com/users/2386774/jeffc"
    },
    "creation_date" : 1745429700,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140362279,
    "post_id" : 79587478,
    "body" : "@JeffC, I completely agree that the best practice is for every test to spin up a new browser, that is what we currently do. The issue we are running into is that our new SSO requires manual intervention and it would be difficult to do that for every test. So I need to find a way to only sign in once and be able to reuse the authenticated browser again.",
    "score" : 0,
    "owner" : {
      "account_id" : 41304994,
      "reputation" : 1,
      "user_id" : 30226109,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dcb61662902d16657e03afddf3a6950f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kristie",
      "link" : "https://stackoverflow.com/users/30226109/kristie"
    },
    "creation_date" : 1745424619,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140361886,
    "post_id" : 79587478,
    "body" : "@Vijay, can you give me an example of how to keep all the tests running in the same authenticated window? Currently each test still opens a separate browser window.",
    "score" : 0,
    "owner" : {
      "account_id" : 41304994,
      "reputation" : 1,
      "user_id" : 30226109,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dcb61662902d16657e03afddf3a6950f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kristie",
      "link" : "https://stackoverflow.com/users/30226109/kristie"
    },
    "creation_date" : 1745419539,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140360601,
    "post_id" : 79587478,
    "body" : "Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1745396254,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140360051,
    "post_id" : 79587478,
    "body" : "Best practice is to run a single test per browser. Spin up browser, do test, quit browser... repeat for each test. That way you can run a bunch of browsers in parallel and your testing finishes more quickly. Have you tried using <a href=\"https://support.microsoft.com/en-us/windows/credential-manager-in-windows-1b5c916a-6a16-889f-8581-fc16e8165ac0\" rel=\"nofollow noreferrer\">Windows Credential Manager</a> to store the SSO credentials?",
    "score" : 0,
    "owner" : {
      "account_id" : 2772450,
      "reputation" : 26488,
      "user_id" : 2386774,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=256&d=identicon&r=PG",
      "display_name" : "JeffC",
      "link" : "https://stackoverflow.com/users/2386774/jeffc"
    },
    "creation_date" : 1745383157,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140359483,
    "post_id" : 79587478,
    "body" : "Try a custom user-data-dir Chrome profile to persist SSO login and reuse the session across multiple Selenium tests. Initialize ChromeDriver with this profile to keep all tests running in the same authenticated Chrome window.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1745359951,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}