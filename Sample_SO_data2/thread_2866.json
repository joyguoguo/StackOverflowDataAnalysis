{
  "question" : {
    "question_id" : 79591282,
    "title" : "java.lang.NoSuchMethodError: org.mockito.invocation.InvocationFactory.createInvocation(Ljava/lang/Object",
    "body" : "<p>Java 8</p>\n<p>Maven 3.9.</p>\n<p>I want to verify is void private method call.\nI try PowerMock.</p>\n<p>pom.xml</p>\n<pre><code>  &lt;properties&gt;\n        &lt;powermock.version&gt;2.0.2&lt;/powermock.version&gt;\n    &lt;/properties&gt;\n\n  &lt;dependency&gt;\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n      &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;version&gt;4.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n      &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n      &lt;version&gt;4.4.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n      &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n      &lt;version&gt;${powermock.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n      &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n      &lt;version&gt;${powermock.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Here my service class:</p>\n<pre><code>public class MyService {\n\n    private String data;\n\n    public MyService(String data) {\n        this.data = data;\n    }\n\n    public void processData() {\n        // Some processing logic\n        String message = &quot;Processing data: &quot; + data;\n        logEvent(message);\n        // More processing logic\n    }\n\n    private void logEvent(String message) {\n        // In a real scenario, this would log the event\n        System.out.println(&quot;Logging: &quot; + message);\n    }\n}\n</code></pre>\n<p>Here my unit test using PowerMock:</p>\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\nimport static org.mockito.Mockito.times;\nimport static org.powermock.api.mockito.PowerMockito.verifyPrivate;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest(MyService.class) // Prepare MyService for bytecode manipulation\npublic class MyServiceTest {\n\n    @Test\n    public void testProcessData_shouldCallLogEvent() throws Exception {\n        // Arrange\n        String testData = &quot;sampleData&quot;;\n        MyService service = new MyService(testData);\n        MyService spyService = PowerMockito.spy(service); // Create a spy to track private method calls\n\n        // Act\n        spyService.processData(); // HERE ERROR!!!\n\n        // Assert\n        // Verify that the private method 'logEvent' was called exactly once\n        verifyPrivate(spyService, times(1)).invoke(&quot;logEvent&quot;, &quot;Processing data: sampleData&quot;);\n    }\n}\n</code></pre>\n<p>When I run test <strong>testProcessData_shouldCallLogEvent</strong> the error is rise:</p>\n<pre><code>java.lang.NoSuchMethodError: org.mockito.invocation.InvocationFactory.createInvocation(Ljava/lang/Object;Lorg/mockito/mock/MockCreationSettings;Ljava/lang/reflect/Method;Ljava/util/concurrent/Callable;[Ljava/lang/Object;)Lorg/mockito/invocation/Invocation;\n\n    at com.myproject.handler.MyService.processData(MyService.java:15)\n    at com.myproject.handler.MyService.processData(MyService.java:14)\n    at com.myproject.handler.MyServiceTest.testProcessData_shouldCallLogEvent(MyServiceTest.java:26)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n</code></pre>\n",
    "tags" : [ "java", "junit4", "powermock" ],
    "owner" : {
      "account_id" : 9162277,
      "reputation" : 15965,
      "user_id" : 6813231,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/gy8Sg.jpg?s=256",
      "display_name" : "Alexei",
      "link" : "https://stackoverflow.com/users/6813231/alexei"
    },
    "is_answered" : false,
    "view_count" : 126,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1745524347,
    "creation_date" : 1745520283,
    "link" : "https://stackoverflow.com/questions/79591282/java-lang-nosuchmethoderror-org-mockito-invocation-invocationfactory-createinvo",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79591321,
    "question_id" : 79591282,
    "body" : "<p>Help about supported versions:</p>\n<p><a href=\"https://github.com/powermock/powermock/wiki/Mockito/cebcc5324cd3991cacdf5e1319209e5c4cd80fd3#supported-versions\" rel=\"nofollow noreferrer\">https://github.com/powermock/powermock/wiki/Mockito/cebcc5324cd3991cacdf5e1319209e5c4cd80fd3#supported-versions</a></p>\n<p>This work. Problem was in supported versions.</p>\n<pre><code>&lt;properties&gt;\n  &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;java.version&gt;1.8&lt;/java.version&gt;\n  &lt;mockito.version&gt;3.12.4&lt;/mockito.version&gt;\n  &lt;powermock.version&gt;2.0.2&lt;/powermock.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;version&gt;${mockito.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;version&gt;${mockito.version}&lt;/version&gt;\n  &lt;/dependency&gt;\n\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n    &lt;artifactId&gt;powermock-module-junit4&lt;/artifactId&gt;\n    &lt;version&gt;${powermock.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.powermock&lt;/groupId&gt;\n    &lt;artifactId&gt;powermock-api-mockito2&lt;/artifactId&gt;\n    &lt;version&gt;${powermock.version}&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9162277,
      "reputation" : 15965,
      "user_id" : 6813231,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/gy8Sg.jpg?s=256",
      "display_name" : "Alexei",
      "link" : "https://stackoverflow.com/users/6813231/alexei"
    },
    "creation_date" : 1745522145,
    "last_activity_date" : 1745524347,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140366851,
    "post_id" : 79591282,
    "body" : "Generally NoSuchMethodError means you are compiling with one version of a software package and running in on another version that doesn&#39;t support a method that was there at compile time.",
    "score" : 1,
    "owner" : {
      "account_id" : 1352170,
      "reputation" : 35259,
      "user_id" : 1291492,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/f914cd02166793195d9d950503f8f739?s=256&d=identicon&r=PG",
      "display_name" : "ControlAltDel",
      "link" : "https://stackoverflow.com/users/1291492/controlaltdel"
    },
    "creation_date" : 1745521461,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140366817,
    "post_id" : 79591282,
    "body" : "Have you checked the compatibility of your mockito with the PowerMockito (I&#39;m not the downvoter by the way): <a href=\"https://github.com/powermock/powermock/wiki/Mockito/cebcc5324cd3991cacdf5e1319209e5c4cd80fd3#supported-versions\" rel=\"nofollow noreferrer\">github.com/powermock/powermock/wiki/Mockito/&hellip;</a>",
    "score" : 2,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1745521049,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79591321" : [ {
      "comment_id" : 140367027,
      "post_id" : 79591321,
      "body" : "Glad the comment helped :)",
      "score" : 0,
      "owner" : {
        "account_id" : 209503,
        "reputation" : 23867,
        "user_id" : 460557,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
        "display_name" : "Jorge Campos",
        "link" : "https://stackoverflow.com/users/460557/jorge-campos"
      },
      "creation_date" : 1745525193,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}