{
  "question" : {
    "question_id" : 79549198,
    "title" : "System.err when using inflate in kotlin library constructor in Java project",
    "body" : "<p>I included a the Kotlin library (<a href=\"https://github.com/ognev-zair/Kotlin-AgendaCalendarView\" rel=\"nofollow noreferrer\">https://github.com/ognev-zair/Kotlin-AgendaCalendarView</a>) into my Java project. Using the recommendation from other posts i can get the project to compile and it half works. Using the information on the Readme file on github i converted it to Java and created the following classes:</p>\n<p>MainActivity</p>\n<pre><code>public class AgendaActivity2 extends AppCompatActivity implements CalendarController {\n\nprivate AgendaCalendarView agendaCalendarView;\nprivate CalendarContentManager contentManager;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_agenda2);\n\n    agendaCalendarView = findViewById(R.id.agenda_calendar_view_2);\n\n    agendaCalendarView.getAgendaView().getAgendaListView().setSaveEnabled(false);\n\n    // Setup date range\n    Calendar minDate = Calendar.getInstance();\n    Calendar maxDate = Calendar.getInstance();\n    minDate.add(Calendar.MONTH, -10);\n    minDate.add(Calendar.YEAR, -1);\n    minDate.set(Calendar.DAY_OF_MONTH, 1);\n    maxDate.add(Calendar.YEAR, 1);\n\n    // Create your event adapter (implemented below)\n    EventAgendaAdapter adapter = new EventAgendaAdapter(this);\n\n    // Initialize the calendar content manager\n    contentManager = new CalendarContentManager(\n            this,\n            agendaCalendarView,\n            adapter\n    );\n    contentManager.setLocale(Locale.getDefault());\n    contentManager.setDateRange(minDate, maxDate);\n\n\n\n    List&lt;CalendarEvent&gt; events = new ArrayList&lt;&gt;();\n    Calendar eventStart = Calendar.getInstance();\n    Calendar eventEnd = Calendar.getInstance();\n    eventEnd.add(Calendar.HOUR, 2);\n\n    events.add(new MyCalendarEvent(\n            eventStart,\n            eventEnd,\n            new DayItem(eventStart.getTime(), eventStart.getFirstDayOfWeek(),false,&quot;March&quot;),\n            new Event(&quot;Meeting&quot;, &quot;Project discussion&quot;)\n    ));\n\n    eventStart.add(Calendar.DAY_OF_MONTH,2);\n    eventEnd.add(Calendar.DAY_OF_MONTH,2);\n\n    events.add(new MyCalendarEvent(\n            eventStart,\n            eventEnd,\n            new DayItem(eventStart.getTime(), eventStart.getFirstDayOfWeek(),false,&quot;March&quot;),\n            new Event(&quot;Meeting&quot;, &quot;Project discussion&quot;)\n    ));\n\n    contentManager.loadItemsFromStart(events);\n}\n\n// CalendarController interface methods:\n\n@Override\npublic int getEmptyEventLayout() {\n    // Return your layout resource for an &quot;empty event&quot;\n    return R.layout.empty_event_item;\n}\n\n@Override\npublic int getEventLayout() {\n    // Return your layout resource for an event item\n    return R.layout.event_item;\n}\n\n@Override\npublic void onDaySelected(IDayItem dayItem) {\n    // Handle a day being selected\n    Toast.makeText(this, &quot;Day selected: &quot; + dayItem.getDate(), Toast.LENGTH_SHORT).show();\n}\n\n@Override\npublic void onScrollToDate(Calendar calendar) {\n    // Optionally, handle scroll events (e.g., update toolbar title)\n}\n}\n</code></pre>\n<p>EventAgendaAdapter</p>\n<pre><code>public class EventAgendaAdapter extends DefaultEventAdapter {\nprivate final SimpleDateFormat headerFormat;\n\npublic EventAgendaAdapter(Context context) {\n    headerFormat = new SimpleDateFormat(\n            &quot;ddd MM yyyy&quot;,\n            Locale.ENGLISH\n    );\n}\n\n@Override\npublic int getEventLayout(boolean hasEvent) {\n    return hasEvent ? R.layout.event_item : R.layout.empty_event_item;\n}\n\n@Override\npublic int getHeaderLayout() {\n    return R.layout.view_agenda_header;\n}\n\n@Override\npublic void getEventItemView(@NonNull View view,\n                             @NonNull CalendarEvent event,\n                             int position) {\n    TextView title = view.findViewById(R.id.event_title);\n    TextView desc = view.findViewById(R.id.event_time);\n\n    if (event.getEvent() instanceof Event) {\n        Event javaEvent = (Event) event.getEvent();\n        title.setText(javaEvent.getName());\n        desc.setText(javaEvent.getDescription());\n    }\n}\n\n@Override\npublic void getHeaderItemView(@NonNull View view, @NonNull Calendar day) {\n    TextView header = view.findViewById(R.id.view_agenda_day_of_month);\n    header.setText(headerFormat.format(day.getTime()));\n}\n}\n</code></pre>\n<p>MyCalendarEvent</p>\n<pre><code>public class MyCalendarEvent extends BaseCalendarEvent {\n\nprivate Calendar startTime = Calendar.getInstance();\nprivate Calendar endTime = Calendar.getInstance();\nprivate Object event;\nprivate IDayItem dayReference;\nprivate IWeekItem weekReference;\n\npublic MyCalendarEvent(){}\n\npublic MyCalendarEvent(Calendar start, Calendar end,\n                         IDayItem dayItem, Event event) {\n    this.startTime = start;\n    this.endTime = end;\n    this.dayReference = dayItem;\n    this.event = event;\n}\n\n@NotNull\n@Override\npublic Calendar getStartTime() { return startTime; }\n\n@NotNull\n@Override\npublic Calendar getEndTime() { return endTime; }\n\n@Nullable\n@Override\npublic Object getEvent() { return event; }\n\n@Override @NotNull\npublic MyCalendarEvent copy() {\n    return new MyCalendarEvent(\n            (Calendar) startTime.clone(),\n            (Calendar) endTime.clone(),\n            dayReference,\n            (Event) event\n    );\n}\n\n@Override\npublic boolean hasEvent() {\n    return event != null;\n}\n}\n</code></pre>\n<p>Event</p>\n<pre><code>public class Event {\nprivate long id;\nprivate String name;\nprivate String description;\n\npublic Event(String name, String description) {\n    this.name = name;\n    this.description = description;\n}\n\n// Getters and setters\npublic String getName() { return name; }\npublic String getDescription() { return description; }\n}\n</code></pre>\n<p>I am getting a System.err in Logcat for these three portions of code:</p>\n<pre><code>constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {}\n</code></pre>\n<pre><code>constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n\n    val inflater = context\n            .getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n    inflater.inflate(R.layout.view_agenda, this, true)\n\n    (findViewById(R.id.refresh_layout) as SwipeRefreshLayout).isEnabled = false\n}\n</code></pre>\n<pre><code>constructor(context: Context, attrs: AttributeSet) : super(context, attrs) {\n\n     ...\n\n     val inflater = context\n                .getSystemService(Context.LAYOUT_INFLATER_SERVICE) as LayoutInflater\n     inflater.inflate(R.layout.view_agendacalendar, this, true)\n}\n</code></pre>\n<p>Following your advice in the comment, I searched the logcat in more detail and found more information:</p>\n<pre><code>Accessing hidden field Landroid/widget/AbsListView;-&gt;mSelectorRect:Landroid/graphics/Rect; (max-target-p, reflection, denied)\njava.lang.NoSuchFieldException: No field mSelectorRect in class Landroid/widget/AbsListView; (declaration of 'android.widget.AbsListView' appears in /system/framework/framework.jar!classes4.dex)\n    at java.lang.Class.getDeclaredField(Native Method)\n    at se.emilsjolander.stickylistheaders.WrapperViewList.&lt;init&gt;(WrapperViewList.java:35)\n    at se.emilsjolander.stickylistheaders.StickyListHeadersListView.&lt;init&gt;(StickyListHeadersListView.java:129)\n    at se.emilsjolander.stickylistheaders.StickyListHeadersListView.&lt;init&gt;(StickyListHeadersListView.java:119)\n    at com.ognev.kotlin.agendacalendarview.agenda.AgendaListView.&lt;init&gt;(AgendaListView.kt:18)\n    at java.lang.reflect.Constructor.newInstance0(Native Method)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\n    at android.view.LayoutInflater.createView(LayoutInflater.java:742)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:894)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:849)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:1011)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:972)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:1014)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:972)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:1014)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:540)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:462)\n    at com.ognev.kotlin.agendacalendarview.agenda.AgendaView.&lt;init&gt;(AgendaView.kt:28)\n    at java.lang.reflect.Constructor.newInstance0(Native Method)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\n    at android.view.LayoutInflater.createView(LayoutInflater.java:742)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:894)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:849)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:1011)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:540)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:462)\n    at com.ognev.kotlin.agendacalendarview.AgendaCalendarView.&lt;init&gt;(AgendaCalendarView.kt:64)\n    at java.lang.reflect.Constructor.newInstance0(Native Method)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:343)\n    at android.view.LayoutInflater.createView(LayoutInflater.java:742)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:894)\n    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:849)\n    at android.view.LayoutInflater.rInflate(LayoutInflater.java:1011)\n    at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:972)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:570)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:462)\n    at android.view.LayoutInflater.inflate(LayoutInflater.java:413)\n    at androidx.appcompat.app.AppCompatDelegateImpl.setContentView(AppCompatDelegateImpl.java:751)\n    at androidx.appcompat.app.AppCompatActivity.setContentView(AppCompatActivity.java:197)\n    at com.ollytreeapplications.epilepsyjournal.agenda.AgendaActivity2.onCreate(AgendaActivity2.java:32)\n    at android.app.Activity.performCreate(Activity.java:9002)\n    at android.app.Activity.performCreate(Activity.java:8980)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1526)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:4030)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:4235)\n    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:112)\n    at android.app.servertransaction.TransactionExecutor.executeNonLifecycleItem(TransactionExecutor.java:174)\n    at android.app.servertransaction.TransactionExecutor.executeTransactionItems(TransactionExecutor.java:109)\n    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:81)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2636)\n    at android.os.Handler.dispatchMessage(Handler.java:107)\n    at android.os.Looper.loopOnce(Looper.java:232)\n    at android.os.Looper.loop(Looper.java:317)\n    at android.app.ActivityThread.main(ActivityThread.java:8705)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:580)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:886)\n</code></pre>\n<p>Let me know if you need anything else.</p>\n",
    "tags" : [ "java", "android", "kotlin" ],
    "owner" : {
      "account_id" : 8487144,
      "reputation" : 653,
      "user_id" : 6364860,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/afc46b3c6d2100e37d99c6ae649288e8?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "donny.rewq",
      "link" : "https://stackoverflow.com/users/6364860/donny-rewq"
    },
    "is_answered" : false,
    "view_count" : 37,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743621312,
    "creation_date" : 1743541349,
    "link" : "https://stackoverflow.com/questions/79549198/system-err-when-using-inflate-in-kotlin-library-constructor-in-java-project",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140288798,
    "post_id" : 79549198,
    "body" : "&quot;System.err when using inflate&quot; - what error exactly?",
    "score" : 1,
    "owner" : {
      "account_id" : 9115426,
      "reputation" : 27210,
      "user_id" : 6782707,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/2425200c04f326a53ef0085b703369d6?s=256&d=identicon&r=PG",
      "display_name" : "Edric",
      "link" : "https://stackoverflow.com/users/6782707/edric"
    },
    "creation_date" : 1743571984,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}