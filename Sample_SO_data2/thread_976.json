{
  "question" : {
    "question_id" : 79749431,
    "title" : "How to change TextView color depending on the color behind it?",
    "body" : "<p>I have a <code>TextView</code> drawn on a <code>LinearProgressIndicator</code>.<br />\nPart of the <code>LinearProgressIndicator</code> is blue and part of it is light blue.<br />\nI want the <code>TextView</code> color to be lighter on the blue part and darker on the light blue part.</p>\n<p>It currently looks like this.<br />\n<a href=\"https://i.sstatic.net/trTgRsfy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/trTgRsfy.png\" alt=\"What I have\" /></a></p>\n<p>I want it to look like this.</p>\n<p><a href=\"https://i.sstatic.net/paO2j4fg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/paO2j4fg.png\" alt=\"What I want\" /></a></p>\n<p>I want the <code>TextView</code> color to change as the progress bar continue.</p>\n",
    "tags" : [ "java", "android", "android-view" ],
    "owner" : {
      "account_id" : 28681323,
      "reputation" : 494,
      "user_id" : 21962459,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/99111fadaf27d81d67a077365421dc6e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ammar",
      "link" : "https://stackoverflow.com/users/21962459/ammar"
    },
    "is_answered" : false,
    "view_count" : 95,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1758289186,
    "creation_date" : 1756402540,
    "link" : "https://stackoverflow.com/questions/79749431/how-to-change-textview-color-depending-on-the-color-behind-it",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79769577,
    "question_id" : 79749431,
    "body" : "<p>We know the given colors : text color, text new color, progress filled color , progress un-filled color</p>\n<p>Make the <code>TextView</code> center aligned inside of <code>LinearProgressIndicator</code>.\ncompute exact width of <code>TextView</code> and when exactly <code>LinearProgressIndicator</code> reaches <code>TextView</code> start edge.</p>\n<p>Now create a <code>Shader</code> for this <code>TextView</code> as follow:</p>\n<pre><code>private void colorIt(TextView tv, float percent, int colorLeft, int colorRight){\n\n        TextPaint paint = tv.getPaint();\n        float width = paint.measureText(tv.getText().toString());\n\n        Shader textShader = new LinearGradient(0, 0, width * percent/100, 0,\n                new int[]{colorLeft, colorLeft, colorRight, colorRight}, new float[]{0f, percent/100f, percent/100f, 1.0f}, Shader.TileMode.CLAMP);\n        tv.setText(&quot;your new text, 45%&quot;);\n        tv.getPaint().setShader(textShader);\n        tv.invalidate();\n    }\n</code></pre>\n<p>The Important part is <code>new float[]{0.0f, x, x, 1.0f}</code>, that is positions of each corresponding color in the colors array. Here partly red and partly blue.</p>\n<p><a href=\"https://i.sstatic.net/fzRcXxU6.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/fzRcXxU6.gif\" alt=\"LinearGradient Shader Java without mixing colors\" /></a></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6979173,
      "reputation" : 1473,
      "user_id" : 6576302,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WZY3L.jpg?s=256",
      "display_name" : "C.F.G",
      "link" : "https://stackoverflow.com/users/6576302/c-f-g"
    },
    "creation_date" : 1758289186,
    "last_activity_date" : 1758289186,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140699968,
    "post_id" : 79749431,
    "body" : "+1, I&#39;m very curious is there any built-in solution, some library or so... I&#39;ve done similar thing years ago, ended with two extended textviews, which were taking progress from underlying &quot;progressview&quot; and were drawing custom mask in overriden <code>onDraw</code> method cutting left or right side of views. You have black/white, so you could use one textview with overriden <code>onDraw</code>, in which you can multiply every pixels till width=% by opposite color",
    "score" : 0,
    "owner" : {
      "account_id" : 5282904,
      "reputation" : 19543,
      "user_id" : 4217682,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/b8a19d6802d82a1f682d95683ff5b4b3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "snachmsm",
      "link" : "https://stackoverflow.com/users/4217682/snachmsm"
    },
    "creation_date" : 1756417877,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}