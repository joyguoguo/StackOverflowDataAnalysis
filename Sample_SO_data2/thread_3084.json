{
  "question" : {
    "question_id" : 79575074,
    "title" : "Using JavaMail in Glssfish 4.1 to send an email",
    "body" : "<p>I am using JavaMail in Glssfish 4.1 to send an email but get back an exception I am not able to fault find. The maven dependencies are :</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;javax.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;mail&lt;/artifactId&gt;\n        &lt;version&gt;1.5.0-b01&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.mail-api&lt;/artifactId&gt;\n        &lt;version&gt;2.1.3&lt;/version&gt;\n    &lt;/dependency&gt;     \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.eclipse.angus&lt;/groupId&gt;\n        &lt;artifactId&gt;angus-mail&lt;/artifactId&gt;\n        &lt;version&gt;2.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The code I have is in a single servlet EmailServiceServlet for simplicity sakes namely :</p>\n<pre><code>import javax.mail.Authenticator;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.PasswordAuthentication;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport java.util.Date;\nimport java.util.Properties;\nimport java.io.IOException;\n\n\n@WebServlet(name = &quot;EmailServiceServlet&quot;, urlPatterns = {&quot;/EmailServiceServlet&quot;})\npublic class EmailServiceServlet extends HttpServlet {\n\n    private int port = 465;\n    private String host = &quot;smtpout.secureserver.net&quot;;\n    private String from = &quot;fromEmail@domain.net&quot;;\n    private boolean auth = true;\n    private String username = &quot;fromEmail@domain.net&quot;;\n    private String password = &quot;password&quot;;\n    private Protocol protocol = Protocol.SMTP;\n    private boolean debug = true;\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        sendEmail(&quot;toEmail@domain.net&quot;, &quot;my subject&quot;, &quot;my body&quot;);\n    }\n        \n    public void sendEmail(String to, String subject, String body) {\n        Properties props = new Properties();\n        props.put(&quot;mail.smtp.host&quot;, host);\n        props.put(&quot;mail.smtp.port&quot;, port);\n        switch (protocol) {\n            case SMTPS:\n                props.put(&quot;mail.smtp.ssl.enable&quot;, true);\n                break;\n            case TLS:\n                props.put(&quot;mail.smtp.starttls.enable&quot;, true);\n                break;\n        }\n\n        Authenticator authenticator = null;\n        if (auth) {\n            props.put(&quot;mail.smtp.auth&quot;, true);\n            authenticator = new Authenticator() {\n                private PasswordAuthentication pa = new PasswordAuthentication(username, password);\n                @Override\n                public PasswordAuthentication getPasswordAuthentication() {\n                    return pa;\n                }\n            };\n        }\n\n        Session session = Session.getInstance(props, authenticator);\n        session.setDebug(debug);\n\n        MimeMessage message = new MimeMessage(session);\n        try {\n            message.setFrom(new InternetAddress(from));\n            InternetAddress[] address = {new InternetAddress(to)};\n            message.setRecipients(Message.RecipientType.TO, address);\n            message.setSubject(subject);\n            message.setSentDate(new Date());\n            message.setText(body);\n            Transport.send(message);\n        } catch (MessagingException ex) {\n            System.out.println(ex.getMessage());\n        }\n    }    \n}\n</code></pre>\n<p>When run I get back the following exception which I do not know how to fault find ...</p>\n<pre><code>Info:   DEBUG: setDebug: JavaMail version 1.5.2\nInfo:   DEBUG: getProvider() returning javax.mail.Provider[TRANSPORT,smtp,org.eclipse.angus.mail.smtp.SMTPTransport,Oracle]\nInfo:   DEBUG: Exception loading provider, THROW:\nInfo:   java.lang.NoSuchMethodException: org.eclipse.angus.mail.smtp.SMTPTransport.&lt;init&gt;(javax.mail.Session, javax.mail.URLName)\n    at java.lang.Class.getConstructor0(Class.java:3082)\n    at java.lang.Class.getConstructor(Class.java:1825)\n    at javax.mail.Session.getService(Session.java:813)\n    at javax.mail.Session.getTransport(Session.java:742)\n    at javax.mail.Session.getTransport(Session.java:682)\n    at javax.mail.Session.getTransport(Session.java:662)\n    at javax.mail.Session.getTransport(Session.java:719)\n    at javax.mail.Transport.send0(Transport.java:248)\n    at javax.mail.Transport.send(Transport.java:124)\n    at org.scavecgraph.web.servlet.EmailServiceServlet.sendEmail(EmailServiceServlet.java:100)\n    at org.scavecgraph.web.servlet.EmailServiceServlet.doGet(EmailServiceServlet.java:48)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:687)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)\n    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1682)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:344)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)\n    at org.glassfish.tyrus.servlet.TyrusServletFilter.doFilter(TyrusServletFilter.java:295)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:214)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:316)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:160)\n    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:734)\n    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:673)\n    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:99)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:174)\n    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:415)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:282)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:459)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:167)\n    at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:201)\n    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:175)\n    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:235)\n    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\n    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\n    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:561)\n    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:117)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:56)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:137)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:565)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:545)\n    at java.lang.Thread.run(Thread.java:748)\nInfo:   smtp\n</code></pre>\n<p>I would appreciate input as it took me the day to get the dependencies and everything to work apart from the sending. Ive never worked with this before and looked through all the other examples I could find to this far but to no avail.</p>\n",
    "tags" : [ "java", "email", "jakarta-mail", "glassfish-4.1" ],
    "owner" : {
      "account_id" : 32006332,
      "reputation" : 11,
      "user_id" : 29514573,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/993398429646767b4d87d685f08da442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "temujin",
      "link" : "https://stackoverflow.com/users/29514573/temujin"
    },
    "is_answered" : false,
    "view_count" : 57,
    "answer_count" : 2,
    "score" : -1,
    "last_activity_date" : 1744777318,
    "creation_date" : 1744718144,
    "link" : "https://stackoverflow.com/questions/79575074/using-javamail-in-glssfish-4-1-to-send-an-email",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79576051,
    "question_id" : 79575074,
    "body" : "<p>I guess GlassFish 4 is too old to know anything about jakarta, so you have to find a mail provider that is compatible with javax.mail. Eclipse angus seems to be a jakarta.mail implementation, and it will not be recognized by the glassfish code.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 116746,
      "reputation" : 12898,
      "user_id" : 306030,
      "user_type" : "registered",
      "accept_rate" : 70,
      "profile_image" : "https://i.sstatic.net/y053l.jpg?s=256",
      "display_name" : "forty-two",
      "link" : "https://stackoverflow.com/users/306030/forty-two"
    },
    "creation_date" : 1744752581,
    "last_activity_date" : 1744752581,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79576349,
    "question_id" : 79575074,
    "body" : "<p>Delete all three of those dependencies.</p>\n<p>If deploying your app to an app server like Glassfish, you do not want to include those interfaces and implementations as dependencies with your project. <strong>Your Maven POM should refer only to Jakarta EE, not Glassfish.</strong></p>\n<p>Learn to use the <code>scope</code> element on <code>dependency</code> in Maven. You want only the relevant Jakarta EE interfaces (formerly Java EE), and you want those only at compile time, not in your final artifact.</p>\n<p>Glassfish 4.1 is old and, I presume, no longer supported (unless perhaps you have a paid support contract).</p>\n<p><a href=\"https://glassfish.org/download.html\" rel=\"nofollow noreferrer\">Glassfish 7</a> implements the interfaces defined in Jakarta EE 10 (formerly Java EE). <a href=\"https://jakarta.ee/specifications/platform/10/\" rel=\"nofollow noreferrer\">Jakarta EE 10</a> specification <a href=\"https://jakarta.ee/specifications/platform/10/jakarta-platform-spec-10.0#jakarta-mail\" rel=\"nofollow noreferrer\">requires</a> that every compliant app server provide an implementation of the <a href=\"https://jakarta.ee/specifications/mail/\" rel=\"nofollow noreferrer\">Jakarta Mail</a> specification. version 2.1. So you should <em>not</em> be specifying any implementation in your Maven POM. Those implementations will appear at runtime, provided by Glassfish.</p>\n<p>Glassfish 8 (early access available) does the same for Jakarta EE 11 (nearing release).</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1744774661,
    "last_activity_date" : 1744775116,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}