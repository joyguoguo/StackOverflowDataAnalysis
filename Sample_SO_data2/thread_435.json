{
  "question" : {
    "question_id" : 79810227,
    "title" : "How to replace Joda dateTime and interval with Java.time",
    "body" : "<p>I am trying to replace Joda datetime and interval methods with Java.time and also trying to specify explicitly timezone as Duser.timezone=America/Chicago.</p>\n<p>This my code fragment</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void createMessage(userinfo,long start,long end){\n    Long startDateInMilliSec = start;\n    Long endDateInMilliSec = end;\n    DateTime startDateTime = new DateTime(start);\n    DateTime endTimeForThisDay = startDateTime.plusDays(1).withMillisOfDay(0);\n    Interval i = new Interval(startDateTime, endTimeForThisDay);\n    ...\n}\n</code></pre>\n<p>I replaced this way</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZonedDateTime startDateTime = startInstant.atZone(ZoneId.of(&quot;America/Chicago&quot;));\nInstant  endInstant = startInstant.plus(1, ChronoUnit.DAYS);\nZonedDateTime endTimeForThisDay = endInstant.atZone(ZoneId.of(&quot;America/Chicago&quot;));\nDuration i = Duration.between(startDateTime, endTimeForThisDay);\n</code></pre>\n<p>but the existing test case are failing. how to replace these methods with Java.time properly?</p>\n",
    "tags" : [ "java", "intervals", "java-time" ],
    "owner" : {
      "account_id" : 2391940,
      "reputation" : 139,
      "user_id" : 2091632,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/a38d9a4d0fdbd32b519dbc718f58e02c?s=256&d=identicon&r=PG",
      "display_name" : "madhu",
      "link" : "https://stackoverflow.com/users/2091632/madhu"
    },
    "is_answered" : true,
    "view_count" : 177,
    "answer_count" : 13,
    "score" : 0,
    "last_activity_date" : 1762440843,
    "creation_date" : 1762353977,
    "link" : "https://stackoverflow.com/questions/79810227/how-to-replace-joda-datetime-and-interval-with-java-time",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79810229,
    "question_id" : 79810227,
    "body" : "<p>... your test cases being what? And failing how?</p>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1762354173,
    "last_activity_date" : 1762354173,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810328,
    "question_id" : 79810227,
    "body" : "<p>The first thing you need to address is that <code>Duration</code> is not a substitute for Joda's <code>Interval</code>. An <code>Interval</code> is anchored to the timeline—some instants are inside the interval, and the rest are outside. A <code>Duration</code> is just a quantity of time that could be anchored anywhere. You need to create your own type that combines a <code>Duration</code> with a temporal type that indicates where the duration starts and ends. Something like <code>Instant</code>, <code>ZonedDateTime</code>, or <code>OffsetDateTime</code>.</p>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2496,
      "reputation" : 270545,
      "user_id" : 3474,
      "user_type" : "registered",
      "accept_rate" : 83,
      "profile_image" : "https://www.gravatar.com/avatar/ffbf4e85b8ffbae4e9039b9c0cf07bc8?s=256&d=identicon&r=PG",
      "display_name" : "erickson",
      "link" : "https://stackoverflow.com/users/3474/erickson"
    },
    "creation_date" : 1762359733,
    "last_activity_date" : 1762364112,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810273,
    "question_id" : 79810227,
    "body" : "<p>You should delete this and repost it as a traditional question. It's one that has an objective answer so it's not a good fit for this discussion format. <em>After</em> you are able to provide the information being requested of you, that is.</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3273747,
      "reputation" : 21271,
      "user_id" : 2756409,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/UIrGI.jpg?s=256",
      "display_name" : "TylerH",
      "link" : "https://stackoverflow.com/users/2756409/tylerh"
    },
    "creation_date" : 1762356566,
    "last_activity_date" : 1762356566,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810245,
    "question_id" : 79810227,
    "body" : "<p>I'm not sure why you think it's a good idea to keep these details secret? Why is <code>end</code> unused?</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1762354867,
    "last_activity_date" : 1762354867,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810258,
    "question_id" : 79810227,
    "body" : "<p>Write complete code that works for both cases and give us the expected results. I guess openended questions can't be closed. This one needs to be until you pose a complete question.</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1762355690,
    "last_activity_date" : 1762355690,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810269,
    "question_id" : 79810227,
    "body" : "<p>You haven't posted the information that was asked for. How are we meant to know what the inputs are and what you expect the results to be?</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1762356425,
    "last_activity_date" : 1762356425,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810284,
    "question_id" : 79810227,
    "body" : "<p>Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">https://stackoverflow.com/help/minimal-reproducible-example</a> and provide the missing details in your question (test code, complete errors), editing the question, not in comments.</p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1762356986,
    "last_activity_date" : 1762356986,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810844,
    "question_id" : 79810227,
    "body" : "<p><a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a>: <a href=\"https://www.threeten.org/threeten-extra/apidocs/org.threeten.extra/org/threeten/extra/Interval.html\" rel=\"nofollow noreferrer\"><code>org.threeten.extra.Interval</code></a></p>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1762403484,
    "last_activity_date" : 1762403484,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810234,
    "question_id" : 79810227,
    "body" : "<p>I wrote test case to check timestamps with joda datetime and java time , both having different timestamps. if we replace it with java.time, the timestamps should be same as before but it is getting different timestamps.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2391940,
      "reputation" : 139,
      "user_id" : 2091632,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/a38d9a4d0fdbd32b519dbc718f58e02c?s=256&d=identicon&r=PG",
      "display_name" : "madhu",
      "link" : "https://stackoverflow.com/users/2091632/madhu"
    },
    "creation_date" : 1762354397,
    "last_activity_date" : 1762354397,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79811428,
    "question_id" : 79810227,
    "body" : "<p>Thank you erickson. after I changed duration method, it worked for me.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2391940,
      "reputation" : 139,
      "user_id" : 2091632,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/a38d9a4d0fdbd32b519dbc718f58e02c?s=256&d=identicon&r=PG",
      "display_name" : "madhu",
      "link" : "https://stackoverflow.com/users/2091632/madhu"
    },
    "creation_date" : 1762440843,
    "last_activity_date" : 1762440843,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810263,
    "question_id" : 79810227,
    "body" : "<p>no need to hide, it is a large code . I will share it here</p>\n<pre><code>// the initial code with joda timestamps\nLong startDateInMilliSec = 1762146000000L;\nLong endDateInMilliSec = 1762192800000L;\nDateTime startDateTime = new DateTime(startDateInMilliSec);\nDateTime endTimeForThisDay = startDateTime.plusDays(1).withMillisOfDay(0);\nInterval i = new Interval(startDateTime, endTimeForThisDay);\n            \nfor(long currOffset = i.toDurationMillis(); startDateInMilliSec + currOffset &lt; endDateInMilliSec; currOffset = 86400000L) {\n                \nprintTimestamps(startDateInMilliSec, startDateInMilliSec + currOffset);\nstartDateInMilliSec = startDateInMilliSec + currOffset;\n}\nprintTimestamps( startDateInMilliSec, endDateInMilliSec);\n\n// with java time \nInstant startInstant = Instant.ofEpochMilli(startDateInMilliSec);\n            ZonedDateTime startDateTime1 = startInstant.atZone(ZoneId.of(&quot;America/Chicago&quot;));\n\nInstant  endInstant = startInstant.plus(1, ChronoUnit.DAYS);\n            ZonedDateTime endTimeForThisDay1 = endInstant.atZone(ZoneId.of(&quot;America/Chicago&quot;));\nDuration i1 = Duration.between(startDateTime1, endTimeForThisDay1);\n            \nfor(long currOffset = i1.toMillis(); startDateInMilliSec + currOffset &lt; endDateInMilliSec; currOffset = 86400000L) {\n                \nprintTimestamps(startDateInMilliSec, startDateInMilliSec + currOffset);\nstartDateInMilliSec = startDateInMilliSec + currOffset;\n}\n            \nprintTimestamps( startDateInMilliSec, endDateInMilliSec);\n\n}\n\npublic static void printTimestamps(long start, long end){\nSystem.out.println(&quot;value in start :&quot;+start);\nSystem.out.println(&quot;value in end:&quot;+end);\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2391940,
      "reputation" : 139,
      "user_id" : 2091632,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/a38d9a4d0fdbd32b519dbc718f58e02c?s=256&d=identicon&r=PG",
      "display_name" : "madhu",
      "link" : "https://stackoverflow.com/users/2091632/madhu"
    },
    "creation_date" : 1762355837,
    "last_activity_date" : 1762356920,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79810283,
    "question_id" : 79810227,
    "body" : "<p>I posted the complete code I am testing here.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2391940,
      "reputation" : 139,
      "user_id" : 2091632,
      "user_type" : "registered",
      "accept_rate" : 0,
      "profile_image" : "https://www.gravatar.com/avatar/a38d9a4d0fdbd32b519dbc718f58e02c?s=256&d=identicon&r=PG",
      "display_name" : "madhu",
      "link" : "https://stackoverflow.com/users/2091632/madhu"
    },
    "creation_date" : 1762356957,
    "last_activity_date" : 1762356957,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79811174,
    "question_id" : 79810227,
    "body" : "<p>It would probably help if you were to specify your actual [GOAL](<a href=\"https://technojeeves.com/index.php/aliasjava1/15-smart-questions\" rel=\"nofollow noreferrer\">https://technojeeves.com/index.php/aliasjava1/15-smart-questions</a>) so we can see why (and IF) you need to simulate an <code>Interval</code> from other APIs</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1762426315,
    "last_activity_date" : 1762426315,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79810263" : [ {
      "comment_id" : 140838858,
      "post_id" : 79810263,
      "body" : "As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/79810263/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1762379037,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79810283" : [ {
      "comment_id" : 140838152,
      "post_id" : 79810283,
      "body" : "As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/79810283/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1762358290,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79810234" : [ {
      "comment_id" : 140838853,
      "post_id" : 79810234,
      "body" : "As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/79810234/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : -1,
        "reputation" : 1,
        "user_id" : -1,
        "user_type" : "moderator",
        "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
        "display_name" : "Community",
        "link" : "https://stackoverflow.com/users/-1/community"
      },
      "creation_date" : 1762378773,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}