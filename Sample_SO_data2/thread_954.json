{
  "question" : {
    "question_id" : 79760890,
    "title" : "Asserting on JTable cell tooltips",
    "body" : "<p>I want to make an assertion that my table's cell renderer component has an expected tooltip.</p>\n<p>How do I do it with AssertJ Swing?</p>\n<p>My attempt:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class GuiCheckBoxCellRendererTest extends SwingTest {\n\n    JFrame frame;\n\n    @AfterEach\n    void tearDown() {\n        runAndWait(frame::dispose);\n    }\n\n    @Test\n    void getTableCellRendererComponent_givenValue_returnsExpectedCheckBox() {\n        String tooltip = &quot;Some tooltip&quot;;\n        CheckBoxCellRenderer renderer = callAndWait(() -&gt; CheckBoxCellRenderer.from(tooltip));\n        DefaultTableModel tableModel = callAndWait(() -&gt; new DefaultTableModel(new Object[][]{{1, &quot;Alex&quot;}}, new String[]{&quot;Status&quot;, &quot;Name&quot;}));\n        table = callAndWait(() -&gt; new JTable(tableModel));\n        runAndWait(() -&gt; table.setDefaultRenderer(Object.class, renderer));\n        frame = createFrame(table);\n        robot.showWindow(frame);\n        robot.focusAndWaitForFocusGain(frame);\n        assumeThat(callAndWait(frame::isVisible)).isTrue();\n        assumeThat(callAndWait(frame::isShowing)).isTrue();\n        assumeThat(callAndWait(table::isVisible)).isTrue();\n        assumeThat(callAndWait(table::isShowing)).isTrue();\n        JTableFixture tableFixture = new JTableFixture(robot, table);\n        \n        tableFixture.cell(TableCell.row(0).column(0)).select();\n        robot.waitForIdle();\n        tableFixture.requireToolTip(tooltip); // requires tooltip for the entire table, apparently\n    }\n\n    JFrame createFrame(JComponent component) {\n        return callAndWait(() -&gt; {\n            JFrame frame = new JFrame();\n            JScrollPane scrollPane = new JScrollPane(component);\n            scrollPane.setPreferredSize(new Dimension(200, 150));\n            frame.add(scrollPane);\n            frame.pack();\n            return frame;\n        });\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JCheckBox;\nimport javax.swing.JTable;\nimport javax.swing.table.DefaultTableCellRenderer;\nimport java.awt.Color;\nimport java.awt.Component;\nimport java.util.function.Function;\n\npublic class CheckBoxCellRenderer extends DefaultTableCellRenderer {\n\n    private final JCheckBox checkBox;\n    private final Function&lt;Boolean, String&gt; tooltipFunction;\n\n    private CheckBoxCellRenderer(Function&lt;Boolean, String&gt; tooltipFunction) {\n        this.checkBox = new JCheckBox();\n        this.tooltipFunction = tooltipFunction;\n        this.checkBox.setToolTipText(tooltipFunction.apply(checkBox.isSelected()));\n    }\n\n    public static CheckBoxCellRenderer from(String tooltip) {\n        return from(selected -&gt; tooltip);\n    }\n\n    public static CheckBoxCellRenderer from(Function&lt;Boolean, String&gt; tooltipFunction) {\n        return new CheckBoxCellRenderer(tooltipFunction);\n    }\n\n    @Override\n    public Component getTableCellRendererComponent(JTable table, Object value,\n                                                   boolean isSelected, boolean hasFocus, int row, int column) {\n        checkBox.setSelected(value instanceof Number &amp;&amp; ((Number) value),intValue() == 1);\n        checkBox.setToolTipText(tooltipFunction.apply(checkBox.isSelected()));\n        return checkBox;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import org.assertj.swing.core.Robot;\nimport org.assertj.swing.edt.FailOnThreadViolationRepaintManager;\nimport org.assertj.swing.edt.GuiActionRunner;\nimport org.assertj.swing.edt.GuiQuery;\nimport org.assertj.swing.edt.GuiTask;\nimport org.junit.jupiter.api.AfterAll;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.BeforeEach;\n\nimport javax.swing.SwingUtilities;\n\npublic abstract class SwingTest {\n\n    protected Robot robot;\n\n    @BeforeAll\n    static void superSetUpOnce() {\n        FailOnThreadViolationRepaintManager.install();\n    }\n\n    @AfterAll\n    static void superTearDownOnce() {\n        FailOnThreadViolationRepaintManager.uninstall();\n    }\n\n    @BeforeEach\n    void superSetUp() {\n        robot = BasicRobot.robotWithCurrentAwtHierarchy();\n    }\n\n    @AfterEach\n    void superTearDown() {\n        robot.cleanUp();\n    }\n\n    protected static void runLater(Runnable edtRunnable) {\n        SwingUtilities.invokeLater(() -&gt; {\n            try {\n                edtRunnable.run();\n            } catch (Throwable e) {\n                throw new RuntimeException(e);\n            }\n        });\n    }\n\n    protected static void runAndWait(Runnable edtRunnable) {\n        GuiActionRunner.execute(new GuiTask() {\n            @Override\n            protected void executeInEDT() throws Throwable {\n                edtRunnable.run();\n            }\n        });\n    }\n\n    protected static &lt;T&gt; T callAndWait(Callable&lt;T&gt; edtCallable) {\n        return GuiActionRunner.execute(new GuiQuery&lt;T&gt;() {\n            @Override\n            protected T executeInEDT() throws Throwable {\n                return edtCallable.call();\n            }\n        });\n    }\n}\n</code></pre>\n<pre><code>java.lang.AssertionError: [javax.swing.JTable[name=null, rowCount=1, columnCount=1, enabled=true, visible=true, showing=true] - property:'toolTipText'] \nExpecting:\n null\nto match pattern:\n &quot;Some tooltip&quot;\n</code></pre>\n",
    "tags" : [ "java", "swing", "assertj-swing" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : true,
    "view_count" : 90,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1760457992,
    "creation_date" : 1757509431,
    "link" : "https://stackoverflow.com/questions/79760890/asserting-on-jtable-cell-tooltips",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79790381,
    "question_id" : 79760890,
    "body" : "<p>Your code seems to assume that <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/javax/swing/JComponent.html#getToolTipText()\" rel=\"nofollow noreferrer\"><code>getToolTipText()</code></a> will provide the tooltip of the currently selected cell but this is not the case. When Swing is going to display a tooltip, it will invoke the method <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/javax/swing/JComponent.html#getToolTipText(java.awt.event.MouseEvent)\" rel=\"nofollow noreferrer\"><code>getToolTipText(MouseEvent event)</code></a> which delegates to the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/javax/swing/JComponent.html#getToolTipText()\" rel=\"nofollow noreferrer\"><code>getToolTipText()</code></a> method by default and still does in case of a <code>JTable</code> when there’s no location specific tooltip. But to get the cell specific tooltip provided by the cell renderer you have to use the method with a mouse event parameter.</p>\n<p>You don’t need a special framework to test this. The following code will verify that the renderer for the first cell provides the configured tooltip:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String tooltip = &quot;Some tooltip&quot;;\nCheckBoxCellRenderer renderer = CheckBoxCellRenderer.from(tooltip);\n\nDefaultTableModel tableModel = new DefaultTableModel(\n    new Object[][]{{1, &quot;Alex&quot;}}, new String[]{&quot;Status&quot;, &quot;Name&quot;});\nJTable table = new JTable(tableModel);\ntable.setDefaultRenderer(Object.class, renderer);\n\nRectangle cell = table.getCellRect(0, 0, false);\nString actualTooltip = table.getToolTipText(new MouseEvent(table,\n    MouseEvent.MOUSE_MOVED, System.currentTimeMillis(), 0,\n    cell.x, cell.y, 0, false));\n\nassert actualTooltip.equals(tooltip);\n</code></pre>\n<hr />\n<p>As a side note, your <code>CheckBoxCellRenderer</code> does not use any of the functionality inherited from <code>DefaultTableCellRenderer</code> so it should not extend it but rather just implement the <code>TableCellRenderer</code> interface.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1760457992,
    "last_activity_date" : 1760457992,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}