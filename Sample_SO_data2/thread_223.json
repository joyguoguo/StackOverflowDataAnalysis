{
  "question" : {
    "question_id" : 79829043,
    "title" : "Drools cannot load DRL files from multiple folders inside Spring Boot executable JAR (LaunchedURLClassLoader issue)",
    "body" : "<p>I am using <strong>Drools 10.1.0</strong> (<code>drools-xml-support</code>) with <strong>Spring Boot</strong>, and I have a <code>kmodule.xml</code> with <strong>two KBases</strong>, each pointing to a different folder.<br />\nIn IntelliJ/IDE everything works perfectly.<br />\nBut when I build an <strong>executable Spring Boot JAR</strong> (with <code>&lt;executable&gt;true&lt;/executable&gt;</code> in <code>spring-boot-maven-plugin</code>) and run it using: java -jar my-app.jar</p>\n<p>Drools cannot load any DRL files, and the <code>kieSession</code> becomes <strong>null</strong>.<br />\nNo rules are fired and no errors are shown.</p>\n<p>I found that this happens because Spring Boot uses<br />\n<code>LaunchedURLClassLoader</code><br />\ninstead of the default classloader used in IDE.</p>\n<p>I want to:</p>\n<ul>\n<li><p>keep the DRL files <strong>inside</strong> the JAR (not external)</p>\n</li>\n<li><p>keep the JAR executable (<code>&lt;executable&gt;true&lt;/executable&gt;</code>)</p>\n</li>\n</ul>\n",
    "tags" : [ "java", "spring-boot", "drools", "spring-boot-maven-plugin" ],
    "owner" : {
      "account_id" : 44793811,
      "reputation" : 11,
      "user_id" : 31938825,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c7e0afc3dd6b700dccaeda16b557bd90?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "JavaLearner",
      "link" : "https://stackoverflow.com/users/31938825/javalearner"
    },
    "is_answered" : true,
    "view_count" : 65,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1764014160,
    "creation_date" : 1764012965,
    "link" : "https://stackoverflow.com/questions/79829043/drools-cannot-load-drl-files-from-multiple-folders-inside-spring-boot-executable",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79829054,
    "question_id" : 79829043,
    "body" : "<ol>\n<li><p>Put <code>kmodule.xml</code> in <code>src/main/resources/META-INF/</code>.</p>\n</li>\n<li><p>Put DRL files inside <code>src/main/resources</code> in folders matching the packages in <code>kmodule.xml</code>.</p>\n</li>\n<li><p>Use <code>KieClasspathContainer</code> to load rules from the classpath (not the filesystem).</p>\n</li>\n<li><p>Don’t try to load DRL files as <code>File</code> objects — that breaks in executable Spring Boot JARs.</p>\n</li>\n<li><p>Keep <code>&lt;executable&gt;true&lt;/executable&gt;</code> in Spring Boot Maven plugin; the classpath approach works with it.</p>\n</li>\n</ol>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 33102424,
      "reputation" : 11,
      "user_id" : 25663314,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/YF4Imwax.jpg?s=256",
      "display_name" : "Salik Ahmad",
      "link" : "https://stackoverflow.com/users/25663314/salik-ahmad"
    },
    "creation_date" : 1764014160,
    "last_activity_date" : 1764014160,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79829054" : [ {
      "comment_id" : 140871609,
      "post_id" : 79829054,
      "body" : "Yes, this is the same approach I am following, but when I remove the executable property from the Maven plugin, the Drools files are getting loaded, and with the executable property, they are not. In both the cases I am running the application through java -jar command.",
      "score" : 0,
      "owner" : {
        "account_id" : 44793811,
        "reputation" : 11,
        "user_id" : 31938825,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/c7e0afc3dd6b700dccaeda16b557bd90?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "JavaLearner",
        "link" : "https://stackoverflow.com/users/31938825/javalearner"
      },
      "creation_date" : 1764056223,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140870984,
      "post_id" : 79829054,
      "body" : "This is entirely correct. It&#39;s also how you&#39;d do it without Spring-boot in the mix; trying to load DRLs as File instances instead of letting the library do the heavy lifting off the classpath is just asking for trouble.",
      "score" : 0,
      "owner" : {
        "account_id" : 183966,
        "reputation" : 15288,
        "user_id" : 419705,
        "user_type" : "registered",
        "accept_rate" : 67,
        "profile_image" : "https://i.sstatic.net/cvuY8.png?s=256",
        "display_name" : "Roddy of the Frozen Peas",
        "link" : "https://stackoverflow.com/users/419705/roddy-of-the-frozen-peas"
      },
      "creation_date" : 1764015917,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}