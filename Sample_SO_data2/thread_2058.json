{
  "question" : {
    "question_id" : 79654352,
    "title" : "Deserializing Json and XML in one enum",
    "body" : "<p>My Spring Boot API an entity and enum with the same name:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@Root(strict = false, name = &quot;Customer_Type&quot;)\npublic class CustomerType {\n\n  @Attribute(name = &quot;Val&quot;)\n  private String value;\n}\n\n\n\n\n@Getter\npublic enum CustomerType {\n    SC(&quot;Standard&quot;),\n    PC(&quot;Premium&quot;);\n    public String customerType;\n\n    CustomerType(String customerType) {\n        this.customerType = customerType;\n    }\n    ;\n\n    @JsonCreator\n    public static CustomerType forValue(String customerType) {\n        for (CustomerType type : values()) {\n            if (type.customerType.equals(customerType)) {\n                return type;\n            }\n        }\n        throw new IllegalArgumentException(&quot;&quot; + customerType);\n    }\n\n    @JsonValue\n    @Override\n    public String toString() {\n        return customerType;\n    }\n}\n</code></pre>\n<p>The API receives a json message with a customerType of either Standard or Permium. It is deserialized to the enum. The API then makes a call to another API, sending the customerType. It returns in a response XML in the Customer_Type element, which is deserialized with the CustomerType class. Is it possible that both the XML and json deserialization could be done with the enum and the PolicyType class be removed? If so, wow do I edit the enum to allow this?</p>\n",
    "tags" : [ "java", "spring-boot", "jackson", "simple-framework" ],
    "owner" : {
      "account_id" : 10642398,
      "reputation" : 7584,
      "user_id" : 7836976,
      "user_type" : "registered",
      "accept_rate" : 95,
      "profile_image" : "https://www.gravatar.com/avatar/a57c0f1a2af768690957df659cc28f0f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "runnerpaul",
      "link" : "https://stackoverflow.com/users/7836976/runnerpaul"
    },
    "is_answered" : false,
    "view_count" : 68,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1749162102,
    "creation_date" : 1749122671,
    "link" : "https://stackoverflow.com/questions/79654352/deserializing-json-and-xml-in-one-enum",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79655252,
    "question_id" : 79654352,
    "body" : "<p>There is my example of your problem solution - <a href=\"https://github.com/Baranovich/customer\" rel=\"nofollow noreferrer\">https://github.com/Baranovich/customer</a>. This is full spring boot project for your services interaction case.</p>\n<p>I'm parse XML using JAXB with deserialization from json to CustomerType object and also get the same CustomerType from other json (see the request examples):</p>\n<p><strong>Example-1</strong></p>\n<p>Url:<br />\nPOST http://localhost:8080/customer/post_customer_type_object</p>\n<p>Body:</p>\n<pre><code>&quot;Standard&quot;\n</code></pre>\n<p><a href=\"https://i.sstatic.net/xdJhCpiI.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>This JSON data deserialized to object class:</p>\n<pre><code>package gu.ib.customer.domain;\n\nimport com.fasterxml.jackson.annotation.JsonCreator;\nimport com.fasterxml.jackson.annotation.JsonValue;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.xml.bind.annotation.XmlEnum;\nimport javax.xml.bind.annotation.XmlEnumValue;\nimport javax.xml.bind.annotation.XmlType;\n\n@Slf4j\n@XmlType(name = &quot;CustomerType&quot;, namespace = &quot;http://www.my.personal.schema&quot;)\n@XmlEnum\n@RequiredArgsConstructor\npublic enum CustomerType {\n\n    @XmlEnumValue(&quot;Standard&quot;)\n    STANDARD(&quot;Standard&quot;),\n\n    @XmlEnumValue(&quot;Premium&quot;)\n    PREMIUM(&quot;Premium&quot;);\n    private final String value;\n\n    public String value() {\n        return value;\n    }\n\n    @JsonCreator\n    public static CustomerType fromValue(String v) {\n        for (CustomerType c: CustomerType.values()) {\n            if (c.value.equals(v)) {\n                return c;\n            }\n        }\n        log.debug(&quot;Invalid value for CustomerType: {}&quot;, v);\n        throw new IllegalArgumentException(v);\n    }\n}\n</code></pre>\n<p><strong>Example-2</strong></p>\n<p>Url:<br />\nPOST <a href=\"http://localhost:8080/customer/post_customer_type_xml\" rel=\"nofollow noreferrer\">http://localhost:8080/customer/post_customer_type_object</a></p>\n<p>Body:</p>\n<pre><code>{\n    &quot;data&quot;: &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&lt;Customer xmlns=\\&quot;http://www.my.personal.schema\\&quot; xmlns:xsi=\\&quot;http://www.w3.org/2001/XMLSchema-instance\\&quot; xsi:schemaLocation=\\&quot;http://www.my.personal.schema\\&quot;&gt;Premium&lt;/Customer&gt;&quot;\n}\n</code></pre>\n<p><a href=\"https://i.sstatic.net/2fQHafNM.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>This JSON data is deserialized to xml content string with further transformation into the same class - CustomerType. I think it is correct example of solution for your case.</p>\n<p>If you probably want to send XML type (not as xml content string inside JSON), you can just change receiving data format on controller layer.</p>\n<p>If you probably want to send some JSON node with particular node name (not simple string, which is a special case of JSON, like in <strong>Example 1</strong>), you should change fromValue method to process JsonNode instead of String.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 27491027,
      "reputation" : 1,
      "user_id" : 20976392,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1bd35ecad6e117526bf444ab1d20d931?s=256&d=identicon&r=PG",
      "display_name" : "Baranovich",
      "link" : "https://stackoverflow.com/users/20976392/baranovich"
    },
    "creation_date" : 1749161906,
    "last_activity_date" : 1749162102,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140490876,
    "post_id" : 79654352,
    "body" : "It looks like you missed adding PolicyType class into your question and in which context it is called/used.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1749139041,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140490215,
    "post_id" : 79654352,
    "body" : "Is your question <i>&quot;Is it possible to deserialize from both the JSON and the XML the customer type field into a value of the enum CustomerType instead of an instance of the class CustomerType?&quot;</i> If it&#39;s so, consider editing your question for better clarity, and including a small sample of the JSON or XML response for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 5569841,
      "reputation" : 8674,
      "user_id" : 4415625,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0ea1713807527aa1cf52e40579e35ec4?s=256&d=identicon&r=PG",
      "display_name" : "dani-vta",
      "link" : "https://stackoverflow.com/users/4415625/dani-vta"
    },
    "creation_date" : 1749128016,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140490107,
    "post_id" : 79654352,
    "body" : "PolicyType class be removed? It is not enough clear what you want, pls add minimal examples of json and xml you try to deserialize",
    "score" : 1,
    "owner" : {
      "account_id" : 18586978,
      "reputation" : 3850,
      "user_id" : 15000097,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yFl4M.jpg?s=256",
      "display_name" : "Georgii Lvov",
      "link" : "https://stackoverflow.com/users/15000097/georgii-lvov"
    },
    "creation_date" : 1749125312,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}