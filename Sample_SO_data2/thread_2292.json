{
  "question" : {
    "question_id" : 79635050,
    "title" : "Remove variable from object after creation",
    "body" : "<p>I'm not sure if this is possible. Hopefully someone can clarify. I have this Java class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Setter\n@ToString\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@AllArgsConstructor(access = AccessLevel.PACKAGE)\n@Builder\npublic class Quote {\n  private Premium totalAmount;\n  private String productCode;\n  private String status;\n}\n</code></pre>\n<p>I can build so that the object does not have a status:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Quote quote = Quote.builder()\n        .totalAmount(&quot;123.45&quot;)\n        .productCode(&quot;AC&quot;)    \n        .build();\n</code></pre>\n<p>If a quote is built with a status is it possible to then delete/remove that status? I can set it to null with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Quote quote = Quote.builder()\n        .totalAmount(&quot;123.45&quot;)\n        .productCode(&quot;AC&quot;)\n        .status(&quot;Full&quot;)    \n        .build();\nquote.setStatus(null);\n</code></pre>\n<p>However, I'd like to remove it from the object altogether. The reason for this is that status is used by the API to determine if the quote is a full pay or pay by instalments. The quote object is then added to a CompleteQuote object which gets returned to the user in a Json response. I don't want the status in this.</p>\n",
    "tags" : [ "java", "spring-boot", "builder" ],
    "owner" : {
      "account_id" : 10642398,
      "reputation" : 7584,
      "user_id" : 7836976,
      "user_type" : "registered",
      "accept_rate" : 95,
      "profile_image" : "https://www.gravatar.com/avatar/a57c0f1a2af768690957df659cc28f0f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "runnerpaul",
      "link" : "https://stackoverflow.com/users/7836976/runnerpaul"
    },
    "is_answered" : true,
    "view_count" : 129,
    "answer_count" : 3,
    "score" : 1,
    "last_activity_date" : 1748254798,
    "creation_date" : 1747985790,
    "link" : "https://stackoverflow.com/questions/79635050/remove-variable-from-object-after-creation",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79635075,
    "question_id" : 79635050,
    "body" : "<p>Since you are using Spring, I am going to assume you are using Jackson to serialize your JSON. Instead of removing the field from the object, you should instead configure the json serialization by using <code>@JsonInclude(Include.NON_NULL)</code>. By placing it on the field like so:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@AllArgsConstructor(access = AccessLevel.PACKAGE)\n@Builder\npublic class Quote {\n  private Premium totalAmount;\n  private String productCode;\n  @JsonInclude(Include.NON_NULL)\n  private String status;\n}\n</code></pre>\n<p>During serialization, if the field is null, jackson will not include it in the JSON, so when sending back to user, it will not show the status field.</p>\n<p>Also, if you are using lets say third-party classes and are not able to change it to add the annotation, that's fine too. You can configure the objectmapper to utilise Jackson mixins. <a href=\"https://stackoverflow.com/questions/53872372/jackson-mixin-how-to-ignore-or-rename-fields-from-class-as-tree\">Sample</a></p>\n<p>sources:<br />\n<a href=\"https://www.baeldung.com/jackson-annotations#bd-4-jsoninclude\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-annotations#bd-4-jsoninclude</a><br />\n<a href=\"https://www.baeldung.com/jackson-annotations#bd-jackson-mixin-annotations\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-annotations#bd-jackson-mixin-annotations</a></p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 21724606,
      "reputation" : 1441,
      "user_id" : 16034206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/MRBdT.jpg?s=256",
      "display_name" : "pebble unit",
      "link" : "https://stackoverflow.com/users/16034206/pebble-unit"
    },
    "creation_date" : 1747986965,
    "last_activity_date" : 1747987567,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79635062,
    "question_id" : 79635050,
    "body" : "<p>It is not possible to remove the field from already constructed java object as fields are part of the class structure apart from that the builder pattern generates code at compile time which means The JVM allocates space for all fields when creating an object.\nHowever, you can try making optional fields in builder pattern as</p>\n<pre><code>@Builder\n@Getter\npublic class Quote {\n    private Premium totalAmount;\n    private String productCode;\n    @Builder.Default private String status = null; \n}\n</code></pre>\n<p>and then make a new instance without the status</p>\n<pre><code>public Quote withoutStatus() {\n    return Quote.builder()\n        .totalAmount(this.totalAmount)\n        .productCode(this.productCode)\n        .build();\n}\n</code></pre>\n<p>and you can use the null object pattern by creating a constant for <code>no_status</code></p>\n<pre><code>public static final String NO_STATUS = null;\n\n// Your usage:\nquote.setStatus(Quote.NO_STATUS);\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 27810413,
      "reputation" : 281,
      "user_id" : 21232911,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AEdFTp6d-5851FMePsR7O3aEQs_yFjomf-FNJ34Tn-c=k-s256",
      "display_name" : "nischal sharma",
      "link" : "https://stackoverflow.com/users/21232911/nischal-sharma"
    },
    "creation_date" : 1747986542,
    "last_activity_date" : 1747986542,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79638742,
    "question_id" : 79635050,
    "body" : "<p><em>Jackson</em> provides the <code>@JsonInclude</code> annotation to control how fields are included during serialization.</p>\n<p>You can apply <code>@JsonInclude(Include.NON_NULL)</code> to your status field in the Quote class. This tells Jackson to only include the status field in the JSON output if its value is not null.</p>\n<p>Here's how you'd modify your Quote class:</p>\n<pre><code>@Getter\n@Setter\n@ToString\n@NoArgsConstructor(access = AccessLevel.PUBLIC)\n@AllArgsConstructor(access = AccessLevel.PACKAGE)\n@Builder\npublic class Quote {\n  private Premium totalAmount; // Assuming Premium is another class you have\n  private String productCode;\n  \n  @JsonInclude(Include.NON_NULL) // &lt;--- Add this annotation\n  private String status;\n}\n</code></pre>\n<blockquote>\n<p><code>@JsonInclude(Include.NON_NULL)</code>: When Jackson serializes a Quote object to JSON:\nIf quote.getStatus() returns a non-null string (e.g., &quot;Full&quot;), the status field will be <strong>included</strong> in the JSON.</p>\n</blockquote>\n<blockquote>\n<p>If quote.getStatus() returns null, the status field will be <strong>omitted</strong> entirely from the JSON output.</p>\n</blockquote>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 17043956,
      "reputation" : 1138,
      "user_id" : 12331220,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/5S9Wo.gif?s=256",
      "display_name" : "Anupam Haldkar",
      "link" : "https://stackoverflow.com/users/12331220/anupam-haldkar"
    },
    "creation_date" : 1748254798,
    "last_activity_date" : 1748254798,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140452324,
    "post_id" : 79635050,
    "body" : "Java is not like JavaScript. The structure of a class is set in stone the moment you compile your code; you can&#39;t add or remove fields willy-nilly. Also, note that your example of using the builder without setting <code>status</code> does <b>not</b> create an object without a <code>status</code>. The field is still there, and has the initial value of null.",
    "score" : 0,
    "owner" : {
      "account_id" : 19118721,
      "reputation" : 12499,
      "user_id" : 13963086,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "k314159",
      "link" : "https://stackoverflow.com/users/13963086/k314159"
    },
    "creation_date" : 1747996892,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451850,
    "post_id" : 79635050,
    "body" : "One option: Create a superclass without that field (but move the other fields into the superclass). When you need to get rid of the field, convert the object to an instance of the superclass.",
    "score" : 2,
    "owner" : {
      "account_id" : 7612423,
      "reputation" : 87409,
      "user_id" : 5772882,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Anonymous",
      "link" : "https://stackoverflow.com/users/5772882/anonymous"
    },
    "creation_date" : 1747987161,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451816,
    "post_id" : 79635050,
    "body" : "Explanation added to question.",
    "score" : 0,
    "owner" : {
      "account_id" : 10642398,
      "reputation" : 7584,
      "user_id" : 7836976,
      "user_type" : "registered",
      "accept_rate" : 95,
      "profile_image" : "https://www.gravatar.com/avatar/a57c0f1a2af768690957df659cc28f0f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "runnerpaul",
      "link" : "https://stackoverflow.com/users/7836976/runnerpaul"
    },
    "creation_date" : 1747986555,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451806,
    "post_id" : 79635050,
    "body" : "What&#39;s the effective difference between &quot;removed from the object&quot; and &quot;set to null&quot;?  To me, they seem to mean the same thing.  If they&#39;re really different things, maybe you should have some kind of flag indicating the difference.  Or are you trying to save memory?",
    "score" : 1,
    "owner" : {
      "account_id" : 1085259,
      "reputation" : 80183,
      "user_id" : 1081110,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Fp4Pm.jpg?s=256",
      "display_name" : "Dawood ibn Kareem",
      "link" : "https://stackoverflow.com/users/1081110/dawood-ibn-kareem"
    },
    "creation_date" : 1747986366,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451781,
    "post_id" : 79635050,
    "body" : "Why though??? What sort of use case do you have for this? Just thinking about it without talking about its plausibility: If the object is a constructed version of that specific class, and you change it to not follow the class definition by removing the field entirely... then is it really that class?",
    "score" : 0,
    "owner" : {
      "account_id" : 21724606,
      "reputation" : 1441,
      "user_id" : 16034206,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/MRBdT.jpg?s=256",
      "display_name" : "pebble unit",
      "link" : "https://stackoverflow.com/users/16034206/pebble-unit"
    },
    "creation_date" : 1747986091,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79635062" : [ {
      "comment_id" : 140452415,
      "post_id" : 79635062,
      "body" : "You have some good ideas here, but their implementation is wrong. First, the <code>@Builder.Default</code> has no effect because <code>null</code> is already the default. Second, the Null Object Pattern is about having an actual instance (therefore not null) act as the &quot;null object&quot;. The way you&#39;ve defined it, having <code>quote.setStatus(Quote.NO_STATUS)</code> is <i>exactly</i> the same as <code>quote.setStatus(null)</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 19118721,
        "reputation" : 12499,
        "user_id" : 13963086,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "k314159",
        "link" : "https://stackoverflow.com/users/13963086/k314159"
      },
      "creation_date" : 1747998687,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79638742" : [ {
      "comment_id" : 140461739,
      "post_id" : 79638742,
      "body" : "So basically the same as <a href=\"https://stackoverflow.com/a/79635075/13963086\">pebble unit&#39;s answer</a>.",
      "score" : 2,
      "owner" : {
        "account_id" : 19118721,
        "reputation" : 12499,
        "user_id" : 13963086,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "k314159",
        "link" : "https://stackoverflow.com/users/13963086/k314159"
      },
      "creation_date" : 1748334260,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}