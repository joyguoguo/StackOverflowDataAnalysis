{
  "question" : {
    "question_id" : 79670350,
    "title" : "SQL Error: 1054, SQLState: 42S22 Unknown column &#39;oc&#39; in &#39;field list&#39;",
    "body" : "<p>I am trying to write a native query in Spring Boot JPA, but whenever I try to execute, I get the following exception:</p>\n<pre><code>[http-nio-8081-exec-4] o.h.e.j.s.SqlExceptionHelper: SQL Error: 1054, SQLState: 42S22\n\n[http-nio-8081-exec-4] o.h.e.j.s.SqlExceptionHelper: Unknown column 'oc' in 'field list'\n\n[http-nio-8081-exec-4] o.b.c.e.h.RestExceptionHandler: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n\n.InvalidDataAccessResourceUsageException: could not extract ResultSet; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: could not extract ResultSet\n</code></pre>\n<p>Following is the query i wrote inside the repository along with the method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;SELECT \\n&quot; +\n        &quot; oc.id AS 'Id',\\n&quot; +\n        &quot; oc.created_at AS 'Created Date',\\n&quot; +\n        &quot; octd.reference_number AS 'Cheque Number',\\n&quot; +\n        &quot; octd.created_at AS 'Cheque Date',\\n&quot; +\n        &quot; SUM(ocd.amount) AS 'Total Amount',\\n&quot; +\n        &quot; oc.status AS 'Receipt Status',\\n&quot; +\n        &quot; oc.created_by AS 'Created By',\\n&quot; +\n        &quot; oc.receipt_id AS 'Receipt IDs',\\n&quot; +\n        &quot; u.user_id_pk AS ‘User ID',\\n&quot; +\n        &quot; u.user_name AS 'Full Name',\\n&quot; +\n        &quot; c.contact AS 'Contact',\\n&quot; +\n        &quot; c.email AS 'Email'\\n&quot; +\n        &quot;FROM table1 AS oc\\n&quot; +\n        &quot; INNER JOIN table2 AS ocd ON ocd.table1_id_fk = oc.id\\n&quot; +\n        &quot; INNER JOIN table3 AS octd ON octd.table1_id_fk = oc.id\\n&quot; +\n        &quot; INNER JOIN table4 AS u ON u.email = oc.created_by\\n&quot; +\n        &quot; INNER JOIN table5 AS c ON c.table5_id = oc.table5_fk\\n&quot; +\n        &quot;WHERE\\n&quot; +\n        &quot; (?1 IS NULL OR oc.created_by IN (?1))\\n&quot; +\n        &quot; ((?2 IS NULL OR ?3 IS NULL) OR octd.created_at BETWEEN ?2 AND ?3)\\n&quot; +\n        &quot; AND (?4 IS NULL OR oc.status = ?3)\\n” +\n        &quot; AND (?5 IS NULL OR c.full_name LIKE CONCAT('%', ?4, '%'))\\n&quot; +\n        &quot; AND (?6 IS NULL OR c.contact LIKE CONCAT('%', ?5, '%'))\\n&quot; +\n        &quot;GROUP BY oc.id , oc.created_at , octd.reference_number , octd.created_at , oc.status , u.full_name , oc.receipt_id , u.user_id_pk , u.user_name , u.phone , u.email&quot;,\n        nativeQuery = true)\nPage&lt;Object[]&gt; getSummary(\n        @Param(&quot;createdByEmails&quot;) List&lt;String&gt; createdByEmails,\n        @Param(&quot;startDate&quot;) String startDate,\n        @Param(&quot;endDate&quot;) String endDate,\n        @Param(&quot;receiptStatus&quot;) Status receiptStatus,\n        @Param(“name”) String name,\n        @Param(&quot;contact&quot;) String contact,\n        Pageable pageable);\n</code></pre>\n<p>I already tried some of the solutions available on Stack, like adding the following property in the app.config file:</p>\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n<p>Also, using a single quote instead of back-ticks or double-quotes.</p>\n<p>This is the main part of the query. I have used table1, table2 as examples, as the code is private and has removed some parts of the query to make it shorter.</p>\n",
    "tags" : [ "java", "mysql", "spring-boot", "hibernate", "jpa" ],
    "owner" : {
      "account_id" : 21507989,
      "reputation" : 53,
      "user_id" : 15851104,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14Gjvq_HbFLrX3KnIFdlTtxqgxMB3VeAolKY2YbWrvw=k-s256",
      "display_name" : "Ibrahim Alvi",
      "link" : "https://stackoverflow.com/users/15851104/ibrahim-alvi"
    },
    "is_answered" : false,
    "view_count" : 36,
    "closed_date" : 1750238804,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1750238530,
    "creation_date" : 1750238530,
    "link" : "https://stackoverflow.com/questions/79670350/sql-error-1054-sqlstate-42s22-unknown-column-oc-in-field-list",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140524649,
    "post_id" : 79670350,
    "body" : "Usually you get this error if the query has something wrong in it. For what it is worth, this does not look good &quot; u.user_id_pk AS ‘User ID&#39;. &quot;, 2 different quotes for <code>User ID</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 7673258,
      "reputation" : 2114,
      "user_id" : 6200354,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1afc8346f23819373b78aae36744b53a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "atish.s",
      "link" : "https://stackoverflow.com/users/6200354/atish-s"
    },
    "creation_date" : 1750269592,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140524333,
    "post_id" : 79670350,
    "body" : "Yes, it is, When I tried using the same query with Entity Manager, it worked, but when going with Repository, it raises the error",
    "score" : 0,
    "owner" : {
      "account_id" : 21507989,
      "reputation" : 53,
      "user_id" : 15851104,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14Gjvq_HbFLrX3KnIFdlTtxqgxMB3VeAolKY2YbWrvw=k-s256",
      "display_name" : "Ibrahim Alvi",
      "link" : "https://stackoverflow.com/users/15851104/ibrahim-alvi"
    },
    "creation_date" : 1750262705,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140523803,
    "post_id" : 79670350,
    "body" : "Is &#39;oc&#39; a valid table ? Is java able to recognize oc table ?",
    "score" : 0,
    "owner" : {
      "account_id" : 19877960,
      "reputation" : 300,
      "user_id" : 14562555,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QxPjB.jpg?s=256",
      "display_name" : "Kaushik",
      "link" : "https://stackoverflow.com/users/14562555/kaushik"
    },
    "creation_date" : 1750253413,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140523575,
    "post_id" : 79670350,
    "body" : "I tried using back tick as well, but it still raises the same error.",
    "score" : 0,
    "owner" : {
      "account_id" : 21507989,
      "reputation" : 53,
      "user_id" : 15851104,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14Gjvq_HbFLrX3KnIFdlTtxqgxMB3VeAolKY2YbWrvw=k-s256",
      "display_name" : "Ibrahim Alvi",
      "link" : "https://stackoverflow.com/users/15851104/ibrahim-alvi"
    },
    "creation_date" : 1750248800,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140523051,
    "post_id" : 79670350,
    "body" : "Your code as given won&#39;t even compile, because it contains &quot;fancy&quot; double quotes in the Java code, and the aliases should use backticks, not apostrophes (single quotes) or fancy single quotes.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1750238856,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}