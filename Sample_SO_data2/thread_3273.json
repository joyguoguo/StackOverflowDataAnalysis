{
  "question" : {
    "question_id" : 79562813,
    "title" : "Drools 7.69.0: == empty condition evaluating to true for non-empty string values in OR conditions",
    "body" : "<p>I recently encountered unexpected behavior after upgrading from Drools <strong>6.2.0 to 7.69.0</strong> where a condition using == empty started evaluating to true even when the field had non-empty string values.</p>\n<p>We are using Drools with the MVEL dialect, and most of our rules use conditions like this:</p>\n<pre><code>rule &quot;Sample Rule&quot;\nwhen\n   $x : SomeFact( field == empty || field == &quot;XYZ&quot; )\nthen\n   // logic\nend\n</code></pre>\n<p>Before the upgrade (in Drools 6.2.0), this worked as expected — the rule triggered only if field was null or empty, or equal to &quot;XYZ&quot;.</p>\n<p>But after upgrading to Drools 7.69.0, we noticed that this rule triggers even when the value of field is a non-empty string, such as &quot;ABC&quot; or &quot;123&quot;.</p>\n<p>What I’ve Checked:</p>\n<p>• Verified that the value is neither null nor &quot;&quot; — it’s a valid non-empty string.</p>\n<p>• Issue seems to appear specifically when == empty is used within OR conditions.</p>\n<p>What I Understand About empty in Drools (MVEL):</p>\n<p>According to Drools/MVEL docs, empty is supposed to evaluate true for:</p>\n<p>• null</p>\n<p>• &quot;&quot; (empty string)</p>\n<p>• empty collections, arrays, or maps\nBut in this case, it seems like it’s loosely matching any non-null string under certain expressions.\nEnvironment:</p>\n<pre><code>• Drools 7.69.0.Final\n• MVEL expression language\n• Java 8 and Java 11\n• Spark 3.5.0 , Scala 2.12 \n</code></pre>\n",
    "tags" : [ "java", "drools", "kie", "mvel" ],
    "owner" : {
      "account_id" : 41280413,
      "reputation" : 11,
      "user_id" : 30213464,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c95ac0dd5b40802530c2b8f44db9a13?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sai Pranay Lingala",
      "link" : "https://stackoverflow.com/users/30213464/sai-pranay-lingala"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744137245,
    "creation_date" : 1744137245,
    "link" : "https://stackoverflow.com/questions/79562813/drools-7-69-0-empty-condition-evaluating-to-true-for-non-empty-string-values",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140313508,
    "post_id" : 79562813,
    "body" : "Hi @IłyaBursov I tried that as well — wrapping the conditions like (field == empty) || (field == &quot;XYZ&quot;), but it’s still not working as expected. Even when field has a valid non-empty value like &quot;ABC&quot;, the condition is evaluating to true. So it doesn’t seem like adding brackets changes the behavior in this case.",
    "score" : 0,
    "owner" : {
      "account_id" : 41280413,
      "reputation" : 11,
      "user_id" : 30213464,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c95ac0dd5b40802530c2b8f44db9a13?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sai Pranay Lingala",
      "link" : "https://stackoverflow.com/users/30213464/sai-pranay-lingala"
    },
    "creation_date" : 1744144086,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140313339,
    "post_id" : 79562813,
    "body" : "what if you put brackets, like <code>(field == empty) || (field == &quot;XYZ&quot;)</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 3415144,
      "reputation" : 24365,
      "user_id" : 2864275,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f1f73deb5983ac46af2a74732752292e?s=256&d=identicon&r=PG",
      "display_name" : "Iłya Bursov",
      "link" : "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"
    },
    "creation_date" : 1744140757,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}