{
  "question" : {
    "question_id" : 79743544,
    "title" : "JSL-Springboot security login page redirecting infinitely (ERR_TOO_MANY_REDIRECTS)",
    "body" : "<p>/login page seems to be stuck in a loop of being redirected to self.\nFor context, I want /register &amp; /login to be visible without authentication, while all other pages in my project should redirect the user unless verified to the /login page.</p>\n<p>Code for Security is as follows:</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n                .csrf(csrf -&gt; csrf.disable())\n                .authorizeHttpRequests(authz -&gt; authz\n                        // Public access (no authentication needed)\n                        .requestMatchers(\n                                new AntPathRequestMatcher(&quot;/register&quot;),\n                                new AntPathRequestMatcher(&quot;/login&quot;),\n                                new AntPathRequestMatcher(&quot;/api/auth/**&quot;),\n                                new AntPathRequestMatcher(&quot;/css/**&quot;),\n                                new AntPathRequestMatcher(&quot;/js/**&quot;),\n                                new AntPathRequestMatcher(&quot;/images/**&quot;)\n                        ).permitAll()\n                        // Everything else requires authentication\n                        .anyRequest().authenticated()\n                )\n                .formLogin(form -&gt; form\n                        .loginPage(&quot;/login&quot;)\n                        .defaultSuccessUrl(&quot;/dashboard&quot;, true) // Redirect to dashboard after login\n                        .permitAll()\n                )\n                .logout(logout -&gt; logout\n                        .logoutUrl(&quot;/logout&quot;)\n                        .logoutSuccessUrl(&quot;/login?logout&quot;)\n                        .permitAll()\n                );\n\n        return http.build();\n</code></pre>\n<p>PS- removing</p>\n<pre><code>.formLogin(form -&gt; form\n                        .loginPage(&quot;/login&quot;)\n                        .defaultSuccessUrl(&quot;/dashboard&quot;, true) // Redirect to dashboard after login\n                        .permitAll()\n                )\n                .logout(logout -&gt; logout\n                        .logoutUrl(&quot;/logout&quot;)\n                        .logoutSuccessUrl(&quot;/login?logout&quot;)\n                        .permitAll()\n                )\n</code></pre>\n<p>results in Access to localhost was denied 403 error</p>\n",
    "tags" : [ "java", "spring", "spring-mvc", "jsp", "spring-security" ],
    "owner" : {
      "account_id" : 29389696,
      "reputation" : 1,
      "user_id" : 22518371,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AAcHTtfdlST7yltIzSuY20r0bZS_Neg1gHAOHbthgImlhuABeFM=k-s256",
      "display_name" : "Sumedh Kudale",
      "link" : "https://stackoverflow.com/users/22518371/sumedh-kudale"
    },
    "is_answered" : false,
    "view_count" : 58,
    "answer_count" : 1,
    "score" : -4,
    "last_activity_date" : 1758144944,
    "creation_date" : 1755874543,
    "link" : "https://stackoverflow.com/questions/79743544/jsl-springboot-security-login-page-redirecting-infinitely-err-too-many-redirect",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79767830,
    "question_id" : 79743544,
    "body" : "<p>On error, you're redirected to <code>/error</code>.</p>\n<p>The configuration that you've shared doesn't have <code>/error</code> in the allow list, therefore <code>/error</code> requires authentication.</p>\n<p>So you end up in an infinite loop upon authentication/authorization error -- or, as the browser describes it, <code>ERR_TOO_MANY_REDIRECTS</code>.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 183966,
      "reputation" : 15288,
      "user_id" : 419705,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/cvuY8.png?s=256",
      "display_name" : "Roddy of the Frozen Peas",
      "link" : "https://stackoverflow.com/users/419705/roddy-of-the-frozen-peas"
    },
    "creation_date" : 1758144944,
    "last_activity_date" : 1758144944,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140685204,
    "post_id" : 79743544,
    "body" : "Its because you are posting something wrong and you get redirected to /error which you have not whitelisted so it redirects you again and again. You can read about error management in the spring boot documentation and you can see this if you just enable your spring security debug logs. In the future you should learn to debug your code and read debug logs.",
    "score" : 0,
    "owner" : {
      "account_id" : 2064278,
      "reputation" : 15107,
      "user_id" : 1840146,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://i.sstatic.net/JXdxm.png?s=256",
      "display_name" : "Toerktumlare",
      "link" : "https://stackoverflow.com/users/1840146/toerktumlare"
    },
    "creation_date" : 1755877926,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}