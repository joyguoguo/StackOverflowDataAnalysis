{
  "question" : {
    "question_id" : 79752360,
    "title" : "Quarkus 3.21.4 -&gt; 3.24.4 issues: &quot;RequestScoped context was not active when trying to obtain a bean instance for a client proxy of CLASS bean&quot;",
    "body" : "<p>After updating Quarkus in our project, from 3.21.4 to 3.24.4 our test suite now fails multiple tests (doesn't seem to always be the same amount, so there appears to be some flakiness) with this exception:</p>\n<pre><code>2025-09-01 10:20:30.558 ERROR traceId=ab33746340bdd8c93728c3403f544134, parentId=, spanId=ba3d07db6204374c, sampled=true, requesterId=dead1234cafe123f2812f93f &lt;USER&gt; co.ma.us.ap.RestExceptionMapper:174 [vert.x-eventloop-thread-4-552] An exception occurred: RequestScoped context was not active when trying to obtain a bean instance for a client proxy of CLASS bean [class=io.quarkus.vertx.http.runtime.CurrentVertxRequest, id=0_6n6EmChCiiDdd8HelptG_A0AE]\n    - you can activate the request context for a specific method using the @ActivateRequestContext interceptor binding: jakarta.enterprise.context.ContextNotActiveException: RequestScoped context was not active when trying to obtain a bean instance for a client proxy of CLASS bean [class=io.quarkus.vertx.http.runtime.CurrentVertxRequest, id=0_6n6EmChCiiDdd8HelptG_A0AE]\n    - you can activate the request context for a specific method using the @ActivateRequestContext interceptor binding\n    at io.quarkus.arc.impl.ClientProxies.notActive(ClientProxies.java:76)\n    at io.quarkus.arc.impl.ClientProxies.getSingleContextDelegate(ClientProxies.java:32)\n    at io.quarkus.vertx.http.runtime.CurrentVertxRequest_ClientProxy.arc$delegate(Unknown Source)\n    at io.quarkus.vertx.http.runtime.CurrentVertxRequest_ClientProxy.setCurrent(Unknown Source)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusCurrentRequest.set(QuarkusCurrentRequest.java:33)\n    at org.jboss.resteasy.reactive.server.core.CurrentRequestManager.set(CurrentRequestManager.java:12)\n    at org.jboss.resteasy.reactive.server.core.ResteasyReactiveRequestContext.handleRequestScopeActivation(ResteasyReactiveRequestContext.java:704)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.handleRequestScopeActivation(QuarkusResteasyReactiveRequestContext.java:39)\n</code></pre>\n<p>I have tried using Cursor, CoPilot, even Junie (because we use IntelliJ in our project) to figure out a solution and they have been unable to figure it out, some of the things they tried:</p>\n<ul>\n<li>Adding <code>@ActivateRequestContext</code> to multiple classes (all of them tagged as <code>@Provider</code> and implementing ContainerRequestFilter)</li>\n<li>Adding <code>@Singleton</code> to the same classes that they added the previous annotation</li>\n</ul>\n<p>Right now we're doing smaller bumps, we moved from 3.21.4 to 3.22.1 and everything was fine.\nThen we moved to 3.23.4 and the issues shows up. I have checked the 3.23 migration guide and I can't see anything that at least from my understanding would cause this.</p>\n<p>I was expecting my project to run without issues when updating a <strong>minor</strong> version.</p>\n<p>This is for the RestExceptionMapper:</p>\n<pre><code>public class RestExceptionMapper {\n\n    private static final Logger LOG = Logger.getLogger(RestExceptionMapper.class);\n    private static final String LOG_PREFIX = &quot;An exception occurred: %s&quot;;\n\n    private static final Set&lt;Class&lt;? extends Exception&gt;&gt; KNOWN_BAD_REQUEST_TYPES = Set.of(\n        BadRequestException.class, JsonMappingException.class, JsonParseException.class, InvalidFormatException.class);\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(NotAllowedException e) {\n        return createResponse(Status.METHOD_NOT_ALLOWED, e, null, USER_NOT_ALLOWED.getErrorCode());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(MismatchedInputException e) {\n        return createResponse(BAD_REQUEST, null, REQUEST_BODY_IS_WRONGLY_FORMATTED);\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(JsonProcessingException e) {\n        return createResponse(BAD_REQUEST, null, REQUEST_BODY_IS_WRONGLY_FORMATTED);\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(ResteasyReactiveViolationException e) {\n        if (!e.getConstraintViolations()\n            .stream()\n            .filter(constraintViolation -&gt; constraintViolation\n                .getConstraintDescriptor()\n                .getAnnotation()\n                .annotationType()\n                .getTypeName()\n                .equals(ValidScopeConstraint.class.getTypeName()))\n            .toList().isEmpty()) {\n            return createResponse(UNAUTHORIZED, null, GENERIC_UNAUTHORIZED);\n        }\n\n        return createResponse(BAD_REQUEST, INVALID_REQUEST_FIELDS.getMessage(e.getMessage()), INVALID_REQUEST_FIELDS.getErrorCode());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(BadRequestException e) {\n        return createResponse(BAD_REQUEST, e, null, GENERIC_BAD_REQUEST.getErrorCode());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(WebApplicationException e) {\n\n        if (!(e instanceof ResteasyReactiveClientProblem)\n            &amp;&amp; e.getResponse() != null\n            &amp;&amp; e.getResponse().getStatus() == BAD_REQUEST.getStatusCode()) {\n\n            final Throwable cause = e.getCause();\n            var causeType = cause.getClass();\n\n            do {\n                if (KNOWN_BAD_REQUEST_TYPES.contains(causeType)) {\n                    return createResponse(Status.BAD_REQUEST,\n                                          (Exception) cause,\n                                          GENERIC_BAD_REQUEST.getMessage(),\n                                          GENERIC_BAD_REQUEST.getErrorCode());\n                }\n\n                causeType = (Class&lt;? extends Throwable&gt;) causeType.getSuperclass();\n            } while (!causeType.equals(Throwable.class));\n        } else if (e.getCause() instanceof IllegalArgumentException) {\n            return createResponse(BAD_REQUEST, e, null, GENERIC_BAD_REQUEST.getErrorCode());\n        }\n        return createResponse(Status.INTERNAL_SERVER_ERROR, e, UNKNOWN_ERROR_WITHOUT_CAUSE.getMessage(), ErrorMessage.UNKNOWN_ERROR);\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(ForbiddenException e) {\n        return createResponse(Status.FORBIDDEN, e, null, USER_NOT_ALLOWED.getErrorCode());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(NotAcceptableException e) {\n        return RestResponse.status(Status.NOT_ACCEPTABLE, ErrorResponse.builder().message(e.getMessage()).build());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(CompositePlatformException exception) {\n        return createResponse(getHighestStatusCode(exception.getMappedStatusCodes()), exception);\n    }\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(ValidationException e) {\n        return createResponse(BAD_REQUEST, e, e.getMessage(), GENERIC_BAD_REQUEST.getErrorCode());\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(Exception e) {\n        return createResponse(Status.INTERNAL_SERVER_ERROR, e, UNKNOWN_ERROR_WITHOUT_CAUSE.getMessage(), ErrorMessage.UNKNOWN_ERROR);\n    }\n\n    @ServerExceptionMapper\n    public RestResponse&lt;ErrorResponse&gt; map(PlatformException e) {\n        LOG.errorf(e, LOG_PREFIX, e.getMessage());\n\n        Status status = Status.fromStatusCode(e.getErrorMessage().getHttpStatusCode());\n\n        return createResponse(status, e, e.getErrorMessage(), e.getErrorComplementaryInformation());\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status, PlatformException e, ErrorMessage errorMessage) {\n        return createResponse(status,\n                              e == null ? errorMessage.getMessage() : errorMessage.getMessage(e.getAdditionalInformation()),\n                              errorMessage.getErrorCode());\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status,\n                                                       PlatformException e,\n                                                       ErrorMessage errorMessage,\n                                                       Object complementaryInformation) {\n        return createResponse(status,\n                              e == null ? errorMessage.getMessage() : errorMessage.getMessage(e.getAdditionalInformation()),\n                              errorMessage.getErrorCode(),\n                              complementaryInformation);\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status, Exception e, String customErrorMessage, String errorCode) {\n        if (status.getFamily().equals(Family.SERVER_ERROR)) {\n            LOG.errorf(e, LOG_PREFIX, e.getMessage());\n        } else {\n            LOG.infof(e, LOG_PREFIX, e.getMessage());\n        }\n\n        return (customErrorMessage != null)\n            ? RestResponse.status(status, ErrorResponse.builder().message(customErrorMessage).errorCode(errorCode).build())\n            : RestResponse.status(status, ErrorResponse.builder().message(e.getMessage()).errorCode(errorCode).build());\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status, String errorMessage, String errorCode) {\n        return RestResponse.status(\n            status,\n            ErrorResponse.builder()\n                .message(errorMessage)\n                .traceId(Span.current().getSpanContext().getTraceId())\n                .errorCode(errorCode)\n                .build()\n        );\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status,\n                                                       String errorMessage,\n                                                       String errorCode,\n                                                       Object complementaryInformation) {\n        return RestResponse.status(\n            status,\n            ErrorResponse.builder()\n                .message(errorMessage)\n                .traceId(Span.current().getSpanContext().getTraceId())\n                .errorCode(errorCode)\n                .complementaryInformation(complementaryInformation)\n                .build()\n        );\n    }\n\n    private RestResponse&lt;ErrorResponse&gt; createResponse(Status status, CompositePlatformException exception) {\n        LOG.warnf(&quot;Multiple exceptions occurred:&quot;);\n        exception.getExceptions().forEach(e -&gt; log.warnf(e, e.getMessage()));\n        String message = exception.getExceptions().stream().map(PlatformException::getMessage).distinct().collect(Collectors.joining(&quot;, &quot;));\n        return RestResponse.status(\n            status,\n            ErrorResponse.builder()\n                .message(message)\n                .traceId(Span.current().getSpanContext().getTraceId())\n                .errorCode(exception.getErrorCode())\n                .details(exception.getErrorDetails())\n                .build()\n        );\n    }\n\n    private Status getHighestStatusCode(Map&lt;Status, List&lt;PlatformException&gt;&gt; mappedStatusCodes) {\n        if (mappedStatusCodes.containsKey(Status.FORBIDDEN)) {\n            return Status.FORBIDDEN;\n        }\n        if (mappedStatusCodes.containsKey(Status.CONFLICT)) {\n            return Status.CONFLICT;\n        }\n        if (mappedStatusCodes.containsKey(Status.NOT_FOUND)) {\n            return Status.NOT_FOUND;\n        }\n        if (mappedStatusCodes.containsKey(Status.BAD_REQUEST)) {\n            return Status.BAD_REQUEST;\n        }\n        return Status.INTERNAL_SERVER_ERROR;\n    }\n</code></pre>\n<p>And this is the code for a failing test</p>\n<pre><code>@Test\n@TestSecurity(user = &quot;alice&quot;, roles = {&quot;user&quot;})\n@OidcSecurity(claims = {\n    @Claim(key = &quot;sub&quot;, value = &quot;someIdThatDoesNotAffectUs&quot;),\n    @Claim(key = &quot;platform_user_id&quot;, value = &quot;dead1234cafe123f2812f93f&quot;),\n    @Claim(key = &quot;organization_id&quot;, value = ORGANIZATION_ID)\n})\nvoid testThatFails() {\n    //given\n    ObjectId cartridgeVariantId = new ObjectId();\n    String cartridgeVariantIdString = cartridgeVariantId.toHexString();\n    TestDataUtils.givenRequesterAsServiceAdmin(userRepository, userWithRolesRepository, cartridgeVariantIdString, false);\n    var givenOrganization = givenOrganization(organizationRepository, new ObjectId(ORGANIZATION_ID), ORGANIZATION_NAME, QualificationLevel.LEVEL_2, null);\n    givenUsageRight(usageRightRepository, new ObjectId(ORGANIZATION_ID), cartridgeVariantId);\n    String newUserFirstName = &quot;Martina&quot;;\n    String newUserLastName = &quot;Mustermann&quot;;\n    String cartridgeRoleId = new ObjectId().toHexString();\n    String groupId = new ObjectId().toHexString();\n    UserJoinOrganizationInvitationRequestDto given = UserJoinOrganizationInvitationRequestDto\n        .builder()\n        .invitations(List.of(UserToOrganizationInvitationDto\n                                 .builder()\n                                 .email(TEST_USER_EMAIL_NEW)\n                                 .organizationId(ORGANIZATION_ID)\n                                 .salutation(&quot;w&quot;)\n                                 .firstname(newUserFirstName)\n                                 .lastname(newUserLastName)\n                                 .organizationRole(ORGANIZATION_MEMBER)\n                                 .cartridgeRoles(List.of(CartridgeRoleAssignmentRequestDto\n                                                             .builder()\n                                                             .roleId(cartridgeRoleId)\n                                                             .cartridgeVariantId(cartridgeVariantIdString)\n                                                             .build()))\n                                 .department(&quot;MANAGEMENT&quot;)\n                                 .position(&quot;CEO&quot;)\n                                 .groupIds(Set.of(groupId))\n                                 .build()))\n        .build();\n\n    journalTopic.clear();\n\n    //when\n    var actual = given()\n        .body(given)\n        .contentType(ContentType.JSON)\n        .when()\n        .post(&quot;/user/invitation&quot;)\n        .then()\n        .statusCode(StatusCode.CREATED)\n        .extract()\n        .as(InviteUsersResponseDto.class);\n    //then\n\n    assertThat(actual.getUsers()).singleElement().satisfies(user -&gt; {\n        assertThat(user.getEmail()).isEqualTo(TEST_USER_EMAIL_NEW);\n        assertThat(user.getLastname()).isEqualTo(newUserLastName);\n        assertThat(user.getFirstname()).isEqualTo(newUserFirstName);\n        assertThat(user.getOrganizationMemberships())\n            .singleElement()\n            .satisfies(membership -&gt; assertThat(membership.getOrganizationId()).isEqualTo(ORGANIZATION_ID));\n    });\n    assertThat(actual.getFailures()).isEmpty();\n\n    Awaitility.await().atMost(TEST_TIMEOUT).untilAsserted(() -&gt; {\n        var allUsers = userRepository.listAll().await().atMost(TEST_TIMEOUT);\n        assertThat(allUsers)\n            .satisfiesExactlyInAnyOrder(actualRequester -&gt; assertThat(actualRequester.getId()).isEqualTo(new ObjectId(REQUESTER_ID)),\n                                        actualNewUser -&gt; {\n                                            assertThat(actualNewUser.getEmail()).isEqualTo(TEST_USER_EMAIL_NEW);\n                                            assertThat(actualNewUser.getLastname()).isEqualTo(newUserLastName);\n                                            assertThat(actualNewUser.getFirstname()).isEqualTo(newUserFirstName);\n                                            assertThat(actualNewUser.getOrganizationMemberships()).singleElement().satisfies(membership -&gt; {\n                                                assertThat(membership.getOrganizationId()).isEqualTo(new ObjectId(ORGANIZATION_ID));\n                                                assertThat(membership.getDepartment()).isEqualTo(DepartmentAffiliation.MANAGEMENT);\n                                                assertThat(membership.getPosition()).isEqualTo(&quot;CEO&quot;);\n                                                assertThat(membership.getUserOrganizationStatus()).isEqualTo(UserOrganizationStatus.INVITED);\n                                            });\n                                        });\n        var actualNewUser = allUsers.stream().filter(u -&gt; TEST_USER_EMAIL_NEW.equals(u.getEmail())).findAny().orElseThrow();\n\n        List&lt;? extends Message&lt;PlattformMessage&gt;&gt; actualPublishedAuthorizerCommands = authorizerCommandQueue.received();\n        assertThat(actualPublishedAuthorizerCommands.stream().map(Message::getPayload)).singleElement().satisfies(payload -&gt; {\n            assertThat(payload).isInstanceOf(AssignRoleAndGroupsToNewOrganizationMemberCommand.class);\n            AssignRoleAndGroupsToNewOrganizationMemberCommand command = (AssignRoleAndGroupsToNewOrganizationMemberCommand) payload;\n            assertThat(command.requesterId()).isEqualTo(REQUESTER_ID);\n            assertThat(command.userId()).isEqualTo(actualNewUser.getId().toHexString());\n            assertThat(command.organizationId()).isEqualTo(ORGANIZATION_ID);\n            assertThat(command.organizationRole()).isEqualTo(\n                ORGANIZATION_MEMBER);\n            assertThat(command.cartridgeRoles())\n                .singleElement()\n                .isEqualTo(CartridgeRoleAssignmentRequestDto\n                               .builder()\n                               .roleId(cartridgeRoleId)\n                               .cartridgeVariantId(cartridgeVariantIdString)\n                               .build());\n            assertThat(command.groupIds()).singleElement().isEqualTo(groupId);\n        });\n\n        List&lt;? extends Message&lt;PlattformMessage&gt;&gt; actualPublishedEvents = userEventTopic.received();\n        assertThat(actualPublishedEvents.stream().map(Message::getPayload))\n            .hasSize(3)\n            .satisfiesExactlyInAnyOrder(event -&gt; assertOrganizationMembershipCreatedEvent(event, actualNewUser),\n                                        event -&gt; assertionsPayloadOrganizationMembershipUpdatedEvent(new ObjectId(ORGANIZATION_ID),\n                                                                                                     actualNewUser.getId(),\n                                                                                                     actualNewUser.getEmail(),\n                                                                                                     UserOrganizationStatus.INVITED.toString(),\n                                                                                                     event,\n                                                                                                     actualNewUser.getVersion(), null,\n                                                                                                     givenOrganization.getQualificationLevel()),\n                                        event -&gt; assertUserCreatedEvent(event, actualNewUser, TEST_USER_EMAIL_NEW));\n\n        Map&lt;String, AuditChangeEntry&gt; expectedChangeSet = new HashMap&lt;&gt;();\n        expectedChangeSet.put(ORGANIZATION_MEMBERSHIP_FORMAT.formatted(ORGANIZATION_MEMBERSHIP_IDENTIFIER, ORGANIZATION_ID,\n                                                                       USER_ORGANIZATION_STATUS_IDENTIFIER),\n                              new AuditChangeEntry(null, UserOrganizationStatus.INVITED.name()));\n        String expectedReason = &quot;User was invited&quot;;\n        List&lt;? extends Message&lt;AuditEvent&gt;&gt; auditEvents = journalTopic.received();\n        assertThat(auditEvents)\n            .hasSize(1)\n            .map(Message::getPayload)\n            .extracting(&quot;operationType&quot;, &quot;entityType&quot;, &quot;entityId&quot;, &quot;version&quot;, &quot;changeSet&quot;, &quot;reason&quot;)\n            .containsExactlyInAnyOrder(tuple(CREATE, &quot;User&quot;, actualNewUser.getId().toHexString(), 1, expectedChangeSet, expectedReason));\n\n        List&lt;KpiMessage&gt; actualPublishedKpiEvents = serviceBusTestUtils.receiveFromTopicWithTimeout(messagingReceiverClient,\n                                                                                                    ANALYTICS_TOPIC,\n                                                                                                    SUBSCRIPTION_NAME,\n                                                                                                    KpiMessage.class,\n                                                                                                    TOPIC_RECEIVE_TIMEOUT);\n        assertThat(actualPublishedKpiEvents).singleElement().satisfies(kpiEvent -&gt; {\n            assertThat(kpiEvent.userId()).isEqualTo(REQUESTER_ID);\n            assertThat(kpiEvent.payload().get(&quot;userId&quot;)).isEqualTo(actualNewUser.getId().toHexString());\n            assertThat(kpiEvent.organizationId()).isEqualTo(ORGANIZATION_ID);\n            assertThat(kpiEvent.eventType()).isEqualTo(ORGANIZATION_MEMBERSHIP_CREATED.getValue());\n        });\n\n        Mockito\n            .verify(mailService, Mockito.times(1))\n            .sendInviteUnregisteredUserToOrganizationMail(eq(TEST_USER_EMAIL_NEW),\n                                                          eq(newUserFirstName),\n                                                          eq(newUserLastName),\n                                                          eq(ORGANIZATION_NAME),\n                                                          any(),\n                                                          any());\n    });\n}\n</code></pre>\n<p>Edit\nOne of my colleagues did smaller increment updates and we found something interesting.</p>\n<pre><code>3.21.4 -&gt; 3.22.1 OK\n3.22.1 -&gt; 3.22.2 OK\n3.22.2 -&gt; 3.22.3 NOK\n</code></pre>\n<p>So whatever causes this happened in a PATCH update... which just boggles the mind, but if this helps someone help us then all the better.</p>\n",
    "tags" : [ "java", "quarkus" ],
    "owner" : {
      "account_id" : 43745015,
      "reputation" : 37,
      "user_id" : 31394879,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e7d1a5afd604518fd4fa164419245fe7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user31394879",
      "link" : "https://stackoverflow.com/users/31394879/user31394879"
    },
    "is_answered" : true,
    "view_count" : 195,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1756924557,
    "creation_date" : 1756718963,
    "link" : "https://stackoverflow.com/questions/79752360/quarkus-3-21-4-3-24-4-issues-requestscoped-context-was-not-active-when-tryi",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79754375,
    "question_id" : 79752360,
    "body" : "<p>We figure out how to get around this, we don't know if there would be alternatives but we are satisfied with the existing one so we will not pursue any further investigation for now.</p>\n<p>So if anyone runs into this thread at some point and has the same issue here's how we got around it.</p>\n<p>We created a wrapper for managing context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class ArcContextWrapper {\n\n    public ManagedContext getRequestContext() {\n        return Arc.container().requestContext();\n    }\n\n}\n</code></pre>\n<p>Then we introduced this in the method we figured out was causing the issue</p>\n<pre><code>ManagedContext ctx = arcContextWrapper.getRequestContext();\nctx.activate();\n</code></pre>\n<p>This method had a lot of reactive calls in chain that used multiple threads, which was causing it the context to get lost.<br />\nTo ensure this works properly we added this at the end of the chain (that starts with <code>deferred</code>)</p>\n<pre><code>.eventually(ctx::terminate)\n</code></pre>\n<p>That exception I reported no longer happens after this change and the app is behaving normally.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 43745015,
      "reputation" : 37,
      "user_id" : 31394879,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e7d1a5afd604518fd4fa164419245fe7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user31394879",
      "link" : "https://stackoverflow.com/users/31394879/user31394879"
    },
    "creation_date" : 1756890287,
    "last_activity_date" : 1756891518,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140706538,
    "post_id" : 79752360,
    "body" : "Looking at stacktrace seems your are extracting (in RestExceptionMapper) some info from vert-x request, but no request is currently active; give a try mark failing tests with <code>@ActivateRequestContext</code> to see if something change. But have more code may help us to help you",
    "score" : 0,
    "owner" : {
      "account_id" : 3052937,
      "reputation" : 18534,
      "user_id" : 2587166,
      "user_type" : "registered",
      "accept_rate" : 83,
      "profile_image" : "https://i.sstatic.net/pgHgd.jpg?s=256",
      "display_name" : "Luca Basso Ricci",
      "link" : "https://stackoverflow.com/users/2587166/luca-basso-ricci"
    },
    "creation_date" : 1756720345,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}