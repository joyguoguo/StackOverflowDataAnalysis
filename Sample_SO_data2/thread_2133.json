{
  "question" : {
    "question_id" : 79647618,
    "title" : "Is there a way to display a scaled BufferedImage that looks identical to a full-resolution Robot screencapture?",
    "body" : "<p>I am trying to display a screen capture as an ImageIcon on a JLabel. To generate the BufferedImage object I used a Robot object along with a MultiResultionScreenCapture. As noted in <a href=\"https://stackoverflow.com/questions/69018910/java-awt-robot-uses-weird-settings-for-screen-resolution-at-4k-screen\">this Stackoverflow question</a>, the resultion of the capture is altered depending on display scale, and my display has a 175% scale setting. When I display the scaled down capture it's the proper size but isn't the same resolution as the display. When I display the full size capture, its larger than the captured area, but the correct resolution.</p>\n<p>Scaled Down:</p>\n<p><a href=\"https://i.sstatic.net/DdZ7azW4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/DdZ7azW4.png\" alt=\"no_scaling\" /></a></p>\n<p>Full Scale:</p>\n<p><a href=\"https://i.sstatic.net/e8Oajwav.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/e8Oajwav.png\" alt=\"no_scaling_large\" /></a></p>\n<p>Scaled Down with bilinear interpolation:</p>\n<p><a href=\"https://i.sstatic.net/pux4cEfg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pux4cEfg.png\" alt=\"bilinear_scaling\" /></a></p>\n<p>img.getScaledInstance Method:</p>\n<p><a href=\"https://i.sstatic.net/GPOwRTQE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/GPOwRTQE.png\" alt=\"img_scaling_method\" /></a></p>\n<pre><code>public static void updateCurrentSelection(Rectangle rect) {\n    Robot robot;\n    try {\n        robot = new Robot();\n    } catch (AWTException e) {\n        e.printStackTrace();\n        return;\n    }\n    MultiResolutionImage multiResImg = robot.createMultiResolutionScreenCapture(rect);\n    java.util.List&lt;Image&gt; imgs = multiResImg.getResolutionVariants();\n\n    Image img = imgs.getLast(); // Gets largest image\n    mainMenu.setImage(img, imgs.getFirst().getWidth(mainMenu), imgs.getFirst().getHeight(mainMenu)); Passing smaller size to be resized to\n}\n\npublic void setImage(Image img, int width, int height) {\n    BufferedImage buf = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n    Graphics2D g = buf.createGraphics();\n    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); \n    g.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g.drawImage(img, 0, 0, width, height, null);\n    g.dispose();\n\n    selectionLabel.setIcon(new ImageIcon(buf));\n}\n</code></pre>\n<p>I have tried manually scaling the full size image using Graphics2D and tweaking the anti-aliasing and interpolation settings with some improvement but not perfect/what I'm looking for.</p>\n<p>Is there some way I can achieve the same quality image in my program's window as my display? The desired outcome is to have the image displayed on the window to be the same resolution AND size as the native screen.</p>\n",
    "tags" : [ "java", "swing", "graphics", "bufferedimage" ],
    "owner" : {
      "account_id" : 20902941,
      "reputation" : 35,
      "user_id" : 15355637,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/tVUaI.gif?s=256",
      "display_name" : "Steven Tracey",
      "link" : "https://stackoverflow.com/users/15355637/steven-tracey"
    },
    "is_answered" : true,
    "view_count" : 136,
    "answer_count" : 1,
    "score" : -2,
    "last_activity_date" : 1748960972,
    "creation_date" : 1748787681,
    "link" : "https://stackoverflow.com/questions/79647618/is-there-a-way-to-display-a-scaled-bufferedimage-that-looks-identical-to-a-full",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79651416,
    "question_id" : 79647618,
    "body" : "<p>The problem is that you are using Swings <code>ImageIcon</code> which has no support for a logical size different from the imageâ€™s physical size. You just have to use your own <code>Icon</code> implementation to call <code>drawImage</code> with the original screen capture and the logical size you already know even before doing the screen capture.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void updateCurrentSelection(Rectangle rect) {\n    Robot robot;\n    try {\n        robot = new Robot();\n    } catch (AWTException e) {\n        e.printStackTrace();\n        return;\n    }\n    Image img = robot.createMultiResolutionScreenCapture(rect)\n          .getResolutionVariants()\n          .getLast(); // Gets native image\n    mainMenu.setImage(img, rect.width, rect.height);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public void setImage(Image img, int width, int height) {\n    record IconWithSize(Image image, int getIconWidth, int getIconHeight)\n                                                                 implements Icon {\n        @Override public void paintIcon(Component c, Graphics g, int x, int y) {\n            g.drawImage(image, x, y, getIconWidth, getIconHeight, c);\n        }\n    }\n    selectionLabel.setIcon(new IconWithSize(img, width, height));\n}\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1748960669,
    "last_activity_date" : 1748960972,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140479561,
    "post_id" : 79647618,
    "body" : "You should capture the original high res version,. Don&#39;t do any scaling, it will only loose detail. Instead paint the image in the same resolution. See  <a href=\"https://stackoverflow.com/a/71101882/1428606\">stackoverflow.com/a/71101882/1428606</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 1531514,
      "reputation" : 27191,
      "user_id" : 1428606,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/5daf03972dae4f96a2d09ca5cc681920?s=256&d=identicon&r=PG",
      "display_name" : "Harald K",
      "link" : "https://stackoverflow.com/users/1428606/harald-k"
    },
    "creation_date" : 1748872945,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140477500,
    "post_id" : 79647618,
    "body" : "Although, I think, <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Robot.html#createMultiResolutionScreenCapture(java.awt.Rectangle)\" rel=\"nofollow noreferrer\"><code>createMultiResolutionScreenCapture</code></a> seems to already contain the image which the user sees (the <i>base image</i> in the documentation). So the solution may simply be to get the first image from the resulting <code>MultiResolutionImage</code> and perform coordinate translation instead of resizing. But I can&#39;t test it now, sorry. Just a suggestion.",
    "score" : 0,
    "owner" : {
      "account_id" : 9059972,
      "reputation" : 3471,
      "user_id" : 6746785,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
      "display_name" : "gthanop",
      "link" : "https://stackoverflow.com/users/6746785/gthanop"
    },
    "creation_date" : 1748804506,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140477441,
    "post_id" : 79647618,
    "body" : "Can you please try and scale down the full scale image with: <code>selectionLabel.setIcon(new ImageIcon(img.getScaledInstance(width, height, Image.SCALE_SMOOTH)));</code> and see if that resizing works better? I&#39;ve seen resizing of images via <code>Graphics</code> before, where they were fixed by <code>getScaledInstance</code> instead. See for example <a href=\"https://stackoverflow.com/questions/79374967/java-buffered-image-anti-aliasing-not-working#comment139978885_79374967\">this Q&amp;A</a>.",
    "score" : 0,
    "owner" : {
      "account_id" : 9059972,
      "reputation" : 3471,
      "user_id" : 6746785,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/3zi2O.png?s=256",
      "display_name" : "gthanop",
      "link" : "https://stackoverflow.com/users/6746785/gthanop"
    },
    "creation_date" : 1748802982,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140477073,
    "post_id" : 79647618,
    "body" : "Please provide enough code so others can better understand or reproduce the problem.",
    "score" : 0,
    "owner" : {
      "account_id" : -1,
      "reputation" : 1,
      "user_id" : -1,
      "user_type" : "moderator",
      "profile_image" : "https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=256&d=identicon&r=PG",
      "display_name" : "Community",
      "link" : "https://stackoverflow.com/users/-1/community"
    },
    "creation_date" : 1748790191,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79651416" : [ {
      "comment_id" : 140487328,
      "post_id" : 79651416,
      "body" : "This worked perfectly, thank you so much!",
      "score" : 0,
      "owner" : {
        "account_id" : 20902941,
        "reputation" : 35,
        "user_id" : 15355637,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/tVUaI.gif?s=256",
        "display_name" : "Steven Tracey",
        "link" : "https://stackoverflow.com/users/15355637/steven-tracey"
      },
      "creation_date" : 1749051773,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}