{
  "question" : {
    "question_id" : 79590696,
    "title" : "getting error Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: org.apache.hadoop.util.ShutdownHook",
    "body" : "<p>I have</p>\n<pre><code>java -version\n**openjdk version &quot;11.0.8&quot; 2020-07-14 LTS**\nOpenJDK Runtime Environment 18.9 (build 11.0.8+10-LTS)\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.8+10-LTS, mixed mode, sharing)\n\n**Hadoop 3.4.1**\n\n**Hive 4.0.1**\n</code></pre>\n<p>hive metastore starts fine</p>\n<p>Trying to start hive thrift server</p>\n<pre><code>$HIVE_HOME/bin/hiveserver2 &amp;\n</code></pre>\n<p>I am getting error</p>\n<pre><code>    Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: \n    \n        org.apache.hadoop.util.ShutdownHookManager.addShutdownHook(Ljava/lang/Runnable;IJLjava/util/concurrent/TimeUnit;)V\n                at org.apache.hive.common.util.ShutdownHookManager.addShutdownHook(ShutdownHookManager.java:99)\n                at org.apache.hive.common.util.ShutdownHookManager.addShutdownHook(ShutdownHookManager.java:71)\n                at org.apache.hive.common.util.HiveStringUtils.startupShutdownMessage(HiveStringUtils.java:770)\n                at org.apache.hive.service.server.HiveServer2.main(HiveServer2.java:1276)\n                at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n                at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                at java.lang.reflect.Method.invoke(Method.java:498)\n                at org.apache.hadoop.util.RunJar.run(RunJar.java:221)\n                at org.apache.hadoop.util.RunJar.main(RunJar.java:136)\n</code></pre>\n<p>Any idea what is causing this error?</p>\n<p>Thanks</p>\n",
    "tags" : [ "java", "hadoop", "hive", "hiveserver2" ],
    "owner" : {
      "account_id" : 9169356,
      "reputation" : 125,
      "user_id" : 6817562,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/KdT90.jpg?s=256",
      "display_name" : "Mich Talebzadeh",
      "link" : "https://stackoverflow.com/users/6817562/mich-talebzadeh"
    },
    "is_answered" : false,
    "view_count" : 58,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1745843052,
    "creation_date" : 1745500498,
    "link" : "https://stackoverflow.com/questions/79590696/getting-error-exception-in-thread-main-java-lang-nosuchmethoderror-org-apache",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79590918,
    "question_id" : 79590696,
    "body" : "<p>The error is caused due a mismatch between the version that you're using of hadoop at compile time and the version that you're using at runtime (on your server). You should check both and make sure they're the same.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26746848,
      "reputation" : 453,
      "user_id" : 20346807,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ALm5wu3JY7zmtBLIKO51iCoerZOU2SjkVZ97Khtr_zmC=k-s256",
      "display_name" : "Joan",
      "link" : "https://stackoverflow.com/users/20346807/joan"
    },
    "creation_date" : 1745506543,
    "last_activity_date" : 1745506543,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79596465,
    "question_id" : 79590696,
    "body" : "<p>As it turned out i had an old version of Hbase on the classpath that was causing the problem. just did</p>\n<p>mv hbase-1.2.3 hbase-1.2.3_old</p>\n<p>and it did the trick. Moving the old HBase directory effectively removed its JARs from the classpath that Hive was using, allowing it to pick up the correct Hadoop dependencies.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9169356,
      "reputation" : 125,
      "user_id" : 6817562,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/KdT90.jpg?s=256",
      "display_name" : "Mich Talebzadeh",
      "link" : "https://stackoverflow.com/users/6817562/mich-talebzadeh"
    },
    "creation_date" : 1745843052,
    "last_activity_date" : 1745843052,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}