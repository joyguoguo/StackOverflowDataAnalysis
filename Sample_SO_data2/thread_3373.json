{
  "question" : {
    "question_id" : 79555084,
    "title" : "Spring-Integration-Core library seems to log this information at INFO level once a threshold exceeds FAILED_ATTEMPTS_THRESHOLD",
    "body" : "<p><a href=\"https://github.com/spring-projects/spring-integration/blob/fe5b12d98bc98ff03a27ae95a72a2768ab3795a2/spring-integration-core/src/main/java/org/springframework/integration/handler/support/MessagingMethodInvokerHelper.java#L138\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration/blob/fe5b12d98bc98ff03a27ae95a72a2768ab3795a2/spring-integration-core/src/main/java/org/springframework/integration/handler/support/MessagingMethodInvokerHelper.java#L138</a></p>\n<p>Spring-Integration-Core library seems to log this information at INFO level once a threshold exceeds FAILED_ATTEMPTS_THRESHOLD. What is the significance of this limit ?</p>\n",
    "tags" : [ "java", "spring-boot", "spring-integration" ],
    "owner" : {
      "account_id" : 32869370,
      "reputation" : 21,
      "user_id" : 25537199,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f91d70db52b0b079b3fabfc6dbc6a6e5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Harika penumatsa",
      "link" : "https://stackoverflow.com/users/25537199/harika-penumatsa"
    },
    "is_answered" : false,
    "view_count" : 40,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1743779087,
    "creation_date" : 1743762915,
    "link" : "https://stackoverflow.com/questions/79555084/spring-integration-core-library-seems-to-log-this-information-at-info-level-once",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79555676,
    "question_id" : 79555084,
    "body" : "<p>The comment for that constant is this:</p>\n<pre><code>// Number of times to try an InvocableHandlerMethod before giving up in favor of an expression.\nprivate static final int FAILED_ATTEMPTS_THRESHOLD = 100;\n</code></pre>\n<p>And that is used like this:</p>\n<pre><code>private Object fallbackToInvokeExpression(HandlerMethod handlerMethod, ParametersWrapper parameters) {\n    Expression expression = handlerMethod.expression;\n\n    if (++handlerMethod.failedAttempts &gt;= FAILED_ATTEMPTS_THRESHOLD) {\n        handlerMethod.spelOnly = true;\n        LOGGER.info(() -&gt; &quot;Failed to invoke [ &quot; + handlerMethod.invocableHandlerMethod +\n                &quot;] with provided arguments [ &quot; + parameters + &quot; ]. \\n&quot; +\n                &quot;Falling back to SpEL invocation for expression [ &quot; +\n                expression.getExpressionString() + &quot; ]&quot;);\n    }\n\n    return invokeExpression(expression, parameters);\n}\n</code></pre>\n<p>Which is called as a fallback logic in case of that number of reflection method invocation failures.</p>\n<p>The point is that reflection invocation is much faster than SpEL evaluation. However at the same time we have some limited conversions capabilities with direct method invocation. The SpEL does more conversions attempts between arguments provided and expected parameters on the method signature.</p>\n<p>We have that log as an <code>INFO</code> just give a clue that it is OK to fallback, but you may revise your method signature to narrow conversion routes. This way you would be able to gain performance from reflection and would not have such a log message.</p>\n<p>The threshold is so high with the meaning that might not all your messages are failing to be converted to into method invocation arguments for reflection call.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3273937,
      "reputation" : 122596,
      "user_id" : 2756547,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/2158ce6e7c048277890eb64458864c1c?s=256&d=identicon&r=PG",
      "display_name" : "Artem Bilan",
      "link" : "https://stackoverflow.com/users/2756547/artem-bilan"
    },
    "creation_date" : 1743779087,
    "last_activity_date" : 1743779087,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}