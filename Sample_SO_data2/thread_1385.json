{
  "question" : {
    "question_id" : 79715999,
    "title" : "Template calls in &lt;script&gt; blocks are not allowed",
    "body" : "<p>I'm using the jte template engine within a Spring-Boot project and need to include a template into a <code>&lt;script&gt;</code> tag:</p>\n<pre><code>&lt;script type=&quot;application/ld+json&quot;&gt;\n    @template.pages.json-ld(product = product)\n&lt;/script&gt;\n</code></pre>\n<p>Jte doesn't allow this and throws the following exception with the message <code>Template calls in &lt;script&gt; blocks are not allowed.</code></p>\n<pre><code>gg.jte.TemplateException: Failed to compile pages/product.jte, error at line 16: Template calls in &lt;script&gt; blocks are not allowed.\n    at gg.jte.compiler.java.JavaCodeGenerator.onError(JavaCodeGenerator.java:228) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.TemplateParser.doParse(TemplateParser.java:248) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.TemplateParser.parse(TemplateParser.java:85) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.java.JavaCodeGenerator$JavaContentProcessor.onContentBlock(JavaCodeGenerator.java:610) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.ContentProcessor.handleContentBlock(ContentProcessor.java:69) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.ContentProcessor.process(ContentProcessor.java:40) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.java.JavaCodeGenerator.writeJavaCodeWithContentSupport(JavaCodeGenerator.java:486) ~[jte-3.1.16.jar:na]\n    at gg.jte.compiler.java.JavaCodeGenerator.appendParam(JavaCodeGenerator.java:549) ~[jte-3.1.16.jar:na]\n</code></pre>\n<p>Is there any workaround for this?</p>\n",
    "tags" : [ "java", "spring-boot", "jte" ],
    "owner" : {
      "account_id" : 3138894,
      "reputation" : 3873,
      "user_id" : 2654773,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/kxHdJ.png?s=256",
      "display_name" : "eztam",
      "link" : "https://stackoverflow.com/users/2654773/eztam"
    },
    "is_answered" : true,
    "view_count" : 54,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1754044137,
    "creation_date" : 1753564484,
    "link" : "https://stackoverflow.com/questions/79715999/template-calls-in-script-blocks-are-not-allowed",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79722367,
    "question_id" : 79715999,
    "body" : "<p>This is a (deliberate) JTE restriction that is apparently intended to reduce the risk of security vulnerabilities.  (Whether it actually does that is open to debate ... and not really relevant to this answer.)</p>\n<blockquote>\n<p>Is there any workaround for this?</p>\n</blockquote>\n<p>Not really, no.  Certainly not in the general case.</p>\n<p>But what you could <em>possibly</em> do is to refactor the javascript so that</p>\n<pre><code>  @template.pages.json-ld(product = product)\n</code></pre>\n<p>can be replaced with a call to a javascript function that is defined in a static script file that is defined elsewhere.</p>\n<hr />\n<p>Note that an issue has been raised for this saying that the restriction is &quot;too opinionated&quot;; see <a href=\"https://github.com/casid/jte/issues/437\" rel=\"nofollow noreferrer\">https://github.com/casid/jte/issues/437</a>.  You can read the developers' response for yourself.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723470,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1754044137,
    "last_activity_date" : 1754044137,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}