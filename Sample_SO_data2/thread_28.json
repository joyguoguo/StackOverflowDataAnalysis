{
  "question" : {
    "question_id" : 79844827,
    "title" : "Java &amp; Vert.x: running two different dependency sets in the same JVM with different class loaders",
    "body" : "<p>I have a fairly complex API service running under Vert.x in the JVM - it started pretty simple but grew massively over the 10 years it has been in production. So much so that we're in dependency hell - many external dependencies that often interact in <em>interesting</em> ways, for example: yesterday I tried to upgrade the Google client and that somehow broke the GraalVM integration - the consumers of these libraries are distinct from each other and as far as I know the Google client isn't referencing GraalVM, and vice versa (but that behavior charge is 100% a result of the Google version update, tested multiple times).</p>\n<p>I'm looking at a way to break out these modules (and others) so that they don't all live in the same dependency graph, but I don't want to increase my resource footprint as a result - so breaking these up to different microservices running each on their own JVM (possibly their own VM) is something I rather avoid. I'm wondering if it's possible to use two different class loaders to load two different fat jars, so that multiple versions of the same APIs (Java modules and classes) can live in the same JVM without stepping on each other, and whether we can then load <code>Verticle</code>s from each into the same Vert.x instance.</p>\n",
    "tags" : [ "java", "dependencies", "classloader", "vert.x" ],
    "owner" : {
      "account_id" : 21889,
      "reputation" : 32802,
      "user_id" : 53538,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/21a10c379a9dfc3284a4a75edb933745?s=256&d=identicon&r=PG",
      "display_name" : "Guss",
      "link" : "https://stackoverflow.com/users/53538/guss"
    },
    "is_answered" : false,
    "view_count" : 37,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1765568062,
    "creation_date" : 1765538502,
    "link" : "https://stackoverflow.com/questions/79844827/java-vert-x-running-two-different-dependency-sets-in-the-same-jvm-with-differ",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79844857,
    "question_id" : 79844827,
    "body" : "<p>Yes, it is possible. That's how application servers usually work in Java. Example Tomcat. I would recommend to use an existing server or framework rather than inventing your own custom classloading solution. I understand Vert.x has some features that could be helpful for this scenario.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1765540855,
    "last_activity_date" : 1765540855,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79845196,
    "question_id" : 79844827,
    "body" : "<p>@aled, any example code on how to create a new class loader and use it to load a jar?</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 21889,
      "reputation" : 32802,
      "user_id" : 53538,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/21a10c379a9dfc3284a4a75edb933745?s=256&d=identicon&r=PG",
      "display_name" : "Guss",
      "link" : "https://stackoverflow.com/users/53538/guss"
    },
    "creation_date" : 1765568062,
    "last_activity_date" : 1765568062,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}