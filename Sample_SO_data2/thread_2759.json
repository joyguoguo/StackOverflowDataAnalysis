{
  "question" : {
    "question_id" : 79599184,
    "title" : "tomcat error : Exception sending context initialized event to listener instance of class [com.vaadin.flow.server.startup.ServletContextListeners]",
    "body" : "<p>I am developing a vaadin app.\nEverything works well under Eclipse (last version), jdk 22.\nWhen deploying to Tomcat the app hangs with the following ( I found plenty of\nusers that got the same problem) error:</p>\n<p>ERROR---------------\nSEVERE: Exception sending context initialized event to listener instance of class [com.vaadin.flow.server.startup.ServletContextListeners]\njava.lang.IllegalStateException: The application Lookup instance is not found in VaadinContext. The instance is supposed to be created by a ServletContainerInitializer. Issues known to cause this problem are:</p>\n<ul>\n<li>A Spring Boot application deployed as a war-file but the main application class does not extend SpringBootServletInitializer</li>\n<li>An embedded server that is not set up to execute ServletContainerInitializers</li>\n<li>Unit tests which do not properly set up the context for the test</li>\n</ul>\n<pre><code>    at com.vaadin.flow.server.startup.ApplicationConfiguration.lambda$get$0(ApplicationConfiguration.java:53)\n    at com.vaadin.flow.server.VaadinServletContext.getAttribute(VaadinServletContext.java:73)\n    at com.vaadin.flow.server.startup.ApplicationConfiguration.get(ApplicationConfiguration.java:47)\n    at com.vaadin.flow.server.DeploymentConfigurationFactory.createPropertyDeploymentConfiguration(DeploymentConfigurationFactory.java:75)\n    at com.vaadin.flow.server.startup.ServletDeployer$StubServletConfig.createDeploymentConfiguration(ServletDeployer.java:138)\n    at com.vaadin.flow.server.startup.ServletDeployer.lambda$getServletConfigurations$0(ServletDeployer.java:195)\n    at java.base/java.util.Optional.ifPresent(Optional.java:178)\n</code></pre>\n<p>ERROR---------------</p>\n<p>It's a week that I've tried everything including running plenty of compilations combinations:</p>\n<pre><code>mvn dependency:purge-local-repository\nmvn eclipse:eclipse\n\nmvn clean\nmvn clean package -Pproduction\nmvn package -Pproduction\nmvn clean package -Pproduction -Dvaadin.force.production.build=true -DskipTests -Dmaven.javadoc.skip=true -Dmaven.test.skip\nmvn clean install -DskipTests -Dmaven.javadoc.skip=true -Pproduction -Dmaven.test.skip -DskipTests\n</code></pre>\n<h2>Is there a way to understand who is the culprit? I've turned on all possible logs,\nbut no useful errors pop out.\nThanks a lot, any help is appreciated.</h2>\n<p>I have the following configurations defined:</p>\n<p>application.properties :</p>\n<pre><code>server.port=9090\nlogging.level.root=INFO\nlogging.level.org.atmosphere = INFO\nspring.data.mongodb.uri=mongodb://localhost:27017/zzzzzz\nspring.data.mongodb.username=xxxx\nspring.data.mongodb.password=xxxxx\n#spring.data.mongodb.database=springBootMongoDB\nserver.tomcat.max-swallow-size=100MB\nserver.tomcat.max-http-post-size=100MB\nspring.servlet.multipart.enabled=true\nspring.servlet.multipart.fileSizeThreshold=100MB\nspring.servlet.multipart.max-file-size=100MB\nspring.servlet.multipart.max-request-size=100MB\nspring.main.lazy-initialization=true\nspring.mustache.check-template-location = false\nserver.servlet.session.persistent=false\nproduces=&quot;application/json&quot;\nvaadin.launch-browser=true\nvaadin.react.enable=false\nvaadin.allowed-packages=com.flowingcode\nvaadin.productionMode=true\nvaadin.frontend.hotdeploy=false\nvaadin.whitelisted-packages = com.vaadin,org.vaadin,dev.hilla\nvaadin.exclude-urls=/filetreez\nvaadin.devmode-caching = false\nspring.sql.init.mode = always\nspring.jpa.open-in-view=false\nupload.folder = &quot;/data/uploads/&quot;\nlogging.level.org.atmosphere = warn\nspring.mustache.check-template-location = false\n#vaadin.allowed-packages = com.vaadin,org.vaadin,dev.hilla,com.example.application\n#spring.jpa.defer-datasource-initialization = true\nspring.sql.init.mode = never\n</code></pre>\n<hr />\n<p>The pom file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;xxxx.xxxx&lt;/groupId&gt;\n    &lt;artifactId&gt;xxxxx&lt;/artifactId&gt;\n    &lt;name&gt;xxxxx&lt;/name&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;junit.version&gt;5.18.2&lt;/junit.version&gt;\n        &lt;vaadin.version&gt;24.7.3&lt;/vaadin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.4.5&lt;/version&gt;\n        &lt;relativePath /&gt;\n    &lt;/parent&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;Vaadin Directory&lt;/id&gt;\n            &lt;url&gt;https://maven.vaadin.com/vaadin-addons&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                &lt;artifactId&gt;vaadin-bom&lt;/artifactId&gt;\n                &lt;version&gt;${vaadin.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;my.data&lt;/groupId&gt;\n                &lt;artifactId&gt;data&lt;/artifactId&gt;\n                &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n            &lt;/dependency&gt;\n\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.owlapi&lt;/groupId&gt;\n            &lt;artifactId&gt;owlapi-api&lt;/artifactId&gt;\n            &lt;version&gt;5.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sourceforge.owlapi&lt;/groupId&gt;\n            &lt;artifactId&gt;owlapi-distribution&lt;/artifactId&gt;\n            &lt;version&gt;5.5.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n            &lt;artifactId&gt;vaadin-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n            &lt;artifactId&gt;vaadin-spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                    &lt;artifactId&gt;hilla&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.parttio&lt;/groupId&gt;\n            &lt;artifactId&gt;line-awesome&lt;/artifactId&gt;\n            &lt;version&gt;2.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;tomcat-embed-websocket&lt;/artifactId&gt;\n                    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.vaadin.klaudeta&lt;/groupId&gt;\n            &lt;artifactId&gt;grid-pagination&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.vaadin.crudui&lt;/groupId&gt;\n            &lt;artifactId&gt;crudui&lt;/artifactId&gt;\n            &lt;version&gt;7.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.faces&lt;/groupId&gt;\n            &lt;artifactId&gt;jsf-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.inject-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;33.4.8-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n            &lt;version&gt;1.13.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.vaadin.tatu&lt;/groupId&gt;\n            &lt;artifactId&gt;tree&lt;/artifactId&gt;\n            &lt;version&gt;3.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.xdev&lt;/groupId&gt;\n            &lt;artifactId&gt;vaadin-maps-leaflet-flow&lt;/artifactId&gt;\n            &lt;version&gt;4.6.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;defaultGoal&gt;spring-boot:run&lt;/defaultGoal&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;jvmArguments&gt;\n                        -Xdebug\n                        -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5493\n                        --add-opens=java.base/java.lang=ALL-UNNAMED\n\n                    &lt;/jvmArguments&gt;\n                    &lt;wait&gt;500&lt;/wait&gt;\n                    &lt;maxAttempts&gt;240&lt;/maxAttempts&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                &lt;artifactId&gt;vaadin-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${vaadin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;prepare-frontend&lt;/goal&gt;\n                            &lt;goal&gt;build-frontend&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;!-- Production mode is activated using -Pproduction --&gt;\n            &lt;id&gt;production&lt;/id&gt;\n            &lt;properties&gt;\n                &lt;activatedProperties&gt;prod&lt;/activatedProperties&gt;\n            &lt;/properties&gt;\n            &lt;dependencies&gt;\n                &lt;!-- Exclude development dependencies from production --&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                    &lt;artifactId&gt;vaadin&lt;/artifactId&gt;\n                    &lt;exclusions&gt;\n                        &lt;exclusion&gt;\n                            &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                            &lt;artifactId&gt;vaadin-dev&lt;/artifactId&gt;\n                        &lt;/exclusion&gt;\n                    &lt;/exclusions&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;com.vaadin&lt;/groupId&gt;\n                        &lt;artifactId&gt;vaadin-maven-plugin&lt;/artifactId&gt;\n                        &lt;version&gt;${vaadin.version}&lt;/version&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;prepare-frontend&lt;/goal&gt;\n                                    &lt;goal&gt;build-frontend&lt;/goal&gt;\n                                &lt;/goals&gt;\n                                &lt;phase&gt;compile&lt;/phase&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n\n        &lt;profile&gt;\n            &lt;id&gt;it&lt;/id&gt;\n            &lt;build&gt;\n                &lt;plugins&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;start-spring-boot&lt;/id&gt;\n                                &lt;phase&gt;pre-integration-test&lt;/phase&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;start&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                            &lt;execution&gt;\n                                &lt;id&gt;stop-spring-boot&lt;/id&gt;\n                                &lt;phase&gt;post-integration-test&lt;/phase&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;stop&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                    &lt;/plugin&gt;\n\n                    &lt;!-- Runs the integration tests (*IT) after the server is\n                    started --&gt;\n                    &lt;plugin&gt;\n                        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                        &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;\n                        &lt;executions&gt;\n                            &lt;execution&gt;\n                                &lt;goals&gt;\n                                    &lt;goal&gt;integration-test&lt;/goal&gt;\n                                    &lt;goal&gt;verify&lt;/goal&gt;\n                                &lt;/goals&gt;\n                            &lt;/execution&gt;\n                        &lt;/executions&gt;\n                        &lt;configuration&gt;\n                            &lt;trimStackTrace&gt;false&lt;/trimStackTrace&gt;\n                            &lt;enableAssertions&gt;true&lt;/enableAssertions&gt;\n                            &lt;redirectTestOutputToFile&gt;false&lt;/redirectTestOutputToFile&gt;\n                        &lt;/configuration&gt;\n                    &lt;/plugin&gt;\n                &lt;/plugins&gt;\n            &lt;/build&gt;\n        &lt;/profile&gt;\n\n    &lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n<hr />\n<p>The appication.java</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\n\nimport com.vaadin.flow.component.page.AppShellConfigurator;\nimport com.vaadin.flow.component.page.Push;\nimport com.vaadin.flow.server.LoadDependenciesOnStartup;\nimport com.vaadin.flow.spring.annotation.EnableVaadin;\nimport com.vaadin.flow.theme.Theme;\n\n@EnableVaadin\n\n@SpringBootApplication(exclude = { org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration.class,org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration.class})\n@Theme(value = &quot;myapp&quot;)\n//@LoadDependenciesOnStartup\n@Push(value = com.vaadin.flow.shared.communication.PushMode.MANUAL)//, transport = com.vaadin.shared.ui.ui.Transport.LONG_POLLING)\n@ComponentScan(basePackages = {&quot;my.app&quot;,&quot;my.app.views.maint&quot;,&quot;my.app.data&quot;,&quot;my.app.data.flow&quot;,&quot;my.app.data.repository&quot;}/*,excludeFilters={@ComponentScan.Filter(type= FilterType.ASSIGNABLE_TYPE, value=StaticApplicationLoader.class)}*/)\n\npublic class MyApp implements AppShellConfigurator    {//, CommandLineRunner  {\n    \n    private static final long serialVersionUID = 1L;\n    public static  StaticApplicationLoader sessionData;\n    public static void main(String[] args) {\n        SpringApplication.run(MyApp.class, args);\n    }\n    \n}\n</code></pre>\n<hr />\n<p>StaticApplicationLoader.java //to store user session</p>\n<pre><code>import java.util.concurrent.ConcurrentHashMap;\n\nimport jakarta.servlet.ServletContextListener;\nimport jakarta.servlet.annotation.WebListener;\n\n@WebListener\npublic class StaticApplicationLoader implements ServletContextListener{\n    public static ConcurrentHashMap&lt;String,UserSessionObject&gt; userSessions = new ConcurrentHashMap&lt;String,UserSessionObject&gt;();\n    \n}\n</code></pre>\n<hr />\n<p>ServletInitializer.java</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\nimport org.springframework.web.WebApplicationInitializer;\n\n@SuppressWarnings(&quot;unused&quot;)\npublic class ServletInitializer extends SpringBootServletInitializer  {\n\n      @Override\n      protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n              return application.sources(MyApp.class); // Replace DemoApplication with your main class\n      }\n      public static void main(String[] args) {\n        SpringApplication.run(MyApp.class, args);\n    }\n}\n</code></pre>\n<p>According to cfrick suggestions,\nI reshape the init class as follows:</p>\n<pre><code>@SpringBootApplication(exclude={org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration.class})\npublic class MyApp extends SpringBootServletInitializer implements AppShellConfigurator    {\n    public static  StaticApplicationLoader sessionData;\n    \n     @Override\n        protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n            return application.sources(ChangesApplication.class);\n        }\n    \n    public static void main(String[] args) {\n        SpringApplication.run(ChangesApplication.class, args);\n        sessionData = new StaticApplicationLoader();\n    }\n}\n</code></pre>\n<p>Thus I removed the SpringBootServletInitializer class. However this does not solve the problem.</p>\n",
    "tags" : [ "java", "tomcat", "vaadin" ],
    "owner" : {
      "account_id" : 1920754,
      "reputation" : 35,
      "user_id" : 1732337,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/dea8124fab692b131be7bbdcae888491?s=256&d=identicon&r=PG",
      "display_name" : "user1732337",
      "link" : "https://stackoverflow.com/users/1732337/user1732337"
    },
    "is_answered" : false,
    "view_count" : 82,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1746208834,
    "creation_date" : 1745959648,
    "link" : "https://stackoverflow.com/questions/79599184/tomcat-error-exception-sending-context-initialized-event-to-listener-instance",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140385409,
    "post_id" : 79599184,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79599184/edit\">edit</a> the question. Comments are not a good place for code. Also why are you not putting the <code>SpringBootServletInitializer</code> on the class with <code>main</code> and all the Springboot annotations?",
    "score" : 1,
    "owner" : {
      "account_id" : 3837378,
      "reputation" : 37323,
      "user_id" : 3181392,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/SIgPs.png?s=256",
      "display_name" : "cfrick",
      "link" : "https://stackoverflow.com/users/3181392/cfrick"
    },
    "creation_date" : 1746041518,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140383099,
    "post_id" : 79599184,
    "body" : "Oh, yes, thank you for pointing it out. I&#39;ve put in another main class in the second class just to check if it helps, but nothing has changed. Thus, I removed it, and the error persists. ``` lang-java @SuppressWarnings(&quot;unused&quot;) public class ServletInitializer extends SpringBootServletInitializer  {        @Override       protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {               return application.sources(MyApp.class);        } } ```",
    "score" : 0,
    "owner" : {
      "account_id" : 1920754,
      "reputation" : 35,
      "user_id" : 1732337,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/dea8124fab692b131be7bbdcae888491?s=256&d=identicon&r=PG",
      "display_name" : "user1732337",
      "link" : "https://stackoverflow.com/users/1732337/user1732337"
    },
    "creation_date" : 1746000076,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140382793,
    "post_id" : 79599184,
    "body" : "With a fat jar that just would be confusing: you have two classes with <code>main</code> and the first one is <i>not</i> <code>SpringBootServletInitializer</code>, but has all the other hallmarks of get picked up by Spring-Boot. Have you tried combining the two classes?",
    "score" : 0,
    "owner" : {
      "account_id" : 3837378,
      "reputation" : 37323,
      "user_id" : 3181392,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/SIgPs.png?s=256",
      "display_name" : "cfrick",
      "link" : "https://stackoverflow.com/users/3181392/cfrick"
    },
    "creation_date" : 1745994739,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}