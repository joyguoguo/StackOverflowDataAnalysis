{
  "question" : {
    "question_id" : 79765377,
    "title" : "How do I implement multi-inheritance DUPLICATE method in Java?",
    "body" : "<p>I have an 8-level hierarchy of classes in Java. This is useful so each abstract class implements methods that are common in the whole sub-branch of the tree. That's working fine.</p>\n<p>However, after going back and forth with some design I realized some behavior is applied very discretionary to some leaf nodes only. There's no clear rule, that could follow the existing hierachy. I have identified these leaf classes and I wanted to understand what's the best way of implementing those, since the logic is EXACTLY the same one every time.</p>\n<p>For example, in the simplified example below only the green leaf classes should implement the method.</p>\n<p><img src=\"https://i.sstatic.net/3GYOMXEl.png\" alt=\"example tree\" /></p>\n<p>If I create a separate interface with the abstract method declaration I could mark all those leaf classes to implement the method.</p>\n<p>How can I place the logic in the new interface somehow? I don't want to copy the same code 80 times, in each affected tree class.</p>\n",
    "tags" : [ "java", "design-patterns", "multiple-inheritance" ],
    "owner" : {
      "account_id" : 13414743,
      "reputation" : 1083,
      "user_id" : 9679725,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c53370b5f7e9d0f7a88897ac97c75f5d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Joe DiNottra",
      "link" : "https://stackoverflow.com/users/9679725/joe-dinottra"
    },
    "is_answered" : true,
    "view_count" : 75,
    "answer_count" : 1,
    "score" : -3,
    "last_activity_date" : 1757953217,
    "creation_date" : 1757952659,
    "link" : "https://stackoverflow.com/questions/79765377/how-do-i-implement-multi-inheritance-duplicate-method-in-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79765385,
    "question_id" : 79765377,
    "body" : "<p>interfaces and default methods.</p>\n<p>Put into an interface both the implementation of your common code as well as declaring every 'aspect' that your common code needs. For example:</p>\n<pre><code>/**\n * Implementations represent inventory stuff that can automatically order more inventory if it is nearly running out.\n */\npublic interface AutoReorder {\n  int getStock();\n  String getSku();\n\n  default void reorderIfNeeded() {\n    int req = InventorySystem.getMinimumStockLevel(getSku());\n    int delta = req - getStock();\n    if (delta &gt; 0) {\n      InventorySystem.reorder(getSku(), delta + 5);\n    }\n  }\n}\n</code></pre>\n<p>Types that add <code>implements AutoReorder</code> <em>can</em> provide their own implementation of <code>reorderIfNeeded</code>  but they don't have to. If they don't, they get the above implementation. Those type <em>do</em> have to provide implementations for <code>getSku()</code> and <code>getStock()</code>.</p>\n<p>The one thing you can't have is state. Interfaces cannot have fields or constructors. If that's what you need, you must <code>extends</code> it. If you can't do that because you're already extending something else, this won't work. You then:</p>\n<ul>\n<li><p>Don't have a <code>default</code> at all, instead, have one package-private class with the impl and have each node-type that wants this feature write its own wrapper oneliner that invokes the package private helper. There is obviously no reason to actually copy/paste code, ever, of course.</p>\n</li>\n<li><p>Rewrite so you don't need the state / the implementing type manages it.</p>\n</li>\n<li><p>Have a type that encompasses the system you are modelling. For example, a <code>class InventorySystem</code>, and that's where the common-to-some-nodes code goes, where node types are <code>ToiletPaper</code>, <code>DishwashingLiquid</code>, etc.</p>\n</li>\n</ul>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1757953217,
    "last_activity_date" : 1757953217,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140737607,
    "post_id" : 79765377,
    "body" : "&quot;<i>I have an 8-level hierarchy of classes in Java.</i>&quot; -- notwithstanding that you claim that is useful, this is an enormous red flag for me.  In particular, if the point is inheritance of implementation (as you describe) then there&#39;s a good chance that you could achieve many of your shared-implementation goals by strategic use of composition in place of inheritance.  That could well net you a significant reduction in the total number of classes, and possibly even get you DRYer code than you already have.",
    "score" : 4,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1757956077,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79765385" : [ {
      "comment_id" : 140737561,
      "post_id" : 79765385,
      "body" : "I don&#39;t need state, just the method. Let me check a bit more, but seems like this could work for me.",
      "score" : 0,
      "owner" : {
        "account_id" : 13414743,
        "reputation" : 1083,
        "user_id" : 9679725,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/c53370b5f7e9d0f7a88897ac97c75f5d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Joe DiNottra",
        "link" : "https://stackoverflow.com/users/9679725/joe-dinottra"
      },
      "creation_date" : 1757955051,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}