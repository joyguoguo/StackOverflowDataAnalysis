{
  "question" : {
    "question_id" : 79701175,
    "title" : "SpringBootTest with useJUnitPlatform not initialising TestDispatcherServlet",
    "body" : "<p>I am running junit test case with SpringBootTest with @AutoConfigureMockMvc. When I run a test case using IntelliJ IDEA the test is passing but failing from the command line.</p>\n<p>The build.gradle is</p>\n<pre><code>tasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>If I run this task directly from IntelliJ IDEA the test passes. The difference in the output I found was</p>\n<p>Running from command line</p>\n<pre><code>[Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [MyTest]: MyTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n[Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration MySpringApp for test class MyTest\n</code></pre>\n<p>From IDEA</p>\n<pre><code>org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [MyTest]: MyTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n[Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration MySpringApp for test class MyTest\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n\n :: Spring Boot ::                (v3.3.6)\n\n[Test worker] INFO  MyTest - Starting MyTest using Java 17.0.13 with PID 92499 (started by --)\n[Test worker] INFO  MyTest - No active profile set, falling back to 1 default profile: &quot;default&quot;\n[Test worker] INFO  org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver - Exposing 0 endpoints beneath base path '/actuator'\n[Test worker] INFO  org.springframework.boot.test.mock.web.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''\n[Test worker] INFO  org.springframework.test.web.servlet.TestDispatcherServlet - Initializing Servlet ''\n[Test worker] INFO  org.springframework.test.web.servlet.TestDispatcherServlet - Completed initialization in 1 ms\n</code></pre>\n<p>So, the difference I see is in the <code>TestDispatcherServlet</code> initialization. I am trying to figure out why this difference is happening.</p>\n<p>The <code>buildMode</code> in gradle is set to <code>local</code>.</p>\n<p>Appreciate any pointers</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "unit-testing", "gradle" ],
    "owner" : {
      "account_id" : 4277335,
      "reputation" : 674,
      "user_id" : 3497657,
      "user_type" : "registered",
      "accept_rate" : 30,
      "profile_image" : "https://i.sstatic.net/b68VA.png?s=256",
      "display_name" : "Subhomoy Sikdar",
      "link" : "https://stackoverflow.com/users/3497657/subhomoy-sikdar"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752513414,
    "creation_date" : 1752512567,
    "link" : "https://stackoverflow.com/questions/79701175/springboottest-with-usejunitplatform-not-initialising-testdispatcherservlet",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79701191,
    "question_id" : 79701175,
    "body" : "<p>Just scrolling past and skim read this im not 100% sure but from first glance sounds like classpath differences, i use intellij too and it kinda auto figures out ur structure fixing references and declarations to ur imports a ton of the time</p>\n<p>so check myspringapp</p>\n<p>If your test is in:</p>\n<pre><code>swift\n</code></pre>\n<p>CopyEdit</p>\n<p>src<code>/test/java/com/example/test/MyTest.java </code></p>\n<p>Make sure <code>MySpringApp.java</code> is in:</p>\n<pre><code>css\n</code></pre>\n<p>CopyEdit</p>\n<p>src<code>/main/java/com/example/MySpringApp.java</code></p>\n<p>or Check Gradle test setup and environment differences</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 42895712,
      "reputation" : 1,
      "user_id" : 30975186,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/21077a8c055bc734b6c09f65abe9c7d2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "John Matukutire",
      "link" : "https://stackoverflow.com/users/30975186/john-matukutire"
    },
    "creation_date" : 1752513414,
    "last_activity_date" : 1752513414,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79701191" : [ {
      "comment_id" : 140592099,
      "post_id" : 79701191,
      "body" : "Please, be aware that <a href=\"https://meta.stackoverflow.com/questions/421831/policy-generative-ai-e-g-chatgpt-is-banned\">generative AI is banned</a>.",
      "score" : 0,
      "owner" : {
        "account_id" : 26384258,
        "reputation" : 15165,
        "user_id" : 20037042,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/jmXd0.png?s=256",
        "display_name" : "chrslg",
        "link" : "https://stackoverflow.com/users/20037042/chrslg"
      },
      "creation_date" : 1752609170,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140592051,
      "post_id" : 79701191,
      "body" : "Sure, let refine my skim made ai example of a classpath to a literal one because you need it to be readable",
      "score" : 0,
      "owner" : {
        "account_id" : 42895712,
        "reputation" : 1,
        "user_id" : 30975186,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/21077a8c055bc734b6c09f65abe9c7d2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "John Matukutire",
        "link" : "https://stackoverflow.com/users/30975186/john-matukutire"
      },
      "creation_date" : 1752607870,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140588821,
      "post_id" : 79701191,
      "body" : "Please edit your answer to make it more readable. I am pretty sure the &quot;CopyEdit&quot; are buttons of whereever you copy&amp;paste this from, and are not supposed to be included in the answer.",
      "score" : 0,
      "owner" : {
        "account_id" : 26384258,
        "reputation" : 15165,
        "user_id" : 20037042,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/jmXd0.png?s=256",
        "display_name" : "chrslg",
        "link" : "https://stackoverflow.com/users/20037042/chrslg"
      },
      "creation_date" : 1752514075,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}