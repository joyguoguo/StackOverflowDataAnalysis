{
  "question" : {
    "question_id" : 79797847,
    "title" : "How to properly re-throw an exception cause without causing SonarQube errors in Java?",
    "body" : "<p>I'm working on a Java method that handles multiple exceptions, and in some cases, I want to re-throw the original exception stored as the cause of an <code>ExecutionException</code>. Specifically, I have a piece of code like this:</p>\n<pre><code>public void myMethod() throws CustomException {\n\n    try {\n        // some parallel processing code\n    } catch (ExecutionException e) {\n        if (e.getCause() instanceof CustomException customException) {\n            throw customException; // I want to re-throw this\n        }\n        // other exception handling\n    }\n}\n</code></pre>\n<p>And my CustomException class looks like this:</p>\n<pre><code>public class CustomException extends RuntimeException {\n\n    public CustomException(String message) {\n        super(message);\n    }\n\n}\n</code></pre>\n<p>The issue is that my method declares throws <code>CustomException</code>, but when I re-throw <code>customException</code> inside the catch block, SonarQube reports an error:</p>\n<blockquote>\n<p>Method myMethod() throws alternative exception from catch block without history.</p>\n</blockquote>\n<p>How can I re-throw the original cause (<code>CustomException</code>) directly from the catch block without triggering this SonarQube warning?</p>\n<p>Is there a best practice to do this while preserving the exception chain and satisfying static analysis rules?</p>\n",
    "tags" : [ "java", "sonarqube" ],
    "owner" : {
      "account_id" : 3326489,
      "reputation" : 490,
      "user_id" : 2796442,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/0d99334261e0374564e5e0310ed461e3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Computered",
      "link" : "https://stackoverflow.com/users/2796442/computered"
    },
    "is_answered" : true,
    "view_count" : 111,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1761338417,
    "creation_date" : 1761225729,
    "link" : "https://stackoverflow.com/questions/79797847/how-to-properly-re-throw-an-exception-cause-without-causing-sonarqube-errors-in",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79798824,
    "question_id" : 79797847,
    "body" : "<p>I am inclined to agree with Rob Spoor:  SonarQube is not a source of expertise, and I have seen it make many mistakes over the years.  If you can disable that finding, you should.</p>\n<p>However, if you don’t want to do that, you can preserve the “history” by creating a new CustomException.  You will need some additional constructors:</p>\n<pre><code>public class CustomException extends RuntimeException {\n\n    public CustomException(String message) {\n        super(message);\n    }\n\n    public CustomException(Throwable cause) {\n        super(cause);\n    }\n\n    public CustomException(String message,\n                           Throwable cause) {\n        super(message, cause);\n    }\n\n}\n</code></pre>\n<p>(I always write those constructors for every exception subclass I write.)</p>\n<p>Then, in your catch block, you can do this:</p>\n<pre><code>public void myMethod() throws CustomException {\n\n    try {\n        // some parallel processing code\n    } catch (ExecutionException e) {\n        if (e.getCause() instanceof CustomException) {\n            throw new CustomException(e.toString(), e);\n        }\n        // other exception handling\n    }\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1761314043,
    "last_activity_date" : 1761338417,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140813425,
    "post_id" : 79797847,
    "body" : "@David Conrad I know. I put in this example because It is a suggestion of IA that didn&#39;t work.",
    "score" : 1,
    "owner" : {
      "account_id" : 3326489,
      "reputation" : 490,
      "user_id" : 2796442,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/0d99334261e0374564e5e0310ed461e3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Computered",
      "link" : "https://stackoverflow.com/users/2796442/computered"
    },
    "creation_date" : 1761235864,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813288,
    "post_id" : 79797847,
    "body" : "Note: if <code>CustomException</code> is a <code>RuntimeException</code> there&#39;s no need to have a <code>throws</code> declaration on the method.",
    "score" : 3,
    "owner" : {
      "account_id" : 318670,
      "reputation" : 16477,
      "user_id" : 636009,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/IIQJV.jpg?s=256",
      "display_name" : "David Conrad",
      "link" : "https://stackoverflow.com/users/636009/david-conrad"
    },
    "creation_date" : 1761232209,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813172,
    "post_id" : 79797847,
    "body" : "<code>throw new XxxException(e.getCause().getMessage(), e.getCause());</code> with at least the cause should do it too.",
    "score" : 1,
    "owner" : {
      "account_id" : 960307,
      "reputation" : 110397,
      "user_id" : 984823,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Z2KYN.jpg?s=256",
      "display_name" : "Joop Eggen",
      "link" : "https://stackoverflow.com/users/984823/joop-eggen"
    },
    "creation_date" : 1761228936,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813156,
    "post_id" : 79797847,
    "body" : "@Computered in this case I&#39;d just tell SonarQube to shut up about this &quot;violation&quot;.",
    "score" : 4,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1761228606,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813154,
    "post_id" : 79797847,
    "body" : "@S&#246;ren some exceptions are used as wrappers around actual exceptions. <code>UncheckedIOException</code> is such a class - it&#39;s only purpose is to wrap an <code>IOException</code>, it doesn&#39;t add any information of its own. The same goes for <code>ExecutionException</code>. Executors, Futures etc. can run code asynchronously. That code can often throw any type of exception. In stead of declaring to throw <code>Exception</code> or <code>Throwable</code>, such methods declare to throw <code>ExecutionException</code> that functions as a wrapper around the exception thrown from asynchronous code. Unwrapping it is quite normal.",
    "score" : 1,
    "owner" : {
      "account_id" : 1211967,
      "reputation" : 9964,
      "user_id" : 1180351,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/pKB8y.png?s=256",
      "display_name" : "Rob Spoor",
      "link" : "https://stackoverflow.com/users/1180351/rob-spoor"
    },
    "creation_date" : 1761228584,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813106,
    "post_id" : 79797847,
    "body" : "The reason I want to re-throw the original exception is that other parts of the application, like specific handlers or higher-level catch blocks, are designed to process that particular exception type directly, and I prefer to propagate the original cause to ensure proper handling without losing context.",
    "score" : 1,
    "owner" : {
      "account_id" : 3326489,
      "reputation" : 490,
      "user_id" : 2796442,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/0d99334261e0374564e5e0310ed461e3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Computered",
      "link" : "https://stackoverflow.com/users/2796442/computered"
    },
    "creation_date" : 1761227669,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140813081,
    "post_id" : 79797847,
    "body" : "But you aren&#39;t preserving the exception chain! You&#39;re throwing away the ExecutionException! Why do you want to do that?",
    "score" : 2,
    "owner" : {
      "account_id" : 1888781,
      "reputation" : 2498,
      "user_id" : 1707427,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4d1a2608ee35e2df7d2400a02e62bb20?s=256&d=identicon&r=PG",
      "display_name" : "S&#246;ren",
      "link" : "https://stackoverflow.com/users/1707427/s%c3%b6ren"
    },
    "creation_date" : 1761227097,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79798824" : [ {
      "comment_id" : 140815997,
      "post_id" : 79798824,
      "body" : "btw. <code>Throwable</code>, the grand-parent of all exceptions, has a public <code>initCause(Throwable)</code> method (if, for example, you don&#39;t want [or can&#39;t have] the additional constructors)",
      "score" : 1,
      "owner" : {
        "account_id" : 31180,
        "reputation" : 29752,
        "user_id" : 85421,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
        "display_name" : "user85421",
        "link" : "https://stackoverflow.com/users/85421/user85421"
      },
      "creation_date" : 1761338904,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}