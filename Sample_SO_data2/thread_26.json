{
  "question" : {
    "question_id" : 79844969,
    "title" : "OpenAPI Generator Maven Plugin: $ref target pointing to schema instead of Response object - SpecValidationException",
    "body" : "<p>Problem</p>\n<p>I'm using the OpenAPI Generator Maven Plugin (v7.3.0) to generate Java client code from a remote OpenAPI specification. The build fails with validation errors indicating that response $ref references are pointing to schema objects instead of Response objects.</p>\n<p>Error Message</p>\n<pre><code>[WARNING] There were issues with the specification. The option can be disabled via validateSpec\nError count: 2, Warning count: 4\n\nErrors:\n  - paths.'/file/{pType}/{pCode}/{cCode}'(get).responses.200.$ref \n    target #/components/schemas/fileInfo is not of expected type Response\n    \n  - paths.'/segment/{pType}/{pCode}/{sCode}'(get).responses.200.$ref \n    target #/components/schemas/sResponse is not of expected type Response\n</code></pre>\n<p>Current Configuration</p>\n<p>pom.xml</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;7.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;File API Generator&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n                &lt;inputSpec&gt;https://xxx.yyy.com/v3/api-docs&lt;/inputSpec&gt;\n                &lt;output&gt;${project.parent-pom-dir}/contracts/&lt;/output&gt;\n                &lt;generatorName&gt;java&lt;/generatorName&gt;\n                &lt;apiPackage&gt;com.xxx.yyy.ing.client.api&lt;/apiPackage&gt;\n                &lt;modelPackage&gt;com.xxx.yyy.ing.client.model&lt;/modelPackage&gt;\n                &lt;!-- additional config omitted for brevity --&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>OpenAPI Spec Structure (Simplified)</p>\n<p>The remote OpenAPI spec returns responses like this:</p>\n<pre><code>paths:\n  /file/{pType}/{pCode}/{cCode}:\n    get:\n      responses:\n        200:\n          $ref: '#/components/schemas/fileInfo'  # ❌ Direct reference to schema\n</code></pre>\n<p>Environment</p>\n<ul>\n<li><p>Spring Boot: 2.7.8</p>\n</li>\n<li><p>Java: 17</p>\n</li>\n<li><p>Maven: 3.x</p>\n</li>\n<li><p>OpenAPI Generator Plugin: 7.3.0</p>\n</li>\n<li><p>OpenAPI Spec Source: Remote REST endpoint (not under my control)</p>\n</li>\n</ul>\n<p>Questions</p>\n<ol>\n<li><p>Is this a bug in the remote OpenAPI specification, or is there a configuration setting in the plugin to handle this pattern?</p>\n</li>\n<li><p>Should I download the spec locally and fix it manually, or is there a way to transform/fix the spec programmatically during the Maven build?</p>\n</li>\n<li><p>Does downgrading to plugin version 5.x make this validation less strict? (I need javax.* imports, not jakarta.* for Spring Boot 2.7.8 compatibility)</p>\n</li>\n<li><p>What's the correct OpenAPI 3.0 structure for response definitions? Should it be:</p>\n</li>\n</ol>\n<pre><code># Option A: Direct schema reference (current - fails validation)\nresponses:\n  200:\n    $ref: '#/components/schemas/fileInfo'\n\n# Option B: Wrapped in content/schema (standard?)\nresponses:\n  200:\n    description: Successful response\n    content:\n      application/json:\n        schema:\n          $ref: '#/components/schemas/fileInfo'\n</code></pre>\n<p>What I've Tried</p>\n<p>✅ Set &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt; - validation errors still appear</p>\n<p>✅ Checked OpenAPI 3.0 specification - confirms responses should use content.schema.$ref</p>\n<p>❌ Cannot modify the remote API (it's a third-party service)</p>\n<p>Expected Behavior</p>\n<p>The plugin should either:</p>\n<ul>\n<li><p>Generate code successfully from the remote spec, OR</p>\n</li>\n<li><p>Provide a way to auto-fix/transform the spec during generation</p>\n</li>\n</ul>\n<p>Additional Context</p>\n<p><em><strong>The same remote endpoint works fine with Swagger UI and Postman, suggesting the spec is functional despite not being strictly valid per OpenAPI 3.0 standards.</strong></em></p>\n",
    "tags" : [ "java", "openapi", "spring-boot-maven-plugin", "openapi-overlays" ],
    "owner" : {
      "account_id" : 9134977,
      "reputation" : 138,
      "user_id" : 6794989,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0ddcf058ed2e19117db9eda010587c77?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ramji",
      "link" : "https://stackoverflow.com/users/6794989/ramji"
    },
    "is_answered" : true,
    "view_count" : 30,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1765574939,
    "creation_date" : 1765550062,
    "link" : "https://stackoverflow.com/questions/79844969/openapi-generator-maven-plugin-ref-target-pointing-to-schema-instead-of-respon",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79845103,
    "question_id" : 79844969,
    "body" : "<p>The $ref inside the response should point to a Response Object. Otherwise, it's invalid. The swagger viewer is notoriously relaxed on the strict specification, particularly when it encounters $ref objects. It allows far more than it should if you were going strictly by the spec. Swagger is a vendor of the OpenAPI Spec, not the authority.</p>\n<p>could be a use case for <a href=\"https://spec.openapis.org/overlay/latest\" rel=\"nofollow noreferrer\">OpenAPI Overlays</a> to fix up the broken definition</p>\n<p>something like this should target the response of the endpoint you want, add the <code>Response Object</code> in the correct form and then remove the invalid $ref.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>overlays: 1.0.0\ninfo:\n  title: fix up invalid definition\n  version: 1.0.0\nextends: &lt;link to openapi description&gt;\nactions:\n- target: $.paths[&quot;/file/{pType}/{pCode}/{cCode}&quot;].get.responses.200\n  update:\n    description: OK\n    content:\n      'application/json':\n        schema:\n          &quot;$ref&quot;: &quot;#/components/schemas/fileInfo&quot;\n- target: $.paths[&quot;/file/{pType}/{pCode}/{cCode}&quot;].get.responses.200.$ref\n  remove: true\n\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 11698906,
      "reputation" : 3650,
      "user_id" : 8564731,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-YS7UCJcQ0-Q/AAAAAAAAAAI/AAAAAAAAACg/55XwHWieOlI/s256-rj/photo.jpg",
      "display_name" : "Jeremy Fiel",
      "link" : "https://stackoverflow.com/users/8564731/jeremy-fiel"
    },
    "creation_date" : 1765560308,
    "last_activity_date" : 1765574939,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}