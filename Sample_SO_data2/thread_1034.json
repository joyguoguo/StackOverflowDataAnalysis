{
  "question" : {
    "question_id" : 79753546,
    "title" : "onBindViewHolder in Android recylerview is not called when update is triggered via setOnCompletionListener",
    "body" : "<p>I have been having a problem since quite some time and I have tried many things to understand and get rid of it without any success. Actually I am developing a music app with different songs that can be clicked at in a recylerview. In the fragment class with the recylerview <code>FR_RV_Songs</code> I have the <code>onItemClick</code> method that plays a song when you click on it:</p>\n<pre><code> public void onItemClick(int position) {\n        RV_Item_Song clickedSong = displayedSongList.get(position);\n\n       \n        // new song selected\n        currentlyPlayingSong = clickedSong.getTitleInfo();\n        //Extract and format the song title and interpret from the RV item\n        String interpret = clickedSong.getInterpretInfo();\n        int index = Math.min(interpret.indexOf(','), interpret.indexOf(';'));\n        if (index == -1) {\n            index = Math.max(interpret.indexOf(','), interpret.indexOf(';'));\n        }\n        currentlyPlayingFirstInterpret = (index == -1) ? interpret : interpret.substring(0, index);\n\n\n      \n        bitmapOfTheCurrentSong = extractAlbumArt(clickedSong.getFilePath());\n\n\n        Map&lt;String, String&gt; song = MainActivity.sqLite_DB\n                .getSongByTitleAndInterpret(currentlyPlayingSong, currentlyPlayingFirstInterpret);\n        String fileName = song.get(&quot;file_name&quot;);\n\n\n        String filePath = Environment.getExternalStorageDirectory().getPath() + &quot;/Music/&quot; + fileName;\n        File file = new File(filePath);\n        if (!file.exists()) {\n            Toast.makeText(getContext(), &quot;File not found&quot;, Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        try {\n            Log.e(&quot;NextSongTag&quot;, &quot;FR_RV_Songs - onItemClick - try new song - currentlyPlayingSong: &quot; + currentlyPlayingSong);\n            playSong(filePath);\n            setCompletionListener();\n            songsAdapter.setCurrentlyPlayingPosition(position);\n        } catch (IOException e) {\n            e.printStackTrace();\n            Toast.makeText(getContext(), &quot;Error playing file&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>In this method I also set the <code>setCompletionListener();</code> to the item (this is the important part because the rest works fine). This method looks like this:</p>\n<pre><code> private void setCompletionListener() {\n        Log.d(&quot;NextSongTag&quot;, &quot;FR_RV_Song - setCompletionListener - method call &quot; );\n        mediaPlayer.setOnCompletionListener(mp -&gt; {\n            Log.d(&quot;NextSongTag&quot;, &quot;FR_RV_Song - setCompletionListener - setOnCompletionListener called &quot; );\n\n            songIsPlaying = false;\n\n            if (MainActivity.isRepeatModeActive) {\n                mp.seekTo(0);\n                mp.start();\n                songIsPlaying = true;\n                return;\n            }\n\n            // auto-advance\n            int nextPos = findNextSongPosition();\n            if (nextPos != -1) {\n                RV_Item_Song clickedSong = displayedSongList.get(songsAdapter.getCurrentlyPlayingPosition());\n                Log.d(&quot;NextSongTag&quot;, &quot;FR_RV_Song - setCompletionListener - clickedSong: &quot;+ clickedSong.getTitleInfo() );\n                clickedSong.setTitleInfo(&quot;Test2&quot;);\n                Log.d(&quot;NextSongTag&quot;, &quot;FR_RV_Song - setCompletionListener - clickedSong: &quot;+ clickedSong.getTitleInfo() );\n                Log.d(&quot;NextSongTag&quot;, &quot;FR_RV_Song - setCompletionListener - nextPosition called: &quot; + nextPos );\n                songsAdapter.notifyItemChanged(nextPos);\n                songsAdapter.notifyDataSetChanged();\n                onItemClick(nextPos);\n            }\n        });\n    }\n</code></pre>\n<p>In the adapter class of the recylerview <code>RV_Adapter_Songs</code> I have the method to update the currently playing position:</p>\n<pre><code>public void setCurrentlyPlayingPosition(int position) {\n    // Notify the adapter that the data has changed\n    int oldPosition = currentlyPlayingPosition;\n    currentlyPlayingPosition = position;\n    if (oldPosition != -1) notifyItemChanged(oldPosition, null);\n    if (currentlyPlayingPosition != -1) notifyItemChanged(currentlyPlayingPosition, null);\n    notifyDataSetChanged();\n    Log.d(&quot;NextSongTag&quot;, &quot;RV_Adapter setCurrentPlayingPosition - getItemCount(): &quot; + getItemCount());\n    Log.d(&quot;NextSongTag&quot;, &quot;RV_Adapter setCurrentPlayingPosition - oldPosition: &quot; + oldPosition);\n    Log.d(&quot;NextSongTag&quot;, &quot;RV_Adapter setCurrentPlayingPosition - currentlyPlayingPosition: &quot; + currentlyPlayingPosition);\n}\n</code></pre>\n<p>Actually everything works fine: When a song is clicked, it is played. When the song is finished, the <code>mediaPlayer.setOnCompletionListener(mp -&gt; {</code> method is called and it correctly goes to the next position in the songList and the next song is being played. HOWEVER: The problem is that the recylerview does no update meaning it is not calling the <code>onBindViewHolder</code> method, altough the <code>notifyItemChanged(currentlyPlayingPosition, null); notifyDataSetChanged();</code> are called inside the adapters <code>setCurrentlyPlayingPosition</code> method. The <code>onBindViewHolder</code> is responsible to display the currently played song with a different color and an additional &quot;Play&quot; symbol. But this is not happening. When the next song is played, the recylerview still highlights the old song. Just when I switch the fragment and back again, it highlights the correct next song, that was triggered by the <code> mediaPlayer.setOnCompletionListener(mp -&gt; {</code> method.</p>\n<p>Here is the output from the logcat after the <code>mediaPlayer.setOnCompletionListener(mp -&gt; {</code> is called:</p>\n<pre><code>2025-09-02 14:38:22.607 17232-17232 NextSongTag             com.example.mp3playlist              D  FR_RV_Song - setCompletionListener - setOnCompletionListener called \n2025-09-02 14:38:22.617 17232-17232 NextSongTag             com.example.mp3playlist              D  RV_Adapter getCurrentPlayingPosition - getCurrentlyPlayingPosition: 9\n2025-09-02 14:38:22.617 17232-17232 NextSongTag             com.example.mp3playlist              D  FR_RV_Song - setCompletionListener - clickedSong: 21 Questions\n2025-09-02 14:38:22.617 17232-17232 NextSongTag             com.example.mp3playlist              D  FR_RV_Song - setCompletionListener - clickedSong: Test2\n2025-09-02 14:38:22.617 17232-17232 NextSongTag             com.example.mp3playlist              D  FR_RV_Song - setCompletionListener - nextPosition called: 10\n2025-09-02 14:38:22.672 17232-17232 NextSongTag             com.example.mp3playlist              E  FR_RV_Songs - onItemClick - try new song - currentlyPlayingSong: Candy Shop\n2025-09-02 14:38:22.741 17232-17232 NextSongTag             com.example.mp3playlist              D  Now playing: /storage/emulated/0/Music/50 Cent - Candy Shop.mp3\n2025-09-02 14:38:22.742 17232-17232 NextSongTag             com.example.mp3playlist              D  FR_RV_Song - setCompletionListener - method call \n2025-09-02 14:38:22.742 17232-17232 NextSongTag             com.example.mp3playlist              D  RV_Adapter setCurrentPlayingPosition - getItemCount(): 1748\n2025-09-02 14:38:22.742 17232-17232 NextSongTag             com.example.mp3playlist              D  RV_Adapter setCurrentPlayingPosition - oldPosition: 9\n2025-09-02 14:38:22.742 17232-17232 NextSongTag             com.example.mp3playlist              D  RV_Adapter setCurrentPlayingPosition - currentlyPlayingPosition: 10\n</code></pre>\n<p>This shows that the <code>onBindViewHolder</code> method is not called after the onCompleteListener fires. Other than that the <code>onBindViewHolder</code> is always correctly called and is working properly (e.g. when clicking a song, creating the fagment, scrolling in the recylerview).</p>\n<p>Why is the <code>onBindViewHolder</code> method not called when the update is triggered via setOnCompletionListener and how can I force the adapter to call this method and correctly highlight the currently played song when the OnCompletionListener fires and not just when I navigate back again to this fragment.</p>\n",
    "tags" : [ "java", "android", "android-recyclerview", "listener", "android-mediaplayer" ],
    "owner" : {
      "account_id" : 13060317,
      "reputation" : 717,
      "user_id" : 9437740,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/6yvEH.png?s=256",
      "display_name" : "VanessaF",
      "link" : "https://stackoverflow.com/users/9437740/vanessaf"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1756903038,
    "creation_date" : 1756818963,
    "link" : "https://stackoverflow.com/questions/79753546/onbindviewholder-in-android-recylerview-is-not-called-when-update-is-triggered-v",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79753568,
    "question_id" : 79753546,
    "body" : "<p>RecyclerViews know nothing about complete listeners.  They only rerender when the adapter changes-  when someone calls notifyDataSetChanged (or one of the other notify functions on it).  This tells the recycler view that data has changed and a redraw of the items is necessary.  Without that, it will never force a redraw.  You're not doing that in your completion listener, you're only doing that once in onItemClicked().</p>\n<p>As an aside-  I see the code:</p>\n<pre><code>        if (MainActivity.isRepeatModeActive) {\n            mp.seekTo(0);\n            mp.start();\n            songIsPlaying = true;\n            return;\n        }\n</code></pre>\n<p>in your example.  This is considered VERY problematic.  Your main activity should NEVER have static member variables.  Activities are not singletons, and trying to treat them as such can cause a variety of bugs.  Additionally, no class should ever have a reference to your Activity.  If you need global state, you pass it from your activity to other classes, you never allow classes to directly access your activity.  This is unrelated to your current problem, but is something you should know and fix.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1790714,
      "reputation" : 94818,
      "user_id" : 1631193,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/ac9dfee58394495fa69f12f58a928be3?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Gabe Sechan",
      "link" : "https://stackoverflow.com/users/1631193/gabe-sechan"
    },
    "creation_date" : 1756820753,
    "last_activity_date" : 1756820753,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79753568" : [ {
      "comment_id" : 140711665,
      "post_id" : 79753568,
      "body" : "Thanks Gabe for your answer. In wrote that I have already tried many things and the problem still persists (without specifying all attemps, as there are just too many; I have been dealing with this issue for more than 10 hours by now). Of course I also tried to call <code>songsAdapter.notifyDataSetChanged();</code> and <code>songsAdapter.notifyItemChanged(nextPos);</code> on many many occassions. Also in the ` setCompletionListener` method. But the result is always the same. The <code>onBindViewHolder</code> is not called and the wrong items is selected after a song is completed (unless you change the fragment).",
      "score" : 0,
      "owner" : {
        "account_id" : 13060317,
        "reputation" : 717,
        "user_id" : 9437740,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/6yvEH.png?s=256",
        "display_name" : "VanessaF",
        "link" : "https://stackoverflow.com/users/9437740/vanessaf"
      },
      "creation_date" : 1756900563,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}