{
  "question" : {
    "question_id" : 79725296,
    "title" : "Vaadin 24 compile issue with CustomField java generics",
    "body" : "<p>I'm upgrading a Vaadin 23.2 app to Vaadin 24.8. I have a compilation error on one of my components. It's a simple custom field with this signature:</p>\n<pre><code>public class MyField extends CustomField&lt;String&gt; {\n</code></pre>\n<p>IntelliJ IDEA doesn't show any error, but Gradle compilation (JDK17) throws:</p>\n<pre><code>error: HasValue cannot be inherited with different arguments: &lt;?,java.lang.String&gt; and &lt;com.vaadin.flow.component.AbstractField.ComponentValueChangeEvent&lt;?,java.lang.String&gt;,java.lang.String&gt;\n</code></pre>\n<p>without any indication of class name or line number, but when I remove the class the issue is gone.</p>\n<p>I see that <code>CustomField</code> now effectively inherits from <code>HasValue</code> twice: by extending <code>AbstractField</code> and by implementing <code>InputField</code>, but I fail to see why these clash, and what I can do about that.</p>\n<p>I'm on JDK17 (Eclipse Termurin), I've tried the latest Corretto 17 release but that doesn't help.</p>\n<h2>Update</h2>\n<p>In my custom field, I have three text fields:</p>\n<pre><code>    private final TextField part1 = new TextField();\n    private final TextField part2 = new TextField();\n    private final TextField part3 = new TextField();\n</code></pre>\n<p>I'm adding a focus listener to <code>this</code> and each part using this line:</p>\n<pre><code>        Stream.of(this, part1, part2, part3).forEach(c -&gt; c.addFocusListener(event -&gt; this.focused = true));\n</code></pre>\n<p>Commenting out that line makes the error go away.</p>\n<p>When I hover over the <code>c</code> lambda parameter, IntelliJ IDEA shows its type:</p>\n<pre><code>com.vaadin.flow.component.AbstractField&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;? extends com.vaadin.flow.component.AbstractField.ComponentValueChangeEvent&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;?, ?&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties, String&gt;, String&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;? extends com.vaadin.flow.component.AbstractField.ComponentValueChangeEvent&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;?, ?&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties, String&gt;, String&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties, String&gt; &amp; com.vaadin.flow.component.Focusable&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;? extends com.vaadin.flow.component.AbstractField.ComponentValueChangeEvent&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;?, ?&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties, String&gt;, String&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;? extends com.vaadin.flow.component.AbstractField.ComponentValueChangeEvent&lt;? extends com.vaadin.flow.component.AbstractField&lt;?, ?&gt; &amp; com.vaadin.flow.component.Focusable&lt;?&gt; &amp; com.vaadin.flow.component.shared.InputField&lt;?, ?&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties, String&gt;, String&gt; &amp; com.vaadin.flow.component.HasTheme &amp; com.vaadin.flow.component.shared.HasValidationProperties c\n</code></pre>\n",
    "tags" : [ "java", "generics", "vaadin", "vaadin-flow" ],
    "owner" : {
      "account_id" : 405939,
      "reputation" : 12495,
      "user_id" : 775138,
      "user_type" : "registered",
      "accept_rate" : 66,
      "profile_image" : "https://i.sstatic.net/XAKUy.jpg?s=256",
      "display_name" : "Herman Bovens",
      "link" : "https://stackoverflow.com/users/775138/herman-bovens"
    },
    "is_answered" : true,
    "view_count" : 72,
    "answer_count" : 1,
    "score" : 4,
    "last_activity_date" : 1754580803,
    "creation_date" : 1754334224,
    "link" : "https://stackoverflow.com/questions/79725296/vaadin-24-compile-issue-with-customfield-java-generics",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79725907,
    "question_id" : 79725296,
    "body" : "<p>I can just add the focus listerens to <code>this</code> and the parts separately:</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.addFocusListener(event -&gt; this.focused = true);\nStream.of(part1, part2, part3).forEach(c -&gt; \n    c.addFocusListener(event -&gt; this.focused = true));\n</code></pre>\n<p>Or I can first assign the <code>Stream</code> to a simpler type instead of the enormous inferred type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;Focusable&lt;?&gt;&gt; stream = Stream.of(this, part1, part2, part3);\nstream.forEach(c -&gt; c.addFocusListener(event -&gt; this.focused = true));\n</code></pre>\n<p>Or just cast <code>this</code> first:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream.of((Focusable&lt;?&gt;)this, part1, part2, part3).forEach(c -&gt; c.addFocusListener(event -&gt; this.focused = true));\n</code></pre>\n<p>But probably the most idiomatic way without creating extra variables, is specifying the type when calling the static <code>Stream.of</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream.&lt;Focusable&lt;?&gt;&gt;of(this, part1, part2, part3).forEach(c -&gt; c.addFocusListener(event -&gt; this.focused = true));\n</code></pre>\n<p>In any case, a Java generics / type inference issue, not a Vaadin issue.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 405939,
      "reputation" : 12495,
      "user_id" : 775138,
      "user_type" : "registered",
      "accept_rate" : 66,
      "profile_image" : "https://i.sstatic.net/XAKUy.jpg?s=256",
      "display_name" : "Herman Bovens",
      "link" : "https://stackoverflow.com/users/775138/herman-bovens"
    },
    "creation_date" : 1754387134,
    "last_activity_date" : 1754580803,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}