{
  "question" : {
    "question_id" : 79787923,
    "title" : "Spring Boot 3 + Spring Security 6: 403 Forbidden when sending POST from Postman (stateless API)",
    "body" : "<p>I’m testing a POST endpoint of a stateless API (no sessions/forms) and Postman returns 403 Forbidden. I suspect CSRF, but I’m not sure how to configure it correctly in Security 6 for a stateless REST API.</p>\n<p>MRE (minimal code)</p>\n<pre class=\"lang-java prettyprint-override\"><code>// ItemDto.java\npublic record ItemDto(String name, Integer stock) {}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// ItemsController.java\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class ItemsController {\n  @PostMapping(&quot;/items&quot;)\n  public ResponseEntity&lt;String&gt; create(@RequestBody ItemDto dto) {\n    return ResponseEntity.ok(dto.name() + &quot;-&quot; + dto.stock());\n  }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// SecurityConfig.java\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n  @Bean\n  SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    // minimal config (this is where I'm stuck)\n    return http.build();\n  }\n}\n</code></pre>\n<p>Expected:\nPOST should return 200 OK with the JSON.</p>\n<p>What I tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>http.csrf(csrf -&gt; csrf.disable()); // unsure if safe for APIs\npermitAll()\n</code></pre>\n<p>on <code>/api/**</code>, still getting 403.</p>\n",
    "tags" : [ "java", "spring-boot", "post", "spring-security", "http-status-code-403" ],
    "owner" : {
      "account_id" : 44273852,
      "reputation" : 31,
      "user_id" : 31668273,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d205c6e91412271ed1bf2b10698c14d8?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Dayana Escobar",
      "link" : "https://stackoverflow.com/users/31668273/dayana-escobar"
    },
    "is_answered" : false,
    "view_count" : 103,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1760416353,
    "creation_date" : 1760173481,
    "link" : "https://stackoverflow.com/questions/79787923/spring-boot-3-spring-security-6-403-forbidden-when-sending-post-from-postman",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79788895,
    "question_id" : 79787923,
    "body" : "<p>If you simply want to test your endpoints quickly without dealing with CSRF tokens, you can use the code below.<br />\nThe following code works for Springboot 3.3.4 and Spring Security 6.3.3.</p>\n<pre><code>    @Bean\n    SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n      return http.csrf(csrf -&gt; csrf.ignoringRequestMatchers(new AntPathRequestMatcher(&quot;/api/**&quot;))).build();\n    }\n</code></pre>\n<p>For a production application, you should <strong>keep CSRF protection enabled</strong>. If you are testing your production setup with Postman, you must add the required CSRF credentials to your request for it to be accepted by Spring Security.</p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10463111,
      "reputation" : 17,
      "user_id" : 7713239,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fd1a14ba56cc60527438a2a2ff9d5bdf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Weshome",
      "link" : "https://stackoverflow.com/users/7713239/weshome"
    },
    "creation_date" : 1760324425,
    "last_activity_date" : 1760416353,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140790057,
    "post_id" : 79787923,
    "body" : "What has this got to do with Python?",
    "score" : 1,
    "owner" : {
      "account_id" : 6156261,
      "reputation" : 13343,
      "user_id" : 4799172,
      "user_type" : "registered",
      "accept_rate" : 94,
      "profile_image" : "https://i.sstatic.net/6VQlo.jpg?s=256",
      "display_name" : "roganjosh",
      "link" : "https://stackoverflow.com/users/4799172/roganjosh"
    },
    "creation_date" : 1760187586,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79788895" : [ {
      "comment_id" : 140792148,
      "post_id" : 79788895,
      "body" : "Disabling CSRF is never the solution.",
      "score" : 1,
      "owner" : {
        "account_id" : 3192259,
        "reputation" : 126826,
        "user_id" : 2696260,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
        "display_name" : "M. Deinum",
        "link" : "https://stackoverflow.com/users/2696260/m-deinum"
      },
      "creation_date" : 1760334907,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}