{
  "question" : {
    "question_id" : 79831382,
    "title" : "Spring Boot CORS preflight request returns 403 &quot;Invalid CORS request&quot; for POST /login",
    "body" : "<p>I’m trying to connect my React frontend (hosted on Azure Static Web Apps) to my Spring Boot backend (hosted on Azure App Service), but the CORS preflight request is failing with HTTP 403.</p>\n<p>When I run the following curl command to simulate the browser’s preflight:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl -i -X OPTIONS \\\n  &quot;https://math-morph-backend-qa-scotland-cqdchmerbueeathy.westus-01.azurewebsites.net/vpedtech/auth/login&quot; \\\n  -H &quot;Origin: https://lively-field-0cb114f0f.3.azurestaticapps.net&quot; \\\n  -H &quot;Access-Control-Request-Method: POST&quot;\n</code></pre>\n<p>I get this response:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>HTTP/1.1 403 Forbidden\nDate: Mon, 24 Nov 2025 14:54:54 GMT\nCache-Control: no-cache, no-store, max-age=0, must-revalidate\nExpires: 0\nPragma: no-cache\nTransfer-Encoding: chunked\nVary: Origin\nVary: Access-Control-Request-Method\nVary: Access-Control-Request-Headers\nStrict-Transport-Security: max-age=31536000 ; includeSubDomains\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\nX-Frame-Options: DENY\n\nInvalid CORS request\n</code></pre>\n<p>Here is my Spring Boot security configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n        .csrf(csrf -&gt; csrf.disable())\n        .cors(cors -&gt; cors.configurationSource(corsConfigurationSource()))\n        .sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n        .exceptionHandling(e -&gt;\n            e.authenticationEntryPoint((req, res, ex) -&gt; res.sendError(HttpServletResponse.SC_UNAUTHORIZED))\n             .accessDeniedHandler((req, res, ex) -&gt; res.sendError(HttpServletResponse.SC_FORBIDDEN))\n        );\n\n    return http.build();\n}\n</code></pre>\n<p>And my CORS configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic CorsConfigurationSource corsConfigurationSource() {\n\n    CorsConfiguration config = new CorsConfiguration();\n\n    // \uD83D\uDC47 IMPORTANT: your deployed frontend URL must be here\n    // Use allowedOriginPatterns – more forgiving &amp; modern way\n        \n    config.setAllowedOriginPatterns(List.of(\n        &quot;http://localhost:5173&quot;,\n        &quot;https://lively-field-0cb114f0f.3.azurestaticapps.net&quot;\n    ));\n\n    config.setAllowedMethods(List.of(&quot;GET&quot;,&quot;POST&quot;,&quot;PUT&quot;,&quot;DELETE&quot;,&quot;OPTIONS&quot;,&quot;PATCH&quot;));\n    config.setAllowedHeaders(List.of(&quot;*&quot;));\n    config.setExposedHeaders(List.of(&quot;Authorization&quot;, &quot;Location&quot;));\n    config.setAllowCredentials(true);\n\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, config);\n  \n    System.out.println(&quot;\uD83D\uDD35 CORS config initialized with allowedOrigins=&quot; + config.getAllowedOrigins());\n        \n    return source;\n}\n</code></pre>\n<p>Any guidance or examples of a working Spring Boot 3 and Spring Security 6 CORS setup for this scenario would be appreciated.</p>\n",
    "tags" : [ "java", "spring-boot", "cors" ],
    "owner" : {
      "account_id" : 10852761,
      "reputation" : 1,
      "user_id" : 7980036,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b9c6deb8f85add7349b8940467ddd45f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "tjDoe",
      "link" : "https://stackoverflow.com/users/7980036/tjdoe"
    },
    "is_answered" : false,
    "view_count" : 51,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764223501,
    "creation_date" : 1764223501,
    "link" : "https://stackoverflow.com/questions/79831382/spring-boot-cors-preflight-request-returns-403-invalid-cors-request-for-post",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140876026,
    "post_id" : 79831382,
    "body" : "Is it working for your localhost?",
    "score" : 0,
    "owner" : {
      "account_id" : 44346534,
      "reputation" : 176,
      "user_id" : 31706372,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/c17ef303e9ed8982a8aba03b7474bbda?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NirajDota",
      "link" : "https://stackoverflow.com/users/31706372/nirajdota"
    },
    "creation_date" : 1764243000,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140875926,
    "post_id" : 79831382,
    "body" : "please enable debug logs and edit your question to include them so that we can see that your configuration is actually loaded",
    "score" : 0,
    "owner" : {
      "account_id" : 2064278,
      "reputation" : 15107,
      "user_id" : 1840146,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://i.sstatic.net/JXdxm.png?s=256",
      "display_name" : "Toerktumlare",
      "link" : "https://stackoverflow.com/users/1840146/toerktumlare"
    },
    "creation_date" : 1764238957,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}