{
  "question" : {
    "question_id" : 79592170,
    "title" : "When are Maven coordinates equal?",
    "body" : "<p>I am looking for a specification, when two Maven-coordinates should refer to the same artifact.\nUsing trial and error I could determine so far that:</p>\n<ol>\n<li>groupId and artifactId are case sensitive, e.g. if I accidently use a capital letter my pom will not find the artifact.</li>\n<li>version is not case sensitive. For example if I replace 1.0.0-SNAPSHOT by 1.0.0-snapshot in a dependency in my pom, it will still find the same artifact.</li>\n<li>There is an extensive list of special cases when two instances of\n<a href=\"https://maven.apache.org/ref/3.9.9/maven-artifact/apidocs/org/apache/maven/artifact/versioning/ComparableVersion.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/ref/3.9.9/maven-artifact/apidocs/org/apache/maven/artifact/versioning/ComparableVersion.html</a>\nare considered equal. I first thought these must be the rules to check whether to version-Strings refer to the same artifact, but then I tried to replace &quot;1.0.0&quot; with &quot;1&quot; in my pom and it did not find the artifact anymore, whilst</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>new ComparableVersion(&quot;1.0.0&quot;).equals(new ComparableVersion(&quot;1&quot;))\n</code></pre>\n<p>returns true.</p>\n<p>Is there somewhere an official specification when one List of Maven coordinates is considered equal to another list ?</p>\n<p>That equals should be in such a way that in a pom I could use either one and I would still get the same artifact. Is there somewhere an official specification, when two Lists of Maven-Coordinates are equal and how to obtain a canonical form for a list of Maven-coordinates ?</p>\n",
    "tags" : [ "java", "maven" ],
    "owner" : {
      "account_id" : 507209,
      "reputation" : 157,
      "user_id" : 11150309,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/48e9fbd778d656e0551aadd980b28575?s=256&d=identicon&r=PG",
      "display_name" : "HenrikR&#252;ping",
      "link" : "https://stackoverflow.com/users/11150309/henrikr%c3%bcping"
    },
    "is_answered" : true,
    "view_count" : 206,
    "answer_count" : 2,
    "score" : 2,
    "last_activity_date" : 1746450460,
    "creation_date" : 1745571716,
    "link" : "https://stackoverflow.com/questions/79592170/when-are-maven-coordinates-equal",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79592231,
    "question_id" : 79592170,
    "body" : "<p>There is not really this &quot;one&quot; specification but rather a list of them. A very good source is still this book and for your question this chapter:</p>\n<p><a href=\"https://books.sonatype.com/mvnex-book/reference/simple-project-sect-simple-core.html#simple-project-sect-maven-coordinates\" rel=\"nofollow noreferrer\">https://books.sonatype.com/mvnex-book/reference/simple-project-sect-simple-core.html#simple-project-sect-maven-coordinates</a></p>\n<p>In general, in case of artifact identity, think more in the repository path layout that is created. This is based on literal string values and not abstract versions.</p>\n<p><code>ComparableVersion</code> is used for sorting version and version ranges, but they won't be resolved as the same artifact. As a test, create these artifacts with different numbers yourself and then look at your local repository (<a href=\"https://maven.apache.org/repository/layout.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/repository/layout.html</a>). You will discover the different versions in different folders.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 5316725,
      "reputation" : 259,
      "user_id" : 4241377,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0ae255d91ce1ff9888243f5bd51f77c2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Mr__Steel",
      "link" : "https://stackoverflow.com/users/4241377/mr-steel"
    },
    "creation_date" : 1745573729,
    "last_activity_date" : 1745599231,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79606974,
    "question_id" : 79592170,
    "body" : "<p>Let's understand when are the Maven coordinates consider equal.</p>\n<p>Maven considers two sets of coordinates equal if they map to the <strong>exact same repository path</strong>, which is constructed by concatenating the literal string values of <strong>groupId, artifactId, version, classifier</strong> (if present) and <strong>extension</strong> (defaulting to “jar”), <strong>exactly</strong> as written in the POM. There is <strong>no</strong> further normalization or semantic matching applied at resolution time: even though <code>ComparableVersion</code> may treat <code>&quot;1.0.0&quot;</code> and <code>&quot;1&quot;</code> as equal for <strong>sorting</strong> or <strong>range</strong> purposes, Maven will deploy and retrieve them into <strong>distinct</strong> directories in the local or remote repository, so they are <strong>not</strong> considered the same artifact unless the coordinate strings are <strong>identical</strong>.</p>\n<p><strong>Maven Coordinates and Repository Layout</strong></p>\n<ul>\n<li><p><strong>Coordinate components</strong></p>\n<p>Maven coordinates formally comprise:</p>\n</li>\n<li><p><code>groupId</code> (e.g. <code>org.apache.maven</code>)</p>\n</li>\n<li><p><code>artifactId</code> (e.g. <code>maven-artifact</code>)</p>\n</li>\n<li><p><code>version</code> (e.g. 3.9.9 or <code>1.0.0-SNAPSHOT)</code></p>\n</li>\n<li><p>Optional <code>classifier</code> (e.g. <code>javadoc</code>)</p>\n</li>\n<li><p><code>extension</code> or <code>packaging</code> (default: <code>jar</code>)</p>\n</li>\n<li><p><strong>Repository path</strong></p>\n<p>Artifacts are stored by transforming the <code>groupId</code> into a directory structure, then subdirectories for <code>artifactId</code> and <code>version</code>, with the file name built from <code>artifactId</code>, <code>version</code>, <code>classifier</code>, and <code>extension</code>. Example path:</p>\n</li>\n</ul>\n<pre><code>    ~/.m2/repository/org/apache/maven/maven-artifact/3.9.9/maven-artifact-3.9.9.jar\n</code></pre>\n<p>Any change in the literal string of <strong>any</strong> coordinate component leads to a different path and thus a different artifact .</p>\n<ul>\n<li><p><strong>Case Sensitivity</strong></p>\n</li>\n<li><p><strong>groupId</strong> and <strong>artifactId</strong> are <strong>case-sensitive</strong>: changing <code>commons-math</code> to <code>Commons-Math</code> refers to a different directory and will not resolve .</p>\n</li>\n<li><p><strong>version</strong> is effectively treated as a literal string when locating artifacts; Maven <strong>normalizes</strong> “SNAPSHOT” to uppercase in practice, but apart from that, the case of the version string is preserved in the repository path .</p>\n</li>\n<li><p><strong>Role of</strong> <code>ComparableVersion</code></p>\n<p>The class <code>ComparableVersion</code> provides a <strong>sorting</strong> and <strong>range</strong>-comparison algorithm for version strings (so that <code>&quot;1.0.0</code>&quot; &gt; <code>&quot;1&quot;</code> and qualifiers like <code>-SNAPSHOT</code> compare correctly), but <strong>does not</strong> influence <strong>artifact</strong> <strong>identity</strong>. Two versions deemed equal by <code>ComparableVersion</code> will still reside in separate version directories unless their strings are exactly <code>identical</code> .</p>\n</li>\n</ul>\n<p><strong>Canonical Form and Equality</strong></p>\n<ul>\n<li><p><strong>No single canonical form</strong> is published beyond the <strong>literal repository layout</strong> rules and the naming conventions documented in the POM and repository layout guides.</p>\n</li>\n<li><p>To guarantee equality, ensure the <strong>string</strong> values of all coordinate fields match exactly (including case for <code>groupId/artifactId</code>, exact qualifier spelling, and any classifier/extension).</p>\n</li>\n<li><p>In multi-module POMs or Bill of Materials (BOMs), the same rule applies: each dependency or plugin is located solely by its literal coordinates against the repository layout .</p>\n</li>\n</ul>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2357788,
      "reputation" : 147,
      "user_id" : 2065219,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CvYLH.jpg?s=256",
      "display_name" : "Hemang Gandhi",
      "link" : "https://stackoverflow.com/users/2065219/hemang-gandhi"
    },
    "creation_date" : 1746450460,
    "last_activity_date" : 1746450460,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140396577,
    "post_id" : 79592170,
    "body" : "what you get for <code>new ComparableVersion(&quot;1&quot;).equals(new ComparableVersion(&quot;1.0.0&quot;))</code>. <b>false</b>?",
    "score" : 0,
    "owner" : {
      "account_id" : 1066374,
      "reputation" : 31804,
      "user_id" : 1066828,
      "user_type" : "registered",
      "accept_rate" : 95,
      "profile_image" : "https://www.gravatar.com/avatar/8785d8636d0dc68405fee1e9aa41728a?s=256&d=identicon&r=PG",
      "display_name" : "Fahim Parkar",
      "link" : "https://stackoverflow.com/users/1066828/fahim-parkar"
    },
    "creation_date" : 1746443294,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79606974" : [ {
      "comment_id" : 140397052,
      "post_id" : 79606974,
      "body" : "@ J Fabian Meier, You are right, Maven treats <b>version strings as case-insensitive, in practice</b>, when resolving dependencies. <code>1.1.0.FINAL</code> is normalized to <code>1.1.0.Final</code>, and treated the same as <code>1.1.0.final</code>.",
      "score" : 0,
      "owner" : {
        "account_id" : 2357788,
        "reputation" : 147,
        "user_id" : 2065219,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/CvYLH.jpg?s=256",
        "display_name" : "Hemang Gandhi",
        "link" : "https://stackoverflow.com/users/2065219/hemang-gandhi"
      },
      "creation_date" : 1746452635,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79592231" : [ {
      "comment_id" : 140376590,
      "post_id" : 79592231,
      "body" : "@khmarbaise It seems to be problematic to me that ComparableVersion treats several different Strings as equal versions (like the example in the question), but when you resolve dependencies, they are not treated as equal anymore. It would be good if the class ComparableVersion would be fixed in the future. It has other issues as well, see <a href=\"https://stackoverflow.com/a/75263140/927493\">stackoverflow.com/a/75263140/927493</a>",
      "score" : 0,
      "owner" : {
        "account_id" : 888714,
        "reputation" : 36717,
        "user_id" : 927493,
        "user_type" : "registered",
        "accept_rate" : 61,
        "profile_image" : "https://i.sstatic.net/sxsnm.png?s=256",
        "display_name" : "JF Meier",
        "link" : "https://stackoverflow.com/users/927493/jf-meier"
      },
      "creation_date" : 1745846982,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140372765,
      "post_id" : 79592231,
      "body" : "If you want to consume a dependency. It is downloaded from a remote repository which uses the coordinates for finding it... the repository manager handle it case sensitive... it is independent of the used OS (Linux/Windows/OSX etc.)...",
      "score" : 1,
      "owner" : {
        "account_id" : 112317,
        "reputation" : 98455,
        "user_id" : 296328,
        "user_type" : "registered",
        "accept_rate" : 60,
        "profile_image" : "https://i.sstatic.net/DSpH6.jpg?s=256",
        "display_name" : "khmarbaise",
        "link" : "https://stackoverflow.com/users/296328/khmarbaise"
      },
      "creation_date" : 1745709758,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140371339,
      "post_id" : 79592231,
      "body" : "On the other hand I work on Windows and still as described above changing the capitalization in groupId or artifactId in my pom results in not finding the artifact. So maybe there has to be more going on than just thinking about Maven-coordinates as paths in my local repository...",
      "score" : 1,
      "owner" : {
        "account_id" : 507209,
        "reputation" : 157,
        "user_id" : 11150309,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/48e9fbd778d656e0551aadd980b28575?s=256&d=identicon&r=PG",
        "display_name" : "HenrikR&#252;ping",
        "link" : "https://stackoverflow.com/users/11150309/henrikr%c3%bcping"
      },
      "creation_date" : 1745654438,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140368719,
      "post_id" : 79592231,
      "body" : "You are right, that this is indeed a bit different on Windows and Linux if you look at the local repository. Nevertheless, Maven will normalize them before actually comparing the coordinates, so don&#39;t worry about it.  Even if you have them in different local &quot;paths&quot; they will be resolved as the same. This is also why there are conventions like alsways writing SNAPSHOT in uppercase.",
      "score" : 0,
      "owner" : {
        "account_id" : 5316725,
        "reputation" : 259,
        "user_id" : 4241377,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/0ae255d91ce1ff9888243f5bd51f77c2?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Mr__Steel",
        "link" : "https://stackoverflow.com/users/4241377/mr-steel"
      },
      "creation_date" : 1745578173,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140368646,
      "post_id" : 79592231,
      "body" : "If I think of Maven coordinates as Paths in my local repository, then they are case sensitive when I prefer to work on Linux and not case sensitive, when I work  on Windows. I really hoped that it was different.",
      "score" : 1,
      "owner" : {
        "account_id" : 507209,
        "reputation" : 157,
        "user_id" : 11150309,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/48e9fbd778d656e0551aadd980b28575?s=256&d=identicon&r=PG",
        "display_name" : "HenrikR&#252;ping",
        "link" : "https://stackoverflow.com/users/11150309/henrikr%c3%bcping"
      },
      "creation_date" : 1745576711,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}