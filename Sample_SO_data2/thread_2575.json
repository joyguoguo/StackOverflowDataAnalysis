{
  "question" : {
    "question_id" : 79613856,
    "title" : "&quot;URI has an authority component&quot; error in Eclipse build with Bndtools",
    "body" : "<p>I have a legacy OSGi project that is currently developed with Java 8 in an Eclipse Mars installation with Bndtools 3.5.</p>\n<p>The goal is, to get the project running on an as-recent-as-possible Java version.</p>\n<p>The latest known-to-work-with-the-project Bndtools version is 4.0.0 from an earlier attempt six years ago. Unfortunetly version 4.0.0 seems to be no longer publicly available. For that reason I set-up an Eclipse 2023-03 with Bndtools 4.3.0. But now I’m stuck getting the following error on build in my Eclipse log:</p>\n<pre><code>!ENTRY bndtools.core 4 0 2025-05-09 11:04:58.919\n!MESSAGE Init of workspace\n!STACK 0\njava.lang.reflect.InvocationTargetException\n    at org.osgi.util.promise.DeferredPromiseImpl.getValue(DeferredPromiseImpl.java:128)\n    at aQute.bnd.repository.osgi.OSGiIndex.getBridge(OSGiIndex.java:206)\n    at aQute.bnd.repository.osgi.OSGiRepository.versions(OSGiRepository.java:201)\n    at aQute.bnd.build.Project.getBundle(Project.java:1276)\n    at aQute.bnd.build.Project.getBundles(Project.java:617)\n    at aQute.bnd.build.Project.parseBuildpath(Project.java:558)\n    at aQute.bnd.build.Project.prepare(Project.java:400)\n    at aQute.bnd.build.Project.getTarget(Project.java:1663)\n    at aQute.bnd.build.Project.getOutputFile(Project.java:2080)\n    at aQute.bnd.build.Project.getDeliverable(Project.java:2731)\n    at aQute.bnd.build.Project.getBundleFromProject(Project.java:1453)\n    at aQute.bnd.build.Project.getBundle(Project.java:1234)\n    at aQute.bnd.build.Project.getBundles(Project.java:617)\n    at aQute.bnd.build.Project.parseBuildpath(Project.java:558)\n    at aQute.bnd.build.Project.prepare(Project.java:400)\n    at aQute.bnd.build.Project.getDependson(Project.java:865)\n    at aQute.bnd.build.Workspace.getBuildOrder(Workspace.java:555)\n    at bndtools.central.Central.getWorkspace(Central.java:253)\n    at bndtools.central.Central.getProject(Central.java:575)\n    at bndtools.central.Central.getProject(Central.java:579)\n    at org.bndtools.builder.classpath.BndContainerInitializer$Updater.&lt;init&gt;(BndContainerInitializer.java:228)\n    at org.bndtools.builder.classpath.BndContainerInitializer.requestClasspathContainerUpdate(BndContainerInitializer.java:116)\n    at org.bndtools.builder.classpath.BndContainerInitializer.requestClasspathContainerUpdate(BndContainerInitializer.java:165)\n    at org.bndtools.builder.classpath.BndContainerCompilationParticipant.aboutToBuild(BndContainerCompilationParticipant.java:19)\n    at org.eclipse.jdt.internal.core.builder.JavaBuilder.initializeBuilder(JavaBuilder.java:632)\n    at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:182)\n    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:1020)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:247)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:303)\n    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:392)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:395)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:354)\n    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:616)\n    at org.eclipse.core.internal.resources.Project$1.run(Project.java:571)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2380)\n    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:609)\n    at org.eclipse.core.internal.resources.Project.build(Project.java:121)\n    at bndtools.editor.project.BuildOperationsPart$RebuildJob.runInWorkspace(BuildOperationsPart.java:111)\n    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:43)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\nCaused by: org.osgi.util.promise.FailedPromisesException: java.lang.IllegalArgumentException: URI has an authority component\n    at org.osgi.util.promise.PromiseFactory$All.run(PromiseFactory.java:362)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalArgumentException: URI has an authority component\n    at java.base/java.io.File.&lt;init&gt;(File.java:425)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached0(HttpClient.java:483)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached(HttpClient.java:448)\n    at aQute.bnd.http.HttpClient$HttpConnection.call(HttpClient.java:398)\n    at org.osgi.util.promise.DeferredPromiseImpl$Submit.run(DeferredPromiseImpl.java:767)\n    ... 3 more\nRoot exception:\norg.osgi.util.promise.FailedPromisesException: java.lang.IllegalArgumentException: URI has an authority component\n    at org.osgi.util.promise.PromiseFactory$All.run(PromiseFactory.java:362)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalArgumentException: URI has an authority component\n    at java.base/java.io.File.&lt;init&gt;(File.java:425)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached0(HttpClient.java:483)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached(HttpClient.java:448)\n    at aQute.bnd.http.HttpClient$HttpConnection.call(HttpClient.java:398)\n    at org.osgi.util.promise.DeferredPromiseImpl$Submit.run(DeferredPromiseImpl.java:767)\n    ... 3 more\n\n!ENTRY bndtools.builder 1 0 2025-05-09 11:04:58.920\n!MESSAGE Unable to get bnd project for project de.ba.kasse.configuration\n!STACK 0\njava.lang.reflect.InvocationTargetException\n    at org.osgi.util.promise.DeferredPromiseImpl.getValue(DeferredPromiseImpl.java:128)\n    at aQute.bnd.repository.osgi.OSGiIndex.getBridge(OSGiIndex.java:206)\n    at aQute.bnd.repository.osgi.OSGiRepository.versions(OSGiRepository.java:201)\n    at aQute.bnd.build.Project.getBundle(Project.java:1276)\n    at aQute.bnd.build.Project.getBundles(Project.java:617)\n    at aQute.bnd.build.Project.parseBuildpath(Project.java:558)\n    at aQute.bnd.build.Project.prepare(Project.java:400)\n    at aQute.bnd.build.Project.getTarget(Project.java:1663)\n    at aQute.bnd.build.Project.getOutputFile(Project.java:2080)\n    at aQute.bnd.build.Project.getDeliverable(Project.java:2731)\n    at aQute.bnd.build.Project.getBundleFromProject(Project.java:1453)\n    at aQute.bnd.build.Project.getBundle(Project.java:1234)\n    at aQute.bnd.build.Project.getBundles(Project.java:617)\n    at aQute.bnd.build.Project.parseBuildpath(Project.java:558)\n    at aQute.bnd.build.Project.prepare(Project.java:400)\n    at aQute.bnd.build.Project.getDependson(Project.java:865)\n    at aQute.bnd.build.Workspace.getBuildOrder(Workspace.java:555)\n    at bndtools.central.Central.getWorkspace(Central.java:253)\n    at bndtools.central.Central.getProject(Central.java:575)\n    at bndtools.central.Central.getProject(Central.java:579)\n    at org.bndtools.builder.classpath.BndContainerInitializer$Updater.&lt;init&gt;(BndContainerInitializer.java:228)\n    at org.bndtools.builder.classpath.BndContainerInitializer.requestClasspathContainerUpdate(BndContainerInitializer.java:116)\n    at org.bndtools.builder.classpath.BndContainerInitializer.requestClasspathContainerUpdate(BndContainerInitializer.java:165)\n    at org.bndtools.builder.classpath.BndContainerCompilationParticipant.aboutToBuild(BndContainerCompilationParticipant.java:19)\n    at org.eclipse.jdt.internal.core.builder.JavaBuilder.initializeBuilder(JavaBuilder.java:632)\n    at org.eclipse.jdt.internal.core.builder.JavaBuilder.build(JavaBuilder.java:182)\n    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:1020)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:247)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:303)\n    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:392)\n    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:45)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:395)\n    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:354)\n    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:616)\n    at org.eclipse.core.internal.resources.Project$1.run(Project.java:571)\n    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2380)\n    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:609)\n    at org.eclipse.core.internal.resources.Project.build(Project.java:121)\n    at bndtools.editor.project.BuildOperationsPart$RebuildJob.runInWorkspace(BuildOperationsPart.java:111)\n    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:43)\n    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:63)\nCaused by: org.osgi.util.promise.FailedPromisesException: java.lang.IllegalArgumentException: URI has an authority component\n    at org.osgi.util.promise.PromiseFactory$All.run(PromiseFactory.java:362)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalArgumentException: URI has an authority component\n    at java.base/java.io.File.&lt;init&gt;(File.java:425)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached0(HttpClient.java:483)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached(HttpClient.java:448)\n    at aQute.bnd.http.HttpClient$HttpConnection.call(HttpClient.java:398)\n    at org.osgi.util.promise.DeferredPromiseImpl$Submit.run(DeferredPromiseImpl.java:767)\n    ... 3 more\nRoot exception:\norg.osgi.util.promise.FailedPromisesException: java.lang.IllegalArgumentException: URI has an authority component\n    at org.osgi.util.promise.PromiseFactory$All.run(PromiseFactory.java:362)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalArgumentException: URI has an authority component\n    at java.base/java.io.File.&lt;init&gt;(File.java:425)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached0(HttpClient.java:483)\n    at aQute.bnd.http.HttpClient$HttpConnection.doCached(HttpClient.java:448)\n    at aQute.bnd.http.HttpClient$HttpConnection.call(HttpClient.java:398)\n    at org.osgi.util.promise.DeferredPromiseImpl$Submit.run(DeferredPromiseImpl.java:767)\n    ... 3 more\n</code></pre>\n<p>I’m not able to track the root cause of the problem. Any help/hint is appreciated.</p>\n<p><em>Side question: Is Bndtools 4.0.0 Eclipse plug-in still available anywhere? Maybe this would help migrating the project in as little steps as possible.</em></p>\n",
    "tags" : [ "java", "eclipse", "bndtools" ],
    "owner" : {
      "account_id" : 9298348,
      "reputation" : 542,
      "user_id" : 6904643,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FEE6B.png?s=256",
      "display_name" : "dosenfant",
      "link" : "https://stackoverflow.com/users/6904643/dosenfant"
    },
    "is_answered" : false,
    "view_count" : 37,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1749043320,
    "creation_date" : 1746783785,
    "link" : "https://stackoverflow.com/questions/79613856/uri-has-an-authority-component-error-in-eclipse-build-with-bndtools",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79652868,
    "question_id" : 79613856,
    "body" : "<p>Today I found the reason for the &quot;URI has an authority component&quot; exception:</p>\n<p>In <code>cnf/ext/repositories.bnd</code> were the following two lines</p>\n<pre><code>aQute.bnd.deployer.repository.FixedIndexedRepo;name=AAA;locations=file://${workspace}/cnf/local_repos/aaa/index.xml,\\\naQute.bnd.deployer.repository.FixedIndexedRepo;name=BBB;locations=file://${workspace}/cnf/local_repos/bbb/index.xml,\\\n</code></pre>\n<p>where <code>file://</code> seemed to be the culprit.</p>\n<p><em>Side answer: A colleague of mine found an installation of Eclipse Mars with Bndtools 4.0.0 on his old computer. ;-)</em></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 9298348,
      "reputation" : 542,
      "user_id" : 6904643,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FEE6B.png?s=256",
      "display_name" : "dosenfant",
      "link" : "https://stackoverflow.com/users/6904643/dosenfant"
    },
    "creation_date" : 1749043320,
    "last_activity_date" : 1749043320,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140446500,
    "post_id" : 79613856,
    "body" : "I thought it was just me unlucky to have to support ancient Eclipse versions ;) - but I use BNDTools 6.3.1 from Luna SR2 through to current Eclipse without issue. There&#39;s little to go on, but <code>InvocationTargetException</code> is clear, BND is trying to call a non-existent endpoint/method. Likely something you have in a .bnd file is no longer valid in version 4.0.0 and you should check BND docs for the updated approach, or something in an OSGi bundle depends on something else not present. But this is a guess based on my experiences and in no way certain.",
    "score" : 0,
    "owner" : {
      "account_id" : 20798008,
      "reputation" : 335,
      "user_id" : 15274669,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/00d42a32b56c63dfd8bea9fabb57cc2d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "majixin",
      "link" : "https://stackoverflow.com/users/15274669/majixin"
    },
    "creation_date" : 1747842260,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140411198,
    "post_id" : 79613856,
    "body" : "The current Eclipse version is 2025-03. Eclipse Mars is more than 9 years and 30 releases behind, 2023-03 is two years and 8 releases behind. <a href=\"https://marketplace.eclipse.org/content/bndtools-osgi-development-tool\" rel=\"nofollow noreferrer\">Bndtools</a> has been updated in January, but might not work in the outdated Eclipse versions you use. Please update your Eclipse and Bndtools and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal example</a> with which your issue can be reproduced.",
    "score" : 1,
    "owner" : {
      "account_id" : 8692823,
      "reputation" : 35045,
      "user_id" : 6505250,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/FgNJn.jpg?s=256",
      "display_name" : "howlger",
      "link" : "https://stackoverflow.com/users/6505250/howlger"
    },
    "creation_date" : 1746798926,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}