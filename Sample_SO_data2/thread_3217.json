{
  "question" : {
    "question_id" : 79566810,
    "title" : "Jetty throwing written 0 &lt; xxx content-length",
    "body" : "<p>I am using <code>java 21</code>, <code>Spring boot 3.2.5</code> and <code>Jetty 12.0.8</code>\nI have started seeing an exception which occurs almost randomly (Full stack trace at the end):</p>\n<pre><code>&quot;writeError: status=500, message=java.io.IOException: written 0 &lt; 2859 content-length\n</code></pre>\n<p>This application runs behind an ELB. However, the issue is it shows up only in production when the application is deployed on a lot of nodes. There is no slow down on the application side to get the required data to serve requests that fail this way. I have been trying to replicate in lower environments with various load tests with no luck.\nHas anyone seen anything like this before? Any thoughts on what may cause this and/or how I can replicate this? Thanks in advance.</p>\n<pre><code>java.io.IOException: written 0 &lt; 2859 content-length\n    at org.eclipse.jetty.server.internal.HttpChannelState$ChannelResponse.write(HttpChannelState.java:1217) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.Response$Wrapper.write(Response.java:751) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.EventsHandler$EventsResponse.write(EventsHandler.java:353) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.Response$Wrapper.write(Response.java:751) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.gzip.GzipResponseAndCallback.commit(GzipResponseAndCallback.java:191) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.gzip.GzipResponseAndCallback.write(GzipResponseAndCallback.java:132) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.Response$Wrapper.write(Response.java:751) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.gzip.GzipResponseAndCallback.commit(GzipResponseAndCallback.java:191) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.gzip.GzipResponseAndCallback.write(GzipResponseAndCallback.java:132) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.Response$Wrapper.write(Response.java:751) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.ContextResponse.write(ContextResponse.java:56) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.ee10.servlet.ServletContextResponse.write(ServletContextResponse.java:288) ~[jetty-ee10-servlet-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.ee10.servlet.HttpOutput.channelWrite(HttpOutput.java:205) ~[jetty-ee10-servlet-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.ee10.servlet.HttpOutput.complete(HttpOutput.java:436) ~[jetty-ee10-servlet-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.ee10.servlet.ServletContextResponse.completeOutput(ServletContextResponse.java:212) ~[jetty-ee10-servlet-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.ee10.servlet.ServletChannel.handle(ServletChannel.java:571) ~[jetty-ee10-servlet-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.ContextHandler$ScopedContext.run(ContextHandler.java:1298) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.server.handler.ContextHandler$ScopedContext.lambda$execute$0(ContextHandler.java:1315) ~[jetty-server-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:979) ~[jetty-util-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1209) ~[jetty-util-12.0.8.jar!/:12.0.8]\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1164) ~[jetty-util-12.0.8.jar!/:12.0.8]\n    at java.base/java.lang.Thread.run(Thread.java:1583) \n</code></pre>\n",
    "tags" : [ "java", "spring", "jetty", "aws-elb" ],
    "owner" : {
      "account_id" : 2738653,
      "reputation" : 4239,
      "user_id" : 2360694,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/20678f2549bee2089fa1204a2275733e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ferrari16",
      "link" : "https://stackoverflow.com/users/2360694/ferrari16"
    },
    "is_answered" : false,
    "view_count" : 83,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1744292305,
    "creation_date" : 1744292305,
    "link" : "https://stackoverflow.com/questions/79566810/jetty-throwing-written-0-xxx-content-length",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140645362,
    "post_id" : 79566810,
    "body" : "Did you find the solution ?",
    "score" : 0,
    "owner" : {
      "account_id" : 15518998,
      "reputation" : 175,
      "user_id" : 11195677,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-s6WZxhl96ww/AAAAAAAAAAI/AAAAAAAAABI/d6UTxucgqL8/s256-rj/photo.jpg",
      "display_name" : "Thomas A Mathew",
      "link" : "https://stackoverflow.com/users/11195677/thomas-a-mathew"
    },
    "creation_date" : 1754463632,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}