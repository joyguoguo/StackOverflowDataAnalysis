{
  "question" : {
    "question_id" : 79588355,
    "title" : "What could be the issue with this composite key and query setup in Spring Data JPA?",
    "body" : "<p>I'm working on a Spring Boot project using JPA and trying to query an entity that uses a composite primary key with @IdClass, but I can't get the repository method to work.</p>\n<p>I've double-checked that:</p>\n<ul>\n<li>All imports are correct (jakarta.persistence.*,)</li>\n<li>My repository is injected properly</li>\n<li>The method is being called from the service</li>\n</ul>\n<p>Is my setup correct? Should I be watching out for something specific when using <code>@IdClass</code> with Spring Data JPA?</p>\n<p>Entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity \n@Table(name = &quot;entity_relation&quot;, schema = &quot;my_schema&quot;) \n@IdClass(EntityRelationKey.class) \npublic class EntityRelation {\n\n@Id\nprivate Long groupId;\n\n@Id\nprivate Integer sequenceNo;\n\n@ManyToOne(fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;entity_id&quot;, referencedColumnName = &quot;id&quot;)\nprivate MainEntity mainEntity;\n}\n</code></pre>\n<p>Composite Key Class:</p>\n<pre><code>@Data \n@NoArgsConstructor \n@AllArgsConstructor \npublic class EntityRelationKey implements Serializable \n{ private Long groupId; \n  private Integer sequenceNo; \n}\n</code></pre>\n<p>Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository \npublic interface EntityRelationRepository extends JpaRepository&lt;EntityRelation, EntityRelationKey&gt; {\n List&lt;EntityRelation&gt; findByGroupIdOrderBySequenceNoAsc(@Param(&quot;groupId&quot;) Long groupId); \n}\n</code></pre>\n<p>PROBLEM</p>\n<p>When I call this method from my service, it returns empty:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;EntityRelation&gt; relations = entityRelationRepository.findByGroupIdOrderBySequenceNoAsc(groupId);\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "spring-data-jpa", "spring-data" ],
    "owner" : {
      "account_id" : 41550342,
      "reputation" : 3,
      "user_id" : 30341772,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/41f9fe971d9144c863c669c20afe6220?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Kubra",
      "link" : "https://stackoverflow.com/users/30341772/kubra"
    },
    "is_answered" : true,
    "view_count" : 111,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1745461455,
    "creation_date" : 1745403076,
    "link" : "https://stackoverflow.com/questions/79588355/what-could-be-the-issue-with-this-composite-key-and-query-setup-in-spring-data-j",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79589728,
    "question_id" : 79588355,
    "body" : "<p><code>@Param</code> annotation is usually used with <code>Query</code> annotation to solve binding parameter errors, but since you already used JPA query method, JPA will try to match and bind the parameter you provided with the where condition so you don't need to put <code>@Param</code> in the method declarations.</p>\n<p>you can either try these two things\nfirst try removing <code>@Param</code> annotation in your repository query method definition</p>\n<p>or second try manually creating the query with <code>@Query</code> annotation</p>\n<p>for more detailed and example here is the reference <a href=\"https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html\" rel=\"nofollow noreferrer\">link</a></p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 14207111,
      "reputation" : 516,
      "user_id" : 10263321,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/72ff09b43bfd92a1fcd8e6eb11e0693d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Aleson",
      "link" : "https://stackoverflow.com/users/10263321/aleson"
    },
    "creation_date" : 1745461455,
    "last_activity_date" : 1745461455,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140361457,
    "post_id" : 79588355,
    "body" : "The code looks fine, you might want to enable the property <code>spring.jpa.show-sql=true</code> to verify if the query generated is indeed correct.",
    "score" : 0,
    "owner" : {
      "account_id" : 7673258,
      "reputation" : 2114,
      "user_id" : 6200354,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1afc8346f23819373b78aae36744b53a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "atish.s",
      "link" : "https://stackoverflow.com/users/6200354/atish-s"
    },
    "creation_date" : 1745413309,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79589728" : [ {
      "comment_id" : 140396738,
      "post_id" : 79589728,
      "body" : "Thank you for the advice, actually the issue was i was not connect to the correct database",
      "score" : 0,
      "owner" : {
        "account_id" : 41550342,
        "reputation" : 3,
        "user_id" : 30341772,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/41f9fe971d9144c863c669c20afe6220?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Kubra",
        "link" : "https://stackoverflow.com/users/30341772/kubra"
      },
      "creation_date" : 1746446524,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}