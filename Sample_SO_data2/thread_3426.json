{
  "question" : {
    "question_id" : 79552173,
    "title" : "Rebuild kafka Container after each change",
    "body" : "<p>I am trying to test Zookeeper to Kraft migration on my machine that later needs to done on dev env. I have created ZK and kafka images using podman and started them. Now one step in the migration is to enable migration on Kraft controllers and then on the ZK based Kafka brokers.</p>\n<p>So to enable migration we have to add this flag <code>zookeeper.metadata.migration.enable=true</code> to brokers under the <code>server.properties</code> file and then restart them for the migration to begin. To make the change I exec into the container open the files and added this flag and saved it, but as soon as I stop and start it again, the change that I did is not present.</p>\n<p>Now for migration, changes to server.properties needs to be on both Kraft controller and ZK-based broker a few times during the whole migration process like this flag. So will I have to rebuild the image again and again after I make changes to the configs ? or is there a way to make the changes persistent upon container restart..</p>\n",
    "tags" : [ "java", "docker", "apache-kafka", "docker-container", "podman" ],
    "owner" : {
      "account_id" : 30637324,
      "reputation" : 39,
      "user_id" : 23486478,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d1647d7de6770064990c56ddf6ebb092?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "BloodFury",
      "link" : "https://stackoverflow.com/users/23486478/bloodfury"
    },
    "is_answered" : false,
    "view_count" : 87,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743705890,
    "creation_date" : 1743662512,
    "link" : "https://stackoverflow.com/questions/79552173/rebuild-kafka-container-after-each-change",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140296217,
    "post_id" : 79552173,
    "body" : "@BloodFury check out the edited answer, option1",
    "score" : 0,
    "owner" : {
      "account_id" : 2465829,
      "reputation" : 13627,
      "user_id" : 2148953,
      "user_type" : "registered",
      "accept_rate" : 96,
      "profile_image" : "https://i.sstatic.net/DVHoP84E.jpg?s=256",
      "display_name" : "aran",
      "link" : "https://stackoverflow.com/users/2148953/aran"
    },
    "creation_date" : 1743703742,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140294541,
    "post_id" : 79552173,
    "body" : "@DavidMaze so this file <code>server.properties</code> is already present and comes with kafka&#39;s source code. So as I understand, ig I could create this file on my local system and volume mount it in the container... and after this if i lets say change this flag from true to false and restart the container I could see the changes being reflected, right ?",
    "score" : 0,
    "owner" : {
      "account_id" : 30637324,
      "reputation" : 39,
      "user_id" : 23486478,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d1647d7de6770064990c56ddf6ebb092?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "BloodFury",
      "link" : "https://stackoverflow.com/users/23486478/bloodfury"
    },
    "creation_date" : 1743681445,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140294062,
    "post_id" : 79552173,
    "body" : "Where does the configuration file come from?  <code>docker exec</code> has exactly the problem you describe here, that when the container is deleted and recreated any changes you make manually are lost.  One typical approach is to bind-mount the configuration file from the host instead, so you can edit it normally and it will survive restarts, but you need a copy of it on the host to start with.",
    "score" : 1,
    "owner" : {
      "account_id" : 13863020,
      "reputation" : 164909,
      "user_id" : 10008173,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/bc86d913c15f3b126673faa654e9668c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "David Maze",
      "link" : "https://stackoverflow.com/users/10008173/david-maze"
    },
    "creation_date" : 1743674462,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}