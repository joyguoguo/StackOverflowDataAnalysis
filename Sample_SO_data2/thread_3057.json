{
  "question" : {
    "question_id" : 79577760,
    "title" : "Transparent Pixels not properly working on MacOS",
    "body" : "<p>I wrote some code in the Java dialect Processing that is supposed to create an overlay.\nThis code is supposed to allow users to create an overlay that allows usage of the window below.</p>\n<p>MacOS users reported that the overlay did properly render but didn't allow to use the window below the overlay by clicking on a transparent pixels.</p>\n<p>Here is a minimal example in pure Java where this issue arises:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package overlayTest;\nimport javax.swing.*;\nimport java.awt.*;\npublic class OverlayWindowJava {\n    public static void main(String[] args) {JWindow jw=new JWindow();\n      JPanel jp=new JPanel() {\n            @Override\n              public void paint(Graphics g) {\n              Graphics2D g2=(Graphics2D)g;\n              g2.fillOval(40, 40, 20, 20);\n            }\n          };\n          jw.setBackground(new Color(0, 0, 0, 0));\n          jp.setBackground(new Color(0, 0, 0, 0));\n          jw.setAlwaysOnTop(true);\n          jw.setLocation(0, 0);\n          jp.setOpaque(false);\n          jp.setPreferredSize(Toolkit.getDefaultToolkit().getScreenSize());\n          jw.setContentPane(jp);\n          jw.getRootPane().putClientProperty(&quot;apply.awt.draggableWindowBackground&quot;, false);\n          jw.pack();\n                  //Since this issue involves the window &quot;blocking&quot; the mouse the program will terminate automatically after 10s as a safety mechanism\n          new java.util.Timer().schedule(new java.util.TimerTask(){public void run(){System.exit(0);}},10000);\n          jw.setVisible(true);\n    }\n}\n</code></pre>\n<p>This code was supposed to draw an oval on the screen but allow the user to still use the windows below. However it was reported that the invisible window used to achieve this seems to not allow clicking onto the window below to interact with it.</p>\n<p>On Windows this problem doesn't arise.</p>\n<p>Does anyone know a fix for this problem?</p>\n",
    "tags" : [ "java", "macos", "swing", "overlay" ],
    "owner" : {
      "account_id" : 22478656,
      "reputation" : 73,
      "user_id" : 18235324,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8e6bf5e71f15aef303329cb818bc08eb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NumericPrime",
      "link" : "https://stackoverflow.com/users/18235324/numericprime"
    },
    "is_answered" : false,
    "view_count" : 41,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744828712,
    "creation_date" : 1744823623,
    "link" : "https://stackoverflow.com/questions/79577760/transparent-pixels-not-properly-working-on-macos",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140345893,
    "post_id" : 79577760,
    "body" : "Ok thank you! In the end I&#39;ll have a more complicated overlay when the libary is in use. However I found out one can use an Area that is a rectangle covering the screen but the pixel below the mouse being subtracted.",
    "score" : 0,
    "owner" : {
      "account_id" : 22478656,
      "reputation" : 73,
      "user_id" : 18235324,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8e6bf5e71f15aef303329cb818bc08eb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NumericPrime",
      "link" : "https://stackoverflow.com/users/18235324/numericprime"
    },
    "creation_date" : 1744916536,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140345789,
    "post_id" : 79577760,
    "body" : "If you follow that link, the follow that documentationâ€™s link to java.awt.Shape, you will see a list of all known classes which implement Shape.  Among them is <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/geom/Ellipse2D.Float.html\" rel=\"nofollow noreferrer\">Ellipse2D.Float</a> which can represent your oval:  <code>new Ellipse2D.Float(40, 40, 20 20)</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1744914455,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140345687,
    "post_id" : 79577760,
    "body" : "Thanks for your reply! Which shape should I set the window to?",
    "score" : 0,
    "owner" : {
      "account_id" : 22478656,
      "reputation" : 73,
      "user_id" : 18235324,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8e6bf5e71f15aef303329cb818bc08eb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "NumericPrime",
      "link" : "https://stackoverflow.com/users/18235324/numericprime"
    },
    "creation_date" : 1744912008,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140345052,
    "post_id" : 79577760,
    "body" : "I believe you need to call <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Window.html#setShape(java.awt.Shape)\" rel=\"nofollow noreferrer\">setShape</a> on your JWindow.",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1744902347,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}