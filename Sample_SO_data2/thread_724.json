{
  "question" : {
    "question_id" : 79782578,
    "title" : "Spring Boot. Error starting ApplicationContext",
    "body" : "<p>I've faced with the following error while starting my spring boot application:</p>\n<pre><code>Error starting ApplicationContext.\n\norg.springframework.beans.factory.UnsatisfiedDependencyException:Error creating bean with name 'feedController'\nUnsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'productService'\nUnsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'productRepository' defined in team.capybara.backend.spring.controllers.repositories.ProductRepository defined in @EnableJpaRepositories declared on Main: Cannot resolve reference to bean 'jpaSharedEM_entityManagerFactory' while setting bean property 'entityManager'\n</code></pre>\n<p>I've read a lot of articles and found information that I should manually configure 'entityManagerFactory' and it helped me with my initial problem:</p>\n<pre><code>Error starting ApplicationContext.\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: jakarta/persistence/PersistenceUnitTransactionType\n</code></pre>\n<p>But I have to say that my Entity classes are written incorrectly. Apparently, there are problems in oneToMany and other connections.</p>\n<p>So, that is my entity class</p>\n<pre><code>@Entity\n@Table(name=&quot;Products&quot;)\npublic class Product {\n\n    @Id\n    @Column(name=&quot;id&quot;, nullable = false, unique = true)\n    private String id;\n\n    @OneToOne\n    @JoinColumn(name = &quot;product_type_id&quot;)\n    private ProductType productType;\n\n    @Column(name=&quot;shelf_life&quot;, nullable = false)\n    private Date shelfLife; //last day of life\n\n    @Column(name=&quot;price&quot;, nullable = false)\n    private int price; // final price of product\n\n    @Column(name=&quot;discount&quot;, nullable = false)\n    private int discount; // discount amount in monetary units\n\n    @Column(name=&quot;is_sold&quot;, nullable = false)\n    private int isSold; //0 - false; 1 - true\n\n    public Product() {\n\n    }\n\n    public Product(ProductType productType,Date shelfLife,int price,int discount,int isSold){\n        this.id = (UUID.randomUUID()).toString();\n        this.productType = productType;\n        this.shelfLife = shelfLife;\n        this.price = price;\n        this.discount = discount;\n        this.isSold = isSold;\n    }\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.5.6&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;team.capybara&lt;/groupId&gt;\n    &lt;artifactId&gt;vSrok&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;vSrok&lt;/name&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;25&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n            &lt;version&gt;7.1.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;33.5.0-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Main class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableAutoConfiguration\n@ComponentScan(basePackages = {&quot;team.capybara.backend.spring&quot;})\n@EntityScan(basePackages = {&quot;team.capybara.backend.hibernate&quot;})\n@EnableJpaRepositories(basePackages = {&quot;team.capybara.backend.spring.controllers.repositories&quot;})\npublic class Main {\n    static void main(String[] args) {\n        SpringApplication.run(Main.class, args);\n    }\n}\n</code></pre>\n<p>Configuration class, which helped me make an advance</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class AppConfig {\n    @Bean(name=&quot;entityManagerFactory&quot;)\n    public LocalSessionFactoryBean sessionFactory() {\n        LocalSessionFactoryBean sessionFactory = new LocalSessionFactoryBean();\n\n        return sessionFactory;\n    }\n}\n</code></pre>\n<p>Just repository:</p>\n<pre><code>@Repository\npublic interface ProductRepository extends JpaRepository&lt;Product, String&gt; {\n}\n</code></pre>\n<p>EDITED\nMy config now:</p>\n<pre><code>@Configuration\npublic class AppConfig {\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {\n        LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n        factoryBean.setDataSource(dataSource);\n        factoryBean.setPersistenceProvider(new HibernatePersistenceProvider());\n        factoryBean.setPackagesToScan(&quot;team.capybara.backend.hibernate&quot;);\n        factoryBean.setPersistenceUnitName(&quot;capybaraHibernate&quot;);\n\n        return factoryBean;\n    }\n\n    @Bean\n    public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n\n    @Bean\n    public EntityManager entityManager(EntityManagerFactory entityManagerFactory) {\n        return entityManagerFactory.createEntityManager();\n    }\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>Error starting ApplicationContext.\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [team/capybara/backend/spring/AppConfig.class]: jakarta/persistence/PersistenceUnitTransactionType\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "hibernate", "spring-mvc", "spring-data-jpa" ],
    "owner" : {
      "account_id" : 43584341,
      "reputation" : 31,
      "user_id" : 31313767,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4bf6132f49e51fe47b29bcd630403eb2?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "pityamskoy",
      "link" : "https://stackoverflow.com/users/31313767/pityamskoy"
    },
    "is_answered" : false,
    "view_count" : 160,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1759647479,
    "creation_date" : 1759597362,
    "link" : "https://stackoverflow.com/questions/79782578/spring-boot-error-starting-applicationcontext",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140778863,
    "post_id" : 79782578,
    "body" : "Remove all the excessive configuration (the added <code>@Configuration</code> classes, and remove all annotations except <code>@SpringBootApplication</code>), remove the <code>hibernate-core</code> and <code>spring-boot-autoconfigure</code> dependencies. Restart. You are working against the framework instead of working with it.",
    "score" : 1,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1759730795,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140778168,
    "post_id" : 79782578,
    "body" : "What is the reason not to have all the entities/repositories in the same package with the <code>Main.class</code>? In this case you don&#39;t need the <code>AppConfig</code> and above the Main you will need only <code>@SpringBootApplication</code>.   And also you dont need to add <code>hibernate-core</code> dependency explicitly - it is included into <code>spring-boot-starter-data-jpa</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 18586978,
      "reputation" : 3850,
      "user_id" : 15000097,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yFl4M.jpg?s=256",
      "display_name" : "Georgii Lvov",
      "link" : "https://stackoverflow.com/users/15000097/georgii-lvov"
    },
    "creation_date" : 1759678200,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}