{
  "question" : {
    "question_id" : 79790526,
    "title" : "What is correct way to hide part of spring data repository methods",
    "body" : "<p>for example I have UserRepository and I want to make some methods of it private. What is correct way to do this?</p>\n<pre><code>@Repository\npublic interface TestRepository extends JpaRepository&lt;User, Long&gt; {\n    \n    @Query(&quot;From User u join userGroups g Where g in (:userGroups)&quot;)\n    Set&lt;User&gt; privateFindUsersBelongsToUserGroup(Collection&lt;UserGroup&gt; userGroups);\n    \n    default Set&lt;User&gt; findUsersBelongsToUserGroup(Collection&lt;UserGroup&gt; userGroups) {\n        return userGroups.isEmpty() ? Collections.emptySet() : privateFindUsersBelongsToUserGroup(userGroups);\n    }\n    \n}\n</code></pre>\n<p>I don't want check my collection for emptiness in service layer logic, but I don't want to expose privateFindUsersBelongsToUserGroup method. What is best practices for this case?</p>\n",
    "tags" : [ "java", "spring", "spring-data-jpa" ],
    "owner" : {
      "account_id" : 2991960,
      "reputation" : 55,
      "user_id" : 2539361,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f65c0014d9cf1dff122b086b18a97bfb?s=256&d=identicon&r=PG",
      "display_name" : "Andrei",
      "link" : "https://stackoverflow.com/users/2539361/andrei"
    },
    "is_answered" : true,
    "view_count" : 114,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1760553471,
    "creation_date" : 1760468299,
    "link" : "https://stackoverflow.com/questions/79790526/what-is-correct-way-to-hide-part-of-spring-data-repository-methods",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79790562,
    "question_id" : 79790526,
    "body" : "<p>You cannot hide individual Spring Data repository methods, all interface methods are public by design. Spring Data creates a proxy that implements your repository interface. The methods it implements must be part of that public contract. A method in an interface is effectively public for consumers (and Spring Data won’t create a query for a private interface method anyway). So annotating a private method with <code>@Query</code> won’t be picked up.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14549481,
      "reputation" : 61,
      "user_id" : 10508824,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/I46At.png?s=256",
      "display_name" : "Anck8",
      "link" : "https://stackoverflow.com/users/10508824/anck8"
    },
    "creation_date" : 1760470731,
    "last_activity_date" : 1760470731,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79791321,
    "question_id" : 79790526,
    "body" : "<p>Usually in Spring Data repository all methods are exposed as public. Methods cant be hidden. But if you wish to hide the internal logic, you are try below work arounds:</p>\n<p>1. You can move sensitive logic to service layer and keep the dao layer clean</p>\n<pre><code>\n@Service\npublic class SampleService{\n\n@Autowired\nprivate SampleRepo sampleRepo;\n\npublic void sampleProcess(){\n    // keep you internal logic here before calling DAO layer\n}\n}\n\n</code></pre>\n<p>2. A custom interface can be created and that will be implemented by a class which will hold the sensitive logic. Now custom interface can be extended by your actual repository interface where all your public methods can be implemented</p>\n<pre><code>\npublic interface SamplerepoCustom{\n    void sampleInternalProcess();\n}\n    \npublic interface SamplerepoImpl implements SamplerepoCustom{\n    public void sampleInternalProcess(){\n        // keep you internal logic here\n    };\n}\n\npublic interface SampleRepo extends JpaRepository&lt;Item,Long&gt;, SamplerepoCustom{\n    //keep your public methods here\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 44319639,
      "reputation" : 32,
      "user_id" : 31692030,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6e0828ef5d5b73747b3ad3e528290382?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sathya Priya",
      "link" : "https://stackoverflow.com/users/31692030/sathya-priya"
    },
    "creation_date" : 1760540903,
    "last_activity_date" : 1760540903,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140797243,
    "post_id" : 79790526,
    "body" : "it&#39;s make code cleaner, not to check it every time for emptiness. It&#39;s works even if I pass empty collection, but then redundant query executed",
    "score" : 0,
    "owner" : {
      "account_id" : 2991960,
      "reputation" : 55,
      "user_id" : 2539361,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f65c0014d9cf1dff122b086b18a97bfb?s=256&d=identicon&r=PG",
      "display_name" : "Andrei",
      "link" : "https://stackoverflow.com/users/2539361/andrei"
    },
    "creation_date" : 1760535360,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140796519,
    "post_id" : 79790526,
    "body" : "The correct place for such business logic is exactly the service layer. What exactly worries you in such approach?",
    "score" : 0,
    "owner" : {
      "account_id" : 23783500,
      "reputation" : 7109,
      "user_id" : 17795888,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Xay1V.jpg?s=256",
      "display_name" : "Chaosfire",
      "link" : "https://stackoverflow.com/users/17795888/chaosfire"
    },
    "creation_date" : 1760515905,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140795707,
    "post_id" : 79790526,
    "body" : "<i>I don&#39;t want check my collection for emptiness in service layer...</i>  Why not?",
    "score" : 1,
    "owner" : {
      "account_id" : 8909811,
      "reputation" : 2861,
      "user_id" : 6650475,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fe85994d05ad7aaaa1c47d638b37bc45?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrew S",
      "link" : "https://stackoverflow.com/users/6650475/andrew-s"
    },
    "creation_date" : 1760471271,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79790562" : [ {
      "comment_id" : 140795869,
      "post_id" : 79790562,
      "body" : "yes, I know that. But maybe there are some techniques for such situations? Is my example &quot;code with smell&quot; or is it okay?",
      "score" : 0,
      "owner" : {
        "account_id" : 2991960,
        "reputation" : 55,
        "user_id" : 2539361,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f65c0014d9cf1dff122b086b18a97bfb?s=256&d=identicon&r=PG",
        "display_name" : "Andrei",
        "link" : "https://stackoverflow.com/users/2539361/andrei"
      },
      "creation_date" : 1760475857,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}