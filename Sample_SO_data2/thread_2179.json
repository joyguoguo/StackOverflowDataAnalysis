{
  "question" : {
    "question_id" : 79643001,
    "title" : "Failed test with loading yaml file",
    "body" : "<p>I have <code>ConfigLoader</code> (to load yaml file, not using Spring):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConfigLoader {\n\n    public static YamlConfig loadYamlConfig(String resourceName) {\n        Yaml yaml = new Yaml();\n        try (InputStream in = ConfigLoader.class.getClassLoader().getResourceAsStream(resourceName)) {\n            System.out.println(&quot;Resource '&quot; + resourceName + &quot;' stream = &quot; + in);\n            if (in == null) {\n                throw new RuntimeException(&quot;File not found &quot; + resourceName);\n            }\n            return yaml.loadAs(in, YamlConfig.class);\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;Unable to load config&quot;, e);\n        }\n    }\n\n    public static YamlConfig loadYamlConfig() {\n        return loadYamlConfig(&quot;application.yaml&quot;);\n    }\n}\n</code></pre>\n<p>And I wrote tests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConfigLoaderTest {\n\n    @Test\n    void testLoadExistingYaml() {\n        YamlConfig config = ConfigLoader.loadYamlConfig(&quot;test-application.yaml&quot;);\n        assertNotNull(config, &quot;Config must be loaded&quot;);\n    }\n\n    @Test\n    void testMissingFile() {\n        RuntimeException ex = assertThrows(RuntimeException.class, () -&gt; {\n            ConfigLoader.loadYamlConfig(&quot;nonexistent.yaml&quot;);\n        });\n        assertTrue(ex.getMessage().contains(&quot;File not found&quot;));\n    }\n\n    @Test\n    void testCorruptedYamlFile() {\n        RuntimeException ex = assertThrows(RuntimeException.class, () -&gt; {\n            ConfigLoader.loadYamlConfig(&quot;corrupted.yaml&quot;);\n        });\n        assertTrue(ex.getMessage().contains(&quot;Unable to load config&quot;));\n    }\n}\n\n</code></pre>\n<p>Test <code>void testMissingFile()</code> failed. I saw at logs this: <code>Resource 'nonexistent.yaml' stream = null</code>, so stream = null and because <code>if (in == null)</code> exception must be thrown? But test failed and no exception is thrown. What did I miss?</p>\n",
    "tags" : [ "java", "unit-testing", "yaml" ],
    "owner" : {
      "account_id" : 17574624,
      "reputation" : 115,
      "user_id" : 12749672,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e6752d7efd88bb7b9c6bd4cb59e1ded0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "dogyears",
      "link" : "https://stackoverflow.com/users/12749672/dogyears"
    },
    "is_answered" : true,
    "view_count" : 62,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1748532259,
    "creation_date" : 1748466162,
    "link" : "https://stackoverflow.com/questions/79643001/failed-test-with-loading-yaml-file",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79643517,
    "question_id" : 79643001,
    "body" : "<p>I am assuming that you are using <strong>Snakeyaml</strong>.</p>\n<p>Test fails because exception is thrown with message &quot;Unable to load config&quot;. You will have to change how exception is thrown or change your test as:</p>\n<p><code>assertTrue(ex.getCause().getMessage().contains(&quot;File not found&quot;));</code></p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 39994530,
      "reputation" : 79,
      "user_id" : 29556869,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/269e8c4932c4183f4b672023edeed8d0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Reet",
      "link" : "https://stackoverflow.com/users/29556869/reet"
    },
    "creation_date" : 1748505563,
    "last_activity_date" : 1748517072,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140468667,
    "post_id" : 79643001,
    "body" : "@Robert generally you&#39;re right, but in this case it doesn&#39;t matter at all what yaml library the OP is using; it&#39;s all about the exception the OP&#39;s own code throws and how they catch it. It would have been better if yaml had not been mentioned at all in the question.",
    "score" : 0,
    "owner" : {
      "account_id" : 19118721,
      "reputation" : 12499,
      "user_id" : 13963086,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9df2c3c4c87d8050b8fd6a59c88c7133?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "k314159",
      "link" : "https://stackoverflow.com/users/13963086/k314159"
    },
    "creation_date" : 1748507174,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140467687,
    "post_id" : 79643001,
    "body" : "Java has no native Yaml support and you have not mentioned which library you use. I would recommend to edit the question and include this important detail.",
    "score" : 4,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43469,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1748470023,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}