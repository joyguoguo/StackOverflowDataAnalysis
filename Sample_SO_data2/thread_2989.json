{
  "question" : {
    "question_id" : 79582915,
    "title" : "JAVA_HOME is set to an invalid directory error in flutter",
    "body" : "<p>I have already tried everything other users did to solve the problem, but the error still shows up when I run the app:\n<code>ERROR: JAVA_HOME is set to an invalid directory: /usr/lib/jvm/java-17-openjdk-amd64/</code>\nhowever when I use the terminal on vs code this happens\n<code>echo $JAVA_HOME</code>\n<code>/Library/Java/JavaVirtualMachines/jdk-24.jdk/Contents/Home</code>\nWhich is the right path and I don't know what's wrong.\nI've already tried editing the <code>.zshrc</code> and the <code>.zprofile</code> files on my macos.</p>\n",
    "tags" : [ "java", "flutter", "gradle" ],
    "owner" : {
      "account_id" : 41501672,
      "reputation" : 21,
      "user_id" : 30319037,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f2b094105a86094f5b148adc4fa7f9f8?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "H&#233;ctor Crespo",
      "link" : "https://stackoverflow.com/users/30319037/h%c3%a9ctor-crespo"
    },
    "is_answered" : true,
    "view_count" : 288,
    "answer_count" : 2,
    "score" : 2,
    "last_activity_date" : 1745131500,
    "creation_date" : 1745106335,
    "link" : "https://stackoverflow.com/questions/79582915/java-home-is-set-to-an-invalid-directory-error-in-flutter",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79583062,
    "question_id" : 79582915,
    "body" : "<p>when Flutter says your JAVA_HOME is wrong there are two places where flutter check for java files</p>\n<ol>\n<li>flutter config --jdk-dir  (error occur when point to old linux style)</li>\n<li>and The JDK bundled with Android Studio (error may occur due version problem)</li>\n</ol>\n<p>try the following command</p>\n<pre><code># 1. Set JAVA_HOME to Java 23 (adjust if your exact version differs)\nexport JAVA_HOME=$(/usr/libexec/java_home -v 23)\n\n# 2. Tell Flutter to use this JDK\nflutter config --jdk-dir &quot;$JAVA_HOME&quot;\n#confirm by running echo $JAVA_HOME\n\n# 3. Confirm\nflutter doctor -v   # Look for: Java binary at: ...jdk-23...\n</code></pre>\n<p>also note\nGradle (the Android build tool) doesn’t support JDK 24 yet.\nThe current Gradle 8 (current v8.10) series will only run on Java 8 ‑ 23; Java 24+ throws an error check the <a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">GradleDocumentation</a> \nFor a hassle‑free Flutter/Android build today, stay on an LTS JDK such as 23.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 23615250,
      "reputation" : 513,
      "user_id" : 17649464,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/6EewnSBM.jpg?s=256",
      "display_name" : "Silikazi",
      "link" : "https://stackoverflow.com/users/17649464/silikazi"
    },
    "creation_date" : 1745127631,
    "last_activity_date" : 1745129473,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79583099,
    "question_id" : 79582915,
    "body" : "<p>Solution for macOS:</p>\n<p><strong>First, verify your current Java installation</strong>:</p>\n<p><code>/usr/libexec/java_home -V</code></p>\n<p><strong>Set JAVA_HOME to JDK 23 (or 17 for maximum compatibility)</strong>:</p>\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home -v 17)  # or -v 23 if you have it</code></p>\n<p><strong>Make this permanent by adding to your shell config</strong>:</p>\n<p><code>export JAVA_HOME=$(/usr/libexec/java_home -v 17)</code></p>\n<p><strong>Tell Flutter to use this JDK</strong>:</p>\n<p>f<code>lutter config --jdk-dir &quot;$JAVA_HOME&quot;</code></p>\n<p><strong>Verify the settings</strong>:</p>\n<p><code>echo $JAVA_HOME</code></p>\n<p><code>flutter doctor -v</code></p>\n<p>If problems persist:</p>\n<p>Check where Flutter thinks your JDK is:</p>\n<p><code>flutter config --jdk-dir</code></p>\n<p>Manually remove any incorrect config:</p>\n<p><code>flutter config --clear-jdk-dir</code></p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26961521,
      "reputation" : 63,
      "user_id" : 20529125,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/ykeYjuv0.png?s=256",
      "display_name" : "arslan",
      "link" : "https://stackoverflow.com/users/20529125/arslan"
    },
    "creation_date" : 1745131500,
    "last_activity_date" : 1745131500,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140351603,
    "post_id" : 79582915,
    "body" : "Use : /Library/Java/JavaVirtualMachines/jdk-24.jdk/Contents/Home",
    "score" : 0,
    "owner" : {
      "account_id" : 1247323,
      "reputation" : 1948,
      "user_id" : 1319938,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://i.sstatic.net/Og98Q.jpg?s=256",
      "display_name" : "mah454",
      "link" : "https://stackoverflow.com/users/1319938/mah454"
    },
    "creation_date" : 1745121682,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79583062" : [ {
      "comment_id" : 140741025,
      "post_id" : 79583062,
      "body" : "This steps works perfect! In my case I was using java 17 :p",
      "score" : 0,
      "owner" : {
        "account_id" : 25656166,
        "reputation" : 11,
        "user_id" : 19422535,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/YhlIV.jpg?s=256",
        "display_name" : "emmaprofemx",
        "link" : "https://stackoverflow.com/users/19422535/emmaprofemx"
      },
      "creation_date" : 1758071548,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140359830,
      "post_id" : 79583062,
      "body" : "this solved my problem, thanks",
      "score" : 0,
      "owner" : {
        "account_id" : 41501672,
        "reputation" : 21,
        "user_id" : 30319037,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/f2b094105a86094f5b148adc4fa7f9f8?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "H&#233;ctor Crespo",
        "link" : "https://stackoverflow.com/users/30319037/h%c3%a9ctor-crespo"
      },
      "creation_date" : 1745373321,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}