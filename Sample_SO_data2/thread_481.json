{
  "question" : {
    "question_id" : 79805757,
    "title" : "How to keep javax.annotation.* classes when adding com.microsoft.graph:microsoft-graph dependency to the project?",
    "body" : "<p>I have a legacy multimodule maven project with many dependencies, written in Java 11. I would like to use microsoft graph sdk. After I have added <strong>microsoft-graph</strong> dependency, some of the old classes are not compiling.\nI have narrowed the problem down to a simple project which looks like:</p>\n<p>pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;\n            http://maven.apache.org/POM/4.0.0\n            https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example.azure&lt;/groupId&gt;\n    &lt;artifactId&gt;azure-msgraph-demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;-- one of many old dependencies which are in the legacy project --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\n            &lt;version&gt;2.35&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt; \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.12.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n                    &lt;release&gt;11&lt;/release&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Main.java</p>\n<pre><code>public class Main\n{\n    public static void main(String[] args) {\n        Main main = new Main();\n        ResourceTest test = new ResourceTest();\n        main.run();\n    }\n\n    private void run() {\n        System.out.println(&quot;ok&quot;); \n    }\n}\n</code></pre>\n<p>ResourceTest.java</p>\n<pre><code>import javax.annotation.PostConstruct;\npublic class ResourceTest {\n\n    @PostConstruct\n    protected void load() {\n    }\n}\n</code></pre>\n<p>When I run the Main class I get the output:</p>\n<pre><code>ok\n</code></pre>\n<p>When I try to add the dependency to microsoft-graph</p>\n<pre><code>...\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.graph&lt;/groupId&gt;\n            &lt;artifactId&gt;microsoft-graph&lt;/artifactId&gt;\n            &lt;version&gt;6.50.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\n            &lt;version&gt;2.35&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    ...\n\n</code></pre>\n<p>The project does not compile any longer. I am getting an error:</p>\n<pre><code>java: package javax.annotation does not exist\n</code></pre>\n<p>How adding one dependency can remove classes which are already present in another one? How to fix this setup without changing implementation of the ResourceTest.java?</p>\n",
    "tags" : [ "java", "maven", "microsoft-graph-sdks" ],
    "owner" : {
      "account_id" : 306540,
      "reputation" : 3196,
      "user_id" : 2695990,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/EVYyd.jpg?s=256",
      "display_name" : "fascynacja",
      "link" : "https://stackoverflow.com/users/2695990/fascynacja"
    },
    "is_answered" : false,
    "view_count" : 84,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1761914976,
    "creation_date" : 1761912305,
    "link" : "https://stackoverflow.com/questions/79805757/how-to-keep-javax-annotation-classes-when-adding-com-microsoft-graphmicrosoft",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79805793,
    "question_id" : 79805757,
    "body" : "<p>Because going from JakartaEE 8 to JakartaEE 9, the package name in jakarta dependencies such as jakarta-annotations-api changed from &quot;javax&quot; to &quot;jakarta&quot;. Many millions have been spent on that upgrade chore, I'd wager. If you check the microsoft-graph dependency, you will find it includes that dependency as a runtime dependency.</p>\n<p><a href=\"https://mvnrepository.com/artifact/com.microsoft.graph/microsoft-graph/6.55.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.graph/microsoft-graph/6.55.0</a></p>\n<p>Change your code to</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.annotation.PostConstruct;\n</code></pre>\n<p>it should work.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 187094,
      "reputation" : 5301,
      "user_id" : 424903,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/8oHZF.png?s=256",
      "display_name" : "Gimby",
      "link" : "https://stackoverflow.com/users/424903/gimby"
    },
    "creation_date" : 1761914558,
    "last_activity_date" : 1761914558,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79805793" : [ {
      "comment_id" : 140829258,
      "post_id" : 79805793,
      "body" : "maven tree indeed shows 2 different versions of jakarta annotations:    +- (jakarta.annotation:jakarta.annotation-api:jar:1.3.5:compile - omitted for conflict with 2.1.1)  (1.3.5 from jersey-common,  2.1.1 from microsoft-graph )  yet still I am not sure how to fix the issue",
      "score" : 0,
      "owner" : {
        "account_id" : 306540,
        "reputation" : 3196,
        "user_id" : 2695990,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/EVYyd.jpg?s=256",
        "display_name" : "fascynacja",
        "link" : "https://stackoverflow.com/users/2695990/fascynacja"
      },
      "creation_date" : 1761915421,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140829249,
      "post_id" : 79805793,
      "body" : "As you see in my simple project which presents the problem,  there is at least one dependency which creates this behaviour : jersey-common. Befor adding msgraph project compiles. After adding msgraph it does not compile.",
      "score" : 0,
      "owner" : {
        "account_id" : 306540,
        "reputation" : 3196,
        "user_id" : 2695990,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/EVYyd.jpg?s=256",
        "display_name" : "fascynacja",
        "link" : "https://stackoverflow.com/users/2695990/fascynacja"
      },
      "creation_date" : 1761915121,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140829240,
      "post_id" : 79805793,
      "body" : "@fascynacja That would be the gist of it; most dependencies with sane developers behind it support both the javax and jakarta packages by having multiple artifacts available, or by using the Maven classifier feature but microsoft-graph seems to have neither. Did you upgrade other things as well? Perhaps it isn&#39;t specifically microsoft-graph but another dependency that is pushing in a version of jakarta-annotations-api that is too new. Run a <code>mvn dependency:tree -Dverbose=true</code> to see all instances where it is pulled in.",
      "score" : 1,
      "owner" : {
        "account_id" : 187094,
        "reputation" : 5301,
        "user_id" : 424903,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/8oHZF.png?s=256",
        "display_name" : "Gimby",
        "link" : "https://stackoverflow.com/users/424903/gimby"
      },
      "creation_date" : 1761915021,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140829231,
      "post_id" : 79805793,
      "body" : "At this point I cannot change this code. I cannot switch to JakartaEE 9 (in the real project there are too many dependencies, also old spring, this migration would trigger avalanche of changes). So this means that microsoft-graph is based on JakartaEE 9 only and there is no workaround to keep the code as it is?",
      "score" : 0,
      "owner" : {
        "account_id" : 306540,
        "reputation" : 3196,
        "user_id" : 2695990,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/EVYyd.jpg?s=256",
        "display_name" : "fascynacja",
        "link" : "https://stackoverflow.com/users/2695990/fascynacja"
      },
      "creation_date" : 1761914702,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}