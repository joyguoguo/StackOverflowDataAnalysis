{
  "question" : {
    "question_id" : 79805414,
    "title" : "Best way to write an Oracle Procedure using Spring Data Jpa",
    "body" : "<p>I am new to JPA and learning it. Now I have an Oracle procedure in system, which now needs to be made DB Agnostic, that can run on Postgres. For that I want to write the same functionality of procedure using Spring Boot JPA. I need some guidance on how to proceed on that. I am not asking for any code to be written, but some references and guidelines which I can follow and learn on that. Please advice.</p>\n",
    "tags" : [ "java", "postgresql", "oracle-database", "spring-data-jpa" ],
    "owner" : {
      "account_id" : 2583037,
      "reputation" : 503,
      "user_id" : 2239301,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/1aa7bb144d696d77816073596522b5c7?s=256&d=identicon&r=PG",
      "display_name" : "Surodip",
      "link" : "https://stackoverflow.com/users/2239301/surodip"
    },
    "is_answered" : true,
    "view_count" : 197,
    "answer_count" : 7,
    "score" : 0,
    "last_activity_date" : 1761922485,
    "creation_date" : 1761886579,
    "link" : "https://stackoverflow.com/questions/79805414/best-way-to-write-an-oracle-procedure-using-spring-data-jpa",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79805425,
    "question_id" : 79805414,
    "body" : "<p>I don't think you will find it easy to make a procedure that is portable between PostgreSQL and Oracle. The procedure languages are similar, but there are some basic differences.</p>\n<p><a href=\"https://www.postgresql.org/docs/current/plpgsql-porting.html\" rel=\"nofollow noreferrer\">https://www.postgresql.org/docs/current/plpgsql-porting.html</a> documents some of these differences. The biggest blockers to writing portable procedures in my opinion would be:</p>\n<ul>\n<li><p>Oracle uses packages, but PostgreSQL doesn't. You can organize procedures in PostgreSQL using schemas.</p>\n</li>\n<li><p>A PostgreSQL procedure body must be delimited with <code>$$</code>.</p>\n</li>\n<li><p>Some data type names and built-in functions have different names in the two systems.</p>\n</li>\n</ul>\n<p>See the manual page I linked to for more compatibility issues, and several examples of procedures translated from Oracle to PostgreSQL.</p>\n<p>In general, it's hard to write portable SQL between different brands, nor is it a good goal. If you were able to write generic SQL that works on multiple brands, you would have to limit your usage to only the features all brands had in common, which is very little. You would have to refrain from using any brand-specific syntax or functions, which means you wouldn't be able to take advantage of any of the brands fully.</p>\n<p>I worked on a database framework for PHP years ago, in which I supported Oracle, DB2, PostgreSQL, MySQL, SQLite, and Microsoft. There was no way to write SQL to be portable across all those brands, or even any two of the brands. The code was designed to use the Adapter Pattern, and any brand-specific features were implemented in the respective adapter class.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10929,
      "reputation" : 567479,
      "user_id" : 20860,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/iavmP.jpg?s=256",
      "display_name" : "Bill Karwin",
      "link" : "https://stackoverflow.com/users/20860/bill-karwin"
    },
    "creation_date" : 1761888193,
    "last_activity_date" : 1761888193,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805443,
    "question_id" : 79805414,
    "body" : "<p>Thanks Bill. I have gone through your link and it will definitely help me in working with PostgreSQL. But here the scenario is to model and mimic the functionality of oracle procedure in Spring Data JPA do that it will not be hardly coupled with DB. I just connect to respective DB and process data using JPA entity models. So is it a good approach to write SQL queries in JPA/Hibernate Native queries and execute or any other way to model the procedure functionality in JPA framework.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2583037,
      "reputation" : 503,
      "user_id" : 2239301,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/1aa7bb144d696d77816073596522b5c7?s=256&d=identicon&r=PG",
      "display_name" : "Surodip",
      "link" : "https://stackoverflow.com/users/2239301/surodip"
    },
    "creation_date" : 1761890512,
    "last_activity_date" : 1761890512,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805467,
    "question_id" : 79805414,
    "body" : "<p>Well, you want to replace an Oracle stored procedure with Spring Boot plus JPA code that works on any database. You can simply do it by following these steps to convert Oracle procedure into Spring Boot JPA logic:</p>\n<p>Step 1: Understand what the Procedure does</p>\n<p>Step 2: Decide where the Logic belongs in your spring boot layers</p>\n<p>Step 3: Translate Oracle SQL Features to JPA or JPQL</p>\n<p>Step 4: Use Transaction Correctly</p>\n<p>Step 5: Write Repository Queries</p>\n<p>Step 6: Handle DB Differences (Oracle â€“ Postgres)</p>\n<p>Step 7: Testing Across Databases</p>\n<p>Step 8: Keep it Maintainable</p>\n<p>Hope this will help you.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 44264308,
      "reputation" : 1,
      "user_id" : 31663348,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4835d2546bfd7699ae57944a8c2aa28c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Mamta Bankoti",
      "link" : "https://stackoverflow.com/users/31663348/mamta-bankoti"
    },
    "creation_date" : 1761892103,
    "last_activity_date" : 1761892103,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805561,
    "question_id" : 79805414,
    "body" : "<p>Thanks Mamta. Can you please give reference of Step 3 &amp; 5</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2583037,
      "reputation" : 503,
      "user_id" : 2239301,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/1aa7bb144d696d77816073596522b5c7?s=256&d=identicon&r=PG",
      "display_name" : "Surodip",
      "link" : "https://stackoverflow.com/users/2239301/surodip"
    },
    "creation_date" : 1761901341,
    "last_activity_date" : 1761901341,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805762,
    "question_id" : 79805414,
    "body" : "<p>Steps 3 &amp; 5 is where you write this code :) Or try to find code that does it for you / ChatGPT / hire expensive consultants. There's no automatic translator between them</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 17972905,
      "reputation" : 10131,
      "user_id" : 13061224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/GyOMS.jpg?s=256",
      "display_name" : "siggemannen",
      "link" : "https://stackoverflow.com/users/13061224/siggemannen"
    },
    "creation_date" : 1761912711,
    "last_activity_date" : 1761912711,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805800,
    "question_id" : 79805414,
    "body" : "<p>I am not asking for code. I asked for learning reference which I can follow.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2583037,
      "reputation" : 503,
      "user_id" : 2239301,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/1aa7bb144d696d77816073596522b5c7?s=256&d=identicon&r=PG",
      "display_name" : "Surodip",
      "link" : "https://stackoverflow.com/users/2239301/surodip"
    },
    "creation_date" : 1761914774,
    "last_activity_date" : 1761914774,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79805911,
    "question_id" : 79805414,
    "body" : "<p>You could consider the analogy of being asked to translate a popular book of poetry from one spoken language to another. How would you do this?</p>\n<p>You'd have to learn the language the book is written in, well enough to understand the use of language and imagery. You'd have to understand why readers who speak that language find it beautiful as poetry.</p>\n<p>Then you'd have to learn the language you need to translate the book into, well enough to make it beautiful to readers who speak that language.</p>\n<p>Then you would be ready to translate each poem in the book. Each poem would be a new challenge, because they are all different.</p>\n<p>Is there a learning reference you can follow to do the translation? I don't think so. You need to spend time learning both languages deeply, then with fluency you will be able to write poetry in the second language that conveys the same meaning as the first.</p>\n<p>This will take a lot of time, for both study and practice.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10929,
      "reputation" : 567479,
      "user_id" : 20860,
      "user_type" : "registered",
      "accept_rate" : 92,
      "profile_image" : "https://i.sstatic.net/iavmP.jpg?s=256",
      "display_name" : "Bill Karwin",
      "link" : "https://stackoverflow.com/users/20860/bill-karwin"
    },
    "creation_date" : 1761922485,
    "last_activity_date" : 1761922485,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}