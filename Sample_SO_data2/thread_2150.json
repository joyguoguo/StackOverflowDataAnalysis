{
  "question" : {
    "question_id" : 79645383,
    "title" : "How to delete text in powershell command line with java?",
    "body" : "<p>On the console window I would like to have a single monitoring line, which is\nconstantly updated/overprinted. After each output the remaining space of the line\nmust be erased, as the previous output possibly had more characters than the\ncurrent one.\nFirst I tried to use the corresponding ANSI control code. When this failed, I\ntried to emulate Ctrl-End with the Robot class, but to no avail. Any idea?</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\n\npublic class Ctrl_End {\n\n  public static void main(String[] args) {\n    char BS= 8, ESC= 27;\n    String ERASE_EOL= &quot;[0K&quot;; // ANSI erase till end of line.\n    System.out.println(&quot;ABC&quot;+BS+BS+&quot;DE&quot;); // Overprints\n    System.out.println(&quot;ABC&quot;+BS+BS+ESC+ERASE_EOL);\n    System.out.println();\n\n    Robot rob= null;\n    try {\n      rob= new Robot();\n    }\n    catch(AWTException ex) {\n      System.out.println(ex);\n    }\n    System.out.print(&quot;First ouput, longer than the following&quot;);\n    rob.keyPress(KeyEvent.VK_CONTROL);\n    rob.keyPress(KeyEvent.VK_END);\n    rob.keyRelease(KeyEvent.VK_END);\n    rob.keyRelease(KeyEvent.VK_CONTROL);\n    System.out.print(&quot;\\rSecond ouput&quot;);\n}\n</code></pre>\n<p><br><br>\n<strong>EDIT:</strong><br>\nWhat I currently receive as output is:</p>\n<pre><code>ADE\nA‚Üê[0K\n\nSecond ouput longer than the following\n</code></pre>\n<p>The first line is ok (Backspace test).<br>\nThe second line shows that the ESC character is not properly recognized, but displayed as an arrow, hence it is no wonder that the remainder of the control string is not interpreted as intended.<br>\nThe last line shows that print() and \\r work, but the line should read <em>Second ouput</em> only; <em>longer than the following</em> stems from the previous print(...) and needs to be deleted.</p>\n<p>By the way: Whether using Microsoft's older command window (cmd.exe) or PowerShell, the output is the same. I would, however, prefer a solution on PowerShell.</p>\n",
    "tags" : [ "java", "console" ],
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "is_answered" : true,
    "view_count" : 93,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1748622643,
    "creation_date" : 1748604799,
    "link" : "https://stackoverflow.com/questions/79645383/how-to-delete-text-in-powershell-command-line-with-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79645809,
    "question_id" : 79645383,
    "body" : "<p>I found in the net that processing of ANSI control sequences is not necessarily enabled by default on Windows consoles. (I am running Win10.) I checked my registry and found that the required key didn't exist:</p>\n<p>[HKEY_CURRENT_USER\\Console]&quot;VirtualTerminalLevel&quot;=dword:00000001</p>\n<p>After defining the key and starting a new PowerShell everything was fine.</p>\n<p>The final demo code now looks as under</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\n\npublic class Ctrl_End {\n\n  public static void main(String[] args) {\n    char BS= 8, ESC= 27;\n    String ERASE_EOL= &quot;[0K&quot;; // ANSI erase till end of line.\n    System.out.println(&quot;ABC&quot;+BS+BS+&quot;D&quot;); // Overprints\n    System.out.println(&quot;ABC&quot;+BS+BS+ESC+ERASE_EOL);\n    System.out.println();\n    System.out.print(&quot;First output, longer than the following&quot;);\n    waitSomeTime(2000);\n    System.out.print(&quot;\\rSecond output&quot;+ESC+ERASE_EOL);\n    waitSomeTime(2000);\n    System.out.print(&quot;\\rThird output&quot;+ESC+ERASE_EOL);\n  }\n\n\n  public static void waitSomeTime(int ms) {\n    try {\n      Thread.sleep(ms);\n    }\n    catch (InterruptedException e) {\n      System.out.println(e.toString());\n    }\n  }\n\n}\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "creation_date" : 1748622643,
    "last_activity_date" : 1748622643,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140473297,
    "post_id" : 79645383,
    "body" : "Backtick <code>e</code> is a <a href=\"https://duffney.io/usingansiescapesequencespowershell/\" rel=\"nofollow noreferrer\">Powershell thing</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1748624485,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140473278,
    "post_id" : 79645383,
    "body" : "@g00se Ah! Editing problems at Stackoverflow (This is one of my favourites.) But also with accent grave it didn&#39;t erase.",
    "score" : 0,
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "creation_date" : 1748623941,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140473260,
    "post_id" : 79645383,
    "body" : "@g00se Do you really mean &quot;space, small-e, open-bracket...&quot;? I&#39;ve never seen something like this and it didn&#39;t erase at my site.",
    "score" : 0,
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "creation_date" : 1748623548,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140473237,
    "post_id" : 79645383,
    "body" : "Agreed for the one string proposal if it remains the only control string. I tested, however, with different control sequences; that&#39;s why I wanted a predefinded ESC.",
    "score" : 0,
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "creation_date" : 1748622849,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140473232,
    "post_id" : 79645383,
    "body" : "<i>final String ERASE_EOL = &quot;\\u001B[0K&quot;;</i> Yes. But you might also give this a try: <code>final String ERASE_EOL = &quot;BACKTICKe[0K&quot;;</code> (Where you actually use the backtick character - which I couldn&#39;t get to appear with my formatting)",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1748622769,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140472927,
    "post_id" : 79645383,
    "body" : "Not the issue, but I would make the esc part of the string: <code>final String ERASE_EOL = &quot;\\u001B[0K&quot;;</code>. This way it&#39;s all one string.",
    "score" : 0,
    "owner" : {
      "account_id" : 339859,
      "reputation" : 13563,
      "user_id" : 669576,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/7a5b946d652df565b91a774311e7c442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "001",
      "link" : "https://stackoverflow.com/users/669576/001"
    },
    "creation_date" : 1748616834,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140472911,
    "post_id" : 79645383,
    "body" : "I get the correct output when I run your code in powershell. Maybe your settings are messed up. <code>ADE</code> on the first line, abd <code>A</code> on the second.",
    "score" : 0,
    "owner" : {
      "account_id" : 339859,
      "reputation" : 13563,
      "user_id" : 669576,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/7a5b946d652df565b91a774311e7c442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "001",
      "link" : "https://stackoverflow.com/users/669576/001"
    },
    "creation_date" : 1748616548,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140472570,
    "post_id" : 79645383,
    "body" : "Thank you, 001, for your response. I replied to your remark in my question.",
    "score" : 0,
    "owner" : {
      "account_id" : 11415665,
      "reputation" : 341,
      "user_id" : 8368531,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "J&#246;rg",
      "link" : "https://stackoverflow.com/users/8368531/j%c3%b6rg"
    },
    "creation_date" : 1748611139,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140472381,
    "post_id" : 79645383,
    "body" : "It seems to work for me (the ansi codes). What is the expected vs. actual output? Also, you probably want <code>print</code> instead of <code>println</code>.",
    "score" : 1,
    "owner" : {
      "account_id" : 339859,
      "reputation" : 13563,
      "user_id" : 669576,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/7a5b946d652df565b91a774311e7c442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "001",
      "link" : "https://stackoverflow.com/users/669576/001"
    },
    "creation_date" : 1748606809,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}