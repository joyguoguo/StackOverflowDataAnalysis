{
  "question" : {
    "question_id" : 79598732,
    "title" : "Java accessors generated by protoc for string fields",
    "body" : "<p>For any field <code>x</code> of type string, protoc seems to generate two java accessors:</p>\n<ul>\n<li><code>getX()</code> that returns a <code>String</code></li>\n<li><code>getXBytes()</code> that returns a <code>ByteString</code></li>\n</ul>\n<p>While the <code>getXBytes()</code> method may be useful, I am surprised that this behavior doesn't seem to documented in the official <a href=\"https://protobuf.dev/reference/java/java-generated/\" rel=\"nofollow noreferrer\">protoc Java documentation</a>.</p>\n<p>Moreover, this introduces a potential name conflict issue.\nTake for example the following proto definition:</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\nmessage Message {\n  string x = 2;\n  string x_bytes = 3;\n}\n</code></pre>\n<p>Here is the corresponding interface generated by protoc</p>\n<pre><code>  public interface MessageOrBuilder extends\n      // @@protoc_insertion_point(interface_extends:Message)\n      com.google.protobuf.MessageOrBuilder {\n\n    /**\n     * &lt;code&gt;string x = 2;&lt;/code&gt;\n     * @return The x.\n     */\n    java.lang.String getX();\n    /**\n     * &lt;code&gt;string x = 2;&lt;/code&gt;\n     * @return The bytes for x.\n     */\n    com.google.protobuf.ByteString\n        getXBytes();\n\n    /**\n     * &lt;code&gt;string x_bytes = 3;&lt;/code&gt;\n     * @return The xBytes.\n     */\n    java.lang.String getXBytes();\n    /**\n     * &lt;code&gt;string x_bytes = 3;&lt;/code&gt;\n     * @return The bytes for xBytes.\n     */\n    com.google.protobuf.ByteString\n        getXBytesBytes();\n  }\n  /**\n</code></pre>\n<p>This is invalid java because two methods are named <code>getXBytes</code>.</p>\n<p>Interestingly, protoc does seem to handle similar name collisions for repeated fields, as described in the documentation: &quot;If another non-repeated field has a name that conflicts with one of the repeated field’s generated methods, both field names will have their protobuf field number appended to the end.&quot;.</p>\n<p>This seems like an inconsistency (or a bug). Did I miss something here? Is there a recommended way to handle such name conflicts?</p>\n<p>Any insights or clarification would be greatly appreciated!</p>\n",
    "tags" : [ "java", "protocol-buffers", "protoc" ],
    "owner" : {
      "account_id" : 15150675,
      "reputation" : 11,
      "user_id" : 10933107,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/87899c811a310c3a5d9aa542fae1f44b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Remy",
      "link" : "https://stackoverflow.com/users/10933107/remy"
    },
    "is_answered" : false,
    "view_count" : 53,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1745942900,
    "creation_date" : 1745940709,
    "link" : "https://stackoverflow.com/questions/79598732/java-accessors-generated-by-protoc-for-string-fields",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140386007,
    "post_id" : 79598732,
    "body" : "It&#39;s a little strange to <i>have</i> two fields where <code>x</code> and <code>x_bytes</code> are useful names.",
    "score" : 0,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1746062228,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140381654,
    "post_id" : 79598732,
    "body" : "Thank you for your suggestion!  Unfortunately, this proto definition is part of another project that I do not own. As the file is modified frequently, I will have to add an ad-hoc tweaking process in my CI to rename the conflicting fields.  Ideally, I should convince the author of the conflicting proto to rename those fields (he doesn’t encounter this problem because he does not use Java). However, this may be a bit challenging since the generation of the <code>getXBytes()</code> method is not clearly documented.",
    "score" : 0,
    "owner" : {
      "account_id" : 15150675,
      "reputation" : 11,
      "user_id" : 10933107,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/87899c811a310c3a5d9aa542fae1f44b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Remy",
      "link" : "https://stackoverflow.com/users/10933107/remy"
    },
    "creation_date" : 1745956464,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140381497,
    "post_id" : 79598732,
    "body" : "@Remy, Protoc generates <code>getXBytes()</code> for every string field, and it does not consistently resolve naming conflicts like it does for repeated fields. Your conflict between <code>x</code> and <code>x_bytes</code> causes invalid Java code. To avoid this, rename fields to prevent overlaps (e.g., avoid using <code>_bytes</code> suffix for strings).",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1745953763,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140381079,
    "post_id" : 79598732,
    "body" : "&quot;Is there a recommended way to handle such name conflicts?&quot; Don&#39;t write fields with those names.",
    "score" : 0,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1745945696,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}