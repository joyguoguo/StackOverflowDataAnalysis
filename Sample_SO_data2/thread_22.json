{
  "question" : {
    "question_id" : 79845200,
    "title" : "How to configure Spring RestClient to automatically add a query parameter to every request?",
    "body" : "<p>I have a Spring Boot application that calls an external API.<br />\nThe API requires an API key to be passed as a query parameter, for example:<br />\n<code>https://api.example.com/data?apikey=123</code></p>\n<p>I want to avoid repeating <code>.queryParam(&quot;apikey&quot;, apiKey)</code> in every request.</p>\n<p>Is there a way to configure a <code>RestClient</code> so that a specific query parameter is automatically added to <strong>all outgoing requests</strong>?</p>\n<p>I tried using:</p>\n<ul>\n<li><p><code>defaultUriVariables(...)</code> — but it only works with URI templates, not query parameters.</p>\n</li>\n<li><p><code>defaultHeader(...)</code> — but this API uses only query params, not headers.</p>\n</li>\n</ul>\n<p>What is the recommended way to globally attach a query parameter to every request?<br />\nDo I need a custom <code>ExchangeFilterFunction</code>, or is there a built-in mechanism for this?</p>\n",
    "tags" : [ "java", "spring", "rest", "rest-client" ],
    "owner" : {
      "account_id" : 31296423,
      "reputation" : 1,
      "user_id" : 25469135,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/ACg8ocKl0xP0KK4YLxpCTMltgSSJv02ttGGPmbaDjATw_XMbtMs1G3A=k-s256",
      "display_name" : "Dmitry Kopyshov",
      "link" : "https://stackoverflow.com/users/25469135/dmitry-kopyshov"
    },
    "is_answered" : true,
    "view_count" : 51,
    "answer_count" : 3,
    "score" : 1,
    "last_activity_date" : 1765784953,
    "creation_date" : 1765568343,
    "link" : "https://stackoverflow.com/questions/79845200/how-to-configure-spring-restclient-to-automatically-add-a-query-parameter-to-eve",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79845288,
    "question_id" : 79845200,
    "body" : "<p>It sounds like you need a web <a href=\"https://docs.spring.io/spring-framework/reference/web/webmvc/filters.html\" rel=\"nofollow noreferrer\">filter</a>.</p>\n<p>This should allow you to intercept all requests as they come in and modify them</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 11471404,
      "reputation" : 345,
      "user_id" : 8408114,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/15efdb9da0964f282c9636bf4077669d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Khepu",
      "link" : "https://stackoverflow.com/users/8408114/khepu"
    },
    "creation_date" : 1765578542,
    "last_activity_date" : 1765578542,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79846664,
    "question_id" : 79845200,
    "body" : "<p>You could just wrap <code>RestClient</code> or calls to it in a class or method and add the parameter in there.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 123802,
      "reputation" : 38533,
      "user_id" : 318493,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/c8367f123240268431ceae261af0dac9?s=256&d=identicon&r=PG",
      "display_name" : "RoToRa",
      "link" : "https://stackoverflow.com/users/318493/rotora"
    },
    "creation_date" : 1765649513,
    "last_activity_date" : 1765649513,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79847480,
    "question_id" : 79845200,
    "body" : "<p>Use a <code>ClientHttpRequestInterceptor</code> to enrich the request with an additional parameter. Like in <a href=\"https://stackoverflow.com/questions/57696932/adding-request-param-to-every-request-using-spring-resttemplate\">this answer</a></p>\n<p>The <code>ExchangeFilterFunction</code> is for the <code>WebClient</code> (reactive).</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1765784953,
    "last_activity_date" : 1765784953,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}