{
  "question" : {
    "question_id" : 79597457,
    "title" : "LWJGL Frame Buffers only rendering one item",
    "body" : "<p>In my loop, I'm trying to render a few hundred particles to the window. This worked perfectly when it was rendering directly to the window, but I tried to put it in its own frame buffer, and it stopped working. Instead of all of the particles being rendered, now only the last one is being shown on the window. My best guess is that it has something to do with how the models are rendered, but I'm not sure.</p>\n<p>This is the frame buffer class</p>\n<pre><code>public class FrameBuffer {\n\nint fboID;\nint texture_id;\nTexture texture = null;\npublic Vector2 size;\n\npublic FrameBuffer(int width, int height) {\n    fboID = glGenFramebuffers();\n    glBindFramebuffer(GL_FRAMEBUFFER, fboID);\n    size = new Vector2(width, height);\n    \n    //this.texture = new Texture(width, height);\n    texture_id = glGenTextures();\n    glBindTexture(GL_TEXTURE_2D, texture_id);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture_id, 0);\n    \n    int rboID = glGenRenderbuffers();\n    glBindRenderbuffer(GL_RENDERBUFFER, rboID);\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, width, height);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, rboID);\n    \n    if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE) {\n        System.out.println(&quot;Incomplete&quot;);\n       // assert false : &quot;Error: Framebuffer is not complete&quot;;\n    }\n    //glBindRenderbuffer(GL_RENDERBUFFER, 0);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n}\n\npublic void begin (Window window) {\n    glBindFramebuffer(GL_FRAMEBUFFER, fboID);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    setViewport(new Rect2(new Vector2(0,0), size), window);\n}\n\npublic void bind() {\n    glBindFramebuffer(GL_FRAMEBUFFER, fboID);\n}\n\npublic void unbind() {\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n}\n\npublic void render(Rect2 simulation_viewport, Window window) {\n    setViewport(simulation_viewport, window);//setViewport(simulation_viewport, window);\n    \n    unbind();\n    glBindTexture(GL_TEXTURE_2D, texture_id);\n    drawTexture();\n    glBindTexture(GL_TEXTURE_2D, 0);\n    \n    int error = glGetError();\n    if (error != GL_NO_ERROR)\n        System.out.println(&quot;Error: &quot; + error);\n    //unbind();\n}\n\nprivate void drawTexture(){\n    glBegin(GL_QUADS);\n    glTexCoord2f(0f, 0f);\n    glVertex2f(-1, -1);\n    \n    glTexCoord2f(1f, 0f);\n    glVertex2f(1, -1);\n    \n    glTexCoord2f(1f, 1f);\n    glVertex2f(1, 1);\n    \n    glTexCoord2f(0f, 1f);\n    glVertex2f(-1, 1);\n    glEnd();\n}\n\npublic void setViewport(Rect2 rect, Window window) {\n    double end = rect.position.y;\n    end = window.windowSize.y - end;\n    end -= rect.size.y;\n    glViewport((int)rect.position.x * 2, (int)end * 2, (int)rect.size.x * 2, (int)rect.size.y * 2);\n}\n</code></pre>\n<p>This is how the particles are being rendered</p>\n<pre><code>    framebuffer1.begin(window);\n    framebuffer1.bind(); //Binding frame buffer, Get rid of this and it works fine\n    //glClearColor(0, 0, 0, 1);\n    for (Particle part : particles) {\n        if (part != null) {\n            part.render(camera, model, shader, ecosystem);\n        }\n    }\n    framebuffer1.unbind();\n    framebuffer1.render(simulation_viewport, window);\n</code></pre>\n<p>This is how each model is being rendered</p>\n<pre><code>public void render() {\n    glEnableVertexAttribArray(0);\n    glEnableVertexAttribArray(1);\n    \n    glBindBuffer(GL_ARRAY_BUFFER, v_id);\n    glVertexAttribPointer(0, 2, GL_DOUBLE, false, 0, 0);\n    \n    glBindBuffer(GL_ARRAY_BUFFER, uv_id);\n    glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 0);\n    \n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, i_id);\n    glDrawElements(GL_TRIANGLE_FAN, draw_count, GL_UNSIGNED_INT, 0);\n    \n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    \n    glDisableVertexAttribArray(0);\n    glDisableVertexAttribArray(1);\n}\n</code></pre>\n",
    "tags" : [ "java", "lwjgl" ],
    "owner" : {
      "account_id" : 35029875,
      "reputation" : 1,
      "user_id" : 30106220,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/607b36e084dcf1f979d9a2612f92203a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "IDOMDOTCOM",
      "link" : "https://stackoverflow.com/users/30106220/idomdotcom"
    },
    "is_answered" : false,
    "view_count" : 46,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1745893648,
    "creation_date" : 1745888986,
    "link" : "https://stackoverflow.com/questions/79597457/lwjgl-frame-buffers-only-rendering-one-item",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140401751,
    "post_id" : 79597457,
    "body" : "Ok I figured it out, I was just never unbinding the shaders.",
    "score" : 0,
    "owner" : {
      "account_id" : 35029875,
      "reputation" : 1,
      "user_id" : 30106220,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/607b36e084dcf1f979d9a2612f92203a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "IDOMDOTCOM",
      "link" : "https://stackoverflow.com/users/30106220/idomdotcom"
    },
    "creation_date" : 1746561909,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}