{
  "question" : {
    "question_id" : 79677850,
    "title" : "How to define the placeholder image for the ImageLoader in Coil v 3.2.0 using Java",
    "body" : "<p>I am using Coil in an Android View project with mixed java-kotlin source code.</p>\n<p><a href=\"https://github.com/coil-kt/coil\" rel=\"nofollow noreferrer\">https://github.com/coil-kt/coil</a></p>\n<p>I am updating the Coil library from v 2.7.0 to v 3.2.0</p>\n<p>Old java code for loading an image in a specific ImageView for v 2.7.0</p>\n<pre><code>ImageLoader imageLoader = Coil.imageLoader(ContextProvider.getInstance().getActivityContext());\n    ImageRequest request = new ImageRequest.Builder(ContextProvider.getInstance().getActivityContext())\n            .data(imageUrl)\n            .placeholder(R.mipmap.placeholder)\n            .size(IMAGE_SIZE, IMAGE_SIZE)\n            .target(imageView)\n            .build();\nimageLoader.enqueue(request);\n</code></pre>\n<p>New java code for loading an image in a specific ImageView for v 3.2.0</p>\n<pre><code>    ImageLoader imageLoader = SingletonImageLoader.get(ContextProvider.getInstance().getActivityContext());\n    ImageRequest request = new ImageRequest.Builder(ContextProvider.getInstance().getActivityContext())\n            .data(imageUrl)\n            .placeholder(???)\n            .size(IMAGE_SIZE, IMAGE_SIZE)\n            .target(new ImageViewTarget(imageView))\n            .build();\n    imageLoader.enqueue(request); \n</code></pre>\n<p>I cannot find a clear example of how to set the placeholder image in the new version of the library, and the migration guide is not helpful in this case.</p>\n<p><a href=\"https://coil-kt.github.io/coil/upgrading_to_coil3/\" rel=\"nofollow noreferrer\">https://coil-kt.github.io/coil/upgrading_to_coil3/</a></p>\n<p>The placeholder method in the new version of the library no longer accepts the resource ID.</p>\n<blockquote>\n<p>old one: .placeholder(R.mipmap.placeholder)</p>\n<p>new one: .placeholder(???)</p>\n</blockquote>\n<p>How can I define the placeholder?</p>\n",
    "tags" : [ "java", "android", "kotlin", "coil" ],
    "owner" : {
      "account_id" : 3554599,
      "reputation" : 2143,
      "user_id" : 2968650,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2lBtq.jpg?s=256",
      "display_name" : "cristallo",
      "link" : "https://stackoverflow.com/users/2968650/cristallo"
    },
    "is_answered" : true,
    "view_count" : 187,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1750853796,
    "creation_date" : 1750779554,
    "link" : "https://stackoverflow.com/questions/79677850/how-to-define-the-placeholder-image-for-the-imageloader-in-coil-v-3-2-0-using-ja",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79678805,
    "question_id" : 79677850,
    "body" : "<p>You must manually retrieve the <code>Drawable </code>from the resource ID before passing it to <code>placeholder(...)</code> through <code>coil3.DrawableImage</code></p>\n<pre><code>Context context = ContextProvider.getInstance().getActivityContext();\nDrawable placeholderDrawable = ResourcesCompat.getDrawable(context, R.mipmap.placeholder, null);\nif (placeholderDrawable != null) {\n    ImageLoader imageLoader = SingletonImageLoader.get(context);\n    DrawableImage placeholderDrawableImage = new DrawableImage(placeholderDrawable, true);\n    ImageRequest request = new ImageRequest.Builder(context)\n                    .data(imageUrl)\n                    .placeholder(placeholderDrawableImage)\n                    .size(IMAGE_SIZE, IMAGE_SIZE)\n                    .target(new ImageViewTarget(imageView))\n                    .build();\n    imageLoader.enqueue(request);\n}\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 24438997,
      "reputation" : 1944,
      "user_id" : 18362930,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1nKV7.png?s=256",
      "display_name" : "Sandesh Khutal",
      "link" : "https://stackoverflow.com/users/18362930/sandesh-khutal"
    },
    "creation_date" : 1750844204,
    "last_activity_date" : 1750853796,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140538873,
    "post_id" : 79677850,
    "body" : "@tyczj If I understand you correctly, I need to use a different ImageRequest to load the placeholder image from local resources and set the resulting image as a placeholder. That seems pretty cumbersome.",
    "score" : 0,
    "owner" : {
      "account_id" : 3554599,
      "reputation" : 2143,
      "user_id" : 2968650,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2lBtq.jpg?s=256",
      "display_name" : "cristallo",
      "link" : "https://stackoverflow.com/users/2968650/cristallo"
    },
    "creation_date" : 1750782403,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140538848,
    "post_id" : 79677850,
    "body" : "You need to pass in an <code>ImageRequest</code> or get the resulting <code>Image</code> FROM and <code>ImageRequest</code> to load the image now. I believe this change was made to support Kotlin Multiplatform",
    "score" : 1,
    "owner" : {
      "account_id" : 295108,
      "reputation" : 74839,
      "user_id" : 599346,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/be66588cfacdbed6f5b7581e4eec4c95?s=256&d=identicon&r=PG",
      "display_name" : "tyczj",
      "link" : "https://stackoverflow.com/users/599346/tyczj"
    },
    "creation_date" : 1750781735,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140538826,
    "post_id" : 79677850,
    "body" : "@CommonsWare I see your point! The method&#39;s definition is as follows: fun placeholder(Image image) = placeholder { image }. So, the question now is, what is the right way to create a Coil3.Image from a mipmap resource in Java?",
    "score" : 0,
    "owner" : {
      "account_id" : 3554599,
      "reputation" : 2143,
      "user_id" : 2968650,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2lBtq.jpg?s=256",
      "display_name" : "cristallo",
      "link" : "https://stackoverflow.com/users/2968650/cristallo"
    },
    "creation_date" : 1750781292,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140538780,
    "post_id" : 79677850,
    "body" : "FWIW, the new <code>placeholder()</code> API <a href=\"https://coil-kt.github.io/coil/api/coil-core/coil3.request/-image-request/-builder/index.html#1956674329%2FFunctions%2F1772253480\" rel=\"nofollow noreferrer\">takes either an <code>Image</code> or a function type (e.g., lambda) that returns the <code>Image</code></a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 39846,
      "reputation" : 1011235,
      "user_id" : 115145,
      "user_type" : "registered",
      "accept_rate" : 84,
      "profile_image" : "https://i.sstatic.net/wDnd8.png?s=256",
      "display_name" : "CommonsWare",
      "link" : "https://stackoverflow.com/users/115145/commonsware"
    },
    "creation_date" : 1750780129,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79678805" : [ {
      "comment_id" : 140541108,
      "post_id" : 79678805,
      "body" : "It seems that the coil3.DrawableImage does the magic, and it&#39;s working as expected. I reviewed your answer briefly to take it into consideration.",
      "score" : 1,
      "owner" : {
        "account_id" : 3554599,
        "reputation" : 2143,
        "user_id" : 2968650,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/2lBtq.jpg?s=256",
        "display_name" : "cristallo",
        "link" : "https://stackoverflow.com/users/2968650/cristallo"
      },
      "creation_date" : 1750853381,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140540720,
      "post_id" : 79678805,
      "body" : "The .placeholder method cannot accept a Drawable as a parameter since it requires a coil3.Image.  I just found that there is a coil3.DrawableImage. I am looking into it.",
      "score" : 1,
      "owner" : {
        "account_id" : 3554599,
        "reputation" : 2143,
        "user_id" : 2968650,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/2lBtq.jpg?s=256",
        "display_name" : "cristallo",
        "link" : "https://stackoverflow.com/users/2968650/cristallo"
      },
      "creation_date" : 1750844638,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}