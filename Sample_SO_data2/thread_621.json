{
  "question" : {
    "question_id" : 79791538,
    "title" : "Why my mod not breaks visual blocks on the server minecraft",
    "body" : "<p>Good afternoon/evening. I encountered a problem in the mod: why, when I try to visually break a block on a spawn, does it return it back, even though it shouldn't?</p>\n<pre><code>package com.example.visualbreakmod;\n\nimport net.minecraft.client.Minecraft;\nimport net.minecraft.client.renderer.DestroyBlockProgress;\nimport net.minecraft.init.Blocks;\nimport net.minecraft.util.math.BlockPos;\nimport net.minecraftforge.client.event.RenderWorldLastEvent;\nimport net.minecraftforge.common.MinecraftForge;\nimport net.minecraftforge.fml.common.Mod;\nimport net.minecraftforge.fml.common.event.FMLInitializationEvent;\nimport net.minecraftforge.fml.common.eventhandler.SubscribeEvent;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Mod(modid = VisualBreakMod.MODID, name = VisualBreakMod.NAME, version = VisualBreakMod.VERSION, clientSideOnly = true)\npublic class VisualBreakMod {\n\n    public static final String MODID = &quot;visualbreakmod&quot;;\n    public static final String NAME = &quot;Visual Break Mod&quot;;\n    public static final String VERSION = &quot;1.0&quot;;\n\n    private Minecraft mc = Minecraft.getMinecraft();\n\n    private Map&lt;BlockPos, Integer&gt; breakingBlocks = new HashMap&lt;&gt;();\n\n    @Mod.EventHandler\n    public void init(FMLInitializationEvent event) {\n        MinecraftForge.EVENT_BUS.register(this);\n    }\n\n    public void startVisualBreak(BlockPos pos) {\n        breakingBlocks.put(pos, 0);\n        mc.world.setBlockState(pos, Blocks.AIR.getDefaultState(), 8);\n    }\n\n    @SubscribeEvent\n    public void onRenderWorld(RenderWorldLastEvent event) {\n        for (Map.Entry&lt;BlockPos, Integer&gt; entry : breakingBlocks.entrySet()) {\n            BlockPos pos = entry.getKey();\n            int progress = entry.getValue();\n\n            mc.world.sendBlockBreakProgress(mc.player.getEntityId(), pos, progress);\n\n            if (progress &lt; 10) {\n                entry.setValue(progress + 1);\n            }\n        }\n\n        breakingBlocks.entrySet().removeIf(e -&gt; e.getValue() &gt; 10);\n    }\n}\n</code></pre>\n<p>I tried to solve this problem using ChatGPT, because I don't see any errors in the code, but it didn't help me eitherrrr</p>\n",
    "tags" : [ "java", "minecraft", "minecraft-forge", "forge" ],
    "owner" : {
      "account_id" : 44326258,
      "reputation" : 9,
      "user_id" : 31695622,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0a7a5eade9230fd09a7f23f4d77edea0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "kroll_tt",
      "link" : "https://stackoverflow.com/users/31695622/kroll-tt"
    },
    "is_answered" : false,
    "view_count" : 97,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1761273363,
    "creation_date" : 1760555793,
    "link" : "https://stackoverflow.com/questions/79791538/why-my-mod-not-breaks-visual-blocks-on-the-server-minecraft",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140815151,
    "post_id" : 79791538,
    "body" : "In terms of client-server interaction the &quot;best in class&quot; approach here would be to have your player begin sending packets for &quot;digging&quot; the block so the server can then &quot;break&quot; it. If what you&#39;re going for instead is some kind of client-side &quot;painter&quot; (that can&#39;t be seen by others), then you&#39;d need to prevent the server from overwriting your client-side block (block state updates in particular would likely trigger this).",
    "score" : 1,
    "owner" : {
      "account_id" : 1992310,
      "reputation" : 11519,
      "user_id" : 1786065,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/udTpS.png?s=256",
      "display_name" : "Rogue",
      "link" : "https://stackoverflow.com/users/1786065/rogue"
    },
    "creation_date" : 1761311887,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140815144,
    "post_id" : 79791538,
    "body" : "@user85421 is correct, the blocks are managed server-side and rendered by the client. Your mod is only affecting the <i>display</i> of a block (and only momentarily) for a single client, not for anyone else on the server. Try running a second client alongside the first and watching the block change, it should only present on one user.",
    "score" : 1,
    "owner" : {
      "account_id" : 1992310,
      "reputation" : 11519,
      "user_id" : 1786065,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/udTpS.png?s=256",
      "display_name" : "Rogue",
      "link" : "https://stackoverflow.com/users/1786065/rogue"
    },
    "creation_date" : 1761311787,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140798164,
    "post_id" : 79791538,
    "body" : "I don&#39;t know about Forge &amp; Co... but I would start analysing <code>clientSideOnly = true</code> (AFAIK block handling should run on server; client is for <i>displaying</i>)",
    "score" : 0,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1760560956,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}