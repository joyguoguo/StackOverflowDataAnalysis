{
  "question" : {
    "question_id" : 79619542,
    "title" : "jakarta.el.ELException: Cannot convert [1.0] of type [class java.lang.String] to [class java.lang.Long]",
    "body" : "<p>I am trying to pass a parameter to a <code>&lt;jsp:include&gt;</code>. Then I use that parameter in a <code>if</code> statement, here is the JSPs:</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;jsp:include page=&quot;/Review Score Display.jsp&quot;&gt;\n      &lt;jsp:param name=&quot;Score&quot; value=&quot;${reviewScore}&quot;/&gt;\n &lt;/jsp:include&gt;\n</code></pre>\n<p>This is Review Score Display:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n\n&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;c:choose&gt;\n  &lt;c:when test=&quot;${param.Score ge 1}&quot;&gt;\n    &lt;span class=&quot;fa fa-star checked fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:when&gt;\n  &lt;c:otherwise&gt;\n    &lt;span class=&quot;fa fa-star fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:otherwise&gt;\n&lt;/c:choose&gt;\n&lt;c:choose&gt;\n  &lt;c:when test=&quot;${param.Score ge 2}&quot;&gt;\n    &lt;span class=&quot;fa fa-star checked fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:when&gt;\n  &lt;c:otherwise&gt;\n    &lt;span class=&quot;fa fa-star fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:otherwise&gt;\n&lt;/c:choose&gt;\n&lt;c:choose&gt;\n  &lt;c:when test=&quot;${param.Score ge 3}&quot;&gt;\n    &lt;span class=&quot;fa fa-star checked fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:when&gt;\n  &lt;c:otherwise&gt;\n    &lt;span class=&quot;fa fa-star fa-2x&quot;&gt;&lt;/span&gt;\n  &lt;/c:otherwise&gt;\n&lt;/c:choose&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>But when I run it, I get an error page that indicates an error at line 13 of Review Score Display (the first <code>&lt;c:when&gt;</code> statement) saying <code>jakarta.el.ELException: Cannot convert [1.0] of type [class java.lang.String] to [class java.lang.Long]</code></p>\n<p>I'm not sure why the <code>Score</code> parameter is considered a string. If I do this: <code>&lt;c:when test=&quot;${reviewScore ge 1}&quot;&gt;</code> in the original JSP, it works just fine, so I guess, when I pass review score as a parameter in the <code>&lt;jsp:include&gt;</code> it gets converted into a string?</p>\n<p>What can I do to make the comparison work?</p>\n",
    "tags" : [ "java", "jstl", "el" ],
    "owner" : {
      "account_id" : 39167486,
      "reputation" : 21,
      "user_id" : 29143006,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4fa6ce91dda83580e5b34135c247ab4e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Rbn",
      "link" : "https://stackoverflow.com/users/29143006/rbn"
    },
    "is_answered" : true,
    "view_count" : 122,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1747218999,
    "creation_date" : 1747135377,
    "link" : "https://stackoverflow.com/questions/79619542/jakarta-el-elexception-cannot-convert-1-0-of-type-class-java-lang-string-to",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79619645,
    "question_id" : 79619542,
    "body" : "<p>When you pass a value using <code>&lt;jsp:param&gt;</code>, it becomes a string inside <code>${param.Score}</code> -\neven if the original value was a number</p>\n<p>Then, when JSTL's <code>&lt;c:when&gt;</code> tries to compare it like <code>${param.Score ge 1}</code>, it expects a number, not a string. Since the value is still a string, it throws an error.</p>\n<p>To fix this, you can pass the value as a request attribute instead of a param.\nIn the parent JSP, set the attribute before including:</p>\n<pre><code>&lt;%\n    int score = Integer.parseInt(request.getParameter(&quot;reviewScore&quot;));\n    request.setAttribute(&quot;score&quot;, score);\n%&gt;\n</code></pre>\n<p>In &quot;Review Score Display.jsp&quot;, just use:</p>\n<pre><code>&lt;c:when test=&quot;${score ge 1}&quot;&gt;\n</code></pre>\n<p>Besides setting a request attribute manually, there are a few other options - though most are less clean.</p>\n<p>You could parse <code>param.Score</code> using a scriptlet and store it in a new attribute, but mixing scriptlets with JSTL isn't ideal. A better way is to pass the numeric value from your controller directly as a request attribute, avoiding <code>&lt;jsp:param&gt;</code> entirely.</p>\n<p>It's also technically possible to coerce a string to a number using <code>${param.Score + 0 ge 1}</code>, but this relies on implicit type conversion and can easily break if the parameter is empty or non-numeric.</p>\n<p>If you want to keep your logic inside JSTL and avoid scriptlets, another option is to define your own custom EL function like <code>parseInt(...)</code>. Create a static utility class:</p>\n<pre><code>package my.tags;\n\npublic class MyFunctions {\n    public static int parseInt(String value) {\n        return Integer.parseInt(value);\n    }\n}\n\n</code></pre>\n<p>Create a TLD file (e.g., <code>my-functions.tld</code> in <code>WEB-INF</code>):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;taglib xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\n        version=&quot;2.1&quot;&gt;\n    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;\n    &lt;short-name&gt;myfn&lt;/short-name&gt;\n    &lt;uri&gt;http://example.com/myfn&lt;/uri&gt;\n\n    &lt;function&gt;\n        &lt;name&gt;parseInt&lt;/name&gt;\n        &lt;function-class&gt;my.tags.MyFunctions&lt;/function-class&gt;\n        &lt;function-signature&gt;int parseInt(java.lang.String)&lt;/function-signature&gt;\n    &lt;/function&gt;\n&lt;/taglib&gt;\n\n</code></pre>\n<p>Use it in your JSP:</p>\n<pre><code>&lt;%@ taglib prefix=&quot;myfn&quot; uri=&quot;http://example.com/myfn&quot; %&gt;\n\n&lt;c:when test=&quot;${myfn:parseInt(param.Score) ge 1}&quot;&gt;\n  &lt;!-- markup --&gt;\n&lt;/c:when&gt;\n\n</code></pre>\n<p>This gives you a clean and reusable way to handle string-to-number conversion in JSP. Just make sure the <code>.tld</code> file is placed in <code>WEB-INF</code> and properly registered.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 38931631,
      "reputation" : 671,
      "user_id" : 29023248,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
      "display_name" : "Aleksey Bykov",
      "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
    },
    "creation_date" : 1747138855,
    "last_activity_date" : 1747148212,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140422328,
    "post_id" : 79619542,
    "body" : "I see, in my test I didn&#39;t pass the reviewScore parameter because I tought the included page automatically inherited it. This is useful, thanks!",
    "score" : 0,
    "owner" : {
      "account_id" : 39167486,
      "reputation" : 21,
      "user_id" : 29143006,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4fa6ce91dda83580e5b34135c247ab4e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Rbn",
      "link" : "https://stackoverflow.com/users/29143006/rbn"
    },
    "creation_date" : 1747155988,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140421768,
    "post_id" : 79619542,
    "body" : "It doesn&#39;t give me an error, but it seems to treat reviewScore as null",
    "score" : 0,
    "owner" : {
      "account_id" : 39167486,
      "reputation" : 21,
      "user_id" : 29143006,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4fa6ce91dda83580e5b34135c247ab4e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Rbn",
      "link" : "https://stackoverflow.com/users/29143006/rbn"
    },
    "creation_date" : 1747145721,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79619645" : [ {
      "comment_id" : 140422058,
      "post_id" : 79619645,
      "body" : "Glad to hear it. You&#39;re welcome!",
      "score" : 0,
      "owner" : {
        "account_id" : 38931631,
        "reputation" : 671,
        "user_id" : 29023248,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
        "display_name" : "Aleksey Bykov",
        "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
      },
      "creation_date" : 1747150666,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140422050,
      "post_id" : 79619645,
      "body" : "I managed to make it work by adding + 0, the parameter is gotten from a database, so it should never be empty or non-numeric in theory. I might implement a function like you said later to make it more robust. Thanks!",
      "score" : 0,
      "owner" : {
        "account_id" : 39167486,
        "reputation" : 21,
        "user_id" : 29143006,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/4fa6ce91dda83580e5b34135c247ab4e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Rbn",
        "link" : "https://stackoverflow.com/users/29143006/rbn"
      },
      "creation_date" : 1747150526,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140421867,
      "post_id" : 79619645,
      "body" : "You&#39;re right - <code>param.Score</code> is a string, and original JSTL doesn&#39;t have a <code>parseInt</code> function.",
      "score" : 0,
      "owner" : {
        "account_id" : 38931631,
        "reputation" : 671,
        "user_id" : 29023248,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/WxoZEuKw.png?s=256",
        "display_name" : "Aleksey Bykov",
        "link" : "https://stackoverflow.com/users/29023248/aleksey-bykov"
      },
      "creation_date" : 1747147622,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140421700,
      "post_id" : 79619645,
      "body" : "It tells me &quot;The function [parseInt] cannot be located with the specified prefix&quot;",
      "score" : 0,
      "owner" : {
        "account_id" : 39167486,
        "reputation" : 21,
        "user_id" : 29143006,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/4fa6ce91dda83580e5b34135c247ab4e?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Rbn",
        "link" : "https://stackoverflow.com/users/29143006/rbn"
      },
      "creation_date" : 1747144973,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}