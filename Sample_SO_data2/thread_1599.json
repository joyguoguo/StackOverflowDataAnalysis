{
  "question" : {
    "question_id" : 79695510,
    "title" : "JpaRepository delete not executing with @SQLDelete",
    "body" : "<p>Im using JpaRepository and performing soft-delete with <code>@SQLDelete</code> annotation. The database use Postgresql.</p>\n<p>After some changes, this mechanism stopped working as intended.</p>\n<p>Here the class that I'd like to delete:</p>\n<pre><code>@Entity\n@Table(name = &quot;X&quot;)\n@NoArgsConstructor\n@Getter\n@Setter\n@JsonIgnoreProperties(ignoreUnknown = true)\n@SQLDelete(sql = &quot;UPDATE X SET status = 'DELETED' WHERE id = ?&quot;, check = ResultCheckStyle.COUNT)\n@Where(clause = &quot;status != 'DELETED'&quot;)\npublic class X extends BasicEntity {\n...\n}\n</code></pre>\n<p>Performing a delete with:</p>\n<pre><code>@Repository\npublic interface XRepository extends JpaRepository&lt;X, Long&gt;, JpaSpecificationExecutor&lt;X&gt;\n</code></pre>\n<p><code>xRepository.delete(x);</code></p>\n<p>Since I added this relationship to the X entity:</p>\n<pre><code>@OneToOne(mappedBy = &quot;x&quot;)\nprivate Y y;\n</code></pre>\n<pre><code>CREATE MATERIALIZED VIEW IF NOT EXISTS Y...\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;Y&quot;)\n@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\npublic class Y implements Serializable {\n\n    @Id\n    private Long xId;\n\n    @OneToOne\n    @MapsId\n    @JoinColumn(name = &quot;x_id&quot;)\n    private X x;\n}\n</code></pre>\n<p>When I perform the delete, the X status attribute is not set to DELETE.</p>\n<p>I'm sure that the code that call <code>xRepository.delete</code> is executed, but even with the additional logs that show the query executed, there is no trace of UPDATE or DELETE query.</p>\n<p>Why does this happen? How can I restore the correct behaviour?</p>\n<p>Cheers.</p>\n",
    "tags" : [ "java", "postgresql", "spring-boot", "jpa" ],
    "owner" : {
      "account_id" : 25251803,
      "reputation" : 112,
      "user_id" : 19084192,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d6dda2c929c14b26beaacb7599c1050d?s=256&d=identicon&r=PG",
      "display_name" : "Kaiak",
      "link" : "https://stackoverflow.com/users/19084192/kaiak"
    },
    "is_answered" : false,
    "view_count" : 47,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1752059154,
    "creation_date" : 1752059154,
    "link" : "https://stackoverflow.com/questions/79695510/jparepository-delete-not-executing-with-sqldelete",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}