{
  "question" : {
    "question_id" : 79682572,
    "title" : "Spark DSv2 Options vs Properties",
    "body" : "<p>I'm playing around with making a DSv2 data source, and I'm a bit confused about what the differences between the &quot;options&quot; and &quot;properties&quot; args passed to some of the TableProvider functions are supposed to be.</p>\n<pre><code>/**\n* Infer the schema of the table identified by the given options.\n*\n* @param options an immutable case-insensitive string-to-string map that can identify a table,\n*                e.g. file path, Kafka topic name, etc.\n*/\nStructType inferSchema(CaseInsensitiveStringMap options);\n\n/**\n* Return a {@link Table} instance with the specified table schema, partitioning and properties\n* to do read/write. The returned table should report the same schema and partitioning with the\n* specified ones, or Spark may fail the operation.\n*\n* @param schema The specified table schema.\n* @param partitioning The specified table partitioning.\n* @param properties The specified table properties. It's case preserving (contains exactly what\n*                   users specified) and implementations are free to use it case sensitively or\n*                   insensitively. It should be able to identify a table, e.g. file path, Kafka\n*                   topic name, etc.\n*/\nTable getTable(StructType schema, Transform[] partitioning, Map&lt;String, String&gt; properties);\n</code></pre>\n<p>The comments above the signatures in the interface give the same examples for both: file path, Kafka topic name, etc. And the actual value passed to both seems to be the same. If I pass .option(&quot;foo&quot;, &quot;bar&quot;) to my read call, that key-value pair will be present in both options and properties.</p>\n<p>Still the different names for these arguments, as well as the fact that one is case-insensitive and the other is not imply to me that these are intended to be used for different things.</p>\n<p>I found this article: <a href=\"https://docs.databricks.com/aws/en/sql/language-manual/sql-ref-syntax-ddl-tblproperties\" rel=\"nofollow noreferrer\">https://docs.databricks.com/aws/en/sql/language-manual/sql-ref-syntax-ddl-tblproperties</a>, which honestly doesn't illuminate much for me, and I'm not even 100% sure this is referring to the same thing. It says that table properties are initialized on CREATE TABLE. Are properties meant to be persistent if, for example, I set them when making a hive table or something, whereas options are per read/write?</p>\n<p>I apologize if this is a naive question. Any direction here would come much appreciated. Additionally, if anyone knows of any good reading about the nuts and bolts of building a DSv2 data source, that would be very, very helpful. I couldn't find much.</p>\n",
    "tags" : [ "java", "apache-spark" ],
    "owner" : {
      "account_id" : 22485496,
      "reputation" : 141,
      "user_id" : 16683941,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14Gh3JQNCqpMukVybZb4mtVnNO58hpzPmv6MDEvm-OQ=k-s256",
      "display_name" : "William",
      "link" : "https://stackoverflow.com/users/16683941/william"
    },
    "is_answered" : false,
    "view_count" : 40,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1765768158,
    "creation_date" : 1751065298,
    "link" : "https://stackoverflow.com/questions/79682572/spark-dsv2-options-vs-properties",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140559465,
    "post_id" : 79682572,
    "body" : "<i>Properties</i> of an object itself (datasource/table) vs. <i>options</i> for the operation (read/write) on it?",
    "score" : 0,
    "owner" : {
      "account_id" : 320466,
      "reputation" : 9560,
      "user_id" : 638764,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/TMRYvmDJ.jpg?s=256",
      "display_name" : "mazaneicha",
      "link" : "https://stackoverflow.com/users/638764/mazaneicha"
    },
    "creation_date" : 1751477049,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}