{
  "question" : {
    "question_id" : 79712443,
    "title" : "How to mask sensitive values (e.g., passwords, API keys) in structured logs in Spring Boot 3.4?",
    "body" : "<p>I’m using Spring Boot 3.4 with structured logging (via JsonWriterStructuredLogFormatter), and I want to mask sensitive data such as passwords, API keys, and tokens from the message field in the logs.</p>\n<p>What I've tried:\nI'm using the default structured logging setup. <em><strong>logstash</strong></em> format</p>\n<p>I created a StructuredLoggingJsonMembersCustomizer and modified the message field by applying regex masking.  but I can't change or override the content value of &quot;message&quot; key</p>\n",
    "tags" : [ "java", "spring-boot", "logback", "structured-logging" ],
    "owner" : {
      "account_id" : 17138160,
      "reputation" : 85,
      "user_id" : 12402753,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mDGACk1DjYDjTSA2RUlNkqEPViX0nQz-_rcej8=k-s256",
      "display_name" : "Mehrdad Bozorgmehr",
      "link" : "https://stackoverflow.com/users/12402753/mehrdad-bozorgmehr"
    },
    "is_answered" : true,
    "view_count" : 310,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1753579139,
    "creation_date" : 1753296993,
    "link" : "https://stackoverflow.com/questions/79712443/how-to-mask-sensitive-values-e-g-passwords-api-keys-in-structured-logs-in-s",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79713182,
    "question_id" : 79712443,
    "body" : "<p>Such masking isn't supported out of the box. You can implement it yourself with a custom StructuredLogFormatter, just as you'd have to <a href=\"https://www.baeldung.com/logback-mask-sensitive-data\" rel=\"nofollow noreferrer\">use a custom pattern layout with plain Logback</a>.</p>\n<p>That said, I would encourage you to think twice about masking at this level. There is a risk of failing to mask something due to it having a slightly unexpected format or a regular expression missing it for some other reason. Only the code making the logging call can know for certain what should and should not be masked making it the better place to perform the masking in my opinion.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1473276,
      "reputation" : 117494,
      "user_id" : 1384297,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rmR9b.jpg?s=256",
      "display_name" : "Andy Wilkinson",
      "link" : "https://stackoverflow.com/users/1384297/andy-wilkinson"
    },
    "creation_date" : 1753352762,
    "last_activity_date" : 1753352762,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140614328,
    "post_id" : 79712443,
    "body" : "I want my mask log to be clear, centralized, and easy to manage. @AndyWilkinson",
    "score" : 0,
    "owner" : {
      "account_id" : 17138160,
      "reputation" : 85,
      "user_id" : 12402753,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mDGACk1DjYDjTSA2RUlNkqEPViX0nQz-_rcej8=k-s256",
      "display_name" : "Mehrdad Bozorgmehr",
      "link" : "https://stackoverflow.com/users/12402753/mehrdad-bozorgmehr"
    },
    "creation_date" : 1753346411,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140613910,
    "post_id" : 79712443,
    "body" : "Have you considered performing the masking prior to making the logging call? That will mean that it works for any form of logging (not just structured logging) and will also make it easier to identify what does and does not need to be masked.",
    "score" : 1,
    "owner" : {
      "account_id" : 1473276,
      "reputation" : 117494,
      "user_id" : 1384297,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rmR9b.jpg?s=256",
      "display_name" : "Andy Wilkinson",
      "link" : "https://stackoverflow.com/users/1384297/andy-wilkinson"
    },
    "creation_date" : 1753336686,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79713182" : [ {
      "comment_id" : 140614815,
      "post_id" : 79713182,
      "body" : "I want my logs to be in the Logstash supported format, JSON. I want to use the Logstash model in my structure and easily customize it for masking. It’s too difficult to wire this with a custom StructuredLogFormatter. I prefer adding the Logstash dependency to make it : <a href=\"https://dev.to/dayanandaeswar/mask-logs-with-logstash-logback-in-java-using-regex-2g0p\" rel=\"nofollow noreferrer\">dev.to/dayanandaeswar/&hellip;</a>",
      "score" : 0,
      "owner" : {
        "account_id" : 17138160,
        "reputation" : 85,
        "user_id" : 12402753,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mDGACk1DjYDjTSA2RUlNkqEPViX0nQz-_rcej8=k-s256",
        "display_name" : "Mehrdad Bozorgmehr",
        "link" : "https://stackoverflow.com/users/12402753/mehrdad-bozorgmehr"
      },
      "creation_date" : 1753357523,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140614735,
      "post_id" : 79713182,
      "body" : "@MehrdadBozorgmehr I don&#39;t think Logback does have this feature, hence the need for a custom pattern layout. Can you please  link to some details about its built-in support for masking?",
      "score" : 0,
      "owner" : {
        "account_id" : 1473276,
        "reputation" : 117494,
        "user_id" : 1384297,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/rmR9b.jpg?s=256",
        "display_name" : "Andy Wilkinson",
        "link" : "https://stackoverflow.com/users/1384297/andy-wilkinson"
      },
      "creation_date" : 1753355516,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140614654,
      "post_id" : 79713182,
      "body" : "Perhaps you’re right, but why do most logging libraries, such as Logback and Logestash, have this feature? Will Spring Boot support these features in the future?",
      "score" : 0,
      "owner" : {
        "account_id" : 17138160,
        "reputation" : 85,
        "user_id" : 12402753,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a-/AAuE7mDGACk1DjYDjTSA2RUlNkqEPViX0nQz-_rcej8=k-s256",
        "display_name" : "Mehrdad Bozorgmehr",
        "link" : "https://stackoverflow.com/users/12402753/mehrdad-bozorgmehr"
      },
      "creation_date" : 1753353708,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}