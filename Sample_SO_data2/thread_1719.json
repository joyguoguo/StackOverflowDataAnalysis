{
  "question" : {
    "question_id" : 79684854,
    "title" : "How to choose which scheduled task runs in Spring",
    "body" : "<p>I have two @Sheduled tasks in Spring-Boot that might overlap. One that runs weeks and one that runs monthly. How can I ensure, that on the days they overlap only the monthly job runs?</p>\n<pre><code>    @Scheduled(cron = &quot;0 0 0 1 * *&quot;) // Runs on the first day of every month at midnight\n    public void runMonthly() {\n    }\n\n    @Scheduled(cron = &quot;0 0 0 * * MON&quot;) // Runs every Monday at midnight\n    public void runWeekly() {\n    }\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "scheduled-tasks" ],
    "owner" : {
      "account_id" : 1171602,
      "reputation" : 206,
      "user_id" : 1148672,
      "user_type" : "registered",
      "accept_rate" : 76,
      "profile_image" : "https://www.gravatar.com/avatar/c933c4598ae4dc80ea4456334ed73648?s=256&d=identicon&r=PG",
      "display_name" : "Working Title",
      "link" : "https://stackoverflow.com/users/1148672/working-title"
    },
    "is_answered" : true,
    "view_count" : 68,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1751313644,
    "creation_date" : 1751290752,
    "link" : "https://stackoverflow.com/questions/79684854/how-to-choose-which-scheduled-task-runs-in-spring",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79684876,
    "question_id" : 79684854,
    "body" : "<p>Skip weekly task for first day of the month</p>\n<pre><code>    @Scheduled(cron = &quot;0 0 1 * *&quot;) // First day of every month at midnight\n    public void runMonthly() {\n        System.out.println(&quot;Running monthly task&quot;);\n    }\n    \n    @Scheduled(cron = &quot;0 0 * * MON&quot;) // Every Monday at midnight\n    public void runWeekly() {\n        LocalDate today = LocalDate.now();\n        \n \n        if (today.getDayOfMonth() == 1) {\n            System.out.println(&quot;Skipping weekly task - monthly task already ran today&quot;);\n            return;\n        }\n        \n        System.out.println(&quot;Running weekly task&quot;);\n    }\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10947168,
      "reputation" : 11,
      "user_id" : 8044835,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/9f794a96989d2d59c078c3d8069881ba?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Darko Vucetic",
      "link" : "https://stackoverflow.com/users/8044835/darko-vucetic"
    },
    "creation_date" : 1751291459,
    "last_activity_date" : 1751291459,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79685237,
    "question_id" : 79684854,
    "body" : "<p>As suggested in another answer, skipping the weekly task on the first day of the month is an option, although the use of <code>LocalDate</code> is a terrible idea unless you’ve only one server. To understand why <code>LocalDate</code> is bad for distributed systems, see <a href=\"https://stackoverflow.com/q/79680495/839733\">this thread</a>.</p>\n<p>Another option would be to use a <a href=\"https://en.m.wikipedia.org/wiki/Lock_(computer_science)\" rel=\"nofollow noreferrer\">mutex</a> of some kind, so that only one job is able to acquire the mutex, and the other bails. A mutex may be implemented in various ways, the simplest of which is an empty file on some shared file system that both jobs have access to. More sophisticated methods include using Redis or even a database. Which of these methods you’ll choose depends on the complexity of your system, and robustness required.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 446597,
      "reputation" : 25249,
      "user_id" : 839733,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://i.sstatic.net/2s6lO.jpg?s=256",
      "display_name" : "Abhijit Sarkar",
      "link" : "https://stackoverflow.com/users/839733/abhijit-sarkar"
    },
    "creation_date" : 1751313644,
    "last_activity_date" : 1751313644,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}