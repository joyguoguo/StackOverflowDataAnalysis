{
  "question" : {
    "question_id" : 79577561,
    "title" : "Spring Configuration method doesn&#39;t create bean",
    "body" : "<p>I have a Spring's <code>@Configuration</code>:</p>\n<pre><code>@Configuration\npublic class MyConfiguration {\n\n    public static class BeanAAA {\n    }\n\n    public static class BeanBBB {\n        BeanAAA beanA;\n\n        public BeanBBB(BeanAAA beanA) {\n            this.beanA = beanA;\n        }\n    }\n\n    @Autowired\n    @Bean\n    public BeanAAA createBeanAaa() {\n        System.out.println(&quot;In createBeanAaa&quot;);\n        return new BeanAAA();\n    }\n\n    @Autowired\n    @Bean\n    public BeanBBB createBeanBbb(BeanAAA beanA) {\n        System.out.println(&quot;In createBeanBbb&quot;);\n        return new BeanBBB(beanA);\n    }\n\n}\n</code></pre>\n<p>On the application startup, I see the log from the <code>createBeanAaa</code> method. The log from <code>createBeanBbb</code> is missing due to the <code>NoSuchBeanDefinitionException</code> error:</p>\n<pre><code>In createBeanAaa\nException encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: \nError creating bean with name 'com.test.MyConfiguration#0': \nUnsatisfied dependency expressed through method 'createBeanBbb' parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: \nNo qualifying bean of type 'com.test.MyConfiguration.BeanAAA' available: \nexpected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}&quot; \n</code></pre>\n<p>How is this possible if the <code>BeanAAA</code> was created just before and should be available to <code>@Autowired</code>. Doesn't this mechanism work if it's injected in the same <code>@Configuration</code>?</p>\n<p>Spring ver: <code>5.2.22.RELEASE</code></p>\n",
    "tags" : [ "java", "spring" ],
    "owner" : {
      "account_id" : 333116,
      "reputation" : 1940,
      "user_id" : 658801,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/taclF.jpg?s=256",
      "display_name" : "zolv",
      "link" : "https://stackoverflow.com/users/658801/zolv"
    },
    "is_answered" : true,
    "view_count" : 109,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744825998,
    "creation_date" : 1744817864,
    "link" : "https://stackoverflow.com/questions/79577561/spring-configuration-method-doesnt-create-bean",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79577600,
    "question_id" : 79577561,
    "body" : "<p>The issue is a wrong usage of the <code>@Autowired</code> on <code>@Bean</code> methods.\nThe solution is to remove the <code>@Autowired</code> annotations from your <code>@Bean</code> methods:</p>\n<pre><code>@Configuration\npublic class MyConfiguration {\n    public static class BeanAAA {\n    }\n\n    public static class BeanBBB {\n        BeanAAA beanA;\n\n        public BeanBBB(BeanAAA beanA) {\n            this.beanA = beanA;\n        }\n    }\n\n    @Bean\n    public BeanAAA createBeanAaa() {\n        System.out.println(&quot;In createBeanAaa&quot;);\n        return new BeanAAA();\n    }\n\n    @Bean\n    public BeanBBB createBeanBbb(BeanAAA beanA) {\n        System.out.println(&quot;In createBeanBbb&quot;);\n        return new BeanBBB(beanA);\n    }\n}\n</code></pre>\n<p><code>@Autowired</code> annotation is not used by bean creation. Instead, it's used to inject a bean that has already been created and managed by Spring.</p>\n<pre><code>@Component\npublic class A {\n\n  @Autowired\n  private B b;\n\n  public void foo() {\n    b.methodB();\n  }\n}\n\n@Component\npublic class B {\n\n  public void methodB() {\n  }\n}\n</code></pre>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 18586978,
      "reputation" : 3850,
      "user_id" : 15000097,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yFl4M.jpg?s=256",
      "display_name" : "Georgii Lvov",
      "link" : "https://stackoverflow.com/users/15000097/georgii-lvov"
    },
    "creation_date" : 1744818793,
    "last_activity_date" : 1744825998,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140342132,
    "post_id" : 79577561,
    "body" : "Can you please show <i>the application startup</i> code? Georgii is correct in their answer below, but I can&#39;t reproduce the behavior you&#39;re describing.",
    "score" : 0,
    "owner" : {
      "account_id" : 195331,
      "reputation" : 281049,
      "user_id" : 438154,
      "user_type" : "registered",
      "accept_rate" : 98,
      "profile_image" : "https://www.gravatar.com/avatar/4ec21df1e55febf8deb2e3b24b9cb39b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sotirios Delimanolis",
      "link" : "https://stackoverflow.com/users/438154/sotirios-delimanolis"
    },
    "creation_date" : 1744832168,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}