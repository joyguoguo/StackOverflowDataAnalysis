{
  "question" : {
    "question_id" : 79741762,
    "title" : "java.lang.NoClassDefFoundError: org/openqa/selenium/remote/html5/RemoteLocationContext",
    "body" : "<p>Since 15/08/2025, the Appium-based automation framework I work on started throwing the following error when executing any test case:</p>\n<pre><code>Filename: specs\\mobile_automation\\passenger\\revamp\\smoke_tests\\Ride\\Ride\\Rewrite\\RideSmokeTestReWrite-01-General.spec\nMessage: java.lang.NoClassDefFoundError: org/openqa/selenium/remote/html5/RemoteLocationContext\nStack Trace:\njava.lang.NoClassDefFoundError: org/openqa/selenium/remote/html5/RemoteLocationContext\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:92)\n    at io.appium.java_client.AppiumDriver.&lt;init&gt;(AppiumDriver.java:102)\n    at io.appium.java_client.android.AndroidDriver.&lt;init&gt;(AndroidDriver.java:109)\n</code></pre>\n<p>The strange part is:\nI have not modified the pom.xml dependencies.</p>\n<p>I have not changed any framework code.</p>\n<p>Up until 15th August, the tests executed perfectly fine both in pipeline and locally. Suddenly this error started appearing.</p>\n<p><strong>Current dependencies:</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.appium&lt;/groupId&gt;\n    &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n    &lt;version&gt;9.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.19.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>From what I’ve read (and from GPT / GCP suggestions), the issue seems to be that Appium Java Client is still referencing old RemoteLocationContext classes, which were removed in newer Selenium versions. The usual workaround is either:</p>\n<p>Upgrade Appium Java Client to a Selenium 4–compatible version, or Downgrade Selenium to 3.x.</p>\n<p><strong>My confusion / question:</strong>\nIf I haven’t changed my dependencies (and everything worked perfectly until 15th), how could this suddenly break?</p>\n<p>Did something in the Maven central repo or transitive dependencies change automatically?</p>\n<p>Could this be related to cached artifacts being refreshed or CI/CD environment pulling a newer transitive lib?</p>\n<p>Or is there any known compatibility issue between Appium Java Client 9.4.0 and Selenium 4.19.1 that might have been triggered recently?</p>\n<p>What’s the best fix here — upgrade/downgrade, or is there a dependency resolution trick (like enforcing exclusions) that avoids this NoClassDefFoundError without downgrading?</p>\n",
    "tags" : [ "java", "maven", "selenium-webdriver", "appium" ],
    "owner" : {
      "account_id" : 1661844,
      "reputation" : 982,
      "user_id" : 1529983,
      "user_type" : "registered",
      "accept_rate" : 61,
      "profile_image" : "https://www.gravatar.com/avatar/04c0da06815628931149a7869f4b5fa5?s=256&d=identicon&r=PG",
      "display_name" : "hirosht",
      "link" : "https://stackoverflow.com/users/1529983/hirosht"
    },
    "is_answered" : false,
    "view_count" : 344,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1757157827,
    "creation_date" : 1755742628,
    "link" : "https://stackoverflow.com/questions/79741762/java-lang-noclassdeffounderror-org-openqa-selenium-remote-html5-remotelocationc",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79742713,
    "question_id" : 79741762,
    "body" : "<p>You are correct that the <code>RemoteLocationContext</code> was removed in Selenium 4.35.</p>\n<p>Appium 9.4.0 specifies the version range <code>[4.26.0, 5.0)</code> for its Selenium dependencies, so at compile time it is pulling in the latest Selenium libraries as transitive dependencies. If you want to pin the dependencies to an earlier version, you need to do it explicitly.</p>\n<p>Here is the text from the <a href=\"https://github.com/appium/java-client/blob/master/docs/transitive-dependencies-management.md\" rel=\"nofollow noreferrer\">Appium java-client docs</a> explaining what you need to do:</p>\n<blockquote>\n<p>Maven downloads dependency of the <a href=\"https://cwiki.apache.org/confluence/display/MAVENOLD/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges\" rel=\"nofollow noreferrer\">latest version matching</a> the declared range by default, in other words whenever new versions of Selenium 4 libraries are published\nthey are pulled transitively as Appium Java Client dependencies at the first project (re)build automatically.</p>\n<p>In order to pin Selenium dependencies they should be declared in <code>pom.xml</code> in the following way:</p>\n</blockquote>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.appium&lt;/groupId&gt;\n        &lt;artifactId&gt;java-client&lt;/artifactId&gt;\n        &lt;version&gt;X.Y.Z&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n        &lt;version&gt;A.B.C&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n        &lt;version&gt;A.B.C&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n        &lt;version&gt;A.B.C&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 8866,
      "reputation" : 61531,
      "user_id" : 16148,
      "user_type" : "registered",
      "accept_rate" : 73,
      "profile_image" : "https://i.sstatic.net/XTzm1.jpg?s=256",
      "display_name" : "Corey Goldberg",
      "link" : "https://stackoverflow.com/users/16148/corey-goldberg"
    },
    "creation_date" : 1755805760,
    "last_activity_date" : 1755805760,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79757511,
    "question_id" : 79741762,
    "body" : "<p>The issue is that Appium 9.4.0 pulls the latest Selenium version at build time, and currently that is 4.35.0. In Selenium 4.35.0 the <code>RemoteLocationContext</code> class was removed, which causes the error,</p>\n<p><code>java.lang.NoClassDefFoundError: org/openqa/selenium/remote/html5/RemoteLocationContext</code></p>\n<p>Use a compatible Selenium version,</p>\n<ul>\n<li><p>4.26.0</p>\n</li>\n<li><p>4.27.0</p>\n</li>\n<li><p>4.28.0</p>\n</li>\n</ul>\n<p>and Pin Selenium explicitly and exclude Appium’s transitive Selenium dependencies,</p>\n<pre class=\"lang-php-template prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.appium&lt;/groupId&gt;\n    &lt;artifactId&gt;java-client&lt;/artifactId&gt; \n    &lt;version&gt;9.4.0&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n                &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n         &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n        &lt;version&gt;4.28.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n     &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n        &lt;version&gt;4.28.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 23263271,
      "reputation" : 1,
      "user_id" : 17349244,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AATXAJwlAIME2wNn5k-JxBzxeqld9IDinc8hHmlPtkLh0g=k-s256",
      "display_name" : "sasith Methmal",
      "link" : "https://stackoverflow.com/users/17349244/sasith-methmal"
    },
    "creation_date" : 1757157827,
    "last_activity_date" : 1757157827,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140681022,
    "post_id" : 79741762,
    "body" : "So try either downgrade appium to 9.3.0 or upgrading selenium client to 4.28.0 accordingly the compatibility matrix. Let me know if it works and I can add an answer.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1755756152,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140680973,
    "post_id" : 79741762,
    "body" : "I&#39;m  not sure how it was even working before because the compatibility version doesn&#39;t list selenium 4.19.1 for this java client version: <a href=\"https://github.com/appium/java-client/tree/v9.4.0\" rel=\"nofollow noreferrer\">github.com/appium/java-client/tree/v9.4.0</a> My best guess is that a transitive dependency got updated and is causing the error.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1755755390,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}