{
  "question" : {
    "question_id" : 79589396,
    "title" : "JSR 303 Custom annotation not working properly",
    "body" : "<p>I created custom annotation to aggregate some constraints together:</p>\n<pre><code>@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE })\n@Retention(RUNTIME)\n@Documented\n@NotNull\n@Min(3)\n@Size(min = 3, max = 30)\n@Constraint(validatedBy = {})\npublic @interface Name\n{\n    String message() default &quot;lms.common.validation.Name.message&quot;;\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n\n</code></pre>\n<p>Created test to verify it is working:</p>\n<pre><code>@Slf4j\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\n@ContextConfiguration(classes = { ValidationAutoConfiguration.class })\n@SpringBootConfiguration\nclass NameTest\n{\n    // annotations omitted to reduce code amount\n    private static class TestDto\n    {\n        @Name\n        private final String name;\n    }\n\n    @Autowired\n    private Validator validator;\n\n    @Test\n    void validateWhenNameIsNotNullAndNotEmptyAndNotValid()\n    {\n        Set&lt;ConstraintViolation&lt;TestDto&gt;&gt; violations = validator.validate(new TestDto(&quot;12&quot;));\n        for (ConstraintViolation&lt;TestDto&gt; constraintViolation : violations)\n        {\n            log.warn(&quot;Constraint violation found, property = {}, message = {}&quot;, constraintViolation.getPropertyPath(),\n                    constraintViolation.getMessage());\n        }\n\n        Assertions.assertThat(violations)\n                // .hasSize(2)\n                .anyMatch(c -&gt; testConstraint(c, &quot;name&quot;, &quot;size must be between 3 and 30&quot;))\n                .anyMatch(c -&gt; testConstraint(c, &quot;name&quot;, &quot;must be greater than or equal to 3&quot;));\n    }\n\n    private boolean testConstraint(ConstraintViolation&lt;?&gt; c, String expectedName, String messageStartWith)\n    {\n        return c.getPropertyPath().toString().equals(expectedName) &amp;&amp; c.getMessage().startsWith(messageStartWith);\n    }\n\n}\n</code></pre>\n<p>I was expecting to get two violations cause we have two constraints defined in the <code>Name</code> annotation: <code>Min</code> and <code>Size</code>. But test fails with output:</p>\n<pre><code>Constraint violation found, property = name, message = size must be between 3 and 30\n</code></pre>\n<p>So only one got triggered...</p>\n",
    "tags" : [ "java", "validation" ],
    "owner" : {
      "account_id" : 6714937,
      "reputation" : 11,
      "user_id" : 5177046,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-JXE2oVKwLCc/AAAAAAAAAAI/AAAAAAAAAAw/YZNdCwFNUTs/s256-rj/photo.jpg",
      "display_name" : "0xff",
      "link" : "https://stackoverflow.com/users/5177046/0xff"
    },
    "is_answered" : false,
    "view_count" : 33,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1745437474,
    "creation_date" : 1745437474,
    "link" : "https://stackoverflow.com/questions/79589396/jsr-303-custom-annotation-not-working-properly",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140365830,
    "post_id" : 79589396,
    "body" : "You are right, it is not supported for strings",
    "score" : 0,
    "owner" : {
      "account_id" : 6714937,
      "reputation" : 11,
      "user_id" : 5177046,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-JXE2oVKwLCc/AAAAAAAAAAI/AAAAAAAAAAw/YZNdCwFNUTs/s256-rj/photo.jpg",
      "display_name" : "0xff",
      "link" : "https://stackoverflow.com/users/5177046/0xff"
    },
    "creation_date" : 1745504314,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140363190,
    "post_id" : 79589396,
    "body" : "Which types does the <a href=\"https://jakarta.ee/specifications/platform/9/apidocs/jakarta/validation/constraints/min\" rel=\"nofollow noreferrer\">documentation of @Min</a> say it supports?",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1745443766,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}