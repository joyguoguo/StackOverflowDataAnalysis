{
  "question" : {
    "question_id" : 79657242,
    "title" : "What is the real unit of measurement for Font in JavaFX?",
    "body" : "<p>Here is a small excerpt from the Javadoc for the Font#font method.</p>\n<pre><code>/**\n * Searches for an appropriate font based on the font family name and size...\n *\n * @param family The family of the font\n * @param size {@literal The point size of the font. This can be a fractional value,\n * but must not be negative. If the size is &lt; 0 the default size will be\n * used.}\n * @return The font that best fits the specified requirements.\n */\npublic static Font font(String family, double size) {\n    return font(family, null, null, size);\n}\n</code></pre>\n<p>As I understand when we use this method the size should be specified in points (<code>pt</code>). And this is my test code:</p>\n<pre><code>public class TestFx extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n\n        var label1 = new Label(&quot;Hello, World!&quot;);\n        label1.setFont(Font.font(&quot;System&quot;, 40));\n        HBox box1 = new HBox(label1);\n        box1.setStyle(&quot;-fx-background-color: yellow&quot;);\n\n        var label2 = new Label(&quot;Hello, World!&quot;);\n        label2.setStyle(&quot;-fx-font-size: 40pt; -fx-font-family: 'System'&quot;);\n        HBox box2 = new HBox(label2);\n        box2.setStyle(&quot;-fx-background-color: red&quot;);\n\n        var box = new HBox(box1, box2);\n\n        VBox root = new VBox(box);\n        root.setPadding(new Insets(20));\n        Scene scene = new Scene(root, 600, 150);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>And this is the result:</p>\n<p><a href=\"https://i.sstatic.net/ZQHAOJmS.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/ZQHAOJmS.png\" alt=\"enter image description here\" /></a></p>\n<p>As you see, the font sizes of the labels are different. But, if the font size of the second label is set in <code>px</code>:</p>\n<pre><code>label2.setStyle(&quot;-fx-font-size: 40px; -fx-font-family: 'System'&quot;);\n</code></pre>\n<p>then we get:</p>\n<p><a href=\"https://i.sstatic.net/82QGGO7T.png\" rel=\"noreferrer\"><img src=\"https://i.sstatic.net/82QGGO7T.png\" alt=\"enter image description here\" /></a></p>\n<p>So, does this mean that the unit of measurement for the font size in the <code>Font#font</code> method is pixels (<code>px</code>)?</p>\n",
    "tags" : [ "java", "javafx", "javafx-css" ],
    "owner" : {
      "account_id" : 34599290,
      "reputation" : 1188,
      "user_id" : 26656564,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/882f996623517814360ba4bb403102e7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "SilverCube",
      "link" : "https://stackoverflow.com/users/26656564/silvercube"
    },
    "is_answered" : true,
    "view_count" : 186,
    "answer_count" : 1,
    "score" : 6,
    "last_activity_date" : 1749482441,
    "creation_date" : 1749322198,
    "link" : "https://stackoverflow.com/questions/79657242/what-is-the-real-unit-of-measurement-for-font-in-javafx",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79659058,
    "question_id" : 79657242,
    "body" : "<p><em><strong>Preface:</strong> I may be misunderstanding the source code of JavaFX. If so, then my answer is likely irrelevant. Please let me know if I'm mistaken.</em></p>\n<hr />\n<p>Assuming the documentation of <a href=\"https://openjfx.io/javadoc/24/javafx.graphics/javafx/scene/text/Font.html\" rel=\"nofollow noreferrer\"><code>Font</code></a>, which says the size of a font is in points, is correct then this might be a bug in <a href=\"https://openjfx.io/javadoc/24/javafx.graphics/javafx/css/converter/FontConverter.html\" rel=\"nofollow noreferrer\"><code>FontConverter</code></a><sup>1</sup>. If you look at <a href=\"https://github.com/openjdk/jfx/blob/master/modules/javafx.graphics/src/main/java/javafx/css/converter/FontConverter.java\" rel=\"nofollow noreferrer\">the source code</a>, you'll see the font size from CSS is converted to pixels. Both here (line 76):</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Font convert(ParsedValue&lt;ParsedValue[], Font&gt; value, Font font) {\n    ParsedValue[] values = value.getValue();\n    Font aFont = (font != null) ? font : Font.getDefault();\n    String family = (values[0] != null) ? Utils.stripQuotes((String) values[0].convert(aFont)) : aFont.getFamily();\n    // if font size is given in terms of percent, then we have to call\n    // pixels directly in order to pass the multiplier.\n    double fsize = aFont.getSize();\n    if (values[1] != null) {\n        ParsedValue&lt;?, ?&gt; pv = (ParsedValue&lt;?, ?&gt;) values[1].getValue();\n        Size size = (Size) pv.convert(aFont);\n        fsize = size.pixels(aFont.getSize(), aFont);\n    }\n    FontWeight weight = (values[2] != null) ? (FontWeight) values[2].convert(aFont) : FontWeight.NORMAL;\n    FontPosture style = (values[3] != null) ? (FontPosture) values[3].convert(aFont) : FontPosture.REGULAR;\n    Font f = Font.font(family, weight, style, fsize);\n    return f;\n}\n</code></pre>\n</blockquote>\n<p>And here (line 256, in the nested <code>FontSizeConverter</code> class):</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Number convert(ParsedValue&lt;ParsedValue&lt;?, Size&gt;, Number&gt; value, Font font) {\n    final ParsedValue&lt;?, Size&gt; size = value.getValue();\n    return size.convert(font).pixels(font.getSize(), font);\n}\n</code></pre>\n</blockquote>\n<p>In the first snippet you can see it talks about &quot;percent&quot; units, but as far as I can tell this conversion takes place if any size was defined for the font, regardless of unit. Though I have not debugged this code to be sure. And I'm not sure it makes sense to convert to pixels in any case anyway since it then passes the converted value to <code>Font::font(...)</code>, which is documented to take the size in <em>points</em>, not <em>pixels</em>.</p>\n<p>So, when you define the font to have a size of 40 points via CSS, that value gets converted to pixels like so<sup>2</sup>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>40pt * (96dpi / 72ppi) ≈ 40pt * 1.333dpp ≈ 53px\n</code></pre>\n<p>Where the <code>96</code> and <code>72</code> come from <a href=\"https://github.com/openjdk/jfx/blob/11f31146a6f70881945799dadad63bca56ed8a80/modules/javafx.graphics/src/main/java/javafx/css/SizeUnits.java#L376\" rel=\"nofollow noreferrer\">SizeUnits.java</a><sup>3</sup>:</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>// JDK-8114453: The spec says 1px is equal to 0.75pt\n//           72 / 0.75 = 96\nstatic final private double DOTS_PER_INCH = 96.0;\nstatic final private double POINTS_PER_INCH = 72.0;\n</code></pre>\n</blockquote>\n<p>And then the <code>Font</code> class takes that ~53 pixels and treats it as points. Which I suppose might possibly mean the pixel size of the font is scaled by 1.333 <em>again</em> (for a total scale of 2.666) by whatever code is actually responsible for rendering the text based on its font (unless @herrstrietzel is right and JavaFX uses 72dpi in non-CSS contexts instead of 96dpi).</p>\n<p>In short, the difference in size you're seeing would seem to be due to a bug in <code>FontConverter</code>. Or <em>possibly</em> the bug is in the documentation of <code>Font</code> (I suspect this is less likely).</p>\n<hr />\n<p><sup>1. The <code>FontConverter</code> and nested classes are responsible for converting parsed values into a <code>Font</code> object. It only comes into play when the font is defined via CSS.</sup></p>\n<p><sup>2. pt = points, dpi = dots per inch, ppi = points per inch, dpp = &quot;dots per point&quot;, px = pixels.</sup></p>\n<p><sup>3. Link to issue referenced in comment: <a href=\"https://bugs.openjdk.org/browse/JDK-8114453\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8114453</a></sup></p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1749480738,
    "last_activity_date" : 1749482441,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140498865,
    "post_id" : 79657242,
    "body" : "I hadn’t noticed this until now, but the self-contradictory text “…must not be negative. If the size is &lt; 0 the default size will be used.” leads me to wonder if the author wasn’t paying attention.  Which leads me to wonder if the author was similarly inattentive with treating the size argument as a point size.",
    "score" : 2,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1749466242,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140497132,
    "post_id" : 79657242,
    "body" : "Maybe the HiDPI rendering setting (scale setting) of your OS has an effect on this too.",
    "score" : 3,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1749389998,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140496437,
    "post_id" : 79657242,
    "body" : "Just a guess but from your screenshot javafx may use 72dpi internally as a reference but translate <code>pt</code> with 96dpi when converting it to pixels - so the pt rendering gets ~1.333 times larger",
    "score" : 5,
    "owner" : {
      "account_id" : 20463653,
      "reputation" : 19492,
      "user_id" : 15015675,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ff211bb4861cad48fa31f72b1ac9597b?s=256&d=identicon&r=PG",
      "display_name" : "herrstrietzel",
      "link" : "https://stackoverflow.com/users/15015675/herrstrietzel"
    },
    "creation_date" : 1749352934,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79659058" : [ {
      "comment_id" : 140517608,
      "post_id" : 79659058,
      "body" : "Bug seems to have been accepted: <a href=\"https://bugs.openjdk.org/browse/JDK-8359682\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8359682</a>. Waiting a bit to see if some clarifying comments and/or other updates occur before updating my answer.",
      "score" : 0,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49904,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1750083397,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140501004,
      "post_id" : 79659058,
      "body" : "<code>label1.setFont(Font.font(&quot;System&quot;, 40));</code> and <code>label2.setStyle(&quot;-fx-font-size: 40pt; -fx-font-family: &#39;System&#39;&quot;);</code> must give the same result according to the doc. So, either the documentation needs to be updated, or the bug needs to be fixed. But something definitely needs to be done. If you decide not to file a bug report, please let me know and I’ll do it myself.",
      "score" : 0,
      "owner" : {
        "account_id" : 34599290,
        "reputation" : 1188,
        "user_id" : 26656564,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/882f996623517814360ba4bb403102e7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "SilverCube",
        "link" : "https://stackoverflow.com/users/26656564/silvercube"
      },
      "creation_date" : 1749525263,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}