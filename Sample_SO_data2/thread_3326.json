{
  "question" : {
    "question_id" : 79558814,
    "title" : "How to force Spring Boot and Maven to always emit colorized log output (ANSI) even when redirected to a file?",
    "body" : "<p>In my development environment, I start a Spring Boot app using:</p>\n<pre class=\"lang-bash prettyprint-override\"><code> mvn -Dstyle.color=always \\\n        -Dspring.output.ansi.enabled=always \\\n        -Dspring-boot.run.profiles=local \\\n        spring-boot:run&quot; &gt; &quot;${log_file}&quot; 2&gt;&amp;1 &amp;\n</code></pre>\n<p>This works fine, but I noticed that:</p>\n<ul>\n<li>While the <strong>Spring Boot banner and Maven output</strong> are colorized (contain ANSI codes),</li>\n<li>The <strong>Spring Boot log entries after startup</strong> (e.g., timestamps, log level, class names, etc.) do not include any ANSI color codes when redirected to a file.</li>\n</ul>\n<p>However, when I run the same command directly in the terminal (without redirection), the logs are nicely colorized — different parts of the log lines (timestamp, logger, message) have different colors.</p>\n<p>My Questions:</p>\n<p>❓ How can I force Spring Boot to include ANSI color codes in its log output, even when stdout is redirected to a file?</p>\n<p>❓ What tool(s) can I use to follow the log file (tail -f) and still see the colors properly rendered in the terminal?</p>\n",
    "tags" : [ "java", "spring", "spring-boot" ],
    "owner" : {
      "account_id" : 2024158,
      "reputation" : 1295,
      "user_id" : 1968787,
      "user_type" : "registered",
      "accept_rate" : 45,
      "profile_image" : "https://i.sstatic.net/wUmcu.jpg?s=256",
      "display_name" : "Romstar",
      "link" : "https://stackoverflow.com/users/1968787/romstar"
    },
    "is_answered" : true,
    "view_count" : 281,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1744037216,
    "creation_date" : 1743978667,
    "link" : "https://stackoverflow.com/questions/79558814/how-to-force-spring-boot-and-maven-to-always-emit-colorized-log-output-ansi-ev",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79558989,
    "question_id" : 79558814,
    "body" : "<p>When using <code>mvn spring-boot:run</code>, the application is executed in a forked process, so setting properties on the Maven command line (e.g., <code>-Dspring.output.ansi.enabled=ALWAYS</code>) will not affect the application itself. See <a href=\"https://docs.spring.io/spring-boot/maven-plugin/run.html\" rel=\"nofollow noreferrer\">Spring Maven Plugin docs</a> for details.</p>\n<p>In your case, the observed behaviour is the default behaviour of Spring Boot logging (see <a href=\"https://docs.spring.io/spring-boot/reference/features/logging.html#features.logging.console-output.color-coded\" rel=\"nofollow noreferrer\">logging docs</a>) as it auto detects whether or not an output supports ANSI:</p>\n<ul>\n<li>Without redirection, Spring Boot detects that the application is running in a terminal that supports ANSI, so the color-coded output is enabled</li>\n<li>With redirection, ANSI support is assumed to be absent, and color-coded output is disabled automatically.</li>\n</ul>\n<p>To force color-coded output even when redirecting logs, you have two options:</p>\n<p><strong>Option 1</strong> - Set in application config (recommended)</p>\n<p>Add to <code>application.properties</code> or <code>application.yml</code></p>\n<pre><code>spring.output.ansi.enabled=ALWAYS\n</code></pre>\n<p><strong>Option 2</strong> - Pass as a JVM argument via plugin config</p>\n<p>In your <code>pom.xml</code>, configure the Spring Boot Maven plugin:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;jvmArguments&gt;-Dspring.output.ansi.enabled=ALWAYS&lt;/jvmArguments&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>On my machine (MacBook), <code>tail</code> displays the colors properly when a file has color-coded sequences.\nFor tools such as <code>less</code>, you need to use <code>-R</code> to force raw display.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16043894,
      "reputation" : 913,
      "user_id" : 11579604,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/z1aaG.png?s=256",
      "display_name" : "Patrycja Wegrzynowicz",
      "link" : "https://stackoverflow.com/users/11579604/patrycja-wegrzynowicz"
    },
    "creation_date" : 1743993602,
    "last_activity_date" : 1744037216,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}