{
  "question" : {
    "question_id" : 79837267,
    "title" : "Hibernate LazyInitializationException - Cannot evaluate .toString()",
    "body" : "<p>I'm migrating from Spring Boot 2.7 to Spring Boot 3 and this means i'm migrating from Hibernate 5 to Hibernate 6.</p>\n<p>I'm meeting some LazyInitializationException .</p>\n<p>This is part of a entity of mine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;base_doc_class&quot;, schema = &quot;anag&quot;)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\npublic class BaseDocClass extends AuditTrailEntity implements Serializable {\n\n\n\n    @EqualsAndHashCode.Exclude\n    @ToString.Exclude\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;baseDocClass&quot;)\n    private Set&lt;UserDocClass&gt; userDocClass;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;parent_id&quot;)\n    private BaseDocClass parentClass;\n\n\n}\n</code></pre>\n<p>And this is my other entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Table(name = &quot;user_doc_class&quot;, schema = &quot;anag&quot;)\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\npublic class UserDocClass extends AuditTrailEntity implements Serializable {\n\n\n\n    @ManyToOne\n    @JsonIgnore\n    @JoinColumn(name = &quot;base_doc_class_id&quot;)\n    private BaseDocClass baseDocClass;\n\n    @EqualsAndHashCode.Exclude\n    @ToString.Exclude\n    @JsonIgnore\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;userDocClass&quot;)\n    private Set&lt;ArchiveDocclassMimetype&gt; archiveDocclassMimetype;\n\n\n}\n</code></pre>\n<p>Since I passed to Hibernate 6 I'm meeting Hibernate Lazy Exception each time I make a get of an entity from another entity, this is a simple code sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>pdv.setParentdocclassname(syncPdvBucketHolder.getUserDocClass().getBaseDocClass().getName());\n</code></pre>\n<p>The BaseDocClass contained by the UserDocClass has only the id, the other attributes are empty and when I try to run that code I'm meeting this exception (package name censored):</p>\n<pre class=\"lang-none prettyprint-override\"><code>could not initialize proxy [****.entity.anag.BaseDocClass#22897e28-c859-401a-a19e-82216f64a891] - no Session\n</code></pre>\n<p>I tried most solutions I read online to solve this. I tried adding <code>@ManyToOne(fetch = fetchtype.eager)</code> annotation on attibute columns but it didn't work. I tried even using things like the Spring properties:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  jpa:\n    open-in-view: true\n    properties:\n      hibernate:\n        enable_lazy_load_no_trans: true\n</code></pre>\n<p>But it still doesn't work.\nI tried using <code>@Transactional</code> annotation on method and it didn't work.</p>\n<p>Do you have any other ideas?</p>\n<p>Here's the complete stacktrace:</p>\n<pre><code>org.hibernate.LazyInitializationException: could not initialize proxy [****.entity.anag.BaseDocClass#22897e28-c859-401a-a19e-82216f64a891] - no Session\n    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:164)\n    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:309)\n    at org.hibernate.proxy.pojo.bytebuddy.ByteBuddyInterceptor.intercept(ByteBuddyInterceptor.java:44)\n    at org.hibernate.proxy.ProxyConfiguration$InterceptorDispatcher.intercept(ProxyConfiguration.java:95)\n    at ****.entity.anag.BaseDocClass$HibernateProxy$uYsjXwmW.getName(Unknown Source)\n    at ****.service.generic.GenericPdvService.createPdv(GenericPdvService.java:652)\n    at ****.pdvupload.service.PdvDepositService.savePdv(PdvDepositService.java:126)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2570)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2366)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2570)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2366)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onComplete(MonoFlatMap.java:189)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2572)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:2050)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2570)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2570)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.request(MonoFlatMap.java:194)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:291)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onSubscribe(MonoFlatMap.java:117)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxHide$SuppressFuseableSubscriber.onNext(FluxHide.java:137)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2570)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2366)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.Mono.subscribe(Mono.java:4576)\n    at reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:205)\n    at reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:63)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onNext(FluxPeekFuseable.java:503)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onComplete(FluxDefaultIfEmpty.java:134)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:152)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onComplete(FluxFilterFuseable.java:171)\n    at reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2572)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.request(FluxFilterFuseable.java:191)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.request(FluxDefaultIfEmpty.java:98)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2366)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onSubscribe(FluxOnErrorResume.java:74)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.onSubscribe(Operators.java:2050)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableSubscriber.onSubscribe(FluxFilterFuseable.java:87)\n    at reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:76)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122)\n    at reactor.core.publisher.MonoUsingWhen$MonoUsingWhenSubscriber.deferredComplete(MonoUsingWhen.java:268)\n    at reactor.core.publisher.FluxUsingWhen$CommitInner.onComplete(FluxUsingWhen.java:532)\n    at reactor.core.publisher.Operators.complete(Operators.java:137)\n    at reactor.core.publisher.MonoEmpty.subscribe(MonoEmpty.java:46)\n    at reactor.core.publisher.Mono.subscribe(Mono.java:4576)\n    at reactor.core.publisher.FluxUsingWhen$UsingWhenSubscriber.onComplete(FluxUsingWhen.java:389)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:246)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2096)\n    at reactor.core.publisher.MonoTakeLastOne$TakeLastOneSubscriber.onComplete(MonoTakeLastOne.java:162)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2230)\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onComplete(MonoFlatMapMany.java:261)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2230)\n    at reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102)\n    at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:83)\n    at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245)\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:176)\n    at com.mongodb.reactivestreams.client.internal.MongoOperationPublisher.lambda$sinkToCallback$33(MongoOperationPublisher.java:524)\n    at com.mongodb.reactivestreams.client.internal.OperationExecutorImpl.lambda$execute$9(OperationExecutorImpl.java:126)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.operation.AsyncOperationHelper.lambda$exceptionTransformingCallback$17(AsyncOperationHelper.java:335)\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97)\n    at com.mongodb.internal.async.function.RetryingAsyncCallbackSupplier$RetryingCallback.onResult(RetryingAsyncCallbackSupplier.java:123)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97)\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.lambda$executeBulkWriteBatchAsync$9(MixedBulkWriteOperation.java:352)\n    at com.mongodb.internal.async.function.AsyncCallbackLoop$LoopingCallback.onResult(AsyncCallbackLoop.java:85)\n    at com.mongodb.internal.async.function.AsyncCallbackLoop$LoopingCallback.onResult(AsyncCallbackLoop.java:62)\n    at com.mongodb.internal.async.function.LoopState.breakAndCompleteIf(LoopState.java:113)\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.lambda$executeBulkWriteBatchAsync$8(MixedBulkWriteOperation.java:300)\n    at com.mongodb.internal.async.function.AsyncCallbackLoop$LoopingCallback.onResult(AsyncCallbackLoop.java:83)\n    at com.mongodb.internal.async.function.AsyncCallbackLoop$LoopingCallback.onResult(AsyncCallbackLoop.java:62)\n    at com.mongodb.internal.operation.MixedBulkWriteOperation.lambda$executeBulkWriteBatchAsync$7(MixedBulkWriteOperation.java:322)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.lambda$executeAsync$0(DefaultServer.java:249)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.connection.CommandProtocolImpl.lambda$executeAsync$0(CommandProtocolImpl.java:88)\n    at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.lambda$sendAndReceiveAsync$1(DefaultConnectionPool.java:774)\n    at com.mongodb.internal.connection.UsageTrackingInternalConnection.lambda$sendAndReceiveAsync$1(UsageTrackingInternalConnection.java:150)\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:47)\n    at com.mongodb.internal.connection.InternalStreamConnection.lambda$sendCommandMessageAsync$0(InternalStreamConnection.java:532)\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:826)\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:789)\n    at com.mongodb.internal.connection.InternalStreamConnection$3.completed(InternalStreamConnection.java:648)\n    at com.mongodb.internal.connection.InternalStreamConnection$3.completed(InternalStreamConnection.java:645)\n    at com.mongodb.internal.connection.AsynchronousChannelStream$BasicCompletionHandler.completed(AsynchronousChannelStream.java:245)\n    at com.mongodb.internal.connection.AsynchronousChannelStream$BasicCompletionHandler.completed(AsynchronousChannelStream.java:228)\n    at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:129)\n    at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:284)\n    at java.base/sun.nio.ch.WindowsAsynchronousSocketChannelImpl$ReadTask.completed(WindowsAsynchronousSocketChannelImpl.java:586)\n    at java.base/sun.nio.ch.Iocp$EventHandlerTask.run(Iocp.java:387)\n    at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:113)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:842)\n</code></pre>\n",
    "tags" : [ "java", "spring", "hibernate" ],
    "owner" : {
      "account_id" : 5178848,
      "reputation" : 5,
      "user_id" : 4145112,
      "user_type" : "registered",
      "accept_rate" : 12,
      "profile_image" : "https://www.gravatar.com/avatar/85a447bfcf15f47e4764fe2944fe7c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Removed",
      "link" : "https://stackoverflow.com/users/4145112/removed"
    },
    "is_answered" : false,
    "view_count" : 68,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764792298,
    "creation_date" : 1764790978,
    "link" : "https://stackoverflow.com/questions/79837267/hibernate-lazyinitializationexception-cannot-evaluate-tostring",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140889372,
    "post_id" : 79837267,
    "body" : "I managed to solve the problem goind back to root problem: the query. It was a native query and i re-writed it on HQL using a FETCH JOIN .Since i&#39;m using Hibernate 6 i&#39;m meeting problems with every native query, seems they don&#39;t use anymore the annotations on entities, mah.   I&#39;m rewriting every native query and i&#39;m done.",
    "score" : 0,
    "owner" : {
      "account_id" : 5178848,
      "reputation" : 5,
      "user_id" : 4145112,
      "user_type" : "registered",
      "accept_rate" : 12,
      "profile_image" : "https://www.gravatar.com/avatar/85a447bfcf15f47e4764fe2944fe7c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Removed",
      "link" : "https://stackoverflow.com/users/4145112/removed"
    },
    "creation_date" : 1764952192,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140887018,
    "post_id" : 79837267,
    "body" : "Hibernate 6 should really be considered Hibernate 1 again, it&#39;s a reboot. They internalized the JPA support (hence why hibernate-entitymanager is no longer a thing) and cranked up the JPA compliance to full. So essentially you&#39;re not upgrading Hibernate, you&#39;re reimplementing it. This question really needs to have the actual service code to be in any shape or form answerable, it can&#39;t be trivialized away.",
    "score" : 0,
    "owner" : {
      "account_id" : 187094,
      "reputation" : 5301,
      "user_id" : 424903,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/8oHZF.png?s=256",
      "display_name" : "Gimby",
      "link" : "https://stackoverflow.com/users/424903/gimby"
    },
    "creation_date" : 1764843931,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886769,
    "post_id" : 79837267,
    "body" : "You are using lombok which generates terrible <code>toString</code> for JPA. Don&#39;t use lombok or at least don&#39;t use <code>@Data</code> but only <code>@Getter</code> / <code>@Setter</code> and write <code>toString</code>, <code>equals</code> and <code>hashCode</code> yourself. More info in <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">this blog post by me</a>. Next to that you are using reactive with Hibernate which doesn&#39;t really match, as you might end up on a different thread processing the entity leading to loosing the underlying session/connection to the DB.",
    "score" : 1,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1764834399,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886364,
    "post_id" : 79837267,
    "body" : "Then there is something really wrong with your configuration as the stack trace shows that is trying to perform the operation in Mongo (otherwise you wouldn&#39;t see MongoDB classes in the stacktrace)",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1764805224,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886268,
    "post_id" : 79837267,
    "body" : "@JorgeCampos the object where i&#39;m getting error is from mysql. The pdv i want to save is on mongodb",
    "score" : 0,
    "owner" : {
      "account_id" : 5178848,
      "reputation" : 5,
      "user_id" : 4145112,
      "user_type" : "registered",
      "accept_rate" : 12,
      "profile_image" : "https://www.gravatar.com/avatar/85a447bfcf15f47e4764fe2944fe7c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Removed",
      "link" : "https://stackoverflow.com/users/4145112/removed"
    },
    "creation_date" : 1764799286,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886225,
    "post_id" : 79837267,
    "body" : "I&#39;m not sure if there is any underlying cause because this is on MongoDB, never worked with it with Hibernate. unfortunately I can&#39;t help further. Will keep an eye as to learn if someone answers it.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1764797377,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886209,
    "post_id" : 79837267,
    "body" : "I already put a @Transactional on that method but it doesen&#39;t works",
    "score" : 0,
    "owner" : {
      "account_id" : 5178848,
      "reputation" : 5,
      "user_id" : 4145112,
      "user_type" : "registered",
      "accept_rate" : 12,
      "profile_image" : "https://www.gravatar.com/avatar/85a447bfcf15f47e4764fe2944fe7c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Removed",
      "link" : "https://stackoverflow.com/users/4145112/removed"
    },
    "creation_date" : 1764796466,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886179,
    "post_id" : 79837267,
    "body" : "flux and hibernate don&#39;t mix well. You need to put transactional on PdvDepositService.savePdv",
    "score" : 0,
    "owner" : {
      "account_id" : 4497436,
      "reputation" : 20796,
      "user_id" : 3656904,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/8bdbd1f89f8907e8e8b15ab88c084c65?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "talex",
      "link" : "https://stackoverflow.com/users/3656904/talex"
    },
    "creation_date" : 1764794978,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886118,
    "post_id" : 79837267,
    "body" : "@JorgeCampos stacktrace added. I followed this guide <a href=\"https://docs.hibernate.org/orm/6.0/migration-guide/\" rel=\"nofollow noreferrer\">docs.hibernate.org/orm/6.0/migration-guide</a> but i didn&#39;t find anything about this. Only the suggestion to use LAZY (default choice).",
    "score" : 0,
    "owner" : {
      "account_id" : 5178848,
      "reputation" : 5,
      "user_id" : 4145112,
      "user_type" : "registered",
      "accept_rate" : 12,
      "profile_image" : "https://www.gravatar.com/avatar/85a447bfcf15f47e4764fe2944fe7c91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Removed",
      "link" : "https://stackoverflow.com/users/4145112/removed"
    },
    "creation_date" : 1764792372,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140886095,
    "post_id" : 79837267,
    "body" : "Add the whole stacktrace in your post please. Also have you reviewed the migration guide from both spring and hibernate? You might have missed configuration steps (or even fixing imports) on the migration.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1764791345,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}