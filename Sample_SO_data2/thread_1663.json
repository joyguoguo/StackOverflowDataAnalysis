{
  "question" : {
    "question_id" : 79689426,
    "title" : "How can I truncate time to tenths of a second?",
    "body" : "<p>In Java, I can easily truncate a temporal value (<a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/LocalTime.html\" rel=\"nofollow noreferrer\"><code>LocalTime</code></a>, <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>, etc.) to seconds, milliseconds, or any other value that has an existing <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/ChronoUnit.html\" rel=\"nofollow noreferrer\"><code>ChronoUnit</code></a> defined:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalTime time = LocalTime.now();\n\nSystem.out.println(time);\nSystem.out.println(time.truncatedTo(ChronoUnit.MINUTES));\nSystem.out.println(time.truncatedTo(ChronoUnit.SECONDS));\nSystem.out.println(time.truncatedTo(ChronoUnit.MILLIS));\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>15:00:55.322141\n15:00\n15:00:55\n15:00:55.322\n</code></pre>\n<p>How can I truncate a temporal value to tenths of a second?</p>\n<p>I can certainly roll my own &quot;tenths of second&quot; <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/TemporalUnit.html\" rel=\"nofollow noreferrer\"><code>TemporalUnit</code></a> and truncate to that.  However, that's a bit verbose, so I was hoping to avoid that if possible.</p>\n",
    "tags" : [ "java", "java-time" ],
    "owner" : {
      "account_id" : 1119690,
      "reputation" : 23322,
      "user_id" : 1108305,
      "user_type" : "registered",
      "accept_rate" : 47,
      "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
      "display_name" : "M. Justin",
      "link" : "https://stackoverflow.com/users/1108305/m-justin"
    },
    "is_answered" : true,
    "view_count" : 238,
    "answer_count" : 4,
    "score" : 2,
    "last_activity_date" : 1751726573,
    "creation_date" : 1751573804,
    "link" : "https://stackoverflow.com/questions/79689426/how-can-i-truncate-time-to-tenths-of-a-second",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79689464,
    "question_id" : 79689426,
    "body" : "<p>You can do it without implementing a <code>TemporalUnit</code> by mathematically truncating the nanoseconds value:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(time\n                .withNano((time.getNano() / 100_000_000) * 100_000_000));\n</code></pre>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1601399,
      "reputation" : 638,
      "user_id" : 1482356,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d6160b6e40d230fa92c6da8072b2f7e5?s=256&d=identicon&r=PG",
      "display_name" : "Peter Adrian",
      "link" : "https://stackoverflow.com/users/1482356/peter-adrian"
    },
    "creation_date" : 1751577214,
    "last_activity_date" : 1751726573,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79689552,
    "question_id" : 79689426,
    "body" : "<p>A <code>TemporalAdjuster</code> can be implemented like</p>\n<pre class=\"lang-java prettyprint-override\"><code>TemporalAdjuster TENTH_MILLI = new TemporalAdjuster() {\n\n    private static final int TENTH = 100_000_000;\n\n    // WARNING: changing to a different field may return unexpected results\n    private static final TemporalField FIELD = ChronoField.NANO_OF_SECOND;\n\n    @Override\n    public Temporal adjustInto(Temporal temporal) {\n        return temporal.isSupported(FIELD) ?\n                   temporal.with( FIELD, (temporal.get(FIELD) / TENTH) * TENTH ) :\n                   temporal;\n    }\n}\n</code></pre>\n<p>and be used with all classes implementing <code>Temporal</code> as in:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println( LocalTime.now().with(TENTH_MILLI) );\nSystem.out.println( LocalDateTime.now().with(TENTH_MILLI) );\nSystem.out.println( Instant.now().with(TENTH_MILLI) );\nSystem.out.println( OffsetDateTime.now().with(TENTH_MILLI) );\nSystem.out.println( OffsetTime.now().with(TENTH_MILLI) );\nSystem.out.println( ZonedDateTime.now().with(TENTH_MILLI) );\nSystem.out.println( LocalDate.now().with(TENTH_MILLI) );     // no changes\nSystem.out.println( YearMonth.now().with(TENTH_MILLI) );     // no changes\n</code></pre>\n<hr />\n<p>Note:<br />\nconsider throwing an Exception if <code>NANO_OF_SECOND</code> is not supported. This code will eventually fail if used with a non standard Java <code>Temporal</code>, e.g. one that uses separate milliseconds and nanoseconds fields</p>\n<hr />\n<p>Partially based on Peter Adrian's <a href=\"https://stackoverflow.com/a/79689464/85421\">answer</a>.</p>\n",
    "score" : 5,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1751584758,
    "last_activity_date" : 1751613714,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79689427,
    "question_id" : 79689426,
    "body" : "<p>As mentioned in the question, one solution is to create your own &quot;tenths of second&quot; <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/TemporalUnit.html\" rel=\"nofollow noreferrer\"><code>TemporalUnit</code></a>, and use that.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static class TenthsOfSecond implements TemporalUnit {\n    public static final TenthsOfSecond INSTANCE = new TenthsOfSecond();\n\n    @Override public Duration getDuration() { return Duration.ofMillis(100); }\n    @Override public boolean isDurationEstimated() { return false; }\n    @Override public boolean isDateBased() { return false; }\n    @Override public boolean isTimeBased() { return true; }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    @Override\n    public &lt;R extends Temporal&gt; R addTo(R temporal, long amount) {\n        return (R) temporal.plus(amount * 100, ChronoUnit.MILLIS);\n    }\n\n    @Override\n    public long between(Temporal temporal1Inclusive, Temporal temporal2Exclusive) {\n        return temporal1Inclusive.until(temporal2Exclusive, ChronoUnit.MILLIS) / 100;\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>time.truncatedTo(TenthsOfSecond.INSTANCE)\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(time.truncatedTo(TenthsOfSecond.INSTANCE)); // 15:00:55.300\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1119690,
      "reputation" : 23322,
      "user_id" : 1108305,
      "user_type" : "registered",
      "accept_rate" : 47,
      "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
      "display_name" : "M. Justin",
      "link" : "https://stackoverflow.com/users/1108305/m-justin"
    },
    "creation_date" : 1751573804,
    "last_activity_date" : 1751581110,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79689466,
    "question_id" : 79689426,
    "body" : "<p><a href=\"https://stackoverflow.com/a/79689427/1108305\">Your self-answer</a> that creates a custom <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/time/temporal/TemporalUnit.html\" rel=\"nofollow noreferrer\"><code>TemporalUnit</code></a> shows the beautiful solution to your question. I would take it without hesitation. However, you mentioned that it is wordy and that you want something briefer. So:</p>\n<pre><code>    LocalTime time = LocalTime.now();\n    System.out.println(time);\n\n    LocalTime inMillis = time.truncatedTo(ChronoUnit.MILLIS);\n    LocalTime inTenths = inMillis.with(ChronoField.MILLI_OF_SECOND,\n            inMillis.get(ChronoField.MILLI_OF_SECOND) / 100 * 100);\n    System.out.println(inTenths);\n</code></pre>\n<p>Example output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>23:16:52.679457431\n23:16:52.600\n</code></pre>\n",
    "score" : 3,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 42862496,
      "reputation" : 31,
      "user_id" : 30960140,
      "user_type" : "unregistered",
      "profile_image" : "https://www.gravatar.com/avatar/45b92db05c93bfa29290d61ee56faccd?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arki Silva",
      "link" : "https://stackoverflow.com/users/30960140/arki-silva"
    },
    "creation_date" : 1751577428,
    "last_activity_date" : 1751652579,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140569342,
    "post_id" : 79689426,
    "body" : "@M.Justin the verbose way of saying it is easier to understand I just wanted to share some dumb info I found via googling lol",
    "score" : 1,
    "owner" : {
      "account_id" : 20426516,
      "reputation" : 59,
      "user_id" : 14986403,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/7c06e3a61b66119ccad5c4f186668828?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "liampace",
      "link" : "https://stackoverflow.com/users/14986403/liampace"
    },
    "creation_date" : 1751846985,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140569328,
    "post_id" : 79689426,
    "body" : "@liampace True (&quot;deci-&quot; being the standard metric prefix for tenth), but it&#39;s not a common term, so I stuck with the more cumbersome &quot;tenths of a second&quot;.",
    "score" : 0,
    "owner" : {
      "account_id" : 1119690,
      "reputation" : 23322,
      "user_id" : 1108305,
      "user_type" : "registered",
      "accept_rate" : 47,
      "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
      "display_name" : "M. Justin",
      "link" : "https://stackoverflow.com/users/1108305/m-justin"
    },
    "creation_date" : 1751845960,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140569327,
    "post_id" : 79689426,
    "body" : "@g00se I&#39;m actually just comparing values within a test, so the formatting isn&#39;t necessary for my needs.  But yes, that would be a good format for it.",
    "score" : 0,
    "owner" : {
      "account_id" : 1119690,
      "reputation" : 23322,
      "user_id" : 1108305,
      "user_type" : "registered",
      "accept_rate" : 47,
      "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
      "display_name" : "M. Justin",
      "link" : "https://stackoverflow.com/users/1108305/m-justin"
    },
    "creation_date" : 1751845901,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140567077,
    "post_id" : 79689426,
    "body" : "And, surely if you want deciseconds then you&#39;re going to want a format of 15:00:55.0 thru 15:00:55.9? (Just saying as so far I&#39;ve seen this format from no-one)",
    "score" : 0,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1751730547,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140567007,
    "post_id" : 79689426,
    "body" : "Side note: some useless trivia for you is that a tenth of a second is called a decisecond",
    "score" : 0,
    "owner" : {
      "account_id" : 20426516,
      "reputation" : 59,
      "user_id" : 14986403,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/7c06e3a61b66119ccad5c4f186668828?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "liampace",
      "link" : "https://stackoverflow.com/users/14986403/liampace"
    },
    "creation_date" : 1751728161,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140563918,
    "post_id" : 79689426,
    "body" : "@LouisWasserman This is shorter: <a href=\"https://stackoverflow.com/a/79689464/1108305\">stackoverflow.com/a/79689464/1108305</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 1119690,
      "reputation" : 23322,
      "user_id" : 1108305,
      "user_type" : "registered",
      "accept_rate" : 47,
      "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
      "display_name" : "M. Justin",
      "link" : "https://stackoverflow.com/users/1108305/m-justin"
    },
    "creation_date" : 1751602913,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140563310,
    "post_id" : 79689426,
    "body" : "There isn&#39;t a shorter way.  You will have to deal with it.",
    "score" : 3,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1751573952,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79689464" : [ {
      "comment_id" : 140563882,
      "post_id" : 79689464,
      "body" : "Confirmed this works.",
      "score" : 0,
      "owner" : {
        "account_id" : 1119690,
        "reputation" : 23322,
        "user_id" : 1108305,
        "user_type" : "registered",
        "accept_rate" : 47,
        "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
        "display_name" : "M. Justin",
        "link" : "https://stackoverflow.com/users/1108305/m-justin"
      },
      "creation_date" : 1751601009,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563600,
      "post_id" : 79689464,
      "body" : "yes @user85421, you can skip the truncation.",
      "score" : 0,
      "owner" : {
        "account_id" : 1601399,
        "reputation" : 638,
        "user_id" : 1482356,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/d6160b6e40d230fa92c6da8072b2f7e5?s=256&d=identicon&r=PG",
        "display_name" : "Peter Adrian",
        "link" : "https://stackoverflow.com/users/1482356/peter-adrian"
      },
      "creation_date" : 1751583802,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563586,
      "post_id" : 79689464,
      "body" : "why the <code>truncatedTo(ChronoUnit.MILLIS))</code> ? -- <code>getNano()</code> and <code>withNano()</code> already <i>work</i> on  the nano-of-second field, so the time is already being truncated by the previous step (<code>withNano(...</code>)",
      "score" : 0,
      "owner" : {
        "account_id" : 31180,
        "reputation" : 29752,
        "user_id" : 85421,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
        "display_name" : "user85421",
        "link" : "https://stackoverflow.com/users/85421/user85421"
      },
      "creation_date" : 1751582968,
      "content_license" : "CC BY-SA 4.0"
    } ],
    "79689427" : [ {
      "comment_id" : 140563899,
      "post_id" : 79689427,
      "body" : "@Anonymous I&#39;m not sure it&#39;s &quot;wrong&quot; to throw an <code>ArithmeticException</code> earlier than is strictly necessary.  The Javadocs say it can be thrown &quot;if numeric overflow occurs&quot;, but they don&#39;t impose any requirements regarding e.g. handling the largest possible values without throwing the exception.  That said, something like Slaw&#39;s approach is certainly more robust and handles a larger range of possible values without overflowing.  My implementation is certainly more than fine for realistic times within human lifetimes.",
      "score" : 1,
      "owner" : {
        "account_id" : 1119690,
        "reputation" : 23322,
        "user_id" : 1108305,
        "user_type" : "registered",
        "accept_rate" : 47,
        "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
        "display_name" : "M. Justin",
        "link" : "https://stackoverflow.com/users/1108305/m-justin"
      },
      "creation_date" : 1751601581,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563662,
      "post_id" : 79689427,
      "body" : "Found the bug related to the <code>ArithmeticException</code>: <a href=\"https://bugs.openjdk.org/browse/JDK-8273369\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8273369</a>",
      "score" : 2,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49904,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1751586447,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563603,
      "post_id" : 79689427,
      "body" : "@Anonymous I think <a href=\"https://codeshare.io/5vAbZK\" rel=\"nofollow noreferrer\">this implementation</a> works (link expires in 24 hours). At least, it seems to when running on Java 18+. I get an <code>ArithmeticException</code> on Java 17 or lower when computing the leftover milliseconds for some reason.",
      "score" : 1,
      "owner" : {
        "account_id" : 8532578,
        "reputation" : 49904,
        "user_id" : 6395627,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Slaw",
        "link" : "https://stackoverflow.com/users/6395627/slaw"
      },
      "creation_date" : 1751583831,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563450,
      "post_id" : 79689427,
      "body" : "Thanks. I said it was complicated. <code>ChronoUnit.SECONDS.between(Instant.MIN, Instant.MAX) * 10</code> yields 631 139 040 316 223 990, so I would expect the difference in 10ths of seconds to be roughly this number. But <code>TenthsOfSecond.INSTANCE.between(Instant.MIN, Instant.MAX)</code> causes <code>ArithmeticException: long overflow</code>.",
      "score" : 1,
      "owner" : {
        "account_id" : 7612423,
        "reputation" : 87409,
        "user_id" : 5772882,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Anonymous",
        "link" : "https://stackoverflow.com/users/5772882/anonymous"
      },
      "creation_date" : 1751578333,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563432,
      "post_id" : 79689427,
      "body" : "@Anonymous I&#39;ve now fixed it. I believe it successfully covers all edge cases as well (given that int division truncates as required by the <code>between</code> method spec).",
      "score" : 0,
      "owner" : {
        "account_id" : 1119690,
        "reputation" : 23322,
        "user_id" : 1108305,
        "user_type" : "registered",
        "accept_rate" : 47,
        "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
        "display_name" : "M. Justin",
        "link" : "https://stackoverflow.com/users/1108305/m-justin"
      },
      "creation_date" : 1751577334,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563398,
      "post_id" : 79689427,
      "body" : "@Anonymous  This is the exact same implementation used by the built-in <code>ChronoUnit</code> classes, so I had incorrectly assumed that it would just work.  I see upon testing that you&#39;re right.  I&#39;ll fix this.",
      "score" : 1,
      "owner" : {
        "account_id" : 1119690,
        "reputation" : 23322,
        "user_id" : 1108305,
        "user_type" : "registered",
        "accept_rate" : 47,
        "profile_image" : "https://www.gravatar.com/avatar/4c16849c5f9444a685f62cdc2a15c3ac?s=256&d=identicon&r=PG",
        "display_name" : "M. Justin",
        "link" : "https://stackoverflow.com/users/1108305/m-justin"
      },
      "creation_date" : 1751576452,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140563392,
      "post_id" : 79689427,
      "body" : "It works for the question asked (+1). Your “implementation” of <code>between()</code> causes an infinite recursion. )A non-recursive implementation that works in most cases will not be hard to write; to cover all edge cases is more complicated.)",
      "score" : 0,
      "owner" : {
        "account_id" : 7612423,
        "reputation" : 87409,
        "user_id" : 5772882,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/8283c64511fa80afed5259d10850168f?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Anonymous",
        "link" : "https://stackoverflow.com/users/5772882/anonymous"
      },
      "creation_date" : 1751576288,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}