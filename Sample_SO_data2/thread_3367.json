{
  "question" : {
    "question_id" : 79555424,
    "title" : "Java process ocassionally dies on Linux after few hrs execution: How do I root cause the reason?",
    "body" : "<ul>\n<li>A java process I launch on Linux, occasionally dies.</li>\n<li>Its a large piece of Java code that we inherited (we did not write it).</li>\n<li>We have access to source code.</li>\n<li>I am able to monitor the process in Jconsole whilst it is running.</li>\n<li>The process randomly and quite often (but not always) dies after few\nhrs of execution. It takes several days for complete execution.</li>\n</ul>\n<p>How do I debug what's going on?</p>\n<p>It is not possible to add print statements throughout the code; or keep watching Jconsole for hours.</p>\n<ul>\n<li>Can we run the process so that when it exits, we get a heap dump to\nanalyze?</li>\n<li>When the process exits, what can we do to capture as much useful info\nas possible to help with root causing the issue?</li>\n<li>Which other tools are available to help us with this type of\ninvestigation?</li>\n</ul>\n",
    "tags" : [ "java", "linux", "terminate" ],
    "owner" : {
      "account_id" : 350472,
      "reputation" : 1236,
      "user_id" : 686358,
      "user_type" : "registered",
      "accept_rate" : 68,
      "profile_image" : "https://www.gravatar.com/avatar/af756ab91cd3b054657acf1d8692c0a8?s=256&d=identicon&r=PG",
      "display_name" : "Santosh Tiwari",
      "link" : "https://stackoverflow.com/users/686358/santosh-tiwari"
    },
    "is_answered" : true,
    "view_count" : 121,
    "closed_date" : 1746259206,
    "answer_count" : 2,
    "score" : -3,
    "last_activity_date" : 1749333041,
    "creation_date" : 1743772524,
    "link" : "https://stackoverflow.com/questions/79555424/java-process-ocassionally-dies-on-linux-after-few-hrs-execution-how-do-i-root-c",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79555465,
    "question_id" : 79555424,
    "body" : "<p>I would start by logging the output to a file: <code>java YourJavaApp &gt; output.log 2&gt;&amp;1</code>.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 31895649,
      "reputation" : 19,
      "user_id" : 27693742,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/858937e500a0b6089e805efd75f37e47?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "exciting_davinci",
      "link" : "https://stackoverflow.com/users/27693742/exciting-davinci"
    },
    "creation_date" : 1743773593,
    "last_activity_date" : 1743773593,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79555891,
    "question_id" : 79555424,
    "body" : "<p>Check your resources.  Most of my failing java processes have been a result of memory exhaustion.</p>\n<p>Check /var/log/messages for &quot;oom&quot; (out of memory) oomkiller will literally axe most any process to recover memory, it's not always the process using the most memory.</p>\n<p>Check your available memory using <code>free</code> then check how much memory you are assigning your java process by looking for the -Xms and -Xmx parameters either using <code>ps -ef</code> or by reviewing your unit file if the process is running as a service.</p>\n<p>When launching your application pass the parameter <code>-XX:+HeapDumpOnOutOfMemoryError</code> and if the issue is memory related it will produce a heap dump for you to inspect.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 41192455,
      "reputation" : 9,
      "user_id" : 30168706,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a1a89fab6d5d39db033d437a570a576d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ben",
      "link" : "https://stackoverflow.com/users/30168706/ben"
    },
    "creation_date" : 1743785350,
    "last_activity_date" : 1743785350,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140447748,
    "post_id" : 79555424,
    "body" : "My builds suffered for three years from silent random failures. Turns out Linux kernel and Docker engine kill processes exceeding memory quota. Linux logs the problem, but Docker does not! Unfortunately, Java fails to detect the quota and consumes more memory than it is given. When you observe randoms failures and memory consumption is close to a quota, try <i>reducing</i> maximum heap size with <code>-Xmx</code> VM argument.",
    "score" : 0,
    "owner" : {
      "account_id" : 43022,
      "reputation" : 24624,
      "user_id" : 125562,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://i.sstatic.net/SdIqA.png?s=256",
      "display_name" : "Basilevs",
      "link" : "https://stackoverflow.com/users/125562/basilevs"
    },
    "creation_date" : 1747872334,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140300098,
    "post_id" : 79555424,
    "body" : "Try checking the system logs to see if the process was killed by the oomkiller.",
    "score" : 1,
    "owner" : {
      "account_id" : 47283,
      "reputation" : 723470,
      "user_id" : 139985,
      "user_type" : "registered",
      "accept_rate" : 69,
      "profile_image" : "https://www.gravatar.com/avatar/147c5a9cc1feec049c50da791ac7d144?s=256&d=identicon&r=PG",
      "display_name" : "Stephen C",
      "link" : "https://stackoverflow.com/users/139985/stephen-c"
    },
    "creation_date" : 1743781509,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140299839,
    "post_id" : 79555424,
    "body" : "@g00se maybe they can&#39;t deploy modified code.  How is the application started ? there might be options to turn on if you can modify the starting arguments",
    "score" : 0,
    "owner" : {
      "account_id" : 6734881,
      "reputation" : 2367,
      "user_id" : 5190019,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://www.gravatar.com/avatar/4251265c261510501ce3ea76bd7b7dbe?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "arso",
      "link" : "https://stackoverflow.com/users/5190019/arso"
    },
    "creation_date" : 1743778198,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140299544,
    "post_id" : 79555424,
    "body" : "Have you tried jstack / kill -QUIT / capturing the stdout/error? Edit question with information on which JDK you use and how you run the application.",
    "score" : 0,
    "owner" : {
      "account_id" : 5998820,
      "reputation" : 16284,
      "user_id" : 4712734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f6e922a2cb7e2da59286f27b162aaca5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "DuncG",
      "link" : "https://stackoverflow.com/users/4712734/duncg"
    },
    "creation_date" : 1743774153,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140299453,
    "post_id" : 79555424,
    "body" : "<i>We have access to source code.</i>  <b>THEN</b> <i>It is not possible to add print statements throughout the code</i>, which is contradictory. I&#39;m assuming it has no logging strategy. Your first statement I quoted points at the solution",
    "score" : 3,
    "owner" : {
      "account_id" : 22124137,
      "reputation" : 4244,
      "user_id" : 16376827,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/1ImPw.png?s=256",
      "display_name" : "g00se",
      "link" : "https://stackoverflow.com/users/16376827/g00se"
    },
    "creation_date" : 1743772770,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}