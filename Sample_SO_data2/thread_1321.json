{
  "question" : {
    "question_id" : 79723081,
    "title" : "create/update main menu based on user&#39;s preferred language",
    "body" : "<p>I would like to customize the main menu texts based on the customer language preference, but I have not seen any document about  how to create / update the main menu using java.</p>\n<p>I can create Inline-Menu using the <code>InlineKeyboardButton</code> and <code>InlineKeyboardMarkup</code> classes.</p>\n<p>I can create Keyboard-Buttons using the <code>KeyboardRow</code>, <code>KeyboardButton</code> and <code>ReplyKeyboardMarkup</code> classes.</p>\n<p>But I can not see any documentation or example hot to create and configure the main Telegram menu button using Java.</p>\n<p><strong>This is how I create the inline-menu:</strong></p>\n<pre><code>private void buildInlineMenu(SendMessage.SendMessageBuilder builder, ChatResponse chatResponse) {\n    if (!chatResponse.getInlineMenus().isEmpty()) {\n        List&lt;InlineKeyboardButton&gt; inlineButtons = new ArrayList&lt;&gt;();\n        chatResponse.getInlineMenus().forEach(menu -&gt; {\n            var next = InlineKeyboardButton.builder()\n                    .text(menu.getCaption())\n                    .callbackData(menu.getCommand())\n                    .build();\n            inlineButtons.add(next);\n        });\n\n        InlineKeyboardMarkup markup = InlineKeyboardMarkup\n                .builder()\n                .keyboardRow(inlineButtons)\n                .build();\n\n        builder.replyMarkup(markup);\n    }\n}\n</code></pre>\n<p><a href=\"https://ibb.co/hbWWR4f\" rel=\"nofollow noreferrer\">link to image</a></p>\n<p><strong>My code that creates the keyboard:</strong></p>\n<pre><code>private void buildKeyboard(SendMessage.SendMessageBuilder builder, ChatResponse chatResponse) {\n    if (!chatResponse.getKeyboards().isEmpty()) {\n        List&lt;KeyboardRow&gt; keyboard = new ArrayList&lt;&gt;();\n        chatResponse.getKeyboards().forEach(b -&gt; {\n            String[] buttons = b.getCaption().split(&quot;;&quot;);\n            KeyboardRow keyboardRow = new KeyboardRow();\n            Arrays.stream(buttons).forEach(button -&gt; {\n                keyboardRow.add(new KeyboardButton(button));\n            });\n            keyboard.add(keyboardRow);\n        });\n\n        ReplyKeyboardMarkup markup = new ReplyKeyboardMarkup();\n        markup.setSelective(true);\n        markup.setResizeKeyboard(true);\n        markup.setOneTimeKeyboard(false);\n        markup.setKeyboard(keyboard);\n\n        builder.replyMarkup(markup);\n    }\n}\n</code></pre>\n<p><a href=\"https://ibb.co/wh8H8Vy9\" rel=\"nofollow noreferrer\">link to image</a></p>\n<p><strong>How I call them:</strong></p>\n<p>(1)</p>\n<pre><code>ChatResponse.builder()\n    .textMessage(&quot;Select a fruit! (inline menu)&quot;)\n    .inlineMenus(List.of(\n            ChatMenu.builder().caption(&quot;apple&quot;).command(&quot;apple&quot;).build(),\n            ChatMenu.builder().caption(&quot;kiwi&quot;).command(&quot;kiwi&quot;).build(),\n            ChatMenu.builder().caption(&quot;orange&quot;).command(&quot;orange&quot;).build()))\n    .build();\n</code></pre>\n<p>(2)</p>\n<pre><code>ChatResponse.builder()\n    .textMessage(&quot;What is your favourite color? (keyboard)&quot;)\n    .keyboards(List.of(\n            ChatMenu.builder().caption(&quot;Red;Blue&quot;).build(),\n            ChatMenu.builder().caption(&quot;Green;Purple;White&quot;).build()))\n    .build();\n</code></pre>\n<p><strong>Calling:</strong></p>\n<pre><code>SendMessage.SendMessageBuilder sendMessageBuilder = SendMessage\n        .builder()\n        .chatId(telegramId)\n        .parseMode(&quot;HTML&quot;)\n        .text(chatResponse.getTextMessage());\n\nbuildInlineMenu(sendMessageBuilder, chatResponse);\nbuildKeyboard(sendMessageBuilder, chatResponse);\n\nexecute(sendMessageBuilder.build());\n</code></pre>\n<p>The code above works like a charm but I want to create and configure  the main menu as well from Java. I know that I can add the main menu using the <code>BotFather</code> menu from the Telegram chat, but I would like to use Java for this functionality as well.</p>\n<p>Is that possible somehow?\nOr I am wrong and there is no way to configure the main menu using Java?</p>\n",
    "tags" : [ "java", "telegram", "telegram-api" ],
    "owner" : {
      "account_id" : 2492679,
      "reputation" : 23186,
      "user_id" : 2169845,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/XoDg6.gif?s=256",
      "display_name" : "zappee",
      "link" : "https://stackoverflow.com/users/2169845/zappee"
    },
    "is_answered" : true,
    "view_count" : 154,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1754402200,
    "creation_date" : 1754102599,
    "link" : "https://stackoverflow.com/questions/79723081/create-update-main-menu-based-on-users-preferred-language",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79726228,
    "question_id" : 79723081,
    "body" : "<p>You're looking for the Telegram Bot API <a href=\"https://core.telegram.org/bots/api#setmycommands\" rel=\"nofollow noreferrer\"><code>setMyCommands</code></a> method:</p>\n<blockquote>\n<p>Use this method to change the list of the bot's commands. See <a href=\"https://core.telegram.org/bots/features#commands\" rel=\"nofollow noreferrer\">this manual</a> for more details about bot commands.<br />\n<sub>Returns <em>True</em> on success.</sub></p>\n</blockquote>\n<hr />\n<p>However, your question starts with &quot;<em>... customize the main menu texts based on the customer language preference ...</em>&quot;;</p>\n<p>The command list send to Telegram isn't user specific, it's the same for all people using your bot, so to 'change' them based on language might conflict with other users.</p>\n<hr />\n<p>Assuming you're using <a href=\"https://github.com/rubenlagus/TelegramBots\" rel=\"nofollow noreferrer\"><strong>rubenlagus/TelegramBots</strong></a>, there is a <a href=\"https://github.com/rubenlagus/TelegramBots/blob/master/telegrambots-meta/src/main/java/org/telegram/telegrambots/meta/api/methods/commands/SetMyCommands.java\" rel=\"nofollow noreferrer\"><code>setMyCommands</code> class</a> with a <a href=\"https://github.com/rubenlagus/TelegramBots/blob/master/telegrambots-meta/src/test/java/org/telegram/telegrambots/meta/api/methods/commands/TestSetMyCommands.java\" rel=\"nofollow noreferrer\">test file</a> that shows the following example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SetMyCommands setMyCommands = SetMyCommands\n    .builder()\n    .command(BotCommand.builder().command(&quot;test&quot;).description(&quot;Test description&quot;).build())\n    .languageCode(&quot;en&quot;)\n    .scope(BotCommandScopeDefault.builder().build())\n    .build();\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 6313442,
      "reputation" : 45503,
      "user_id" : 5625547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oqCND.jpg?s=256",
      "display_name" : "0stone0",
      "link" : "https://stackoverflow.com/users/5625547/0stone0"
    },
    "creation_date" : 1754402200,
    "last_activity_date" : 1754402200,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140643637,
    "post_id" : 79723081,
    "body" : "I&#39;m not that familiar with java that I can find the docs about that, there is no official telegram java package.",
    "score" : 0,
    "owner" : {
      "account_id" : 6313442,
      "reputation" : 45503,
      "user_id" : 5625547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oqCND.jpg?s=256",
      "display_name" : "0stone0",
      "link" : "https://stackoverflow.com/users/5625547/0stone0"
    },
    "creation_date" : 1754401570,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140641901,
    "post_id" : 79723081,
    "body" : "I use the official Telegram maven dependency. Nothing else.",
    "score" : 0,
    "owner" : {
      "account_id" : 2492679,
      "reputation" : 23186,
      "user_id" : 2169845,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/XoDg6.gif?s=256",
      "display_name" : "zappee",
      "link" : "https://stackoverflow.com/users/2169845/zappee"
    },
    "creation_date" : 1754343583,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140641420,
    "post_id" : 79723081,
    "body" : "Could you share a link to the java library you&#39;re using for the Telegram api, or did you implement it yourself?",
    "score" : 0,
    "owner" : {
      "account_id" : 6313442,
      "reputation" : 45503,
      "user_id" : 5625547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oqCND.jpg?s=256",
      "display_name" : "0stone0",
      "link" : "https://stackoverflow.com/users/5625547/0stone0"
    },
    "creation_date" : 1754328309,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140641400,
    "post_id" : 79723081,
    "body" : "Yes, I am talking about it. My question is about how to edit/update it with Java. According to telegram this menu can be configured globally or per user. But how, with Java?",
    "score" : 0,
    "owner" : {
      "account_id" : 2492679,
      "reputation" : 23186,
      "user_id" : 2169845,
      "user_type" : "registered",
      "accept_rate" : 91,
      "profile_image" : "https://i.sstatic.net/XoDg6.gif?s=256",
      "display_name" : "zappee",
      "link" : "https://stackoverflow.com/users/2169845/zappee"
    },
    "creation_date" : 1754327727,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140639049,
    "post_id" : 79723081,
    "body" : "Do you talk about the red drawn menu button that shows all available commands? Yes thats available in the bot API",
    "score" : 0,
    "owner" : {
      "account_id" : 6313442,
      "reputation" : 45503,
      "user_id" : 5625547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oqCND.jpg?s=256",
      "display_name" : "0stone0",
      "link" : "https://stackoverflow.com/users/5625547/0stone0"
    },
    "creation_date" : 1754237139,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}