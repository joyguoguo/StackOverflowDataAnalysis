{
  "question" : {
    "question_id" : 79758786,
    "title" : "Not finding java:comp/env binding inside wildfly",
    "body" : "<p>Wildfly 26.1.3-Final on JDK 8.</p>\n<p>I have trouble finding a JNDI name in java:comp/env. While troubleshooting, I find that I cannot even bidn to java:comp/env; I do not know if the former is related to the later, so I am posting all the data here. If those are two unrelated issues, I am looking to solve the issue finding the JNDI names, not binding just to java:comp/env.</p>\n<h3>Binding to java:comp/env.</h3>\n<p>I have a war inside an ear. On starting up the app, I try to bind to &quot;java:comp/env&quot; but it fails.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n  LOGGER.info(&quot;Listando recursos JNDI:&quot;);\n  InitialContext ctx = new InitialContext();\n  Context envCtx = (Context) ctx.lookup(&quot;java:comp/env&quot;);  // &lt;--- IT FAILS HERE\n  NamingEnumeration&lt;NameClassPair&gt; list = envCtx.list(&quot;&quot;);\n  LOGGER.info(&quot;Obtenida lista de recursos JNDI:&quot;);\n  while (list.hasMore()) {\n    LOGGER.info(list.next().getName());\n  }      \n} catch (Exception e) {\n  LOGGER.error(&quot;Error al listar recursos JNDI: {}&quot;, e.getMessage(), e);\n}\n</code></pre>\n<p>Exception stack trace:</p>\n<pre class=\"lang-none prettyprint-override\"><code>12:33:36,495 ERROR [es.mscbs.hcdsnsca.config.Inicializacion] (MSC service thread 1-1) Error al listar recursos JNDI: java:comp/env: javax.naming.NameNotFoundException: java:comp/env\n        at org.jboss.as.naming.InitialContext$DefaultInitialContext.findContext(InitialContext.java:191)\n        at org.jboss.as.naming.InitialContext$DefaultInitialContext.lookup(InitialContext.java:235)\n        at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:193)\n        at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:189)\n        at javax.naming.InitialContext.lookup(InitialContext.java:417)\n        at javax.naming.InitialContext.lookup(InitialContext.java:417)\n        at es.mscbs.hcdsnsca.config.Inicializacion.init(Inicializacion.java:444)\n[...]\n</code></pre>\n<h3>Finding bind inside java:comp/env</h3>\n<p>I am adapting a weblogic app to run on wildfly, and I have trouble obtaining the JDBC connections through JNDI.</p>\n<p>I get the exceptions</p>\n<pre class=\"lang-none prettyprint-override\"><code>12:33:36,505 ERROR [es.mscbs.hcdsnsca.config.Inicializacion] (MSC service thread 1-1) Exception: java:comp/env/jdbc/hcdSnsCADataSource-nonXA: javax.naming.NameNotFoundException: java:comp/env/jdbc/hcdSnsCADataSource-nonXA\n        at org.jboss.as.naming.InitialContext$DefaultInitialContext.findContext(InitialContext.java:191)\n</code></pre>\n<p>[EAR]/META-INF/application.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;application xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/application_7.xsd&quot; version=&quot;7&quot;&gt;\n  &lt;display-name&gt;hcdsnsCaApp&lt;/display-name&gt;\n  &lt;module&gt;\n    &lt;web&gt;\n      &lt;web-uri&gt;hcdsnsCaAppWeb.war&lt;/web-uri&gt;\n      &lt;context-root&gt;hcdSnsWeb&lt;/context-root&gt;\n    &lt;/web&gt;\n  &lt;/module&gt;\n  &lt;library-directory&gt;APP-INF/lib&lt;/library-directory&gt;\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-queryasync&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA-queryasync&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-updateasync&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA-updateasync&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n&lt;/application&gt;\n</code></pre>\n<p>[EAR]/META-INF/jboss-app.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jboss:jboss-app \n  xmlns:jboss=&quot;http://www.jboss.com/xml/ns/javaee&quot;\n  xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; \n  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n  xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/application_7.xsd&quot; \n  version=&quot;7&quot;&gt;\n\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA&lt;/res-ref-name&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-queryasync&lt;/res-ref-name&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA-queryasync&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n  &lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-updateasync&lt;/res-ref-name&gt;\n    &lt;lookup-name&gt;java:/hcdSnsCADataSource-nonXA-updateasync&lt;/lookup-name&gt;\n  &lt;/resource-ref&gt;\n&lt;/jboss:jboss-app&gt;\n</code></pre>\n<p>Inside [EAR]/[WAR]/WEB-INF/web.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA&lt;/res-ref-name&gt;\n    &lt;jndi-name&gt;java:/hcdSnsCADataSource-nonXA&lt;/jndi-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n&lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-queryasync&lt;/res-ref-name&gt;\n    &lt;jndi-name&gt;java:/hcdSnsCADataSource-nonXA-queryasync&lt;/jndi-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n&lt;resource-ref&gt;\n    &lt;res-ref-name&gt;jdbc/hcdSnsCADataSource-nonXA-updateasync&lt;/res-ref-name&gt;\n    &lt;jndi-name&gt;java:/hcdSnsCADataSource-nonXA-updateasync&lt;/jndi-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n</code></pre>\n<h3>Update: Configuration</h3>\n<p>Configuration of datasources. From the jboss-cli, I could test them.</p>\n<pre><code>                &lt;datasource jndi-name=&quot;java:/hcdSnsCADataSource-nonXA&quot; pool-name=&quot;hcdSnsCADataSource-nonXA&quot;&gt;\n                    &lt;connection-url&gt;[url]&lt;/connection-url&gt;\n                    &lt;driver&gt;[driver]&lt;/driver&gt;\n                    &lt;security&gt;[...]&lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;datasource jndi-name=&quot;java:/hcdSnsCADataSource-nonXA-queryasync&quot; pool-name=&quot;hcdSnsCADataSource-nonXA-queryasync&quot;&gt;\n                    &lt;connection-url&gt;[url]&lt;/connection-url&gt;\n                    &lt;driver&gt;[driver]&lt;/driver&gt;\n                    &lt;security&gt;[...]&lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;datasource jndi-name=&quot;java:/hcdSnsCADataSource-nonXA-updateasync&quot; pool-name=&quot;hcdSnsCADataSource-nonXA-updateasync&quot;&gt;\n                    &lt;connection-url&gt;[url]&lt;/connection-url&gt;\n                    &lt;driver&gt;[driver]&lt;/driver&gt;\n                    &lt;security&gt;[...]&lt;/security&gt;\n                &lt;/datasource&gt;\n</code></pre>\n",
    "tags" : [ "java", "wildfly", "jndi" ],
    "owner" : {
      "account_id" : 294406,
      "reputation" : 24904,
      "user_id" : 598289,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=256&d=identicon&r=PG",
      "display_name" : "SJuan76",
      "link" : "https://stackoverflow.com/users/598289/sjuan76"
    },
    "is_answered" : false,
    "view_count" : 104,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1757739705,
    "creation_date" : 1757328619,
    "link" : "https://stackoverflow.com/questions/79758786/not-finding-javacomp-env-binding-inside-wildfly",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140723805,
    "post_id" : 79758786,
    "body" : "@queeg I did add that info.",
    "score" : 0,
    "owner" : {
      "account_id" : 294406,
      "reputation" : 24904,
      "user_id" : 598289,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=256&d=identicon&r=PG",
      "display_name" : "SJuan76",
      "link" : "https://stackoverflow.com/users/598289/sjuan76"
    },
    "creation_date" : 1757405397,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140723253,
    "post_id" : 79758786,
    "body" : "I was curious about the component type to understand when it might be initialized. The naming context should be there. At least it worked for me when I did a test in a REST resource. However, I tested on WildFly 37. I don&#39;t think much should have changed there though.",
    "score" : 1,
    "owner" : {
      "account_id" : 51161,
      "reputation" : 17960,
      "user_id" : 152794,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/eX5Ms.jpg?s=256",
      "display_name" : "James R. Perkins",
      "link" : "https://stackoverflow.com/users/152794/james-r-perkins"
    },
    "creation_date" : 1757378074,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140722830,
    "post_id" : 79758786,
    "body" : "You did not show how you configured JBoss, hence noone is able to tell whether the resource in <code>java:comp&#47;env</code> should exist at all.",
    "score" : 0,
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "creation_date" : 1757359556,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140722406,
    "post_id" : 79758786,
    "body" : "@JamesR.Perkins It is just a class that centralizes configuration.",
    "score" : 0,
    "owner" : {
      "account_id" : 294406,
      "reputation" : 24904,
      "user_id" : 598289,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/b04c9074fed0dd215caec771c2a9ea98?s=256&d=identicon&r=PG",
      "display_name" : "SJuan76",
      "link" : "https://stackoverflow.com/users/598289/sjuan76"
    },
    "creation_date" : 1757346472,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140722226,
    "post_id" : 79758786,
    "body" : "What kind of resource is <code>es.mscbs.hcdsnsca.config.Inicializacion</code>?",
    "score" : 0,
    "owner" : {
      "account_id" : 51161,
      "reputation" : 17960,
      "user_id" : 152794,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/eX5Ms.jpg?s=256",
      "display_name" : "James R. Perkins",
      "link" : "https://stackoverflow.com/users/152794/james-r-perkins"
    },
    "creation_date" : 1757342045,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}