{
  "question" : {
    "question_id" : 79634914,
    "title" : "How to suppress a warning on simplifiable Map operations?",
    "body" : "<p>With the following code, IntelliJ shows a warning: &quot;Can be replaced with single 'Map.computeIfAbsent' method call&quot;.</p>\n<pre><code>class Test {\n    Map&lt;String, Integer&gt; idByStr = new HashMap&lt;&gt;();\n    int addLiteral(String str) {\n        Integer id = idByStr.get(str);\n        if (id == null) {\n            id = idByStr.size();\n            idByStr.put(str, id);\n        }\n        return id;\n    }\n}\n</code></pre>\n<p>I do not want to use <code>computeIfAbsent()</code> because of the performance overhead of a closure. It seems <code>@SuppressWarnings</code> cannot be used because the UI does not list an option to suppress the warning. (Also, I can't find a name for this warning by googling.)</p>\n<p>Is it actually impossible to suppress this warning? If it's possible, how to do it? (Of course, I do not want to disable the warning.)</p>\n",
    "tags" : [ "java", "intellij-idea" ],
    "owner" : {
      "account_id" : 1219770,
      "reputation" : 5128,
      "user_id" : 1186624,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c040da19b71bb990adc96a04c91ff98?s=256&d=identicon&r=PG",
      "display_name" : "relent95",
      "link" : "https://stackoverflow.com/users/1186624/relent95"
    },
    "is_answered" : true,
    "view_count" : 77,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1747980860,
    "creation_date" : 1747979487,
    "link" : "https://stackoverflow.com/questions/79634914/how-to-suppress-a-warning-on-simplifiable-map-operations",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79634924,
    "question_id" : 79634914,
    "body" : "<p>yes <code>computeIfAbsent()</code> has performance overhead due to lambda allocation, and the current code that you have written will perform better for performance critical code. However, the warning can be suppresed by using the function</p>\n<pre><code>@SuppressWarnings(&quot;Java8MapApi&quot;) // IntelliJ-specific inspection ID\nclass Test {\n    Map&lt;String, Integer&gt; idByStr = new HashMap&lt;&gt;();\n    int addLiteral(String str) {\n        Integer id = idByStr.get(str);\n        if (id == null) {\n            id = idByStr.size();\n            idByStr.put(str, id);\n        }\n        return id;\n    }\n}\n</code></pre>\n",
    "score" : -2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 27810413,
      "reputation" : 281,
      "user_id" : 21232911,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a/AEdFTp6d-5851FMePsR7O3aEQs_yFjomf-FNJ34Tn-c=k-s256",
      "display_name" : "nischal sharma",
      "link" : "https://stackoverflow.com/users/21232911/nischal-sharma"
    },
    "creation_date" : 1747980040,
    "last_activity_date" : 1747980860,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140458177,
    "post_id" : 79634914,
    "body" : "@Louis If a key already exists, only one lookup will be performed. Anyway, see <a href=\"https://gist.github.com/relent95/f3e8eabbbddfad6b203a528bacb8320a\" rel=\"nofollow noreferrer\">my gist sample</a>.",
    "score" : 1,
    "owner" : {
      "account_id" : 1219770,
      "reputation" : 5128,
      "user_id" : 1186624,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c040da19b71bb990adc96a04c91ff98?s=256&d=identicon&r=PG",
      "display_name" : "relent95",
      "link" : "https://stackoverflow.com/users/1186624/relent95"
    },
    "creation_date" : 1748226072,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140453567,
    "post_id" : 79634914,
    "body" : "I would be shocked if the performance overhead of a closure was worse than the performance overhead of two lookups in a map.  Allocation of short-lived objects is essentially free.  Even if I could suppress this warning, I never would.",
    "score" : 1,
    "owner" : {
      "account_id" : 465573,
      "reputation" : 200423,
      "user_id" : 869736,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Louis Wasserman",
      "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
    },
    "creation_date" : 1748020360,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451547,
    "post_id" : 79634914,
    "body" : "Already did that. UI does not list that option.",
    "score" : 0,
    "owner" : {
      "account_id" : 1219770,
      "reputation" : 5128,
      "user_id" : 1186624,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1c040da19b71bb990adc96a04c91ff98?s=256&d=identicon&r=PG",
      "display_name" : "relent95",
      "link" : "https://stackoverflow.com/users/1186624/relent95"
    },
    "creation_date" : 1747980148,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140451542,
    "post_id" : 79634914,
    "body" : "try the following: Place the caret on the warning and press Alt+Enter. select: &quot;Suppress for method&quot; or &quot;Suppress for statement&quot;. It will add //noinspection",
    "score" : 0,
    "owner" : {
      "account_id" : 8861242,
      "reputation" : 449,
      "user_id" : 6617422,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-L13A_zZTZLg/AAAAAAAAAAI/AAAAAAAAACo/u4cCAOESdBA/s256-rj/photo.jpg",
      "display_name" : "deepakrajbhar",
      "link" : "https://stackoverflow.com/users/6617422/deepakrajbhar"
    },
    "creation_date" : 1747979934,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79634924" : [ {
      "comment_id" : 140453575,
      "post_id" : 79634924,
      "body" : "Downvoted for the claim that this code will perform better.",
      "score" : 2,
      "owner" : {
        "account_id" : 465573,
        "reputation" : 200423,
        "user_id" : 869736,
        "user_type" : "registered",
        "accept_rate" : 82,
        "profile_image" : "https://www.gravatar.com/avatar/ae7bb06b9a23a4dd7eea69e853d47d12?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Louis Wasserman",
        "link" : "https://stackoverflow.com/users/869736/louis-wasserman"
      },
      "creation_date" : 1748020481,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140451567,
      "post_id" : 79634924,
      "body" : "@relent95 edited",
      "score" : 0,
      "owner" : {
        "account_id" : 27810413,
        "reputation" : 281,
        "user_id" : 21232911,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/a/AEdFTp6d-5851FMePsR7O3aEQs_yFjomf-FNJ34Tn-c=k-s256",
        "display_name" : "nischal sharma",
        "link" : "https://stackoverflow.com/users/21232911/nischal-sharma"
      },
      "creation_date" : 1747980872,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140451562,
      "post_id" : 79634924,
      "body" : "Wow, I found a correct name &#39;Java8MapApi&#39; with your hint!. If you edit the answer, I&#39;ll accept it.",
      "score" : 0,
      "owner" : {
        "account_id" : 1219770,
        "reputation" : 5128,
        "user_id" : 1186624,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1c040da19b71bb990adc96a04c91ff98?s=256&d=identicon&r=PG",
        "display_name" : "relent95",
        "link" : "https://stackoverflow.com/users/1186624/relent95"
      },
      "creation_date" : 1747980569,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140451554,
      "post_id" : 79634924,
      "body" : "I already tried that name &#39;ReplacePutWithAssignment&#39;, but it does not work.",
      "score" : 0,
      "owner" : {
        "account_id" : 1219770,
        "reputation" : 5128,
        "user_id" : 1186624,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1c040da19b71bb990adc96a04c91ff98?s=256&d=identicon&r=PG",
        "display_name" : "relent95",
        "link" : "https://stackoverflow.com/users/1186624/relent95"
      },
      "creation_date" : 1747980338,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}