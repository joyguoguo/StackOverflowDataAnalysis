{
  "question" : {
    "question_id" : 79644202,
    "title" : "How to retrieve the look and feel icon",
    "body" : "<p>I am implementing a custom FileSystemView and I want to set the icons appropriately for the nodes in my virtual filesystem.   For consistency I would like to use some of the same icons as in the look and feel (in particular the Windows L&amp;F).  If have tried to get the icons using the <code>UIManager.getIcon</code> method, but it seems like the return icon is from the wrong look and feel.</p>\n<p>Given the following sample program here is what I am seeing.  Every second icon is the directory icon from the UIManager, quite different from the system folder icons, I think it might be from Metal.</p>\n<p><a href=\"https://i.sstatic.net/it6kYMEj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/it6kYMEj.png\" alt=\"enter image description here\" /></a></p>\n<p>Can someone steer me in the right direction on how to get these icons, I thought it would be a simple thing.  I tried several variations (e.g. <code>UIManager.getLookAndFeel().getDefaults()</code>) but nothing has worked for me.</p>\n<p>Here is the sample code:</p>\n<pre><code>import javax.swing.*;\nimport javax.swing.filechooser.FileView;\nimport java.io.File;\n\npublic class TestIcon {\n\n    private TestIcon() {\n        try {\n            UIManager.setLookAndFeel(&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;);\n        } catch (Exception ex) {\n            throw new IllegalStateException(&quot;Error initializing L&amp;F&quot;, ex);\n        }\n\n        JFileChooser jfc = new JFileChooser();\n        jfc.setFileView(new MyFileView());\n        jfc.showOpenDialog(null);\n    }\n\n    private static class MyFileView extends FileView {\n        static int count = 0;\n        @Override\n        public Icon getIcon(File f) {\n            if (count++%2 == 0)\n                return super.getIcon(f);\n            else\n                return UIManager.getIcon(&quot;FileView.directoryIcon&quot;);\n        }\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            new TestIcon();\n        });\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "swing", "jfilechooser" ],
    "owner" : {
      "account_id" : 6605774,
      "reputation" : 504,
      "user_id" : 5102638,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/g9UBA.png?s=256",
      "display_name" : "opeongo",
      "link" : "https://stackoverflow.com/users/5102638/opeongo"
    },
    "is_answered" : false,
    "view_count" : 85,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1748541351,
    "creation_date" : 1748533076,
    "link" : "https://stackoverflow.com/questions/79644202/how-to-retrieve-the-look-and-feel-icon",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140501963,
    "post_id" : 79644202,
    "body" : "Create a temporary directory with no special attributes and fetch the system icon for that. It should be the systemâ€™s default directory icon. Then remember that icon and use it for your virtual folders. The temporary directory can be deleted once you have the icon.",
    "score" : 2,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1749551832,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140481001,
    "post_id" : 79644202,
    "body" : "Directories can be represented as <code>File</code> instances.  Does getSystemIcon not return a folder-ish system icon for such a File instance?",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1748884438,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140480958,
    "post_id" : 79644202,
    "body" : "That method will retrieve an icon for a File object.  I want to retrieve the directory icon that will be used by any directory.   In my virtual file system I will have objects that are not directories that I want to represent with a directory icon.",
    "score" : 0,
    "owner" : {
      "account_id" : 6605774,
      "reputation" : 504,
      "user_id" : 5102638,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/g9UBA.png?s=256",
      "display_name" : "opeongo",
      "link" : "https://stackoverflow.com/users/5102638/opeongo"
    },
    "creation_date" : 1748883523,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140477127,
    "post_id" : 79644202,
    "body" : "If you&#39;re implementing FileSystemView, why not make use of the inherited <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/javax/swing/filechooser/FileSystemView.html#getSystemIcon(java.io.File)\" rel=\"nofollow noreferrer\">getSystemIcon</a> method?",
    "score" : 1,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1748792660,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}