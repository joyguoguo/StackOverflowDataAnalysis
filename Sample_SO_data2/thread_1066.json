{
  "question" : {
    "question_id" : 79750156,
    "title" : "Gradle build uses a lot of memory",
    "body" : "<p>I am using IntelliJ IDEA to make a mod for Minecraft: Java Edition. I don't want to go to much detail here and I don't know much about Gradle (I don't even know what it is), but I do know that I have to  first &quot;sync all Gradle projects&quot;.</p>\n<p>When I use the &quot;Sync All Gradle Projects&quot; button, it does its thing, until it reaches the step &quot;Started working on decompile&quot;, where it just proceeds to use as much memory as it can, until there is no more memory left and it  just crashes with error <code>Caused by: java.lang.RuntimeException: Failed to execute tool</code>. Usually Gradle is the one that crashes, but sometimes the IDE also crashes and even once my computer crashed.</p>\n<p>When the build is running, Gradle uses all the way to 2.0GB of memory. How can I fix this crazy RAM usage? Is it possible to just do this step manually?</p>\n<p>Operating system: Linux\nAmount of RAM my computer has: 4GB of memory + 4GB of swap memory\nGradle version: 8.14.3\nJava version: 21\nGradle JVM: Eclipse Temurin 21.0.8</p>\n<p>Note: When gradle fails, it says a bunch of things, but a notable one is <code>Deprecated Gradle features were used in this build, making it incompatible with Gradle 9.0</code></p>\n<h2>What I've tried</h2>\n<p>I set the <code>org.gradle.jvmargs</code> property in <code>gradle.properties</code> to <code>-Xmx512m</code>. This should limit the Gradle build to 512 MB of memory usage, but it doesn't do anything.</p>\n<p>If I set the option to more than 100m, nothing happens. If I set the option to less than 100m, Gradle crashes earlier under different errors like <code>java.lang.OutOfMemory</code>, this time without consuming a lot of memory.</p>\n<p>I've also tried to add the argument <code>-XX:MaxPermSize=64m</code>, but it returns an error saying that the <code>MaxPermSize</code> option is unrecognized (because it's been removed in Java 17). Using <code>XX:MaxMetaspaceSize</code> doesn't seem to do anything.</p>\n",
    "tags" : [ "java", "gradle", "intellij-idea", "build", "jvm" ],
    "owner" : {
      "account_id" : 43339768,
      "reputation" : 1,
      "user_id" : 31374402,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1b7d1bc4b39863e88b65be255669e6c7?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Sul4ur",
      "link" : "https://stackoverflow.com/users/31374402/sul4ur"
    },
    "is_answered" : true,
    "view_count" : 156,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1756464408,
    "creation_date" : 1756463952,
    "link" : "https://stackoverflow.com/questions/79750156/gradle-build-uses-a-lot-of-memory",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79750164,
    "question_id" : 79750156,
    "body" : "<p>You're trying to run a memory hungry task (decompilation) in a low memory environment (4GB RAM + 4GB swap)</p>\n<p><strong>Why This Is Happening</strong></p>\n<p>When you run &quot;Sync All Gradle Projects&quot; in IntelliJ, it triggers a build pipeline. In Minecraft modding setups (especially Forge or Fabric), part of that build includes decompiling the Minecraft source code (via tools like FernFlower, CFR, or Vineflower). This is very RAM-intensive, and:</p>\n<ul>\n<li>Gradle itself is Java-based and consumes memory.</li>\n<li>The decompiler tool also runs in a separate Java process.</li>\n<li>IntelliJ adds additional overhead.</li>\n</ul>\n<p><strong>Solution Strategy</strong></p>\n<p>You can't really avoid decompilation unless you're using pre-decompiled mappings (more below). But you can reduce the load, run it manually, or optimize Gradle to behave better on your hardware.</p>\n<p><strong>1. Use the Right JVM Arguments</strong></p>\n<p>You're correct that -Xmx512m should work, but Minecraft toolchains often override it. Try this in your gradle.properties file</p>\n<pre><code>file.encoding=UTF-8\norg.gradle.jvmargs=-Xmx768m\norg.gradle.parallel=false\n</code></pre>\n<p><strong>2. Disable IDE Auto-Sync</strong></p>\n<p>IntelliJ sometimes auto-triggers Gradle syncs on open or change. Thatâ€™s dangerous on low-RAM systems.</p>\n<p>Go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle\nSet &quot;Build and run using&quot; to IntelliJ instead of Gradle (at least for syncing)\nUncheck &quot;Automatically import this project&quot;</p>\n<p>This will prevent the IDE from launching heavy Gradle tasks without your permission.</p>\n<p><strong>3. Use the Command Line Instead</strong></p>\n<p>IntelliJ consumes a lot of RAM. Instead, run Gradle manually from the command line so you have more headroom. Try this:</p>\n<pre><code>./gradlew genSources\n</code></pre>\n<p><strong>4. Use Pre-Decompiled Mappings (Skip Decompilation)</strong></p>\n<p>If you're using Fabric, switch to intermediary or Yarn mappings that do not require decompilation. These are pre-processed mappings and save a ton of memory.</p>\n<p>For example, in your build.gradle, make sure you're using:</p>\n<pre><code>mappings = &quot;fabric-1.20.1&quot;\n</code></pre>\n<p>For Forge, consider using official Mojang mappings or Parchment mappings, which may be lighter.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 1096470,
      "reputation" : 29424,
      "user_id" : 1089967,
      "user_type" : "registered",
      "accept_rate" : 59,
      "profile_image" : "https://www.gravatar.com/avatar/1f256b904ff621d678598d8fa49f86c5?s=256&d=identicon&r=PG",
      "display_name" : "lance-java",
      "link" : "https://stackoverflow.com/users/1089967/lance-java"
    },
    "creation_date" : 1756464408,
    "last_activity_date" : 1756464408,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79750164" : [ {
      "comment_id" : 140703942,
      "post_id" : 79750164,
      "body" : "For option 4, where do I get pre-decompiled mappings for NeoForge? And where do I put the mappings?",
      "score" : 0,
      "owner" : {
        "account_id" : 43339768,
        "reputation" : 1,
        "user_id" : 31374402,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/1b7d1bc4b39863e88b65be255669e6c7?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Sul4ur",
        "link" : "https://stackoverflow.com/users/31374402/sul4ur"
      },
      "creation_date" : 1756574316,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}