{
  "question" : {
    "question_id" : 79735551,
    "title" : "Gradle + Spring Boot: ClassNotFoundException when running custom BootRun task in multi-module project",
    "body" : "<p>I have a multi-module Gradle project.\nModule core is a Spring Boot application with the main class ru.development.core.CoreApplication.</p>\n<p>Project structure:</p>\n<pre><code>root/\n  build.gradle\n  settings.gradle\n  core/\n    src/main/java/ru/development/core/CoreApplication.java\n    build.gradle\n</code></pre>\n<p><strong>root/build.gradle</strong></p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '3.5.4' apply false\n    id 'io.spring.dependency-management' version '1.1.7' apply false\n    id 'idea'\n}\n\nallprojects {\n    group = 'ru.development'\n    version = '0.0.1-SNAPSHOT'\n\n    repositories {\n        gradlePluginPortal()\n        mavenCentral()\n    }\n}\n\nsubprojects {\n    apply plugin: 'java'\n    apply plugin: 'org.springframework.boot'\n    apply plugin: 'io.spring.dependency-management'\n\n    dependencies {\n        implementation 'org.springframework.boot:spring-boot-starter'\n    }\n\n    tasks.named('test') {\n        useJUnitPlatform()\n    }\n}\n</code></pre>\n<p><strong>core/build.gradle</strong></p>\n<pre><code>import org.springframework.boot.gradle.tasks.run.BootRun\n\nspringBoot {\n    mainClass.set('ru.development.core.CoreApplication')\n}\n\ntasks.register('debug', BootRun) {\n    group = 'application'\n    description = 'Run Spring Boot with debug'\n    args = ['--spring.profiles.active=dev']\n    jvmArgs = ['-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005']\n    mainClass.set('ru.development.core.CoreApplication')\n}\n</code></pre>\n<hr />\n<p>When I run:</p>\n<pre><code>gradlew :core:debug\n</code></pre>\n<p>I get:</p>\n<pre><code>Listening for transport dt_socket at address: 5005\nError: Could not find or load main class ru.development.core.CoreApplication\nCaused by: java.lang.ClassNotFoundException: ru.development.core.CoreApplication\n</code></pre>\n<hr />\n<p><strong>Question:</strong><br />\nWhy does <code>gradlew :core:debug</code> fail with <code>ClassNotFoundException</code> for <code>CoreApplication</code>, and how can I correctly configure a custom <code>BootRun</code> task for debugging in a multi-module Spring Boot project?</p>\n",
    "tags" : [ "java", "gradle", "build", "dependencies" ],
    "owner" : {
      "account_id" : 29046657,
      "reputation" : 13,
      "user_id" : 22250346,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Nlrwz.jpg?s=256",
      "display_name" : "Mishelby",
      "link" : "https://stackoverflow.com/users/22250346/mishelby"
    },
    "is_answered" : true,
    "view_count" : 59,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1755261047,
    "creation_date" : 1755182045,
    "link" : "https://stackoverflow.com/questions/79735551/gradle-spring-boot-classnotfoundexception-when-running-custom-bootrun-task-in",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79736424,
    "question_id" : 79735551,
    "body" : "<p>According to <a href=\"https://docs.spring.io/spring-boot/gradle-plugin/running.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/gradle-plugin/running.html</a></p>\n<blockquote>\n<p>The <code>bootRun</code> task ...  is automatically configured to use the runtime classpath of the main source set.</p>\n</blockquote>\n<p>In this case, when we register a debug task as <code>tasks.register('debug', BootRun)</code> we will create a new instance of BootRun without any classpath configuration =&gt; Gradle can not find the main class.</p>\n<p>To fix this error, just configure the classpath</p>\n<pre><code>tasks.register('debug', BootRun) {\n    ...\n    // set it using default runtimeClasspath\n    classpath = sourceSets.main.runtimeClasspath\n\n    // or copy from bootRun task\n    classpath = tasks.bootRun.classpath\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 10467026,
      "reputation" : 619,
      "user_id" : 7716142,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/0GI9w.png?s=256",
      "display_name" : "minh tri Vo",
      "link" : "https://stackoverflow.com/users/7716142/minh-tri-vo"
    },
    "creation_date" : 1755261047,
    "last_activity_date" : 1755261047,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}