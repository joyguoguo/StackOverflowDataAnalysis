{
  "question" : {
    "question_id" : 79700076,
    "title" : "javac 21 Xlint not showing warnings for missing serial version ID on an anonymous class unlike Eclipse",
    "body" : "<p>I have a Maven parent POM that configures the <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/\" rel=\"nofollow noreferrer\">Maven Compiler Plugin</a> like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n  &lt;version&gt;3.14.0&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n    &lt;compilerArgs&gt;\n      &lt;arg&gt;-Xlint:all&lt;/arg&gt;\n    &lt;/compilerArgs&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>The project uses Java 21. According to the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/javac.html\" rel=\"nofollow noreferrer\">Java 21 javac docs</a>, <code>-Xlint:all</code> &quot;Enables all warnings.&quot; One of those warnings is:</p>\n<blockquote>\n<p><code>serial</code>: Warns about the serializable classes that do not provide a serial version ID. Also warns about access to non-public members from a serializable element.</p>\n</blockquote>\n<p>In the project I create an anonymous subclass without providing a <code>serialVersionUID</code>. (Specifically I create a Jackson deserializer instance <code>new FromStringDeserializer&lt;FooBar&gt;(FooBar.class) { â€¦ }</code>, although the specific class and library are not relevant to this issue.) Eclipse EE 2025-06 duly shows a warning in the IDE:</p>\n<blockquote>\n<p>The serializable class  does not declare a static final serialVersionUID field of type long</p>\n</blockquote>\n<p>However building the project using Maven 3.9.10 with <code>mvn clean compile</code> on Windows 10 with Java 24 does not show any warning.</p>\n<p>Here is a small POM to reproduce the issue:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;serialversionid-check&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;serialversionid Check&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.release&gt;21&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.14.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                    &lt;showWarnings&gt;true&lt;/showWarnings&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;-Xlint:all&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Here is the source file <code>src/main/java/com/example/Test.java</code> to reproduce the issue:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\npublic class Test {\n  void test() {\n    new Number() {\n      public double doubleValue() {return 0.0;}\n      public float floatValue() {return 0.0f;}\n      public int intValue() {return 0;}\n      public long longValue() {return 0L;}\n    };\n  }\n}\n</code></pre>\n<p>Granted I'm not a big fan of this warning; and I am fully aware that this is a legacy approach to Java serialization and that use of this antiquated subsystem for actual serialization should be avoided. Nevertheless I would like some consistency across environments, and I'm puzzled as to why <code>javac</code> is not showing the warnings its documentation indicates it should.</p>\n<p>Why does javac 21 not produce warnings for missing serial version ID, even though the Maven Compiler Plugin is passing it the <code>-Xlint:all</code> configuration?</p>\n",
    "tags" : [ "java", "serialization", "javac" ],
    "owner" : {
      "account_id" : 184786,
      "reputation" : 22254,
      "user_id" : 421049,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/4b9b843fe8e233b2f70e0f2a8e7db4e8?s=256&d=identicon&r=PG",
      "display_name" : "Garret Wilson",
      "link" : "https://stackoverflow.com/users/421049/garret-wilson"
    },
    "is_answered" : true,
    "view_count" : 147,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1752873529,
    "creation_date" : 1752421984,
    "link" : "https://stackoverflow.com/questions/79700076/javac-21-xlint-not-showing-warnings-for-missing-serial-version-id-on-an-anonymou",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79706365,
    "question_id" : 79700076,
    "body" : "<p>The described behavior was real, but the subtlety is that <strong>the serializable class in question was an anonymous inner class</strong>, and <code>javac</code> no longer displays this warning for anonymous inner classes (see below). This is why in most cases no one one noticed a discrepancy: <code>javac</code> usually honors the Xlint <code>serial</code> setting and generates a warning when a serial version ID is missing from a class marked serializable. (This also explains why this question kept getting closed: several people attempted to reproduce the problem using a test case that did <em>not</em> use an anonymous subclass.)</p>\n<p>Serializing of anonymous inner classes poses various problem, so Java advises against it. This means it is pointless to include a serial version ID in anonymous inner classes, so in <a href=\"https://bugs.openjdk.org/browse/JDK-7152104\" rel=\"nofollow noreferrer\">JDK-7152104</a> Java removed the warning from <code>javac</code> in this situation. (Thanks for finding that JDK ticket, Mark.)</p>\n<p>This means that the warning Eclipse currently shows is not in line with <code>javac</code> behavior. I thus filed <a href=\"https://github.com/eclipse-jdt/eclipse.jdt.core/issues/4209\" rel=\"nofollow noreferrer\">Eclipse JDT Core Issue #4209</a>. It turns out that back in 2011 (almost 15 years ago!) a similar issue for the same problem had already been filed with Eclipse on Bugzilla as <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=343858\" rel=\"nofollow noreferrer\">Eclipse Bug 343858</a> (and a duplicate filed as <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=426320\" rel=\"nofollow noreferrer\">Eclipse Bug 426320</a>), but had grown stale and was automatically closed in 2019.</p>\n<p>The Eclipse team has now already addressed the issue I opened, and the discrepancy is scheduled to be fixed in Eclipse 4.37 M2, due out in a few days. It appears that if all goes well Eclipse behavior will come into line with that of <code>javac</code> in the coordinated Eclipse 2025-09 release in a couple of months.</p>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 184786,
      "reputation" : 22254,
      "user_id" : 421049,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/4b9b843fe8e233b2f70e0f2a8e7db4e8?s=256&d=identicon&r=PG",
      "display_name" : "Garret Wilson",
      "link" : "https://stackoverflow.com/users/421049/garret-wilson"
    },
    "creation_date" : 1752850102,
    "last_activity_date" : 1752873529,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140594377,
    "post_id" : 79700076,
    "body" : "Mark thank you for the great find of <a href=\"https://bugs.openjdk.org/browse/JDK-7152104\" rel=\"nofollow noreferrer\">JDK-7152104</a>. Thank you also for your integrity of owning up to misreading the question and incorrectly saying this could not be reduced. I will file a ticket with Eclipse so that they may bring their compiler warnings in line with <code>javac</code>. I wish this ticket had not erroneously been closed so that I may add a proper answer to this valid. If someone could kindly reopen the question I would appreciate it.",
    "score" : 1,
    "owner" : {
      "account_id" : 184786,
      "reputation" : 22254,
      "user_id" : 421049,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/4b9b843fe8e233b2f70e0f2a8e7db4e8?s=256&d=identicon&r=PG",
      "display_name" : "Garret Wilson",
      "link" : "https://stackoverflow.com/users/421049/garret-wilson"
    },
    "creation_date" : 1752679579,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592895,
    "post_id" : 79700076,
    "body" : "It says <i>&quot;There are a variety of reasons that serialization compatibility of an anonymous inner class cannot be guaranteed, or even that such instances can be serialized at all. Thus, it is incorrect to warn the user to add a useless serialVersionUID. (Reasons include: anonymous class names are implementation-specific and may vary from one build to the next; synthesized field names and types may also vary unpredictably; the enclosing instance or captured local variables might not be serializable; even if they were serializable it&#39;s unlikely that this is what the programmer would want.)&quot;</i>",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1752648331,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592889,
    "post_id" : 79700076,
    "body" : "Found it: it was explicitly removed in Java 8 for anonymous classes <a href=\"https://bugs.openjdk.org/browse/JDK-7152104\" rel=\"nofollow noreferrer\">&#91;JDK-7152104&#93; javac should not warn about missing serialVersionUID for anonymous inner classes</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1752648180,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140592848,
    "post_id" : 79700076,
    "body" : "I used my own reproducer, because your question did not have one at that time. However, I read over the word anonymous. I can reproduce it with an anonymous class. I&#39;m checking if I can find an explanation for it.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110280,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1752647029,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140591814,
    "post_id" : 79700076,
    "body" : "I&#39;m starting to wonder whether Mark actually <i>did</i> use my test case and <i>did</i> reproduce my results, but dismissed them because he didn&#39;t realize that <code>Number</code> is serializable. I have an 80% confidence level guess that the issue here is that there <code>javac</code> is hiding the warning when an anonymous subclass is involved. Mark can you confirm this?",
    "score" : 0,
    "owner" : {
      "account_id" : 184786,
      "reputation" : 22254,
      "user_id" : 421049,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/4b9b843fe8e233b2f70e0f2a8e7db4e8?s=256&d=identicon&r=PG",
      "display_name" : "Garret Wilson",
      "link" : "https://stackoverflow.com/users/421049/garret-wilson"
    },
    "creation_date" : 1752601728,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140588888,
    "post_id" : 79700076,
    "body" : "I updated the question with a tiny project to reproduce the issue. Note that the project is using Java 21, but I am building with Java 24. Yes, I cleaned the project with <code>mvn clean compile</code>. Using the added test case, Eclipse EE 2025-06 shows a warning but the Maven build does not.",
    "score" : 0,
    "owner" : {
      "account_id" : 184786,
      "reputation" : 22254,
      "user_id" : 421049,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/4b9b843fe8e233b2f70e0f2a8e7db4e8?s=256&d=identicon&r=PG",
      "display_name" : "Garret Wilson",
      "link" : "https://stackoverflow.com/users/421049/garret-wilson"
    },
    "creation_date" : 1752515704,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}