{
  "question" : {
    "question_id" : 79667779,
    "title" : "Long Gremlin Traversal not returning data",
    "body" : "<p>I am trying to resolve one case where I want to fetch data from OrientDB database based on some filter.\nI have a vertex class named <em>&quot;Vertex_Class&quot;</em>. It has 2 attributes <em>&quot;Name&quot;</em> and <em>&quot;Mobile_Number&quot;</em>. I want to only fetch those rows for which &quot;Name&quot; and &quot;Mobile_Number&quot; matches.</p>\n<p>Lets consider filter like :\n<code>( ( Name = A AND Mobile_Number = 1 ) OR ( Name = B AND Mobile_Number = 2 ) OR ( Name = C AND Mobile_Number = 3 ) OR ( Name = D AND Mobile_Number = 4 ) OR ( Name = E AND Mobile_Number = 5 ) )</code></p>\n<p>If I convert this to gremlin traversal it becomes like :</p>\n<p><code>[GraphStep(vertex,[]), HasStep([~label.eq(Vertex_Class)]), AndStep([[OrStep([[OrStep([[OrStep([[OrStep([[AndStep([[HasStep([Mobile_Number.eq(1)])], [HasStep([Name.eq(A)])]])], [AndStep([[HasStep([Mobile_Number.eq(2)])], [HasStep([Name.eq(B)])]])]])], [AndStep([[HasStep([Mobile_Number.eq(3)])], [HasStep([Name.eq(C)])]])]])], [AndStep([[HasStep([Mobile_Number.eq(4)])], [HasStep([Name.eq(D)])]])]])], [AndStep([[HasStep([Mobile_Number.eq(5)])], [HasStep([Name.eq(E)])]])]])]])]</code></p>\n<p>And Above traversal returns correct 5 rows from the database.</p>\n<p>But when I try to fetch 100 rows using same filter considering</p>\n<p><code>( ( Name = A AND Mobile_Number = 1 ) OR ( Name = B AND Mobile_Number = 2 ) ..... ( Name = CV AND Mobile_Number = 100 ) )</code></p>\n<p>even though traversal is created like below :\n<code>[GraphStep(vertex,[]), HasStep([~label.eq(Vertex_Class)]), AndStep([[OrStep([[OrStep([[OrStep([[OrStep.......([[AndStep([[HasStep([Mobile_Number.eq(1)])], [HasStep([Name.eq(A)])]])], [AndStep([[HasStep([Mobile_Number.eq(2)])], [HasStep([Name.eq(B)])]])]])], ......., [AndStep([[HasStep([Mobile_Number.eq(100)])], [HasStep([Name.eq(CV)])]])]])]])]</code></p>\n<p>gremlin stuck in the loop and never returns anything and does not terminate too.</p>\n<p><strong>Is there any solution to find out data based on long traversal?</strong></p>\n<p><strong>Is there any optimization approach for the gremlin traversal?</strong></p>\n",
    "tags" : [ "java", "gremlin", "orientdb", "tinkerpop", "tinkerpop3" ],
    "owner" : {
      "account_id" : 4402974,
      "reputation" : 115,
      "user_id" : 3588087,
      "user_type" : "registered",
      "accept_rate" : 25,
      "profile_image" : "https://www.gravatar.com/avatar/6d7053e7448c0f5726d8e7986aaa4106?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Arpit Dongaonkar",
      "link" : "https://stackoverflow.com/users/3588087/arpit-dongaonkar"
    },
    "is_answered" : false,
    "view_count" : 56,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1750847201,
    "creation_date" : 1750083201,
    "link" : "https://stackoverflow.com/questions/79667779/long-gremlin-traversal-not-returning-data",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79678879,
    "question_id" : 79667779,
    "body" : "<p>I did work with similar cases before and saw similar problems, often when you have a big amount of conditions you stress a bit the execution planner that will take way too long to figure out what the best execution option, one way to workaround this problem could be use a single condition instead all the conditions in or.</p>\n<p>One way to do that will be to use <a href=\"https://tinkerpop.apache.org/docs/current/reference/#concat-step\" rel=\"nofollow noreferrer\">concat step</a> to create a single value with the two properties to then use the <code>within</code> <a href=\"https://tinkerpop.apache.org/docs/current/reference/#a-note-on-predicates\" rel=\"nofollow noreferrer\">predicate</a> to filter from a list of your values.</p>\n<p>It may work even using map to create a collection with the two fields and use the within with a collection of collections, but could not test it myself so I'm not sure.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 428358,
      "reputation" : 547,
      "user_id" : 810633,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a8fb57f6949ff92070e5a296492dff0c?s=256&d=identicon&r=PG",
      "display_name" : "tglman",
      "link" : "https://stackoverflow.com/users/810633/tglman"
    },
    "creation_date" : 1750847201,
    "last_activity_date" : 1750847201,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}