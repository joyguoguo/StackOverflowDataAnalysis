{
  "question" : {
    "question_id" : 79638936,
    "title" : "Parsing log file with multiline entries",
    "body" : "<p>I am having great issue trying to solve this part of parsing with Java8 Regexes. If you can shed some light on how to do this I would greatly appreciate it. I am not tied to Java8 by the way.</p>\n<p>I have a log file in the format below and I need to get data from each log entry, but the entry spans multiple lines. The start of an entry is like so &quot;12:56:13.861 [http-nio-7777-exec-1] INFO  dg.mpro.filter.CustomRequestLoggingFilter - REST REQUEST&quot; and the end is a blank line.</p>\n<p><strong>EXPECTED RESULT:</strong></p>\n<pre><code>processing each Log entry separately.\n</code></pre>\n<p><strong>CURRENTLY TRYING this regex, but does not work. I have tried so many other ways:</strong></p>\n<pre><code>[0-9]{1,2}+:[0-9]{1,2}+:[0-9]{1,2}+\\\\.[0-9]{1,3}+.*Response\\\\stime:.*\\n\n</code></pre>\n<p><strong>EXAMPLE LOG FILE:</strong> just a log file entries.log</p>\n<pre><code>12:56:13.861 [http-nio-7777-exec-1] INFO  dg.mpro.filter.CustomRequestLoggingFilter - REST REQUEST\nNUMBERS OF REQUESTS:= [1]\nMETHOD:= [GET]\nPARAMETERS &amp; VALUES :=\nREQUEST:= [/rest/indexv2/getMetadata]\n12:56:13.861 [http-nio-7777-exec-1] INFO  dg.mpro.filter.CustomRequestLoggingFilter - Response time: 1 seconds\n\n13:14:46.049 [http-nio-7777-exec-2] INFO  dg.mpro.filter.CustomRequestLoggingFilter - REST REQUEST\nNUMBERS OF REQUESTS:= [2]\nMETHOD:= [GET]\nPARAMETERS &amp; VALUES := [pagesize:= 20][name:= Mosolv][page:= 1][tolerance:= 4]\nREQUEST:= [/rest/indexv2/getProds/{{licensekey}}/{{username}}/%7B%22tolerance%22:%224%22,%22pagesize%22:%2220%22,%22name%22:%22Mosolv%22,%22page%22:%221%22%7D]\n13:14:46.050 [http-nio-7777-exec-2] INFO  dg.mpro.filter.CustomRequestLoggingFilter - Response time: 2 seconds\n\n12:57:14.812 [http-nio-7777-exec-1] INFO  dg.mpro.filter.CustomRequestLoggingFilter - REST REQUEST\nNUMBERS OF REQUESTS:= [3]\nMETHOD:= [GET]\nPARAMETERS &amp; VALUES :=\nREQUEST:= [/rest/indexv2/getMetadata]\n12:57:14.813 [http-nio-7777-exec-1] INFO  dg.mpro.filter.CustomRequestLoggingFilter - Response time: 1 seconds\n\n\n</code></pre>\n",
    "tags" : [ "java", "regex", "parsing" ],
    "owner" : {
      "account_id" : 42141131,
      "reputation" : 3,
      "user_id" : 30612188,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5e545f9a65f6b064ec57305bc22f9f87?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "William",
      "link" : "https://stackoverflow.com/users/30612188/william"
    },
    "is_answered" : true,
    "view_count" : 103,
    "answer_count" : 3,
    "score" : 0,
    "last_activity_date" : 1748353551,
    "creation_date" : 1748263609,
    "link" : "https://stackoverflow.com/questions/79638936/parsing-log-file-with-multiline-entries",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79639499,
    "question_id" : 79638936,
    "body" : "<p>I think these logs are generated by some custom Request Filter/Interceptor. You should give a try to Tomcat access logs if you are using Tomcat Server, there are flexible and easy to parse.</p>\n<p>For ref check: <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Access_Logging\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-9.0-doc/config/valve.html#Access_Logging</a></p>\n<p>Furthermore you can check this repo for tomcat access log parsing: <a href=\"https://github.com/YasinVighio/Tomcat-Log-Analyzer\" rel=\"nofollow noreferrer\">https://github.com/YasinVighio/Tomcat-Log-Analyzer</a></p>\n<p>If you are sticking with custom logging then I suggest you to identify pattern of logs</p>\n<ul>\n<li><p>Each entry is of 5 lines, you may use line counter while reading the file.</p>\n</li>\n<li><p>First line contains <strong>Timestamp, Thread name, Logging Level, Class Name - Rest Request</strong> (Some sort of constant), These can be transformed into DTO fields if you split 1st line with <strong>Space Delimiter</strong></p>\n</li>\n<li><p>Second, third and fourth can be split with first '=' found</p>\n</li>\n<li><p>Fifth line has also same pattern as of 1st, it can be transformed into DTO fields the same way.</p>\n</li>\n</ul>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16860149,
      "reputation" : 181,
      "user_id" : 12191150,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fec9a6154254eb5fd901f4a0045c0b1f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Yasin Ahmed",
      "link" : "https://stackoverflow.com/users/12191150/yasin-ahmed"
    },
    "creation_date" : 1748289242,
    "last_activity_date" : 1748289242,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79640609,
    "question_id" : 79638936,
    "body" : "<p>Try:</p>\n<pre><code>[0-9]{1,2}+:[0-9]{1,2}+:[0-9]{1,2}+\\.[0-9]{1,3}+.*REST REQUEST(?:\\n[^\\S\\n]*\\S.*)+\n</code></pre>\n<p>See: <a href=\"https://regex101.com/r/AJRGTu/1\" rel=\"nofollow noreferrer\">regex101</a></p>\n<hr />\n<p>Explanation</p>\n<ul>\n<li><code>[0-9]{1,2}+:[0-9]{1,2}+:[0-9]{1,2}+\\.[0-9]{1,3}+.*REST REQUEST</code>: This is basically taken from your Question, although I corrected &quot;Response time&quot; with &quot;REST REQUEST&quot;.</li>\n<li><code>(?: ... )+</code>: Match at least one time a non-empty line that is constituated by\n<ul>\n<li><code>\\n</code>: a linebreak</li>\n<li><code>[^\\S\\n]*</code>: 0 or more spaces that must not be linebreaks</li>\n<li><code>\\S</code>: followed by at one non-space, ensuring the line is not empty and</li>\n<li><code>.*</code>: anything that comes after that.</li>\n</ul>\n</li>\n</ul>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 18965720,
      "reputation" : 3215,
      "user_id" : 13840270,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-6D3hEgEPMp8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm2Wc0c7p8KxWNIp_ZANzog298z7g/s256-rj/photo.jpg",
      "display_name" : "DuesserBaest",
      "link" : "https://stackoverflow.com/users/13840270/duesserbaest"
    },
    "creation_date" : 1748353551,
    "last_activity_date" : 1748353551,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79638977,
    "question_id" : 79638936,
    "body" : "<p>To parse asked log lines (with Response time) I would suggest following regex:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/([\\d:.]+)\\s(\\[.+\\])\\s(\\w+)\\s\\s([\\w.]+)\\s-\\s(\\w+)/gm\n</code></pre>\n<p>Here all interested groups are wrapped by brackets, it allows to every Regex processor (e.g. in Java) extract each value defined by a group separately.</p>\n<p>You can use tool like <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> to compile and test a regex:</p>\n<p><a href=\"https://i.sstatic.net/pzigNiJf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/pzigNiJf.png\" alt=\"regex highlight\" /></a></p>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6060097,
      "reputation" : 35,
      "user_id" : 5004818,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e4133a1a01f20ab551b00a40dfd924c8?s=256&d=identicon&r=PG",
      "display_name" : "1000ISLANDS",
      "link" : "https://stackoverflow.com/users/5004818/1000islands"
    },
    "creation_date" : 1748264878,
    "last_activity_date" : 1748264878,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140462718,
    "post_id" : 79638936,
    "body" : "@William I added this as an answer! Please consider upvoting and accepting it so other people with a similar issue can find this in the future.",
    "score" : 0,
    "owner" : {
      "account_id" : 18965720,
      "reputation" : 3215,
      "user_id" : 13840270,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-6D3hEgEPMp8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm2Wc0c7p8KxWNIp_ZANzog298z7g/s256-rj/photo.jpg",
      "display_name" : "DuesserBaest",
      "link" : "https://stackoverflow.com/users/13840270/duesserbaest"
    },
    "creation_date" : 1748353592,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140459713,
    "post_id" : 79638936,
    "body" : "@DeusserBaest This is exactly what I needed. I was so far off. but thanks to you it works! Thankyou so much!",
    "score" : 0,
    "owner" : {
      "account_id" : 42141131,
      "reputation" : 3,
      "user_id" : 30612188,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/5e545f9a65f6b064ec57305bc22f9f87?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "William",
      "link" : "https://stackoverflow.com/users/30612188/william"
    },
    "creation_date" : 1748266398,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140459592,
    "post_id" : 79638936,
    "body" : "what ecactly do you mean by &quot;parse&quot;? If you just want to get a match for each entry you could use <a href=\"https://regex101.com/r/xnBziZ/1\" rel=\"nofollow noreferrer\"><code>[0-9]{1,2}+:[0-9]{1,2}+:[0-9]{1,2}+\\.[0-9]{1,3}+.*REST REQUEST(?:\\n[^\\S\\n]*\\S+.*)+</code></a>",
    "score" : 0,
    "owner" : {
      "account_id" : 18965720,
      "reputation" : 3215,
      "user_id" : 13840270,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-6D3hEgEPMp8/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm2Wc0c7p8KxWNIp_ZANzog298z7g/s256-rj/photo.jpg",
      "display_name" : "DuesserBaest",
      "link" : "https://stackoverflow.com/users/13840270/duesserbaest"
    },
    "creation_date" : 1748265042,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140459524,
    "post_id" : 79638936,
    "body" : "did you forget to escape the \\ in \\n?",
    "score" : 0,
    "owner" : {
      "account_id" : 15772183,
      "reputation" : 723,
      "user_id" : 11380911,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-wQ8TQ0A-FEM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re-vlj8B984pmGHkM41Rhzm1auZ0Q/mo/s256-rj/photo.jpg",
      "display_name" : "Kenzo Staelens",
      "link" : "https://stackoverflow.com/users/11380911/kenzo-staelens"
    },
    "creation_date" : 1748264056,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}