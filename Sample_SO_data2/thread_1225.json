{
  "question" : {
    "question_id" : 79733883,
    "title" : "How do you find max of certain item in arraylist in Java with parameter of age is less than average age?",
    "body" : "<p>I'm trying to build program in java which asks for information about basketball players and tells user which one basketball player is the tallest whose age is less than or equal to the average age.</p>\n<p>In the main program which the user interacts directly with I have the following.</p>\n<pre><code>public class Project1{\n     private int agesum;\n//Some variables at start of program.\n</code></pre>\n<p>I have an arraylist called players with which the user input\nI add to it the name, age and height of players based of the user input.\nI have the playerheight stored as a type named Height which calculates the height\nbased off given feet and inches using another class.\nTo get the tallest player I have this however it's been giving me an error.</p>\n<pre><code>Optional&lt;Object&gt; tallestheight = players.stream().max((Comparator&lt;? super Object&gt;) playerheight);\n</code></pre>\n<p>The error is:</p>\n<blockquote>\n<p>this class Height cannot be cast to class java.util.Comparator (Height is in unnamed module of loader 'app'; java.util.Comparator is in module java.base of loader 'bootstrap')\nat Project1.main(Project1.java:112)</p>\n</blockquote>\n<p>How do I write this to not get an error?</p>\n",
    "tags" : [ "java", "java-stream" ],
    "owner" : {
      "account_id" : 19078789,
      "reputation" : 51,
      "user_id" : 13931492,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/57981ce72d7fd540ad322ab2188b904a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Meir",
      "link" : "https://stackoverflow.com/users/13931492/meir"
    },
    "is_answered" : true,
    "view_count" : 146,
    "closed_date" : 1755323148,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1755300363,
    "creation_date" : 1755062676,
    "link" : "https://stackoverflow.com/questions/79733883/how-do-you-find-max-of-certain-item-in-arraylist-in-java-with-parameter-of-age-i",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ {
    "answer_id" : 79736573,
    "question_id" : 79733883,
    "body" : "<p>You don’t need a class member variable for sum of ages; just hold that value in a local.</p>\n<p>And you need not author an entire class for Height, nor store instances of that class. Just convert height from feet-inches to a total number of inches. You end up with a very simple class <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a>:</p>\n<pre><code>Player ( String name , int age , int heightInches ){}\n</code></pre>\n<p>Tip: You can define a record locally.</p>\n<p>Get the average age. If the list of players is empty, we use 0.0 as the average.</p>\n<pre><code>final double averageAge = \n    players\n        .stream()                      \n        .mapToInt( Player :: age )                      \n        .average()                      \n        .orElse( 0d ); \n</code></pre>\n<p>You might want to round that fractional number to a whole number of inches. That depends on your unstated business rules, so I’ll ignore that issue.</p>\n<p>Filter for players below that average. The result may be no <code>Player</code> at all, so we use <code>Optional</code>.</p>\n<pre><code>Optional&lt;Player&gt; tallestYoungPlayer = \n    players\n        .stream()                      \n        .filter( player -&gt; player.age() &lt; averageAge )\n        .max( \n            Comparator.comparingInt( Player :: heightInches ) \n        );\n</code></pre>\n<p>Using inches rather than writing a <code>Height</code> class avoids the problem where your code incorrectly defines a <code>Comparator</code>. See <a href=\"https://stackoverflow.com/questions/79733883/how-do-you-find-max-of-certain-item-in-arraylist-in-java-with-parameter-of-age-i/79736573#comment140663182_79733883\">this Comment</a>.</p>\n<p>Complete example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>record Player( String name , int age , int heightInches ) { }\nCollection &lt; Player &gt; players =\n        List.of(\n                new Player( &quot;Alice&quot; , 33 , 68 ) ,\n                new Player( &quot;Bob&quot; , 22 , 64 ) ,\n                new Player( &quot;Carol&quot; , 44 , 69 ) ,\n                new Player( &quot;Davis&quot; , 24 , 66 )\n        );\nfinal double averageAge =\n        players\n                .stream( )\n                .mapToInt( Player :: age )\n                .average( )\n                .orElse( 0d );\nOptional &lt; Player &gt; tallestYoungPlayer =\n        players\n                .stream( )\n                .filter( player -&gt; player.age( ) &lt; averageAge )\n                .max(\n                        Comparator.comparingInt( Player :: heightInches )\n                );\n</code></pre>\n<blockquote>\n<p>averageAge = 30.75</p>\n<p>tallestYoungPlayer = Optional[Player[name=Davis, age=24, heightInches=66]]</p>\n</blockquote>\n<h2>Loops</h2>\n<p>If you are not yet comfortable with Java streams, replace with conventional <code>for</code> loops. Not as brief, not as pretty.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Average\nlong sum = 0;\nlong count = 0;\nfor ( Player player1 : players )\n{\n    int age = player1.age( );\n    sum += age;\n    count++;\n}\nfinal double averageAge =\n        count &gt; 0 ? ( double ) sum / count : 0d;\n\n// Tallest\nboolean seen = false;\nPlayer best = null;\nComparator &lt; Player &gt; comparator = Comparator.comparingInt( Player :: heightInches );\nfor ( Player player : players )\n{\n    if ( player.age( ) &lt; averageAge )\n    {\n        if ( ! seen || comparator.compare( player , best ) &gt; 0 )\n        {\n            seen = true;\n            best = player;\n        }\n    }\n}\nOptional &lt; Player &gt; tallestYoungPlayer =\n        seen ? Optional. &lt; Player &gt; of( best ) : Optional. &lt; Player &gt; empty( );\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1755271758,
    "last_activity_date" : 1755300363,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140664030,
    "post_id" : 79733883,
    "body" : "Those needless complications got your Question closed. You don’t need a class member variable for sum of ages; just hold that value in a local. And you need not author an entire class for Height, nor store instances of that class. Just convert height from feet-inches to a total number of inches. You end with a very simple class <code>record Player ( int age , int heightInches ){}</code>. Tip: You can define a <code>record</code> locally.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1755124902,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140663944,
    "post_id" : 79733883,
    "body" : "The variable &#39;agesum&#39; is a variable to store the sum of the ages and then to divide by a varaibale named &#39;agefrequency&#39; to get the average age. playerheight = new Height(feet, inches); which refers to a formula in a class called used to calculate the height based of the given feet and inches. I need to get the tallest player who&#39;s age is less than the average age, so I need to get the max height from the arraylist and check if the age is less than or equal to the average and if not go through the rest of the heights until I find the tallest player whos age is less than or equal to the average.",
    "score" : 0,
    "owner" : {
      "account_id" : 19078789,
      "reputation" : 51,
      "user_id" : 13931492,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/57981ce72d7fd540ad322ab2188b904a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Meir",
      "link" : "https://stackoverflow.com/users/13931492/meir"
    },
    "creation_date" : 1755120613,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140663182,
    "post_id" : 79733883,
    "body" : "I think you have misunderstood what a <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.base/java/util/Comparator.html\" rel=\"nofollow noreferrer\">Comparator</a> is supposed to do.  You can’t just pass a single value as a Comparator.  A Comparator is a separate object capable of accepting two data objects, then returning an integer indicating which one comes first.  You probably want <code>max(Comparator.comparing(p -&gt; p.getHeight()))</code>.  However, that assumes the Height class implements Comparable.  (I’m not clear on why you even need a Height class.)",
    "score" : 1,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1755098842,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140661899,
    "post_id" : 79733883,
    "body" : "@Chaosfire  I believe we can safely presume <code>record Player ( String name , int age , int heightInches );</code> given prose of the Question and the common meaning of the terms player, age, and height.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1755069028,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140661889,
    "post_id" : 79733883,
    "body" : "I disagree, we have no idea how <code>Project1.agesum</code> is used. We don&#39;t know how <code>Height</code> is declared and used. We don&#39;t know what is <code>playerheight</code>. We don&#39;t know what is contained in the collection <code>players</code>. There are too many unknowns to tailor an answer for this question, unless we go for something generic, in which case the linked question is good enough.",
    "score" : 2,
    "owner" : {
      "account_id" : 23783500,
      "reputation" : 7109,
      "user_id" : 17795888,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Xay1V.jpg?s=256",
      "display_name" : "Chaosfire",
      "link" : "https://stackoverflow.com/users/17795888/chaosfire"
    },
    "creation_date" : 1755068686,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140661874,
    "post_id" : 79733883,
    "body" : "Voting to re-open. The Question is clear enough to write an Answer with specific solution.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1755068298,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140661822,
    "post_id" : 79733883,
    "body" : "what is <code>playerheight</code>? Is it really a <code>Comparator</code>? What about <code>Project1</code>? <code>agesum</code>? Have you tried to search this site? For example <a href=\"https://stackoverflow.com/q/31378324/85421\">How to find maximum value from a stream of Integer values in Java 8</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 31180,
      "reputation" : 29752,
      "user_id" : 85421,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/kKvXH.gif?s=256",
      "display_name" : "user85421",
      "link" : "https://stackoverflow.com/users/85421/user85421"
    },
    "creation_date" : 1755067334,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140661723,
    "post_id" : 79733883,
    "body" : "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>, otherwise no one can help.",
    "score" : 4,
    "owner" : {
      "account_id" : 23783500,
      "reputation" : 7109,
      "user_id" : 17795888,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Xay1V.jpg?s=256",
      "display_name" : "Chaosfire",
      "link" : "https://stackoverflow.com/users/17795888/chaosfire"
    },
    "creation_date" : 1755064016,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}