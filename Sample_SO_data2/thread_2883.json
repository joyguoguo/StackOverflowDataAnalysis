{
  "question" : {
    "question_id" : 79590392,
    "title" : "Serial Com Java to Arduino with ServoMotors",
    "body" : "<p>Im doing my thesis right now, Arduino Automatic Telescope. And im stuck at a problem cant control my servo motors from my Java program, LED light for debugging works but my motors dont move.</p>\n<pre><code>void loop() {\n  if (Serial.available() &gt; 0) {\n    // Turn on LED when receiving data\n    digitalWrite(ledPin, HIGH);\n    \n    // Read the incoming data\n    String receivedData = Serial.readStringUntil('\\n');\n    int position = receivedData.toInt();\n    \n    // Move servos\n    altitude.write(position);\n    azimuth.write(position);\n    delay(1000);\n    \n    // Return to zero\n    altitude.write(0);\n    azimuth.write(0);\n    \n    // Turn off LED when done processing\n    digitalWrite(ledPin, LOW);\n  }\n}\n</code></pre>\n<p>Java code</p>\n<pre><code>public static void main(String[] args) {\n\n       SerialPort arduinoPort = SerialPort.getCommPort(&quot;COM4&quot;);\n\n       if(arduinoPort.openPort()){\n        System.out.println(&quot;Port opened successfully&quot;);\n       }else{\n        System.out.println(&quot;Port couldnt be opened&quot;);\n        return;\n       }\n\n       //Configure Port\n       arduinoPort.setComPortParameters(9600, 8, SerialPort.ONE_STOP_BIT, SerialPort.NO_PARITY);\n       arduinoPort.setComPortTimeouts(SerialPort.TIMEOUT_READ_BLOCKING, 1000, 0);\n\n\n       sendIntToArduino(arduinoPort,90);\n       // Add delay to ensure data is sent\n        try {\n            Thread.sleep(2000);  // Wait 2 seconds\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n       arduinoPort.closePort();\n    }\n\n    public static void sendIntToArduino(SerialPort port, int degrees) {\n        // Convert to string with newline\n        String command = degrees + &quot;\\n&quot;;\n        byte[] buffer = command.getBytes();\n        \n        port.writeBytes(buffer, buffer.length);\n        System.out.println(&quot;Data was SENT: &quot; + degrees);\n    }\n</code></pre>\n<p>Manually everything works fine all cables are correctly connected. I think the problem is the data type im sending my data. If you got any advices im all ears.</p>\n",
    "tags" : [ "java", "arduino" ],
    "owner" : {
      "account_id" : 26775213,
      "reputation" : 19,
      "user_id" : 20370979,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4e00ac2b039e7defb23b930fe667cbb0?s=256&d=identicon&r=PG",
      "display_name" : "SeUz75",
      "link" : "https://stackoverflow.com/users/20370979/seuz75"
    },
    "is_answered" : false,
    "view_count" : 77,
    "closed_date" : 1745704122,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1745519625,
    "creation_date" : 1745491834,
    "link" : "https://stackoverflow.com/questions/79590392/serial-com-java-to-arduino-with-servomotors",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79591272,
    "question_id" : 79590392,
    "body" : "<p>When you open the serial port, Arduino resets, so any data sent immediately can be lost. Adding a delay ensures the board is ready to receive input.</p>\n<p>Update your Java code w/ below:</p>\n<pre><code>if (arduinoPort.openPort()) {\n    System.out.println(&quot;Port opened successfully&quot;);\n\n    // Add this delay to wait for Arduino reset to complete\n    try {\n        Thread.sleep(2000);  // Wait 2 seconds\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n\n    sendIntToArduino(arduinoPort, 90);\n} else {\n    System.out.println(&quot;Port couldn't be opened&quot;);\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1745519625,
    "last_activity_date" : 1745519625,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140385225,
    "post_id" : 79590392,
    "body" : "Bellow I have answered my question after a week of thinking about it.",
    "score" : 0,
    "owner" : {
      "account_id" : 26775213,
      "reputation" : 19,
      "user_id" : 20370979,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4e00ac2b039e7defb23b930fe667cbb0?s=256&d=identicon&r=PG",
      "display_name" : "SeUz75",
      "link" : "https://stackoverflow.com/users/20370979/seuz75"
    },
    "creation_date" : 1746037410,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140365621,
    "post_id" : 79590392,
    "body" : "I haven&#39;t done any Arduino programming in a while, but worth trying: in the Java code, add a delay between opening the port and sending the string.",
    "score" : 1,
    "owner" : {
      "account_id" : 339859,
      "reputation" : 13563,
      "user_id" : 669576,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/7a5b946d652df565b91a774311e7c442?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "001",
      "link" : "https://stackoverflow.com/users/669576/001"
    },
    "creation_date" : 1745501585,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140365250,
    "post_id" : 79590392,
    "body" : "After some debugging my java sends this data Port opened successfully Data was SENT: [B@448139f0 Data was : 574810 Which is correct. Seems like the line Serial.available&gt;0 never is true :/",
    "score" : 0,
    "owner" : {
      "account_id" : 26775213,
      "reputation" : 19,
      "user_id" : 20370979,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4e00ac2b039e7defb23b930fe667cbb0?s=256&d=identicon&r=PG",
      "display_name" : "SeUz75",
      "link" : "https://stackoverflow.com/users/20370979/seuz75"
    },
    "creation_date" : 1745496307,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140364989,
    "post_id" : 79590392,
    "body" : "When I open my serial monitor and type 90. Both motors move 90degrees and back to 0 like my arduino sketch.",
    "score" : 0,
    "owner" : {
      "account_id" : 26775213,
      "reputation" : 19,
      "user_id" : 20370979,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/4e00ac2b039e7defb23b930fe667cbb0?s=256&d=identicon&r=PG",
      "display_name" : "SeUz75",
      "link" : "https://stackoverflow.com/users/20370979/seuz75"
    },
    "creation_date" : 1745492740,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79591272" : [ {
      "comment_id" : 140385208,
      "post_id" : 79591272,
      "body" : "So i&#39;ve come to the conclution that the fist serial read that my java program does is almost 100% WRONG every time. Even adding delay isnt fixing it but I kept them. So what I did was my arduino is SENDING me gps data every 1sec. And the MOST IMPORTANT it to have a cycle which READS AGAIN 2 or 3 times the serialWrite of the Arduino ! And the outcome is this Data received from arduino is : 42. Data received from arduino is : 42.135398,24.745300 Data received from arduino is : 42.135398,24.745300 And this is how I solved this problem. Hope if anybody has the same problem will see my solution",
      "score" : 0,
      "owner" : {
        "account_id" : 26775213,
        "reputation" : 19,
        "user_id" : 20370979,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/4e00ac2b039e7defb23b930fe667cbb0?s=256&d=identicon&r=PG",
        "display_name" : "SeUz75",
        "link" : "https://stackoverflow.com/users/20370979/seuz75"
      },
      "creation_date" : 1746037113,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}