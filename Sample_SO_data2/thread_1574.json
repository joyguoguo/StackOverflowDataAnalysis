{
  "question" : {
    "question_id" : 79696967,
    "title" : "How to get around the permissions for rooted devices",
    "body" : "<pre><code>// TODO: Copy the file somewhere non-rooted, write, replace\npublic void saveProperties(UIProperties properties) {\n    try (Writer writer = new FileWriter(FILEPATH)) {\n        // Serialize the UIProperties object to JSON and write it to the file\n        gson.toJson(properties, writer);\n        Log.i(TAG, &quot;UI Properties saved to &quot; + FILEPATH);\n    }\n    catch (IOException e) {\n        Log.e(TAG, &quot;Could not save UI Properties to &quot; + FILEPATH);\n        Log.e(TAG, e.getMessage());\n    }\n}\n\n\n// TODO: Copy the file somewhere non-rooted, read, use\npublic UIProperties loadProperties() {\n    try(Reader reader = new FileReader(FILEPATH)) {\n        // Deserialize the JSON from the file into a UIProperties object\n        UIProperties properties = gson.fromJson(reader, UIProperties.class);\n\n        // If the file exists but is empty or contains invalid JSON, fromJson might return null\n        if (properties == null) {\n            Log.e(TAG, &quot;JSON file &quot; + FILEPATH + &quot; is empty or invalid. Returning new UIProperties.&quot;);\n            return new UIProperties();\n        }\n\n        return  properties;\n    }\n    catch (IOException e) {\n        Log.e(TAG, &quot;Could not load UI properties from &quot; + FILEPATH);\n        Log.e(TAG, e.getMessage());\n        return new UIProperties();\n    }\n    catch (JsonSyntaxException e) {\n        Log.e(TAG, &quot;Invalid JSON syntax in&quot; + FILEPATH);\n        return new UIProperties();\n    }\n}\n</code></pre>\n<p>How do I get around the permissions in android studio if I have a rooted device? I want to load and save a JSON file from a directory that would normally require root on android 15.</p>\n<blockquote>\n<p>/data/misc/com.crjase.systemuihook/properties.json: open failed: EACCES (Permission denied)</p>\n</blockquote>\n<p>Standard file writing doesn't use the root that I have given my app, so I'm wondering how I can do this.</p>\n",
    "tags" : [ "java", "android", "root", "file-writing" ],
    "owner" : {
      "account_id" : 17868786,
      "reputation" : 85,
      "user_id" : 12980562,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f58a0d4d148fd00988007385fd538a3b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "crjase",
      "link" : "https://stackoverflow.com/users/12980562/crjase"
    },
    "is_answered" : false,
    "view_count" : 67,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752406613,
    "creation_date" : 1752146129,
    "link" : "https://stackoverflow.com/questions/79696967/how-to-get-around-the-permissions-for-rooted-devices",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79697792,
    "question_id" : 79696967,
    "body" : "<p>as Robert said, I have to copy the file somewhere non-rooted, do my modifications to the file there, then replace the original file with the new one.</p>\n<p>I can run superuser commands from my application, so that does the trick.</p>\n<pre><code>public void validateProperties() {\n        // Note: On Android, files and directories typically reside within\n        // application-specific sandboxes or well-defined shared locations.\n        // Using arbitrary paths like BASE_DIR and FILEPATH outside of\n        // application sandboxes usually implies root access for creation/management.\n\n        // Create Base Directory if it doesn't exist\n        if (!Root.execute(&quot;[ -d &quot; + BASE_DIR + &quot; ]&quot;).isSuccess()) {\n\n            Log.i(TAG, &quot;[WARNING] Base directory doesn't exist, making it&quot;);\n\n            Root.execute(&quot;mkdir &quot; + BASE_DIR);\n            Root.execute(&quot;chmod 777 &quot; + BASE_DIR);\n        }\n        Log.i(TAG, &quot;[INFO] Base directory exists&quot;);\n\n\n        // Create Properties.json file if it doesn't exist\n        if (!Root.execute(&quot;[ -f &quot; + FILEPATH + &quot; ]&quot;).isSuccess()) {\n\n            Log.i(TAG, &quot;[WARNING] Properties file doesn't exist, making it&quot;);\n\n            Root.execute(&quot;echo '{}' &gt; &quot; + FILEPATH);\n            Root.execute(&quot;chmod 777 &quot; + FILEPATH);\n        }\n        Log.i(TAG, &quot;[INFO] Properties file exists&quot;);\n    }\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 17868786,
      "reputation" : 85,
      "user_id" : 12980562,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f58a0d4d148fd00988007385fd538a3b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "crjase",
      "link" : "https://stackoverflow.com/users/12980562/crjase"
    },
    "creation_date" : 1752204258,
    "last_activity_date" : 1752406613,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140579642,
    "post_id" : 79696967,
    "body" : "Apps can&#39;t get root permissions. You need a command-line program that is executed via <code>su</code> from within your app. Copy the file somewhere you have read access to print the content of stdout and read it in your app. That is the way how to use root permissions.",
    "score" : 1,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43469,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1752147712,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}