{
  "question" : {
    "question_id" : 79755851,
    "title" : "Checking if test run in interactive session",
    "body" : "<p>How can you make an assumption that checks if a test is executed in an interactive session?</p>\n<p>FEST robot clicks and such are ignored on the CI server now since the session is not interactive, but I don't want to hard-codedly <code>@Disable</code> them. I would rather execute some assumption that tests if my <code>BasicRobot</code> can do anything at all. I refer to <code>org.fest.swing.core.BasicRobot</code> / <code>org.assertj.swing.core.BasicRobot</code>.</p>\n<p>I would rather avoid displaying an auxiliary <code>Window</code> <code>@BeforeEach</code> (or even <code>@BeforeAll</code>).</p>\n<p>This, on the other hand, relies on an initial pointer location which makes it a bit fragile.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @BeforeEach\n    void testRobot() {\n        PointerInfo initialPointerInfo = MouseInfo.getPointerInfo();\n        Point initialLocation = initialPointerInfo.getLocation();\n        robot.moveMouse(initialLocation.x + 5, initialLocation.y + 5);\n        PointerInfo subsequentPointerInfo = MouseInfo.getPointerInfo();\n        Point subsequentLocation = subsequentPointerInfo.getLocation();\n        assumeFalse(Objects.equals(initialLocation, subsequentLocation), &quot;Robot commands ignored. Non-interactive session?&quot;);\n    }\n</code></pre>\n<p>Please note it is <em>not</em> about headless / not headless (the server <em>does</em> have a graphic environment).</p>\n<p>Java 8.</p>\n",
    "tags" : [ "java", "junit5", "fest" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : false,
    "view_count" : 47,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1757074873,
    "creation_date" : 1756996177,
    "link" : "https://stackoverflow.com/questions/79755851/checking-if-test-run-in-interactive-session",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79756490,
    "question_id" : 79755851,
    "body" : "<pre class=\"lang-java prettyprint-override\"><code>    private boolean interactionPossible() {\n        PointerInfo initialPointerInfo = MouseInfo.getPointerInfo();\n        Point initialLocation = initialPointerInfo.getLocation();\n        Point requestedLocation = getRandomPointOnScreen();\n        robot.moveMouse(requestedLocation);\n        PointerInfo subsequentPointerInfo = MouseInfo.getPointerInfo();\n        Point subsequentLocation = subsequentPointerInfo.getLocation();\n        boolean robotMovedPointer = !Objects.equals(initialLocation, subsequentLocation);\n        return robotMovedPointer;\n    }\n\n    private Point getRandomPointOnScreen() {\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n        Random random = new Random();\n        int x = random.nextInt(screenSize.width);\n        int y = random.nextInt(screenSize.height);\n        Point point = new Point(x, y);\n        return point;\n    }\n</code></pre>\n<p>There's a vanishingly small possibility that a new point is identical to the current point. However, it arguably could be neglected.</p>\n<p><strong>UPD:</strong> For some reason, on our CI server, a first mouse move positions the cursor in an entirely different (seemingly random) point, not the one the robot requested. Subsequent mouse moves are, as expected, ignored due to a non-interactive session. Locally, though, my solution works.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1757056355,
    "last_activity_date" : 1757074873,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}