{
  "question" : {
    "question_id" : 79840735,
    "title" : "Why does can stop working test with Wiremock",
    "body" : "<p>I have tests which work exactly how they should work, but then something happen, and now It doesnt work. I think It can be problem with version.</p>\n<pre><code>public void mockEmployeeSearch(EmployeeSearchResponseCase responseCase) {\nresetMocks(employeeSearchUrl);\n\nString body = getJsonBody(responseCase, responseCase.status, &quot;mdm/employee/&quot;);\nSystem.out.println(&quot;EmployeeSearch stub status=&quot; + responseCase.status + &quot;, body=&quot; + body);\n\nserver.stubFor(WireMock.get(WireMock.urlPathEqualTo(employeeSearchUrl))\n    .willReturn(WireMock.aResponse()\n        .withStatus(responseCase.status)\n        .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n        .withBody(getJsonBody(responseCase, responseCase.status, &quot;mdm/employee/&quot;))));\n</code></pre>\n<p>}</p>\n<p>Thats my mock. Body successffuly added. But in exception message I dont have message in my mock</p>\n<p>Exception Cause looks like\nfeign.FeignException$BadRequest: [400 Bad Request] during [GET] to [http://localhost:8092/api/v1/dzkz/mdm-gateway/employee?uname=name] [MdmGatewayClient#findEmployeeByUname(String)]: []\nbut should</p>\n<p>feign.FeignException$BadRequest: [400 Bad Request] during [GET] to [http://localhost:8092/api/v1/dzkz/mdm-gateway/employee?uname=name] [MdmGatewayClient#findEmployeeByUname(String)]: [&quot;Not found employee&quot;]</p>\n<p>My test</p>\n<pre><code>@ParameterizedTest(name = &quot;{0}&quot;)\n  @DisplayName(&quot;Test returns error&quot;)\n  @MethodSource(&quot;provideArgsForClearingErrorTest&quot;)\n  void testReturnsError(\n      String msg,\n      String request,\n      EmployeeSearchResponseCase employeeSearchResponse,\n      CostTypeSearchResponseCase costTypeSearchResponse,\n      MdmMockConfig.AccountingTemplateResponseCase accountingTemplateSearchResponse,\n      SearchResponseCase registerSearchResponse,\n      SaveResponseCase registerSaveResponse,\n      int expectedStatus,\n      String expectedJson\n  ) throws Exception {\n    mdmServer.mockEmployeeSearch(employeeSearchResponse);\n    mdmServer.mockCostTypeSearch(costTypeSearchResponse);\n    mdmServer.mockCurrencyInfoSearch(CurrencyInfoSearchResponseCase.OK);\n    mdmServer.mockPartnerInfoSearch(PartnerInfoSearchResponseCase.PARTNER_CASE_FIRST);\n    mdmServer.mockAccountingTemplateSearch(accountingTemplateSearchResponse);\n    registerServer.mockSearch(registerSearchResponse);\n    registerServer.mockSave(registerSaveResponse);\n    glaServer.mockOperationDayStatus(OperationDayStatusResponseCase.OK);\n\n    String json = mockMvc.perform(post(CLEARING_URL)\n            .header(&quot;uniqueKey&quot;, ControllerHelper.REQUEST_ID)\n            .contentType(MediaType.APPLICATION_JSON)\n            .content(request))\n        .andExpect(status().is(expectedStatus))\n        .andReturn()\n        .getResponse()\n        .getContentAsString(StandardCharsets.UTF_8);\n\n    matchJson(expectedJson, json, &quot;created&quot;, &quot;createdDate&quot;, &quot;detail&quot;);\n  }\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "unit-testing", "wiremock", "spring-cloud-feign" ],
    "owner" : {
      "account_id" : 29890320,
      "reputation" : 7,
      "user_id" : 22906633,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/90bd533be5eb78a6fc2cd70be734f06c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Alexis",
      "link" : "https://stackoverflow.com/users/22906633/alexis"
    },
    "is_answered" : false,
    "view_count" : 46,
    "closed_date" : 1765189559,
    "answer_count" : 0,
    "score" : -3,
    "last_activity_date" : 1765182503,
    "creation_date" : 1765182503,
    "link" : "https://stackoverflow.com/questions/79840735/why-does-can-stop-working-test-with-wiremock",
    "closed_reason" : "Needs details or clarity"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}