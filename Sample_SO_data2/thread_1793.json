{
  "question" : {
    "question_id" : 79677966,
    "title" : "Unable to connect Mysql docker container to spring boot application running locally",
    "body" : "<p>I have this configuration in my docker-compose file</p>\n<pre><code>services:\n  mysql:\n    image: mysql:8.3.0\n    container_name: mysqlTest\n    restart: always\n    environment:\n      MYSQL_ROOT_PASSWORD: password\n      MYSQL_DATABASE: TestingMysqlContainer\n      MYSQL_USER: root\n      MYSQL_PASSWORD: password\n    ports:\n      - &quot;3308:3306&quot;\n    volumes:\n      - mysql_data:/var/lib/mysql\n\nvolumes:\n  mysql_data:\n\n</code></pre>\n<p>And in my application.properties file i have this configuration</p>\n<pre><code>spring.application.name=TestingMysqlContainer\n\nspring.datasource.url=jdbc:mysql://localhost:3308/TestingMysqlContainer\nspring.datasource.username=root\nspring.datasource.password=password\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.hibernate.ddl-auto=update\n\n</code></pre>\n<p>But my spring boot application cannot connect to the Mysql container created.</p>\n<pre><code>The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n2025-06-24T17:52:00.228+01:00  WARN 9084 --- [TestingMysqlContainer] [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:165) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:55) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:837) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:420) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:238) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:180) ~[mysql-connector-j-9.2.0.jar:9.2.0]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:139) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:368) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:205) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:483) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:571) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:101) ~[HikariCP-6.3.0.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111) ~[HikariCP-6.3.0.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:126) ~[hibernate-core-6.6.18.Final.jar:6.6.18.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:483) ~[hibernate-core-6.6.18.Final.jar:6.6.18.Final]\n    at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcIsolationDelegate.delegateWork(JdbcIsolationDelegate.java:61) ~[hibernate-core-6.6.18.Final.jar:6.6.18.Final]\n    ... 35 common frames omitted\nCaused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n</code></pre>\n<p>I get the above in the logs.</p>\n<p>Please i need help.</p>\n",
    "tags" : [ "java", "mysql", "spring-boot", "docker", "docker-compose" ],
    "owner" : {
      "account_id" : 34367663,
      "reputation" : 1,
      "user_id" : 26532690,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/31d7223f21e18fde92d98fc2f216c008?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Landry Okoye",
      "link" : "https://stackoverflow.com/users/26532690/landry-okoye"
    },
    "is_answered" : false,
    "view_count" : 65,
    "answer_count" : 1,
    "score" : -4,
    "last_activity_date" : 1750798941,
    "creation_date" : 1750784998,
    "link" : "https://stackoverflow.com/questions/79677966/unable-to-connect-mysql-docker-container-to-spring-boot-application-running-loca",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79678216,
    "question_id" : 79677966,
    "body" : "<p>Your setup looks mostly good. A couple of quick tips:</p>\n<ol>\n<li><p>You're mapping port <code>3308</code> on the host to MySQL's default <code>3306</code> in the container – make sure your app actually connects to <code>localhost:3308</code>, which you did correctly in <code>application.properties</code>.</p>\n</li>\n<li><p>You don’t need to specify both <code>MYSQL_USER</code> and <code>MYSQL_ROOT_PASSWORD</code> with the same <code>root</code> user. <code>MYSQL_USER</code> is meant for a separate user. Either:</p>\n<ul>\n<li><p>Remove <code>MYSQL_USER</code> (if you're using root), <strong>or</strong></p>\n</li>\n<li><p>Set a different user and adjust <code>application.properties</code> accordingly.</p>\n</li>\n</ul>\n</li>\n</ol>\n<p>If it's still not connecting, check:</p>\n<ul>\n<li><p>MySQL container logs: <code>docker logs mysqlTest</code></p>\n</li>\n<li><p>Wait a few seconds after container starts — MySQL might not be ready instantly. Add a retry in your app or use health checks.</p>\n</li>\n</ul>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2665699,
      "reputation" : 2779,
      "user_id" : 2304204,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/mM66T.jpg?s=256",
      "display_name" : "Oleg Imanilov",
      "link" : "https://stackoverflow.com/users/2304204/oleg-imanilov"
    },
    "creation_date" : 1750798941,
    "last_activity_date" : 1750798941,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140539456,
    "post_id" : 79677966,
    "body" : "An obvious first question: is your container running at all? The second one: did you make sure that mysql actually started and is ready to receive connections before trying to use it from your app? And the third one: where does you app run? If it runs in another container, then localhost will point to the container, not to your host computer.",
    "score" : 0,
    "owner" : {
      "account_id" : 7035840,
      "reputation" : 34519,
      "user_id" : 5389997,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/50ce1e08eea42756ffa9415a9e8df140?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Shadow",
      "link" : "https://stackoverflow.com/users/5389997/shadow"
    },
    "creation_date" : 1750797112,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79678216" : [ {
      "comment_id" : 140545049,
      "post_id" : 79678216,
      "body" : "Thanks, its successfully connecting now",
      "score" : 0,
      "owner" : {
        "account_id" : 34367663,
        "reputation" : 1,
        "user_id" : 26532690,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/31d7223f21e18fde92d98fc2f216c008?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Landry Okoye",
        "link" : "https://stackoverflow.com/users/26532690/landry-okoye"
      },
      "creation_date" : 1750955649,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}