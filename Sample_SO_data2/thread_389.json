{
  "question" : {
    "question_id" : 79804407,
    "title" : "Private key of Certificate is not extractable from Windows KeyStore though private key is exportable",
    "body" : "<p>I have some certificates in my windows keystore whose private key is also exportable.\nI am trying to access the keystore and extract the private key using alias. Then i need to send the privateKey to Signer method. But, the PrivateKey is not extracted. It is still null. can i get the private key using following code snippet? If not, which is the way?</p>\n<pre class=\"lang-java prettyprint-override\"><code>KeyStore keyStore = KeyStore.getInstance(&quot;Windows-MY&quot;, &quot;SunMSCAPI&quot;);\nkeyStore.load(null,null);\nEnumeration&lt;String&gt; aliases = keyStore.aliases();\nPrivateKey pk =null;\nwhile (aliases.hasMoreElements()) {\n    String alias = aliases.nextElement();\n    if(alias.equals(&quot;MUHAMMAD AHAD UL ALAM&quot;)) {\n        Key key = keyStore.getKey(alias,null);\n        if(key instanceof PrivateKey) {\n        pk = (PrivateKey) key;\n        }\n    }\n    Signer signer = new Signer(pk);\n}\n</code></pre>\n<p>from debugging, i can see the private key but it is not extracted as PrivateKey.<a href=\"https://i.sstatic.net/EzuxebZP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/EzuxebZP.png\" alt=\"\" /></a></p>\n",
    "tags" : [ "java", "private-key", "pki" ],
    "owner" : {
      "account_id" : 8977755,
      "reputation" : 71,
      "user_id" : 6693950,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f161ff443d272c45a4225dd888d6d5db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ahad alam",
      "link" : "https://stackoverflow.com/users/6693950/ahad-alam"
    },
    "is_answered" : false,
    "view_count" : 70,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1761804722,
    "creation_date" : 1761800867,
    "link" : "https://stackoverflow.com/questions/79804407/private-key-of-certificate-is-not-extractable-from-windows-keystore-though-priva",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140826580,
    "post_id" : 79804407,
    "body" : "Note that even if the key is exportable <code>CPrivatekey</code> does not support exporting the private key data: <code>getEncoded()</code> is not implemented and returns null. Keys in the Windows certificate store are meant to be used by Windows crypo API algorithms where the key does not leave the store.",
    "score" : 3,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43459,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1761813579,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140826567,
    "post_id" : 79804407,
    "body" : "Your code has <code>pk</code> but your screenshot has <code>privateKey</code>. Please clarify. But you&#39;re not going to get a private key without specifying a password. NB You don&#39;t need to loop. You can get the key directly.",
    "score" : 1,
    "owner" : {
      "account_id" : 71739,
      "reputation" : 311872,
      "user_id" : 207421,
      "user_type" : "registered",
      "accept_rate" : 82,
      "profile_image" : "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=256&d=identicon&r=PG",
      "display_name" : "user207421",
      "link" : "https://stackoverflow.com/users/207421/user207421"
    },
    "creation_date" : 1761813148,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140826338,
    "post_id" : 79804407,
    "body" : "the private key is here but it is not extracted.",
    "score" : 0,
    "owner" : {
      "account_id" : 8977755,
      "reputation" : 71,
      "user_id" : 6693950,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f161ff443d272c45a4225dd888d6d5db?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "ahad alam",
      "link" : "https://stackoverflow.com/users/6693950/ahad-alam"
    },
    "creation_date" : 1761804773,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140826293,
    "post_id" : 79804407,
    "body" : "Have you checked which condition is failing?",
    "score" : 0,
    "owner" : {
      "account_id" : 447545,
      "reputation" : 2129,
      "user_id" : 841221,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/157afa47c9a0690a8fa548efeb606afe?s=256&d=identicon&r=PG",
      "display_name" : "Aakash",
      "link" : "https://stackoverflow.com/users/841221/aakash"
    },
    "creation_date" : 1761801649,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}