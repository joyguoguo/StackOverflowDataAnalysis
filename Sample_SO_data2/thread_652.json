{
  "question" : {
    "question_id" : 79789602,
    "title" : "Java 25 AOT with directory in classpath",
    "body" : "<p>I was trying to test Java 25 AOT on a Java application that I'm still working on and so it's not built into a jar file.</p>\n<p>My java class in file ~/workspace/demoj25/src/Demo.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class Demo {\n  public static void main(String[] args) {\n    IO.println(&quot;hello&quot;);\n  }\n}\n</code></pre>\n<p>I compiled the class using javac so that I have file ~/workspace/demoj25/src/Demo.class</p>\n<p>I executed this command from ~/workspace/demoj25 to create the AOT cache file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java -XX:AOTCacheOutput=cache.aot -cp src Demo\n</code></pre>\n<p>And this gave me error:</p>\n<pre><code>[error][aot] Error: non-empty directory 'src'\n</code></pre>\n<p>Does this mean I have to use jars only in my classpath?\nIs there a workaround?</p>\n<p>I'd like to be able to make use of faster startup time that AOT cache provides during testing of my app without generating jar each time I make a change.</p>\n",
    "tags" : [ "java", "java-aot" ],
    "owner" : {
      "account_id" : 195985,
      "reputation" : 1151,
      "user_id" : 439203,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/4898f586c4aa3db61a72fabf36d42836?s=256&d=identicon&r=PG",
      "display_name" : "mike27",
      "link" : "https://stackoverflow.com/users/439203/mike27"
    },
    "is_answered" : true,
    "view_count" : 223,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1760477214,
    "creation_date" : 1760385469,
    "link" : "https://stackoverflow.com/questions/79789602/java-25-aot-with-directory-in-classpath",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79790050,
    "question_id" : 79789602,
    "body" : "<p>According to <a href=\"https://openjdk.org/jeps/483#Description:%7E:text=Class%20paths%20must%20contain%20only%20JAR%20files%3B%20directories%20in%20class%20paths%20are%20not%20supported%20because%20the%20JVM%20cannot%20efficiently%20check%20them%20for%20consistency\" rel=\"noreferrer\">JEP-483</a>:</p>\n<blockquote>\n<p>Class paths <strong>must contain only JAR files</strong>; directories in class paths are not supported because the JVM cannot efficiently check them for consistency.</p>\n</blockquote>\n<p>To be honest, I am not sure if you even get any advantage of faster startup times during development. I might say the extra work of training and putting things together wonâ€™t be worth the effort.</p>\n",
    "score" : 5,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 30203153,
      "reputation" : 582,
      "user_id" : 23146886,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e3c4e0cc1f6a6d4956e63a0779338b48?s=256&d=identicon&r=PG",
      "display_name" : "Tamas Csizmadia",
      "link" : "https://stackoverflow.com/users/23146886/tamas-csizmadia"
    },
    "creation_date" : 1760435440,
    "last_activity_date" : 1760435440,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140795895,
    "post_id" : 79789602,
    "body" : "I edited the question to show a full code sample",
    "score" : 0,
    "owner" : {
      "account_id" : 195985,
      "reputation" : 1151,
      "user_id" : 439203,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/4898f586c4aa3db61a72fabf36d42836?s=256&d=identicon&r=PG",
      "display_name" : "mike27",
      "link" : "https://stackoverflow.com/users/439203/mike27"
    },
    "creation_date" : 1760477239,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140795190,
    "post_id" : 79789602,
    "body" : "@Gimby native-image takes waaaaaay to long to compile for &quot;I&#39;d like to be able to make use of faster startup time that AOT cache provides during testing of my app without generating jar each time I make a change.&quot; (in addition to its closed world assumptions) - and the AOT archive is intended to improve startup time of applications without much effort.",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17111,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1760455217,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140794838,
    "post_id" : 79789602,
    "body" : "Faster startup times are generally achieved through lazy loading of services, not through a marginal improvement in java code execution. It would make more sense into looking into a GraalVM based solution such as Quarkus or Spring Boot Native.",
    "score" : 0,
    "owner" : {
      "account_id" : 187094,
      "reputation" : 5301,
      "user_id" : 424903,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/8oHZF.png?s=256",
      "display_name" : "Gimby",
      "link" : "https://stackoverflow.com/users/424903/gimby"
    },
    "creation_date" : 1760446064,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140793835,
    "post_id" : 79789602,
    "body" : "Does this issue also happen on a project without external dependencies? Are you using the default package? Please make sure to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question.",
    "score" : 0,
    "owner" : {
      "account_id" : 15064163,
      "reputation" : 17111,
      "user_id" : 10871900,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/720202b6e19abc330dcd92e6a1254562?s=256&d=identicon&r=PG",
      "display_name" : "dan1st",
      "link" : "https://stackoverflow.com/users/10871900/dan1st"
    },
    "creation_date" : 1760393069,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140793757,
    "post_id" : 79789602,
    "body" : "To clarify, under /path/to/project/build/classes/java/main I have the compiled .class files. there&#39;re no jars generated for the files in the project, only .class files",
    "score" : 0,
    "owner" : {
      "account_id" : 195985,
      "reputation" : 1151,
      "user_id" : 439203,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/4898f586c4aa3db61a72fabf36d42836?s=256&d=identicon&r=PG",
      "display_name" : "mike27",
      "link" : "https://stackoverflow.com/users/439203/mike27"
    },
    "creation_date" : 1760389693,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140793755,
    "post_id" : 79789602,
    "body" : "/path/to/project",
    "score" : 0,
    "owner" : {
      "account_id" : 195985,
      "reputation" : 1151,
      "user_id" : 439203,
      "user_type" : "registered",
      "accept_rate" : 64,
      "profile_image" : "https://www.gravatar.com/avatar/4898f586c4aa3db61a72fabf36d42836?s=256&d=identicon&r=PG",
      "display_name" : "mike27",
      "link" : "https://stackoverflow.com/users/439203/mike27"
    },
    "creation_date" : 1760389624,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140793687,
    "post_id" : 79789602,
    "body" : "In which directory are you executing the command?",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1760386886,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}