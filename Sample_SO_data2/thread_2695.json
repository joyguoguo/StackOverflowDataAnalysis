{
  "question" : {
    "question_id" : 79605769,
    "title" : "Java code running in JDK 17, the fieldClass.getDeclaredFields() method returns empty even added --add-opens=java.base/java.lang.reflect=ALL-UNNAMED",
    "body" : "<p>In JDK 17, I encounter an issue while using <code>fieldClass.getDeclaredFields()</code> to get the field list in following sample code. The <code>Field[]</code> fields array returns empty even <code>Field.class</code> file for JDK17 has private fields.</p>\n<p>I also added following parameter in VM parameter configuration in Eclipse, it is still same issue.</p>\n<pre class=\"lang-none prettyprint-override\"><code>--add-opens=java.base/java.lang.reflect=ALL-UNNAMED\n</code></pre>\n<p>May I check what else I missed?\nWhat else exactly need to be done to make the <code>fieldClass.getDeclaredFields()</code> method return values?</p>\n<p>My code sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Modifier;\nimport java.lang.reflect.Constructor;\n\npublic static void checkFields() {\n   \n    try {\n        //get Field class object\n        Class&lt;?&gt; fieldClass = Field.class;\n\n        //list all fields\n        System.out.println(&quot;\\nFields in &quot; + fieldClass.getName() + &quot;:&quot;);\n        Field[] fields = fieldClass.getDeclaredFields();\n        for (Field field : fields) {\n            System.out.println(&quot;  &quot; + Modifier.toString(field.getModifiers()) + &quot; &quot; + field.getType().getSimpleName() + &quot; &quot; + field.getName());\n        }\n\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n    \n}\n    \n\n    \npublic static void main(String[] args) {\n    checkFields();\n}\n</code></pre>\n<p>Java code running in JDK 17, the <code>fieldClass.getDeclaredFields()</code> method returns empty even added <code>--add-opens=java.base/java.lang.reflect=ALL-UNNAMED</code>.</p>\n",
    "tags" : [ "java", "reflection", "java-17" ],
    "owner" : {
      "account_id" : 8725355,
      "reputation" : 113,
      "user_id" : 6527133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e32b9f6ecebff5f28ed41bf62c1b1cce?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "xjfromsh",
      "link" : "https://stackoverflow.com/users/6527133/xjfromsh"
    },
    "is_answered" : false,
    "view_count" : 123,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1747291225,
    "creation_date" : 1746373164,
    "link" : "https://stackoverflow.com/questions/79605769/java-code-running-in-jdk-17-the-fieldclass-getdeclaredfields-method-returns-e",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140398192,
    "post_id" : 79605769,
    "body" : "It depends on what your third-party library is trying to do and what API it provides. Does it truly need access to the fields of <code>java.lang.Field</code>? Or is that a symptom of a configuration problem?",
    "score" : 1,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1746477850,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140396826,
    "post_id" : 79605769,
    "body" : "@Slaw, thank you! My Java code uses a third party jar package which uses the Java reflect feature. My code works fine in JDK 1.8. But, it encountered the mentioned issue while I was trying to upgrade the JDK version to 17. Because I am not able to modify the source code in the third party jar package, I am wondering how I can address that issue while upgrading the JDK version to 17. After reading your provide threads, can I assume a solution is impossible?",
    "score" : 0,
    "owner" : {
      "account_id" : 8725355,
      "reputation" : 113,
      "user_id" : 6527133,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e32b9f6ecebff5f28ed41bf62c1b1cce?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "xjfromsh",
      "link" : "https://stackoverflow.com/users/6527133/xjfromsh"
    },
    "creation_date" : 1746448252,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395181,
    "post_id" : 79605769,
    "body" : "Whatever you’re trying to do, this is the wrong way to do it.  Don’t try to hack the internals of Java SE.  Private members are not guaranteed to be stable and can be changed or removed between releases.",
    "score" : 4,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1746388367,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140395150,
    "post_id" : 79605769,
    "body" : "See <a href=\"https://bugs.openjdk.java.net/browse/JDK-8210522\" rel=\"nofollow noreferrer\">JDK-8210522 – Improve filtering for classes with security sensitive fields</a>. Also see this related question: <a href=\"https://stackoverflow.com/q/56039341/6395627\">Get declared fields of java.lang.reflect.Fields in jdk12</a>. If you&#39;re trying to drop the <code>final</code> modifier, then this question may actually be a duplicate.",
    "score" : 2,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49904,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1746387283,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}