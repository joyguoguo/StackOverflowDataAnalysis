{
  "question" : {
    "question_id" : 79804783,
    "title" : "Build fails as both LOCAL_SDK_VERSION and LOCAL_PRIVATE_PLATFORM_APIS are set",
    "body" : "<p>I'm beginning to customize my phone and I'm following this <a href=\"https://developer.sony.com/open-source/aosp-on-xperia-open-devices/guides/aosp-build-instructions/build-aosp-android-13\" rel=\"nofollow noreferrer\">guide</a> to build AOSP for an Xperia.</p>\n<p>I selected <code>aosp_arm64-eng</code> target by running <code>source build/envsetup.sh &amp;&amp; lunch</code>, then ran <code>make -j$(nproc)</code>. Sadly, it fails with:</p>\n<pre><code>[ 88% 520/590] including packages/apps/ExtendedSettings/Android.mk ...\nFAILED: \npackages/apps/ExtendedSettings/Android.mk: error: ExtendedSettings: Specifies both LOCAL_SDK_VERSION (system_current) and LOCAL_PRIVATE_PLATFORM_APIS (true)\n but should specify only one \nIn file included from build/make/core/clear_vars.mk:519:\nIn file included from packages/apps/ExtendedSettings/Android.mk:29:\nIn file included from build/make/core/package.mk:50:\nIn file included from build/make/core/package_internal.mk:375:\nIn file included from build/make/core/java.mk:162:\nbuild/make/core/sdk_check.mk:34: error: done.\n13:15:42 ckati failed with: exit status 1\n\n#### failed to build some targets (02:15 (mm:ss)) ####\n</code></pre>\n<p>A similar <a href=\"https://stackoverflow.com/questions/75362819/servicemode-android-mk-specifies-both-local-sdk-version-system-current-and-lo\">question</a> to mine says not to enable <code>LOCAL_ODM_MODULE</code> as it sets <code>LOCAL_SDK_VERSION</code>. It is not enabled in my Android.mk. I feel like I need to find what else sets <code>LOCAL_SDK_VERSION</code> as I may need the <code>LOCAL_PRIVATE_PLATFORM_APIS</code> (the sdk version variable is not set in the listed Makefiles, but the private platform api is.)</p>\n<p>Where can I find related documentation about variable dependencies? Or what variable should I look for in this case?</p>\n",
    "tags" : [ "java", "makefile", "android-source" ],
    "owner" : {
      "account_id" : 17558126,
      "reputation" : 605,
      "user_id" : 13350024,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/14c4243b7242143d32af17a234aed532?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mltm",
      "link" : "https://stackoverflow.com/users/13350024/mltm"
    },
    "is_answered" : false,
    "view_count" : 147,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1761828770,
    "creation_date" : 1761828770,
    "link" : "https://stackoverflow.com/questions/79804783/build-fails-as-both-local-sdk-version-and-local-private-platform-apis-are-set",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140828574,
    "post_id" : 79804783,
    "body" : "@Max, thank you, but I have no local.properties in android directory, only under development/samples and external directories.",
    "score" : 0,
    "owner" : {
      "account_id" : 17558126,
      "reputation" : 605,
      "user_id" : 13350024,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/14c4243b7242143d32af17a234aed532?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mltm",
      "link" : "https://stackoverflow.com/users/13350024/mltm"
    },
    "creation_date" : 1761892675,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140827867,
    "post_id" : 79804783,
    "body" : "Have you tried to remove local.sdk.version from android/local.properties?",
    "score" : 0,
    "owner" : {
      "account_id" : 17553626,
      "reputation" : 508,
      "user_id" : 12733532,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-EAww28wDCxk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcgKS9dXdmUh-hOQPlZYZygBUfLwQ/s256-rj/photo.jpg",
      "display_name" : "Max",
      "link" : "https://stackoverflow.com/users/12733532/max"
    },
    "creation_date" : 1761851009,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}