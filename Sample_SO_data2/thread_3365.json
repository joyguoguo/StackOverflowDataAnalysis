{
  "question" : {
    "question_id" : 79555436,
    "title" : "Not able to consume event from salesforce platform event using camel salesforce",
    "body" : "<p>Not able to consume event from salesforce platform event using camel salesforce</p>\n<p>I am using camel 4.8.0, JDK 17 and Spring boot 3.3.4</p>\n<p>I am using the below code.</p>\n<pre><code>from(&quot;salesforce:pubSubSubscribe:/event/Test_Event__e?pubSubDeserializeType=JSON&amp;pubSubBatchSize=5&quot;)\n    .log(&quot;Consumed UMD Platform Event : ${body}&quot;);\n</code></pre>\n<p>application.properties</p>\n<pre><code>camel.component.salesforce.login-config.instance-url=https://cbm--dev1.sandbox.my.salesforce.com\ncamel.component.salesforce.login-config.loginUrl=https://test.salesforce.com\ncamel.component.salesforce.login-config.clientId=3121hz9IjkO5fmWVBql21yvTDd1cf2zF0iYwAi1Yf3mgMTaxbRh5K2RQj5zCaKpMC1Ug2rZIAngtTbil3Kda\ncamel.component.salesforce.login-config.userName=integration.user@cbm.com.gen.dev1\ncamel.component.salesforce.login-config.keystore.resource=file:C:/cbm/00DDC0111108vxk.jks\ncamel.component.salesforce.login-config.keystore.password=changeit\ncamel.component.salesforce.login-config.type=JWT\ncamel.component.salesforce.pub-sub-port=443\n</code></pre>\n<p>I am getting the below exception.</p>\n<pre><code>10:10:03.426  - Starting subscribe /event/Test_Event__e\n10:10:03.426  - Subscribing to topic: /event/Test_Event__e.\n10:10:03.436  - Subscribe successful.\n10:10:03.696  - GRPC Exception\nio.grpc.StatusRuntimeException: UNAUTHENTICATED: An authentication exception occurred. Provide valid authentication via metadata headers. rpcId: adf02cb6-cdd5-4aa4-b7fd-da398434a2da\n    at io.grpc.Status.asRuntimeException(Status.java:533)\n    at io.grpc.stub.ClientCalls$StreamObserverToCallListenerAdapter.onClose(ClientCalls.java:481)\n    at io.grpc.internal.ClientCallImpl.closeObserver(ClientCallImpl.java:564)\n    at io.grpc.internal.ClientCallImpl.access$100(ClientCallImpl.java:72)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInternal(ClientCallImpl.java:729)\n    at io.grpc.internal.ClientCallImpl$ClientStreamListenerImpl$1StreamClosed.runInContext(ClientCallImpl.java:710)\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n10:10:03.697  - Trailers:\n10:10:03.699  - Trailer: date, Value: Thu, 03 Apr 2025 15:10:04 GMT\n10:10:03.699  - Trailer: content-type, Value: application/grpc\n10:10:03.699  - Trailer: rpc-id, Value: adf02cb6-cdd5-4aa4-b7fd-da398434a2da\n10:10:03.699  - Trailer: error-code, Value: sfdc.platform.eventbus.grpc.service.auth.error\n10:10:03.700  - Trailer: type, Value: Subscribe\n</code></pre>\n<p><strong>Please note that, I am facing this problem only as I try to subscribe platform event.  The below code is working fine without any issue.</strong></p>\n<pre><code>from(&quot;timer://foo?fixedRate=true&amp;period=300000&quot;)\n        .to(&quot;salesforce:limits&quot;)\n        .log(&quot;Salesforce limit detais : ${body}&quot;);\n    \n</code></pre>\n<p>Please help me to resolve this issue.</p>\n",
    "tags" : [ "java", "spring-boot", "apache-camel", "salesforce", "grpc-java" ],
    "owner" : {
      "account_id" : 1421881,
      "reputation" : 379,
      "user_id" : 1346346,
      "user_type" : "registered",
      "accept_rate" : 50,
      "profile_image" : "https://www.gravatar.com/avatar/1b58317303f4754e62eb90d82e3e2e9f?s=256&d=identicon&r=PG",
      "display_name" : "user1346346",
      "link" : "https://stackoverflow.com/users/1346346/user1346346"
    },
    "is_answered" : false,
    "view_count" : 106,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1743772914,
    "creation_date" : 1743772914,
    "link" : "https://stackoverflow.com/questions/79555436/not-able-to-consume-event-from-salesforce-platform-event-using-camel-salesforce",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140309586,
    "post_id" : 79555436,
    "body" : "Are you authenticating using authorization_code or client_credentials? You might need to include the clientSecret as part of your properties.",
    "score" : 0,
    "owner" : {
      "account_id" : 6669397,
      "reputation" : 101,
      "user_id" : 5145941,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-un6Ri25tpwA/AAAAAAAAAAI/AAAAAAAAADc/2054nGyQUGk/s256-rj/photo.jpg",
      "display_name" : "John Chan",
      "link" : "https://stackoverflow.com/users/5145941/john-chan"
    },
    "creation_date" : 1744061757,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}