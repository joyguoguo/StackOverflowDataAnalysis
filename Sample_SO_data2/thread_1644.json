{
  "question" : {
    "question_id" : 79690591,
    "title" : "Linux Chrome throws &quot;Could not start session. Response code 500&quot; with a valid AutoSelectCertificate JSON policy while running automatic tests",
    "body" : "<p>For development of automatic tests with Java/selenium, that uses a P12 certificate for authentication, I'm having problems running tests in Chrome in a Linux Docker environment.</p>\n<p>I'm trying to use the AutoSelectCertificate policy via a JSON file placed in the default directory <code>/etc/opt/chrome/policies/managed/policy.json</code>.</p>\n<p>When the JSON contains a simple empty policy like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;AutoSelectCertificateForUrls&quot;: []\n}\n</code></pre>\n<p>Chrome accepts it without issues, and in the Chrome policies tab, it creates the policy and shows correctly as empty.</p>\n<p>However, once I try to add a pattern/filter, even if theyâ€™re a basic empty example, like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;AutoSelectCertificateForUrls&quot;: [\n    {\n      &quot;pattern&quot;: &quot;&quot;,\n      &quot;filter&quot;: {}\n    }\n  ]\n}\n</code></pre>\n<p>or even a more complete JSON</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;AutoSelectCertificateForUrls&quot;: [\n    {\n      &quot;pattern&quot;: &quot;https://myurl&quot;,\n      &quot;filter&quot;: {\n        &quot;ISSUER&quot;: {\n          &quot;CN&quot;: &quot;My Certificate&quot;\n        }\n      }\n    }\n  ]\n}\n</code></pre>\n<p>Chrome always returns the error:</p>\n<blockquote>\n<p>Could not start session. Response code 500. session not created:\nprobably user data directory is already in use, please specify a\nunique name for --user-data-dir or dont use it.</p>\n</blockquote>\n<p>This happens in both headless and non-headless modes.</p>\n<p>I am not using the <code>--user-data-dir</code>, but I have also tried specifying a unique user-data-dir with a timestamp and get the same error.</p>\n<p>The Docker container is freshly created and cleaned on every run, so there are no multiple session conflicts.</p>\n<p>Has anyone encountered this or can explain why Chrome behaves like this when the pattern and filter are added in the AutoSelectCertificate policy?\nThe structure seems to be valid.</p>\n",
    "tags" : [ "java", "linux", "google-chrome", "selenium-webdriver", "selenium-chromedriver" ],
    "owner" : {
      "account_id" : 3534477,
      "reputation" : 937,
      "user_id" : 2953137,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/48478f800752ad198ffbeae874d40ce0?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "koxta",
      "link" : "https://stackoverflow.com/users/2953137/koxta"
    },
    "is_answered" : false,
    "view_count" : 71,
    "closed_date" : 1751703065,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1751725218,
    "creation_date" : 1751655081,
    "link" : "https://stackoverflow.com/questions/79690591/linux-chrome-throws-could-not-start-session-response-code-500-with-a-valid-au",
    "closed_reason" : "Not suitable for this site"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}