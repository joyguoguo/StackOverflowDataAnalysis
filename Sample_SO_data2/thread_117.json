{
  "question" : {
    "question_id" : 79838627,
    "title" : "I cannot connect to my HC-05 bluetooth module using my own Java app",
    "body" : "<p>I built a Java app where I implemented bluetooth functionality. Using the documentation I managed to discover devices and pair with them. I managed to get the whole device info (address, name), but it fails when I want to establish communication with the module.</p>\n<p><strong>In the ConnectThread constructor:</strong></p>\n<pre><code>if (ContextCompat.checkSelfPermission(context, Manifest.permission.BLUETOOTH_CONNECT) == PackageManager.PERMISSION_GRANTED) {\n            try {\n                tmp = device.createRfcommSocketToServiceRecord(UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;));\n            } catch (IOException e) {\n                Log.e(TAG, &quot;Socket's create() method failed&quot;, e);\n            }\n        } else {\n            Log.e(TAG, &quot;Missing BLUETOOTH_CONNECT permission&quot;);\n        }\n        targetSocket = tmp;\n</code></pre>\n<p><strong>In the ConnectThread method run():</strong></p>\n<pre><code>bluetoothAdapter.cancelDiscovery();\n\ntry {\n    targetSocket.connect();\n    Log.i(TAG, &quot;Connection successful!&quot;);\n} catch (IOException e) {\n    Log.d(TAG, Log.getStackTraceString(e));\n    Log.e(TAG, &quot;Could not connect; closing socket&quot;, e);\n    try {\n        targetSocket.close();\n    } catch (IOException e2) {\n        Log.e(TAG, &quot;Could not close the client socket&quot;, e2);\n    }\n}\n</code></pre>\n<p><strong>In the MainActivity, when I choose a device from the paired devices list:</strong></p>\n<pre><code>ConnectThread connectThread = new ConnectThread(device, mBluetoothManager, MainActivity.this);\nconnectThread.start();\n</code></pre>\n<p>**<br />\nWhat I have in my LOGCAT**</p>\n<pre><code>ConnectThread           com.example.carcontroller            D  java.io.IOException: read failed, socket might closed or timeout, read ret: -1\n                                                                                                        at android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:1170)\n                                                                                                        at android.bluetooth.BluetoothSocket.readInt(BluetoothSocket.java:1188)\n                                                                                                        at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:566)\n                                                                                                        at com.example.carcontroller.ConnectThread.run(ConnectThread.java:50)\nConnectThread           com.example.carcontroller            E  Could not connect; closing socket\n                                                                                                    java.io.IOException: read failed, socket might closed or timeout, read ret: -1\n                                                                                                        at android.bluetooth.BluetoothSocket.readAll(BluetoothSocket.java:1170)\n                                                                                                        at android.bluetooth.BluetoothSocket.readInt(BluetoothSocket.java:1188)\n                                                                                                        at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:566)\n                                                                                                        at com.example.carcontroller.ConnectThread.run(ConnectThread.java:50)\n\n</code></pre>\n<p>Using the <strong><a href=\"https://play.google.com/store/apps/details?id=de.kai_morich.serial_bluetooth_terminal\" rel=\"nofollow noreferrer\">Serial Bluetooth Terminal</a></strong> from google play I managed to connect to my module and send data so I figure that the problem is on my end but I can't find any information about why this happens.If anyone can help me, that would be great!</p>\n",
    "tags" : [ "java", "android", "bluetooth", "hc-05" ],
    "owner" : {
      "account_id" : 44408219,
      "reputation" : 1,
      "user_id" : 31737120,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/65YstSoB.png?s=256",
      "display_name" : "Claudiu",
      "link" : "https://stackoverflow.com/users/31737120/claudiu"
    },
    "is_answered" : false,
    "view_count" : 80,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1765373025,
    "creation_date" : 1764919909,
    "link" : "https://stackoverflow.com/questions/79838627/i-cannot-connect-to-my-hc-05-bluetooth-module-using-my-own-java-app",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79842063,
    "question_id" : 79838627,
    "body" : "<p>This worked for me some years ago for an older Android version.</p>\n<pre><code>AndroidManifest.xml\n\n    &lt;uses-feature android:name=&quot;android.hardware.bluetooth_le&quot; android:required=&quot;true&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_BACKGROUND_LOCATION&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADMIN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_CONNECT&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_SCAN&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.BLUETOOTH_ADVERTISE&quot; /&gt;\n\n\n\n\nMainActivity.java\n\n  import android.bluetooth.BluetoothAdapter;\n  import android.bluetooth.BluetoothDevice;\n  import android.bluetooth.BluetoothServerSocket;\n  import android.bluetooth.BluetoothSocket;\n  import android.content.BroadcastReceiver;\n  import java.io.File;\n  import java.io.IOException;\n  import java.io.InputStream;\n  import java.io.OutputStream;\n  import java.io.FileOutputStream;\n  import java.util.Set;\n  import java.util.UUID;\n  import java.io.InputStreamReader;\n  import java.io.OutputStreamWriter;\n\n  BluetoothAdapter mBluetoothAdapter;\n  BluetoothDevice bluedev;\n  BluetoothSocket mmSocket;\n  InputStream instream;\n  OutputStream outstream;\n\n     // initialise on program start\n\n  mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n  if(!mBluetoothAdapter.isEnabled())\n    {\n    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n    startActivity(enableBtIntent);\n    }\n\n  // connect to server address B8:27:EB:F1:50:C3 as client\n  // via standard 16-byte serial service UUID.\n\n  // bluedev may also be set by finding a device in the paired\n  // devices list via: mBluetoothAdapter.getBondedDevices()\n  // or by scanning for active devices by setting up a BroadcastReceiver\n  // for mBluetoothAdapter.startDiscovery()\n\n  bluedev =  mBluetoothAdapter.getRemoteDevice(&quot;B8:27:EB:F1:50:C3&quot;);\n  mmSocket = bluedev.createInsecureRfcommSocketToServiceRecord(\n                  UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;));\n\n  // Connect to the remote device through the socket. This call blocks\n  // until it succeeds or throws an exception. 12s time out?\n\n  mmSocket.connect();\n\n  instream = mmSocket.getInputStream();\n  outstream = mmSocket.getOutputStream();\n\n     // instream/outstream are now open connections to client\n\n     // read/write serial data\n\n  if(instream.available() &gt; 0)\n    data = instream.read();\n\n  outstream.write(data);\n\n     // disconnect\n\n  instream.close();\n  outstream.close();\n  mmSocket.close();\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 44228034,
      "reputation" : 26,
      "user_id" : 31643814,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/85c40c497ba78cb01194bf24dfefb341?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Moelwyn",
      "link" : "https://stackoverflow.com/users/31643814/moelwyn"
    },
    "creation_date" : 1765291102,
    "last_activity_date" : 1765291102,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79843002,
    "question_id" : 79838627,
    "body" : "<p>I ordered an original HC-05 module and it arrived. I used it instead of the chinese copy and tried to connect to it, it worked the first time.</p>\n<p>The chinese copy was at fault.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 44408219,
      "reputation" : 1,
      "user_id" : 31737120,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/65YstSoB.png?s=256",
      "display_name" : "Claudiu",
      "link" : "https://stackoverflow.com/users/31737120/claudiu"
    },
    "creation_date" : 1765373025,
    "last_activity_date" : 1765373025,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140892245,
    "post_id" : 79838627,
    "body" : "Are you familiar with the <a href=\"https://developer.android.com/develop/connectivity/bluetooth/setup\" rel=\"nofollow noreferrer\">Android Developers documentation</a>. Have you granted the right permissions to your app? Have you checked the manifest file of your app?",
    "score" : 0,
    "owner" : {
      "account_id" : 11064381,
      "reputation" : 1784,
      "user_id" : 8124605,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cdef60750e6366389ee4e47bcc979ec1?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Risto",
      "link" : "https://stackoverflow.com/users/8124605/risto"
    },
    "creation_date" : 1765186137,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}