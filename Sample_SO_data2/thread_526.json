{
  "question" : {
    "question_id" : 79791231,
    "title" : "RecyclerView Item move animation and strange behavior of on item click",
    "body" : "<p>I created a simple RecyclerView in Java and implemented item click handling in the adapter's <code>onBindViewHolder</code> method with this action that the clicked item moves to position 0.</p>\n<pre><code>@Override\npublic void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\n        int pos = holder.getBindingAdapterPosition();\n        ExamItem examItem = examList.get(pos);\n        holder.examName.setText(examItem.getName());\n        holder.itemView.setOnClickListener(v -&gt; {\n            holder.itemView.setBackgroundColor(Color.RED); // just for testing\n            // Toast.makeText(v.getContext(), &quot;pos: &quot;+pos, Toast.LENGTH_SHORT).show();\n            if (pos &gt; 0 &amp;&amp; pos &lt; getItemCount()) {\n                examList.remove(pos);\n                examList.add(0, examItem);\n                notifyItemMoved(pos, 0);\n            }\n        });\n    }\n</code></pre>\n<p>And this is its implementation:</p>\n<pre><code>    // Activity or Fragment\n    private List&lt;ExamItem&gt; ExamItems = new ArrayList&lt;&gt;();\n\n    for (int i=0; i&lt;200; i++){\n        ExamItems.add(new ExamItem(&quot;index = &quot;+i));\n    }\n\n    LinearLayoutManager llm = new LinearLayoutManager(requireContext(),LinearLayoutManager.VERTICAL,false);\n    recyclerView.setLayoutManager(llm);\n    RecyclerView.ItemAnimator itemAnimator = new DefaultItemAnimator();\n    itemAnimator.setMoveDuration(250);\n    recyclerView.setItemAnimator(itemAnimator);\n\n    MyAdapter myAdapter = new MyAdapter(ExamItems);\n    recyclerView.setAdapter(myAdapter);\n</code></pre>\n<p>It almost works but has several issues.</p>\n<ol>\n<li><p>The move animation behaves strangely - it shouldn't change the positions of the next views, but rather the previous views. When calling <code>notifyItemMoved(from, to)</code>, it appears to behave as if it inserts a new item at position 0 (off-screen) and removes the selected item. I expected the previous items to shift down by one position instead.</p>\n</li>\n<li><p>click on the first visible view (not 0 position of recyclerview) is not working. or sometimes it work with strange animation. removing its above items and inserting after the first visible item without any move animation.</p>\n</li>\n<li><p>Just for testing the click method, I modified the selected item background. It worked but it changes background color of similar items too. For example if 10 items are visible and I click on 3rd item them background of 13, 23, ... items change.</p>\n</li>\n<li><p>How do I make the moving item appear in front of other items? The default behavior appears to place it behind other items during the animation.</p>\n</li>\n</ol>\n<p><img src=\"https://i.sstatic.net/Yj9zymWx.gif\" width=\"200\" /><img src=\"https://i.sstatic.net/51pPigiH.gif\" width=\"200\" /></p>\n",
    "tags" : [ "java", "android", "android-recyclerview", "android-animation", "onitemclick" ],
    "owner" : {
      "account_id" : 6979173,
      "reputation" : 1473,
      "user_id" : 6576302,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WZY3L.jpg?s=256",
      "display_name" : "C.F.G",
      "link" : "https://stackoverflow.com/users/6576302/c-f-g"
    },
    "is_answered" : false,
    "view_count" : 74,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1760761760,
    "creation_date" : 1760535740,
    "link" : "https://stackoverflow.com/questions/79791231/recyclerview-item-move-animation-and-strange-behavior-of-on-item-click",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79793554,
    "question_id" : 79791231,
    "body" : "<p>Questions 1 and 4 are duplicate:</p>\n<p>Answer of Q1: <a href=\"https://stackoverflow.com/q/50293660/6576302\">Inserting RecyclerView items at zero position - always stay scrolled to top</a></p>\n<p>Answer of Q4: <a href=\"https://stackoverflow.com/a/46831181/6576302\">How to fix RecyclerView shuffling issue</a>:</p>\n<p>overriding these two methods in Adapter will solve the shuffle issue.</p>\n<pre><code>@Override\npublic long getItemId(int position) {\nreturn position; // or item id\n}\n\n@Override\npublic int getItemViewType(int position) {\nreturn position; // or item id\n}\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 6979173,
      "reputation" : 1473,
      "user_id" : 6576302,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/WZY3L.jpg?s=256",
      "display_name" : "C.F.G",
      "link" : "https://stackoverflow.com/users/6576302/c-f-g"
    },
    "creation_date" : 1760761760,
    "last_activity_date" : 1760761760,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79793554" : [ {
      "comment_id" : 140845145,
      "post_id" : 79793554,
      "body" : "@Pawel So, what is the proper solution?",
      "score" : 0,
      "owner" : {
        "account_id" : 6979173,
        "reputation" : 1473,
        "user_id" : 6576302,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/WZY3L.jpg?s=256",
        "display_name" : "C.F.G",
        "link" : "https://stackoverflow.com/users/6576302/c-f-g"
      },
      "creation_date" : 1762674902,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140844951,
      "post_id" : 79793554,
      "body" : "This is a hack and not a proper solution. Doing this actually prevents the &quot;recycling&quot; part of &quot;RecyclerView&quot; from working properly. And at in case of getItemViewType leads to a memory leak. One of the comments in answer you quoted points that out.",
      "score" : 0,
      "owner" : {
        "account_id" : 12721843,
        "reputation" : 17418,
        "user_id" : 9241978,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/5TQ64.png?s=256",
        "display_name" : "Pawel",
        "link" : "https://stackoverflow.com/users/9241978/pawel"
      },
      "creation_date" : 1762650465,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}