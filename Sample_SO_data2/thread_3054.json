{
  "question" : {
    "question_id" : 79577809,
    "title" : "Apache Commons fileupload not showing files",
    "body" : "<p>I have to maintain a legacy application that runs on Java 1.6. This includes having to add services. Client has not allowed a rewrite as the code is quite large. It does not use struts or any framework, just plain Java servlets.</p>\n<p>Some time back, I had added a servlet to allow uploading data from CSV using code similar to (snipped and edited by hand for brevity):</p>\n<pre><code>   if (ServletFileUpload.isMultipartContent(req)) {\n\n         // Create a factory for disk-based file items\n         FileItemFactory factory = new DiskFileItemFactory();\n\n         // Create a new file upload handler\n         ServletFileUpload upload = new ServletFileUpload(factory);\n\n         // Parse the request\n         try {\n             List&lt;FileItem&gt; items = upload.parseRequest(req);\n             for (FileItem item : items) {\n                 if (item.isFormField()) {\n                    if(item.fieldName().equals(&quot;cid&quot;)) custId = item.getString();\n                 } else {\n                     String fileName = item.getName();\n                     ... // process file\n                 }\n             }\n         } catch (Exception e) {\n             res.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR,\n                 &quot;An error occurred while creating the file : &quot; + e.getMessage());\n         }\n     } else {\n         res.sendError(HttpServletResponse.SC_UNSUPPORTED_MEDIA_TYPE,\n                 &quot;Request contents type is not supported by the servlet.&quot;);\n     }\n</code></pre>\n<p>Added the commons jars to the lib. This has been in use without issues.</p>\n<p>Today, I added a new servlet and copied the source from the first one. I made a POST call to it from Postman to test. In the 2nd servlet, the FileItem list has only the <code>text</code> form parameters and none of the <code>file</code> ones regardless of how many of each type I add to the request.</p>\n<p>I've been staring at it for hours but can't figure out why.</p>\n",
    "tags" : [ "java", "java-6" ],
    "owner" : {
      "account_id" : 9722759,
      "reputation" : 698,
      "user_id" : 7210927,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MeJxiLCjIpg/AAAAAAAAAAI/AAAAAAAADd0/X3bd1VJWFlI/s256-rj/photo.jpg",
      "display_name" : "Hussain Akbar",
      "link" : "https://stackoverflow.com/users/7210927/hussain-akbar"
    },
    "is_answered" : false,
    "view_count" : 54,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744825826,
    "creation_date" : 1744825826,
    "link" : "https://stackoverflow.com/questions/79577809/apache-commons-fileupload-not-showing-files",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140345249,
    "post_id" : 79577809,
    "body" : "Add below to postman headers.  <code>Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;your_json.json&quot; Content-Type: application&#47;json</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744904962,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140343430,
    "post_id" : 79577809,
    "body" : "Very strange twist. I had been selecting .json files during my testing as they happened to be at the top of my Downloads folder listing. I switched one of them for a xlsx file (and later to a .txt file) and that shows up in the FileItem list. The .json file in the same request doesn&#39;t. Could be that Postman doesn&#39;t like json files.",
    "score" : 0,
    "owner" : {
      "account_id" : 9722759,
      "reputation" : 698,
      "user_id" : 7210927,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-MeJxiLCjIpg/AAAAAAAAAAI/AAAAAAAADd0/X3bd1VJWFlI/s256-rj/photo.jpg",
      "display_name" : "Hussain Akbar",
      "link" : "https://stackoverflow.com/users/7210927/hussain-akbar"
    },
    "creation_date" : 1744873372,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140341867,
    "post_id" : 79577809,
    "body" : "Compare request structure and servlet mapping with your working version.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744826516,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}