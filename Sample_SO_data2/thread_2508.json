{
  "question" : {
    "question_id" : 79618283,
    "title" : "Using circular generics in Hibernate",
    "body" : "<p>I have books and movies that are stored in the regarding shelfs: &quot;book shelf&quot; and &quot;movie shelf&quot;.</p>\n<p>Abstract <code>Shelf&lt;T&gt;</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@DiscriminatorColumn(name = &quot;type&quot;, discriminatorType = DiscriminatorType.STRING)\n@Table(name = &quot;shelf&quot;)\npublic abstract class Shelf&lt;T extends ShelfObject&lt;?&gt;&gt; {\n    ...\n\n    @Column(name = &quot;type&quot;, nullable = false, insertable = false, updatable = false)\n    @Enumerated(EnumType.STRING)\n    private ShelfType streamType;\n\n    @OneToMany(mappedBy = &quot;shelf&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL)\n    private List&lt;T&gt; shelfObjects;\n}\n</code></pre>\n<p>And two shelfs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@DiscriminatorValue(ShelfType.Stringified.BOOK_SHELF)\npublic class BookShelf extends Shelf&lt;BookShelfObject&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@DiscriminatorValue(ShelfType.Stringified.MOVIE_SHELF)\npublic class MovieShelf extends Shelf&lt;MovieShelfObject&gt; {\n}\n</code></pre>\n<p>Abstract <code>ShelfObject&lt;T&gt;</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Inheritance(strategy = InheritanceType.SINGLE_TABLE)\n@Table(name = &quot;shelf_object&quot;)\npublic abstract class ShelfObject&lt;T extends Shelf&lt;?&gt;&gt; {\n    @ManyToOne\n    @JoinColumn(name = &quot;shelf_id&quot;, nullable = false)\n    private T shelf;\n}\n</code></pre>\n<p>And two shelf objects:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class BookShelfObject extends ShelfObject&lt;BookShelf&gt; {\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class MovieShelfObject extends ShelfObject&lt;MovieShelf&gt; {\n}\n</code></pre>\n<p>In the business logic I will use only <code>BookShelf</code> with regarding <code>BookShelfObject</code> entities and <code>MovieShelf</code> only with <code>MovieShelfObject</code> entities. But Hibernate told me that</p>\n<blockquote>\n<p><code>ShelfObject.shelf</code> has an unbound type and no explicit target entity. Resolve this Generic usage issue or set an explicit target attribute (eg., <code>@OneToMany(target=)</code> or use an explicit <code>@Type</code>.</p>\n</blockquote>\n<p>So, may you help me to achieve this goal?</p>\n<p>I want to keep generics to prevent code duplication such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class BookShelfObject extends ShelfObject {\n    @ManyToOne\n    @JoinColumn(name = &quot;shelf_id&quot;, nullable = false)\n    private BookShelf shelf;\n}\n\n@Entity\npublic class MovieShelfObject extends ShelfObject {\n    @ManyToOne\n    @JoinColumn(name = &quot;shelf_id&quot;, nullable = false)\n    private MovieShelf shelf;\n}\n</code></pre>\n",
    "tags" : [ "java", "hibernate", "generics", "orm" ],
    "owner" : {
      "account_id" : 22094693,
      "reputation" : 359,
      "user_id" : 16352184,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e26104738c1ba7c5026ea81e53dcccbf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Michael Linker",
      "link" : "https://stackoverflow.com/users/16352184/michael-linker"
    },
    "is_answered" : false,
    "view_count" : 65,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1747075685,
    "creation_date" : 1747067491,
    "link" : "https://stackoverflow.com/questions/79618283/using-circular-generics-in-hibernate",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}