{
  "question" : {
    "question_id" : 79575347,
    "title" : "how to override all project repositories for gradle flutter build",
    "body" : "<p>I am trying to set a mirror link to all repositories used while building the apk in a flutter project.\nto do this I figured I should put <code>init.gradle</code> file in <code>~/.gradle/</code> and ask all projects and buildscripts use my mirror repository like below:</p>\n<pre><code>allprojects {\n    buildscript {\n        repositories {\n            maven {\n            url &quot;https://example-mirror.com/&quot;\n            }\n        }\n    }\n    repositories {\n        maven {\n            url &quot;https://example-mirror.com/&quot;\n        }\n    }\n}\n</code></pre>\n<p>since doing so what ever I do error below shows up:</p>\n<pre><code> Build was configured to prefer settings repositories over project repositories but repository 'maven' was added by settings file 'settings.gradle'\n</code></pre>\n<p>and if I do not use <code>init.gradle</code> to use mirror repository <code>project :gradle</code> would use default google and maven repos. <strong>So I tend to keep <code>init.gradle</code></strong>.\nIt seems like a simple problem to fix but I'm not a gradle pro.\nthanks in advance.</p>\n",
    "tags" : [ "java", "flutter", "gradle" ],
    "owner" : {
      "account_id" : 25941723,
      "reputation" : 301,
      "user_id" : 19661129,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucr9YuNuFLfV1X2K3KWBYSKJXitIEwXjSAVvS2sAVw=k-s256",
      "display_name" : "NIMA Shahahmadian",
      "link" : "https://stackoverflow.com/users/19661129/nima-shahahmadian"
    },
    "is_answered" : false,
    "view_count" : 126,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1744725895,
    "creation_date" : 1744725895,
    "link" : "https://stackoverflow.com/questions/79575347/how-to-override-all-project-repositories-for-gradle-flutter-build",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140350024,
    "post_id" : 79575347,
    "body" : "@Vijay it won&#39;t work. AI would say the same and I tried many bots response but won&#39;t work",
    "score" : 0,
    "owner" : {
      "account_id" : 25941723,
      "reputation" : 301,
      "user_id" : 19661129,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucr9YuNuFLfV1X2K3KWBYSKJXitIEwXjSAVvS2sAVw=k-s256",
      "display_name" : "NIMA Shahahmadian",
      "link" : "https://stackoverflow.com/users/19661129/nima-shahahmadian"
    },
    "creation_date" : 1745053134,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140341519,
    "post_id" : 79575347,
    "body" : "Yes, try adding the dependencyResolutionManagement  after pluginManagement in settings.gradle. also try &quot;repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS&zwnj;&#8203;)&quot;",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744819303,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140339461,
    "post_id" : 79575347,
    "body" : "@Vijay I did that and it fails with the same error. FYI I had to put dependencyResolutionManagement after plugins in settings.gradle or I would face another error",
    "score" : 0,
    "owner" : {
      "account_id" : 25941723,
      "reputation" : 301,
      "user_id" : 19661129,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucr9YuNuFLfV1X2K3KWBYSKJXitIEwXjSAVvS2sAVw=k-s256",
      "display_name" : "NIMA Shahahmadian",
      "link" : "https://stackoverflow.com/users/19661129/nima-shahahmadian"
    },
    "creation_date" : 1744783379,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140338255,
    "post_id" : 79575347,
    "body" : "Can you try &quot;repositories.clear()&quot; before  &quot;   repositories {&quot; in the init.gradle, and below in settings.gradle.  dependencyResolutionManagement {     repositoriesMode.set(RepositoriesMode.PREFER_PROJECT) // or FAIL_ON_PROJECT_REPOS     repositories {         maven { url &quot;<a href=\"https://example-mirror.com/\" rel=\"nofollow noreferrer\">example-mirror.com</a>&quot; }     } }",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744744125,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140338079,
    "post_id" : 79575347,
    "body" : "@Vijay he thanks for your response. although I have tried what just you said it would be really helpful if you could demonstrate more in form of an answer that how I should rewrite init.gradle and where should I put repositoriesMode",
    "score" : 0,
    "owner" : {
      "account_id" : 25941723,
      "reputation" : 301,
      "user_id" : 19661129,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AFdZucr9YuNuFLfV1X2K3KWBYSKJXitIEwXjSAVvS2sAVw=k-s256",
      "display_name" : "NIMA Shahahmadian",
      "link" : "https://stackoverflow.com/users/19661129/nima-shahahmadian"
    },
    "creation_date" : 1744740410,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140338050,
    "post_id" : 79575347,
    "body" : "Use repositories.clear() in your ~/.gradle/init.gradle to fully override all repo sources globally. In settings.gradle, set repositoriesMode.set(RepositoriesMode.PREFER_PROJECT) to avoid conflicts with your init config.",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744739643,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}