{
  "question" : {
    "question_id" : 79653420,
    "title" : "InvalidDataAccessResourceUsage Error during .mvnw/ clean verify",
    "body" : "<p>I keep getting this error whenever I try to do .mvnw/ clean verify</p>\n<blockquote>\n<p>[ERROR] Errors:  [ERROR]<br />\nAuthorRepositoryIntegrationTests.testThatAuthorCanBeUpdated:68 Â»\nInvalidDataAccessResourceUsage could not prepare statement [Sequence\n&quot;author_id_seq&quot; not found; SQL statement: select next value for\nauthor_id_seq [90036-232]] [select next value for author_id_seq]; SQL\n[select next value for author_id_seq]</p>\n</blockquote>\n<p>Here is my testThatAuthorCanBeUpdated Method:</p>\n<pre><code>@Test\npublic void testThatAuthorCanBeUpdated()\n{\n    AuthorEntity testAuthorEntityA = TestDataUtil.createTestAuthorEntityA();\n    this.authorRepo.save(testAuthorEntityA);\n\n    testAuthorEntityA.setName(&quot;UPDATED&quot;); // Changing author's name\n    this.authorRepo.save(testAuthorEntityA);    // Updating the author\n\n    Optional&lt;AuthorEntity&gt; result = this.authorRepo.findById(testAuthorEntityA.getId());\n\n    assertThat(result).isPresent();\n    assertThat(result.get()).isEqualTo(testAuthorEntityA);\n}\n</code></pre>\n<p>There is no issue when I run this test; it, along with five others, passes successfully, but it gives an error on clean verify. Please excuse if this is a pointless question, I am new to Spring Boot. Since there are quite a lot of files that play into this, here's the GitHub repo - <a href=\"https://github.com/Spookzie/spring-boot-starter\" rel=\"nofollow noreferrer\">https://github.com/Spookzie/spring-boot-starter</a> instead of all individual files (if, however, anyone would prefer the code of files here, lemme know)</p>\n<p>Thanks in advance!</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "maven", "spring-test" ],
    "owner" : {
      "account_id" : 21268687,
      "reputation" : 53,
      "user_id" : 15648549,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/--dQHajhpT9M/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuck7-QNvj-YOE8Zx8_MvBe7uKB7agw/s96-c/s256-rj/photo.jpg",
      "display_name" : "Vansh Bansal",
      "link" : "https://stackoverflow.com/users/15648549/vansh-bansal"
    },
    "is_answered" : true,
    "view_count" : 56,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1749378310,
    "creation_date" : 1749067058,
    "link" : "https://stackoverflow.com/questions/79653420/invaliddataaccessresourceusage-error-during-mvnw-clean-verify",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79657743,
    "question_id" : 79653420,
    "body" : "<p>I have fixed this problem and the solution is really simple if someone else is stuck like I was- I replaced the annotations I was using in my RepositoryTests (@SpringBootTest, @ExtendsWith, @DirtiesContext) with @DataJpaTest.</p>\n<p>So basically, with @SpringBootTest I was previously loading the full application info and all the beans which included my Postgres database I was using for the main application, this was messing with my in-memory h2 database that I was using for tests.<br />\nBut using @DataJpaTest provided all the same functionality whilst only loading the necessary beans and only using the h2 database.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 21268687,
      "reputation" : 53,
      "user_id" : 15648549,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/--dQHajhpT9M/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuck7-QNvj-YOE8Zx8_MvBe7uKB7agw/s96-c/s256-rj/photo.jpg",
      "display_name" : "Vansh Bansal",
      "link" : "https://stackoverflow.com/users/15648549/vansh-bansal"
    },
    "creation_date" : 1749378310,
    "last_activity_date" : 1749378310,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}