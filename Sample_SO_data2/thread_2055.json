{
  "question" : {
    "question_id" : 79654720,
    "title" : "How to check if GetGoogleIdOption has not available google accounts?",
    "body" : "<p>I'm using the following snippet to get <code>googleIdOption</code> to use with Credential manager but what if no google account is selected and So I need to add the <code>setFilterByAuthorizedAccounts</code> to <code>false</code>.</p>\n<p>Most are saying so but not showing how to in Java/Kotlin. Try and catch shows problem as in <code>nocredentialsexception</code> is never caught or something like that.</p>\n<p>Please Help.:</p>\n<pre><code>GetGoogleIdOption googleIdOption;\ngoogleIdOption = new GetGoogleIdOption.Builder()\n                .setServerClientId(getString(R.string.default_web_client_id))\n                .setFilterByAuthorizedAccounts(true)\n                .build();\n</code></pre>\n<p>I've tried:</p>\n<pre><code>GetGoogleIdOption googleIdOption;\ntry {\n    googleIdOption = new GetGoogleIdOption.Builder()\n                .setServerClientId(getString(R.string.default_web_client_id))\n                .setFilterByAuthorizedAccounts(true)\n                .build();\n} catch (NoCredentialException e) {\n    throw e;\n}\n</code></pre>\n<p>And before even executing code. The Red Problem Errors showed up as:</p>\n<blockquote>\n<p>Exception 'androidx.credentials.exceptions.NoCredentialException' is never thrown in the corresponding try block</p>\n</blockquote>\n",
    "tags" : [ "java", "google-oauth", "google-signin" ],
    "owner" : {
      "account_id" : 31460522,
      "reputation" : 9,
      "user_id" : 24283634,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/ec30744e5b9fb065e7eb502bd8545713?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Rudra Biswas",
      "link" : "https://stackoverflow.com/users/24283634/rudra-biswas"
    },
    "is_answered" : false,
    "view_count" : 98,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1749393144,
    "creation_date" : 1749135525,
    "link" : "https://stackoverflow.com/questions/79654720/how-to-check-if-getgoogleidoption-has-not-available-google-accounts",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79655427,
    "question_id" : 79654720,
    "body" : "<p>In the snippet you have, you're just building the request options; at that time, there hasn't been any call made to CredentialManager; constructing the request object doesn't throw such exception so make the CredentialManager call as explained in the documentation and then see what you get. As a side note, that exception doesn't imply that there are not Google account on the device (even when you set the filter parameter to false). For example, if the Google accounts on the device are not signed in (for example, they need re-authentication), you will get the same exception.</p>\n<p>The correct pattern is to set the filter parameter to true, make the <a href=\"https://developer.android.com/reference/kotlin/androidx/credentials/CredentialManager#getCredentialAsync(android.content.Context,androidx.credentials.GetCredentialRequest,android.os.CancellationSignal,java.util.concurrent.Executor,androidx.credentials.CredentialManagerCallback)\" rel=\"nofollow noreferrer\">getCredentialAsync()</a> call, and if you get that <code>NoCredemntialException</code>, then set the filtering parameter to false and make the same call. You may still get that exception but if you do, it means there are no Google credential available for you to use for that flow.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 3286414,
      "reputation" : 19577,
      "user_id" : 2765813,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/E2HmP.jpg?s=256",
      "display_name" : "Ali Naddaf",
      "link" : "https://stackoverflow.com/users/2765813/ali-naddaf"
    },
    "creation_date" : 1749186549,
    "last_activity_date" : 1749393144,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}