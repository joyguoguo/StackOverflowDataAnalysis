{
  "question" : {
    "question_id" : 79674201,
    "title" : "Clear multiple line in ANSI terminal in Java",
    "body" : "<p>I'm trying to delete multiple lines but it seems like</p>\n<pre><code>System.out.print(&quot;\\033[1A&quot;);\n</code></pre>\n<p>doesn't work, it should move my cursor up.</p>\n<p>I have this code but it just deletes Line 2</p>\n<pre><code>public class Main {\n    public static void main(String[] args) throws InterruptedException {\n        System.out.println(&quot;Line 1&quot;);\n        System.out.print(&quot;line 2&quot;);\n        Thread.sleep(1000);\n\n        System.out.print(&quot;\\r\\033[2K&quot;);\n        System.out.print(&quot;\\033[1A&quot;);\n        System.out.print(&quot;\\r\\033[2K&quot;);\n        System.out.print(&quot;Overwrite &quot;);\n        System.out.flush();\n    }\n}\n\n</code></pre>\n<p>I'm forced to use just the ANSI terminal commands, so no external Libraries</p>\n",
    "tags" : [ "java", "ansi-escape" ],
    "owner" : {
      "account_id" : 18925156,
      "reputation" : 1,
      "user_id" : 13808452,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-TzdRJ8QNDO0/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucma-sTq8_43xkttsTOM-lCjOn2How/s256-rj/photo.jpg",
      "display_name" : "Paolo Hernandez",
      "link" : "https://stackoverflow.com/users/13808452/paolo-hernandez"
    },
    "is_answered" : false,
    "view_count" : 88,
    "closed_date" : 1750488710,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751828020,
    "creation_date" : 1750486889,
    "link" : "https://stackoverflow.com/questions/79674201/clear-multiple-line-in-ansi-terminal-in-java",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79674213,
    "question_id" : 79674201,
    "body" : "<p>I think this is the issue:\nThe output buffer may not flush correctly or the cursor isn't where you expect due to how Java console handles <code>stdout</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n    public static void main(String[] args) throws InterruptedException {\n\n        // Prints two lines without advancing beyond them\n        System.out.println(&quot;Line 1&quot;);\n        System.out.println(&quot;Line 2&quot;); \n        Thread.sleep(1000);\n\n        // Moves up to Line 2 and clear it\n        System.out.print(&quot;\\033[1A&quot;);  // Moves cursor up to Line 2. The Fix.\n        System.out.print(&quot;\\r\\033[2K&quot;); // Clears entire Line 2\n\n        // Moves up to Line 1 and clears it\n        System.out.print(&quot;\\033[1A&quot;);\n        System.out.print(&quot;\\r\\033[2K&quot;);\n\n        // Optionally write something in place of Line 1\n        System.out.print(&quot;Overwrite&quot;);\n        System.out.flush();\n    }\n}\n</code></pre>\n<p>Javas <code>System.Out</code> is <strong>line-buffered</strong> which means that the output might not appear until a newline or flush. Mind that some terminals may not fully support ANSI escape codes. This should work in terminals like Linux shells, macOS Terminal, or Windows Terminal with ANSI support enabled.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 18999437,
      "reputation" : 798,
      "user_id" : 13867124,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f75c892f3b54042e7400ee33cd8af96?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "AztecCodes",
      "link" : "https://stackoverflow.com/users/13867124/azteccodes"
    },
    "creation_date" : 1750488607,
    "last_activity_date" : 1751030697,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140569078,
    "post_id" : 79674201,
    "body" : "Have a look at this question. The answer can do way more than just clearing four lines: <a href=\"https://stackoverflow.com/questions/1321308/whats-the-best-way-to-get-text-user-interfaces-ncurses-like-functionality-in\" title=\"whats the best way to get text user interfaces ncurses like functionality in\">stackoverflow.com/questions/1321308/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "creation_date" : 1751831504,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140537595,
    "post_id" : 79674201,
    "body" : "Does the problem still exist after you fixed the typo <code>System.out.print(&quot;\\033[2A&quot;);</code> to <code>System.out.print(&quot;\\033[1A&quot;);</code>?",
    "score" : 1,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1750756167,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140531047,
    "post_id" : 79674201,
    "body" : "Or maybe one of the other answers in this <a href=\"https://stackoverflow.com/search?q=%5Bjava%5D+ansi+terminal\">search</a> will help you.",
    "score" : 0,
    "owner" : {
      "account_id" : 2485939,
      "reputation" : 20969,
      "user_id" : 2164365,
      "user_type" : "registered",
      "accept_rate" : 40,
      "profile_image" : "https://i.sstatic.net/RKSgV.png?s=256",
      "display_name" : "Abra",
      "link" : "https://stackoverflow.com/users/2164365/abra"
    },
    "creation_date" : 1750488982,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140531037,
    "post_id" : 79674201,
    "body" : "Javas <code>System.Out</code> is <b>line-buffered</b> which means that the output might not appear until a newline or flush. Also not all terminals support ANSI escape codes.",
    "score" : 0,
    "owner" : {
      "account_id" : 18999437,
      "reputation" : 798,
      "user_id" : 13867124,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/3f75c892f3b54042e7400ee33cd8af96?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "AztecCodes",
      "link" : "https://stackoverflow.com/users/13867124/azteccodes"
    },
    "creation_date" : 1750488225,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79674213" : [ {
      "comment_id" : 140547416,
      "post_id" : 79674213,
      "body" : "@Holger Sorry you are right I mixed something up with the comments before.    However through the additional line System.out.print(&quot;\\033[1A&quot;); the cursor moves one row up and deletes the first line.",
      "score" : 0,
      "owner" : {
        "account_id" : 18999437,
        "reputation" : 798,
        "user_id" : 13867124,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/3f75c892f3b54042e7400ee33cd8af96?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "AztecCodes",
        "link" : "https://stackoverflow.com/users/13867124/azteccodes"
      },
      "creation_date" : 1751030774,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140538420,
      "post_id" : 79674213,
      "body" : "I can’t reproduce the issue. Keep in mind, the issue is not that the text was not flushed before the sleep, the issue, as described in the question was that allegedly the line was not deleted. By the way, while the <code>System.out</code> is <i>supposed</i> to only flush on newline or explicit <code>flush</code> calls, it does not work that way for more than a decade now. See <a href=\"https://bugs.openjdk.org/browse/JDK-8025883\" rel=\"nofollow noreferrer\">JDK-8025883</a> That’s why <code>line 2</code> shows up immediately, even when using <code>System.out.print(&quot;line 2&quot;);</code> without a newline.",
      "score" : 1,
      "owner" : {
        "account_id" : 3211603,
        "reputation" : 301001,
        "user_id" : 2711488,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
        "display_name" : "Holger",
        "link" : "https://stackoverflow.com/users/2711488/holger"
      },
      "creation_date" : 1750772601,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140537594,
      "post_id" : 79674213,
      "body" : "Both code examples end with <code>System.out.flush();</code> and after that point, everything should be written, regardless of how many line breaks have been written before that point. Flushing should only affect the timing but not the overall outcome. The code in the question also works and I don’t know what the actual issue is. Perhaps the typo which the OP fixed in an edit?",
      "score" : 1,
      "owner" : {
        "account_id" : 3211603,
        "reputation" : 301001,
        "user_id" : 2711488,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
        "display_name" : "Holger",
        "link" : "https://stackoverflow.com/users/2711488/holger"
      },
      "creation_date" : 1750756101,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140534903,
      "post_id" : 79674213,
      "body" : "The OP’s code does not differ to your code regarding line breaks or flush operations. So how could this be the issue?",
      "score" : 1,
      "owner" : {
        "account_id" : 3211603,
        "reputation" : 301001,
        "user_id" : 2711488,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
        "display_name" : "Holger",
        "link" : "https://stackoverflow.com/users/2711488/holger"
      },
      "creation_date" : 1750677587,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}