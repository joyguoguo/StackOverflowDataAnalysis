{
  "question" : {
    "question_id" : 79737460,
    "title" : "ClassNotFoundException for Generated Mapper Interface",
    "body" : "<p>I'm experiencing a <strong>ClassNotFoundException: AccountMapper</strong> when trying to integrate MapStruct with Spring Boot 3.5.4. The MapStruct annotation processor generates the implementation class correctly, but Spring cannot find the mapper interface during application startup.</p>\n<p>I tried adding the componentModel property in the mapper annotation:</p>\n<p><code> @Mapper(componentModel = &quot;spring&quot;)</code></p>\n<p>But the Bean still cannot been found.</p>\n<p>The error occurs during Spring's component scanning phase, specifically when trying to introspect the configuration class that references the mapper interface. The interface exists in the source code, compiles successfully, but seems unavailable to the Spring context at runtime.</p>\n<p>Any help into why the annotation processor-generated classes aren't being properly included in the Spring Boot classpath/context would be greatly appreciated.</p>\n<p>Clarification: I used &quot;demo&quot; to hide project details.</p>\n<p><strong>Environment</strong></p>\n<ul>\n<li>Spring Boot: 3.5.4</li>\n<li>MapStruct: 1.5.5.Final</li>\n<li>Java: 21</li>\n<li>Maven: 3.x Build</li>\n<li>Editor: VS Code</li>\n</ul>\n<p><strong>Error details</strong></p>\n<pre><code>Caused by: java.lang.ClassNotFoundException: AccountMapper\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:528)\n</code></pre>\n<pre><code>Description:\n\nField accountMapper in com.demo.demo.service.AccountService required a bean of type 'com.demo.demo.mapper.AccountMapper' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.demo.demo.mapper.AccountMapper' in your configuration.\n\n2025-08-16T13:57:58.031-05:00  WARN 60525 --- [finance-core-service] [           main] o.s.test.context.TestContextManager      : Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.demo.demo.FinanceCoreServiceApplicationTests@7f72855d]\n\n</code></pre>\n<p><strong>Class, Interfaces and POM</strong></p>\n<p>MapStruc</p>\n<pre><code>\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.MappingConstants;\nimport com.demo.finance_core_service.dto.AccountBaseDTO;\nimport com.demo.finance_core_service.model.Account;\n\n// Also tried: @Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\n\n@Mapper(componentModel = &quot;spring&quot;)\npublic interface AccountMapper {\n    \n    @Mapping(target = &quot;accountId&quot;, ignore = true)\n    @Mapping(target = &quot;transactions&quot;, ignore = true)\n    Account toEntity(AccountBaseDTO dto);\n    \n    AccountBaseDTO toDto(Account entity);\n}\n</code></pre>\n<p>Generated Mapper Implementation</p>\n<pre><code>@Generated(\n    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,\n    date = &quot;2025-08-16T13:52:56-0500&quot;,\n    comments = &quot;version: 1.5.5.Final, compiler: javac, environment: Java 23.0.1&quot;\n)\n@Component\npublic class AccountMapperImpl implements AccountMapper {\n    // Implementation code...\n}\n</code></pre>\n<p>Service</p>\n<pre><code>@Service\npublic class AccountService {\n\n    @Autowired\n    private AccountRepository accountRepository;\n\n    @Autowired\n    private AccountMapper accountMapper;  // Bean not found\n\n    @Transactional\n    public Account createAccount(AccountBaseDTO newAccount) {\n        Account account = accountMapper.toEntity(newAccount);\n        return accountRepository.save(account);\n    }\n}\n</code></pre>\n<p>Pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.5.4&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.demo&lt;/groupId&gt;\n    &lt;artifactId&gt;finance-core-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;description&gt;demo&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n        &lt;mapstruct.version&gt;1.5.5.Final&lt;/mapstruct.version&gt;\n        &lt;lombok.version&gt;1.18.38&lt;/lombok.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Spring Boot Starters --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Database --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- OpenAPI --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n            &lt;version&gt;2.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- MapStruct --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Testing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${lombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;0.2.0&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;-Amapstruct.defaultComponentModel=spring&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n\n</code></pre>\n<p>I also tried to manually register the mapper as a @Bean. But it did not fix the issue.</p>\n<pre><code>\n@Configuration\npublic class MapperConfig {\n    \n    @Bean\n    public AccountMapper accountMapper() {\n        return new AccountMapperImpl();\n    }\n}\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "maven", "mapstruct" ],
    "owner" : {
      "account_id" : 26015275,
      "reputation" : 61,
      "user_id" : 19723679,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/11b22e1626c2a77cdcc8077913501007?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Javs",
      "link" : "https://stackoverflow.com/users/19723679/javs"
    },
    "is_answered" : true,
    "view_count" : 99,
    "answer_count" : 1,
    "score" : -2,
    "last_activity_date" : 1755392578,
    "creation_date" : 1755375428,
    "link" : "https://stackoverflow.com/questions/79737460/classnotfoundexception-for-generated-mapper-interface",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79737578,
    "question_id" : 79737460,
    "body" : "<p><strong>Solution</strong><br />\nAfter running the application in different code editors. I realized the issue was VSCode itself.</p>\n<p>The Java extension Eclipse JDT Language Server maintains its own Java workspace and can run <strong>background incremental builds</strong> <strong>or config updates</strong>. For Maven projects that use annotation processors, those background actions may <strong>clean or recompile <code>target/</code></strong>, removing generated classes.</p>\n<p>To make maven handle the entire process, include the following settings in .vscode/settings.json</p>\n<pre><code>{\n\n  // avoid background incremental builds that mutate target/\n  &quot;java.autobuild.enabled&quot;: false,\n\n  // donâ€™t auto-apply build config changes\n  &quot;java.configuration.updateBuildConfiguration&quot;: &quot;interactive&quot;,\n\n  // prefer using your Maven Wrapper for explicit builds\n  &quot;maven.executable.preferMavenWrapper&quot;: true\n}\n</code></pre>\n<p>Then, clean the existing <strong>Java Language Server Workspace</strong> by running <code>Java: Clean Java Language Server Workspace</code> in command palette.</p>\n<p>Finally, restart the VSCode window by running <code>Developer: Reload Window</code> in command palette.</p>\n<p>P.S.  Wow! two downvotes and not a single answer. I just remembered why no one uses this site anymore...</p>\n",
    "score" : 4,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 26015275,
      "reputation" : 61,
      "user_id" : 19723679,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/11b22e1626c2a77cdcc8077913501007?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Javs",
      "link" : "https://stackoverflow.com/users/19723679/javs"
    },
    "creation_date" : 1755392578,
    "last_activity_date" : 1755392578,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}