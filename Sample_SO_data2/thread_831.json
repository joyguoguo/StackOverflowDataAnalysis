{
  "question" : {
    "question_id" : 79762328,
    "title" : "Why does maven-clean-plugin fail to delete files after update from version 3.4.0 to 3.5.0",
    "body" : "<p>I upgraded my plugins to current versions, specifically the maven-clean-plugin from 3.4.0 to 3.5.0, and the result was that any attempt to run <code>mvn clean</code> failed with a message that authorization to delete the files failed. Nothing else changed, just the version. I only experienced this problem for projects stored on OneDrive and only after the &quot;target&quot; folder was synchronized to the OneDrive Cloud. With synchronization turned off, 3.5.0 worked fine. With the project on a local drive 3.5.0 worked fine. With 3.4.0 everything worked fine.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>PS C:\\Users\\myid\\OneDrive\\temp\\demo&gt; &amp; mvn clean -f &quot;c:\\Users\\myid\\OneDrive\\temp\\demo\\pom.xml&quot;\n[INFO] Scanning for projects...\n[INFO] \n[INFO] --------------------------&lt; com.example:demo &gt;--------------------------\n[INFO] Building demo 1.0-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- clean:3.5.0:clean (default-clean) @ demo ---\n[INFO] Deleting c:\\Users\\Jerry F\\OneDrive\\temp\\demo\\target\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.299 s\n[INFO] Finished at: 2025-09-11T13:12:21-04:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:3.5.0:clean (default-clean) on project demo: Failed to clean project: Failed to delete C:\\Users\\Jerry F\\OneDrive\\temp\\demo\\target\\classes\\com\\example -&gt; [Help 1]\n</code></pre>\n",
    "tags" : [ "java", "maven", "plugins" ],
    "owner" : {
      "account_id" : 43891383,
      "reputation" : 51,
      "user_id" : 31468956,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/760b0a322e1039d0f1f74014bf3fce2e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grybd1",
      "link" : "https://stackoverflow.com/users/31468956/grybd1"
    },
    "is_answered" : true,
    "view_count" : 133,
    "answer_count" : 1,
    "score" : 3,
    "last_activity_date" : 1757641033,
    "creation_date" : 1757620991,
    "link" : "https://stackoverflow.com/questions/79762328/why-does-maven-clean-plugin-fail-to-delete-files-after-update-from-version-3-4-0",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79762474,
    "question_id" : 79762328,
    "body" : "<p>I have found that by adding the following to the maven-clean-plugin xml in the project pom, that version 3.5.0 completes the clean process without error.</p>\n<pre><code>&lt;configuration&gt;\n    &lt;force&gt;true&lt;/force&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>According to the documentation force=true deletes read only files. I really don't know why this works but it does.</p>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 43891383,
      "reputation" : 51,
      "user_id" : 31468956,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/760b0a322e1039d0f1f74014bf3fce2e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grybd1",
      "link" : "https://stackoverflow.com/users/31468956/grybd1"
    },
    "creation_date" : 1757641033,
    "last_activity_date" : 1757641033,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140733257,
    "post_id" : 79762328,
    "body" : "As written, your question sounds like something you should ask of the Apache Maven team. Given your own answer (which doesn&#39;t answer the why you ask, but does provide a solution/workaround), you may want to consider rephrasing your question.",
    "score" : 0,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1757750553,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140731424,
    "post_id" : 79762328,
    "body" : "Placing a development in OneDrive folder is always a bad idea. If you want to keep backups of your software create a bare GIT repository in OneDrive and then clone it it a folder outside of OneDrive where you can then edit/develop and commit &amp; push changes to your Git repo backuped by OneDrive.",
    "score" : 1,
    "owner" : {
      "account_id" : 50585,
      "reputation" : 43459,
      "user_id" : 150978,
      "user_type" : "registered",
      "accept_rate" : 78,
      "profile_image" : "https://www.gravatar.com/avatar/feadc214792e2581c3c750140e3eb2c7?s=256&d=identicon&r=PG",
      "display_name" : "Robert",
      "link" : "https://stackoverflow.com/users/150978/robert"
    },
    "creation_date" : 1757675165,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140730617,
    "post_id" : 79762328,
    "body" : "using mvn clean -X shows that the plugin deletes files and folders one at a time. First deletes all the files in a folder and then the folder. 3.5.0 successfully deleted files but when it tried to delete a folder, it failed and the process was terminated.",
    "score" : 0,
    "owner" : {
      "account_id" : 43891383,
      "reputation" : 51,
      "user_id" : 31468956,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/760b0a322e1039d0f1f74014bf3fce2e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "grybd1",
      "link" : "https://stackoverflow.com/users/31468956/grybd1"
    },
    "creation_date" : 1757641211,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140730418,
    "post_id" : 79762328,
    "body" : "Probably OneDrive is locking some file or directory. It is a common issue in Windows because of the way files are locked when used. Try opening a command window in a target directory and build the project in another command line or IDE, then check if you get the same error.",
    "score" : 3,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26502,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1757627486,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140730288,
    "post_id" : 79762328,
    "body" : "Is there a stack trace that might help narrow down the problem? If not, does <code>mvn clean -X</code> give one?",
    "score" : 0,
    "owner" : {
      "account_id" : 8532578,
      "reputation" : 49884,
      "user_id" : 6395627,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/af0f9bfe593f36642a032cd7ea611e7d?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Slaw",
      "link" : "https://stackoverflow.com/users/6395627/slaw"
    },
    "creation_date" : 1757622164,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}