{
  "question" : {
    "question_id" : 79614785,
    "title" : "@Scheduled annotation unable to read values for placeholder",
    "body" : "<p>I recently upgraded from Java 11 to 17 and Spring Boot 2.5.2 to 3.3.11.</p>\n<p>After upgrade, my code stopped replacing the placeholder values in all the <code>@Scheduled</code> annotations.</p>\n<p>Below is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@PropertySource(&quot;classpath:application.properties&quot;)\n@EnableScheduling\npublic class SchedulerConfig {\n\n    @Autowired\n    @Lazy\n    DisableAutoUpdateFlagBatchJob disableAutoUpdateFlagBatchJob;\n\n    @Scheduled(cron = &quot;${sch.disable.autopopulateflag.cron}&quot;)\n    public void execDisableAutoUpdateFalg() {\n        try {\n            log.info(System.lineSeparator());\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: Starting&quot;);\n            int recordsUpdated = disableAutoUpdateFlagBatchJob.disableAutoUpdateFlagForPreviousBiWeek();\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: Completed&quot;);\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: recordsUpdated = {}&quot;, recordsUpdated);\n            log.info(System.lineSeparator());\n        } catch (Exception ex) {\n            log.error(&quot;Error occured during execution of execDisableAutoUpdateFalg() &quot;);\n            log.error(ex.getMessage(), ex);\n        }\n    }\n} // end of class\n</code></pre>\n<p>And my <code>application.properties</code> has the following key value pair:</p>\n<p><code>sch.disable.autopopulateflag.cron=0 00 10 ? * SUN</code></p>\n<p>When I start the application (WildFly 36), I get the following error:</p>\n<pre><code>05-09-2025 15:30:30,084 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;deploy&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;teap-api.war&quot;)]) - failure description: {&quot;WFLYCTL0080: Failed services&quot; =&gt; {&quot;jboss.deployment.unit.\\&quot;teap-api.war\\&quot;.undertow-deployment&quot; =&gt; &quot;java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'schedulerConfig' defined in VFS resource [\\&quot;/content/teap-api.war/WEB-INF/classes/gov/uspto/teap/batch/scheduler/SchedulerConfig.class\\&quot;]: Encountered invalid @Scheduled method 'execDisableAutoUpdateFalg': Could not resolve placeholder 'sch.disable.autopopulateflag.cron' in value \\&quot;${sch.disable.autopopulateflag.cron}\\&quot;\n        Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'schedulerConfig' defined in VFS resource [\\&quot;/content/teap-api.war/WEB-INF/classes/gov/uspto/teap/batch/scheduler/SchedulerConfig.class\\&quot;]: Encountered invalid @Scheduled method 'execDisableAutoUpdateFalg': Could not resolve placeholder 'sch.disable.autopopulateflag.cron' in value \\&quot;${sch.disable.autopopulateflag.cron}\\&quot;\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'schedulerConfig' defined in VFS resource [\\&quot;/content/teap-api.war/WEB-INF/classes/gov/uspto/teap/batch/scheduler/SchedulerConfig.class\\&quot;]: Encountered invalid @Scheduled method 'execDisableAutoUpdateFalg': Could not resolve placeholder 'sch.disable.autopopulateflag.cron' in value \\&quot;${sch.disable.autopopulateflag.cron}\\&quot;\n        Caused by: java.lang.IllegalStateException: Encountered invalid @Scheduled method 'execDisableAutoUpdateFalg': Could not resolve placeholder 'sch.disable.autopopulateflag.cron' in value \\&quot;${sch.disable.autopopulateflag.cron}\\&quot;&quot;}}\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "property-placeholder" ],
    "owner" : {
      "account_id" : 10304528,
      "reputation" : 21,
      "user_id" : 7602186,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2fYna.png?s=256",
      "display_name" : "Dotcomwizard",
      "link" : "https://stackoverflow.com/users/7602186/dotcomwizard"
    },
    "is_answered" : false,
    "view_count" : 75,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746880899,
    "creation_date" : 1746820454,
    "link" : "https://stackoverflow.com/questions/79614785/scheduled-annotation-unable-to-read-values-for-placeholder",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79615100,
    "question_id" : 79614785,
    "body" : "<p>I think you are getting the error because Spring Boot 3.3.1 (Spring Framework 6.x) has stricter placeholder resolution for annotations like <code>@Scheduled</code>, processed early in the application context lifecycle. The placeholder <code>${sch.disable.autopopulateflag.cron}</code> is not being resolved, likely due to issues with property loading or the timing of placeholder resolution. Try using the code below and see if it works for you.</p>\n<hr />\n<pre><code>\n@Configuration\n@EnableScheduling\npublic class SchedulerConfig {\n\n    private static final Logger log = LoggerFactory.getLogger(SchedulerConfig.class);\n\n    @Autowired\n    private DisableAutoUpdateFlagBatchJob disableAutoUpdateFlagBatchJob;\n\n    private final String cronExpression;\n\n    public SchedulerConfig(@Value(&quot;${sch.disable.autopopulateflag.cron}&quot;) String cronExpression) {\n        this.cronExpression = cronExpression;\n    }\n\n    @Scheduled(cron = &quot;#{@schedulerConfig.cronExpression}&quot;)\n    public void execDisableAutoUpdateFalg() {\n        try {\n            log.info(System.lineSeparator());\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: Starting&quot;);\n            int recordsUpdated = disableAutoUpdateFlagBatchJob.disableAutoUpdateFlagForPreviousBiWeek();\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: Completed&quot;);\n            log.info(&quot;SchedulerConfig :: execDisableAutoUpdateFalg() :: recordsUpdated = {}&quot;, recordsUpdated);\n            log.info(System.lineSeparator());\n        } catch (Exception ex) {\n            log.error(&quot;Error occurred during execution of execDisableAutoUpdateFalg()&quot;, ex);\n        }\n    }\n\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n        PropertySourcesPlaceholderConfigurer configurer = new PropertySourcesPlaceholderConfigurer();\n        configurer.setIgnoreUnresolvablePlaceholders(false);\n        return configurer;\n    }\n\n    @Bean\n    public SchedulerConfig schedulerConfig() {\n        return this;\n    }\n}\n</code></pre>\n",
    "score" : -1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 20686847,
      "reputation" : 62,
      "user_id" : 15189063,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/0fbe8d6b4dd70a526004e9a5e20dbeaf?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Oladejo Olajide",
      "link" : "https://stackoverflow.com/users/15189063/oladejo-olajide"
    },
    "creation_date" : 1746845957,
    "last_activity_date" : 1746880899,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140421743,
    "post_id" : 79614785,
    "body" : "Thank you @JorgeCampos. But i do not have additional property files.",
    "score" : 0,
    "owner" : {
      "account_id" : 10304528,
      "reputation" : 21,
      "user_id" : 7602186,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/2fYna.png?s=256",
      "display_name" : "Dotcomwizard",
      "link" : "https://stackoverflow.com/users/7602186/dotcomwizard"
    },
    "creation_date" : 1747145427,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140412606,
    "post_id" : 79614785,
    "body" : "Spring code preprocessor apparently uses a resolver, it if is not null that is... <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-context/src/main/java/org/springframework/scheduling/annotation/ScheduledAnnotationBeanPostProcessor.java#L429\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/blob/main/&hellip;</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1746830106,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140412599,
    "post_id" : 79614785,
    "body" : "Do you have any other property files in your application and are they environment ones? like &quot;application-local.properties&quot; if so which profile are you running? and also if so, try adding the config there.",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1746829963,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79615100" : [ {
      "comment_id" : 140421741,
      "post_id" : 79615100,
      "body" : "Thank you @OladejoOlajide. But when I implement this, I get the following error  Caused by: java.lang.RuntimeException: org.springframework.beans.factory.BeanDefinitionStoreExcepti&zwnj;&#8203;on: Invalid bean definition with name &#39;schedulerConfig&#39; defined in class path resource [gov/uspto/teap/batch/scheduler/SchedulerConfig.class]: <b>factory-bean reference points back to the same bean definition</b>  I searched for a solution to this issue and tried to change the name of the method <b>schedulerConfig()</b> but it fails since this bean is been created before the class SchedulerConfig is fully created.",
      "score" : 0,
      "owner" : {
        "account_id" : 10304528,
        "reputation" : 21,
        "user_id" : 7602186,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/2fYna.png?s=256",
        "display_name" : "Dotcomwizard",
        "link" : "https://stackoverflow.com/users/7602186/dotcomwizard"
      },
      "creation_date" : 1747145389,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}