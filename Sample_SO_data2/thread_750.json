{
  "question" : {
    "question_id" : 79779382,
    "title" : "SQL Server and Sybase driver conflicts",
    "body" : "<p>I need to extract data from a Sybase source and then use this data to extract values from an SQL Server source.</p>\n<p>I am using these drivers:</p>\n<pre><code>    // Database drivers\n    // https://mvnrepository.com/artifact/jdbc.sybase/jconn4\n    implementation(&quot;jdbc.sybase:jconn4:16.0&quot;)\n    // https://mvnrepository.com/artifact/com.microsoft.sqlserver/mssql-jdbc\n    implementation(&quot;com.microsoft.sqlserver:mssql-jdbc:13.2.0.jre11&quot;)\n</code></pre>\n<p>My program will run in debug, but fails to run normally.\nThis is the Sybase call</p>\n<pre><code>package gov.usdohud.chums;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.LinkedHashSet;\n\nimport org.apache.logging.log4j.core.Logger;\n\nimport com.sybase.jdbc4.jdbc.SybDataSource;\n\nimport gov.usdohud.dao.CaseData;\nimport gov.usdohud.model.ConfigData;\n\npublic class GetCases {\n    Logger LOGGER;\n    ConfigData config;\n    \n    public GetCases(Logger LOGGER, ConfigData config) {\n        this.config = config;\n        this.LOGGER = LOGGER;\n    }\n    \n    /**\n     * Get case data from the warehouse\n     * @return\n     */\n    public LinkedHashSet&lt;CaseData&gt; getCaseData() {\n        LinkedHashSet&lt;CaseData&gt; cases = new LinkedHashSet&lt;&gt;();\n        // Query SFDW for cases\n        String sqlString = &quot;select top 20 b.case_nbr, b.loan_nbr, b.score_dt, b.undrwrtr_id from idb_1 a, total_scorecard_data_final b &quot;\n                + &quot;where a.case_nbr = b.case_nbr and endrsmnt_cy = ?&quot;;\n\n        SybDataSource datasource = new SybDataSource();\n        datasource.setServerName(config.getSfdwServer().getName());\n        datasource.setPortNumber(Integer.valueOf(config.getSfdwServer().getPort()));\n        datasource.setDatabaseName(config.getSfdwServer().getDatabase());\n        datasource.setUser(config.getSfdwServer().getUserId());\n        datasource.setPassword(config.getSfdwServer().getAuthentication());\n        try (Connection conn = datasource.getConnection();) {\n            PreparedStatement stmt = conn.prepareStatement(sqlString);\n            stmt.setLong(1, config.getFiscalYear());\n            ResultSet rs = stmt.executeQuery();\n\n            while (rs.next()) {\n                CaseData thisRow = new CaseData();\n                thisRow.setCase_nbr(rs.getString(&quot;case_nbr&quot;));\n                thisRow.setLoan_nbr(rs.getString(&quot;loan_nbr&quot;));\n                thisRow.setScore_dt(rs.getString(&quot;score_dt&quot;));\n                thisRow.setUndrwrtr_id(rs.getString(&quot;undrwrtr_id&quot;));\n                cases.add(thisRow);\n            }\n            LOGGER.info(&quot;Preparring to process {} scoring records.&quot;, cases.size());\n        } catch (SQLException e) {\n            LOGGER.error(&quot;SQL Exception raised: {}&quot;,e.getMessage());\n        }\n        \n        return cases;\n    }\n}\n</code></pre>\n<p>After making the Sybase call, this is the mess that dumps out on the creation of the SQL server datasource object.</p>\n<pre><code>2025-09-30 13:36:39:174 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr: Exception in thread &quot;main&quot; \n2025-09-30 13:36:44:225 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr: java.lang.NoClassDefFoundError: Could not initialize class sun.security.x509.OIDMap\n2025-09-30 13:36:49:235 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.CertificateExtensions.parseExtension(CertificateExtensions.java:97)\n2025-09-30 13:36:54:238 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.CertificateExtensions.init(CertificateExtensions.java:88)\n2025-09-30 13:36:59:237 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.CertificateExtensions.&lt;init&gt;(CertificateExtensions.java:78)\n2025-09-30 13:36:59:259 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.X509CertInfo.parse(X509CertInfo.java:709)\n2025-09-30 13:37:04:247 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.X509CertInfo.&lt;init&gt;(X509CertInfo.java:169)\n2025-09-30 13:37:04:266 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1787)\n2025-09-30 13:37:09:256 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:178)\n2025-09-30 13:37:09:284 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:102)\n2025-09-30 13:37:14:289 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:355)\n2025-09-30 13:37:19:298 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.pkcs.PKCS7.parseSignedData(PKCS7.java:305)\n2025-09-30 13:37:24:302 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.pkcs.PKCS7.parse(PKCS7.java:162)\n2025-09-30 13:37:29:306 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.pkcs.PKCS7.parse(PKCS7.java:126)\n2025-09-30 13:37:34:295 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.pkcs.PKCS7.&lt;init&gt;(PKCS7.java:108)\n2025-09-30 13:37:34:322 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/sun.security.util.SignatureFileVerifier.&lt;init&gt;(SignatureFileVerifier.java:125)\n2025-09-30 13:37:39:304 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.util.jar.JarVerifier.processEntry(JarVerifier.java:308)\n2025-09-30 13:37:39:332 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.util.jar.JarVerifier.update(JarVerifier.java:239)\n2025-09-30 13:37:44:342 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.util.jar.JarFile.initializeVerifier(JarFile.java:761)\n2025-09-30 13:37:49:351 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.util.jar.JarFile.ensureInitialization(JarFile.java:1037)\n2025-09-30 13:37:54:349 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.util.jar.JavaUtilJarAccessImpl.ensureInitialization(JavaUtilJarAccessImpl.java:72)\n2025-09-30 13:37:54:370 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.URLClassPath$JarLoader$2.getManifest(URLClassPath.java:883)\n2025-09-30 13:37:59:363 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:848)\n2025-09-30 13:37:59:389 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\n2025-09-30 13:38:04:370 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\n2025-09-30 13:38:04:396 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\n2025-09-30 13:38:09:397 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n2025-09-30 13:38:09:427 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)\n2025-09-30 13:38:14:433 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at gov.usdohud.chums.GetCreditReports.getSQLCon(GetCreditReports.java:85)\n2025-09-30 13:38:19:430 ERROR [main] (com.salientcrgt.chums.util.LogStandardOutput$2.print(LogStandardOutput.java:45)) serr:    at gov.usdohud.chums.GetCreditReports.main(GetCreditReports.java:54)\n</code></pre>\n<p>This is the SQL Server connection code.</p>\n<pre><code>    /**\n     * Get SQL Server connection\n     * @return\n     * @throws InterruptedException \n     */\n    private final Connection getSQLCon() {\n        Connection conn = null;\n        try {\n            final SQLServerDataSource dataSource = new SQLServerDataSource();\n            dataSource.setTrustServerCertificate(true);\n            dataSource.setSendStringParametersAsUnicode(false);\n            dataSource.setConnectRetryCount(5);\n            dataSource.setServerName(config.getAusNatServer().getName());\n            dataSource.setPortNumber(Integer.parseInt(config.getAusNatServer().getPort()));\n            dataSource.setDatabaseName(config.getAusNatServer().getDatabase());\n            dataSource.setUser(config.getAusNatServer().getUserId());\n            dataSource.setPassword(config.getAusNatServer().getAuthentication());\n            conn = dataSource.getConnection();\n        } catch (SQLException e) {\n            LOGGER.error(&quot;Unable to connect to aus_national :{}&quot;,e);\n        } \n        return conn;\n    }\n</code></pre>\n<p>I can comment out the call to the Sybase server and build a compatible LinkedHashSet and the program runs.</p>\n<p>What do I need to do to get these drivers to work together?</p>\n",
    "tags" : [ "java", "sql-server", "jdbc", "sybase" ],
    "owner" : {
      "account_id" : 3502646,
      "reputation" : 143,
      "user_id" : 2929036,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/e3115648d4949a88c24e9781efa7ef91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Keith Fosberg",
      "link" : "https://stackoverflow.com/users/2929036/keith-fosberg"
    },
    "is_answered" : true,
    "view_count" : 118,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1759329322,
    "creation_date" : 1759254223,
    "link" : "https://stackoverflow.com/questions/79779382/sql-server-and-sybase-driver-conflicts",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79780181,
    "question_id" : 79779382,
    "body" : "<p>I found the solution.</p>\n<p>The SQL Server connection must be created prior to creating the Sybase Server connection.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 3502646,
      "reputation" : 143,
      "user_id" : 2929036,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/e3115648d4949a88c24e9781efa7ef91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Keith Fosberg",
      "link" : "https://stackoverflow.com/users/2929036/keith-fosberg"
    },
    "creation_date" : 1759329322,
    "last_activity_date" : 1759329322,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140770717,
    "post_id" : 79779382,
    "body" : "@AlwaysLearning  Can you provide a quick reference for that so I can determine if it is a good solution for my issue? Many Thanks!",
    "score" : 0,
    "owner" : {
      "account_id" : 3502646,
      "reputation" : 143,
      "user_id" : 2929036,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/e3115648d4949a88c24e9781efa7ef91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Keith Fosberg",
      "link" : "https://stackoverflow.com/users/2929036/keith-fosberg"
    },
    "creation_date" : 1759312811,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140769826,
    "post_id" : 79779382,
    "body" : "Can you move them to seperate processes? i.e.: exchange data between them using IPC or some other sockets-based API?",
    "score" : 0,
    "owner" : {
      "account_id" : 166167,
      "reputation" : 8952,
      "user_id" : 390122,
      "user_type" : "registered",
      "accept_rate" : 75,
      "profile_image" : "https://www.gravatar.com/avatar/e6f9494c096977b56cd5c808f2a52bcf?s=256&d=identicon&r=PG",
      "display_name" : "AlwaysLearning",
      "link" : "https://stackoverflow.com/users/390122/alwayslearning"
    },
    "creation_date" : 1759266590,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140769666,
    "post_id" : 79779382,
    "body" : "Numerous people have mentioned that these two can be a problem together. I&#39;m building with 17.0.11 and am not (knowingly) doing anything peculiar.  I figure I need to make the Sybase environment go away once I&#39;m done with it, but that doesn&#39;t seem straight forward to me.",
    "score" : 0,
    "owner" : {
      "account_id" : 3502646,
      "reputation" : 143,
      "user_id" : 2929036,
      "user_type" : "registered",
      "accept_rate" : 67,
      "profile_image" : "https://www.gravatar.com/avatar/e3115648d4949a88c24e9781efa7ef91?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Keith Fosberg",
      "link" : "https://stackoverflow.com/users/2929036/keith-fosberg"
    },
    "creation_date" : 1759260625,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140769607,
    "post_id" : 79779382,
    "body" : "I wrote to you that there&#39;s some conflict between the two drivers, although i couldn&#39;t find the SO which was duplicate of this. Do you have some kind of magic going on when you&#39;re building?",
    "score" : 0,
    "owner" : {
      "account_id" : 17972905,
      "reputation" : 10131,
      "user_id" : 13061224,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/GyOMS.jpg?s=256",
      "display_name" : "siggemannen",
      "link" : "https://stackoverflow.com/users/13061224/siggemannen"
    },
    "creation_date" : 1759257881,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140769597,
    "post_id" : 79779382,
    "body" : "This appears to be an issue with the certificate used to sign the SQL Server JDBC driver jar.  I doubt this is related to having two JDBC drivers.  What version of Java are you running with?",
    "score" : 0,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1759257517,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}