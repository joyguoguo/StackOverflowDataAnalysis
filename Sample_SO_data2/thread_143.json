{
  "question" : {
    "question_id" : 79825820,
    "title" : "Declaring a variable final in Java, and then setting its value in one of a (short) sequence of if statements",
    "body" : "<p>If you could settle this stylistic / best practices discussion between me and a coworker, it would be very thankful.</p>\n<p>I'm working on a significantly old Java codebase that had been in use for over 20 years. My coworker is evaluating a PR I am making to the code. I prefer the use of <code>final</code> variables whenever possible since I think it's both clearer and typically safer, deviating from this pattern only if not doing so will cause the code to take a performance or memory hit or become unclear.</p>\n<p>This is a pattern I am known to use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final MyType myValue;\nif (&lt;condition1&gt;) {\n    // A small number of intermediate calculations here\n    myValue = new MyType(/* value dependent on intermediate calculations */);\n}\nelse if (&lt;condition2&gt;) {\n    // Different calculations\n    myValue = new MyType(/* ... */);\n}\nelse {\n    // Perhaps other calculations\n    myValue = new MyType(/* ... */);\n}\n</code></pre>\n<p>My coworker has similarly strong opinions, and does not care for this: he thinks that it is confusing and that I should simply do away with the initial <code>final</code>: I fail to see that it will make any difference since I will effectively treat the value as final after assignment anyway.</p>\n<p>If anyone has any alternative suggestions, comments about readability, or any other reasons why I should not be doing things this way, I would greatly appreciate it.</p>\n",
    "tags" : [ "java", "immutability", "final" ],
    "owner" : {
      "account_id" : 3835820,
      "reputation" : 803,
      "user_id" : 3180151,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/xeh1I.jpg?s=256",
      "display_name" : "Sebastian",
      "link" : "https://stackoverflow.com/users/3180151/sebastian"
    },
    "is_answered" : false,
    "view_count" : 90,
    "closed_date" : 1763662928,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1763662181,
    "creation_date" : 1763661763,
    "link" : "https://stackoverflow.com/questions/79825820/declaring-a-variable-final-in-java-and-then-setting-its-value-in-one-of-a-shor",
    "closed_reason" : "Opinion-based"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140878843,
    "post_id" : 79825820,
    "body" : "@BasilBourque That JEP is about fields, not local variables that this question is about; and this really <b>is</b> opinion-based.",
    "score" : 1,
    "owner" : {
      "account_id" : 213468,
      "reputation" : 110282,
      "user_id" : 466862,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=256&d=identicon&r=PG",
      "display_name" : "Mark Rotteveel",
      "link" : "https://stackoverflow.com/users/466862/mark-rotteveel"
    },
    "creation_date" : 1764415267,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877897,
    "post_id" : 79825820,
    "body" : "<b>Voting to re-open.</b> As we can see from the Comments here, a specific narrowly-focused Answer is possible. This Question is not “opinion-based” in the sense of “Which IDE is best?”.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346842,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1764347308,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140877893,
    "post_id" : 79825820,
    "body" : "By the way, the Java team is currently working on making <code>final</code> fields actually final. See <a href=\"https://openjdk.org/jeps/500\" rel=\"nofollow noreferrer\"><i>JEP 500: Prepare to Make Final Mean Final</i></a>",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 346842,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1764347090,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140866976,
    "post_id" : 79825820,
    "body" : "@MarcePuente In class member variables, it is essential. But also <i>only</i> inside methods: What speaks against making it <i>final</i>? My IDE will set everything to final where possible, preventing re-use of variables (which one should NOT do), and prevent accidental assignment (as in accidental re-write but not re-read). So far, I cannot see even ONE reason not to do it (apart from the guys who don&#39;t set up their IDE properly, they have to type it each time). Then, with lambda expressions, there&#39;s even the concept of &quot;effectively final variables&quot; used inside the lambdas. One more reason to use it.",
    "score" : 2,
    "owner" : {
      "account_id" : 2182934,
      "reputation" : 2660,
      "user_id" : 1932011,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=256&d=identicon&r=PG",
      "display_name" : "JayC667",
      "link" : "https://stackoverflow.com/users/1932011/jayc667"
    },
    "creation_date" : 1763755665,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140866868,
    "post_id" : 79825820,
    "body" : "@JayC667, everything you say is true... as long as we&#39;re talking about class attributes. In this case, the variable only “lives” within the method, so I don&#39;t think it makes sense to make it <i>final</i>.",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 918,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1763752430,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140866370,
    "post_id" : 79825820,
    "body" : "@MarcePuente <code>final</code> is a really awesome way to prevent other CLUELESS PROGRAMMERS like library users or coworkers from messing up object states without realizing. Also makes the whole thing verifiable and so on... And if said  programmer <i>really</i> knows what he&#39;s doing, he can still use inheritance or reflection to get/change that variable&#39;s value, unless it&#39;s both <code>static</code> and <code>final</code>, in which case it&#39;s very unlikely you want that value changed anyways... So a big part of code cleanliness is in fact <code>final</code>, because it drastically reduces chances for side effects.",
    "score" : 2,
    "owner" : {
      "account_id" : 2182934,
      "reputation" : 2660,
      "user_id" : 1932011,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=256&d=identicon&r=PG",
      "display_name" : "JayC667",
      "link" : "https://stackoverflow.com/users/1932011/jayc667"
    },
    "creation_date" : 1763735999,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140866357,
    "post_id" : 79825820,
    "body" : "Alternatively to using a function, use a second variable <code>final MyType tempValue</code> ... <code>if() tempValue = x;</code> and at the end, after all <code>if</code>s, assign the value <code>myValue = tempValue;</code>. This way you can stay inside one method AND have a final variable.",
    "score" : 0,
    "owner" : {
      "account_id" : 2182934,
      "reputation" : 2660,
      "user_id" : 1932011,
      "user_type" : "registered",
      "accept_rate" : 71,
      "profile_image" : "https://www.gravatar.com/avatar/612163480a1ccb4785fd647a003eefbb?s=256&d=identicon&r=PG",
      "display_name" : "JayC667",
      "link" : "https://stackoverflow.com/users/1932011/jayc667"
    },
    "creation_date" : 1763735593,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865600,
    "post_id" : 79825820,
    "body" : "I understand that we&#39;re not talking about an attribute, but rather about that both the declaration and the assignment are made within a method... and as <b>markspace</b> rightly says, it&#39;s a matter of opinion... and I think there&#39;s nothing more meaningless than declaring a variable as final (this also applies to parameters) within a method... unless you suffer from schizophrenia and therefore halfway through the method your other self takes control and modifies the value in question :)",
    "score" : 0,
    "owner" : {
      "account_id" : 10843443,
      "reputation" : 918,
      "user_id" : 20882864,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CCQCy.jpg?s=256",
      "display_name" : "Marce Puente",
      "link" : "https://stackoverflow.com/users/20882864/marce-puente"
    },
    "creation_date" : 1763704692,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140865044,
    "post_id" : 79825820,
    "body" : "move all these calculations into separate function, so your initial spot will be <code>final MyType myValue = initializeCorrectObject(....);</code>",
    "score" : 2,
    "owner" : {
      "account_id" : 3415144,
      "reputation" : 24355,
      "user_id" : 2864275,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f1f73deb5983ac46af2a74732752292e?s=256&d=identicon&r=PG",
      "display_name" : "Iłya Bursov",
      "link" : "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"
    },
    "creation_date" : 1763668120,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140864908,
    "post_id" : 79825820,
    "body" : "<code>final</code> will have the compiler ensure that the variable is assigned to exactly once. This is a good use of <code>final</code>.",
    "score" : 3,
    "owner" : {
      "account_id" : 4819600,
      "reputation" : 59710,
      "user_id" : 3890632,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/hNkgF.png?s=256",
      "display_name" : "khelwood",
      "link" : "https://stackoverflow.com/users/3890632/khelwood"
    },
    "creation_date" : 1763662990,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140864899,
    "post_id" : 79825820,
    "body" : "I think this is opinion based, sorry.  But my opinion is that you should use <code>final</code> wherever possible, as long as &quot;possible&quot; doesn&#39;t mean you start distorting the logic or object creation to do so.",
    "score" : 4,
    "owner" : {
      "account_id" : 2709823,
      "reputation" : 11069,
      "user_id" : 2338547,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QT3fG.png?s=256",
      "display_name" : "markspace",
      "link" : "https://stackoverflow.com/users/2338547/markspace"
    },
    "creation_date" : 1763662811,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}