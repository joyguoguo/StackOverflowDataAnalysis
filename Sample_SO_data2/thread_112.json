{
  "question" : {
    "question_id" : 79838872,
    "title" : "Nested JavaFX Services",
    "body" : "<p>How do I nest <code>Service</code>s / <code>Task</code>s in JavaFX — or achieve the same effect by other means?</p>\n<p>I created a simplistic form for &quot;saving&quot; DB connection settings. Here's what it should be.</p>\n<ol>\n<li>It has two fields: URL and password. Valid credentials are &quot;test&quot; and &quot;test&quot;.</li>\n<li>It has two buttons: <code>Test connection</code> and <code>Save</code>.</li>\n<li><code>Test connection</code> attempts to connect using provided credentials (that is, imagine it does). If they are not, then the fields get outlined in red.</li>\n<li><code>Save</code> first performs step 3 (<em>including the handling</em>) and, if successful, saves the settings. Notice how the testing task is <em>nested</em> in the saving task (while still being an independent task on its own).</li>\n</ol>\n<p>Important: testing connection can be done clicking either button, but saving must be performed only on clicking <code>Save</code>.</p>\n<h1>Approach #1</h1>\n<p>I can declare two separate <code>Service</code>s. It means the saving listener is not activated on testing.</p>\n<p>However, the connection failure handling (red outlining) must either be duplicated in the save listener or be missing (in my MRE it's missing). Both scenarios are undesirable. In the real application, the testing functionality belongs to a child component's scope (imagine, for example, the testing button would be inside some container with a tiny spinner to boot that reflected the test status). It would be a bit weird if my form would be nosing around in the child component's scope repeating the same failure handling.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.application.Application;\nimport javafx.concurrent.Service;\nimport javafx.concurrent.WorkerStateEvent;\nimport javafx.css.PseudoClass;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.BackgroundFill;\nimport javafx.scene.layout.CornerRadii;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\n\nimport java.net.URL;\nimport java.time.Duration;\nimport java.util.Optional;\n\n\npublic class FXServiceDemo extends Application {\n\n    static TextField urlField;\n    static TextField passwordField;\n\n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setScene(createScene());\n        primaryStage.setTitle(&quot;DB Settings&quot;);\n        primaryStage.show();\n    }\n\n    private Scene createScene() {\n        Parent root = createRoot();\n        Scene scene = new Scene(root);\n        findStylesheet().ifPresent(s -&gt; scene.getStylesheets().add(s));\n        return scene;\n    }\n\n    private static Optional&lt;String&gt; findStylesheet() {\n        URL nullableStylesheet = FXServiceDemo.class.getResource(&quot;/styles/styles.css&quot;);\n        Optional&lt;URL&gt; stylesheetOptional = Optional.ofNullable(nullableStylesheet);\n        return stylesheetOptional.map(URL::toExternalForm);\n    }\n\n    private Parent createRoot() {\n        GridPane root = new GridPane();\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(5));\n        root.hgapProperty().set(5);\n        root.vgapProperty().set(5);\n        Label header = new Label(&quot;DB settings&quot;);\n        header.setFont(Font.font(20));\n        root.add(header, 0, 0, 2, 1);\n        root.addRow(1, new Label(&quot;URL&quot;), urlField = new TextField());\n        root.addRow(2, new Label(&quot;Password&quot;), passwordField = new TextField());\n        root.add(createButtonRow(), 1, 3, 2, 1);\n        return root;\n    }\n\n    private HBox createButtonRow() {\n        HBox row = new HBox();\n        row.setSpacing(5);\n        row.setAlignment(Pos.CENTER_RIGHT);\n        row.getChildren().add(createTestConnectionButton());\n        row.getChildren().add(createSaveButton());\n        return row;\n    }\n\n    Service&lt;Void&gt; testConnectionService = Services.from(this::testConnection);\n    private Button createTestConnectionButton() {\n        Button button = new Button();\n        button.textProperty().set(&quot;Test Connection&quot;);\n        button.setOnAction(e -&gt; testConnectionService.restart());\n        button.disableProperty().bind(testConnectionService.runningProperty());\n        testConnectionService.addEventHandler(WorkerStateEvent.WORKER_STATE_SUCCEEDED, FXServiceDemo::onConnectionSuccess);\n        testConnectionService.addEventHandler(WorkerStateEvent.WORKER_STATE_FAILED, FXServiceDemo::onConnectionFailure);\n        return button;\n    }\n\n    private static void onConnectionSuccess(WorkerStateEvent e) {\n        setValid(true);\n        System.out.println(&quot;Connection was not established.&quot;);\n    }\n\n    private static void onConnectionFailure(WorkerStateEvent e) {\n        setValid(false);\n        System.out.println(&quot;Connection was not established.&quot;);\n    }\n\n    private static void setValid(boolean valid) {\n        PseudoClass invalid = PseudoClass.getPseudoClass(&quot;invalid&quot;);\n        urlField.pseudoClassStateChanged(invalid, !valid);\n        passwordField.pseudoClassStateChanged(invalid, !valid);\n    }\n\n    Service&lt;Void&gt; saveSettingsService = Services.from(this::saveSettings);\n    private Button createSaveButton() {\n        Button button = new Button();\n        button.textFillProperty().set(Color.WHITE);\n        button.backgroundProperty().set(new Background(new BackgroundFill(Color.GREEN, new CornerRadii(3), null)));\n        button.textProperty().set(&quot;Save&quot;);\n        button.setOnAction(e -&gt; saveSettingsService.restart());\n        button.disableProperty().bind(testConnectionService.runningProperty().or(saveSettingsService.runningProperty()));\n        saveSettingsService.addEventHandler(WorkerStateEvent.WORKER_STATE_SUCCEEDED, FXServiceDemo::onSaveSuccess);\n        saveSettingsService.addEventHandler(WorkerStateEvent.WORKER_STATE_FAILED, FXServiceDemo::onSaveFailure);\n        return button;\n    }\n\n    private static void onSaveSuccess(WorkerStateEvent e) {\n        System.out.println(&quot;Connection settings successfully saved.&quot;);\n    }\n\n    private static void onSaveFailure(WorkerStateEvent e) {\n        System.out.println(&quot;Connection settings could not saved.&quot;);\n    }\n\n    private void testConnection() {\n        System.out.println(&quot;Testing connection...&quot;);\n        sleep(Duration.ofSeconds(1));\n        if (credentialsValid()) return;\n        throw new IllegalArgumentException(&quot;Invalid Credentials&quot;);\n    }\n\n    private boolean credentialsValid() {\n        String correctUrl = &quot;test&quot;;\n        String correctPass = &quot;test&quot;;\n        return correctUrl.equals(urlField.textProperty().get()) &amp;&amp;\n                correctPass.equals(passwordField.textProperty().get());\n    }\n\n    private void saveSettings() {\n        testConnection();\n        System.out.println(&quot;Saving connection settings...&quot;);\n        sleep(Duration.ofSeconds(1));\n    }\n\n    private static void sleep(Duration duration) {\n        try {\n            Thread.sleep(duration.toMillis());\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>import javafx.concurrent.Service;\nimport javafx.concurrent.Task;\n\npublic class Services {\n\n    public static Service&lt;Void&gt; from(Runnable task) {\n        return new Service&lt;Void&gt;() {\n            @Override\n            protected Task&lt;Void&gt; createTask() {\n                return new Task&lt;Void&gt;() {\n                    @Override\n                    protected Void call() {\n                        task.run();\n                        return null;\n                    }\n                };\n            }\n        };\n    }\n}\n</code></pre>\n<pre class=\"lang-css prettyprint-override\"><code>/* resources/styles/styles.css */\n\n.text-field:invalid {\n    -fx-border-color : salmon;\n}\n</code></pre>\n<p><a href=\"https://i.sstatic.net/F0BDQRWV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/F0BDQRWV.png\" alt=\"enter image description here\" /></a></p>\n<h1>Approach #2</h1>\n<p>I can declare one <code>Service</code>. Then failure handling will be executed no matter which button triggers it.</p>\n<p>However, testing connection will then notify the same saving listener (since listeners would also be shared). In effect, it would mean the testing button would be saving as well — unacceptable.</p>\n<h1>Approach #3</h1>\n<p><strong>(theoretical)</strong></p>\n<p>If I could:</p>\n<ol>\n<li>Declare two separate services.</li>\n<li>But have the saving service &quot;contain&quot; the lifecycle of the testing service.</li>\n</ol>\n<p>I could meet all of my requirements.</p>\n<p>However, it seems, I can't have nested <code>Service</code>s in JavaFX (or nested <code>Task</code>s, for that matter).</p>\n<h1>Approach #4</h1>\n<p><strong>(theoretical)</strong></p>\n<p>I could call some <code>restartAndThen(resultConsumer)</code> method that would register no additional listeners but execute a one-off callback on that particular invocation – the invocation performed by the saving button's action listener.</p>\n<p>Again, it's imaginary. No such API exists.</p>\n<p>How do I achieve my goals?</p>\n<p>Java 8.</p>\n",
    "tags" : [ "java", "javafx", "javafx-8" ],
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "is_answered" : true,
    "view_count" : 146,
    "closed_date" : 1765106774,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1765185377,
    "creation_date" : 1764937122,
    "link" : "https://stackoverflow.com/questions/79838872/nested-javafx-services",
    "closed_reason" : "Needs more focus"
  },
  "answers" : [ {
    "answer_id" : 79839299,
    "question_id" : 79838872,
    "body" : "<p>I think you need two <code>Task&lt;Boolean&gt;</code>. In your first case only run the one task. In your second case, run the first task and run the second task if the first task returns true (valid credientials).</p>\n<pre><code>import javafx.application.Application;\nimport javafx.css.PseudoClass;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TextField;\nimport javafx.scene.layout.Background;\nimport javafx.scene.layout.BackgroundFill;\nimport javafx.scene.layout.CornerRadii;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.layout.HBox;\nimport javafx.scene.paint.Color;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\n\nimport java.time.Duration;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport javafx.concurrent.Task;\n\n\npublic class App extends Application {\n\n    TextField urlField;\n    TextField passwordField;\n    Button btnTestConnection;\n    Button btnSave;\n    \n    @Override\n    public void start(Stage primaryStage) {  \n        Parent root = createRoot();\n        Scene scene = new Scene(root);\n        scene.getStylesheets().add(getClass().getResource(&quot;styles/styles.css&quot;).toExternalForm());        \n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;DB Settings&quot;);\n        primaryStage.show();\n    }\n\n    private Parent createRoot() {\n        GridPane root = new GridPane();\n        root.setAlignment(Pos.CENTER);\n        root.setPadding(new Insets(5));\n        root.hgapProperty().set(5);\n        root.vgapProperty().set(5);\n        Label header = new Label(&quot;DB settings&quot;);\n        header.setFont(Font.font(20));\n        root.add(header, 0, 0, 2, 1);\n        root.addRow(1, new Label(&quot;URL&quot;), urlField = new TextField());\n        root.addRow(2, new Label(&quot;Password&quot;), passwordField = new TextField());\n        root.add(createButtonRow(), 1, 3, 2, 1);\n        return root;\n    }\n\n    private HBox createButtonRow() {\n        HBox row = new HBox();\n        row.setSpacing(5);\n        row.setAlignment(Pos.CENTER_RIGHT);\n        \n        btnTestConnection = createTestConnectionButton();\n        row.getChildren().add(btnTestConnection);\n        \n        btnSave = createSaveSettingButton();\n        row.getChildren().add(btnSave);\n        \n        return row;\n    }\n\n    private Button createTestConnectionButton() \n    {\n        Button button = new Button();\n        button.textProperty().set(&quot;Test Connection&quot;);        \n        button.setOnAction(e -&gt; \n        {\n            Task&lt;Boolean&gt; testConnectionTask = testConnectionTask();        \n            button.disableProperty().bind(testConnectionTask.runningProperty());\n            testConnectionTask.setOnSucceeded((t) -&gt; {\n                if(testConnectionTask.getValue())\n                {\n                    System.out.println(&quot;Valid Credentials&quot;);\n                }\n                else\n                {\n                    System.out.println(&quot;Invalid Credentials&quot;);\n                }\n\n                setValid(testConnectionTask.getValue());\n            });\n\n            exec.submit(testConnectionTask);\n\n        });\n\n        return button;\n    }\n\n    private Task&lt;Boolean&gt; testConnectionTask() \n    {\n            Task&lt;Boolean&gt; testConnectTask = new Task&lt;Boolean&gt;(){\n                @Override\n                protected Boolean call() throws Exception {\n                    System.out.println(&quot;Testing connection...&quot;);\n                    sleep(Duration.ofSeconds(1));\n                    return credentialsValid();\n                }\n            };\n\n            return testConnectTask;\n    }\n    \n\n    private Button createSaveSettingButton() {\n        Button button = new Button(&quot;Save&quot;);\n        button.textFillProperty().set(Color.WHITE);\n        button.backgroundProperty().set(new Background(new BackgroundFill(Color.GREEN, new CornerRadii(3), null)));\n        button.setOnAction(e -&gt; \n        {\n            button.disableProperty().bind(btnTestConnection.disableProperty());\n            \n            Task&lt;Boolean&gt; testConnectionTask = testConnectionTask();        \n            btnTestConnection.disableProperty().bind(testConnectionTask.runningProperty());\n            testConnectionTask.setOnSucceeded((t) -&gt; {\n                if(testConnectionTask.getValue())\n                {\n                    System.out.println(&quot;Valid Credentials&quot;);\n                    Task&lt;Boolean&gt; saveSettingTask = saveSettingsTask();\n                    btnTestConnection.disableProperty().bind(saveSettingTask.runningProperty());\n                    saveSettingTask.setOnSucceeded((v) -&gt; {\n                        System.out.println(&quot;Setting were saved!&quot;);\n                    });\n                    \n                    exec.submit(saveSettingTask);\n                }\n                else\n                {\n                    System.out.println(&quot;Invalid Credentials&quot;);\n                }\n\n                setValid(testConnectionTask.getValue());\n            });\n\n            exec.submit(testConnectionTask);\n        });\n        \n        \n        \n        \n        return button;\n    }    \n\n    private Task&lt;Boolean&gt; saveSettingsTask() \n    {\n        Task&lt;Boolean&gt; saveSettingsTask = new Task&lt;Boolean&gt;() {\n            @Override\n            protected Boolean call() throws Exception {\n                System.out.println(&quot;Saving connection settings...&quot;);\n                sleep(Duration.ofSeconds(5));\n                \n                return true;\n            }\n        };\n        \n        return saveSettingsTask;\n    }\n    \n    \n    \n    \n    private void setValid(boolean valid) {\n        PseudoClass invalid = PseudoClass.getPseudoClass(&quot;invalid&quot;);\n        urlField.pseudoClassStateChanged(invalid, !valid);\n        passwordField.pseudoClassStateChanged(invalid, !valid);\n    }\n   \n    private boolean credentialsValid() {\n        String correctUrl = &quot;test&quot;;\n        String correctPass = &quot;test&quot;;\n        return correctUrl.equals(urlField.textProperty().get()) &amp;&amp;\n                correctPass.equals(passwordField.textProperty().get());\n    }\n    \n    private final ExecutorService exec = Executors.newSingleThreadExecutor(\n        // An executor which creates daemon threads\n        runnable -&gt; {\n            Thread thread = new Thread(runnable);\n            thread.setDaemon(true);\n            return thread;\n        }\n    );\n    \n    private static void sleep(Duration duration) {\n        try {\n            Thread.sleep(duration.toMillis());\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n",
    "score" : 2,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1764968329,
    "last_activity_date" : 1764968329,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140893131,
    "post_id" : 79838872,
    "body" : "You can &quot;nest&quot; tasks using methods of <code>java.util.concurrent</code>, as I alluded to earlier, because <code>Task</code> is an implementation of <code>Future</code>. But <code>Service</code> is not, so there&#39;s no way to do this with a <code>Service</code> that I can see.",
    "score" : 0,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1765219968,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140893106,
    "post_id" : 79838872,
    "body" : "@James_D perhaps, <code>java.util.concurrent</code> can be of help?",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1765218794,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140892753,
    "post_id" : 79838872,
    "body" : "@James_D a workaround that checks all the boxes just as well",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1765205444,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140892734,
    "post_id" : 79838872,
    "body" : "But as you&#39;ve already identified, the API doesn&#39;t support that. So what are you actually asking?",
    "score" : 0,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1765204954,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140892728,
    "post_id" : 79838872,
    "body" : "@James_D basically, one service should tell another, &quot;Do your thing, and if you&#39;re all good, I&#39;ll do mine&quot;",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1765204850,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140892701,
    "post_id" : 79838872,
    "body" : "In the real application, you are presumably using some kind of MV* (MVC/MVP/MVVM etc) architecture. Your model should have some kind of property representing the connection status. In this case, isn&#39;t the duplication in the first approach completely minimal? Both services just update the model (which is a very minimal amount of duplication) and then the UI just has a single listener on the model which responds to the change in connection status. It&#39;s not really clear what you&#39;re actually asking here.",
    "score" : 1,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1765203956,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140891052,
    "post_id" : 79838872,
    "body" : "<a href=\"https://stackoverflow.com/questions/18880455/task-vs-service-for-database-operations\" title=\"task vs service for database operations\">stackoverflow.com/questions/18880455/&hellip;</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 2819940,
      "reputation" : 14002,
      "user_id" : 2423906,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
      "display_name" : "SedJ601",
      "link" : "https://stackoverflow.com/users/2423906/sedj601"
    },
    "creation_date" : 1765085621,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140890798,
    "post_id" : 79838872,
    "body" : "You don’t have to use Services for everything.  Imagine having a separate class named ConnectionTester, which is <i>not</i> a Service or Task.  Just a regular class with a method that tests a connection.  Then your Test button invokes a separate Service class whose Task makes use of ConnectionTester.  Your Save button invokes a different Service class whose Task also makes use of ConnectionTester, and only if that test succeeds does that Service then proceed with saving.",
    "score" : 2,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1765057002,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140889604,
    "post_id" : 79838872,
    "body" : "Add a summary of your question at the top. Neither your title nor your opening prose posits a question.  It is quite difficult to heroine what you are asking.",
    "score" : 0,
    "owner" : {
      "account_id" : 322981,
      "reputation" : 347089,
      "user_id" : 642706,
      "user_type" : "registered",
      "accept_rate" : 58,
      "profile_image" : "https://i.sstatic.net/ZWEI3.jpg?s=256",
      "display_name" : "Basil Bourque",
      "link" : "https://stackoverflow.com/users/642706/basil-bourque"
    },
    "creation_date" : 1764962428,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140889436,
    "post_id" : 79838872,
    "body" : "@SergeyZolotarev Yes, I understand the API. You would need to create a new Task on each button press. The <code>Service</code> is doing that for you in your implementation, but since the <code>Service</code> API doesn&#39;t offer the &quot;nesting&quot; functionality you need, you might find it easier to manage the tasks yourself. The posted example doesn&#39;t really use much from <code>Service</code>, so it might be easier to go that route.",
    "score" : 1,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1764955100,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140889431,
    "post_id" : 79838872,
    "body" : "@James_D tasks are not restartable. Once their first <code>run()</code> completes, they are useless",
    "score" : 0,
    "owner" : {
      "account_id" : 10187542,
      "reputation" : 2683,
      "user_id" : 20692967,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
      "display_name" : "Sergey Zolotarev",
      "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
    },
    "creation_date" : 1764954630,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140889294,
    "post_id" : 79838872,
    "body" : "<i>&quot;However, it seems, I can&#39;t have nested Services in JavaFX.&quot;</i> This statement appears to be true, as far asI can see. But do you need a <code>Service</code>? It should be possible to create nested <code>Task</code>s.",
    "score" : 0,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1764949688,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140889240,
    "post_id" : 79838872,
    "body" : "Another option is to have a single service with a flag indicating if only testing should be performed. Copy the current value of the flag to a final field in the task. If needed you could return some kind of value indicating what was performed. Not sure if this is preferable to your other options, but it is an option.",
    "score" : 0,
    "owner" : {
      "account_id" : 2518243,
      "reputation" : 210916,
      "user_id" : 2189127,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/e8e6e627b4b90ec816c5c7aa04cbcc26?s=256&d=identicon&r=PG",
      "display_name" : "James_D",
      "link" : "https://stackoverflow.com/users/2189127/james-d"
    },
    "creation_date" : 1764948392,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79839299" : [ {
      "comment_id" : 140892874,
      "post_id" : 79839299,
      "body" : "@SergeyZolotarev You are in control of how you program. I have laid out the ideas given in the comments. Use them as you see fit.",
      "score" : 0,
      "owner" : {
        "account_id" : 2819940,
        "reputation" : 14002,
        "user_id" : 2423906,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
        "display_name" : "SedJ601",
        "link" : "https://stackoverflow.com/users/2423906/sedj601"
      },
      "creation_date" : 1765209829,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140892225,
      "post_id" : 79839299,
      "body" : "Important: note you <code>setValid()</code> in both the test service and save service. It&#39;s exactly the thing I was hoping to avoid, duplicating the shared test connection handling. The outer service must run the inner in its entirety, including the handling (unaware of what it might be), and then perform additional, specific handling",
      "score" : 0,
      "owner" : {
        "account_id" : 10187542,
        "reputation" : 2683,
        "user_id" : 20692967,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
        "display_name" : "Sergey Zolotarev",
        "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
      },
      "creation_date" : 1765184647,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891950,
      "post_id" : 79839299,
      "body" : "Why? It&#39;s not criticism",
      "score" : 0,
      "owner" : {
        "account_id" : 10187542,
        "reputation" : 2683,
        "user_id" : 20692967,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
        "display_name" : "Sergey Zolotarev",
        "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
      },
      "creation_date" : 1765163858,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891675,
      "post_id" : 79839299,
      "body" : "Hey, you can design it as you like. I wouldn&#39;t do that, though.",
      "score" : 0,
      "owner" : {
        "account_id" : 2819940,
        "reputation" : 14002,
        "user_id" : 2423906,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
        "display_name" : "SedJ601",
        "link" : "https://stackoverflow.com/users/2423906/sedj601"
      },
      "creation_date" : 1765134939,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891528,
      "post_id" : 79839299,
      "body" : "Actually, I expect it to throw an <code>SQLException</code>. It&#39;s what happens when you try to create a <code>Connection</code> with invalid credentials",
      "score" : 0,
      "owner" : {
        "account_id" : 10187542,
        "reputation" : 2683,
        "user_id" : 20692967,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
        "display_name" : "Sergey Zolotarev",
        "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
      },
      "creation_date" : 1765123585,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891521,
      "post_id" : 79839299,
      "body" : "@SergeyZolotarev I think I understand your question. When you query the database to verify the credentials, the result should be true if the credentials are valid and false if they are invalid. In the other case, if you attempt to save the credentials, the results should return true if the save is successful and false if the save fails.",
      "score" : 0,
      "owner" : {
        "account_id" : 2819940,
        "reputation" : 14002,
        "user_id" : 2423906,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
        "display_name" : "SedJ601",
        "link" : "https://stackoverflow.com/users/2423906/sedj601"
      },
      "creation_date" : 1765123148,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891098,
      "post_id" : 79839299,
      "body" : "Well, you have <code>Task&lt;Boolean&gt;</code> instead of <code>Task&lt;Void&gt;</code>",
      "score" : 0,
      "owner" : {
        "account_id" : 10187542,
        "reputation" : 2683,
        "user_id" : 20692967,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
        "display_name" : "Sergey Zolotarev",
        "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
      },
      "creation_date" : 1765091816,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140891047,
      "post_id" : 79839299,
      "body" : "@SergeyZolotarev Which Boolean am I consuming?",
      "score" : 0,
      "owner" : {
        "account_id" : 2819940,
        "reputation" : 14002,
        "user_id" : 2423906,
        "user_type" : "registered",
        "accept_rate" : 100,
        "profile_image" : "https://i.sstatic.net/rkpYv.jpg?s=256",
        "display_name" : "SedJ601",
        "link" : "https://stackoverflow.com/users/2423906/sedj601"
      },
      "creation_date" : 1765085210,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140890576,
      "post_id" : 79839299,
      "body" : "Thank you. Why do you consume a boolean instead of attaching listeners to the task?",
      "score" : 0,
      "owner" : {
        "account_id" : 10187542,
        "reputation" : 2683,
        "user_id" : 20692967,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/NZSXm.jpg?s=256",
        "display_name" : "Sergey Zolotarev",
        "link" : "https://stackoverflow.com/users/20692967/sergey-zolotarev"
      },
      "creation_date" : 1765043719,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}