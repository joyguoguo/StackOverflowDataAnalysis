{
  "question" : {
    "question_id" : 79614708,
    "title" : "aws opensearch serverless service inside a vpc endpoint does not work from java app in local machine",
    "body" : "<p>I am trying to connect to an AWS OpenSearch Serverless collection that is deployed inside a <code>VPC endpoint (PrivateLink) </code>from a Java application running on my local machine. My setup is as follows:</p>\n<p>I have another <code>opensearch</code> which is managed and not serverless which is also inside a vpc endpoint... This i can access from my local machine. Why?.\nWhen i do nslookup it resolves to a private IP but for serverless it resolves to public IP.</p>\n<p>The OpenSearch Serverless collection is configured with a VPC endpoint and network policy to restrict access to within the VPC.</p>\n<ol>\n<li>I am using the AWS SDK for Java (v2) with AWS4 signing to authenticate my requests.</li>\n<li>My Java application runs outside AWS, on my local machine (not inside the VPC).</li>\n<li>When I attempt to connect to the collection endpoint, I receive a 401 Unauthorized error.</li>\n</ol>\n<p>What I have tried:</p>\n<ul>\n<li><p>Verified that my IAM credentials are correct and have the necessary permissions.</p>\n</li>\n<li><p>Confirmed that the network policy for the collection restricts access to the VPC endpoint.</p>\n</li>\n<li><p>Attempted DNS resolution using Route 53 Resolver inbound endpoints, but my local machine cannot reach the VPC private IPs.</p>\n</li>\n<li><p>Tried both the public and private collection endpoints.\nQuestions:</p>\n</li>\n<li><p>Is it possible to access an OpenSearch Serverless collection behind a VPC endpoint from a local machine outside the VPC?</p>\n</li>\n<li><p>If so, what is the recommended way to authenticate and route traffic from a local Java app to the private endpoint?</p>\n</li>\n<li><p>Are there additional network or IAM policy settings required to make this work?</p>\n</li>\n<li><p>Is the 401 error due to network restrictions, IAM policy, or something else?\nAny guidance or best practices for securely accessing OpenSearch Serverless from outside AWS would be greatly appreciated!</p>\n</li>\n</ul>\n",
    "tags" : [ "java", "amazon-web-services", "amazon-ec2", "amazon-opensearch", "vpc-endpoint" ],
    "owner" : {
      "account_id" : 1375280,
      "reputation" : 4474,
      "user_id" : 1309392,
      "user_type" : "registered",
      "accept_rate" : 56,
      "profile_image" : "https://i.sstatic.net/NWjO4.jpg?s=256",
      "display_name" : "sTg",
      "link" : "https://stackoverflow.com/users/1309392/stg"
    },
    "is_answered" : false,
    "view_count" : 245,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1746816516,
    "creation_date" : 1746816516,
    "link" : "https://stackoverflow.com/questions/79614708/aws-opensearch-serverless-service-inside-a-vpc-endpoint-does-not-work-from-java",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ ],
  "answer_comments" : { }
}