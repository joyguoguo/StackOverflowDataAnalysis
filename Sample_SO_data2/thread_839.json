{
  "question" : {
    "question_id" : 79770552,
    "title" : "Relationship between ConnectionWaitTimeout and TimeToLiveConnectionTimeout in Oracle UCP",
    "body" : "<p>I'm working with Oracle's Universal Connection Pool (UCP) and I'm trying to fine-tune the timeout settings for my PoolDataSource.</p>\n<p>Based on the official Oracle documentation for PoolDataSource <a href=\"https://docs.oracle.com/cd//E82638_01/jjuar/oracle/ucp/jdbc/PoolDataSource.html\" rel=\"nofollow noreferrer\">(link)</a>, it's clear that the time unit for the following methods is seconds:</p>\n<p>setTimeToLiveConnectionTimeout(int seconds)</p>\n<p>setConnectionWaitTimeout(int seconds)</p>\n<p>setInactiveConnectionTimeout(int seconds)</p>\n<p>setAbandonedConnectionTimeout(int seconds)</p>\n<p>My question is about the interaction and best practices for configuring setConnectionWaitTimeout and setTimeToLiveConnectionTimeout, especially in a high-contention scenario where all connections in the pool are actively in use.</p>\n<p>Let's assume the pool is fully utilized. A new thread requests a connection and starts waiting.</p>\n<p>Is there a mandatory requirement or a recommended best practice for the value of ConnectionWaitTimeout relative to TimeToLiveConnectionTimeout? For instance, should ConnectionWaitTimeout always be configured to be at least one second greater than TimeToLiveConnectionTimeout?</p>\n<p>What is the precise behavior in this scenario? If a waiting thread is close to its ConnectionWaitTimeout, but an in-use connection is also about to expire due to its TimeToLiveConnectionTimeout, how do these two timeouts interact to determine whether the thread gets a connection or throws an exception?</p>\n<p>Thank you for your insights.</p>\n<p>Disclaimer: This question was rephrased by an AI assistant to improve clarity for the community. Previous answers generated by the AI were not sufficient for the user's specific query.</p>\n",
    "tags" : [ "java", "oracle-database" ],
    "owner" : {
      "account_id" : 6211203,
      "reputation" : 77,
      "user_id" : 13660973,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/EXBn5.png?s=256",
      "display_name" : "FarHooD",
      "link" : "https://stackoverflow.com/users/13660973/farhood"
    },
    "is_answered" : false,
    "view_count" : 91,
    "answer_count" : 0,
    "score" : 1,
    "last_activity_date" : 1758428591,
    "creation_date" : 1758403453,
    "link" : "https://stackoverflow.com/questions/79770552/relationship-between-connectionwaittimeout-and-timetoliveconnectiontimeout-in-or",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140752886,
    "post_id" : 79770552,
    "body" : "I do not have an answer, but maybe people on the commons-pool mailing list have generic thinking as you&#39;d like to find it: <a href=\"https://commons.apache.org/proper/commons-pool/\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-pool</a>",
    "score" : 0,
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "creation_date" : 1758567483,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140750916,
    "post_id" : 79770552,
    "body" : "Thanks, that&#39;s a valid point. My question is conceptual. I used oracle.ucp.jdbc.PoolDataSourceImpl just for context, but the fundamental principles behind ConnectionWaitTimeout and TimeToLiveConnectionTimeout apply to most connection pools (e.g., HikariCP, C3P0). My goal is to understand the general interaction and conceptual difference between these settings, which is relevant for any implementation using similar parameters.@queeg",
    "score" : 0,
    "owner" : {
      "account_id" : 6211203,
      "reputation" : 77,
      "user_id" : 13660973,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/EXBn5.png?s=256",
      "display_name" : "FarHooD",
      "link" : "https://stackoverflow.com/users/13660973/farhood"
    },
    "creation_date" : 1758488044,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140749674,
    "post_id" : 79770552,
    "body" : "Your question is more related to UCP than to Java. Mind the tagging.",
    "score" : 0,
    "owner" : {
      "account_id" : 5289146,
      "reputation" : 9940,
      "user_id" : 4222206,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/416696430ab23f397a5dbeda73e72896?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "queeg",
      "link" : "https://stackoverflow.com/users/4222206/queeg"
    },
    "creation_date" : 1758404365,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}