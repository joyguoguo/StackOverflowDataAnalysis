{
  "question" : {
    "question_id" : 79838727,
    "title" : "CircuitBreaker is going to OPEN state from CLOSED before minimumNumberOfCalls",
    "body" : "<p>I'm using custom configuration for the <code>CircuitBreaker</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CircuitBreakerConfig circuitBreakerConfig = CircuitBreakerConfig.custom()\n                                                                .failureRateThreshold(50)\n                                                                .slowCallDurationThreshold(60000)\n                                                                .permittedNumberOfCallsInHalfOpenState(5)\n                                                                .slidingWindowSize(10)\n                                                                .minimumNumberOfCalls(10)\n                                                                .build();\n</code></pre>\n<p>According the above code I should get <code>CallNotPermittedException</code> only after ten calls, but I'm getting at 6<sup>th</sup> call.<br />\nI've checked it's not <code>slowCall</code>.<br />\nFYI: I'm using Resilince4j 2.3.0, and its COUNT_BASED window.<br />\nWhat could be the reason ?</p>\n",
    "tags" : [ "java", "circuit-breaker", "resilience4j" ],
    "owner" : {
      "account_id" : 44915104,
      "reputation" : 1,
      "user_id" : 32002555,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/95b8b5e4e10e3dd94b8d7e6ff1adedc9?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Demotivational Speaker",
      "link" : "https://stackoverflow.com/users/32002555/demotivational-speaker"
    },
    "is_answered" : false,
    "view_count" : 58,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764998348,
    "creation_date" : 1764928325,
    "link" : "https://stackoverflow.com/questions/79838727/circuitbreaker-is-going-to-open-state-from-closed-before-minimumnumberofcalls",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140890144,
    "post_id" : 79838727,
    "body" : "I think the problem is that   .failureRateThreshold(50). The circuit breaker can open BEFORE reaching minimumNumberOfCalls if the failure rate exceeds the threshold within the current sliding window. Please try increasing that threshold to prove.",
    "score" : 0,
    "owner" : {
      "account_id" : 25583936,
      "reputation" : 1527,
      "user_id" : 19361968,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/1d19c6d51232c67af617cf944af5a30c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Murat K.",
      "link" : "https://stackoverflow.com/users/19361968/murat-k"
    },
    "creation_date" : 1765010281,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}