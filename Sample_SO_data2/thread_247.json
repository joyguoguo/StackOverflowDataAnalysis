{
  "question" : {
    "question_id" : 79826961,
    "title" : "Mapstruct and multiple derived classes",
    "body" : "<p>I am having trouble wrapping my head around subclass mappings. I have 3 classes:</p>\n<pre><code>@Data\npublic class Parent {\n  long id;\n  String name;\n\n  public boolean isEmpty() {\n    return StringUtils.isEmpty(name);\n  }\n</code></pre>\n<pre><code>@Data\npublic class Child extends Parent {\n  String nickName;\n}\n</code></pre>\n<pre><code>@Data\npublic class Grandchild extends Child {\n  int count;\n}\n</code></pre>\n<p>and 3 corresponding DTO classes:</p>\n<pre><code>@Data\npublic class ParentDto {\n  long idDto;\n  String name;\n}\n</code></pre>\n<pre><code>@Data\npublic class ChildDto extends ParentDto {\n  String nickNameDto;\n}\n</code></pre>\n<pre><code>@Data\npublic class GrandchildDto extends ChildDto {\n  int countDto;\n}\n</code></pre>\n<p>I am trying to put together the mappers but having a hard time getting the mappings to work.  I have tried using subclassMappings as follows:</p>\n<pre><code>@Mapper(subclassExhaustiveStrategy = SubclassExhaustiveStrategy.RUNTIME_EXCEPTION)\npublic interface ParentMapper {\n  @SubclassMapping(target = GrandchildDto.class, source = Grandchild.class)\n  @SubclassMapping(target = ChildDto.class, source = Child.class)\n  @Mapping(target = &quot;idDto&quot;, source = &quot;id&quot;)\n  @BeanMapping(ignoreUnmappedSourceProperties = {&quot;empty&quot;}\n  ParentDto mapToParentDto(Parent parent)\n}\n</code></pre>\n<pre><code>@Mapper(uses = ParentMapper.class) ... not sure this is correct/necessary\npublic interface ChildMapper {\n  @SubclassMapping(target = GrandchildDto.class, source = Grandchild.class)\n  @Mapping(target = &quot;nickNameDto&quot;, source = &quot;nickName&quot;)\n  ChildDto mapToChildDto(Child child)\n}\n</code></pre>\n<pre><code>@Mapper(uses = ChildMapper.class) ... not sure this is correct/necessary\npublic interface GrandchildMapper {\n  @Mapping(target = &quot;countDto&quot;, source = &quot;count&quot;)\n  GrandchildDto mapToGrandChildDto(Grandchild grandchild)\n}\n</code></pre>\n<p>I have a test for the ChildMapper which fails because the id (from Parent) does not match the idDto (from ParentDto).  I have also tried handling the inheritance with MapperConfigs but did not have much luck there either.</p>\n<p>What is the best way to handle multiple inheritance with differing parameter names?\nThanks</p>\n",
    "tags" : [ "java", "inheritance", "lombok", "mapstruct" ],
    "owner" : {
      "account_id" : 22567698,
      "reputation" : 37,
      "user_id" : 16754423,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b6b418573f85d35a8c5d337eaa2a6af5?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "bkqdad",
      "link" : "https://stackoverflow.com/users/16754423/bkqdad"
    },
    "is_answered" : false,
    "view_count" : 57,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1764004784,
    "creation_date" : 1763760757,
    "link" : "https://stackoverflow.com/questions/79826961/mapstruct-and-multiple-derived-classes",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140867262,
    "post_id" : 79826961,
    "body" : "You should probably tag this question with &quot;lombok&quot; or otherwise the library providing the annotations in use as it&#39;s non-trivially relevant context.",
    "score" : 0,
    "owner" : {
      "account_id" : 14914414,
      "reputation" : 1185,
      "user_id" : 10808904,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/Ts8fIsJj.png?s=256",
      "display_name" : "Xavier Pedraza",
      "link" : "https://stackoverflow.com/users/10808904/xavier-pedraza"
    },
    "creation_date" : 1763775872,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}