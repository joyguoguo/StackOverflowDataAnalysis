{
  "question" : {
    "question_id" : 79748953,
    "title" : "MockitoJUnitRunner Don&#39;t init mocks in SpringBoot",
    "body" : "<p>I have this Junit test:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\nclass NotificationServiceTest {\n\n    private static final Long EMAIL_ID = 1L;\n    private static final Long ORGANISATION_ID = 1L;\n    private static final Long CHILD_ID = 456L;\n    private static final String SUBJECT = &quot;Test Subject&quot;;\n    private static final String BODY = &quot;Test Body&quot;;\n    private static final String RECIPIENT_EMAIL = &quot;test@example.com&quot;;\n    private static final Long DOCUMENT_ID = 789L;\n    private static final String DOCUMENT_NAME = &quot;test-document.pdf&quot;;\n    private static final byte[] DOCUMENT_CONTENT = &quot;test content&quot;.getBytes();\n\n\n    @Mock private BackofficeMailBuilder mailBuilder;\n    @Mock private ParametreSystemeRepository systemeRepository;  // Missing\n    @Mock private IMenageService menageService;                  // Missing\n    @Mock private IParentService parentService;                 // Missing\n    @Mock private EmailService emailService;                    // Missing\n    @Mock private EmailsDocumentRepository emailsDocumentRepository;\n    @Mock private DocumentRepository documentRepository;\n\n\n    @InjectMocks\n    private NotificationService notificationService;\n\n    private IEmailParam emailParam;\n    private Document document;\n\n\n    @BeforeEach\n    void setUp() {\n\n        emailParam = createMockEmailParam();\n        document = createMockDocument();\n\n\n        // Setup common mock behaviors\n        when(mailBuilder.subject(anyString(), any())).thenReturn(mailBuilder);\n        when(mailBuilder.body(anyString(), any())).thenReturn(mailBuilder);\n        when(mailBuilder.recipients(anyList())).thenReturn(mailBuilder);\n        when(mailBuilder.recipient(anyString())).thenReturn(mailBuilder);\n        when(mailBuilder.cc(anyList())).thenReturn(mailBuilder);\n        when(mailBuilder.bcc(anyList())).thenReturn(mailBuilder);\n        when(mailBuilder.multilingual(anyBoolean())).thenReturn(mailBuilder);\n        when(mailBuilder.translateSubject(anyLong())).thenReturn(SUBJECT);\n        when(mailBuilder.translateBody(anyLong())).thenReturn(BODY);\n    }\n..\n}\n</code></pre>\n<p>but when I run the tests I have this error:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;com.daniaty.services.mail.BackofficeMailBuilder.subject(String, Object[])&quot; because &quot;this.mailBuilder&quot; is null\n\n    at com.daniaty.services.impl.NotificationServiceTest.setUp(NotificationServiceTest.java:65)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n\n\n    org.mockito.exceptions.misusing.InvalidUseOfMatchersException: \n    Misplaced or misused argument matcher detected here:\n    \n    -&gt; at com.daniaty.services.impl.NotificationServiceTest.setUp(NotificationServiceTest.java:65)\n    -&gt; at com.daniaty.services.impl.NotificationServiceTest.setUp(NotificationServiceTest.java:65)\n    \n    You cannot use argument matchers outside of verification or stubbing.\n</code></pre>\n",
    "tags" : [ "java", "spring-boot", "junit" ],
    "owner" : {
      "account_id" : 5619788,
      "reputation" : 1612,
      "user_id" : 4450024,
      "user_type" : "registered",
      "accept_rate" : 99,
      "profile_image" : "https://i.sstatic.net/WMErl.jpg?s=256",
      "display_name" : "Nunyet Cal&#231;ada",
      "link" : "https://stackoverflow.com/users/4450024/nunyet-cal%c3%a7ada"
    },
    "is_answered" : false,
    "view_count" : 55,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1756378879,
    "creation_date" : 1756378034,
    "link" : "https://stackoverflow.com/questions/79748953/mockitojunitrunner-dont-init-mocks-in-springboot",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140698336,
    "post_id" : 79748953,
    "body" : "You are using JUnit5, but the <code>@RunWith</code> is for JUnit4. You need to use the <code>@ExtendWith</code> and use the Mockito JUnit5 extension.",
    "score" : 1,
    "owner" : {
      "account_id" : 3192259,
      "reputation" : 126826,
      "user_id" : 2696260,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/qHEzx.png?s=256",
      "display_name" : "M. Deinum",
      "link" : "https://stackoverflow.com/users/2696260/m-deinum"
    },
    "creation_date" : 1756379781,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}