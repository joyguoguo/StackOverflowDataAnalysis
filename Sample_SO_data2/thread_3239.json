{
  "question" : {
    "question_id" : 79565657,
    "title" : "The PostgreSQL container is running fine with no errors, but the app still throws a “database does not exist” error",
    "body" : "<p>I’m currently developing a <strong>Java-based Library Management System (LMS)</strong> application. The tech stack includes <strong>Spring Boot</strong> for the backend, <strong>JavaFX</strong> for the frontend, <strong>JUnit</strong> for testing, and <strong>PostgreSQL</strong> as the database. The database is containerized using Docker with the following <code>docker-compose.yml</code> configuration:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>version: '3'\nservices:\n  postgres:\n    image: postgres:14.2\n    container_name: postgres\n    ports:\n      - &quot;5432:5432&quot;\n    environment:\n      - POSTGRES_USER=postgres\n      - POSTGRES_PASSWORD=password\n    volumes:\n      - ./src/main/resources/initial_data_generation.sql:/docker-entrypoint-initdb.d/init.sql\n</code></pre>\n<p>In it, the path to my database initialization file has already granted ownership of the database to the <code>postgres</code> user using a command (see the <a href=\"https://gist.github.com/PhDoanh/6571e216b4325b418ad29481d4d1d3e8\" rel=\"nofollow noreferrer\">file</a> for more details):</p>\n<pre class=\"lang-sql prettyprint-override\"><code>...\n\nCREATE DATABASE &quot;library-system-db&quot; WITH TEMPLATE = template0 ENCODING = 'UTF8' LOCALE = 'en_US.utf8';\n\nALTER DATABASE &quot;library-system-db&quot; OWNER TO postgres;\n\n\\connect -reuse-previous=on &quot;dbname='library-system-db'&quot;\n\n...\n</code></pre>\n<p>Additionally, the <code>application.properties</code> file is configured to connect to the database after the container is up:</p>\n<pre class=\"lang-none prettyprint-override\"><code>## Database connection\nspring.datasource.url=jdbc:postgresql://${DATABASE_HOST:localhost}:${DATABASE_PORT:5432}/${DATABASE_NAME:library-system-db}\nspring.datasource.username=${DATABASE_USERNAME:postgres}\nspring.datasource.password=${DATABASE_PASSWORD:password}\n\n# JPA Properties\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL10Dialect\n</code></pre>\n<p>After running <code>docker compose up -d</code>, I checked the logs and confirmed the container is running properly. I also accessed the container terminal to verify directly and saw that the database was created.</p>\n<p>However, when I run the application via the <code>main()</code> method, the build fails and throws the error:\n<strong><code>FATAL: database &quot;library-system-db&quot; does not exist</code></strong>\nYou can find more details in the attached <a href=\"https://github.com/user-attachments/files/19676989/console-logs.txt\" rel=\"nofollow noreferrer\">log file</a>. The log also suggests that a few other errors might be stemming from this root issue.</p>\n<p>I’d really appreciate any suggestions or fixes you might have to resolve this problem \uD83D\uDE4F</p>\n<p><em>P.S. The project I’m developing is based on the <a href=\"https://github.com/kwame-mintah/javafx-spring-boot-loan-application\" rel=\"nofollow noreferrer\">Github source code</a> on by <a href=\"https://github.com/kwame-mintah\" rel=\"nofollow noreferrer\">Kwame Mintah</a>. Let me know if you need any additional info!</em></p>\n",
    "tags" : [ "java", "spring", "postgresql", "spring-boot", "hibernate" ],
    "owner" : {
      "account_id" : 29120275,
      "reputation" : 95,
      "user_id" : 22307897,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34edc2a06bce1921c99e6a0142f32090?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "PhDoanh",
      "link" : "https://stackoverflow.com/users/22307897/phdoanh"
    },
    "is_answered" : false,
    "view_count" : 110,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1744267604,
    "creation_date" : 1744254890,
    "link" : "https://stackoverflow.com/questions/79565657/the-postgresql-container-is-running-fine-with-no-errors-but-the-app-still-throw",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79565709,
    "question_id" : 79565657,
    "body" : "<p>I think the DB is connected properly, and the error seems to be caused by the database not being found. Check whether the DB user you're logging in with has the proper permissions for that database. It looks like the error occurred because <code>postgres</code> doesn't have the necessary permissions.</p>\n<p>If that's really the cause, then grant the permissions using the command below.</p>\n<pre><code>GRANT ALL PRIVILEGES ON DATABASE &quot;library-system-db&quot; TO postgres;\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 41311183,
      "reputation" : 1,
      "user_id" : 30228934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/6aa517a9ca6d54eef9b2a32541690c99?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user30228934",
      "link" : "https://stackoverflow.com/users/30228934/user30228934"
    },
    "creation_date" : 1744258496,
    "last_activity_date" : 1744258496,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140319099,
    "post_id" : 79565657,
    "body" : "yes, it&#39;s matched.",
    "score" : 0,
    "owner" : {
      "account_id" : 29120275,
      "reputation" : 95,
      "user_id" : 22307897,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/34edc2a06bce1921c99e6a0142f32090?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "PhDoanh",
      "link" : "https://stackoverflow.com/users/22307897/phdoanh"
    },
    "creation_date" : 1744267659,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140318711,
    "post_id" : 79565657,
    "body" : "can you check if the database name is matching with springboot db name.  docker exec -it postgres psql -U postgres -c &#39;\\l&#39;",
    "score" : 0,
    "owner" : {
      "account_id" : 7645025,
      "reputation" : 440,
      "user_id" : 5795975,
      "user_type" : "registered",
      "profile_image" : "https://lh6.googleusercontent.com/-6KwPUS4RnyA/AAAAAAAAAAI/AAAAAAAAC8w/auZqreI45x0/s256-rj/photo.jpg",
      "display_name" : "Vijay",
      "link" : "https://stackoverflow.com/users/5795975/vijay"
    },
    "creation_date" : 1744256293,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79565709" : [ {
      "comment_id" : 140319058,
      "post_id" : 79565709,
      "body" : "In <code>docker-compose.yml</code>, the path to my database initialization file has already granted ownership of the database to the postgres user using a command (see the file for more details): <code>ALTER DATABASE &quot;library-system-db&quot; OWNER TO postgres;</code>",
      "score" : 0,
      "owner" : {
        "account_id" : 29120275,
        "reputation" : 95,
        "user_id" : 22307897,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/34edc2a06bce1921c99e6a0142f32090?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "PhDoanh",
        "link" : "https://stackoverflow.com/users/22307897/phdoanh"
      },
      "creation_date" : 1744266791,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}