{
  "question" : {
    "question_id" : 79824936,
    "title" : "Cannot make Apache Java Cassandra Driver talk to Azure Cosmos",
    "body" : "<p>I have an existing application which uses Apache Cassandra, and I am attempting to check its compatibility with Azure Cosmos DB for Apache Cassandra</p>\n<p>My application uses a recent 4.x version of the DataStax Java Driver for Cassandra (this has subsequently been adopted by Apache themselves).</p>\n<p>To eliminate my app from the equation, I took the sample from here and tried it - then updated it to the newest driver and tried again:</p>\n<p><a href=\"https://github.com/Azure-Samples/azure-cosmos-db-cassandra-java-getting-started-v4/tree/master\" rel=\"nofollow noreferrer\">https://github.com/Azure-Samples/azure-cosmos-db-cassandra-java-getting-started-v4/tree/master</a></p>\n<p>No matter what I do, this is the error I get:</p>\n<pre><code>com.datastax.oss.driver.internal.core.protocol.FrameDecodingException: Error decoding frame for streamId 21584\n        at com.datastax.oss.driver.internal.core.protocol.FrameDecoder.decode(FrameDecoder.java:108)\n        at io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:333)\n        at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n        at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n        at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n        at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1519)\n\n...\n\nCaused by: com.datastax.oss.driver.api.core.connection.FrameTooLongException: Adjusted frame length exceeds 268435456: 825110825 - discarded\n[s0] Error connecting to Node(endPoint=xxxx.documents.azure.com/xxx:443, hostId=null, hashCode=1e66f887), trying next node \n</code></pre>\n<p>Has anyone got Java code working against Cosmos using the Cassandra wire protocol?</p>\n",
    "tags" : [ "java", "azure", "cassandra" ],
    "owner" : {
      "account_id" : 47195,
      "reputation" : 1149,
      "user_id" : 139659,
      "user_type" : "registered",
      "accept_rate" : 87,
      "profile_image" : "https://www.gravatar.com/avatar/c8bf7d1dc923e8bb4aefe2bfe69bfb97?s=256&d=identicon&r=PG",
      "display_name" : "David North",
      "link" : "https://stackoverflow.com/users/139659/david-north"
    },
    "is_answered" : true,
    "view_count" : 72,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1763588803,
    "creation_date" : 1763587045,
    "link" : "https://stackoverflow.com/questions/79824936/cannot-make-apache-java-cassandra-driver-talk-to-azure-cosmos",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79824955,
    "question_id" : 79824936,
    "body" : "<p>As it turns out, Microsoft's own tutorial (at least the way I read it) tells you to do this to get your contact points:</p>\n<pre><code>az cosmosdb show --resource-group &quot;xxx&quot; --name &quot;yyyy&quot;  --query &quot;{username:name,contactPoint:documentEndpoint}&quot;\n</code></pre>\n<p>This produces:</p>\n<pre><code>{\n  &quot;contactPoint&quot;: &quot;https://yyyy.documents.azure.com:443/&quot;,\n  &quot;username&quot;: &quot;yyyy&quot;\n}\n</code></pre>\n<p>However, digging further into Microsoft's own tutorial confirms the port should be 10350 and the Azure Console (not the tutorial, anywhere!) says the hostname should be:</p>\n<p><code>yyyy.cassandra.cosmos.azure.com</code></p>\n<p>And then it all starts working.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 47195,
      "reputation" : 1149,
      "user_id" : 139659,
      "user_type" : "registered",
      "accept_rate" : 87,
      "profile_image" : "https://www.gravatar.com/avatar/c8bf7d1dc923e8bb4aefe2bfe69bfb97?s=256&d=identicon&r=PG",
      "display_name" : "David North",
      "link" : "https://stackoverflow.com/users/139659/david-north"
    },
    "creation_date" : 1763588803,
    "last_activity_date" : 1763588803,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}