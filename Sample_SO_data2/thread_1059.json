{
  "question" : {
    "question_id" : 79750630,
    "title" : "How can I compare a tree with different node types to a list of courses to see which courses have been completed and which haven&#39;t?",
    "body" : "<p>I'm working on a transcript analyzer personal project and I'm having an issue comparing the courses that are read in from the transcript with the required corses. The required courses are stored in a JSON file so when I read them in I read them in as a tree. I'll provide an example JSON of the core courses below:</p>\n<pre><code>{\n    &quot;CSCore&quot;: [\n        &quot;CS1073&quot;,\n        &quot;CS1083&quot;,\n        &quot;CS1103&quot;,\n        {&quot;exactlyOneOf&quot;: [&quot;CS1303&quot;, &quot;MATH2203&quot;]},\n        &quot;CS2043&quot;,\n        &quot;CS2253&quot;,\n        &quot;CS2263&quot;,\n        &quot;CS2333&quot;,\n        &quot;CS2383&quot;,\n        &quot;CS3383&quot;,\n        &quot;CS3413&quot;,\n        &quot;CS3853&quot;,\n        &quot;CS3873&quot;,\n        &quot;CS3997&quot;\n    ],\n\n    &quot;MathAndStatsCore&quot;: [\n        {&quot;exactlyOneOf&quot;: [&quot;MATH1003&quot;, &quot;MATH1053&quot;]},\n        {&quot;exactlyOneOf&quot;: [&quot;MATH1013&quot;, &quot;MATH1063&quot;]},\n        {&quot;exactlyOneOf&quot;: [&quot;MATH1503&quot;, &quot;MATH2213&quot;]},\n        {\n            &quot;atLeastOneOf&quot;: [\n                {\n                    &quot;allOf&quot;: [\n                        &quot;STAT2593&quot;,\n                        {\n                            &quot;atLeastOneOf&quot;: [\n                                &quot;CS3113&quot;,\n                                &quot;MATH2003&quot;,\n                                &quot;MATH2513&quot;,\n                                &quot;STAT4083&quot;\n                            ]\n                        }\n                    ]\n                },\n                {&quot;allOf&quot;: [&quot;STAT3083&quot;, &quot;STAT3093&quot;]}\n            ]\n        }\n    ]\n}\n</code></pre>\n<p>So, when I read this in, my tree has a Map&lt;String, Node&gt; instance variable called groups. This maps the name of the group (ex. CSCore) to the root node of the tree representing that list of requirements. The Nodes have a type, COURSE, ALL_OF, and CHOICE.</p>\n<p>When I read in a students transcript I have a Transcript object that contains a list of Term objects, each of which has a List of courses.</p>\n<p>What I am looking for from this post is to choose a data type. Whether that is a List, Map, any combination of those, or even just a new Object such as a DTO that's okay, I'm having trouble seeing how to parse the data in such a way that it will work with a TabLeColumn in JavaFX.</p>\n<p>Does anyone have any suggestions as to the datatype that I would return to my UI layer to be used as the data for the table? If you think there is a more efficient way to structure any of this I am open to that as well. Any suggestions or helpful hints or nudges in the right direction would be greatly appreciated.</p>\n<p>I still think what I've tried so far might work but I am having trouble wrapping my head around parsing the tree to fill out these objects. I have a DAO called GroupEvaluation. This object contains a boolean stating if the whole group has been satisfied, a List containing the course codes that are completed for that group, a List of course codes that are incomplete, and a List which contains the DAO ChoicePick which has a List containing the course codes of all the options and a String stating which choice the student made.</p>\n",
    "tags" : [ "java", "mvvm", "tree" ],
    "owner" : {
      "account_id" : 43711866,
      "reputation" : 3,
      "user_id" : 31379181,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dda96e22630430005ebc5c3af338517e?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ian Millican",
      "link" : "https://stackoverflow.com/users/31379181/ian-millican"
    },
    "is_answered" : true,
    "view_count" : 67,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1756506783,
    "creation_date" : 1756490314,
    "link" : "https://stackoverflow.com/questions/79750630/how-can-i-compare-a-tree-with-different-node-types-to-a-list-of-courses-to-see-w",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79750824,
    "question_id" : 79750630,
    "body" : "<p>The <em>concept</em> being represented by the example is a mathematical formula. Instead of the somewhat usual plus (<code>+</code>), minus (<code>-</code>), multiply (<code>*</code>) and divide (<code>/</code>), the 'operators' in this math are <code>XOR</code>, <code>AND</code> and <code>OR</code>.</p>\n<p>The representation used here obfuscates matters. This is what you really have, and it also shows how <code>allOf</code> feels like it has no purpose here. Because what's the difference between simply <code>&quot;CS1073&quot;, &quot;CS1083&quot;</code> and <code>allOf(CS1073, 1083)</code>?</p>\n<pre><code>MathAndStatsCore:\n  (MATH1003 ^ MATH1053) &amp;\n  (MATH1013 ^ MATH1063) &amp;\n  (MATH1503 ^ MATH2213) &amp; \n  (\n    (STAT2593 &amp; (CS3113 | MATH2003 | MATH2513 | STAT4083) |\n    (STAT3083 &amp; STAT3093)\n  )\n</code></pre>\n<p>The best way to represent such a thing is <em>with a tree</em>:</p>\n<pre><code>                                   AND\n                                /  / \\   \\\n                               /  /   \\   ------------------\\\n              ----------------/  /     ------------          \\\n            /                   /                  \\          \\\n           XOR                 XOR                XOR         |\n        /     \\               /  \\                /  \\        |\n  MATH1003   MATH1053  MATH1013  MATH1063  MATH1503  MATH2213 |\n                                                              /\n                                        ---------------------/\n                                       /\n                                      OR\n                              /------/   \\-------\\\n                           AND                   AND\n                /---------/   \\                  /  \\\n              OR               STAT2593     STAT3083 STAT3093\n      /----/ / \\  \\-----\\\n     /      /   \\        \\\nCS3113 MATH2003 MATH2513 STAT4083\n</code></pre>\n<p>Modelling that in java:</p>\n<pre><code>sealed interface CurriculumRequirementNode {\n  boolean valid(List&lt;String&gt; courses);\n}\n\npublic class CurriculumAnd implements CurriculumRequirementNode {\n  List&lt;CurriculumRequirementNode&gt; allRequired;\n\n  @Override public boolean valid(List&lt;String&gt; courses) {\n    return allRequired.stream().allMatch(v -&gt; v.valid(courses));\n  }\n}\n\npublic class CurriculumOr implements CurriculumRequirementNode {\n  List&lt;CurriculumRequirementNode&gt; anyRequired;\n\n  @Override public boolean valid(List&lt;String&gt; courses) {\n    return anyRequired.stream().anyMatch(v -&gt; v.valid(courses));\n  }\n}\n\npublic class CurriculumXor implements CurriculumRequirementNode {\n  List&lt;CurriculumRequirementNode&gt; exactlyOneRequired;\n\n  @Override public boolean valid(List&lt;String&gt; courses) {\n    return exactlyOneRequired.stream().filter(v -&gt; v.valid(courses)).count() == 1;\n  }\n}\n\npublic class CurriculumCourse implements CurriculumRequirementNode {\n  String courseId;\n\n  @Override public boolean valid(List&lt;String&gt; courses) {\n    return courses.contains(this);\n  }\n}\n</code></pre>\n<p>You'd then create this tree, ending up with a 'root' node of type <code>CurriculumAnd</code>. You can simply invoke <code>valid(List.of(&quot;MATH1002&quot;, &quot;list of all courses taken by a student&quot;))</code> and out rolls a boolean indicating whether the requirements are met or not.</p>\n<p>The above example needs fleshing out; I'm just guessing that <code>CurriculumRequirement</code> is a good name, for example. These classes need constructors and possibly equals and hashCode implementations (or use lombok's <a href=\"https://projectlombok.org/featurs/Value\" rel=\"nofollow noreferrer\"><code>@Value</code></a>, or try to make these records though I'm not sure it's a good fit here).</p>\n<p>Note how functionality that exists fundamentally at each level of this tree is now <em>at</em> the type the objects <em>are</em> which is how OO is supposed to work, and all is abstracted; generally you don't need to know what kind of requirement node you have. It's just a node. Any node. They all have a <code>valid(List&lt;String&gt; courses)</code> method.</p>\n<p>Somebody managed to write some code to take a tree structure and smush it into a somewhat ugly JSON version of it (a string containing the 'formula', such as <code>MATH1003 ^ MATH1053</code> would have been vastly superior and simpler). You'd do the same thing in reverse: Write code that accepts a JSON file and spits out a CurriculumRequirementNode. At no point should there be a <code>HashMap</code> of any kind. Yes, JSON objects are hashmaps, but the structure of the JSON must not determine the structure of this data in your java code.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1756506783,
    "last_activity_date" : 1756506783,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140702665,
    "post_id" : 79750630,
    "body" : "generally speaking java is nominal and you should embrace that. The types of things should describe what they are and be as specific to its type as possible. <code>CS1073</code> is not really a <code>Node</code>. It&#39;s a <code>Course</code> or a <code>CourseCode</code>. Hence once you decide to store it as a <code>Map&lt;String, Node&gt;</code> you&#39;ve already lost. There is no &#39;nice design&#39; once you&#39;ve gone down that road.",
    "score" : 1,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1756498882,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140702663,
    "post_id" : 79750630,
    "body" : "You&#39;re making a semantic error here. The JSON is merely modelling some underlying concept (some sort of curriculum thing). It&#39;s merely one way to do it. You are now asking &#39;.. and how do I model <i>this JSON</i> in java&#39; and there are no satisfactory answers there. But you&#39;re doing it wrong. You should be modelling the underlying curriculum <i>in java</i>. You should be having classes named <code>Course</code>, for example. Model it like <i>that</i>, and also write some code that maps the JSON onto this java model. Look into demarshallers like <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">jackson</a>, which make that easy.",
    "score" : 0,
    "owner" : {
      "account_id" : 401843,
      "reputation" : 107206,
      "user_id" : 768644,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/b13bedc5215730fbce5edff6c130988a?s=256&d=identicon&r=PG",
      "display_name" : "rzwitserloot",
      "link" : "https://stackoverflow.com/users/768644/rzwitserloot"
    },
    "creation_date" : 1756498801,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}