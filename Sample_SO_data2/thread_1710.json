{
  "question" : {
    "question_id" : 79686317,
    "title" : "Error ODataError when creating msgraph subscription via msgraph java api",
    "body" : "<p>In our java springboot app we use the following dependency: <a href=\"https://mvnrepository.com/artifact/com.microsoft.graph/microsoft-graph/5.72.0\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.graph/microsoft-graph/5.72.0</a></p>\n<p>When we try to create eventhub subscription for meeting room via that API we are getting error:</p>\n<pre><code>com.microsoft.graph.http.GraphServiceException: Error code: ExtensionError\nError message: Operation: Create; Exception: [Status Code: BadRequest; \nReason: The value 'https://outlook.office365.com/api/v2.0/Users('Room_Sandbox%40company.com')/Events'of parameter 'Resource' is invalid.]\n\nPOST[https://graph.microsoft.com/v1.0/subscriptions\\nSdkVersion] : graph-java/v5.72.0\nSdkVersion : graph-java/v5.72.0\n[...]\n</code></pre>\n<p><code>Room_Sandbox%40company.com</code> - I changed this here intentionally, in the original response there is a different email.</p>\n<p>But the error is only for particular emails, not for all. Other emails work fine.</p>\n<p>We've tried to update to the newest dependencies related to this api but till getting the same error.</p>\n<p>UPD:</p>\n<pre><code>com.microsoft.graph.models.odataerrors.ODataError: Operation: Create; Exception: [Status Code: BadRequest; Reason: The value 'https://outlook.office365.com/api/v2.0/Users('Room_Sandbox%40company.com')/Events' of parameter 'Resource' is invalid.]\nat com.microsoft.graph.models.odataerrors.ODataError.createFromDiscriminatorValue(ODataError.java:36)\nat com.microsoft.kiota.serialization.JsonParseNode.getObjectValue(JsonParseNode.java:212)\nat com.microsoft.kiota.http.OkHttpRequestAdapter.lambda$throwIfFailedResponse$0(OkHttpRequestAdapter.java:704)\nat com.microsoft.kiota.ApiExceptionBuilder.&lt;init&gt;(ApiExceptionBuilder.java:26)\nat com.microsoft.kiota.http.OkHttpRequestAdapter.throwIfFailedResponse(OkHttpRequestAdapter.java:703)\nat com.microsoft.kiota.http.OkHttpRequestAdapter.send(OkHttpRequestAdapter.java:307)\nat com.microsoft.graph.subscriptions.SubscriptionsRequestBuilder.post(SubscriptionsRequestBuilder.java:100)\nat com.microsoft.graph.subscriptions.SubscriptionsRequestBuilder.post(SubscriptionsRequestBuilder.java:84)\n</code></pre>\n",
    "tags" : [ "java", "microsoft-graph-api" ],
    "owner" : {
      "account_id" : 18072610,
      "reputation" : 1,
      "user_id" : 13136859,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GipqKW8w5YYzcq3PEiuRRPpLpmkR7FySAVwSaGW=k-s256",
      "display_name" : "Dave Bottomhell",
      "link" : "https://stackoverflow.com/users/13136859/dave-bottomhell"
    },
    "is_answered" : false,
    "view_count" : 102,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752144123,
    "creation_date" : 1751385354,
    "link" : "https://stackoverflow.com/questions/79686317/error-odataerror-when-creating-msgraph-subscription-via-msgraph-java-api",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79696918,
    "question_id" : 79686317,
    "body" : "<p>The issue was related to the permissions of rooms and the service account that is used in the MS Graph API. However, the error message is confusing because it refers to invalid parameters and &quot;ErrorItemNotFound.&quot; It would be better to receive a message about permission issues.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 18072610,
      "reputation" : 1,
      "user_id" : 13136859,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GipqKW8w5YYzcq3PEiuRRPpLpmkR7FySAVwSaGW=k-s256",
      "display_name" : "Dave Bottomhell",
      "link" : "https://stackoverflow.com/users/13136859/dave-bottomhell"
    },
    "creation_date" : 1752144123,
    "last_activity_date" : 1752144123,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140573065,
    "post_id" : 79686317,
    "body" : "@DaveBottomhell Thanks for this feedback Dave. I will escalate and see if there is an improvement that can be done on the error messaging.  Please move your comment to the answer section for the benefit of the rest of the community. Thanks in advance",
    "score" : 0,
    "owner" : {
      "account_id" : 11476735,
      "reputation" : 124,
      "user_id" : 8412052,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/cd84572b9de146e154978debf7cde294?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Milgo",
      "link" : "https://stackoverflow.com/users/8412052/milgo"
    },
    "creation_date" : 1751967598,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140562712,
    "post_id" : 79686317,
    "body" : "SOLVED! The issue was related to the permissions of rooms and the service account that is used in the MS Graph API. However, the error message is confusing because it refers to invalid parameters and &quot;ErrorItemNotFound.&quot; It would be better to receive a message about permission issues.",
    "score" : 0,
    "owner" : {
      "account_id" : 18072610,
      "reputation" : 1,
      "user_id" : 13136859,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GipqKW8w5YYzcq3PEiuRRPpLpmkR7FySAVwSaGW=k-s256",
      "display_name" : "Dave Bottomhell",
      "link" : "https://stackoverflow.com/users/13136859/dave-bottomhell"
    },
    "creation_date" : 1751559244,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140559317,
    "post_id" : 79686317,
    "body" : "Please include the code you&#39;re using to make the call. The error alone is not super helpful.",
    "score" : 0,
    "owner" : {
      "account_id" : 36947,
      "reputation" : 33437,
      "user_id" : 105518,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f1e47ca9372faad8084cbaf9f90c6a75?s=256&d=identicon&r=PG",
      "display_name" : "Marc LaFleur",
      "link" : "https://stackoverflow.com/users/105518/marc-lafleur"
    },
    "creation_date" : 1751474435,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}