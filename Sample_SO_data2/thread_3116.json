{
  "question" : {
    "question_id" : 79572882,
    "title" : "How to rollback Neo4j transaction outside a Session",
    "body" : "<p>I have a Java application that connects to Neo4j. I want to test the rollback ability for my project, so I have created a sample code.\nFirst, I am opening a session, perform a write transaction and commit it.\nAfter the session gets closed, I need to rollback my previous transaction (outside the session)</p>\n<pre><code>public class Neo4jTransactionExample {\n  public void main() {\n      createPersonsWithReference();\n      rollback();\n  }\n  public void createPersonsWithReference() {\n      try (Session session = driver.session()) {\n          session.writeTransaction(tx -&gt; {\n              tx.run(&quot;CREATE (a:Person {name: 'Alice'})&quot;);\n              tx.run(&quot;CREATE (b:Person {name: 'Bob'})&quot;);\n              tx.run(&quot;MATCH (a:Person {name: 'Alice'}), (b:Person {name: 'Bob'}) CREATE (b)-[:KNOWS]-&gt;(a)&quot;);\n              return null;\n          });\n      }\n  }\n\n  public void rollback() {\n  \n  }\n}\n</code></pre>\n<p>How do I perform rollback after the session gets closed?</p>\n",
    "tags" : [ "java", "neo4j" ],
    "owner" : {
      "account_id" : 5448022,
      "reputation" : 1232,
      "user_id" : 4333846,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/74ae80b9e04de579919599c45d9a1726?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Harish R",
      "link" : "https://stackoverflow.com/users/4333846/harish-r"
    },
    "is_answered" : true,
    "view_count" : 59,
    "answer_count" : 2,
    "score" : 0,
    "last_activity_date" : 1744706717,
    "creation_date" : 1744625487,
    "link" : "https://stackoverflow.com/questions/79572882/how-to-rollback-neo4j-transaction-outside-a-session",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79573653,
    "question_id" : 79572882,
    "body" : "<p>Transactions created in a session are confined to that session, so you cannot rollback a transaction from outside that session.</p>\n<p>Also, even within a session, you cannot rollback a transaction after it is committed (or rolled back).  <a href=\"https://neo4j.com/docs/api/java-driver/current/org.neo4j.driver/org/neo4j/driver/Session.html#writeTransaction(org.neo4j.driver.TransactionWork)\" rel=\"nofollow noreferrer\">writeTransaction</a> creates and commits/rolls-back a transaction for you.</p>\n",
    "score" : 2,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 947871,
      "reputation" : 67304,
      "user_id" : 974731,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/oTDhd4cA.jpg?s=256",
      "display_name" : "cybersam",
      "link" : "https://stackoverflow.com/users/974731/cybersam"
    },
    "creation_date" : 1744649151,
    "last_activity_date" : 1744652264,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79574716,
    "question_id" : 79572882,
    "body" : "<p>Yes, once it's committed, it's committed. That's really the point of commit.<br />\nIf you need to do this, then you're doing the rollback at the business level (which is a valid use case). You would need to write the inverse Cypher in its own transaction to undo the first commit. I.e. Delete the relationship and the two nodes you created in the first transaction.<br />\nHave a look at this article <a href=\"https://en.wikipedia.org/wiki/ACID\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/ACID</a> which should help you understand the principles of how transactions in an ACID database, like Neo4j, work.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 7697393,
      "reputation" : 495,
      "user_id" : 5831358,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/dd251a68f65da8a7fdca3c333475a426?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Marj",
      "link" : "https://stackoverflow.com/users/5831358/marj"
    },
    "creation_date" : 1744706717,
    "last_activity_date" : 1744706717,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}