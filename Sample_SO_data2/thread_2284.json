{
  "question" : {
    "question_id" : 79635488,
    "title" : "Return DTO or Model? I have learned to return the DTO but in we return the model in the project I am currently working on",
    "body" : "<p>I'm a junior developer and started my first job as a developer and have a question regarding DTO and Model.</p>\n<p>Consider this code snippet</p>\n<pre><code>@Override\n    public ResponseEntity&lt;List&lt;PostalCodeLocationModel&gt;&gt; findPostcalCodeLocationPairs(final PostalCodeLocationSearchModel model) {\n        final String postalCode= model.getPostalCode();\n        final String location = model.getLocation();\n\n        final List&lt;PostalCodeLocationModel&gt; listOfPostalCodeLocationPairs = service.findPostalCodeLocationPairs(plz, ort).stream()\n                .map(mapper::dtoToModel)\n                .toList();\n\n        return ResponseEntity.ok(listOfPostalCodeLocationPairs);\n    }\n</code></pre>\n<p>Or</p>\n<pre><code>@Override\n    public ResponseEntity&lt;UserReadModel&gt; getUserData(final String name) {\n        UserDTO dto = service.getUser(user);\n        UserReadModel iserReadModel = mapper.dtoToModel(dto);\n        return ResponseEntity.ok(userReadModel);\n    }\n</code></pre>\n<p>A similar approach is used in the project I am working on.\nI am a bit confused because what I have learned is, that in this layer where the Controller is, always map to DTO in the end and send the DTO but here, the service is returning a DTO which is then mapped to the model and return.\nIs this approach correct?</p>\n<p>I always did like that in the past and one of my old projects:</p>\n<pre><code>@ApiOperation(value = &quot;Get Enterprises within Radius&quot;, notes = &quot;Retrieves enterprises within the given radius from a geographical point&quot;)\n    @GetMapping(&quot;/within-radius&quot;)\n    public ResponseEntity&lt;List&lt;EnterpriseDto&gt;&gt; getObjectsWithinRadius(@RequestParam double lat, @RequestParam double lng, @RequestParam double radius) {\n        List&lt;Enterprise&gt; enterprises = enterpriseService.getEnterprisesWithinRadius(lat, lng, radius);\n        List&lt;EnterpriseDto&gt; enterpriseDtos = enterpriseMapper.toDtos(enterprises);\n        return new ResponseEntity&lt;&gt;(enterpriseDtos, HttpStatus.OK);\n    }\n</code></pre>\n<p>Here I use the service with the parameters and get back an Enterprise object and map it to a DTO which I will return.</p>\n",
    "tags" : [ "java", "spring", "spring-boot", "model", "dto" ],
    "owner" : {
      "account_id" : 16860055,
      "reputation" : 1124,
      "user_id" : 12191075,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/udxuQ.jpg?s=256",
      "display_name" : "Haidepzai",
      "link" : "https://stackoverflow.com/users/12191075/haidepzai"
    },
    "is_answered" : true,
    "view_count" : 255,
    "answer_count" : 4,
    "score" : 0,
    "last_activity_date" : 1748278907,
    "creation_date" : 1748002735,
    "link" : "https://stackoverflow.com/questions/79635488/return-dto-or-model-i-have-learned-to-return-the-dto-but-in-we-return-the-model",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79639334,
    "question_id" : 79635488,
    "body" : "<p>In a typical multi-layered application, the <strong>Model</strong> usually refers to the database entity (a class that is directly mapped to a table in the database). On the other hand, a <strong>DTO (Data Transfer Object)</strong> is used to transfer data between layers of the application, particularly when you want to decouple internal models from external representations.</p>\n<p>However, some companies may not strictly follow this naming convention. For example, they might suffix their database entities with &quot;DTO&quot; or refer to DTOs as &quot;models.&quot; While this isn't necessarily a bad practice, it can lead to confusion, especially for junior developers who are trying to understand the architecture.</p>\n<h3>Typical Flow in a Multi-Layered Application:</h3>\n<ol>\n<li><p><strong>View (Frontend):</strong><br />\nSends user input and requests to the backend.</p>\n</li>\n<li><p><strong>Controller:</strong><br />\nReceives data from the frontend and forwards it to the service layer. It may also handle some light aggregation or orchestration logic.</p>\n</li>\n<li><p><strong>Service Layer:</strong><br />\nFetches entities from the DAO, performs business logic, and maps entities to DTOs (if needed).</p>\n</li>\n<li><p><strong>DAO (Data Access Object):</strong><br />\nHandles CRUD operations and returns entities from the database.</p>\n</li>\n<li><p><strong>Backflow:</strong></p>\n<ul>\n<li><p>DAO returns entities to the Service layer.</p>\n</li>\n<li><p>Service processes data, applies business logic, and returns a DTO to the Controller.</p>\n</li>\n<li><p>Controller sends the processed data back to the View (frontend).</p>\n</li>\n</ul>\n</li>\n</ol>\n<p>In some projects, DTO mapping may also occur at the controller level. This depends on the architectural design and project requirements. However, directly exposing database entities to the frontend is generally discouraged. Instead, entities should be converted to DTOs that only include the required fields. This ensures encapsulation, enhances security, and prevents unnecessary data exposure from the database schema.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16860149,
      "reputation" : 181,
      "user_id" : 12191150,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fec9a6154254eb5fd901f4a0045c0b1f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Yasin Ahmed",
      "link" : "https://stackoverflow.com/users/12191150/yasin-ahmed"
    },
    "creation_date" : 1748278907,
    "last_activity_date" : 1748278907,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79636034,
    "question_id" : 79635488,
    "body" : "<p>The purpose of DTO is that your controller returns an object in your API that is separate from your core entities.</p>\n<p>If you have a core entity called Transaction that contains an object of type Currency, it is a bad practice to return Transaction and leak to the outside that your transaction has a type Currency in it, instead you create a DTO and in the DTO format the currency to a String, this way your entities preserved and hidden from what your controller returns. Now your API and core entities can change independently without breaking each other.</p>\n<p>The correct order is that services will return model entities, and in your controller, they are mapped to a DTO.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 11325238,
      "reputation" : 21,
      "user_id" : 8304385,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/UD2HAMtE.jpg?s=256",
      "display_name" : "Arivan Amin",
      "link" : "https://stackoverflow.com/users/8304385/arivan-amin"
    },
    "creation_date" : 1748024744,
    "last_activity_date" : 1748024744,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79638301,
    "question_id" : 79635488,
    "body" : "<p>Basic points to consider while designing Model and DTO,</p>\n<ol>\n<li><strong>Entity</strong> (Model)</li>\n</ol>\n<ul>\n<li><p>Represents a database table (JPA @Entity).</p>\n</li>\n<li><p>Should only exist in the persistence/data layer.</p>\n</li>\n<li><p>Example: User, Enterprise</p>\n</li>\n</ul>\n<ol start=\"2\">\n<li><strong>DTO</strong> (Data Transfer Object)</li>\n</ol>\n<ul>\n<li><p>Used to transfer data between layers or as a response payload.</p>\n</li>\n<li><p>Exists in the API/controller layer.</p>\n</li>\n<li><p>Example: UserDto, EnterpriseDto, UserReadModel, etc.</p>\n</li>\n</ul>\n<ol start=\"3\">\n<li><strong>Service</strong> Layer</li>\n</ol>\n<ul>\n<li><p>Does the business logic and talks to repositories.</p>\n</li>\n<li><p>Should ideally work with Entities/Models and maybe some internal DTOs.</p>\n</li>\n<li><p>Should not know about UserReadModel or PostalCodeLocationModel if they are meant only for the controller.</p>\n</li>\n</ul>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 17043956,
      "reputation" : 1138,
      "user_id" : 12331220,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/5S9Wo.gif?s=256",
      "display_name" : "Anupam Haldkar",
      "link" : "https://stackoverflow.com/users/12331220/anupam-haldkar"
    },
    "creation_date" : 1748233226,
    "last_activity_date" : 1748233226,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "answer_id" : 79638421,
    "question_id" : 79635488,
    "body" : "<p>Returning <strong>DTOs</strong> is preferred because of below points:</p>\n<ul>\n<li><p>You can hide sensitive fields (e.g., passwords, internal IDs).</p>\n</li>\n<li><p>Prevent exposing your full internal data model (which can change over time).</p>\n</li>\n<li><p>Return only the data needed by the client — not large unused fields like blobs.</p>\n</li>\n<li><p>You can tailor the DTO to the frontend's needs (nested objects, flattened data, computed fields).</p>\n</li>\n<li><p>Entities might have lazily loaded relationships (@OneToMany, etc.), which cause exceptions when serialized.</p>\n</li>\n<li><p>your persistence layer (entities) from being tightly coupled with the API layer.</p>\n</li>\n</ul>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 16891024,
      "reputation" : 1,
      "user_id" : 12214727,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d6eff8772d7b7e7eb837a56492395258?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Spriha",
      "link" : "https://stackoverflow.com/users/12214727/spriha"
    },
    "creation_date" : 1748241370,
    "last_activity_date" : 1748241370,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140453862,
    "post_id" : 79635488,
    "body" : "The question is hard to answer because the term &quot;Model&quot; can refer to either an Entity in the database or a DTO — it depends on the person. The main idea is that it&#39;s good practice to divide logic into layers; simply put: controller → service → repository. The controller should not use entities (should not know about them), and should operate with DTOs instead. To gain more info about it - there are thousands of resources/articles on the internet about this",
    "score" : 1,
    "owner" : {
      "account_id" : 18586978,
      "reputation" : 3850,
      "user_id" : 15000097,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/yFl4M.jpg?s=256",
      "display_name" : "Georgii Lvov",
      "link" : "https://stackoverflow.com/users/15000097/georgii-lvov"
    },
    "creation_date" : 1748027511,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140452768,
    "post_id" : 79635488,
    "body" : "What happens underneath, in the <code>service.</code> methods? Is it the case of duplicate conversion, e.g. UserReadModel -&gt; UserDTO -&gt; UserReadModel?",
    "score" : 0,
    "owner" : {
      "account_id" : 445785,
      "reputation" : 10820,
      "user_id" : 838434,
      "user_type" : "registered",
      "accept_rate" : 88,
      "profile_image" : "https://www.gravatar.com/avatar/97c79a86e18f896a29e81f47c98aee1b?s=256&d=identicon&r=PG",
      "display_name" : "MaDa",
      "link" : "https://stackoverflow.com/users/838434/mada"
    },
    "creation_date" : 1748005594,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}