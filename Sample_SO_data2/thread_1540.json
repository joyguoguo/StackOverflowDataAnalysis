{
  "question" : {
    "question_id" : 79700509,
    "title" : "Black screen when using GL3 (OpenGL) with Maven and JOGL",
    "body" : "<p>I am trying to begin working with OpenGL by drawing a quad with the simplest of shaders, but when using GL3 capabilities, I just get a black screen. I wasn't able to really debug this because (a) I don't understand much yet, and (b) I have tried to ask various LLMs, but I think the problem is too specific.</p>\n<p>I'm running Windows 10 (Java 17), and have an NVIDIA GeForce RTX 3060 running NVIDIA Studio Driver 576.</p>\n<p>I'll post the code here, but for the ease of viewing, here is the repo: <a href=\"https://github.com/MikhailDolgopolov/OpenGL-VoronoiTerrain\" rel=\"nofollow noreferrer\">https://github.com/MikhailDolgopolov/OpenGL-VoronoiTerrain</a></p>\n<p>(I'm using GLJPanel, because with GLCanvas it just can't detect my graphics configuration)</p>\n<p>When using DebugGL, it seems to only show warnings and no errors, so I'm completely clueless about what sort of thing can even be the root cause. I was able to see a simple triangle using GL2, but no progress on shaders in GL3.</p>\n<pre><code>package com.galeon;\n\nimport com.jogamp.opengl.*;\nimport com.jogamp.opengl.awt.GLJPanel;\nimport com.jogamp.opengl.util.FPSAnimator;\n\nimport javax.swing.JFrame;\nimport java.awt.EventQueue;\n\npublic interface SceneRenderer extends GLEventListener  {\n    void init(GLAutoDrawable drawable);\n    void display(GLAutoDrawable drawable);\n    void reshape(GLAutoDrawable drawable, int x, int y, int w, int h);\n    void dispose(GLAutoDrawable drawable);\n}\n\npublic class WindowDrawer implements GLEventListener {\n    private final SceneRenderer renderer;\n\n    public WindowDrawer(SceneRenderer renderer) {\n        this.renderer = renderer;\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            GLProfile.initSingleton();\n            GLProfile profile = GLProfile.get(GLProfile.GL3);\n            GLCapabilities caps = new GLCapabilities(profile);\n\n            GLJPanel canvas = new GLJPanel(caps);\n            WindowDrawer dw = new WindowDrawer(new SimpleQuadRenderer());\n            canvas.addGLEventListener(dw);\n\n            FPSAnimator animator = new FPSAnimator(canvas, 1, true);\n            animator.start();\n\n            JFrame frame = new JFrame(&quot;Red Quad Test&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.getContentPane().add(canvas);\n            frame.setSize(800, 600);\n            frame.setVisible(true);\n        });\n    }\n\n    @Override public void init(GLAutoDrawable drawable) {\n        renderer.init(drawable);\n    }\n    @Override public void display(GLAutoDrawable drawable) {\n        renderer.display(drawable);\n    }\n    @Override public void reshape(GLAutoDrawable drawable, int x, int y, int w, int h) {\n        renderer.reshape(drawable, x, y, w, h);\n    }\n    @Override public void dispose(GLAutoDrawable drawable) {\n        renderer.dispose(drawable);\n    }\n}\n</code></pre>\n<pre><code>package com.galeon;\n\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\nimport com.jogamp.opengl.GL;\nimport com.jogamp.opengl.GL3;\n\npublic class ShaderLoader {\n\n    private final int programId;\n    private final int vertexShaderId;\n    private final int fragmentShaderId;\n\n    public ShaderLoader(GL3 gl, String vertPath, String fragPath) {\n        programId = gl.glCreateProgram();\n        vertexShaderId=compileAndAttach(gl, vertPath, GL3.GL_VERTEX_SHADER);\n        fragmentShaderId=compileAndAttach(gl, fragPath, GL3.GL_FRAGMENT_SHADER);\n        linkProgram(gl);\n    }\n\n    private int compileAndAttach(GL3 gl, String path, int type) {\n        String src = readFile(path);\n        int shaderId = gl.glCreateShader(type);\n        gl.glShaderSource(shaderId, 1, new String[]{src}, null);\n        gl.glCompileShader(shaderId);\n\n        int[] status = new int[1];\n        gl.glGetShaderiv(shaderId, GL3.GL_COMPILE_STATUS, status, 0);\n        System.out.println(&quot;  compile status = &quot; + status[0]);\n        if (status[0] == GL.GL_FALSE) {\n            int[] len = new int[1];\n            gl.glGetShaderiv(shaderId, GL3.GL_INFO_LOG_LENGTH, len, 0);\n            byte[] buf = new byte[len[0]];\n            gl.glGetShaderInfoLog(shaderId, buf.length, null, 0, buf, 0);\n            System.err.println(&quot;&gt;&gt;&gt; SHADER INFO LOG:\\n&quot; + new String(buf));\n        }\n        gl.glAttachShader(programId, shaderId);\n        return shaderId;\n    }\n\n    private void linkProgram(GL3 gl) {\n        gl.glLinkProgram(programId);\n\n        int[] status = new int[1];\n        gl.glGetProgramiv(programId, GL3.GL_LINK_STATUS, status, 0);\n        System.out.println(&quot;  link status = &quot; + status[0]);\n        if (status[0] == GL.GL_FALSE) {\n            int[] len = new int[1];\n            gl.glGetProgramiv(programId, GL3.GL_INFO_LOG_LENGTH, len, 0);\n            byte[] buf = new byte[len[0]];\n            gl.glGetProgramInfoLog(programId, buf.length, null, 0, buf, 0);\n            System.err.println(&quot;&gt;&gt;&gt; PROGRAM INFO LOG:\\n&quot; + new String(buf));\n        }\n\n        gl.glValidateProgram(programId);\n    }\n\n    private String readFile(String path) {\n        try (BufferedReader br = new BufferedReader(new FileReader(path))) {\n            StringBuilder sb = new StringBuilder();\n            String line;\n            while ((line = br.readLine()) != null) sb.append(line).append(&quot;\\n&quot;);\n            return sb.toString();\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Unable to read shader file: &quot; + path, e);\n        }\n    }\n\n    public int getProgramId() {\n        return programId;\n    }\n\n    public int getVertexShaderId() { return vertexShaderId; }\n    public int getFragmentShaderId() { return fragmentShaderId; }\n}\n</code></pre>\n<pre><code>package com.galeon;\n\nimport com.jogamp.common.nio.Buffers;\nimport com.jogamp.opengl.*;\nimport java.nio.FloatBuffer;\n\npublic class SimpleQuadRenderer implements SceneRenderer {\n    private int programId, vao, vbo;\n\n    @Override\n    public void init(GLAutoDrawable drawable) {\n        GL3 gl = drawable.getGL().getGL3();\n\n        // compile &amp; link\n        ShaderLoader loader = new ShaderLoader(\n            gl,\n            &quot;src/main/shaders/vertex_simple.glsl&quot;,\n            &quot;src/main/shaders/fragment_simple.glsl&quot;\n        );\n        programId = loader.getProgramId();\n\n        // quad coords\n        float s = 0.5f;\n        float[] quad = {\n            -s,-s,  s,-s,  -s, s,\n            -s, s,  s,-s,   s, s\n        };\n        FloatBuffer fb = Buffers.newDirectFloatBuffer(quad);\n\n        // VAO\n        int[] tmp = new int[1];\n        gl.glGenVertexArrays(1, tmp, 0);\n        vao = tmp[0];\n        gl.glBindVertexArray(vao);\n\n        // VBO\n        gl.glGenBuffers(1, tmp, 0);\n        vbo = tmp[0];\n        gl.glBindBuffer(GL.GL_ARRAY_BUFFER, vbo);\n        gl.glBufferData(GL.GL_ARRAY_BUFFER, quad.length * Float.BYTES, fb, GL.GL_STATIC_DRAW);\n\n        // attribute 0 â‡’ vec2 position\n        gl.glVertexAttribPointer(0, 2, GL.GL_FLOAT, false, 0, 0);\n        gl.glEnableVertexAttribArray(0);\n\n        // unbind\n        gl.glBindBuffer(GL.GL_ARRAY_BUFFER, 0);\n        gl.glBindVertexArray(0);\n    }\n\n    @Override\n    public void display(GLAutoDrawable drawable) {\n        GL3 gl = drawable.getGL().getGL3();\n\n        gl.glClearColor(0f, 0.5f, 0f, 1f);\n        gl.glClear(GL.GL_COLOR_BUFFER_BIT);\n\n        gl.glUseProgram(programId);\n        gl.glBindVertexArray(vao);\n        gl.glDrawArrays(GL.GL_TRIANGLES, 0, 6);\n        gl.glBindVertexArray(0);\n\n        int e = gl.glGetError();\n        if (e != GL.GL_NO_ERROR) {\n            System.err.println(&quot;GL Error: 0x&quot; + Integer.toHexString(e));\n        }\n    }\n\n    @Override public void reshape(GLAutoDrawable d, int x, int y, int w, int h) {\n        d.getGL().getGL3().glViewport(0, 0, w, h);\n    }\n    @Override public void dispose(GLAutoDrawable d) {\n        GL3 gl = d.getGL().getGL3();\n        gl.glDeleteProgram(programId);\n        gl.glDeleteBuffers(1, new int[]{vbo}, 0);\n        gl.glDeleteVertexArrays(1, new int[]{vao}, 0);\n    }\n}\n</code></pre>\n<p><em>fragment_simple.glsl:</em></p>\n<pre><code>#version 330 core\nlayout(location = 0) out vec4 FragColor;\n\nvoid main() {\n    FragColor = vec4(1.0, 0.0, 0.0, 1.0);  // solid red\n}\n</code></pre>\n<p><em>vertex_simple.glsl:</em></p>\n<pre><code>#version 330 core\nlayout(location = 0) in vec2 position;\n\nvoid main() {\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n</code></pre>\n<p>The solution may be extremely obvious, but I'm just lost after staring at these 5 files for a day or two with no progress.</p>\n",
    "tags" : [ "java", "maven", "opengl", "shader", "jogl" ],
    "owner" : {
      "account_id" : 19392918,
      "reputation" : 21,
      "user_id" : 14181170,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/-BU8J1xAE9CQ/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmPQJGzZGfxx1iLnmBg6Hk2DkjKog/s256-rj/photo.jpg",
      "display_name" : "Mikhail Dolgopolov",
      "link" : "https://stackoverflow.com/users/14181170/mikhail-dolgopolov"
    },
    "is_answered" : true,
    "view_count" : 106,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1752507341,
    "creation_date" : 1752475421,
    "link" : "https://stackoverflow.com/questions/79700509/black-screen-when-using-gl3-opengl-with-maven-and-jogl",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79701091,
    "question_id" : 79700509,
    "body" : "<p><code>GLJPanel</code> is provided for compatibility with Swing as per <a href=\"https://jogamp.org/deployment/v2.3.2/javadoc/jogl/javadoc/com/jogamp/opengl/awt/GLJPanel.html\" rel=\"nofollow noreferrer\">Javadoc</a>. Try using <code>GLWindow</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//GLJPanel canvas = new GLJPanel(caps);\nGLWindow window = GLWindow.create(caps);\n\n// replace JFrame with the window\nwindow.setTitle(&quot;Red Quad Test&quot;);\nwindow.setSize(800, 600);\nwindow.setVisible(true);\nwindow.addWindowListener(new WindowAdapter() {\n    @Override\n    public void windowDestroyed(WindowEvent e) {\n        animator.stop();\n        System.exit(1);\n    }\n});\n</code></pre>\n",
    "score" : 1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 20517487,
      "reputation" : 191,
      "user_id" : 15057809,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/eaf4910cfa9950912ff039ecada69a88?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "squid233",
      "link" : "https://stackoverflow.com/users/15057809/squid233"
    },
    "creation_date" : 1752507341,
    "last_activity_date" : 1752507341,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79701091" : [ {
      "comment_id" : 140588806,
      "post_id" : 79701091,
      "body" : "Thank you! I finally see a red square.  Interestingly, it seems GLWindow does not show the usual arrows on resizing the window.",
      "score" : 0,
      "owner" : {
        "account_id" : 19392918,
        "reputation" : 21,
        "user_id" : 14181170,
        "user_type" : "registered",
        "profile_image" : "https://lh3.googleusercontent.com/-BU8J1xAE9CQ/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmPQJGzZGfxx1iLnmBg6Hk2DkjKog/s256-rj/photo.jpg",
        "display_name" : "Mikhail Dolgopolov",
        "link" : "https://stackoverflow.com/users/14181170/mikhail-dolgopolov"
      },
      "creation_date" : 1752513732,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}