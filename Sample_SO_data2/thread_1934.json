{
  "question" : {
    "question_id" : 79665755,
    "title" : "I try to run an Azure pipeline to deploy a Java app with maven using self-hosted agent, but it says that agent doesn&#39;t see Java. How can I fix it?",
    "body" : "<p>I use self-hosted Azure agent and I'm currently trying to deploy a Java Spring Boot application to an Azure App Service.</p>\n<p><a href=\"https://i.sstatic.net/wjanlPGY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/wjanlPGY.png\" alt=\"My pipeline:\" /></a></p>\n<p><a href=\"https://i.sstatic.net/3GmnZrHl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/3GmnZrHl.png\" alt=\"The error I keep getting:\" /></a></p>\n<p><a href=\"https://i.sstatic.net/gwyZWtlI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/gwyZWtlI.png\" alt=\"There is Java on my computer:\" /></a></p>\n<p>I set Path so it provides a path to Java and maven. The agent still doesn't see Java. I reloaded both agent and my PC intself several times, though the error persists. How can I fix it?</p>\n<p><a href=\"https://i.sstatic.net/YFbiqmrx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/YFbiqmrx.png\" alt=\"enter image description here\" /></a></p>\n",
    "tags" : [ "java", "azure", "maven", "azure-devops" ],
    "owner" : {
      "account_id" : 32575329,
      "reputation" : 11,
      "user_id" : 25312183,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/675b7170869e8e615ff8376849102888?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Ivan Synenko",
      "link" : "https://stackoverflow.com/users/25312183/ivan-synenko"
    },
    "is_answered" : false,
    "view_count" : 129,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1750074611,
    "creation_date" : 1749896891,
    "link" : "https://stackoverflow.com/questions/79665755/i-try-to-run-an-azure-pipeline-to-deploy-a-java-app-with-maven-using-self-hosted",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79667549,
    "question_id" : 79665755,
    "body" : "<blockquote>\n<p>I try to run an Azure pipeline to deploy a Java app with maven using self-hosted agent, but it says that agent doesn't see Java. How can I fix it?</p>\n</blockquote>\n<p>You installed Java in user-specific folder: <code>C:\\Users\\user\\...</code>, If the Azure DevOps agent is running as a Windows service, it wonâ€™t have access to <code>C:\\Users\\user\\.jdk\\...</code> So when your pipeline runs, it says: agent doesn't see Java, even it works fine in the command line under your user account.</p>\n<p>To resolve use System-Wide JDK installation install java in shared <code>ProgramFiles</code> and set the path in System Environment Variables.</p>\n<p>Or open <code>C:\\Users\\user\\.jdk</code> in PowerShell, download and create your agent there, and run <code>.\\config.cmd</code>. This runs the agent interactively as that user, which will have access to the <code>.jdk</code> Java installation.</p>\n<p>In your <code>azure-pipelines.yml</code> file, you specified <code>jdkVersionOption: '1.17'</code>, which uses Java version 17. However, you have installed Java version 23, which causes the error.</p>\n<p>so, use below lines in your YAML file.</p>\n<pre><code>javaHomeOption: 'JDKVersion'\njdkVersionOption: '1.23'\nor\njavaHomeOption: 'Path'\njdkDirectory: '$(JAVA_HOME)'\n</code></pre>\n<p><a href=\"https://i.sstatic.net/KI6rbTGy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/KI6rbTGy.png\" alt=\"enter image description here\" /></a></p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 29273734,
      "reputation" : 2084,
      "user_id" : 22427957,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/58f231b20adc28888cce0b2596acfe5f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Aslesha Kantamsetti",
      "link" : "https://stackoverflow.com/users/22427957/aslesha-kantamsetti"
    },
    "creation_date" : 1750074611,
    "last_activity_date" : 1750074611,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140516795,
    "post_id" : 79665755,
    "body" : "@Ivan Synenko The error you are facing is because in your YAML file, you are specifying jdkVersionOption as 1.17, which refers to Java SDK 17, but you are actually using Java 23.",
    "score" : 0,
    "owner" : {
      "account_id" : 29273734,
      "reputation" : 2084,
      "user_id" : 22427957,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/58f231b20adc28888cce0b2596acfe5f?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Aslesha Kantamsetti",
      "link" : "https://stackoverflow.com/users/22427957/aslesha-kantamsetti"
    },
    "creation_date" : 1750068581,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140513475,
    "post_id" : 79665755,
    "body" : "Do not use images for textual information. Copy the text into the question and use <a href=\"https://stackoverflow.com/editing-help#code\">code block</a> format.",
    "score" : 0,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1749905883,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}