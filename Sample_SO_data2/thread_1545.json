{
  "question" : {
    "question_id" : 79700387,
    "title" : "Problems when using SelectionFilter in multiple PlanningVariable scenarios",
    "body" : "<p>Now I create a solution A, a planning entity B and multiple planning variables(planning date and C).</p>\n<pre><code>@PlanningSolution\nclass A{\n @PlanningEntityCollectionProperty\n  private List&lt;B&gt; bList;\n}\n\n@PlanningEntity\nclass B{\n  @PlanningVariable(allowsUnassigned = true, valueRangeProviderRefs = &quot;dateRange&quot;)\n  private LocalDate planningDate;\n  @PlanningVariable(allowsUnassigned = true, valueRangeProviderRefs = &quot;cRange&quot;)\n  private C c;\n\n  @ValueRangeProvider(id = &quot;cRange&quot;)\n  private List&lt;C&gt; cList;\n\n  @ValueRangeProvider(id = &quot;dateRange&quot;)\n  private List&lt;LocalDate&gt; availableDates\n}\n</code></pre>\n<p>I hope that for a Planning Entity, when moving C, I can filter the value of planning date from a fixed date set with some fields of C, and when moving planning date, I can filter the value of C.</p>\n<p>I saw SelectionFilter in the documentation, but the parameters passed in are the class of Solution and Planning Variable. I wonder if it can be adapted to this scenario?</p>\n<p>And when Using SelectionFilter, a situation may occur: when the planning date set corresponding to C1 and the planning date set corresponding to C2 have no intersection, for a single planning entity, there is no way to switch from C1 to C2. I don't know if my understanding is correct.</p>\n<p>Perhaps, should I use the Filtered move selection? Or any other better suggestions?</p>\n<p>Are there any answers or suggestions?\nLooking forward to your reply.</p>\n",
    "tags" : [ "java", "optaplanner", "timefold" ],
    "owner" : {
      "account_id" : 30909052,
      "reputation" : 15,
      "user_id" : 23726839,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/a754c84f7d56a14f9f34fdf76728095c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "user23726839",
      "link" : "https://stackoverflow.com/users/23726839/user23726839"
    },
    "is_answered" : true,
    "view_count" : 79,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1752591746,
    "creation_date" : 1752461037,
    "link" : "https://stackoverflow.com/questions/79700387/problems-when-using-selectionfilter-in-multiple-planningvariable-scenarios",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79702272,
    "question_id" : 79700387,
    "body" : "<p>I think you are taking a wrong turn in your thinking here. Value ranges are expected to be <em>constant</em> - you can not change them when something in the entity changes. Therefore you cannot make <code>dateRange</code> react to changes in <code>c</code>, nor can you make <code>cRange</code> react to changes in <code>planningDate</code>.</p>\n<p>You want those value ranges to be reasonable for all cases - and if some values don't make sense in a particular situation, use selection filtering to get rid of them.</p>\n<p>The interface of <code>SelectionFilter</code> is actually this:</p>\n<pre><code>public interface SelectionFilter&lt;Solution_, T&gt; {\n\n    boolean accept(ScoreDirector&lt;Solution_&gt; scoreDirector, T selection);\n\n}\n</code></pre>\n<p><code>T</code> can be anything - a move, an entity, a value. Based on where you're using the selection filter. <a href=\"https://docs.timefold.ai/timefold-solver/latest/optimization-algorithms/overview#filteredSelection\" rel=\"nofollow noreferrer\">The documentation</a> gives examples of all three.</p>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 9133364,
      "reputation" : 5817,
      "user_id" : 6794063,
      "user_type" : "registered",
      "profile_image" : "https://lh4.googleusercontent.com/-Pu8XWYwITes/AAAAAAAAAAI/AAAAAAAAABI/rMGKOXE-33k/s256-rj/photo.jpg",
      "display_name" : "Luk&#225;Å¡ Petrovick&#253;",
      "link" : "https://stackoverflow.com/users/6794063/luk%c3%a1%c5%a1-petrovick%c3%bd"
    },
    "creation_date" : 1752591746,
    "last_activity_date" : 1752591746,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}