{
  "question" : {
    "question_id" : 79612144,
    "title" : "Springboot with JPA cannot save Auto Increment field in redshift",
    "body" : "<p>Tried to store data into redshift table from spring boot. Got an error because of the auto increment ID column. Below is the code and error.</p>\n<p><strong>Entity class</strong></p>\n<pre><code>@Entity\n@Data\n@Table(name = &quot;student_marks&quot;, schema = &quot;staging&quot;)\npublic class StudentMarks{\n\n   @Id\n   @GeneratedValue(strategy = GenerationType.IDENTITY)\n   private Long id;\n   private String name;\n   private String subject;              \n   private Double mark; \n   private Instant createdDate;\n   }\n</code></pre>\n<p><strong>Service class</strong></p>\n<pre><code>StudentMarks studentMarks = new StudentMarks();\nstudentMarks.setName(&quot;test&quot;);\nstudentMarks.setSubject(&quot;science&quot;);\nstudentMarks.setMarks(78);\nstudentMarks.setCreatedDate(Instant.now);\n\nstudentMarksRepository.save(studentMarks);\n</code></pre>\n<p><strong>While hitting the API getting this error</strong></p>\n<pre><code>Caused by: org.hibernate.HibernateException: The database returned no natively generated identity value\\r\\n\\tat org.hibernate.id.IdentifierGeneratorHelper.getGeneratedIdentity(IdentifierGeneratorHelper.java:75)\\r\\n\\tat org.hibernate.dialect.identity.GetGeneratedKeysDelegate.executeAndExtract(GetGeneratedKeysDelegate.java:62)\\r\\n\\tat org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:43)\\r\\n\\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3279)\\r\\n\\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3914)\\r\\n\\tat org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:84)\\r\\n\\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:645)\\r\\n\\tat org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:282)\\r\\n\\tat org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:263)\\r\\n\\tat org.hibernate.engine.spi.ActionQueue.addAction\n</code></pre>\n<p><strong>Redshift DB</strong></p>\n<pre><code>    CREATE TABLE IF NOT EXISTS student_marks\n    (\n    id BIGINT NOT NULL DEFAULT &quot;identity&quot;(304420, 0, '1,1'::text) \n    ,name VARCHAR(200)  \n    ,subject VARCHAR(20) \n    ,mark BIGINT \n    ,created_date DATE\n    ,PRIMARY KEY (id)\n    ) \n</code></pre>\n<p>Please help me to solve this issue.</p>\n",
    "tags" : [ "java", "spring-boot", "jpa", "amazon-redshift" ],
    "owner" : {
      "account_id" : 14852676,
      "reputation" : 374,
      "user_id" : 10726103,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/25c33cc44c44491e733d24fee4abbe6a?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Jeeva D",
      "link" : "https://stackoverflow.com/users/10726103/jeeva-d"
    },
    "is_answered" : false,
    "view_count" : 41,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746888514,
    "creation_date" : 1746699037,
    "link" : "https://stackoverflow.com/questions/79612144/springboot-with-jpa-cannot-save-auto-increment-field-in-redshift",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79615603,
    "question_id" : 79612144,
    "body" : "<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(name=&quot;id&quot;, insertable = false, updatable = false)\nprivate Long id;\n</code></pre>\n<p>Add <code>@Column</code> annotation to your id field so that hibernate will not include id column when generating insert queries.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 14614685,
      "reputation" : 91,
      "user_id" : 10555123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/QXlF8.jpg?s=256",
      "display_name" : "bidulgi69",
      "link" : "https://stackoverflow.com/users/10555123/bidulgi69"
    },
    "creation_date" : 1746888514,
    "last_activity_date" : 1746888514,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140407635,
    "post_id" : 79612144,
    "body" : "<a href=\"https://stackoverflow.com/questions/52971990/how-to-insert-entity-using-hibernate-in-amazon-redshift\">This</a> might help.",
    "score" : 0,
    "owner" : {
      "account_id" : 8909811,
      "reputation" : 2861,
      "user_id" : 6650475,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/fe85994d05ad7aaaa1c47d638b37bc45?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Andrew S",
      "link" : "https://stackoverflow.com/users/6650475/andrew-s"
    },
    "creation_date" : 1746708720,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : {
    "79615603" : [ {
      "comment_id" : 140417242,
      "post_id" : 79615603,
      "body" : "I tried it, but still getting the same error.  org.hibernate.HibernateException: The database returned no natively generated identity value\\r\\n\\tat",
      "score" : 0,
      "owner" : {
        "account_id" : 14852676,
        "reputation" : 374,
        "user_id" : 10726103,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/25c33cc44c44491e733d24fee4abbe6a?s=256&d=identicon&r=PG&f=y&so-version=2",
        "display_name" : "Jeeva D",
        "link" : "https://stackoverflow.com/users/10726103/jeeva-d"
      },
      "creation_date" : 1747040260,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}