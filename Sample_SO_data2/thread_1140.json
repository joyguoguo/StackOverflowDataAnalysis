{
  "question" : {
    "question_id" : 79743353,
    "title" : "How to refer to a specific instance of a class in yaml configuration using ConfigurationProperties for POJOs with Lists",
    "body" : "<p>I am trying to map a yaml configuration file to a complex schema of classes with relationships between the classes in order to build an API that can be highly configurable based on  a yaml config file.</p>\n<p>I would like to define a yaml file and have spring boot read it into POJO java classes including certain relationships between the classes. For example, the yaml file would define a list of objectA and a list of objectB. objectA would have a property of type List&lt;objectB&gt; and the instances of objectB that are in this list would also be definable in the yaml file.</p>\n<p>Is this possible to achieve using ConfigurationProperties?</p>\n<p>application.properties:</p>\n<pre><code>...\nspring.config.import=config.yml\n...\n</code></pre>\n<p>config.yml</p>\n<pre><code>api:\n  objectAs:\n    - name: objectA1\n      requiredAttributes: # strings\n        - attr1\n        - attr2\n        - attr3\n      optionalAttributes: # strings\n        - attr4\n      objectBs: # ObjectB class\n        - objectB1\n        - objectB2\n\n  objectBs:\n    - name: objectB1 # string\n      url: https://google.com #string\n    - name: objectB2\n      url: url2\n</code></pre>\n<p>ObjectA.java</p>\n<pre><code>import lombok.Data;\n\nimport java.util.List;\n\n@Data\npublic class ObjectA {\n    private String name;\n    private List&lt;String&gt; requiredAttributes;\n    private List&lt;String&gt; optionalAttributes;\n    private List&lt;ObjectB&gt; objectBs;\n}\n</code></pre>\n<p>Model.java</p>\n<pre><code>import lombok.Data;\n\n@Data\npublic class ObjectB {\n    private String name;\n    private String url;\n}\n</code></pre>\n<p>APITemplateProperties.java</p>\n<pre><code>@Component\n@ConfigurationProperties(prefix = &quot;api&quot;)\npublic class APITemplateProperties {\n    \n    private List&lt;ObjectB&gt; objectBs;\n    private List&lt;ObjectA&gt; objectAs;\n\n}\n</code></pre>\n<p>The application compiles but fails to start the server with the error:</p>\n<pre><code>\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nFailed to bind properties under 'api.objectAs[0].objectBs[0]' to ...ObjectB:\n\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [...ObjectB]\n\nAction:\n\nUpdate your application's configuration\n</code></pre>\n",
    "tags" : [ "java", "spring", "spring-boot", "lombok", "configuration-files" ],
    "owner" : {
      "account_id" : 31006089,
      "reputation" : 11,
      "user_id" : 23820214,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d63b88a6b6359056a760deb6db32bf47?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Walter Carlson",
      "link" : "https://stackoverflow.com/users/23820214/walter-carlson"
    },
    "is_answered" : false,
    "view_count" : 53,
    "closed_date" : 1755865270,
    "answer_count" : 0,
    "score" : 0,
    "last_activity_date" : 1755861769,
    "creation_date" : 1755861769,
    "link" : "https://stackoverflow.com/questions/79743353/how-to-refer-to-a-specific-instance-of-a-class-in-yaml-configuration-using-confi",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140712631,
    "post_id" : 79743353,
    "body" : "The problem I&#39;ve had with trying this approach is that the custom converters arent loaded until after the configuration is loaded. So the custom converters cannot be accessed in order to load the configuration",
    "score" : 0,
    "owner" : {
      "account_id" : 31006089,
      "reputation" : 11,
      "user_id" : 23820214,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/d63b88a6b6359056a760deb6db32bf47?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Walter Carlson",
      "link" : "https://stackoverflow.com/users/23820214/walter-carlson"
    },
    "creation_date" : 1756920077,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140685139,
    "post_id" : 79743353,
    "body" : "create a new component will fix the issue <code>@Component public class StrToObjBConverter implements Converter&lt;String, ObjectB&gt; {      private final APITemplateProperties properties;      public StrToObjBConverter(APITemplateProperties properties) {         this.properties = properties;     }      @Override     public ObjectB convert(String source) {         return properties.getObjectBs().stream()                 .filter(b -&gt; b.getName().equals(source))                 .findFirst()                 .orElseThrow(() -&gt; new IllegalArgumentException(&quot;Unknown ObjectB: &quot;));     } }</code>",
    "score" : 0,
    "owner" : {
      "account_id" : 24765990,
      "reputation" : 12,
      "user_id" : 18649826,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/29ae099e5dcbd7125570f1e53a7fcdc7?s=256&d=identicon&r=PG",
      "display_name" : "sriram_aleti",
      "link" : "https://stackoverflow.com/users/18649826/sriram-aleti"
    },
    "creation_date" : 1755876440,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}