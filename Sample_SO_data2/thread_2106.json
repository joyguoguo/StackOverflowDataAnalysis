{
  "question" : {
    "question_id" : 79651086,
    "title" : "Spring AliasFor throwing exception org.springframework.core.annotation.AnnotationConfigurationException when the attribute exists",
    "body" : "<p>I'm trying to create a generic OpenApiDescription to use to document some restControllers, example below:</p>\n<p>I'm doing this so I can override the default in the restControllers if the generic behaviour needs to change.</p>\n<pre><code>import example.ErrorDetails;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.enums.ParameterIn;\nimport io.swagger.v3.oas.annotations.media.Content;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.responses.ApiResponses;\nimport org.springframework.core.annotation.AliasFor;\n\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.ANNOTATION_TYPE;\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.ElementType.TYPE;\n\n@Target({METHOD, TYPE, ANNOTATION_TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\n@Operation\n@ApiResponses\npublic @interface DefaultOpenApiDescription {\n\n    @AliasFor(annotation = Operation.class, attribute = &quot;parameters&quot;)\n    Parameter[] parameters() default {\n            @Parameter(\n                    name = &quot;authorization&quot;,\n                    in = ParameterIn.HEADER,\n                    required = true)\n    };\n\n    @AliasFor(annotation = ApiResponses.class, attribute = &quot;value&quot;)\n    ApiResponse[] value() default {\n            @ApiResponse(\n                    description = &quot;Accepted&quot;,\n                    responseCode = &quot;202&quot;,\n                    content = @Content()\n            ),\n            @ApiResponse(\n                    description = &quot;Bad Request&quot;,\n                    responseCode = &quot;400&quot;,\n                    content = @Content(\n                            mediaType = &quot;application/json&quot;,\n                            schema = @Schema(\n                                    implementation = ErrorDetails.class\n                            )\n                    )\n            ),\n            @ApiResponse(\n                    description = &quot;Unauthorized&quot;,\n                    responseCode = &quot;401&quot;,\n                    content = @Content()\n            ),\n            @ApiResponse(\n                    description = &quot;Forbidden&quot;,\n                    responseCode = &quot;403&quot;,\n                    content = @Content()\n            )\n    };\n}\n</code></pre>\n<p>And use this annotation like so:</p>\n<pre><code>import example.DefaultOpenApiDescription;\nimport example.EmailService;\nimport jakarta.validation.Valid;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestHeader;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Map;\n\nimport static org.springframework.http.HttpStatus.ACCEPTED;\nimport static org.springframework.http.HttpStatus.SERVICE_UNAVAILABLE;\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\n@RestController\n@RequestMapping(value = &quot;/email&quot;)\n@ResponseStatus(SERVICE_UNAVAILABLE)\npublic class EmailController {\n\n    private final EmailService emailService;\n\n    public EmailController(EmailService emailService) {\n        this.emailService = emailService;\n    }\n\n    @PutMapping(value = &quot;/{id}/email&quot;, consumes = APPLICATION_JSON_VALUE, produces = APPLICATION_JSON_VALUE)\n    @ResponseStatus(ACCEPTED)\n    @DefaultOpenApiDescription\n    public void putEmailRequest(\n            @PathVariable String id,\n            @RequestHeader Map&lt;String, String&gt; requestHeaders,\n            @Valid @RequestBody EmailRequest emailRequest\n    ) {\n        emailService.send(id, emailRequest, requestHeaders);\n    }\n}\n</code></pre>\n<p>However, when I start the app I'm getting this exception:</p>\n<pre><code>Caused by: org.springframework.core.annotation.AnnotationConfigurationException: @AliasFor declaration on attribute 'value' in annotation [example.DefaultOpenApiDescription] declares an alias for attribute 'value' in annotation [io.swagger.v3.oas.annotations.responses.ApiResponses] which is not meta-present.\n    at org.springframework.core.annotation.AnnotationTypeMapping.validateAllAliasesClaimed(AnnotationTypeMapping.java:446) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMapping.afterAllMappingsSet(AnnotationTypeMapping.java:433) ~[spring-core-6.2.7.jar:6.2.7]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.springframework.core.annotation.AnnotationTypeMappings.&lt;init&gt;(AnnotationTypeMappings.java:73) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.createMappings(AnnotationTypeMappings.java:278) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.lambda$get$0(AnnotationTypeMappings.java:273) ~[spring-core-6.2.7.jar:6.2.7]\n    at java.base/java.util.concurrent.ConcurrentMap.computeIfAbsent(ConcurrentMap.java:330) ~[na:na]\n    at org.springframework.core.annotation.AnnotationTypeMappings$Cache.get(AnnotationTypeMappings.java:273) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:226) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:189) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.AnnotationTypeMappings.forAnnotationType(AnnotationTypeMappings.java:175) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.TypeMappedAnnotation.of(TypeMappedAnnotation.java:617) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.annotation.MergedAnnotation.of(MergedAnnotation.java:612) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.type.classreading.MergedAnnotationReadingVisitor.visitEnd(MergedAnnotationReadingVisitor.java:98) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.asm.ClassReader.readElementValues(ClassReader.java:3023) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.asm.ClassReader.readMethod(ClassReader.java:1416) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.asm.ClassReader.accept(ClassReader.java:747) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.asm.ClassReader.accept(ClassReader.java:427) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.type.classreading.SimpleMetadataReader.&lt;init&gt;(SimpleMetadataReader.java:48) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.type.classreading.SimpleMetadataReaderFactory.getMetadataReader(SimpleMetadataReaderFactory.java:103) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.core.type.classreading.CachingMetadataReaderFactory.getMetadataReader(CachingMetadataReaderFactory.java:122) ~[spring-core-6.2.7.jar:6.2.7]\n    at org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider.scanCandidateComponents(ClassPathScanningCandidateComponentProvider.java:470) ~[spring-context-6.2.7.jar:6.2.7]\n</code></pre>\n<p>I'm unsure why as:</p>\n<pre><code>package io.swagger.v3.oas.annotations.responses;\n\nimport io.swagger.v3.oas.annotations.extensions.Extension;\n\nimport java.lang.annotation.Inherited;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.ANNOTATION_TYPE;\nimport static java.lang.annotation.ElementType.METHOD;\nimport static java.lang.annotation.ElementType.TYPE;\n\n/**\n * Container for repeatable {@link ApiResponse} annotation\n *\n * @see ApiResponse\n */\n@Target({METHOD, TYPE, ANNOTATION_TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Inherited\npublic @interface ApiResponses {\n    /**\n     * An array of ApiResponse annotations\n     *\n     * @return the array of the ApiResponse\n     **/\n    ApiResponse[] value() default {};\n\n    /**\n     * The list of optional extensions\n     *\n     * @return an optional array of extensions\n     */\n    Extension[] extensions() default {};\n\n}\n</code></pre>\n<p>Contains 'value'</p>\n",
    "tags" : [ "java", "spring", "swagger" ],
    "owner" : {
      "account_id" : 26749316,
      "reputation" : 31,
      "user_id" : 20348947,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/234f781c88aee5da201da9cb2db40322?s=256&d=identicon&r=PG",
      "display_name" : "TheLittleChimp",
      "link" : "https://stackoverflow.com/users/20348947/thelittlechimp"
    },
    "is_answered" : false,
    "view_count" : 57,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1748953323,
    "creation_date" : 1748947639,
    "link" : "https://stackoverflow.com/questions/79651086/spring-aliasfor-throwing-exception-org-springframework-core-annotation-annotatio",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79651227,
    "question_id" : 79651086,
    "body" : "<p>You can only use <code>@AliasFor</code> for attributes of <strong>meta-annotations</strong> — that is, annotations that are <em>actually present</em> on your annotation class.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 27780880,
      "reputation" : 158,
      "user_id" : 21209255,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/EFFvV.jpg?s=256",
      "display_name" : "Muhammadqodir Muhsinov",
      "link" : "https://stackoverflow.com/users/21209255/muhammadqodir-muhsinov"
    },
    "creation_date" : 1748953323,
    "last_activity_date" : 1748953323,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : {
    "79651227" : [ {
      "comment_id" : 140485583,
      "post_id" : 79651227,
      "body" : "@ApiResponses is not a meta-annotation on your DefaultOpenApiDescription. It’s just present as an annotation on it — but@ AliasFor requires the target annotation to be meta-present.  You cannot override @ApiResponses.value() using @ AliasFor. Instead, define value() directly in your custom annotation and manually apply it.  public @ interface DefaultOpenApiDescription {  @AliasFor(annotation = Operation.class, attribute = &quot;parameters&quot;)     Parameter[] parameters() default {          // define your Params     } }",
      "score" : 0,
      "owner" : {
        "account_id" : 27780880,
        "reputation" : 158,
        "user_id" : 21209255,
        "user_type" : "registered",
        "profile_image" : "https://i.sstatic.net/EFFvV.jpg?s=256",
        "display_name" : "Muhammadqodir Muhsinov",
        "link" : "https://stackoverflow.com/users/21209255/muhammadqodir-muhsinov"
      },
      "creation_date" : 1749020471,
      "content_license" : "CC BY-SA 4.0"
    }, {
      "comment_id" : 140483675,
      "post_id" : 79651227,
      "body" : "Hi @Muhammadqodir Muhsinov, please can you clarify what is required to fix this.  As I have  <code>@ApiResponses public @interface DefaultOpenApiDescription </code>",
      "score" : 0,
      "owner" : {
        "account_id" : 26749316,
        "reputation" : 31,
        "user_id" : 20348947,
        "user_type" : "registered",
        "profile_image" : "https://www.gravatar.com/avatar/234f781c88aee5da201da9cb2db40322?s=256&d=identicon&r=PG",
        "display_name" : "TheLittleChimp",
        "link" : "https://stackoverflow.com/users/20348947/thelittlechimp"
      },
      "creation_date" : 1748959747,
      "content_license" : "CC BY-SA 4.0"
    } ]
  }
}