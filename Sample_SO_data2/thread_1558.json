{
  "question" : {
    "question_id" : 79698404,
    "title" : "how to use xpath in java when namespace prefixes are unstable",
    "body" : "<p>I need to extract small parts from xml files in Java. I would like to use xpath for it.</p>\n<p>The incoming xmls use namespaces but the prefixes for them are unstable. I mean sometimes I get &quot;&lt;s:Title&gt;...&quot; sometimes som:Title.</p>\n<p>I need to specify elements in the xpath with their namespaces to prevent mixup.</p>\n<p>I found a way to do it with xpath expressions like this:</p>\n<p>/<em>[local-name()='Doc' and namespace-uri()='http://www.my.hu/somethingo']/</em>[local-name()='Title' and namespace-uri()='http://www.my.hu/somethingo']/*[local-name()='Object' and namespace-uri()='http://www.my.hu/otherthingo']\n...</p>\n<p>However the paths are quite unreadable in this form.</p>\n<p>Is there no better way to specify namespaces in java xpath expressions?</p>\n<p>This is the code in question:</p>\n<pre><code>public String extractObjectInTitleInDoc(String xml) throws Exception {\n        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();\n        builderFactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n        builderFactory.setNamespaceAware(true);\n        DocumentBuilder builder = builderFactory.newDocumentBuilder();\n        Document xmlDocument = builder.parse(new ByteArrayInputStream(xml.getBytes()));\n        XPath xPath = XPathFactory.newInstance().newXPath();\n        String expression = &quot;&quot; +\n                &quot;/*[local-name()='Doc' and namespace-uri()='http://www.my.hu/somethingo']&quot; +\n                &quot;/*[local-name()='Title' and namespace-uri()='http://www.my.hu/somethingo']&quot; +\n                &quot;/*[local-name()='Object' and namespace-uri()='http://www.my.hu/otherthingo']&quot; +\n                &quot;/text()&quot; +\n                &quot;&quot;;\n        String title = (String) xPath.compile(expression).evaluate(xmlDocument, XPathConstants.STRING);\n\n        return title;\n    }\n</code></pre>\n<p>A minimal working example of the above is here:</p>\n<p><a href=\"https://github.com/riskop/java_xpath_localname_namespace_uri\" rel=\"nofollow noreferrer\">https://github.com/riskop/java_xpath_localname_namespace_uri</a></p>\n",
    "tags" : [ "java", "xml", "xpath" ],
    "owner" : {
      "account_id" : 4639875,
      "reputation" : 1839,
      "user_id" : 3760049,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/69ed405cd4036cdf27e003ca372c6d1c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "riskop",
      "link" : "https://stackoverflow.com/users/3760049/riskop"
    },
    "is_answered" : false,
    "view_count" : 64,
    "closed_date" : 1752245549,
    "answer_count" : 0,
    "score" : 2,
    "last_activity_date" : 1752245580,
    "creation_date" : 1752240350,
    "link" : "https://stackoverflow.com/questions/79698404/how-to-use-xpath-in-java-when-namespace-prefixes-are-unstable",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ ],
  "question_comments" : [ {
    "comment_id" : 140582729,
    "post_id" : 79698404,
    "body" : "Okay, I realized that I asked a very old and already answered question. Besides the answer mentioned by John Bollinger, I think this is a very good one too: <a href=\"https://stackoverflow.com/questions/6390339/how-to-query-xml-using-namespaces-in-java-with-xpath\" title=\"how to query xml using namespaces in java with xpath\">stackoverflow.com/questions/6390339/&hellip;</a> ( check answer by stevevls )",
    "score" : 2,
    "owner" : {
      "account_id" : 4639875,
      "reputation" : 1839,
      "user_id" : 3760049,
      "user_type" : "registered",
      "accept_rate" : 86,
      "profile_image" : "https://www.gravatar.com/avatar/69ed405cd4036cdf27e003ca372c6d1c?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "riskop",
      "link" : "https://stackoverflow.com/users/3760049/riskop"
    },
    "creation_date" : 1752244623,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140582717,
    "post_id" : 79698404,
    "body" : "Think of the namespace-prefix as a variable. What matters is the (namespace) value assigned to it. As long as the namespace bound to the namespace-prefix used in your XPath matches the namespace of the node being addressed in the XML document, the namespace-prefix is irrelevant.",
    "score" : 1,
    "owner" : {
      "account_id" : 8112,
      "reputation" : 67571,
      "user_id" : 14419,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://i.sstatic.net/Te6t0.jpg?s=256",
      "display_name" : "Mads Hansen",
      "link" : "https://stackoverflow.com/users/14419/mads-hansen"
    },
    "creation_date" : 1752244402,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140582676,
    "post_id" : 79698404,
    "body" : "Note that prefix stability is not really a factor.  The scope of namespace prefix bindings in an XML document is limited to the element on which the binding appears, including its descendants.  That does not include any XPath expression appearing in your program. Moreover, a prefix that you declare and use (in an implementation-specific manner) for trhe evaluation of your XPath expressions does not have to match any of the prefixes used in the documents against which the expression is evaluated.  Again, it is the namespace URI that matters.",
    "score" : 1,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1752243485,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140582647,
    "post_id" : 79698404,
    "body" : "Possible dupe: <a href=\"https://stackoverflow.com/q/40796231/2402272\">How does XPath deal with XML namespaces?</a>",
    "score" : 1,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1752242827,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140582630,
    "post_id" : 79698404,
    "body" : "From the XML perspective, namespace prefixes are document specific.  It is only the associated namespace URI that has any broader (i.e. cross-document) significance.",
    "score" : 1,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1752242493,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}