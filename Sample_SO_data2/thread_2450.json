{
  "question" : {
    "question_id" : 79622017,
    "title" : "JPanel acting very weird",
    "body" : "<p>I want to make it so that it starts with a image and a jbutton, pressing the button hides the image and button and reveals a subpanel with a circle, along with two arrows that should let you redraw the circle in the subpanel to “move” it. However, when I run the starting image and button are fine but then the subpanel appears, but without the circle. The sample text however displays. When you press the buttons the circle doesn’t appear, instead a second subpanel shows up next to the buttons, still with no circle.\nThe driver class is FinalProject:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.JFrame;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\n\npublic class FinalProject{\n   \n   public static void main(String[] args){\n      JFrame frame = new JFrame(&quot;exploration game&quot;);\n      frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\n      frame.setVisible(true);\n      Graphics x = frame.getGraphics();\n      FinalProjectPanel panel = new FinalProjectPanel(x, new BorderLayout());\n      frame.getContentPane().add(panel);\n      frame.pack();\n      frame.setResizable(false);\n      \n}\n}\n\n\n</code></pre>\n<p>Here’s the class with the panel that has the buttons and labels</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.JFrame;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\npublic class FinalProjectPanel extends JPanel{\n   private JButton startButton;\n   private JButton actualGame;\n   private JLabel starttext;\n   private ImageIcon startingscren;\n   private JButton Left;\n   private JButton Right;\n   private GraphicSubpanel subpanel;\n   private JButton sd;\n   \n   public FinalProjectPanel(Graphics g, BorderLayout b){\n      startingscren = new ImageIcon(&quot;starting-screen.png&quot;);\n      starttext = new JLabel(startingscren);\n      starttext.setVisible(false);\n      startButton = new JButton(&quot;Start Game&quot;);\n      \n      startButton.addActionListener(new startListener());\n      Left = new JButton(&quot;&lt;-&quot;);\n      Left.setVisible(false);\n      Left.addActionListener(new leftListener());\n      Right = new JButton(&quot;-&gt;&quot;);\n      Right.addActionListener(new rightListener());\n      Right.setVisible(false);\n      setPreferredSize(new Dimension(500,500));\n      subpanel = new GraphicSubpanel(g, 10, 100);\n      subpanel.setPreferredSize(new Dimension(100,100));\n      subpanel.setVisible(false);\n      sd = new JButton(&quot;ahh&quot;);\n      \n      add(starttext, BorderLayout.PAGE_START);\n      add(startButton, BorderLayout.PAGE_END);\n      \n      add(Left,BorderLayout.LINE_START);\n      add(Right,BorderLayout.LINE_END);\n      add(subpanel, BorderLayout.CENTER);\n      \n      \n   }\n   \n   private class startListener implements ActionListener{\n      public void actionPerformed (ActionEvent event){\n         startButton.setVisible(false);\n         starttext.setVisible(false);\n         //make everything visible.\n         subpanel.setVisible(true);\n         Left.setVisible(true);\n         Right.setVisible(true);\n      }\n   }\n   \n   \n\nprivate class leftListener implements ActionListener{\n      public void actionPerformed (ActionEvent event){\n         subpanel.setX(subpanel.getX()-10);\n      }\n   }\nprivate class rightListener implements ActionListener{\n      public void actionPerformed (ActionEvent event){\n         subpanel.setX(subpanel.getX()+10);\n      }\n   }\n\n\n\n\n}\n\n\n</code></pre>\n<p>And here’s the subpanel I tried to put the circle on</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport javax.swing.JFrame;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\n\npublic class GraphicSubpanel extends JPanel{\n   \n   private int x;\n   private int y;\n   private JLabel randomlabel;\n   private Circle player;\n   private Graphics2D g2d;\n   public GraphicSubpanel(Graphics g2d, int x, int y){\n     this.x = x;\n     this.y = y;\n     this.g2d = (Graphics2D) g2d;\n     randomlabel = new JLabel(&quot;sample text&quot;);\n     player = new Circle(60,x,y);\n     player.setVisible(true);\n     add(player);\n     add(randomlabel);\n     setBackground(Color.YELLOW);\n     repaint();\n     \n   }\n   public int getX(){\n      return x;\n   }public int getY(){\n      return y;\n   }\n   public void setX(int a){\n      x = a;\n      repaint();\n   }\n   public void setY(int a){\n      y = a;\n      repaint();\n   }\n   \n   private class Circle extends JComponent {\n   \n      private int diam;\n      private int x;\n      private int y;\n   \n      public Circle(int diam, int x, int y) {\n         this.diam = diam;\n         this.x = x;\n         this.y = y;\n         setPreferredSize(new Dimension(diam, diam));\n      }\n   \n      @Override\n      public void paintComponent(Graphics g) {\n         super.paintComponent(g2d);\n         g2d.setColor(Color.RED);\n         g2d.fillOval(x, y, diam, diam);\n         System.out.println(&quot;test&quot;);\n      }\n      public int getX(){\n         return x;\n      }\n      public int getY(){\n         return y;\n      }\n}\n\n}\n\n\n</code></pre>\n<p>I tried fiddling around by adding text everywhere to test, I also changed the layout manager and changed the size of the panel and subpanel several times but nothing changed.</p>\n",
    "tags" : [ "java", "swing", "jpanel" ],
    "owner" : {
      "account_id" : 41978767,
      "reputation" : 1,
      "user_id" : 30538439,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/733462e45250294cd3100ec3c8a23bdb?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Adsf ghjkl",
      "link" : "https://stackoverflow.com/users/30538439/adsf-ghjkl"
    },
    "is_answered" : true,
    "view_count" : 92,
    "answer_count" : 1,
    "score" : -1,
    "last_activity_date" : 1747317908,
    "creation_date" : 1747244597,
    "link" : "https://stackoverflow.com/questions/79622017/jpanel-acting-very-weird",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79623527,
    "question_id" : 79622017,
    "body" : "<p>Never use the <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Component.html#getGraphics()\" rel=\"nofollow noreferrer\">Component.getGraphics()</a> method.  It does not work and it does not allow you to draw on a component.  (I honestly don’t know why it hasn’t been deprecated.)</p>\n<p>Never create a Graphics unless you’re drawing on an image.  For drawing on components, follow the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> Java tutorial.</p>\n<p>Change this:</p>\n<pre><code>// DON'T DO THIS\nGraphics x = frame.getGraphics();\nFinalProjectPanel panel = new FinalProjectPanel(x, new BorderLayout());\n</code></pre>\n<p>to this:</p>\n<pre><code>FinalProjectPanel panel = new FinalProjectPanel(new BorderLayout());\n</code></pre>\n<p>Change this:</p>\n<pre><code>// DON'T DO THIS\npublic FinalProjectPanel(Graphics g, BorderLayout b){\n    startingscren = new ImageIcon(&quot;starting-screen.png&quot;);\n    starttext = new JLabel(startingscren);\n    starttext.setVisible(false);\n    startButton = new JButton(&quot;Start Game&quot;);\n\n    startButton.addActionListener(new startListener());\n    Left = new JButton(&quot;&lt;-&quot;);\n    Left.setVisible(false);\n    Left.addActionListener(new leftListener());\n    Right = new JButton(&quot;-&gt;&quot;);\n    Right.addActionListener(new rightListener());\n    Right.setVisible(false);\n    setPreferredSize(new Dimension(500,500));\n    subpanel = new GraphicSubpanel(g, 10, 100);\n</code></pre>\n<p>to this:</p>\n<pre><code>public FinalProjectPanel(BorderLayout b){\n    startingscren = new ImageIcon(&quot;starting-screen.png&quot;);\n    starttext = new JLabel(startingscren);\n    starttext.setVisible(false);\n    startButton = new JButton(&quot;Start Game&quot;);\n\n    startButton.addActionListener(new startListener());\n    Left = new JButton(&quot;&lt;-&quot;);\n    Left.setVisible(false);\n    Left.addActionListener(new leftListener());\n    Right = new JButton(&quot;-&gt;&quot;);\n    Right.addActionListener(new rightListener());\n    Right.setVisible(false);\n    setPreferredSize(new Dimension(500,500));\n    subpanel = new GraphicSubpanel(10, 100);\n</code></pre>\n<p>Change this:</p>\n<pre><code>// DON'T DO THIS\nprivate Graphics2D g2d;\npublic GraphicSubpanel(Graphics g2d, int x, int y){\n    this.x = x;\n    this.y = y;\n    this.g2d = (Graphics2D) g2d;\n</code></pre>\n<p>to this:</p>\n<pre><code>public GraphicSubpanel(int x, int y){\n    this.x = x;\n    this.y = y;\n</code></pre>\n<p>Change this:</p>\n<pre><code>private class Circle extends JComponent {\n</code></pre>\n<p>to this:</p>\n<pre><code>private class Circle extends JPanel {\n</code></pre>\n<p>And finally, change this:</p>\n<pre><code>@Override\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g2d);\n    g2d.setColor(Color.RED);\n    g2d.fillOval(x, y, diam, diam);\n    System.out.println(&quot;test&quot;);\n}\npublic int getX(){\n    return x;\n}\npublic int getY(){\n    return y;\n}\n</code></pre>\n<p>to this:</p>\n<pre><code>@Override\npublic void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    g.setColor(Color.RED);\n    g.fillOval(x, y, diam, diam);\n    System.out.println(&quot;test&quot;);\n}\n</code></pre>\n<p>In summary:  custom painting must be done using the Graphics object created by the system, not by you.  And, as camickr said, don’t change the behavior of the inherited <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Component.html#getX()\" rel=\"nofollow noreferrer\">getX</a> and <a href=\"https://docs.oracle.com/en/java/javase/24/docs/api/java.desktop/java/awt/Component.html#getY()\" rel=\"nofollow noreferrer\">getY</a> methods.</p>\n",
    "score" : 1,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 2053598,
      "reputation" : 44991,
      "user_id" : 1831987,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/38b1c37530189ec4471a43a618e33f67?s=256&d=identicon&r=PG",
      "display_name" : "VGR",
      "link" : "https://stackoverflow.com/users/1831987/vgr"
    },
    "creation_date" : 1747317908,
    "last_activity_date" : 1747317908,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140427360,
    "post_id" : 79622017,
    "body" : "You might want to start with the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> tutorial from the Java Swing documentation.",
    "score" : 3,
    "owner" : {
      "account_id" : 7423601,
      "reputation" : 21950,
      "user_id" : 5646962,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/950788cd150c2e596944181dfd8421af?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Thomas Kl&#228;ger",
      "link" : "https://stackoverflow.com/users/5646962/thomas-kl%c3%a4ger"
    },
    "creation_date" : 1747286716,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140426431,
    "post_id" : 79622017,
    "body" : "Your problem is probably that you are drawing the circle outside of its component bounds. Try drawing the circle at 0,0 and moving the component so that it shows up in the right spot.",
    "score" : 0,
    "owner" : {
      "account_id" : 1352170,
      "reputation" : 35259,
      "user_id" : 1291492,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/f914cd02166793195d9d950503f8f739?s=256&d=identicon&r=PG",
      "display_name" : "ControlAltDel",
      "link" : "https://stackoverflow.com/users/1291492/controlaltdel"
    },
    "creation_date" : 1747252445,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140426175,
    "post_id" : 79622017,
    "body" : "Please <a href=\"https://stackoverflow.com/posts/79622017/edit\">edit</a> your question to include your thought process on why you get the Graphics object from your <code>JFrame</code> while at the same time do java swing related component stuff like using labels, buttons and panels <i>on the same target</i>.",
    "score" : 0,
    "owner" : {
      "account_id" : 108033,
      "reputation" : 20089,
      "user_id" : 286934,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f16a184d26b72795ff243464d715cffe?s=256&d=identicon&r=PG",
      "display_name" : "Progman",
      "link" : "https://stackoverflow.com/users/286934/progman"
    },
    "creation_date" : 1747246812,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140426169,
    "post_id" : 79622017,
    "body" : "Don&#39;t attempt to pass the Graphics object of the JFrame to other classes. Swing will create the Graphics object and pass it to the paintComponent() method when a component needs to be painted. Also, don&#39;t override the getX() and getY() methods. Those are methods of the Component class.",
    "score" : 4,
    "owner" : {
      "account_id" : 44852,
      "reputation" : 324711,
      "user_id" : 131872,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/a0ced8e21d2a761db718acb6362b9225?s=256&d=identicon&r=PG",
      "display_name" : "camickr",
      "link" : "https://stackoverflow.com/users/131872/camickr"
    },
    "creation_date" : 1747246763,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140426168,
    "post_id" : 79622017,
    "body" : "Your code runs fine. Can you please edit your problem description. Right now I&#39;m having a hard time understanding what you need to happen. and what is this guy for? <code>sd = new JButton(&quot;ahh&quot;);</code> not being used anywhere",
    "score" : 0,
    "owner" : {
      "account_id" : 209503,
      "reputation" : 23867,
      "user_id" : 460557,
      "user_type" : "registered",
      "accept_rate" : 100,
      "profile_image" : "https://www.gravatar.com/avatar/b4565f97815833390c9c880e9e8522e4?s=256&d=identicon&r=PG",
      "display_name" : "Jorge Campos",
      "link" : "https://stackoverflow.com/users/460557/jorge-campos"
    },
    "creation_date" : 1747246758,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}