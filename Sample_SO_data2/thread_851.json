{
  "question" : {
    "question_id" : 79769733,
    "title" : "Why calling static field with the class is different from use just the variable name?",
    "body" : "<p>Consider the following code:</p>\n<pre><code>public class Example {\n\n     static { System.out.println(Example.value); }\n\n     static final int value = 7;\n\n     public static void main(final String[] args) {    }\n\n}\n</code></pre>\n<p>I expected it not to compile, since value is used before it's declared. Why does this work?</p>\n<p>I then tried with this code, and this doesn't compile as I expected</p>\n<pre><code>public class Example {\n\n    static{ System.out.println(value); }\n\n    static final int value = 7;\n\n    public static void main(final String[] args) {    }\n\n}\n</code></pre>\n<p>This version does not compile, and gives an Illegal forward reference error — which is what I originally expected.</p>\n<p>The question is: Why are these two cases treated differently?</p>\n<p>I have noticed another problem I would love to understand.\nIf I use the first code and use a Integer.parseInt(&quot;7&quot;); it compiles (I don't know why but I think for the same reason of the first code, so because i used the Example.value and not value) but this time doesn't print 7 but 0, surely I can understand that runtime is treated differently but that 0 is surely a default value i think, but final variable can't have default value. So why it compiles, and it also prints 0 (default value)?</p>\n<pre><code>public class Example {\n\n    static{ System.out.println(Example.value); }\n\n    static final int value = Integer.parseInt(&quot;7&quot;);\n\n    public static void main(final String[] args) {    }\n\n}\n</code></pre>\n",
    "tags" : [ "java", "compiler-errors", "static", "final" ],
    "owner" : {
      "account_id" : 19587447,
      "reputation" : 35,
      "user_id" : 14335260,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-M_l6pochhTo/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclzZnExEV-39jaiUPGiwl-pp_STSQ/s256-rj/photo.jpg",
      "display_name" : "user14335260",
      "link" : "https://stackoverflow.com/users/14335260/user14335260"
    },
    "is_answered" : true,
    "view_count" : 170,
    "closed_date" : 1758507898,
    "answer_count" : 1,
    "score" : 2,
    "last_activity_date" : 1758453712,
    "creation_date" : 1758298396,
    "link" : "https://stackoverflow.com/questions/79769733/why-calling-static-field-with-the-class-is-different-from-use-just-the-variable",
    "closed_reason" : "Duplicate"
  },
  "answers" : [ {
    "answer_id" : 79769873,
    "question_id" : 79769733,
    "body" : "<blockquote>\n<p>I expected it not to compile, since value is used before it's declared. Why does this work?</p>\n</blockquote>\n<p>Members of a class are in scope everywhere within the body of the class, including lexically preceding their declarations.  You have very likely relied on this yourself by, for example, having a constructor or method invoke a method declared later in the class.  That a reference to a class variable appears before its declaration is not, by itself, a reason to reject it.</p>\n<blockquote>\n<p>I then tried with this code, and this doesn't compile as I expected</p>\n</blockquote>\n<p>The difference between your first code and your second is that the first refers to the class variable by its qualified name, whereas the second refers to it by its simple name.  Scope notwithstanding, Java explicitly restricts accesses by simple name:</p>\n<blockquote>\n<p><strong>For a reference by simple name to a class variable f declared in class or interface C, it is a compile-time error if</strong>:</p>\n<ul>\n<li>The reference appears either in a class variable initializer of C or in a static initializer of C (§8.7); and</li>\n<li>The reference appears either in the initializer of f's own declarator or at a point to the left of f's declarator; and</li>\n<li>The reference is not on the left hand side of an assignment expression (§15.26); and</li>\n<li>The innermost class or interface enclosing the reference is C.</li>\n</ul>\n</blockquote>\n<p>(<a href=\"https://docs.oracle.com/javase/specs/jls/se25/html/jls-8.html#jls-8.3.3\" rel=\"noreferrer\">JLS25 8.3.3</a>; emphasis in the original)</p>\n<p>That applies to your second code, but there is no such restriction on access by qualified name, such as your first code performs.</p>\n<blockquote>\n<p>If I use the first code and use a <code>Integer.parseInt(&quot;7&quot;);</code> it compiles [...] but this time doesn't print 7 but 0, surely I can understand that runtime is treated differently but that 0 is surely a default value i think, but final variable can't have default value.</p>\n</blockquote>\n<p>Final variables can and do have default values:</p>\n<blockquote>\n<p>Each class variable, instance variable, or array component is initialized with a default value when it is created (§15.9, §15.10.2)</p>\n</blockquote>\n<p>(<a href=\"https://docs.oracle.com/javase/specs/jls/se25/html/jls-4.html#jls-4.12.5\" rel=\"noreferrer\">JLS25 4.12.5</a>)</p>\n<p>Class variables are created as part of <em>preparation</em> of their class (<a href=\"https://docs.oracle.com/javase/specs/jls/se25/html/jls-12.html#jls-12.3.2\" rel=\"noreferrer\">JLS25 12.3.2</a>), which is a separate step before class initialization.  For all intents and purposes, they come into existence with the default value appropriate for their data type.  This is not considered an assignment, so it is not inconsistent with final fields later being assigned a value (once).</p>\n<blockquote>\n<p>So why it compiles,</p>\n</blockquote>\n<p>It compiles because it is valid, same as the first code.</p>\n<blockquote>\n<p>and it also prints 0 (default value)?</p>\n</blockquote>\n<p>It prints 0 because in this case, that's the value of the field at the time the static initializer is executed (as opposed to that value being 7 when the static initializer in the first code is executed).  The difference follows from the fact that in the first code, <code>Example.value</code> is a <em>constant variable</em>, as that term is <a href=\"https://docs.oracle.com/javase/specs/jls/se25/html/jls-4.html#jls-4.12.4\" rel=\"noreferrer\">defined by Java</a>:</p>\n<blockquote>\n<p>A <em>constant variable</em> is a <code>final</code> variable of primitive type or type <code>String</code> that is initialized with a constant expression (§15.29).</p>\n</blockquote>\n<p>As you can see, the same is not true of <code>Example.value</code> in your third code.  This makes a difference for order of initialization, which is described in detail in <a href=\"https://docs.oracle.com/javase/specs/jls/se25/html/jls-12.html#jls-12.4.2\" rel=\"noreferrer\">JLS25, section 12.4.2</a>.  Static fields that are constant variables receive their final values at step 6 of the initialization procedure, but it's not until step 9 where the VM</p>\n<blockquote>\n<p>execute[s ...] the class variable initializers and static initializers of the class, [...] in textual order, as though they were a single block.</p>\n</blockquote>\n<p>It follows that no executable code, not even a static initializer or the initializer of a static variable, can observe the default value of a constant variable.  However, note well &quot;in textual order&quot;, and remember that class variables receive default values before the initialization procedure starts.  Under the right circumstances, then, a static initializer or the initializer of a static variable, if suitably positioned, <em>can and does</em> observe the default values of final class variables that are not constant variables.</p>\n",
    "score" : 10,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 2792262,
      "reputation" : 190832,
      "user_id" : 2402272,
      "user_type" : "registered",
      "accept_rate" : 85,
      "profile_image" : "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=256&d=identicon&r=PG",
      "display_name" : "John Bollinger",
      "link" : "https://stackoverflow.com/users/2402272/john-bollinger"
    },
    "creation_date" : 1758309199,
    "last_activity_date" : 1758309199,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140747856,
    "post_id" : 79769733,
    "body" : "Final fields do have <code>default</code> values which you normally can’t see when trying to access them by simple name, because the compiler does not allow this. But when using a qualified access before the initialization, you can see the default value. That the same for an instance field when using <code>var obj = this; System.out.println(obj.someFinalVariable);</code> before the initialization. Only compile-time constants will never exhibit default values but by using <code>Integer.parseInt(&quot;5&quot;)</code> instead of <code>5</code> you prevented this field from becoming a compile-time constant.",
    "score" : 3,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1758302746,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747817,
    "post_id" : 79769733,
    "body" : "Maybe I&#39;m a bit confused, sorry about that. I&#39;m just experimenting with the code and trying to understand how things work. I&#39;ll try to edit the question to make it clearer. Thanks!",
    "score" : 0,
    "owner" : {
      "account_id" : 19587447,
      "reputation" : 35,
      "user_id" : 14335260,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-M_l6pochhTo/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclzZnExEV-39jaiUPGiwl-pp_STSQ/s256-rj/photo.jpg",
      "display_name" : "user14335260",
      "link" : "https://stackoverflow.com/users/14335260/user14335260"
    },
    "creation_date" : 1758301818,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747792,
    "post_id" : 79769733,
    "body" : "The <code>static {}</code> block precedes the field and initializer, hence, is executed before it. Why should the <code>static final</code> modifier make a difference, especially when you deliberately used a construct to prevent the variable from being a compile-time constant?",
    "score" : 1,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1758300690,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747784,
    "post_id" : 79769733,
    "body" : "Actually, I used Example.value because I noticed that using just value gives a compile error (Illegal forward reference), and I wanted to see if qualifying it with the class name made any difference. The fact that it prints 0 instead of doesn&#39;t compile is what surprised me — I wasn’t expecting that behavior. That’s exactly what I’m trying to understand here.",
    "score" : 1,
    "owner" : {
      "account_id" : 19587447,
      "reputation" : 35,
      "user_id" : 14335260,
      "user_type" : "registered",
      "profile_image" : "https://lh5.googleusercontent.com/-M_l6pochhTo/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclzZnExEV-39jaiUPGiwl-pp_STSQ/s256-rj/photo.jpg",
      "display_name" : "user14335260",
      "link" : "https://stackoverflow.com/users/14335260/user14335260"
    },
    "creation_date" : 1758300523,
    "content_license" : "CC BY-SA 4.0"
  }, {
    "comment_id" : 140747780,
    "post_id" : 79769733,
    "body" : "You deliberately used <code>Example.value</code> instead of just <code>value</code> which suggests you actually know the answer—it works because you used a special construct to get exactly the result you got. Likewise, you used <code>Integer.parseInt(&quot;5&quot;)</code> instead of a straight-forward <code>5</code>, again, a construct specifically chosen to make this example work.",
    "score" : 2,
    "owner" : {
      "account_id" : 3211603,
      "reputation" : 301001,
      "user_id" : 2711488,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/t2hoD.jpg?s=256",
      "display_name" : "Holger",
      "link" : "https://stackoverflow.com/users/2711488/holger"
    },
    "creation_date" : 1758300340,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}