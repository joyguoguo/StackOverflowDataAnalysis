{
  "question" : {
    "question_id" : 79559015,
    "title" : "Azure Function - Kafka Trigger - Certificates path",
    "body" : "<p>I am creating Azure Function using Kafka Trigger with Java, to consume data from a cluster Kafka.\nActually i get the this error.</p>\n<pre><code>Microsoft.Azure.WebJobs.Host: Error indexing method Functions.KafkaTriggerReceiveResponse. Microsoft.Azure.WebJobs.Extensions.Kafka: &lt;path-with-error&gt; is not a valid file location\n</code></pre>\n<p>Â¿How i reference to the certificates path? For parameters sslCertificateLocation, sslKeyLocation.</p>\n<pre><code>@KafkaTrigger(\nname = &quot;kafkaMeetingTrigger&quot;,\ntopic = &quot;topicName&quot;,\nbrokerList = &quot;%BrokerList%&quot;,\ncardinality = Cardinality.ONE,\nsslCertificateLocation = &quot;%KafkaCertPath%&quot;,\nsslKeyLocation = &quot;%KafkaCertPath%&quot;,\nprotocol = BrokerProtocol.SSL,\ndataType = &quot;binary&quot;,\nconsumerGroup=&quot;%ConsumerGroup%&quot;) byte[] kafkaEventData,\n</code></pre>\n",
    "tags" : [ "java", "azure", "apache-kafka", "azure-functions" ],
    "owner" : {
      "account_id" : 17946439,
      "reputation" : 1,
      "user_id" : 13040610,
      "user_type" : "registered",
      "profile_image" : "https://lh3.googleusercontent.com/a-/AOh14GipgIthZyEdC1XnGpfbPyLKiaucMjgKkGaqDgqk=k-s256",
      "display_name" : "JosePanta01",
      "link" : "https://stackoverflow.com/users/13040610/josepanta01"
    },
    "is_answered" : false,
    "view_count" : 181,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1744714474,
    "creation_date" : 1743996367,
    "link" : "https://stackoverflow.com/questions/79559015/azure-function-kafka-trigger-certificates-path",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79574980,
    "question_id" : 79559015,
    "body" : "<blockquote>\n<p>Microsoft.Azure.WebJobs.Host: Error indexing method Functions.KafkaTriggerReceiveResponse. Microsoft.Azure.WebJobs.Extensions.Kafka:  is not a valid file location</p>\n</blockquote>\n<p>This error suggests that <strong>Azure Functions cannot find the file specified by the <code>sslCertificateLocation</code> or <code>sslKeyLocation</code></strong> when initializing the Kafka trigger.</p>\n<ul>\n<li>you are using same location to both sslCertificateLocation and sslKeyLocation as %KafkaCertPath%.</li>\n<li>It should be define two different paths like below:</li>\n</ul>\n<pre><code>sslCertificateLocation = &quot;%KafkaCertPath%&quot;,\nsslKeyLocation = &quot;%KafkaKeyPath%&quot;\n</code></pre>\n<p>Check the cert files are included in the <code>resources</code> or <code>target</code> folder and get deployed with the app.</p>\n<p><strong>Pom.xml</strong></p>\n<pre><code>&lt;resources&gt;\n  &lt;resource&gt;\n    &lt;directory&gt;src/main/resources&lt;/directory&gt;\n    &lt;includes&gt;\n      &lt;include&gt;**/*.pem&lt;/include&gt;\n      &lt;include&gt;**/*.key&lt;/include&gt;\n    &lt;/includes&gt;\n  &lt;/resource&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>File paths are must be given in <strong>local.settings.json</strong> like below:</p>\n<pre><code>{\n  &quot;IsEncrypted&quot;: false,\n  &quot;Values&quot;: {\n    &quot;KafkaCertPath&quot;: &quot;C:\\\\path\\\\to\\\\your\\\\client.pem&quot;,\n    &quot;KafkaKeyPath&quot;: &quot;C:\\\\path\\\\to\\\\your\\\\client.key&quot;\n  }\n}\n</code></pre>\n<p>you can change the annotation as below:</p>\n<pre><code>@KafkaTrigger(\n    name = &quot;kafkaMeetingTrigger&quot;,\n    topic = &quot;topicName&quot;,\n    brokerList = &quot;%BrokerList%&quot;,\n    cardinality = Cardinality.ONE,\n    sslCertificateLocation = &quot;%KafkaCertPath%&quot;,\n    sslKeyLocation = &quot;%KafkaKeyPath%&quot;,\n    protocol = BrokerProtocol.SSL,\n    dataType = &quot;binary&quot;,\n    consumerGroup=&quot;%ConsumerGroup%&quot;)\nbyte[] kafkaEventData,\n</code></pre>\n<p>You can observe in the above annotation, both sslKeyLocation and sslCertificateLocation paths are different.</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 28166626,
      "reputation" : 1487,
      "user_id" : 21525734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f48a3a4cd797466cbc5271f5e0e92f5b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Pavan",
      "link" : "https://stackoverflow.com/users/21525734/pavan"
    },
    "creation_date" : 1744714474,
    "last_activity_date" : 1744714474,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ {
    "comment_id" : 140335314,
    "post_id" : 79559015,
    "body" : "If you are using environment variables like <code>%KafkaCertPath%</code>, make sure they&#39;re set correctly in the <code>local.settings.json</code> (for local dev) or in the Azure Function App Settings (for deployed apps), and that they point to actual files that exist in the deployed directory (like under D:\\home\\site\\wwwroot\\certs&#41;.",
    "score" : 1,
    "owner" : {
      "account_id" : 28166626,
      "reputation" : 1487,
      "user_id" : 21525734,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/f48a3a4cd797466cbc5271f5e0e92f5b?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "Pavan",
      "link" : "https://stackoverflow.com/users/21525734/pavan"
    },
    "creation_date" : 1744692312,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "answer_comments" : { }
}