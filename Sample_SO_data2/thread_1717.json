{
  "question" : {
    "question_id" : 79685116,
    "title" : "laravel response status code is always 200 in android retrofit",
    "body" : "<p>I have an android app which uses laravel as backend. The problem is that laravel always send a 200 status code instead of sending the proper 400 status code. here is my code in laravel:</p>\n<pre><code>public function loginWithUsername(Request $request)\n    {\n        $data = $request-&gt;only('username', 'password');\n        $rules = [\n            'username' =&gt; 'required|max:255',\n            'password' =&gt; 'required',\n        ];\n        $validator = Validator::make($data, $rules);\n        if ($validator-&gt;fails() === true) {\n            return response()-&gt;json(['errors' =&gt; $validator-&gt;errors()], 422)-&gt;send();\n        } else {\n            $username = $request-&gt;username;\n            $user = User::where('username', $username)-&gt;first();\n            if (! $user) {\n                return response()-&gt;json(['error' =&gt; __('messages.invalid-username')], 404)-&gt;send();\n            } else if (! Hash::check($request-&gt;password, $user-&gt;password)) {\n                return response()-&gt;json(['error' =&gt; __('messages.invalid-password')], 401)-&gt;send();\n            }\n        //...\n        }\n    }\n</code></pre>\n<p>and my android code:</p>\n<pre><code>public MutableLiveData&lt;Response&lt;ResponseBody&gt;&gt; loginUsingUsername(String username, String password) {\n        MutableLiveData&lt;Response&lt;ResponseBody&gt;&gt; liveData = new MutableLiveData&lt;&gt;();\n        Call&lt;ResponseBody&gt; call = apiService.loginUsingUsername(username, password);\n        call.enqueue(new Callback&lt;ResponseBody&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) {\n                Log.i(TAG, &quot;isSuccessful: &quot; + response.isSuccessful());\n                Log.i(TAG, &quot;loginUsingUsername in repo --&gt; response.code:&quot; + response.code());\n                liveData.setValue(response); // Return the whole response (including status code)\n            }\n\n            @Override\n            public void onFailure(Call&lt;ResponseBody&gt; call, Throwable t) {\n                Log.e(TAG, &quot;Network failure: &quot; + t.getMessage());\n                liveData.setValue(null);\n            }\n        });\n        return liveData;\n    }\n</code></pre>\n<p>Note that if the username or password is invalid I receive 200 status code instead of 404 or 401.</p>\n",
    "tags" : [ "java", "php", "android", "laravel", "retrofit" ],
    "owner" : {
      "account_id" : 29778772,
      "reputation" : 11,
      "user_id" : 22821993,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8263f7f0e4652131acb5f3f6ec8e7525?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mex19903",
      "link" : "https://stackoverflow.com/users/22821993/mex19903"
    },
    "is_answered" : true,
    "view_count" : 60,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1751310320,
    "creation_date" : 1751304319,
    "link" : "https://stackoverflow.com/questions/79685116/laravel-response-status-code-is-always-200-in-android-retrofit",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79685186,
    "question_id" : 79685116,
    "body" : "<p>I finally found the solution. Just remove the crazy translate function <code>__('messages.invalid-password')</code> and it will work fine. Also, you may need to remove the <code>send()</code> function.</p>\n<pre><code>return response()-&gt;json(['error' =&gt; 'Invalid Password'], 401);\n</code></pre>\n",
    "score" : 0,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 29778772,
      "reputation" : 11,
      "user_id" : 22821993,
      "user_type" : "registered",
      "profile_image" : "https://www.gravatar.com/avatar/8263f7f0e4652131acb5f3f6ec8e7525?s=256&d=identicon&r=PG&f=y&so-version=2",
      "display_name" : "mex19903",
      "link" : "https://stackoverflow.com/users/22821993/mex19903"
    },
    "creation_date" : 1751309780,
    "last_activity_date" : 1751310320,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}