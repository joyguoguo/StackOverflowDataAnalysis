{
  "question" : {
    "question_id" : 79638684,
    "title" : "Issue with java RCON connection",
    "body" : "<p>Code:</p>\n<p>Main.java:</p>\n<pre><code>public class Main {\npublic static void main(String[] args) {\n    rconnect.connect(&quot;list&quot;);\n}}\n</code></pre>\n<p>rconnect.java:</p>\n<pre><code>import net.kronos.rkon.core.Rcon;\n\npublic class rconnect {\n    //danger area\n    private final static int port = 00000;\n    private final static String ipAddress = &quot;000.000.000.000&quot;;\n    private final static String passwd = &quot;xxxxx&quot;;\n\n    public static void connect(String cmd) {\n        Rcon rcon;\n        String returnState;\n        try {\n            rcon = new Rcon(ipAddress, port, passwd.getBytes());\n            returnState = rcon.command(cmd);\n            System.out.println(returnState);\n        } catch (java.io.IOException | net.kronos.rkon.core.ex.AuthenticationException e) {\n            System.err.println(e.getMessage());\n        }\n        //return returnState;\n    } }\n</code></pre>\n<p>this code gives this error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NegativeArraySizeException: -99024397\nat net.kronos.rkon.core.RconPacket.read(RconPacket.java:125)\nat net.kronos.rkon.core.RconPacket.send(RconPacket.java:65)\nat net.kronos.rkon.core.Rcon.send(Rcon.java:107)\nat net.kronos.rkon.core.Rcon.connect(Rcon.java:68)\nat net.kronos.rkon.core.Rcon.&lt;init&gt;(Rcon.java:36)\nat kotokott.rconnect.connect(rconnect.java:15)\nat kotokott.Main.main(Main.java:16)\n</code></pre>\n<p>the server's up and running, everything's working fine. I used RconCore(<a href=\"https://github.com/Pequla/RconCore\" rel=\"nofollow noreferrer\">https://github.com/Pequla/RconCore</a>) library. Everything worked fine before that. Please help me</p>\n",
    "tags" : [ "java", "minecraft", "rcon" ],
    "owner" : {
      "account_id" : 41246480,
      "reputation" : 21,
      "user_id" : 30195210,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/VL6mXKth.jpg?s=256",
      "display_name" : "SleepyCat",
      "link" : "https://stackoverflow.com/users/30195210/sleepycat"
    },
    "is_answered" : true,
    "view_count" : 94,
    "answer_count" : 1,
    "score" : 1,
    "last_activity_date" : 1748266027,
    "creation_date" : 1748252818,
    "link" : "https://stackoverflow.com/questions/79638684/issue-with-java-rcon-connection",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79638865,
    "question_id" : 79638684,
    "body" : "<p>While trying to connect to the server the <code>RconPacket</code> class receives the size that it uses to create a buffer for the payload:</p>\n<pre><code>int length = buffer.getInt();\nint requestId = buffer.getInt();\nint type = buffer.getInt();\n            \n// Payload size can be computed now that we have its length\nbyte[] payload = new byte[length - 4 - 4 - 2];\n</code></pre>\n<p>In this case <code>length</code> is negative for some reason. Trying to create an array of negative size causes the exception.</p>\n<p>Why this happens? We don't have enough information of what is happening on your system. I can only guess that the server is sending an incorrect response or the program connected to the wrong server.</p>\n",
    "score" : -1,
    "is_accepted" : true,
    "owner" : {
      "account_id" : 372682,
      "reputation" : 26512,
      "user_id" : 721855,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/vZiox.png?s=256",
      "display_name" : "aled",
      "link" : "https://stackoverflow.com/users/721855/aled"
    },
    "creation_date" : 1748260636,
    "last_activity_date" : 1748266027,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}