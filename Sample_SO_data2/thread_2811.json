{
  "question" : {
    "question_id" : 79596504,
    "title" : "Selenium Driver can&#39;t switch to Alert",
    "body" : "<p>In my tests (running on Chrome), there are some scenarios when I click on a call-to-action button, then I am redirected to another page where basic authentication alert is present and I need to login.</p>\n<p>This Authentication alert is appeared only sometimes, therefore I want to check if there is an alert, before I can bypass it. Below is my code to check if there is an alert:</p>\n<pre><code>public static boolean isAlertPresent(WebDriver driver) {\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));\n    try {\n      wait.until(ExpectedConditions.alertIsPresent());\n      // driver.switchTo().alert();\n      return true;\n    } catch (TimeoutException eTO) {\n        return false;\n    }\n}\n</code></pre>\n<p>But it seems that this alert is not detected, because it always returns <code>false</code>. I also try  <code>driver.switchTo().alert()</code> but I got <code>NoAlertPresentException</code></p>\n<p>Here is the screenshot of this alert\n<a href=\"https://i.sstatic.net/mc6qrdDs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.sstatic.net/mc6qrdDs.png\" alt=\"enter image description here\" /></a></p>\n<p>My workaround is that I pass the username and password in URL, without checking if there is an alert or not, as below:</p>\n<pre><code>driver.get(&quot;https://&lt;username&gt;:&lt;password&gt;@website_url&quot;)\n</code></pre>\n<p>It does the job, but it doesn't look good.</p>\n<p>Does anyone know how to switch to basic auth alert in this case, or why is this basic auth alert not detected? Thanks</p>\n",
    "tags" : [ "java", "selenium-webdriver", "alert" ],
    "owner" : {
      "account_id" : 1039365,
      "reputation" : 1845,
      "user_id" : 1045780,
      "user_type" : "registered",
      "accept_rate" : 79,
      "profile_image" : "https://i.sstatic.net/TPgdW.jpg?s=256",
      "display_name" : "Ragnarsson",
      "link" : "https://stackoverflow.com/users/1045780/ragnarsson"
    },
    "is_answered" : false,
    "view_count" : 72,
    "answer_count" : 1,
    "score" : 0,
    "last_activity_date" : 1746119315,
    "creation_date" : 1745844314,
    "link" : "https://stackoverflow.com/questions/79596504/selenium-driver-cant-switch-to-alert",
    "content_license" : "CC BY-SA 4.0"
  },
  "answers" : [ {
    "answer_id" : 79602260,
    "question_id" : 79596504,
    "body" : "<p>The popup which you are getting is a basic authentication popup which is not a part of HTML DOM, hence Selenium cannot directly access it.</p>\n<p>Your current workaround of username:password@url is the best but as you mentioned it does not look good. I have tried the below solution in my project which worked for me.</p>\n<p>Try to use CDP capability offered by selenium 4. Make sure you are using the latest version of selenium and chrome so that they are compatible with each other. You can check the compatibility</p>\n<p>Since you mentioned that Authentication alert appears only sometimes. First create a method to check if it is appearing. In this way we can avoid passing headers in all requests unless it is necessary</p>\n<pre><code>public static int isAuthRequired(String urlStr) throws Exception { //this method would return 401 if there is an authentication required.\n        URL url = new URL(urlStr);\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        connection.setRequestMethod(&quot;GET&quot;);\n        connection.connect();\n        int responseCode = connection.getResponseCode();\n        connection.disconnect();\n        return responseCode;\n    }\n\n    public static void main(String[] args) throws Exception {\n        ChromeDriver driver;\n        String url = &quot;your url goes here&quot;;\n        String username = &quot;your username goes here&quot;;\n        String password = &quot;your password goes here&quot;;\n        ChromeOptions co = new ChromeOptions();\n        driver = new ChromeDriver(co);\n        if(isAuthRequired(url) == 401){//The below code would be executed only in case of authentication is required\n            DevTools dt = driver.getDevTools();\n            dt.createSession();\n            dt.send(Network.enable(Optional.empty(), Optional.empty(), Optional.empty()));\n            String auth = &quot;Basic &quot; + Base64.getEncoder().encodeToString((username+&quot;:&quot;+password).getBytes());\n            Headers h = new Headers(new HashMap&lt;&gt;());\n            h.put(&quot;Authorization&quot;, auth);\n            dt.send(Network.setExtraHTTPHeaders(h));\n        }\n        driver.get(url);\n    }\n</code></pre>\n<p>In the main method we need to create a chrome session, enable devtools network domain and then instantiate basic auth header and inject it using Network.setExtraHTTPHeaders method</p>\n",
    "score" : 0,
    "is_accepted" : false,
    "owner" : {
      "account_id" : 8061800,
      "reputation" : 59,
      "user_id" : 6077123,
      "user_type" : "registered",
      "profile_image" : "https://i.sstatic.net/CRJBXZrk.jpg?s=256",
      "display_name" : "Venkat Sai",
      "link" : "https://stackoverflow.com/users/6077123/venkat-sai"
    },
    "creation_date" : 1746119315,
    "last_activity_date" : 1746119315,
    "content_license" : "CC BY-SA 4.0"
  } ],
  "question_comments" : [ ],
  "answer_comments" : { }
}